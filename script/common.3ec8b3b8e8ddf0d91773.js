/*! BUILD 4.8.1697 | 2018-02-16T17:02:08.803Z */
webpackJsonp([2],[,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(142),l=r(s),u=n(1128),c=r(u),d=n(272),f=r(d),p=n(33),m=r(p),g=n(11),h=r(g),v=n(70),E=r(v),y=n(105),b=r(y),_=n(69),S=r(_),O=n(49),P=r(O),T=n(6),A=r(T),C=n(96),I=r(C),w=n(48),N=r(w),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=n(0),L=n(1),k=r(L),D=n(67),U=n(348),j=n(170),F=function(e,t,n){var r=Array.isArray(e)?e:[e],a=!1;return r.forEach(function(e){(0,b.default)(e)?a=a||!(0,P.default)((0,A.default)(t,e),(0,A.default)(n,e)):(0,S.default)(e)&&(a=a||e(t,n))}),a},B=function(e,t){return(0,h.default)(e,function(e){var n=e.subscriptionKey,r=e.callback;return{subscriptionKey:n,callback:r||function(e){return t((0,j.process)(n,e))}}})},H=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(r.constructor===t)throw new TypeError("Cannot construct Abstract instances directly");return r.uid=Math.random().toString(16).slice(2)+Date.now(),r.eventListeners=[],r.socketEvents=[],r.state={},r.t=function(e,t,n){return r.context.i18n.trans(e,t,n)},r.twl=function(e,t,n){return r.context.i18n.transWhiteLabel(e,t,n)},r.c=D.classNames,r.propsUpdateToActionsMap=[],r.renderIf=D.renderIf,r}return i(t,e),R(t,[{key:"componentWillMount",value:function(){this.setState(this.getDefaultState()),this.registerSocketEvents(this.props,this.context),this.componentWillRender({},{},{})}},{key:"getDefaultState",value:function(){return this.getNextState(this.props,this.context)}},{key:"getNextState",value:function(e,t){return{}}},{key:"getSocketEventBindings",value:function(e,t){return[]}},{key:"setStateIfModified",value:function(e,t){(0,P.default)(e,(0,m.default)(this.state,(0,E.default)(e)))||this.setState(e,t)}},{key:"componentWillRender",value:function(e,t,n){}},{key:"shouldSocketResubscribe",value:function(e,t){return!(0,U.isShallowEqual)(this.props,e)}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.componentDidRender({},{},{}),this.processPropsUpdateToActionsMap({},this.props)}},{key:"componentWillReceiveProps",value:function(e,t){this.processPropsUpdateToActionsMap(this.props,e),this.shouldSocketResubscribe(e,t)&&this.updateRegisteredSocketEvents(e,t),this.setStateIfModified(this.getNextState(e,t))}},{key:"componentWillUpdate",value:function(e,t,n){this.componentWillRender(e,t,n)}},{key:"componentDidUpdate",value:function(e,t,n){this.componentDidRender(e,t,n)}},{key:"componentDidRender",value:function(e,t,n){}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.removeRegisteredBindings(this.props,this.context)}},{key:"processPropsUpdateToActionsMap",value:function(e,t,n){this.propsUpdateToActionsMap.forEach(function(r){F(r.update,e,t)&&r.action(t,n)})}},{key:"removeRegisteredBindings",value:function(e,t){this.removeRegisteredEventListeners(),this.removeRegisteredSocketEvents(e,t)}},{key:"registerEventListener",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,l.default)(this.eventListeners,{target:e,type:t,callback:n})||(this.eventListeners.push({target:e,type:t,callback:n}),e.addEventListener(t,n,r))}},{key:"removeRegisteredEventListener",value:function(e,t,n){(0,c.default)(this.eventListeners,{target:e,type:t,callback:n}),e.removeEventListener(t,n,!1)}},{key:"removeRegisteredEventListeners",value:function(){this.eventListeners.forEach(function(e){e.target.removeEventListener(e.type,e.callback,!1)}),this.eventListeners=[]}},{key:"updateRegisteredSocketEvents",value:function(e,t){var n=this;if(t.store){var r=B(this.getSocketEventBindings(e,t),t.store.dispatch);(0,I.default)((0,f.default)(r,function(e){var t=e.subscriptionKey;return(0,N.default)(n.socketEvents,{subscriptionKey:t})}),function(e){var r=e.subscriptionKey,a=e.callback;t.store.dispatch((0,j.subscribe)(r,a)),n.socketEvents.push({subscriptionKey:r,callback:a})}),(0,I.default)((0,f.default)(this.socketEvents,function(e){var t=e.subscriptionKey;return(0,N.default)(r,{subscriptionKey:t})}),function(e){var r=e.subscriptionKey,a=e.callback;t.store.dispatch((0,j.unsubscribe)(r,a)),(0,c.default)(n.socketEvents,{subscriptionKey:r})})}}},{key:"registerSocketEvents",value:function(e,t){if(t.store){var n=B(this.getSocketEventBindings(e,t),t.store.dispatch);this.socketEvents=(0,h.default)(n,function(e){var n=e.subscriptionKey,r=e.callback;return t.store.dispatch((0,j.subscribe)(n,r)),{subscriptionKey:n,callback:r}})}}},{key:"removeRegisteredSocketEvents",value:function(e,t){(0,c.default)(this.socketEvents,function(e){var n=e.subscriptionKey,r=e.callback;return t.store.dispatch((0,j.unsubscribe)(n,r)),!0})}},{key:"render",value:function(){return null}}]),t}(M.Component);H.contextTypes={store:k.default.object,i18n:k.default.object,router:k.default.object},t.default=H},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HTTP_CODES=t.ALPHABET=t.APP_BUTTONS=t.MODAL_PERSISTENCE_KEYS=t.MODAL_TYPES=t.DEFAULT_LOAD_MORE_SIZE=t.DEFAULT_RESIZE_EVENT_DEBOUNCE_WAIT=t.DEFAULT_SCROLL_EVENT_DEBOUNCE_WAIT=t.DEFAULT_SCROLL_EVENT_THROTTLE_WAIT=t.DEFAULT_RESIZE_EVENT_THROTTLE_WAIT=t.BROWSER_CAPABILITIES=t.MEDIA_BREAKPOINTS=t.TYPES_OF_IMAGE_SIZES=t.DATE_INTERVALS=t.LANGUAGES=t.KEY_CODES=t.DEFAULT_VOLUME_MODEL=t.DEFAULT_VOLUME_USER=t.DEFAULT_MAX_TEXTAREA_LENGTH=t.DEFAULT_MAX_INPUT_LENGTH=t.DEFAULT_ERROR_HEADER_NOTIFICATION_TIMEOUT=t.NETWORK_ERROR_HEADER_NOTIFICATION_TIMEOUT=t.TRANSITION_FADE_DELAY=t.TRANSITION_SLIDE_ANIMATION_DELAY=t.DEFAULT_HEADER_NOTIFICATION_TIMEOUT=t.HEADER_TOP_HEIGHT=t.ERROR_CODES=t.DEV_PARAMS=t.API_METHODS=t.ENV=t.DEFAULT_REQUEST_TYPE=t.BASE_DOMAIN_CDN=t.IMPROVE_STRIPCHAT_URL=t.FACEBOOK_URL=t.INSTAGRAM_URL=t.TWITTER_URL=t.COMET_PATH=t.BYTES_IN_MEGABYTE=t.BASE_URL_ROOT=t.BASE_URL=t.AUDIO_READY_STATE=t.AUDIO_PRELOAD_TYPES=void 0;var a=n(84),o=r(a),i=n(6),s=r(i),l=n(56),u=r(l),c=n(141),d=(t.AUDIO_PRELOAD_TYPES={AUTO:"auto",METADATA:"metadata",NONE:"none"},t.AUDIO_READY_STATE={HAS_NOTHING:0,HAS_METADATA:1,HAS_CURRENT_DATA:2,HAS_FUTURE_DATA:3,HAS_ENOUGH_DATA:4},t.BASE_URL="undefined"!=typeof window?window.location.protocol+"//"+window.location.hostname:"",t.BASE_URL_ROOT="undefined"!=typeof window?window.location.protocol+"//"+window.location.hostname.split(/(\w+\.?\w+)\/?$/)[1]:"",t.BYTES_IN_MEGABYTE=1048576,t.COMET_PATH="/comet",t.TWITTER_URL="https://twitter.com/stripchat",t.INSTAGRAM_URL="https://www.instagram.com/stripchat.official/",t.FACEBOOK_URL="https://www.facebook.com/stripchatofficial/",t.IMPROVE_STRIPCHAT_URL="http://suggestions.stripchat.com",t.BASE_DOMAIN_CDN="stripcdn.com",t.DEFAULT_REQUEST_TYPE="json",t.ENV={PRODUCTION:"production",DEVELOPMENT:"dev",TEST:"test",STAGING:"staging"},t.API_METHODS={GET:"GET",POST:"POST",PUT:"PUT",DEL:"DELETE",COMPOSITE:"POST"},t.DEV_PARAMS={fakeUserId:parseInt(u.default.get("userId"),10)||null,forcePlayerType:u.default.get("forcePlayerType",""),useFixtures:Boolean(u.default.get("useFixtures",""))},t.ERROR_CODES={INVALID_JSON_ERROR:"INVALID_JSON_ERROR",INVALID_PROP_ERROR:"INVALID_PROP_ERROR",UNHANDLED_ERROR:"UNHANDLED_ERROR"},t.HEADER_TOP_HEIGHT=51,t.DEFAULT_HEADER_NOTIFICATION_TIMEOUT=0,t.TRANSITION_SLIDE_ANIMATION_DELAY=120,t.TRANSITION_FADE_DELAY=500,t.NETWORK_ERROR_HEADER_NOTIFICATION_TIMEOUT=3e4,t.DEFAULT_ERROR_HEADER_NOTIFICATION_TIMEOUT=1e4,t.DEFAULT_MAX_INPUT_LENGTH=255,t.DEFAULT_MAX_TEXTAREA_LENGTH=1e4,t.DEFAULT_VOLUME_USER=50,t.DEFAULT_VOLUME_MODEL=80,t.KEY_CODES={arrowUp:38,arrowDown:40,arrowLeft:37,arrowRight:39,backspace:8,enter:13,escape:27,pageUp:34,pageDown:33,tab:9,sChar:83,comma:188,period:190},t.LANGUAGES={en:"English",es:"Espanol",pt:"Português",po:"Polski",de:"Deutsch",it:"Italiano",cn:"日本語",fr:"Francais",ru:"Русский",nl:"Nederlands"},t.DATE_INTERVALS={TODAY:"today",LAST_24_HOURS:"last24hours",YESTERDAY:"yesterday",THIS_WEEK:"thisWeek",THIS_MONTH:"thisMonth",LAST_MONTH:"lastMonth",THIS_YEAR:"thisYear",CUSTOM:"custom"},t.TYPES_OF_IMAGE_SIZES={FULL:"full",SMALL:"small",BIG:"big",ORIGINAL:"original",THUMB:"thumb"},t.MEDIA_BREAKPOINTS={MEDIA_BREAKPOINT_XS:480,MEDIA_BREAKPOINT_S:640,MEDIA_BREAKPOINT_M:1024,MEDIA_BREAKPOINT_L:1366},"undefined"!=typeof navigator?navigator.userAgent:""),f="undefined"!=typeof navigator?navigator.platform:"",p="undefined"!=typeof navigator?navigator.plugins:null,m="undefined"!=typeof navigator?(0,s.default)(navigator,"mediaDevices.getUserMedia","getUserMedia"):null,g="undefined"!=typeof window&&"ontouchstart"in window,h="undefined"!=typeof navigator?navigator.msMaxTouchPoints:0,v="undefined"!=typeof window&&window.matchMedia,E="undefined"!=typeof window&&window.devicePixelRatio,y=/(Android|android)/g.test(d),b=y&&/(Chrome|chrome)/g.test(d),_=/^(Win32|Win64|MacIntel|MacPPC|Linux x86_64|Linux x86_32|Linux i686)/g.test(f),S=/Edge/g.test(d),O=/Trident\/7.0/g.test(d),P=O||/([MS]?IE) (\d+)\.(\d+)/g.test(d),T=/(iPad)/g.test(d)||/(iPad)/g.test(f),A=/(iPhone|iPod)/g.test(d)||/(iPhone|iPod)/g.test(f),C=T||A,I=/(OPR|Opera)/g.test(d),w=/(YaBrowser)/g.test(d),N=/Safari/g.test(d)&&!/Chrome/g.test(d),R=N&&A,M=function(){return v("(orientation: landscape)").matches?"landscape":"portrait"},L=/(Windows Phone|WPDesktop)/g.test(d),k=!C&&!S&&!y&&!L&&d.match(/Chrom(?:e|ium)\/([0-9]+)\./),D=k?parseInt(k[1],10):NaN,U=/Firefox/g.test(d),j=U&&!/(Mobile|Tablet)/g.test(d),F=U&&/(Mobile|Tablet)/g.test(d),B=parseInt((0,s.default)(d.match(/Firefox\/(\d+(?:\.\d+)+)/),"1",""),10),H=p&&p["Shockwave Flash"],V="undefined"!=typeof window&&(0,o.default)(window,"MediaSource",!0),G=/Mobile|Opera|BOLT|Fennec|Iris|Maemo|Minimo|Mobi|mowser|NetFront|Novarra|Prism|RX-34|Skyfire|Tear/.test(d)&&!_&&!T,x=T||y&&!G,W="undefined"!=typeof document&&function(){var e=document.createElement("video");return!!e.canPlayType&&((e.canPlayType("application/x-mpegURL")||e.canPlayType("application/vnd.apple.mpegURL"))&&"probably"===e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))}(),Y="undefined"!=typeof document&&(document.fullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled),K=t.BROWSER_CAPABILITIES={alohaBrowser:/(AlohaBrowser)/g.test(d),android:y,androidChrome:b,chromeDesktop:k,desktop:_,edge:S,firefox:U,firefoxDesktop:j,firefoxMobile:F,flash:H,flashVersion:H?p["Shockwave Flash"].description:"N/A",fullScreenEnabled:Y,hasGetUserMedia:Boolean(m),hlsSupport:W,ie:P,ie11:O,isMobile:G,isTablet:x,iOS:C,iPad:T,iPhoneOrIPod:A,inlineVideo:v&&v("(-webkit-video-playable-inline)").matches,mac:/(mac|Mac)/.test(f?f:d),opera:I,retina:function(){return v&&v("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches||E>1}(),safari:N,safariMobile:R,getScreenOrientation:M,touch:g||h>0,ucbrowser:/(UC.*Browser|UCWEB)/g.test(d),webkit:!!/webkit/.test(d)&&parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),windows:/(Win|win)/.test(f?f:d),windowsPhone:L,yaBrowser:w},q="undefined"!=typeof document&&/(creative.stripchat.com)/.test((0,s.default)(document,"referrer","")),z=j&&B>=54||D>=58;K.isFlashPlayer=!q&&(K.flash&&!K.android||z),K.isDashPlayer=V,K.isWebRTCPlayer=c.isWebRTCSupported&&!K.yaBrowser&&!K.opera&&!K.iOS,K.isHTML5Player=A&&K.inlineVideo||W&&!A&&!K.ucbrowser;t.DEFAULT_RESIZE_EVENT_THROTTLE_WAIT=200,t.DEFAULT_SCROLL_EVENT_THROTTLE_WAIT=50,t.DEFAULT_SCROLL_EVENT_DEBOUNCE_WAIT=50,t.DEFAULT_RESIZE_EVENT_DEBOUNCE_WAIT=50,t.DEFAULT_LOAD_MORE_SIZE=30,t.MODAL_TYPES={ADD_TO_FAVORITES_LIMIT:"addToFavoritesLimit",ADD_TO_FAVORITES:"addToFavorites",AUTH:"auth",BAN_CONFIRMATION:"banConfirmation",BLACK_FRIDAY:"blackFriday",CONFIRM_EMAIL:"confirmEmail",CHRISTMAS_PROMO_2017:"christmasPromo2017",DELETE_ACCOUNT:"deleteAccount",EDIT_ALBUM:"editAlbum",EDIT_VIDEO:"editVideo",FEATURE_ANNOUNCEMENT:"featureAnnouncement",INVISIBLE_MODE:"invisibleMode",MODEL_WARNING:"modelWarning",NEW_LOGO:"newLogo",NEW_YEAR_PROMO:"newYearPromo",PURCHASE_TOKENS:"purchaseTokens",SEND_OFFLINE_TIP:"sendOfflineTip",SEND_TIP:"sendTip",START_PRIVATE:"startPrivate",TECHNICAL_PROBLEM:"technicalProblem",TOKENS_GIVEAWAY:"tokensGiveaway",USER_LEVELS:"userLevels",VISITORS_AGREEMENT:"visitorsAgreement",WATCH_VIDEO:"watchVideo"},t.MODAL_PERSISTENCE_KEYS={VIDEOS_FEATURE:"featureAnnouncementVideo"},t.APP_BUTTONS={ADD_TO_FAVORITES_MODAL_ADD:"AddToFavoritesModal_AddBtn",ADVERTISEMENT_GIFT_CARDS:"Advertisement_GiftCardLink",ADVERTISEMENT_IDEAL_PAYMENT:"Advertisement_IdealPaymentLink",ADVERTISEMENT_PAYMENT_METHODS:"Advertisement_PaymentMethodsLink",ADVERTISEMENT_PAYMENT_METHOD_PRZELEWY:"Banner_Przelewy24_Promo",ACCEPT_VISITOR_AGREEMENT_BUTTON:"AcceptVisitorAgreementBtn",BLACK_FRIDAY_GIVEAWAY_BANNER:"Advertisement_BlackFriday2017",EMOJI_ERROR_SUBSCRIBE:"EmojiError_SubscribeLink",FAVORITES_LIMIT_REACHED:"FavsLimitReached",GIVEAWAY_MODAL_REGISTER:"Giveaway_ModalRegisterBtn",GIVEAWAY_REGISTER:"Giveaway_MainRegisterBtn",GIVEAWAY_SYSTEM_MESSAGE_REGISTER:"Giveaway_SystemMessageRegisterBtn",GOLD_MEMBERSHIP_PAGE_RENEW:"GoldMembershipPage_RenewBtn",HALLOWEEN_GIVEAWAY_BANNER:"HalloweenGiveawayBannerBtn",HEADER_TOKENS_MENU_BTN:"HeaderTokensMenu_Btn",HEADER_TOKENS_MENU_ICON:"HeaderTokensMenu_Icon",INVISIBLE_MODE_MODAL_SUBSCRIBE:"InvisibleModeModal_MakeMeGoldBtn",MOBILE_HEADER_MENU_BUY_TOKENS:"MobileHeaderMenu_BuyTokensBtn",MODEL_CHAT_MESSAGE_BUY_TOKENS:"ModelChatMessage_BuyTokensLink",PERSONAL_NOTIFICATIONS_GOLD_OVER:"PersonalNotifications_GoldOverBtn",PLAYER_FULLSCREEN:"Player_FullscreenBtn",PLAYER_SIGNUP:"Player_SignupBtn",PRIVATE_MESSAGES_MAKE_ME_GOLD:"PrivateMessages_MakeMeGoldBtn",PRIVATE_MESSAGES_TIP:"PrivateMessages_SendPrivateTipBtn",PROFILE_RENEW:"UserProfile_RenewBtn",SAVE_SETTINGS_BANNER:"SaveSettingsBanner",SEND_OFFLINE_TIP_MODAL_SEND:"SendOfflineTipDialog_SendBtn",SEND_ONLINE_TIP_MODAL_SEND:"SendOnlineTipDialog_SendBtn",START_PRIVATE_MODAL_P2P:"StartPrivateDialog_Cam2CamBtn",START_PRIVATE_MODAL_PRIVATE:"StartPrivateDialog_PrivateBtn",START_PRIVATE_MODAL_SPY:"StartPrivateDialog_SpyBtn",TOAST_CARD_VERIFICATION:"ToastNotification_CreditCardVerification",USER_GALLERY_ALBUM_REGISTERED_SIGNUP:"UserGallery_AlbumRegisteredSignup",USER_GALLERY_BUY_ALBUM:"UserGallery_BuyAlbum",USER_GALLERY_GO_TO_SETTINGS:"UserGallery_GoToSettings",USER_LEVELS_MODAL_MAKE_ME_GOLD:"UserLevelsModal_MakeMeGoldBtn",USER_LEVELS_MODAL_RENEW:"UserLevelsModal_RenewBtn",VIDEO_FRIENDSHIP:"Video_InviteToFriendsBtn",VIDEO_GET_ACCESS:"Video_GetAccessBtn",VIDEO_GO_SETTINGS:"Video_GoToSettingsBtn",VIDEO_SIGNUP:"Video_SignupBtn",VIEWCAM_BUY_TOKENS:"ViewCam_BuyTokensBtn",VIEWCAM_FAVORITE:"ViewCam_FavoriteBtn",VIEWCAM_LOTTERY_CLAIM:"ViewCam_LotteryClaimBtn",VIEWCAM_LOTTERY_PARTICIPATE:"ViewCam_LotteryParticipateBtn",VIEWCAM_PRIVATE_MESSAGE:"ViewCam_PrivateMessageBtn",VIEWCAM_SEND_OFFLINE_TIP:"ViewCam_SendOfflineTipBtn",VIEWCAM_SEND_ONLINE_TIP:"ViewCam_SendOnlineTipBtn",VIEWCAM_START_PRIVATE:"ViewCam_StartPrivateBtn",VIEWCAM_START_SPY:"ViewCam_StartSpyBtn",VIEWCAM_STOP_P2P:"ViewCam_StopCam2CamBtn",VIEWCAM_STOP_PRIVATE:"ViewCam_StopPrivateBtn",VIEWCAM_STOP_SPY:"ViewCam_StopSpyBtn",VIEWCAM_TOKENS_LEFT_MESSAGE:"ViewCam_TokensLeftMessageBtn",FAVORITE:"FavoriteBtn",FRIENDSHIP:"InviteToFriendsBtn",SUBSCRIBE:"SubscribeBtn",SEND_PM:"SendPMBtn"},t.ALPHABET={en:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],it:["A","B","C","D","E","F","G","H","I","L","M","N","O","P","Q","R","S","T","U","V","Z"],nl:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],sv:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Å","Ä","Ö"],cs:["A","Á","B","C","Č","D","Ď","E","É","Ě","F","G","H","CH","I","Í","K","L","M","N","Ň","O","Ó","P","Q","R","Ř","S","Š","T","Ť","U","Ú","Ů","V","W","X","Y","Ý","Z","Ž"],de:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Ä","Ö","Ü","ẞ"],ru:["А","Б","В","Г","Д","Е","Ё","Ж","З","И","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ч","Ш","Щ","Э","Ю","Я"],pl:["A","Ą","B","C","Ć","D","E","Ę","F","G","H","I","J","K","L","Ł","M","N","Ń","O","Ó","P","Q","R","S","Ś","T","U","V","W","X","Y","Z","Ź","Ż"],el:["Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω"],tr:["A","B","C","Ç","D","E","F","G","Ğ","H","I","İ","J","K","L","M","N","O","Ö","P","R","S","Ş","T","U","Ü","V","Y","Z"],fr:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],pt:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ro:["A","Ă","Â","B","C","D","E","F","G","H","I","Î","J","K","L","M","N","O","P","Q","R","S","Ș","T","Ț","U","V","W","X","Y","Z"],ar:["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","ئ","إ","ؤ","أ","آ"],es:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","Ñ","O","P","Q","R","S","T","U","V","W","X","Y","Z"],no:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Æ","Ø","Å"],hu:["A","Á","B","C","D","E","É","F","G","H","I","J","K","L","M","N","O","Ó","Ö","Ő","P","R","S","T","U","Ú","Ü","Ű","V","Z"]},t.HTTP_CODES={PERMANENT_REDIRECT:301,TEMPORARY_REDIRECT:302,NOT_FOUND:404}},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getPropTypedCollection=t.ReactSchemes=t.getReactRouterPropTypes=t.getActionPropTypes=void 0;var o=n(46),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),u=r(l),c=n(1116),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=function(e){return u.default.shape((0,i.default)(e,function(e,t,n){return e[n]=t.react,e},{}))};t.getActionPropTypes=function(e){return(0,i.default)(e,function(e,t,n){return s({},e,a({},n,u.default.func.isRequired))},{})},t.getReactRouterPropTypes=function(){return{match:u.default.object.isRequired,location:u.default.object.isRequired,history:u.default.object.isRequired}},t.ReactSchemes=(0,i.default)(d,function(e,t,n){return e[n]=f(t),e},{}),t.getPropTypedCollection=function(e,t){(0,i.default)(e,function(e,n,r){return s({},e,a({},r,t))},{})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(67),u=function(e){var t=e.className,n=e.height,r=e.fill,a=e.fillOpacity,o=e.img,i=e.size,u=e.width,c={};r&&(c.fill=r),a&&(c.fillOpacity=a),i?(c.height=i+"px",c.width=i+"px"):(n&&(c.height=n+"px"),u&&(c.width=u+"px"));var d={className:(0,l.classNames)("icon","icon-"+o,t),style:c};return s.default.createElement("svg",d,s.default.createElement("use",{xlinkHref:"#icons-"+o}))};u.propTypes={className:o.default.string,fill:o.default.string,fillOpacity:o.default.string,height:o.default.number,img:o.default.string.isRequired,size:o.default.number,width:o.default.number},t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(r){r({type:U,data:{currentBlockingComponent:e,parentBlockingComponent:n},toJSON:function(){return C({},t,{event:"[Event]"})}})}}function i(e){return function(t,n){var r=(0,D.getCurrBlockingComponent)(n()),a=r.currentBlockingComponent,o=r.parentBlockingComponent;(!e||e!==a&&e!==o)&&t({type:G})}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){L.default.log("interface.showModal()",e,t);var a=(0,P.default)(t,"component",e);N.default.modalView(a),r({type:Y,data:{modalName:e,params:t,isOnEnterPrevented:n}})}}function l(e){return function(t,n){var r=n(),a=(0,P.default)(e,"isOnEnter",!1);if(L.default.log("actions.hideModal()",a?"isOnEnter":null),a&&(0,D.getIsOnEnterPrevented)(r))return void t({type:H});(0,D.getCurrModalName)(r)&&t({type:B,data:C({},e)})}}function u(e){return function(t,n){var r=n(),o=(0,D.getCurrentVolume)(r),i=(0,D.getAudioMap)(r).get(e),s=i.readyState,l=I.AUDIO_READY_STATE.HAS_NOTHING,u=a(I.AUDIO_READY_STATE,["HAS_NOTHING"]);if(l===s)return void L.default.error("Audio element created, but audio file not loaded");(0,b.default)(u,s)&&(i.pause(),i.volume=(0,k.roundFloat)(o/100),i.currentTime=0,i.play())}}function c(e){return function(t){return t({type:F,data:{volume:e}})}}function d(e){return function(t,n){var r=n(),a=(0,S.default)(e)?e:[e],o=(0,D.getAudioMap)(r),i=(0,D.getCurrentVolume)(r),s=o.withMutations(function(e){(0,A.default)(a,function(t){if(!e.has(t)){var n=new Audio(""+(0,D.getStaticUrl)(r,"common/components/ui/AudioPlayer/")+t);n.preload=I.AUDIO_PRELOAD_TYPES.AUTO,n.volume=(0,k.roundFloat)(i/100),n.load(),e.set(t,n)}})});t({type:V,data:{audioMap:s}})}}function f(e){return function(t){L.default.log("actions.shadeLayout()",e),t({type:W,data:{isActive:e}})}}function p(e){return function(t){t({type:x,data:{tipAmount:e}})}}function m(e,t){return function(n){return n({type:j,data:C({uniqueName:e},t)})}}function g(e,t){return function(n){return n({type:q,data:{windowWidth:e,windowHeight:t}})}}function h(e){return function(t){return t({type:z,data:{windowOrientation:e}})}}function v(e){return function(t){return t({type:X,data:{isWindowFocused:e}})}}function E(){return function(e,t){var n=t(),r=n.ui.isDocumentVisible,a=(0,R.getIsDocumentVisible)();r!==a&&e({type:K,data:{isDocumentVisible:a}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_WINDOW_FOCUSED=t.UPDATE_WINDOW_ORIENTATION=t.UPDATE_WINDOW_DIMENSIONS=t.UPDATE_DOCUMENT_VISIBILITY=t.SHOW_MODAL=t.SHADE_LAYOUT=t.SET_TITLE_PREFIX=t.SET_TITLE=t.SAVE_TIP_AMOUNT=t.RELEASE=t.PREFETCH_SOUND=t.ON_ENTER_END=t.HIDE_MODAL=t.CHANGE_VOLUME=t.BUTTON=t.BLOCK=void 0;var y=n(14),b=r(y),_=n(26),S=r(_),O=n(6),P=r(O),T=n(96),A=r(T),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.blockInterface=o,t.releaseInterface=i,t.showModal=s,t.hideModal=l,t.playSound=u,t.changeVolume=c,t.prefetchSounds=d,t.shadeLayout=f,t.saveTipAmount=p,t.emitButtonEvent=m,t.updateWindowDimensions=g,t.updateWindowOrientation=h,t.updateWindowFocus=v,t.updateDocumentVisibility=E;var I=n(5),w=n(59),N=r(w),R=n(67),M=n(29),L=r(M),k=n(62),D=n(21),U=t.BLOCK="interface/BLOCK",j=t.BUTTON="interface/BUTTON",F=t.CHANGE_VOLUME="interface/CHANGE_VOLUME",B=t.HIDE_MODAL="interface/HIDE_MODAL",H=t.ON_ENTER_END="interface/ON_ENTER_END",V=t.PREFETCH_SOUND="interface/PREFETCH_SOUND",G=t.RELEASE="interface/RELEASE",x=t.SAVE_TIP_AMOUNT="interface/SAVE_TIP_AMOUNT",W=(t.SET_TITLE="interface/SET_TITLE",t.SET_TITLE_PREFIX="interface/SET_TITLE_PREFIX",t.SHADE_LAYOUT="interface/SHADE_LAYOUT"),Y=t.SHOW_MODAL="interface/SHOW_MODAL",K=t.UPDATE_DOCUMENT_VISIBILITY="interace/UPDATE_DOCUMENT_VISIBILITY",q=t.UPDATE_WINDOW_DIMENSIONS="interface/UPDATE_WINDOW_DIMENSIONS",z=t.UPDATE_WINDOW_ORIENTATION="interface/UPDATE_WINDOW_ORIENTATION",X=t.UPDATE_WINDOW_FOCUSED="interface/UPDATE_WINDOW_FOCUSED"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(80),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),u=r(l),c=n(0),d=r(c),f=n(24),p=function(e){var t=e.active,n=e.className,r=e.disabled,o=e.display,l=e.size,u=e.style,c=e.type,p=a(e,["active","className","disabled","display","size","style","type"]),m=(0,i.default)([n,"btn","btn-"+u,"btn-"+o,l?"btn-"+l:null,t?"active":null,r?"disabled":null]).join(" ");return"anchor"===c?d.default.createElement("a",s({},p,{className:m})):"link"===c?d.default.createElement(f.Link,s({},p,{className:m})):d.default.createElement("button",s({},p,{className:m,type:c}))};p.propTypes={active:u.default.bool,className:u.default.string,disabled:u.default.bool,display:u.default.oneOf(["block","inline-block"]),size:u.default.oneOf(["default","extra-small","small","medium","large"]),style:u.default.oneOf(["accept","apply","apply-alter","apply-alternative","auth-banner","call2action","call2action-premium","decline","default","default-filled","default-outline","default-restyled","delete","end-broadcasting","end-private","highlighted","money","nav","outline","pale","primary","second","send","signup","tip","tokens"]),type:u.default.oneOf(["anchor","button","link","submit","reset"])},p.defaultProps={display:"inline-block",style:"default",type:"button"},t.default=p},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONLINE_MODELS_SORTING_TYPES_ORDERED=t.GENDER_TAGS_GROUPS=t.ONLINE_MODELS_SORTING_TYPES=t.BROADCAST_GENDER_OF_GROUP=t.BROADCASTING_GENDERS=t.TIP_SOUND_FILENAMES=t.TIP_COMMENT_LENGTH=t.SSR_VISIBLE_MODELS_COUNT=t.PSEUDO_TAGS=t.PRIVATE_MODE_SOUND_FILENAMES=t.MODEL_KNIGHTS_LIMIT=t.DELAY_FOR_SHOWING_STAB_ITEMS=t.MAXIMUM_IDLE_TIME_SECONDS=t.UPDATE_BROADCAST_INTERVAL=t.UPDATE_MODEL_LIST_INTERVAL=t.UPDATE_USER_ONLINE_INTERVAL=t.UPDATE_GUEST_ONLINE_INTERVAL=t.DEBOUNCE_LOAD_MODEL_LIST=t.TRIGGER_SEARCH_DELAY=t.TOKENS_RATIO_FOR_MODELS=t.SNAPSHOT_PLAYER_AUDIO_SYNC=t.SUPPORTED_BROWSERS=t.PRIVATE_MODES=t.PLAYER_STATUSES=t.PAYMENTICO_MESSAGE_TYPE=t.PAYMENT_SETTINGS_NOTIFICATION_TYPES=t.MODERATION_STATUS_WEIGHTS=t.MODERATION_STATUS_CLASSES=t.MODERATION_STATUSES=t.MODEL_TAGS=t.LATEST_NEWS_LIMIT=t.MODEL_STATUSES=t.VIEWCAM_PLAYER_TYPES=t.BROADCAST_PLAYER_TYPES=t.MODEL_LANGUAGE_LIST=t.MODEL_LIST_PAGE_SIZE=t.DEFAULT_INDEX_TAG_ALIAS=t.INDEX_DEFAULT_AUTO_TAG=t.FIRSTCHOICE_PAY_STATUS=t.FIRSTCHOICE_PAY=t.DOCUMENT_TYPES=t.DOCUMENT_EXAMPLE_LINKS=t.DOCUMENT_STATUSES=t.DEFAULT_PSEUDO_TAG=t.DEFAULT_BROADCAST_SETTINGS=t.BITPAY_INVOICE_STATUS=t.BEST_MODELS_DEFAULT_CONTEST_TYPE_ID=t.BEST_MODELS_CONTEST_TYPES=t.ADD_TO_FAVORITES_DELAY=void 0;var r=n(15),a=(function(e){e&&e.__esModule}(r),t.ADD_TO_FAVORITES_DELAY=500,t.BEST_MODELS_CONTEST_TYPES=[{id:"current-month",route:"current"},{id:"recent",route:"hourly"},{id:"recent-month",route:"monthly"},{id:"rules"}],t.BEST_MODELS_DEFAULT_CONTEST_TYPE_ID="current-month",t.BITPAY_INVOICE_STATUS={NEW:"new",PAID:"paid",CONFIRMED:"confirmed",COMPLETE:"complete",EXPIRED:"expired",INVALID:"invalid"},t.DEFAULT_BROADCAST_SETTINGS={flashBuffer:1,flashFps:30,flashKeyFrame:30,flashQuality:85,flashWidth:640,flashHeight:480,shouldLimitBandwidth:0},t.DEFAULT_PSEUDO_TAG="featured",t.DOCUMENT_STATUSES=["notReviewed","approved","rejected"],t.DOCUMENT_EXAMPLE_LINKS={face:"cams/components/ui/DocumentUpload/example-face.jpg",id:"cams/components/ui/DocumentUpload/example-id.jpg"},t.DOCUMENT_TYPES=["id","face"],t.FIRSTCHOICE_PAY={METHOD:"payoneer",LINK_PROP:"payoneer_link",STATUS_PROP:"payoneer_status"},t.FIRSTCHOICE_PAY_STATUS={SIGNUP_APPROVED:"signupApproved",SIGNUP_DECLINED:"signupDeclined",SIGNUP_PENDING:"signupPending",SIGNUP_READY:"signupReady"},t.INDEX_DEFAULT_AUTO_TAG="autoTagPopular",t.DEFAULT_INDEX_TAG_ALIAS="featured",t.MODEL_LIST_PAGE_SIZE=42,t.MODEL_LANGUAGE_LIST=["English","Spanish","Italian","Greek","Catalan"],t.BROADCAST_PLAYER_TYPES={FLASH:"flash",WEBRTC:"webrtc"},t.VIEWCAM_PLAYER_TYPES={DASH:"dash",FLASH:"flash",HTML5:"html5",SNAPSHOT:"snapshot",WEBRTC:"webrtc",MSE:"mse"},t.MODEL_STATUSES={STATUS_IDLE:"idle",STATUS_OFF:"off",STATUS_P2P:"p2p",STATUS_PRIVATE:"private",STATUS_VIRTUAL_PRIVATE:"virtualPrivate",STATUS_PUBLIC:"public"},t.LATEST_NEWS_LIMIT=2,t.MODEL_TAGS=["newbies","spy","teen","blonde","redhead","latin","asian"],t.MODERATION_STATUSES={new:"new",notReviewed:"notReviewed",approved:"approved",rejected:"rejected"},t.MODERATION_STATUS_CLASSES={new:"new",notReviewed:"not-reviewed",approved:"approved",rejected:"rejected"},t.MODERATION_STATUS_WEIGHTS={new:0,rejected:1,notReviewed:2,approved:3},t.PAYMENT_SETTINGS_NOTIFICATION_TYPES={EMPTY:"empty",PENDING_NEW:"pendingNew",PENDING_MODIFIED:"pendingModified",PENDING_FIRSTCHOICE_PAY_SIGNUP:"pendingFirstchoicePaySignup",PENDING_FIRSTCHOICE_PAY_APPROVAL:"pendingFirstchoicePayApproval"},t.PAYMENTICO_MESSAGE_TYPE={SUCCESS:"success",ERROR:"error"},t.PLAYER_STATUSES={stopped:"stopped",playing:"playing",paused:"paused"},t.PRIVATE_MODES={MODE_P2P:"p2p",MODE_P2P_AUDIO:"p2pAudio",MODE_PRIVATE:"private",MODE_VIRTUAL_PRIVATE:"virtualPrivate"},t.SUPPORTED_BROWSERS=[{icon:"chrome",name:"Google Chrome",link:"https://www.google.com/chrome/browser/desktop/index.html"},{icon:"firefox",name:"Firefox",link:"https://www.mozilla.org/en-US/firefox/new/"}],t.SNAPSHOT_PLAYER_AUDIO_SYNC=5,t.TOKENS_RATIO_FOR_MODELS=20,t.TRIGGER_SEARCH_DELAY=1500,t.DEBOUNCE_LOAD_MODEL_LIST=100,t.UPDATE_GUEST_ONLINE_INTERVAL=6e4,t.UPDATE_USER_ONLINE_INTERVAL=1e4,t.UPDATE_MODEL_LIST_INTERVAL=6e4,t.UPDATE_BROADCAST_INTERVAL=4e3),o=(t.MAXIMUM_IDLE_TIME_SECONDS=20+a/1e3,t.DELAY_FOR_SHOWING_STAB_ITEMS=300,t.MODEL_KNIGHTS_LIMIT=25,t.PRIVATE_MODE_SOUND_FILENAMES={PRIVATE:"private.mp3",CAM2CAM:"cam2cam.mp3"},t.PSEUDO_TAGS=["new","spy"],t.SSR_VISIBLE_MODELS_COUNT=100,t.TIP_COMMENT_LENGTH=200,t.TIP_SOUND_FILENAMES={1:"tip_01.mp3",11:"tip_02.mp3",50:"tip_03.mp3",100:"tip_04.mp3",200:"tip_05.mp3",500:"tip_06.mp3",1e3:"tip_07.mp3"},t.BROADCASTING_GENDERS={MALE:"male",FEMALE:"female",TRANNY:"tranny",GROUP:"group"},t.BROADCAST_GENDER_OF_GROUP=["femaleTranny","females","maleFemale","maleTranny","males","trannies"],t.ONLINE_MODELS_SORTING_TYPES={INDEX_RATING_SORT:"indexRating",NORM_HISTORY_RATING_SORT:"normHistoryRating",TRENDING_SORT:"trending",NEW_FACES_SORT:"newFaces",START_BROADCAST_TIME_SORT:"startBroadcastTime"});t.GENDER_TAGS_GROUPS=["F","M","T"],t.ONLINE_MODELS_SORTING_TYPES_ORDERED=[o.INDEX_RATING_SORT,o.NORM_HISTORY_RATING_SORT,o.TRENDING_SORT,o.NEW_FACES_SORT,o.START_BROADCAST_TIME_SORT]},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e.collection.keys()}function i(e){return e.collection.values()}function s(e){return(0,I.default)(e,function(e,t,n){return e[String(n)]=t,e},{})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=q({},J,e),n=t.isOrdered,r=t.itemKey;return q({collection:n?X.default.OrderedMap():X.default.Map(),isOrdered:n,itemKey:r},t.shouldCreateNotFoundSet?{notFoundKeys:X.default.Set()}:{})}function u(e){return q({},e,{collection:e.collection.clear()},e.notFoundKeys?{notFoundKeys:e.notFoundKeys.clear()}:{})}function c(e,t){return q({},e,{collection:Array.isArray(t)?e.collection.filterNot(function(e,n){return t.indexOf(n)>-1}):e.collection.delete(t)})}function d(e,t){return q({},e,{collection:e.collection.filterNot(function(e){return te(e,t)})})}function f(e,t,n){var r=(0,H.default)(t),a=(0,H.default)(n);if(r&&a)return e;var o=e.notFoundKeys;if(o&&(o.size>0||!(0,H.default)(n))){var i=Array.isArray(t)?(0,M.default)(t,function(t){return t[e.itemKey]}):[t[e.itemKey]];o=e.notFoundKeys.subtract(i),(0,H.default)(n)||(o=o.union(Array.isArray(n)?n:[n]))}var s=r?e.collection:e.collection.withMutations(function(n){(Array.isArray(t)?t:[t]).forEach(function(t){t&&(0,K.default)(t,e.itemKey)?n.set(t[e.itemKey],t):Q.default.error("Failed to save item as it has no '"+e.itemKey+"' property",{item:t})})});return q({},e,{collection:s},o?{notFoundKeys:o}:{})}function p(e,t){return e.notFoundKeys&&e.notFoundKeys.has(t)}function m(e,t,n){return f(u(e),t,n)}function g(e,t,n,r,a){var o=e.filter(function(e){return te(e,t,a)});return n&&(o=oe(o,n)),r&&Math.abs(r)<o.count()&&(o=r<0?o.slice(r):o.slice(0,r)),o}function h(e,t){return t?oe(e,t):e.toSeq()}function v(e){return g(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2],null,arguments[3]).first()}function E(e){return g(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2],null,arguments[3]).last()}function y(e,t){return e.get(t)}function b(e,t){return t?g(e,t).size:e.size}function _(e,t){return t.filter(function(t){return!e.collection.has(t)})}function S(e,t){return e.has(t)}function O(e,t){return X.default.OrderedMap((0,W.default)(t.map(function(t){return!!S(e,t)&&[t,e.get(t)]})))}function P(){var e=window.__PRELOADED_STATE__;if(e)return delete window.__PRELOADED_STATE__,(0,I.default)(e,function(e,t,n){if("collection"in t){var r=q({},t,l(q({},J,(0,N.default)(t,(0,k.default)(J)))));return q({},e,a({},n,f(r,t.collection)))}return q({},e,a({},n,t))},{})}Object.defineProperty(t,"__esModule",{value:!0}),t.sortMapBy=t.createComparator=t.createObjectComparator=t.createStringComparator=t.isMatchCriteria=t.hasElement=t.compareScalar=void 0;var T=n(86),A=r(T),C=n(46),I=r(C),w=n(33),N=r(w),R=n(11),M=r(R),L=n(70),k=r(L),D=n(105),U=r(D),j=n(95),F=r(j),B=n(13),H=r(B),V=n(26),G=r(V),x=n(47),W=r(x),Y=n(84),K=r(Y),q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getKeys=o,t.getValues=i,t.plainArrayToObject=s,t.createCollection=l,t.clear=u,t.del=c,t.delBy=d,t.save=f,t.wasNotFound=p,t.replace=m,t.find=g,t.findAll=h,t.findFirst=v,t.findLast=E,t.findById=y,t.count=b,t.getMissingIds=_,t.hasId=S,t.findBySortedIds=O,t.getPreloadedState=P;var z=n(18),X=r(z),Z=n(29),Q=r(Z),J={itemKey:"id",isOrdered:!0,shouldCreateNotFoundSet:!1},$=t.compareScalar=function(e,t,n){return n?e===t:(0,U.default)(e)&&(0,U.default)(t)?(0,A.default)(e)===(0,A.default)(t):e===t},ee=t.hasElement=function(e,t,n){return n||!(0,U.default)(t)?-1!==e.indexOf(t):-1!==(0,M.default)(e,A.default).indexOf((0,A.default)(t))},te=t.isMatchCriteria=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!1;return"function"==typeof t?r=t(e):!0===t?r=!0:(r=!0,Object.keys(t).forEach(function(a){r=Array.isArray(e[a])&&!Array.isArray(t[a])?r&&ee(e[a],t[a],n):!Array.isArray(e[a])&&Array.isArray(t[a])?r&&ee(t[a],e[a],n):r&&$(e[a],t[a],n)})),r},ne=t.createStringComparator=function(e){return function(t,n){return t[e]===n[e]?0:t[e]<n[e]?-1:1}},re=t.createObjectComparator=function(e){var t=e.itemKey,n=e.order;return function(e,r){return e[t]===r[t]?0:e[t]<r[t]^"DESC"===n?-1:1}},ae=t.createComparator=function(e){return(0,F.default)(e)?re(e):(0,G.default)(e)?function(t,n){var r=0;return e.forEach(function(e){if(0===r){var a=(0,F.default)(e)?re(e):ne(e);r=a(t,n)}}),r}:ne(e)},oe=t.sortMapBy=function(e,t){return e.sort(ae(t))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),l=r(s),u=n(265),c=r(u),d=n(80),f=r(d),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=n(1),h=r(g),v=n(0),E=r(v),y=n(2),b=n(67),_=n(221),S=n(57),O=function(e,t){if(e.type){return E.default.createFactory(e.type)(m({},e.props,t))}return E.default.createElement(e,m({},t))},P=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.regexp=/(?:\{#([a-zA-Z0-9._:-]+)\}(.*?)\{\/\1\}|\{#([a-zA-Z0-9._:-]+)\/\})/g,i=n,o(r,i)}return i(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.elements,r=e.parameters,a=e.message,o=[],i=a.replace(this.regexp,function(e,t,a,i){var s=t||i,l=n[s];if(!l)return e;var u="{#"+s+"_"+o.length+"/}",c={key:u};return t&&(c.children=(0,_.replacePlaceholders)(a,r)),o.push(O(l,c)),u}).split(/\{#[^#}]+?\/\}/),s=(0,f.default)((0,c.default)((0,l.default)(i,function(e){return[(0,_.replacePlaceholders)(e,r),o.shift()]})));return E.default.createElement("span",{className:(0,b.classNames)(t),"data-component-name":"CompositeTranslation"},s)}}]),t}(E.default.Component);P.propTypes={className:h.default.string,choiceParameter:h.default.string,elements:h.default.object,messageId:h.default.string.isRequired,message:h.default.string.isRequired,parameters:h.default.object},P.defaultProps={elements:{},parameters:{}};var T=function(e,t){var n=t.parameters,r=t.messageId,a=t.choiceParameter;return{message:(0,S.translate)(e,{params:n,messageId:r,choiceParameter:a})}};t.default=(0,y.connect)(T)(P)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getIsOnIndexRoute=t.getTagFromUrl=t.checkHasAccess=t.redirectToAppropriateLoginPage=t.redirectToWhiteLabelSignUpPage=t.redirectToWhiteLabelLoginPage=t.redirectToAppLoginPage=t.redirectToSubDomainFromCookie=t.performActionOnEnter=t.composeActionOnEnter=t.showModalsOnEnter=t.getReturnPath=t.mapRecursive=t.redirectToSubDomain=t.redirectLoggedInToReturnRouteOrIndex=t.redirectIfUrlDoesntMatchUserRole=t.redirectModelsWithoutPreviewToStartBroadcastingPage=t.redirectGuestsToIndexAndMembershipUsersToUserPage=t.redirectNonPayingRegularUsersToIndex=t.redirectGuestToLoginOrIndex=t.redirectRegularUserToLoginOrIndex=t.redirectNotTranslatorToLoginOrIndex=t.redirectNotStudioToLoginOrIndex=t.redirectAllButNonStudioModelsAndStudiosToLoginOrIndex=t.redirectNotModelOrStudioToLoginOrIndex=t.redirectToMyFriendsPage=t.redirectToMyKnightsPage=t.redirectNotApprovedModelsToDocumentsPage=t.redirectNotModelToLoginOrIndex=t.redirectModelsAndStudiosToIndexInsteadBuyTokensPage=t.redirectModelsAndStudiosToIndex=t.redirectGuestToLogin=t.redirectLoggedInOrWhiteLabelToIndex=t.redirectLoggedInToIndex=t.redirectGuestToIndex=t.redirectXHLGuestTo=t.redirectRegularUserTo=t.redirectNotTranslatorTo=t.redirectNotStudioTo=t.redirectStudiosModelTo=t.redirectNotModelOrStudioTo=t.redirectNotModelTo=t.redirectModelsAndStudiosTo=t.redirectModelTo=t.redirectToMyPage=t.redirectLoggedInOrWhiteLabelTo=t.redirectLoggedInTo=t.redirectGuestTo=t.redirectOnConditions=t.redirectOnCondition=t.redirect=t.lastPathNames=void 0;var o=n(107),i=r(o),s=n(352),l=r(s),u=n(142),c=r(u),d=n(33),f=r(d),p=n(30),m=r(p),g=n(11),h=r(g),v=n(69),E=r(v),y=n(95),b=r(y),_=n(105),S=r(_),O=n(48),P=r(O),T=n(6),A=r(T),C=n(187),I=r(C),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=n(20),R=n(140),M=r(R),L=n(31),k=n(9),D=n(51),U=n(5),j=n(59),F=r(j),B=n(106),H=r(B),V=n(274),G=r(V),x=n(62),W=n(16),Y=n(63),K=r(Y),q=n(129),z=n(21),X=n(68),Z=n(108),Q=n(131),J=n(52),$=n(27),ee=n(148),te=(t.lastPathNames=[],function e(t,n){var r=null,a=void 0,o=void 0;if((0,S.default)(t))a=t;else{if(!(0,b.default)(t)){if((0,E.default)(t)){return e(t(n))}throw new TypeError('helpers/Routes.js: "nextLocation" must be of type string|Object|function. Got: '+t)}a=t.pathname,o=t.query,r=t.state}return{nextLocationState:r,pathname:a,query:o}}),ne=function(e){"/login"===e.nextLocation&&K.default.set("loginTriggerSource",D.AUTH_TRIGGER_SOURCES.NO_ACCESS_REDIRECT)},re=t.redirect=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=te(n,e),o=a.pathname,i=a.query,s=a.nextLocationState;r&&(s=w({},s,{returnRoute:(0,f.default)(e.location,["pathname","query","state"])})),ne({nextLocation:n}),t({pathname:o,state:s,query:i})},ae=t.redirectOnCondition=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r,a,o){return!(!(0,E.default)(e)||!e(r,a,o))&&(re(r,a,t,n),!0)}},oe=t.redirectOnConditions=function(e){return function(t,n,r){return(0,c.default)(e,function(e){return!!(0,E.default)(e)&&e(t,n,r)})}},ie=t.redirectGuestTo=(0,m.default)(ae,function(e,t,n){return!n().auth.isLoggedIn}),se=t.redirectLoggedInTo=(0,m.default)(ae,function(e,t,n){return n().auth.isLoggedIn}),le=t.redirectLoggedInOrWhiteLabelTo=(0,m.default)(ae,function(e,t,n){return n().auth.isLoggedIn||n().config.whiteLabelId}),ue=t.redirectToMyPage=(0,m.default)(ae,function(e,t,n){var r=e.match.params,a=n().auth,o=a.currentUser;return a.isLoggedIn&&o.username===r.username}),ce=(t.redirectModelTo=(0,m.default)(ae,function(e,t,n){var r=n().auth,a=r.currentUser;return r.isLoggedIn&&a.isModel}),t.redirectModelsAndStudiosTo=(0,m.default)(ae,function(e,t,n){var r=n().auth,a=r.currentUser;return r.isLoggedIn&&(a.isModel||a.isStudio)})),de=t.redirectNotModelTo=(0,m.default)(ae,function(e,t,n){var r=n().auth,a=r.currentUser;return r.isLoggedIn&&!a.isModel}),fe=t.redirectNotModelOrStudioTo=(0,m.default)(ae,function(e,t,n){var r=n().auth,a=r.currentUser;return r.isLoggedIn&&!a.isModel&&!a.isStudio}),pe=t.redirectStudiosModelTo=(0,m.default)(ae,function(e,t,n){var r=n().auth,a=r.currentUser;a=void 0===a?{}:a;var o=a.isModel,i=a.studioId;return r.isLoggedIn&&o&&i}),me=t.redirectNotStudioTo=(0,m.default)(ae,function(e,t,n){var r=n().auth,a=r.currentUser;return r.isLoggedIn&&!a.isStudio}),ge=t.redirectNotTranslatorTo=(0,m.default)(ae,function(e,t,n){var r=n().auth,a=r.currentUser;return r.isLoggedIn&&!a.isTranslator&&!a.isI18nImages&&!a.isI18nAdmin}),he=t.redirectRegularUserTo=(0,m.default)(ae,function(e,t,n){var r=n().auth,a=r.currentUser;return r.isLoggedIn&&a.isRegular}),ve=t.redirectXHLGuestTo=(0,m.default)(ae,function(e,t,n){var r=n(),a=r.auth.isLoggedIn,o=r.config.whiteLabelId;return!a&&o}),Ee=(t.redirectGuestToIndex=ie("/"),t.redirectLoggedInToIndex=se("/"),t.redirectLoggedInOrWhiteLabelToIndex=le("/"),t.redirectGuestToLogin=ie("/login",!0)),ye=t.redirectModelsAndStudiosToIndex=ce("/"),be=(t.redirectModelsAndStudiosToIndexInsteadBuyTokensPage=oe([function(e,t,n){return(0,X.getIsBuyTokensRoute)(e)&&ye(e,t,n)}]),t.redirectNotModelToLoginOrIndex=oe([Ee,de("/")])),_e=(t.redirectNotApprovedModelsToDocumentsPage=oe([be,ae(function(e,t,n){var r=n(),a=r.profile.user;return!(0,A.default)(a,"isApproved")},"/model/documents")]),t.redirectToMyKnightsPage=oe([ue("/model/knights")]),t.redirectToMyFriendsPage=oe([ue("/friends")]),t.redirectNotModelOrStudioToLoginOrIndex=oe([Ee,fe("/")]),t.redirectAllButNonStudioModelsAndStudiosToLoginOrIndex=oe([Ee,fe("/"),pe("/")]),t.redirectNotStudioToLoginOrIndex=oe([Ee,me("/")]),t.redirectNotTranslatorToLoginOrIndex=oe([Ee,ge("/")]),t.redirectRegularUserToLoginOrIndex=oe([Ee,he("/")]),t.redirectGuestToLoginOrIndex=oe([ve("/"),Ee])),Se=(t.redirectNonPayingRegularUsersToIndex=oe([_e,ae(function(e,t,n){var r=n().auth.currentUser,a=r.isRegular,o=r.tokensPaid,i=o>0;return a&&!i},"/")]),t.redirectGuestsToIndexAndMembershipUsersToUserPage=oe([_e,function(e,t,n){var r=n(),a=r.auth,o=r.profile;if(!a.isLoggedIn)return re(e,t,"/");var i=o.user;return!(-1!==["unsubscribe","subscribe"].indexOf(e.match.params.action))&&re(e,t,"/user/"+i.username)}]),t.redirectModelsWithoutPreviewToStartBroadcastingPage=oe([ae(function(e,t,n){var r=n(),a=r.auth,o=a.currentUser;if(!a.isLoggedIn||!o.isModel)return!1;var i=(0,W.findFirst)(r.users.collection,{username:e.match.params.username});if(!i)return!1;var s=i.id===o.id,l=K.default.get("hasVisitedStartBroadcastingPage",!1);return s&&(!i.previewUrl||!l)},"/start-broadcasting")]),t.redirectIfUrlDoesntMatchUserRole=function(e,t){var n=e.match.params.username,r=e.user;if(!r)return!1;var a=e.location.pathname.split("/")[1],o=r.isModel,i=r.isStudio,s=r.username;return o||i||"user"===a?o&&"model"!==a?(t("/model/"+s),!0):i&&"studio"!==a?(t("/studio/"+s),!0):r.username!==n&&(t("/user/"+r.username),!0):(t("/user/"+s),!0)},t.redirectLoggedInToReturnRouteOrIndex=se(function(e){return(0,A.default)(e.location.state,"returnRoute")||"/"})),Oe=t.redirectToSubDomain=function(e,t){if("undefined"!=typeof window){var n=location,r=n.protocol,a=n.pathname,o=n.hash,i=e?e+".":"";location.replace(r+"//"+i+t+a+o)}},Pe=(t.mapRecursive=function e(t,n){return(0,h.default)(t,function(t){return t.routes?[n(t),e(t.routes,n)]:n(t)})},t.getReturnPath=function(e){var t=e.location,n=e.history,r=e.defaultPath,a=void 0===r?"":r,o=(0,A.default)(t,"state.returnRoute"),i=void 0;return o?((0,E.default)(n.createHref)&&(i=n.createHref(o)),i||a):a}),Te=function(e){var t=e.pathname;return(0,l.default)(t,"/signup")||(0,l.default)(t,"/login")},Ae=(t.showModalsOnEnter={login:function(e){var t=e.location,n=e.actions,r=e.config.whiteLabelId;Te(t)||r||n.startWizard(U.MODAL_TYPES.AUTH,{component:"Login",className:"auth-modal-login",triggerSource:D.AUTH_TRIGGER_SOURCES.EXTERNAL},!0)},signup:function(e){var t=e.location,n=e.actions,r=e.config.whiteLabelId;Te(t)||r||n.startWizard(U.MODAL_TYPES.AUTH,{component:"SignUp",className:"auth-modal-signup",triggerSource:D.AUTH_TRIGGER_SOURCES.EXTERNAL},!0)}},t.composeActionOnEnter=function(e,t){return G.default.getAsync().then(function(e){return e.result}).catch(function(){return String((0,x.random)())}).then(function(n){return H.default.set(e+"Token",n),{action:e,params:w({},t,{token:n})}})}),Ce=t.performActionOnEnter={addToFavorites:function(e,t){var n=e.modelId,r=e.token;return G.default.getAsync().then(function(e){return e.result}).catch(function(){return H.default.get("addToFavoritesToken")}).then(function(e){return H.default.delete("addToFavoritesToken"),r&&r===e?(F.default.action({category:"addToFavoritesModal",action:"signUpSuccessAfterAddToFavoritesClick"}),t((0,Z.add)(n))):(0,N.reject)("Token does not match")})},cardVerificationBonusPackage:function(e,t,n){var r=n(),a=r.auth.isLoggedIn,o=e.triggerSource;t(a?(0,J.showCardVerificationBonusPackage)(o):(0,J.showCardVerificationBonusPackageAfterAuth)(o))},showModal:function(e){var t=e.modalType,n=e.modalParams,r=e.token,a=e.actions;return G.default.getAsync().then(function(e){return e.result}).catch(function(){return H.default.get("showModalToken")}).then(function(e){H.default.delete("showModalToken"),r&&r===e&&a.startWizard(t,n)})},showPreselectedMethod:function(e,t){var n=e.token,r=e.methodName,a=e.params;return G.default.getAsync().then(function(e){return e.result}).catch(function(){return H.default.get("showPreselectedMethodToken")}).then(function(e){H.default.delete("showPreselectedMethodToken"),n&&n===e&&t((0,J.showPreselectedMethod)(r,a))})},blackFridaySubscribe:function(e,t,n){t(n().auth.isLoggedIn?(0,J.showBlackFridayPackage)():(0,J.showBlackFridayPackageAfterAuth)("Login"))},NewYearPromoPopup2017:function(e,t,n){var r=n(),a=r.auth,o=a.currentUser,i=a.isLoggedIn,s=r.config.data.features.newYearPromo,l=o||{},u=l.isGold,c=l.isGreen,d=l.isRegular;if(!s)return void t((0,J.showNewYearPackage)("popup","Login"));(!i||c||d||u)&&t((0,k.showModal)(U.MODAL_TYPES.NEW_YEAR_PROMO,{component:"NewYearModal",triggerSource:u?D.AUTH_TRIGGER_SOURCES.NEW_YEAR_POPUP_GOLDS:D.AUTH_TRIGGER_SOURCES.NEW_YEAR_POPUP}))},NewYearPromo2017:function(e,t){t((0,J.showNewYearPackage)("url","Login"))},goldMembershipSubscribe:function(e,t){var n=e.currentUser,r=e.token,a=e.triggerSource;return G.default.getAsync().then(function(e){return e.result}).catch(function(){return H.default.get("goldMembershipSubscribeToken")}).then(function(e){if(H.default.delete("goldMembershipSubscribeToken"),r&&r===e){if(n&&n.isGoldSubscriber&&!n.isRebillEnabled)return void t((0,L.push)("/user/"+n.login));t((0,J.showSubscriptionPackage)(a))}})},goldMembershipSubscribeDirectLink:function(e,t,n){var r=e.isLoggedIn,a=e.triggerSource,o=void 0===a?D.BUY_TOKENS_DIALOG_SOURCES.SUBSCRIPTION_DIRECT_LINK:a;return t(r?(0,J.showSubscriptionPackage)(o):(0,J.showSubscriptionPackageAfterAuth)({backgroundImage:(0,z.getStaticUrl)(n(),"common/images/bg-gm.jpg")},{triggerSource:o}))},openPM:function(e,t){var n=e.token,r=e.href;return G.default.getAsync().then(function(e){return e.result}).catch(function(){return H.default.get("openPMToken")}).then(function(e){H.default.delete("openPMToken"),n&&n===e&&t((0,L.push)(r))})},navigateTo:function(e,t){var n=e.isLoggedIn,r=e.path;return r?n?((0,I.default)(function(){return t((0,L.push)(r))}),null):(Ae("navigateTo",{path:r}).then(function(e){t((0,k.showModal)(U.MODAL_TYPES.AUTH,{action:{type:"continue",onSuccess:function(n){Ce.navigateTo(w({},e.params,{isLoggedIn:Boolean(n.user)}),t)},onEnterAction:e},component:"Login",className:"auth-modal-signup-default"}))}),null):null},subscription:function(e,t){var n=e.modelId,r=e.token,a=e.buttonLocation;return G.default.getAsync().then(function(e){return e.result}).catch(function(){return H.default.get("subscription")}).then(function(e){H.default.delete("subscription"),r&&r===e&&t((0,Q.toggle)(n,a))})},signUpModalDirectLink:function(e,t,n){var r,o=e.isLoggedIn,i=e.type,s=void 0===i?$.SIGNUP_USER_ROLES.USER:i,l=n(),u=l.config.whiteLabelId,c=(r={},a(r,$.SIGNUP_USER_ROLES.USER,D.AUTH_TRIGGER_SOURCES.SIGNUP_DIRECT_LINK_USER),a(r,$.SIGNUP_USER_ROLES.MODEL,D.AUTH_TRIGGER_SOURCES.SIGNUP_DIRECT_LINK_MODEL),a(r,$.SIGNUP_USER_ROLES.STUDIO,D.AUTH_TRIGGER_SOURCES.SIGNUP_DIRECT_LINK_STUDIO),r),d=c[s];o||u||d&&t((0,k.showModal)(U.MODAL_TYPES.AUTH,{component:"SignUp",isCloseBtnShown:!1,isWrapperCloseDisabled:!0,triggerSource:d,type:s}))},signUpPrefilled:function(e,t,n){var r=e.email;e.isLoggedIn||n().config.whiteLabelId||t((0,k.showModal)(U.MODAL_TYPES.AUTH,{component:"SignUp",email:r,isCloseBtnShown:!1,isWrapperCloseDisabled:!0,showRecaptchaForced:!0}))},bonusTokensPromo:function(e,t,n){e.actions.startWizard(U.MODAL_TYPES.PURCHASE_TOKENS,{authParams:{action:{backgroundImage:(0,z.getStaticUrl)(n(),"common/images/bg-bt.jpg"),shouldBypassActionPrefix:!0,type:"bonusTokens"},component:"SignUp",className:"auth-modal-signup auth-modal-signup-bonus-tokens"},triggerSource:D.AUTH_TRIGGER_SOURCES.BONUS_TOKENS_PROMO},!0)},signUpModalDirectLinkInteractive:function(e,t,n){function r(e){document.removeEventListener("click",r,!0),e.preventDefault(),e.stopPropagation(),t((0,k.showModal)(U.MODAL_TYPES.AUTH,{component:"SignUp",isCloseBtnShown:!1,isWrapperCloseDisabled:!0,triggerSource:D.AUTH_TRIGGER_SOURCES.SIGNUP_DIRECT_LINK_INTERACTIVE}))}e.isLoggedIn||n().config.whiteLabelId||document.addEventListener("click",r,!0)},showTokensGiveawayModalDirectLink:function(e,t){e.isLoggedIn||t((0,k.showModal)(U.MODAL_TYPES.TOKENS_GIVEAWAY,{triggerSource:D.AUTH_TRIGGER_SOURCES.GIVEAWAY_MODAL_DIRECT_LINK}))},ChristmasPromoPopup:function(e,t,n){var r=n();t((0,A.default)(r,"config.data.features.christmas2017")&&(0,ee.getIsPromoCampaignActive)(r,"christmas2017")?(0,k.showModal)(U.MODAL_TYPES.CHRISTMAS_PROMO_2017,{triggerSource:D.AUTH_TRIGGER_SOURCES.CHRISTMAS_PROMO_2017_POPUP}):(0,J.showChristmas2017Package)({authComponent:"Login"}))},ChristmasPromo:function(e,t){t((0,J.showChristmas2017Package)({authComponent:"Login"}))}},Ie=(t.redirectToSubDomainFromCookie=function(e){if("undefined"!=typeof window){var t=e.i18n.languages,n=e.i18n.default,r=(0,P.default)(t,{locale:n}).subDomain,a=e.i18n.current;if(!((0,P.default)(t,{locale:a}).subDomain!==r)){var o=H.default.get("localeDomain");if(o&&o!==r){var i=(0,P.default)(t,{subDomain:o});void 0!==i&&Oe(i.subDomain,e.hostRoot)}}}},t.redirectToAppLoginPage=function(e,t,n){var r=n(),a=r.appSettings,o=r.auth,i=r.config,s=e.location,l=i.data.runAppUrl,u=(0,q.getParams)(s,!0),c=u.forApp;if(o.isLoggedIn&&c){var d=a.data.qrCodeHash,f="1"===c?"/mobile_auth/"+d:l+"?version="+c;"undefined"!=typeof window&&location.replace(f)}return!1}),we=t.redirectToWhiteLabelLoginPage=function(e,t,n){var r=n(),a=r.config,o=r.config.whiteLabelId,i=e.history,s=e.location;if(o&&"undefined"!=typeof window){var l=a.data.whiteLabel.url,u=Pe({location:s,history:i}),c=w({},M.default.parse((0,A.default)(location,"search","").replace(/^\?/,""))),d=encodeURIComponent(""+U.BASE_URL+u+"?"+decodeURIComponent(M.default.stringify(c)));location.replace(l.login+"?url="+d)}};t.redirectToWhiteLabelSignUpPage=function(e,t,n){var r=n(),a=r.auth,o=a.isLoggedIn,s=a.currentUser,l=r.config,u=l.data.whiteLabel,c=l.whiteLabelId,d=e.history,f=e.location,p=e.match.params.type,m=p===$.SIGNUP_USER_ROLES.MODEL,g=p===$.SIGNUP_USER_ROLES.STUDIO,h=p===$.SIGNUP_USER_ROLES.USER,v=o&&s.isModel,E=o&&s.isStudio,y=!(v||E),b=y&&(m||g)&&!c,_=v&&g&&!c,S=E&&m&&!c;if(!(b||_||S)){var O=Se(e,t,n);if(c&&"undefined"!=typeof window){var P=u.url;if((m||g)&&(window.location.href=P["signup"+(0,i.default)(p)]),h&&!O){var T=Pe({location:f,history:d}),C=w({},M.default.parse((0,A.default)(f,"search","").replace(/^\?/,""))),I=encodeURIComponent(""+U.BASE_URL+T+"?"+decodeURIComponent(M.default.stringify(C)));window.location.href=P.signup+"?url="+I}}}},t.redirectToAppropriateLoginPage=oe([Ie,Se,we]),t.checkHasAccess=function(e,t,n){var r=n.store.getState,a=n.router.staticContext,o=(0,E.default)(t),i=e.history.replace,s=function(e){var t=e.pathname;return a&&(a.status=U.HTTP_CODES.TEMPORARY_REDIRECT,a.redirectUrl=t),i(e)},l=!1;return o&&(l=t(e,s,r)),l},t.getTagFromUrl=function(e){var t=/\/(tags\/(\w+(-\w+)*)|new|spy)\/?$/.exec(e);return t&&(t[2]||t[1])||""},t.getIsOnIndexRoute=function(e){return/^\/(new|spy|(tags\/(\w+(-\w+)*)))?$/.test(e)}},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getIsLayoutUpToL=t.getIsLayoutUpToM=t.getIsLayoutUpToS=t.getIsLayoutMoreThanL=t.getIsLayoutMoreThanXL=t.hasDocumentBecomeVisible=t.windowFocusHasChanged=t.orientationHasChanged=t.layoutHasChanged=t.getStaticUrl=t.getWasAlreadyHidden=t.hasInterfaceBlockChanged=t.isLayoutShadedHasChanged=t.getRowCount=t.getColumnCount=t.getViewportWidth=t.getViewportHeight=t.getCurrentVolume=t.getAudioMap=t.getIsOnEnterPrevented=t.getCurrModalName=t.getCurrBlockingComponent=t.getDocTitlePrefix=t.getDocTitle=void 0;var a=n(13),o=r(a),i=n(47),s=r(i),l=n(116),u=r(l),c=n(32),d=n(5),f=d.MEDIA_BREAKPOINTS.MEDIA_BREAKPOINT_XS,p=d.MEDIA_BREAKPOINTS.MEDIA_BREAKPOINT_S,m=d.MEDIA_BREAKPOINTS.MEDIA_BREAKPOINT_M,g=d.MEDIA_BREAKPOINTS.MEDIA_BREAKPOINT_L,h=(t.getDocTitle=function(e){return e.ui.docTitle},t.getDocTitlePrefix=function(e){return e.ui.docTitlePrefix},t.getCurrBlockingComponent=function(e){var t=e.ui;return{currentBlockingComponent:t.currentBlockingComponent,parentBlockingComponent:t.parentBlockingComponent}},t.getCurrModalName=function(e){return e.ui.currentModalName},t.getIsOnEnterPrevented=function(e){return e.ui.isOnEnterPrevented},t.getAudioMap=function(e){return e.ui.audioMap},t.getCurrentVolume=function(e){return e.ui.volume},function(e){return e.ui.windowWidth}),v={"(max-width: 479px)":2,"(min-width: 1366px)":6,"(min-width: 1024px)":5,"(min-width: 640px)":4,"(min-width: 480px)":3},E=t.getViewportHeight=function(){return"undefined"==typeof document?240:document.documentElement.clientHeight||240},y=t.getViewportWidth=function(){return"undefined"==typeof document?240:document.documentElement.clientWidth||240},b=t.getColumnCount=function(){return"undefined"==typeof window?6:(0,u.default)((0,s.default)(v,function(e,t){return window.matchMedia(t).matches}))};t.getRowCount=function(){if("undefined"==typeof window)return 6;var e=b(),t=E(),n=e>5?1340:y(),r=.75*(n/e-10);return Math.ceil(t/r)},t.isLayoutShadedHasChanged=function(e,t){return e.isLayoutShaded!==t.isLayoutShaded},t.hasInterfaceBlockChanged=function(e,t){return e.isInterfaceBlocked!==t.isInterfaceBlocked||e.currentBlockingComponent!==t.currentBlockingComponent},t.getWasAlreadyHidden=function(e,t){var n=e.ui.hiddenModalsSet;return t&&n.has(t)},t.getStaticUrl=function(e,t){return e.config.data.staticRoot+"/"+t},t.layoutHasChanged=function(e,t){return!(0,o.default)(e)&&(e.windowWidth!==t.windowWidth||e.windowHeight!==t.windowHeight)},t.orientationHasChanged=function(e,t){return!(0,o.default)(e)&&e.windowOrientation!==t.windowOrientation},t.windowFocusHasChanged=function(e,t){return e.isWindowFocused!==t.isWindowFocused},t.hasDocumentBecomeVisible=function(e,t){return!1===e.isDocumentVisible&&!0===t.isDocumentVisible},t.getIsLayoutMoreThanXL=(0,c.createSelector)([h],function(e){return e>=g}),t.getIsLayoutMoreThanL=(0,c.createSelector)([h],function(e){return e>=m}),t.getIsLayoutUpToS=(0,c.createSelector)([h],function(e){return e<f}),t.getIsLayoutUpToM=(0,c.createSelector)([h],function(e){return e<p}),t.getIsLayoutUpToL=(0,c.createSelector)([h],function(e){return e<m})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"renderSectorCircles",value:function(){var e=this.props.size;return d.default.createElement("div",{className:this.className,style:{height:e+"px",width:e+"px"}},d.default.createElement("div",{className:"sector-circle"}))}},{key:"renderFadingCircles",value:function(){var e=this.props.size;return d.default.createElement("div",{className:this.className,style:{height:e+"px",width:e+"px"}},d.default.createElement("div",{className:"fading-circle",style:{height:e+"px",width:e+"px"}},d.default.createElement("div",{className:"loader-circle1 loader-circle"}),d.default.createElement("div",{className:"loader-circle2 loader-circle"}),d.default.createElement("div",{className:"loader-circle3 loader-circle"}),d.default.createElement("div",{className:"loader-circle4 loader-circle"}),d.default.createElement("div",{className:"loader-circle5 loader-circle"}),d.default.createElement("div",{className:"loader-circle6 loader-circle"}),d.default.createElement("div",{className:"loader-circle7 loader-circle"}),d.default.createElement("div",{className:"loader-circle8 loader-circle"}),d.default.createElement("div",{className:"loader-circle9 loader-circle"}),d.default.createElement("div",{className:"loader-circle10 loader-circle"}),d.default.createElement("div",{className:"loader-circle11 loader-circle"}),d.default.createElement("div",{className:"loader-circle12 loader-circle"})))}},{key:"renderHorizontalDots",value:function(){var e=this.props.size;return d.default.createElement("div",{className:this.className,style:{width:e+"px"}},d.default.createElement("div",{className:"horizontal-dots"},d.default.createElement("div",{className:"loader-circle"}),d.default.createElement("div",{className:"loader-circle"}),d.default.createElement("div",{className:"loader-circle"}),d.default.createElement("div",{className:"loader-circle"})))}},{key:"render",value:function(){switch(this.props.loaderType){case"horizontal-dots":return this.renderHorizontalDots();case"sector-circle":return this.renderSectorCircles();case"fading-circles":default:return this.renderFadingCircles()}}},{key:"className",get:function(){var e=this.props,t=e.className,n=e.isCentered,r=e.isInline;return this.c("loader",t,{centered:n,inline:r})}}]),t}(p.default);m.contextTypes={},m.propTypes={className:u.default.string,isInline:u.default.bool,isCentered:u.default.bool,loaderType:u.default.oneOf(["fading-circles","sector-circle","horizontal-dots"]),size:u.default.number},m.defaultProps={loaderType:"fading-circles",size:64},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(69),l=r(s),u=n(49),c=r(u),d=n(6),f=r(d),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},g=n(0),h=r(g),v=n(151),E=r(v),y=n(3),b=r(y),_=n(22),S=r(_),O=n(389),P=r(O),T=n(19),A=n(83),C=r(A),I=n(29),w=r(I),N=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(r.description="seo.description.default",r.title="seo.title.default",r.routerWillLeave=null,r.unblockRouter=null,r.constructor===t)throw new TypeError("Cannot construct Abstract instances directly");return r.componentKey=(0,f.default)(e.route,"componentKey"),r}return i(t,e),p(t,[{key:"componentWillReceiveProps",value:function(e,n){var r=(0,T.checkHasAccess)(e,this.constructor.checkAccess,n);this.handleIsRedirected(r),r||m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e,n)}},{key:"componentWillUpdate",value:function(e,n,r){this.state.isRedirected||m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUpdate",this).call(this,e,n,r)}},{key:"componentDidMount",value:function(){this.state.isRedirected||((0,l.default)(this.routerWillLeave)&&(this.unblockRouter=this.props.history.block(this.routerWillLeave)),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)),"IndexPage"!==this.componentKey&&C.default.reset()}},{key:"componentWillUnmount",value:function(){(0,l.default)(this.unblockRouter)&&this.unblockRouter(),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"shouldComponentUpdate",value:function(e,t,n){return!t.isRedirected}},{key:"shouldSocketResubscribe",value:function(e,t){return!(0,c.default)((0,f.default)(this.props,"match.params"),(0,f.default)(e,"match.params"))||(0,f.default)(this.props.currentUser,"id")!==(0,f.default)(e.currentUser,"id")}},{key:"handleIsRedirected",value:function(e){this.setIsRedirected(e),e&&this.removeRegisteredBindings(this.props,this.context)}},{key:"setIsRedirected",value:function(e){this.setState({isRedirected:e})}},{key:"renderMeta",value:function(){return h.default.createElement(E.default,{title:this.twl(this.title),description:this.twl(this.description)})}},{key:"render",value:function(){var e=this.state,t=e.isDataPending,n=e.isDataFailed,r=e.isRedirected,a=void 0;return a=r?null:t?this.renderPending():n?this.renderFailed():this.renderReady(),h.default.createElement("div",{className:"abstract-page-root"},this.renderMeta(),a)}},{key:"renderPending",value:function(){return w.default.info("AbstractPage.renderPending()",{"this.state":this.state}),h.default.createElement("div",{className:"loader-container"},h.default.createElement(S.default,{isCentered:!0}))}},{key:"renderFailed",value:function(){return w.default.info("AbstractPage.renderFailed()",{"this.state":this.state}),h.default.createElement(P.default,null)}},{key:"renderReady",value:function(){return w.default.info("AbstractPage.renderReady()",{"this.state":this.state}),null}}]),t}(b.default);N.checkAccess=function(e,t,n){},t.default=N},,,,function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a,o=(t.PLACEHOLDERS_FOR_SOCIAL_LINKS={facebook:"https://www.facebook.com/stripchatofficial",fancentro:"https://fancentro.com/stripchat",instagram:"https://www.instagram.com/stripchat.official",snapchat:"https://www.snapchat.com/add/stripchat",twitter:"https://twitter.com/stripchat",xhamster:"https://xhamster.com/users/stripchat",amazonWishlist:"https://amzn.com/w/stripchatWishlist"},t.SOCIAL_LINKS_REGEXP={facebook:"^(https?://)?(www.)?facebook.com/",fancentro:"^(https?://)?(www.)?fancentro.com/",instagram:"^(https?://)?(www.)?instagram.com/",snapchat:"^(https?://)?(www.)?snapchat.com/add/",twitter:"^(https?://)?(www.)?twitter.com/",xhamster:"^(https?://)?(www.|it.|de.|ru.|fr.|pt.|es.|jp.|pl.|nl.)?xhamster.com/users/",amazonWishlist:"^(https?://)?(www.)?(amazon|amzn).(cn|in|co.jp|fr|de|it|nl|es|co.uk|ca|com.mx|com|com.au|com.br)/(gp|registry|w|wishlist)?(/wishlist)?/"},t.GENDER_PREFERENCES={straight:"straight",gay:"gay",tranny:"tranny"},t.DEFAULT_GENDER_PREFERENCE="straight",t.EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,t.LOGIN_REGEXP=/^[A-Za-z_\-\d]{3,25}$/,t.SWIFT_COMPATIBILITY_REGEXP=/^[A-Za-z0-9\/\-?:().,'+\s]*$/,t.USERNAME_REGEXP=/^[A-Za-z_\-\d]{3,25}(@[A-Za-z\d]{1,25})?$/,t.DEFAULT_LOADER_SIZE=16,t.MIN_PASSWORD_LENGTH=6,t.MIN_ALBUM_COST=1,t.MAX_ALBUM_COST=999,t.NEW_MAX_ALBUM_COST=499,t.MAX_FAVORITES_FOR_GUEST=10,t.LANGUAGES=["English","Spanish","Italian","Greek","Catalan"],t.PRIVATE_MESSAGES_DRAFT_SAVE_DELAY=200,t.PRIVATE_MESSAGES_FRIENDSHIP_TYPES={FRIENDSHIP_REQUEST_SENT:"friendshipRequestSent",FRIENDSHIP_REQUEST_RECEIVED:"friendshipRequestReceived",FRIENDSHIP_APPROVE_SENT:"friendshipApproveSent",FRIENDSHIP_APPROVE_RECEIVED:"friendshipApproveReceived",FRIENDSHIP_DECLINE_SENT:"friendshipDeclineSent"},t.PRIVATE_MESSAGE_OFFLINE_TIP="offlineTip",t.PRIVATE_MESSAGE_UNLOCK_TIP="unlockTip",t.FRIENDSHIP_STATUSES={REQUESTED:"sent",APPROVED:"approved",DECLINED:"unfriended"},t.DEFAULT_USER_DESCRIPTION_MAX_LENGTH=1e4,t.USER_GENDER={female:"female",male:"male",tranny:"tranny"},t.PERSONAL_NOTIFICATION_TYPES={FRIENDSHIP_ACCEPTED:"friendshipAccepted",FRIENDSHIP_INVITED:"friendshipInvited",GOLD_SUBSCRIPTION_CANCEL:"goldSubscriptionCancel",GOLD_SUBSCRIPTION_OVER:"goldSubscriptionOver",GOLD_SUBSCRIPTION_RENEW:"goldSubscriptionRenew",KNIGHT:"knightAdded",MODEL_ONLINE:"modelOnline",OFFLINE_TIP:"offlineTip",UNLOCK_TIP:"unlockTip",PRIVATE_MESSAGE:"privateMessage",USER_PHOTO_DECLINED:"userPhotoDeclined",VIDEO_DECLINED:"videoDeclined"},t.PERSONAL_NOTIFICATION_VISIBILITY_DELAY=1e3,t.SIGNUP_USER_ROLES={USER:"user",MODEL:"model",STUDIO:"studio"},t.USER_ROLES_MAP={isRegular:"Grey",isGreen:"Green",isGold:"Gold",isModel:"Model",isStudio:"Studio"},t.PAYSAFECARD_STATUSES={INITIATED:"INITIATED",REDIRECTED:"REDIRECTED",AUTHORIZED:"AUTHORIZED",SUCCESS:"SUCCESS",CANCELED_MERCHANT:"CANCELED_MERCHANT",CANCELED_CUSTOMER:"CANCELED_CUSTOMER",EXPIRED:"EXPIRED"},t.SEPA_STATUSES={OVERFLOW_PURCHASE_LIMIT:"overflowPurchaseLimit"},t.USER_LEVELS={GUEST:"guest",REGULAR:"regular",GREEN:"green",GOLD:"gold"}),i=(t.FEATURES_LIST=["publicChat","fullscreenMode","privateMessagingWithModels","emoticonsInChat","invisibleMode"],t.LEVELS_OF_AVAILABILITY={FULL:"full",PARTIAL:"partial",NOT_AVAILABLE:"not_available"});t.REVIEW_STATUSES={REJECTED:"rejected",APPROVED:"approved",NOT_REVIEWED:"notReviewed",NOT_EXIST:"notExist"},t.USER_FEATURES=(a={},r(a,o.GUEST,[i.PARTIAL,i.NOT_AVAILABLE,i.NOT_AVAILABLE,i.NOT_AVAILABLE,i.NOT_AVAILABLE]),r(a,o.REGULAR,[i.PARTIAL,i.FULL,i.PARTIAL,i.NOT_AVAILABLE,i.NOT_AVAILABLE]),r(a,o.GREEN,[i.FULL,i.FULL,i.PARTIAL,i.NOT_AVAILABLE,i.NOT_AVAILABLE]),r(a,o.GOLD,[i.FULL,i.FULL,i.FULL,i.FULL,i.FULL]),a),t.USER_PHOTO_STATUSES={APPROVED:"approved",NOT_REVIEWED:"notReviewed"}},function(e,t,n){"use strict";function r(e){return function(t){t({type:g,data:{criteria:e}})}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeout:p.DEFAULT_HEADER_NOTIFICATION_TIMEOUT};return function(n){var a=(0,d.default)("header_notification_");return t.timeout&&setTimeout(function(){n(r({id:a}))},t.timeout),n({type:h,data:{notification:f({id:a},e)}})}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(r){return r(a({message:e,type:"error",key:t},n))}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(r){return r(a({message:e,type:"success",key:t},n))}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(r){return r(a({message:e,type:"warning",key:t},n))}}function l(e){var t=e.redirectFromForgotPasswordPage,n={};return t&&(n=function(e){return!("passwordRecovery"===e.key&&"success"===e.type)}),function(e){return e(r(n))}}function u(){return function(e){e(r({type:m.PERMANENT_NOTIFICATIONS.PUSH_NOTIFICATION})),e({type:v})}}Object.defineProperty(t,"__esModule",{value:!0}),t.PUSH_PERMISSION=t.SHOW=t.HIDE=void 0;var c=n(160),d=function(e){return e&&e.__esModule?e:{default:e}}(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.hide=r,t.show=a,t.error=o,t.success=i,t.warning=s,t.hideAllExcept=l,t.updatePushNotificationPermission=u;var p=n(5),m=n(127),g=t.HIDE="headerNotifications/HIDE",h=t.SHOW="headerNotifications/SHOW",v=t.PUSH_PERMISSION="headerNotifications/PUSH_PERMISSION"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return Array.isArray(e)?e:Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.setIsDebugEnabled=void 0;var s=n(46),l=r(s),u=n(272),c=r(u),d=n(95),f=r(d),p=n(13),m=r(p),g=n(14),h=r(g),v=n(6),E=r(v),y=n(48),b=r(y),_=n(528),S=r(_),O=n(20),P=n(114),T=r(P),A=n(159),C=r(A),I=n(347),w=r(I),N=["log","info","warn","error","dir","trace","time","timeEnd"],R=["error"],M=!1,L=(t.setIsDebugEnabled=function(e){M=e},function e(){var t=this;i(this,e),Object.assign(this,(0,l.default)(N,function(e,t){return(0,S.default)(e,a({},t,function(){for(var e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];if("server"!==T.default.BUILD_TARGET){if((0,h.default)(R,t)){var i=(0,c.default)(r,function(e){return e instanceof Error}),s=o(i),l=s[0],u=s.slice(1),d=(0,b.default)(r,function(e){return e instanceof Error})||new Error(l);w.default.sendError(d,{loggerDetails:u})}M&&(e=console)[t].apply(e,r)}}))},{})),this.apiLog=function(e,t,n){if(!e||!t||(0,m.default)(n))return(0,O.reject)(new Error("Not enough params specified in Logger.apiLog()"));var r=t?t.slice(0,32):"",a=(0,f.default)(n)?n:{data:n};return C.default.post("/logs/"+e,{search:r,data:a},{isDefaultErrorHandlerEnabled:!1}).catch(function(e){M&&console.error("Logger.apiLog()",e)})},"undefined"!=typeof window&&window.addEventListener("unhandledrejection",function(e){e.preventDefault();var n=(0,E.default)(e,"detail.reason")||(0,E.default)(e,"reason")||e,r=n.details?{errorDetails:n.details}:void 0;t.error(n,r)})}),k=new L;t.default=k},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.user?{type:_,data:{currentUser:e.user,isLoggedIn:!0,guestId:null}}:{type:_,data:{currentUser:null,isLoggedIn:!1,guestId:e.guestId}}}function o(e){var t=e.loginOrEmail,n=e.password,r=e.recaptcha,a=e.remember;return function(e,o,i){var s=i.Api,l=i.ApiError;return e({type:b}),y.default.getAsync().then(function(e){var o=e.result;return s.post("/auth/login",{fingerprint:o,loginOrEmail:t,password:n,recaptcha:r,remember:a},{waitForAllToComplete:!0,lock:!0})}).then(function(){return e((0,v.loadWithTranslations)())}).catch(l,function(t){throw e({type:S,error:t}),t})}}function i(e){return function(t,n,r){var a=r.Api,o=e.csrfToken,i=e.csrfTimestamp,s=e.csrfNotifyTimestamp;a.updateCsrfParams({csrfToken:o,csrfTimestamp:i,csrfNotifyTimestamp:s}),t({type:b}),t((0,v.loadWithTranslations)())}}function s(){return function(e,t){var n=t(),r=n.broadcast.isCamActive,a=[];return r&&a.push(e((0,g.reset)())),(0,m.all)(a)}}function l(){return function(e,t,n){var r=n.Api,a=n.ApiError;return e({type:O}),e(s()).then(function(){return r.post("/auth/logout",null,{waitForAllToComplete:!0,lock:!0}).then(function(){return e((0,v.loadWithTranslations)()).then(function(){return e({type:P}),null})}).catch(a,function(t){e({type:T,error:t})})})}}function u(e){return function(t,n){var r=n(),o=r.auth.currentUser,i=!(0,p.default)((0,d.default)(e,A),(0,d.default)(o,A)),s=!(0,p.default)((0,d.default)(e,C),(0,d.default)(o,C));return e.isBlocked||e.isDeleted?t(l()):i?(t((0,h.load)()),t(a({user:e}))):s?t(a({user:e})):(0,m.resolve)()}}Object.defineProperty(t,"__esModule",{value:!0}),t.IMPORTANT_FIELDS=t.CRITICAL_FIELDS=t.LOGOUT_FAIL=t.LOGOUT_SUCCESS=t.LOGOUT_START=t.LOGIN_FAIL=t.LOGIN_SUCCESS=t.LOGIN_START=void 0;var c=n(33),d=r(c),f=n(49),p=r(f);t.processLogin=a,t.login=o,t.updateAuthThroughSocket=i,t.prepareLogout=s,t.logout=l,t.updateCurrentUser=u;var m=n(20),g=n(81),h=n(87),v=n(109),E=n(274),y=r(E),b=t.LOGIN_START="auth/LOGIN_START",_=t.LOGIN_SUCCESS="auth/LOGIN_SUCCESS",S=t.LOGIN_FAIL="auth/LOGIN_FAIL",O=t.LOGOUT_START="auth/LOGOUT_START",P=t.LOGOUT_SUCCESS="auth/LOGOUT_SUCCESS",T=t.LOGOUT_FAIL="auth/LOGOUT_FAIL",A=t.CRITICAL_FIELDS=["isRegular","isGold","isGreen","isDeleted","isAdmin"],C=t.IMPORTANT_FIELDS=["email","isEmailVerified"]},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];return function(r,a,i){var s=i.Api;if(!e.length)return(0,N.resolve)(r({type:$}));r({type:Z});var l=a().auth,u=l.currentUser,c=l.isLoggedIn,d=(0,N.resolve)();if(t&&c){var f,p=n||u.id,m=(f={},o(f,q,{userIds:e}),o(f,Y,{userIds:e}),f),g=[te[q](r,m),te[Y](r,m,{id:p})];d=s.composite({requests:g}).then(function(e){return re[Y](r,e,p),re[q](r,e),null})}else d=s.post("/users/list",{userIds:e}).then(function(e){var t=e.users,n=e.userIdsNotFound;return r({type:Q,data:{users:t,usersNotFound:n}}),null});return d.then(function(){return r({type:$})})}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B;return function(r,a){return r(i((0,E.default)((0,F.getMissingUserIds)(a(),(0,h.default)(e)),0,n),t))}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,o,i){var l=i.Api,u=i.ApiError,c=[te[K](r,n,e)].concat(a(t.map(function(t){return te[t](r,n,e)})));return r({type:Z}),l.composite({requests:c}).then(function(t){var n=t.data,a=t.errors;if(a[K]){var o=new u("loadOne user error",{errors:a});return r({type:Q,data:{usersNotFound:[e]}}),(0,N.reject)(o)}Object.keys(a).forEach(function(n){(0,A.default)(ae,n)&&ae[n](r,t,e)});var i=(0,h.default)((0,I.default)(Object.keys(n).map(function(n){return(0,A.default)(a,n)?[]:re[n](r,t,e)})));return r(s(i)),n[K]})}}function u(e){return function(t){var n=(0,S.default)(e)?e:[e];t({type:Q,data:{users:n}})}}function c(e){return function(t,n){var r=n(),a=(0,S.default)(e)?e:[e];t(u((0,b.default)(a,function(e){return w({},(0,F.getUserById)(r,e.id),e)})))}}function d(e){return function(t){t({type:J,data:{userIds:e}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.processError=t.processCompositeResponse=t.updateSocialLinks=t.prepareCompositeRequest=t.getCriteriaUrl=t.USERS_UPDATE_GOLD_POINTS=t.USERS_UPDATE_TOKENS=t.USERS_LOAD_FINISH=t.USERS_REMOVE=t.USERS_SAVE=t.USERS_LOAD_START=t.SOCIAL_LINKS_UPDATE=t.REQUEST_TYPES=void 0;var f,p,m,g=n(124),h=r(g),v=n(354),E=r(v),y=n(11),b=r(y),_=n(26),S=r(_),O=n(95),P=r(O),T=n(84),A=r(T),C=n(265),I=r(C),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.loadList=i,t.loadMore=s,t.loadOne=l,t.update=u,t.updateUsersFields=c,t.remove=d;var N=n(20),R=n(161),M=n(162),L=n(355),k=n(117),D=n(98),U=n(147),j=n(190),F=n(44),B=30,H=t.REQUEST_TYPES={ALBUMS:"albumsRequest",AVAILABLE_SETTINGS:"availableSettingsRequest",FRIENDS:"friendsRequest",KNIGHTS:"knightsRequest",RELATIONS:"relations",USER:"userRequest",USER_LIST:"userList",VIDEOS:"videosRequest"},V=H.ALBUMS,G=H.AVAILABLE_SETTINGS,x=H.FRIENDS,W=H.KNIGHTS,Y=H.RELATIONS,K=H.USER,q=H.USER_LIST,z=H.VIDEOS,X=t.SOCIAL_LINKS_UPDATE="users/SOCIAL_LINKS_UDATE",Z=t.USERS_LOAD_START="users/LOAD_START",Q=t.USERS_SAVE="users/SAVE",J=t.USERS_REMOVE="users/REMOVE",$=t.USERS_LOAD_FINISH="users/LOAD_FINISH",ee=(t.USERS_UPDATE_TOKENS="users/UPDATE_TOKENS",t.USERS_UPDATE_GOLD_POINTS="users/UPDATE_GOLD_POINTS",t.getCriteriaUrl=function(e){return e.id?String(e.id):"username/"+(e.username||e)}),te=t.prepareCompositeRequest=(f={},o(f,V,function(e,t,n){return e({type:U.LOAD_START}),w({id:V,method:"get",url:"/front/users/"+ee(n)+"/albums"},t&&t[V]?{params:t[V]}:{})}),o(f,G,function(e){return e({type:R.LOAD_START}),{id:G,method:"get",url:"/front/users/availableSettings"}}),o(f,x,function(e,t,n){return e({type:L.LOAD_START}),w({id:x,method:"get",url:"/front/users/"+ee(n)+"/friends"},t&&t[x]?{params:t[x]}:{})}),o(f,W,function(e,t,n){return e({type:M.LOAD_START}),w({id:W,method:"get",url:"/front/models/"+ee(n)+"/knights"},t&&t[W]?{params:t[W]}:{})}),o(f,Y,function(e,t,n){return w({id:Y,method:"post",url:"/front/users/"+ee(n)+"/relation"},t&&t[Y]?{params:t[Y]}:{})}),o(f,K,function(e,t,n){return w({id:K,method:"get",url:"/front/users/"+ee(n)},t&&t[K]?{params:t[K]}:{})}),o(f,q,function(e,t){return w({id:q,method:"post",url:"/front/users/list"},t&&t[q]?{params:t[q]}:{})}),o(f,z,function(e,t,n){return e({type:j.LOAD_START}),w({id:z,method:"get",url:"/front/users/"+ee(n)+"/videos"},t&&t[z]?{params:t[z]}:{})}),f),ne=t.updateSocialLinks=function(e,t){return function(n){return n({type:X,data:{socialLinks:o({},e,t)}})}},re=t.processCompositeResponse=(p={},o(p,V,function(e,t){if(!(0,A.default)(t.data,K))return[];var n=t.data[K].user.id;return e({type:U.LOAD_SUCCESS,data:w({userId:n},t.data[V])}),[]}),o(p,G,function(e,t){var n=t.data[G];return e({type:R.LOAD_SUCCESS,data:{availableSettings:n}}),[]}),o(p,x,function(e,t){if(!(0,A.default)(t.data,K))return[];var n=t.data[K].user.id,r=t.data[x],a=r.friendships,o=r.userIds;return e({type:L.LOAD_SUCCESS,data:{userId:n,userIds:o}}),e({type:k.LOAD_SUCCESS,data:{friendships:a}}),o||[]}),o(p,W,function(e,t){if(!(0,A.default)(t.data,K))return[];var n=t.data[K].user.id,r=t.data[W].userIds;return e({type:M.LOAD_SUCCESS,data:{modelId:n,userIds:r}}),r}),o(p,Y,function(e,t,n){if(!(0,A.default)(t.data,Y))return[];var r=t.data[Y].canBan;return e((0,D.update)({canBan:r},n)),[]}),o(p,K,function(e,t){if(!(0,A.default)(t.data,K))return[];var n=t.data[K],r=n.friendship,a=n.socialLinks,o=n.user;return e((0,D.process)(t.data[K])),e({type:Q,data:{users:[o]}}),e(ne(o.id,a)),r&&e({type:k.LOAD_SUCCESS,data:{friendships:[r]}}),[]}),o(p,q,function(e,t){var n=t.data[q],r=n.users,a=n.userIdsNotFound;return e({type:Q,data:{users:r,usersNotFound:a}}),[]}),o(p,z,function(e,t){if(!(0,A.default)(t.data,K))return[];var n=t.data[K].user.id;return e({type:j.LOAD_SUCCESS,data:w({userId:n},t.data[z])}),[]}),p),ae=t.processError=(m={},o(m,V,function(e){e({type:U.LOAD_FAIL})}),o(m,G,function(e){e({type:R.LOAD_FAIL})}),o(m,x,function(e){e({type:L.LOAD_FAIL})}),o(m,W,function(e){e({type:M.LOAD_FAIL})}),o(m,K,function(e,t,n){var r=(0,P.default)(n)?n.id||n.username:n;e({type:Q,data:{usersNotFound:[r]}})}),o(m,z,function(e){e({type:j.LOAD_FAIL})}),m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.userProfileHasChanged=t.getIsApprovedModel=t.getIsInvisible=t.getIsEmailVerified=t.getIsSucceeded=t.getError=t.getIsUpdating=t.getHasGoldMembershipSubscription=t.getCurrentUserProfile=void 0;var a=n(49),o=r(a),i=n(6),s=r(i);t.getCurrentUserProfile=function(e){return e.profile.user},t.getHasGoldMembershipSubscription=function(e){var t=e.profile.user;return t&&t.isGoldSubscriber&&t.isRebillEnabled},t.getIsUpdating=function(e,t){return e.profile.updatingTypes.has(t)},t.getError=function(e,t){return e.profile.typeErrors.get(t)},t.getIsSucceeded=function(e,t){return e.profile.succeededTypes.has(t)},t.getIsEmailVerified=function(e){var t=e.profile,n=e.auth,r=n.isLoggedIn,a=n.isLoggingOut;return!(r&&!a)||(0,s.default)(t,"user.isEmailVerified",!0)},t.getIsInvisible=function(e){var t=e.profile,n=e.auth,r=n.isLoggedIn,a=n.isLoggingOut;return r&&!a&&(0,s.default)(t,"user.isInvisible",!1)},t.getIsApprovedModel=function(e){var t=e.profile;return(0,s.default)(t,"user.isApprovedModel",!1)},t.userProfileHasChanged=function(e,t){return!(0,o.default)(e.userProfile,t.userProfile)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=r(s),u=n(144),c=r(u),d=n(171),f=r(d),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},g=n(1),h=r(g),v=n(0),E=r(v),y=n(2),b=n(3),_=r(b),S=n(5),O=n(21),P=1e4,T=500,A=void 0,C=function(){return{bottom:null,height:null,left:null,right:null,top:null,width:null}},I=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:O.layoutHasChanged,action:function(){r.updatePosition()}},{update:O.orientationHasChanged,action:function(){r.updateTooltipPosition()}}],r.updateTooltipPosition=function(){(0,f.default)(r.documentUpdateHandler,T)},r.documentUpdateHandler=function(){r.props.isForceVisible?r.updatePosition():r.tooltipMouseLeaveHandler()},r.targetMouseEnterHandler=function(){r.setState({isVisible:!0})},r.tooltipMouseLeaveHandler=function(){r.tooltipRef&&r.setState({isVisible:!1})},r.tooltipMouseClickHandler=function(e){r.props.shouldPreventDefault&&e.preventDefault(),r.tooltipRef&&r.setState({isVisible:!1})},r.windowTouchStartHandler=function(e){var t=r.targetElement,n=r.props.shouldPreventDefault;if(t&&e.target.id===t.id){var a=r.state.isVisible;n&&e.preventDefault(),a||e.stopPropagation(),r.onToggleVisibility(!a)}else r.onToggleVisibility(!1)},r.onToggleVisibility=function(e){clearTimeout(A),e&&(A=setTimeout(function(){r.tooltipRef&&r.setState({isVisible:!1})},P)),r.setState({isVisible:e})},r.getRect=function(e){var t=e.getBoundingClientRect(),n=document.documentElement.clientWidth,a=r.props.screenGutter,o=(e.offsetHeight-t.height)/2,i=(e.offsetWidth-t.width)/2,s=n-2*a;return{top:t.top-o,left:t.left-i,height:e.offsetHeight,width:e.offsetWidth>s?s:e.offsetWidth}},r.applyIndentation=function(e){var t=r.props.indentation;return{top:e.top-t,left:e.left-t,height:e.height+2*t,width:e.width+2*t}},r.applyPosition=function(e){var t=r,n=t.tooltipRef,a=t.tooltipArrowRef,o=r.props.screenGutter,i=r.targetElement,s=document.documentElement.clientWidth,l=r.getRect(n),u=r.applyIndentation(r.getRect(i)),c=r.getOffset(u,l,e),d=r.getPosition({tooltipRect:l,targetRect:u,placement:e}),f=r.getDelta(c,d),p=s-2*o,m=p===l.width?l.width+"px":"auto",g={left:c.left+d.left+f.x+"px",top:c.top+d.top+"px",width:m},h={transform:"translate("+-f.x+"px, "+-f.y+"px)"};n.classList.remove("top"),n.classList.remove("left"),n.classList.remove("right"),n.classList.remove("bottom"),n.classList.add(e),Object.assign(n.style,g),Object.assign(a.style,h)},r.getDelta=function(e,t){var n=document.documentElement,a=n.clientWidth,o=n.clientHeight,i=r.props.screenGutter,s=r,l=s.tooltipRef,u=r.targetElement,c=r.getRect(l),d=r.applyIndentation(r.getRect(u)),f=0,p=0;return e.left+t.left<i?f=i-e.left-t.left:a-e.left-t.left-c.width<i&&(f=a-e.left-t.left-c.width-i),e.top+t.top<=i?p=i-e.top-t.top:o-e.top-t.top-c.height<i&&(p=i-(o-e.top-t.top-d.height)),{x:c.height/2<Math.abs(f)?0:f,y:c.width/2<Math.abs(p)?0:p}},r.updatePosition=function(){var e=r.props.placement,t=r.targetElement,n=r,a=n.tooltipRef;if(a&&t){var o=r.getRect(a);if("fixed"!==getComputedStyle(a).position)return void Object.assign(a.style,C());var i=r.getRect(t),s=o.width/2,u=document.documentElement,d=u.clientWidth,f=u.clientHeight,p=i.left+i.width,m=[];s+p<d&&i.left-s>0&&(i.top-o.height>0&&m.push("top"),i.top+i.height+o.height<f&&m.push("bottom")),p+o.width<d&&m.push("right"),i.left-o.width>0&&m.push("left"),0===m.length?r.applyPosition("bottom"):(0,l.default)(m,e)?r.applyPosition(e):r.applyPosition((0,c.default)(m))}},r.getPosition=function(e){var t=e.tooltipRect,n=e.targetRect,r=e.placement,a=(n.height-t.height)/2,o=(n.width-t.width)/2,i=void 0,s=void 0;return"top"===r?(i=o,s=-t.height):"bottom"===r?(i=o,s=0):"right"===r?(i=0,s=a):"left"===r&&(i=-t.width,s=a),{left:n.left+i,top:n.top+s}},r.getOffset=function(e,t,n){return{left:(0,l.default)(["right"],n)?e.width:0,top:(0,l.default)(["bottom"],n)?e.height:0}},i=n,o(r,i)}return i(t,e),p(t,[{key:"getDefaultState",value:function(){return{isVisible:this.props.isForceVisible}}},{key:"componentDidMount",value:function(){var e=this.props.isForceVisible,n=this.targetElement;e||(S.BROWSER_CAPABILITIES.touch?this.registerEventListener(window,"touchstart",this.windowTouchStartHandler):(this.registerEventListener(n,"mouseenter",this.targetMouseEnterHandler),this.registerEventListener(n,"mouseleave",this.tooltipMouseLeaveHandler),this.registerEventListener(n,"click",this.tooltipMouseClickHandler))),S.BROWSER_CAPABILITIES.iPad&&(this.registerEventListener(document,"focusout",this.updateTooltipPosition),this.registerEventListener(document,"focusin",this.updateTooltipPosition)),this.registerEventListener(window,"scroll",this.documentUpdateHandler),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentDidRender",value:function(e,n,r){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this,e,n,r),this.targetElement&&this.updatePosition()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.children,a=t.isMobileRelative,o=t.isOneLine;return this.state.isVisible?E.default.createElement("div",{ref:function(t){e.tooltipRef=t},role:"tooltip",className:this.c(n,"tooltip",{"mobile-relative":a,"one-line":o}),style:this.forcedStyle},E.default.createElement("div",{className:"tooltip-arrow",ref:function(t){e.tooltipArrowRef=t}}),E.default.createElement("div",{className:"tooltip-inner"},r)):null}},{key:"forcedStyle",get:function(){var e={bottom:"auto",height:"auto",left:"0px",right:"auto",top:"0px",width:"auto"};return this.props.targetId?e:{}}},{key:"targetElement",get:function(){return this.props.targetId?document.getElementById(this.props.targetId):null}}]),t}(_.default);I.propTypes={className:h.default.string,indentation:h.default.number,isForceVisible:h.default.bool,isMobileRelative:h.default.bool,isOneLine:h.default.bool,minWidth:h.default.string,placement:h.default.oneOf(["top","right","bottom","left"]),screenGutter:h.default.number,shouldPreventDefault:h.default.bool,targetId:h.default.string},I.defaultProps={indentation:0,isForceVisible:!1,isMobileRelative:!0,isOneLine:!1,placement:"right",screenGutter:10,shouldPreventDefault:!1,targetId:null},I.contextTypes={};var w=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight,windowOrientation:t.windowOrientation}};t.default=(0,y.connect)(w,null,null,{withRef:!0})(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(14),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(3),E=r(v),y=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),f(t,[{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.inputRef;if(t.focus(),e){var n=t.value.length;t.setSelectionRange(n,n)}}},{key:"blur",value:function(){this.inputRef.blur()}},{key:"click",value:function(){this.inputRef.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.display,i=t.size,s=t.type,l=o(t,["className","display","size","type"]),u=(0,c.default)(["text","number","email","password"],s),f=this.c(a({input:u},s,!u),s+"-"+i,r,n);return h.default.createElement("input",d({className:f,type:s,ref:function(t){e.inputRef=t}},l))}},{key:"value",get:function(){return this.inputRef.value},set:function(e){this.inputRef.value=e}},{key:"checked",get:function(){return this.inputRef.checked},set:function(e){this.inputRef.checked=e}}]),t}(E.default);y.contextTypes={},y.propTypes={className:m.default.string,display:m.default.oneOf(["block","inline-block"]),id:m.default.string,size:m.default.oneOf(["default","small","medium","large"]),type:m.default.oneOf(["text","number","email","radio","checkbox","password","file"])},y.defaultProps={display:"inline-block",size:"default",type:"text"},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.propsParamsUsernameHasChanged=t.currentUserHasBecomeGreen=t.currentUserRolesHasChanged=t.currentUserHasChangedAndIsLoggedIn=t.currentUserHasLoggedOut=t.currentUserHasChanged=t.getCurrentUser=void 0;var a=n(33),o=r(a),i=n(49),s=r(i),l=n(84),u=r(l),c=n(6),d=r(c),f=n(223),p=r(f),m=n(34),g=(t.getCurrentUser=function(e){return e.auth.currentUser},(0,p.default)(m.CRITICAL_FIELDS,m.IMPORTANT_FIELDS)),h=t.currentUserHasChanged=function(e,t){return e.isLoggedIn!==t.isLoggedIn||(0,d.default)(e,"currentUser.id")!==(0,d.default)(t,"currentUser.id")},v=(t.currentUserHasLoggedOut=function(e,t){return!(!e.isLoggedIn||t.isLoggedIn)||e.currentUser&&!t.currentUser},t.currentUserHasChangedAndIsLoggedIn=function(e,t){return h(e,t)&&t.isLoggedIn},t.currentUserRolesHasChanged=function(e,t){return e.isLoggedIn!==t.isLoggedIn||!(0,s.default)((0,o.default)(e.currentUser,g),(0,o.default)(t.currentUser,g))});t.currentUserHasBecomeGreen=function(e,t){return v(e,t)&&(0,u.default)(e,"currentUser.isGreen")&&!(0,d.default)(e,"currentUser.isGreen")&&(0,d.default)(t,"currentUser.isGreen")},t.propsParamsUsernameHasChanged=function(e,t){return(0,d.default)(e,"match.params.username")!==(0,d.default)(t,"match.params.username")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return function(e,t,n){var r=n.Api,a=t(),o=a.appSettings.data.tabId,i=a.viewCam.model,s=pe(a);return i?(ge=0,r.del("/models/"+i.id+"/viewers/"+s,{tabId:o})):(0,x.resolve)()}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var a=r(),o=a.viewCam.model;n((0,K.showModal)(z.MODAL_TYPES.AUTH,G({action:G({backgroundImage:o.avatarUrl,type:"createFreeAccount",user:o,shouldBypassActionPrefix:!0},t),component:"SignUp",className:"auth-modal-signup"},e)))}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),a=r.viewCam.model;(0,$.composeActionOnEnter)("addToFavorites",{modelId:a.id,waitSocketSubscriptionKey:"userUpdated:"+a.id}).then(function(n){var r={onSuccess:(0,B.default)(function(){$.performActionOnEnter.addToFavorites(n.params,t)},re.ADD_TO_FAVORITES_DELAY),onEnterAction:n};t(i(e,r))})}}function l(e){return function(t,n,r){var o=r.Api,i=n(),s=i.modelFilter.activeModelListParams,l=s.tagAlias,u=s.searchString,c=s.sortBy,d=i.viewCam.model;if(!d)return(0,x.reject)(new Error("There is no viewCam model for switching"));var f=void 0;f=u?{query:u}:{tagAlias:l||re.DEFAULT_INDEX_TAG_ALIAS},f.sortBy=c;var p="next"===e;return o.get("/models/"+d.id+"/"+e,G({},f)).then(function(n){var r=n.model;return r?(Q.default.onViewCamSwitch(e),t({type:ce.USERS_SAVE,data:{users:[r]}}),t((0,W.push)((0,ae.getViewCamUrl)(i,r.username))),null):(t({type:Se,data:a({},p?"isNextModelAvailable":"isPrevModelAvailable",!1)}),null)}).catch(function(){t({type:Se,data:a({},p?"isNextModelAvailable":"isPrevModelAvailable",!1)})})}}function u(e){return function(t){t({type:_e,data:{kingId:e}})}}function c(e,t){return function(n,r,a){var o=a.Api,i=r(),s=i.appSettings.data.viewServers,l=pe(i);return o.put("/models/"+e+"/shows/"+t+"/viewers/"+l,{server:s.wowza})}}function d(e){var t=e.modelId,n=e.username;return function(e,r,o){var i=o.Api,s=r(),l=s.auth,d=l.currentUser,f=l.isLoggedIn,p=ce.REQUEST_TYPES.KNIGHTS,m=ce.REQUEST_TYPES.USER,g=t?""+t:"username/"+n,h=t?(0,ae.getModelById)(s,t):(0,ae.getModelByUsername)(s,n);if(he&&he.cancel(),n&&!(0,J.isUsernameValid)(n))return e({type:ce.USERS_SAVE,data:{usersNotFound:[t||n]}}),(0,x.reject)(new X.ValidationError("Username is invalid"));var v=[{id:"camRequest",method:"get",url:"/front/models/"+g+"/cam"},{id:"goalRequest",method:"get",url:"/front/models/"+g+"/goal"},(0,ne.prepareChatRequest)(g),ce.prepareCompositeRequest[m](e,null,{id:t,username:n}),ce.prepareCompositeRequest[p](e,null,{id:t,username:n})];return f&&h&&(0,oe.getIsKnightOfModel)(s,h.id,d.id)&&v.push({id:"bansRequest",method:"get",url:"/front/users/"+g+"/bans"}),he=i.composite({requests:v},{lock:!0}).then(function(r){var o=(0,j.default)(r,"errors",{});if(o[m]){var i=new X.ApiError("loadCamData error",{errors:o});return e({type:ce.USERS_SAVE,data:{usersNotFound:[t||n]}}),(0,x.reject)(i)}var s=(0,j.default)(r,"data",{}),l=s.bansRequest,c=s.camRequest,d=s.chatRequest,f=s.goalRequest,g=s.knightsRequest,h=s.userRequest,v=(0,V.default)((0,j.default)(h,"user")||[],(0,j.default)(g,"knights")||[],(0,j.default)(c,"king")||[]);if(e({type:ce.USERS_SAVE,data:{users:v}}),ce.processCompositeResponse[ce.REQUEST_TYPES.USER](e,r),(0,j.default)(h,"user.isModel")&&!1===(0,j.default)(h,"user.isApprovedModel"))return e({type:ce.USERS_SAVE,data:{usersNotFound:[t||n],users:v}}),(0,x.reject)(new X.ValidationError("Model isn't approved"));if(o.camRequest){var E=new X.ApiError("loadCamData error",{errors:o});return e({type:ve,data:{error:E}}),(0,x.reject)(E)}if(c.king&&!o.king&&e(u(c.king.id)),l&&!o.bansRequest&&e({type:ue.LOAD_SUCCESS,data:l}),e((0,ne.processChatResponse)(d,h.user.id)),!o.chatRequest){var y={isSubscribed:a({},h.user.id,h.isSubscribed)};e((0,le.update)(y))}return h.isInFavorites&&e({type:te.ADD_SUCCESS,data:{favoriteId:h.user.id}}),g&&!o.knightsRequest&&ce.processCompositeResponse[p](e,r),e({type:Ee,data:G({},c,f,{model:h.user})}),r}).then(function(n){var r=(0,j.default)(n,"data.camRequest.show.id",null);return r&&e(c(t,r)),n})}}function f(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.isLoggingOut,i=a.appSettings.data.tabId,s=a.viewCam,l=s.isCamActive,u=s.model,c=pe(a);return o||!u?(0,x.reject)(new Error("User must be authorized to run this action, model should be set")):(ge>fe&&e({type:Te,data:{modelId:u.id}}),r.put("/models/"+u.id+"/viewers/"+c,{isCamActive:l,tabId:i},{isDefaultErrorHandlerEnabled:!1,timeout:re.UPDATE_USER_ONLINE_INTERVAL}).then(function(t){var n=t.serverTime,r=t.isCamActive;return e((0,Y.updateTimeDelta)(n)),e({type:je,data:{isCamActive:r}}),ge>fe&&e(d({modelId:u.id})),ge=0,null}).catch(X.NetworkError,function(){ge+=1}).catch(X.ApiError,function(t){400===t.statusCode?(e({type:Te,data:{modelId:u.id}}),e((0,ee.error)(t.message,"viewCam"))):403===t.statusCode&&clearTimeout(me)}).catch(X.ServerError,function(){ge+=1}))}}function p(){return function(e,t){return clearTimeout(me),e(f()).then(function(){var n=t(),r=n.auth,a=n.viewCam.model,o=r.isLoggedIn,i=o?re.UPDATE_USER_ONLINE_INTERVAL:re.UPDATE_GUEST_ONLINE_INTERVAL;a&&(me=setTimeout(function(){return e(p())},i))})}}function m(e){return function(t,n){var r=n(),a=(0,ae.getModelByUsername)(r,e);return t(o()),t({type:be,data:{model:a}}),t(d({username:e})).then(function(){return t(p())})}}function g(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth,i=o.currentUser,s=o.isLoggedIn,l=a.viewCam.model,u=(0,ie.getPrivateMode)(a);return s?l?r.del("/models/"+l.id+"/viewers/"+i.id+"/"+u).then(function(){return e({type:Te,data:{modelId:l.id}}),null}):(0,x.reject)(new Error("Cannot stop private, model not found")):(0,x.reject)(new Error("User must be authorized to run this action"))}}function h(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth,i=o.currentUser,s=o.isLoggedIn,l=a.viewCam.model;return s?l?r.del("/models/"+l.id+"/viewers/"+i.id+"/spy").then(function(){return e(d({modelId:l.id}))}):(0,x.reject)(new Error("Cannot stop spy, model not found")):(0,x.reject)(new Error("User must be authorized to run this action"))}}function v(){return function(e,t){var n=t(),r=n.viewCam.model,a=(0,ie.getPrivateMode)(n);if(clearTimeout(me),!r)return(0,x.reject)(new Error("Cannot reset viewCam, Model not found"));a&&e(g());var i=e(o());return e({type:Ne}),i}}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(r,a,o){var i=o.Api,s=a(),l=s.viewCam.model;return l?i.post("/models/"+l.id+"/rate/"+e,{score:t,description:n}):(0,x.reject)(new Error("Cannot rate private, Model not found"))}}function y(e,t){return function(n,r,a){var o=a.Api,i=r(),s=i.auth,l=s.currentUser;return s.isLoggedIn?o.put("/models/"+e+"/viewers/"+l.id+"/"+t).then(function(r){return n({type:Ie,data:{proposeMode:t,proposeTimer:r.timeout}}),"spy"===t&&(n(d({modelId:e})),n({type:Pe})),null}).catch(X.ApiError,function(e){e.message&&n((0,ee.error)(e.message,"viewCam")),n({type:we,data:{error:e}})}):(0,x.reject)(new Error("User must be authorized to run this action"))}}function b(e){return function(t){t({type:e?Ce:Ae})}}function _(e){var t=e.username;return function(e){return e((0,se.load)({username:t})).then(function(){e(b(!0))})}}function S(e,t,n,r,a){return function(o,i,s){var l=s.Api,u=i(),c=u.auth,d=c.currentUser;return c.isLoggedIn?l.post("/users/"+d.id+"/transactions",{modelId:e,amount:t,message:n,isPrivate:r}).then(function(){return o({type:ke,data:{amount:t,modelId:e,tipSource:a,tipType:q.TIP_TYPES.ONLINE}}),null}).catch(X.ApiError,function(e){o({type:Le,data:{error:e}})}):(0,x.reject)(new Error("User must be authorized to run this action"))}}function O(e,t,n,r){return function(a,o,i){var s=i.Api,l=o(),u=l.auth,c=u.currentUser,d=u.isLoggedIn,f=(0,de.getUserById)(l,e);return d?s.post("/users/"+c.id+"/conversations/"+e+"/tips",{amount:t,body:n}).then(function(){return a({type:Me,data:{amount:t,modelId:e,tipSource:r,tipType:q.TIP_TYPES.OFFLINE}}),a((0,W.push)("/messages/"+f.username)),null}).catch(X.ApiError,function(e){a({type:Re,data:{error:e}})}):(0,x.reject)(new Error("User must be authorized to run this action"))}}function P(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth,i=o.currentUser,s=o.isLoggedIn,l=a.viewCam,u=l.model,c=l.proposeMode;return s?c&&u?r.del("/models/"+u.id+"/viewers/"+i.id+"/"+c).then(function(){return e({type:Ie,data:{proposeMode:null,proposeTimer:null}}),null}):(0,x.reject)(new Error("Cannot cancel proposal - there is no current one")):(0,x.reject)(new Error("User must be authorized to run this action"))}}function T(e){return function(t){return t({type:Ge,data:{playerVolume:e}})}}function A(){return function(e){return e({type:Ve,data:{status:""}})}}function C(){return function(e){return e({type:Ve,data:{status:""}})}}function I(e){return function(t){return t({type:Be,data:{isControlsBlockVisible:e}})}}function w(e){return function(t){return t({type:He,data:{isFullscreen:e}})}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){n({type:De,data:{forcePlayerType:e,isPermanent:t}})}}function R(e){return function(t){t({type:Ue,data:{isPlayerSettingsVisible:e}})}}function M(e){return function(t){return t({type:xe,data:{modelId:e}})}}function L(){return function(e){return e({type:ye,data:{}})}}function k(e){return function(t){t({type:Oe,data:{unblockModelId:e}}),t((0,K.showModal)(z.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:q.BUY_TOKENS_DIALOG_SOURCES.BANNED_SCREEN_BECOME_GREEN}))}}function D(e){return function(t){return t({type:Fe,data:{username:e}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.WATCH_MODEL_BEGIN=t.VIRTUAL_PRIVATE_START=t.VIEWCAM_VOLUME_CHANGE=t.VIEWCAM_SETTINGS_CHANGE=t.VIEWCAM_PLAYER_STATUS_CHANGE=t.VIEWCAM_MODEL_UPDATE=t.VIEWCAM_FULLSCREEN_CHANGE=t.VIEWCAM_CONTROLS_BLOCK_VISIBLE_CHANGE=t.UPDATE_VIEWCAM_MODEL_USERNAME=t.UPDATE_CAM_ACTIVE=t.TOGGLE_SETTINGS=t.SET_PLAYER_TYPE=t.SEND_TIP_SUCCESS=t.SEND_TIP_FAIL=t.SEND_OFFLINE_TIP_SUCCESS=t.SEND_OFFLINE_TIP_FAIL=t.RESET=t.PROPOSAL_ERROR=t.PROPOSAL_CHANGE=t.PROFILE_SHOW=t.PROFILE_HIDE=t.PRIVATE_STOP=t.PRIVATE_START=t.PREPARE_BUY_TOKENS=t.NEXT_PREV_MODEL_NOT_AVAILABLE=t.KING_SET=t.INIT=t.GOAL_SET_SUCCESS=t.FLASH_PLAYER_INITED=t.CAM_DATA_LOAD_SUCCESS=t.CAM_DATA_LOAD_FAIL=void 0;var U=n(6),j=r(U),F=n(36),B=r(F),H=n(223),V=r(H),G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.cancelOnlineStatus=o,t.createFreeAccountModal=i,t.createAddToFavoriteModal=s,t.goToModel=l,t.setKing=u,t.saveViewServer=c,t.loadCamData=d,t.updateOnlineStatus=f,t.onlineTimerMethod=p,t.init=m,t.stopPrivate=g,t.stopSpy=h,t.reset=v,t.ratePrivate=E,t.proposePrivate=y,t.toggleProfileVisibility=b,t.loadModelProfile=_,t.sendTip=S,t.sendOfflineTip=O,t.cancelProposal=P,t.changeVolume=T,t.play=A,t.pause=C,t.toggleControlsBlockVisible=I,t.toggleFullscreen=w,t.updatePlayerType=N,t.toggleSettings=R,t.beginModelWatching=M,t.setFlashInited=L,t.prepareBuyTokens=k,t.udpateViewcamModelUsername=D;var x=n(20),W=n(31),Y=n(79),K=n(9),q=n(51),z=n(5),X=n(54),Z=n(59),Q=r(Z),J=n(82),$=n(19),ee=n(28),te=n(108),ne=n(99),re=n(12),ae=n(45),oe=n(163),ie=n(71),se=n(43),le=n(98),ue=n(130),ce=n(37),de=n(44),fe=1e3*re.MAXIMUM_IDLE_TIME_SECONDS/re.UPDATE_USER_ONLINE_INTERVAL,pe=function(e){var t=e.auth,n=e.appSettings;return t.isLoggedIn?t.currentUser.id:n.data.guestId},me=null,ge=0,he=null,ve=t.CAM_DATA_LOAD_FAIL="viewCam/CAM_DATA_LOAD_FAIL",Ee=t.CAM_DATA_LOAD_SUCCESS="viewCam/CAM_DATA_LOAD_SUCCESS",ye=t.FLASH_PLAYER_INITED="viewCam/FLASH_PLAYER_INITED",be=(t.GOAL_SET_SUCCESS="viewCam/GOAL_SET_SUCCESS",t.INIT="viewCam/INIT"),_e=t.KING_SET="viewCam/KING_SET",Se=t.NEXT_PREV_MODEL_NOT_AVAILABLE="viewCam/NEXT_PREV_MODEL_NOT_AVAILABLE",Oe=t.PREPARE_BUY_TOKENS="viewCam/PREPARE_BUY_TOKENS",Pe=t.PRIVATE_START="viewCam/PRIVATE_START",Te=t.PRIVATE_STOP="viewCam/PRIVATE_STOP",Ae=t.PROFILE_HIDE="viewCam/PROFILE_HIDE",Ce=t.PROFILE_SHOW="viewCam/PROFILE_SHOW",Ie=t.PROPOSAL_CHANGE="viewCam/PROPOSAL_CHANGE",we=t.PROPOSAL_ERROR="viewCam/PROPOSAL_ERROR",Ne=t.RESET="viewCam/RESET",Re=t.SEND_OFFLINE_TIP_FAIL="viewCam/SEND_OFFLINE_TIP_FAIL",Me=t.SEND_OFFLINE_TIP_SUCCESS="viewCam/SEND_OFFLINE_TIP_SUCCESS",Le=t.SEND_TIP_FAIL="viewCam/SEND_TIP_FAIL",ke=t.SEND_TIP_SUCCESS="viewCam/SEND_TIP_SUCCESS",De=t.SET_PLAYER_TYPE="viewCam/SET_PLAYER_TYPE",Ue=t.TOGGLE_SETTINGS="viewCam/TOGGLE_SETTINGS",je=t.UPDATE_CAM_ACTIVE="viewCam/UPDATE_CAM_ACTIVE",Fe=t.UPDATE_VIEWCAM_MODEL_USERNAME="viewCam/UPDATE_VIEWCAM_MODEL_USERNAME",Be=t.VIEWCAM_CONTROLS_BLOCK_VISIBLE_CHANGE="viewCam/VIEWCAM_CONTROLS_BLOCK_VISIBLE_CHANGE",He=t.VIEWCAM_FULLSCREEN_CHANGE="viewCam/VIEWCAM_FULLSCREEN_CHANGE",Ve=(t.VIEWCAM_MODEL_UPDATE="viewCam/VIEWCAM_MODEL_UPDATE",t.VIEWCAM_PLAYER_STATUS_CHANGE="viewCam/VIEWCAM_PLAYER_STATUS_CHANGE"),Ge=(t.VIEWCAM_SETTINGS_CHANGE="viewCam/VIEWCAM_SETTINGS_CHANGE",t.VIEWCAM_VOLUME_CHANGE="viewCam/VIEWCAM_VOLUME_CHANGE"),xe=(t.VIRTUAL_PRIVATE_START="viewCam/VIRTUAL_PRIVATE_START",t.WATCH_MODEL_BEGIN="viewCam/WATCH_MODEL_BEGIN")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=t.availableSettings.data,r=function(r){return e[r]?(0,D.validateImageFile)(e[r],n[r],t).then(function(e){return e?o({},r,e):{}}):(0,w.resolve)({})};return(0,w.all)([r("avatar"),r("preview")]).then(function(e){var n=C.default.apply(void 0,[{}].concat(a(e)));return(0,_.default)(n)?(0,w.resolve)():(0,w.reject)(new M.ValidationError((0,U.translate)(t,{messageId:"errors.validationError"}),n))})}function s(e){var t=e.dataUrl;return function(e,n){var r=n(),a=r.availableSettings.data,o=a.avatar,i=o.minWidth,s=o.minHeight;return(0,L.getImageFromDataUrl)(t).then(function(e){return(0,D.validateImageDimensions)(e,i,s,r)}).catch(M.ValidationError,function(t){var n=new M.ValidationError((0,U.translate)(r,{messageId:"errors.validationError"}),{avatar:t.message});throw e({type:x,data:{error:t,type:H.AVATAR}}),n})}}function l(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser.id;return t({type:Y,data:{type:e}}),a.get("/users/"+i+"/review/"+(0,y.default)(e)).then(function(n){var r=n.review;if(!r)throw new M.ValidationError((0,U.translate)(o,{messageId:"startBroadcasting.preview.mustUploadPhoto"}));if(r.status===F.REVIEW_STATUSES.REJECTED)throw new M.ValidationError((0,U.translate)(o,{messageId:"startBroadcasting.preview.removedPhoto"}));t({type:K,data:{type:e}})}).catch(function(n){t({type:x,data:{type:e,error:n}})})}}function u(e){return function(t){t({type:W,data:{type:e}})}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,a,o){var s=o.Api,l=o.ApiError,u=a(),c=u.auth,d=c.currentUser;if(!c.isLoggedIn)return(0,w.reject)(new M.ApplicationError("UpdateProfile: you are not logged in"));if(!(0,O.default)(H,t))throw new M.ApplicationError("Incorrect profile update type: "+t);var f=(0,U.translate)(u,{messageId:"notifications.updateProfileSuccess."+(0,T.default)(t)}),p=(0,U.translate)(u,{messageId:"notifications.updateProfileError."+(0,T.default)(t)}),m=I({isMultipart:!1,notifications:{success:f,error:p}},n),g=m.isMultipart,h=m.notifications;r({type:Y,data:{type:t}});var v=function(e){var n=e.error,a=e.user,o=e.socialLinks;return n?(h.error&&r((0,R.error)(h.error,"updateProfileFields")),r({type:x,data:{error:n,type:t}})):(h.success&&r((0,R.success)(h.success,"updateProfileFields")),r({type:K,data:{user:a,type:t}}),r((0,B.updateSocialLinks)(a.id,o))),{user:a}};return i(e,u).then(function(){var t=g?{dataType:"multipart"}:{},n=(0,k.convertNullToEmptyStringRecursive)(e);return s.post("/users/"+d.id,n,t)}).then(function(e){var t=e.user,n=e.socialLinks;return r((0,B.update)(t)),r((0,j.updateCurrentUser)(t)),{user:t,socialLinks:n}}).catch(M.ValidationError,function(e){return{error:e}}).catch(l,function(e){return{error:e}}).then(v)}}function d(e){return function(t){t({type:K,data:{user:e,type:H.USER}})}}function f(e){return function(t){t({type:x,data:{type:H.INFO,error:e}})}}function p(e,t){return function(n,r,a){var i=a.ApiError,s=r().auth,l=s.currentUser,u=s.isLoggedIn,c=[B.REQUEST_TYPES.ALBUMS,B.REQUEST_TYPES.FRIENDS,B.REQUEST_TYPES.KNIGHTS,B.REQUEST_TYPES.VIDEOS];u&&c.push(B.REQUEST_TYPES.RELATIONS);var f=o({},B.REQUEST_TYPES.FRIENDS,{limit:t});return n((0,B.loadOne)(e,c,f)).then(function(e){var t=e.user;return u&&t&&l.id===t.id?n(d(t)):null}).catch(i,function(){})}}function m(){return function(){}}function g(e){var t=e.reason,n=void 0===t?"":t;return function(e,t,r){var a=r.Api,o=r.ApiError,i=t(),s=i.auth.currentUser;return a.del("/users/"+s.id,{reason:n}).then(function(){return e((0,R.success)((0,U.translate)(i,{messageId:"deleteMyAccount.notifications.success"}),"updateProfileFields")),null}).catch(o,function(){e((0,R.error)((0,U.translate)(i,{messageId:"deleteMyAccount.notifications.error"}),"updateProfileFields"))})}}function h(e){return function(t,n,r){var o=r.Api,i=r.ApiError,s=n(),l=s.auth.currentUser,u=H.STUDIO_STAFF;return t({type:Y,data:{type:u}}),o.put("/studios/"+l.id+"/staff",{staffUsernames:e}).then(function(n){var r=n.studio,o=n.staff;return t({type:B.USERS_SAVE,data:{users:[r].concat(a(o))}}),t({type:K,data:{user:r,type:u}}),e.length===o.length&&t((0,R.success)((0,U.translate)(s,{messageId:"notifications.updateStaffSuccess"}))),null}).catch(i,function(e){t({type:x,data:{error:e,type:u}})})}}function v(e){var t=e.country,n=e.start;return function(e,r,a){var o=a.Api,i=r().profile.citiesCache;return t&&n?i[t]&&i[t][n]&&i[t][n].length>0?(e({data:{start:n,country:t,cities:i[t][n]},type:V}),N.default.resolve()):o.get("/cities",{country:t,start:n}).then(function(r){e({data:{start:n,country:t,cities:r.suggest},type:V})}):N.default.reject(new Error('"Country" or "start" params not given'))}}Object.defineProperty(t,"__esModule",{value:!0}),t.scrollToUserGallery=t.resetCities=t.UPDATE_SUCCESS=t.UPDATE_START=t.UPDATE_PREPARE=t.UPDATE_FAIL=t.SCROLL_TO_USER_GALLERY=t.LOAD_CITIES_SUCCESS=t.UPDATE_TYPES=void 0;var E=n(86),y=r(E),b=n(13),_=r(b),S=n(14),O=r(S),P=n(539),T=r(P),A=n(528),C=r(A),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.validateAvatarSource=s,t.validateModelProfile=l,t.updatePrepare=u,t.updateProfile=c,t.saveUpdatedProfile=d,t.riseValidationErrors=f,t.load=p,t.refresh=m,t.deleteUser=g,t.updateStaff=h,t.loadCities=v;var w=n(20),N=r(w),R=n(28),M=n(54),L=n(285),k=n(188),D=n(82),U=n(57),j=n(34),F=n(27),B=n(37),H=t.UPDATE_TYPES={AVATAR:"AVATAR",DELETE:"DELETE",DESCRIPTION:"DESCRIPTION",EMAIL:"EMAIL",INFO:"INFO",INVISIBLE_MODE:"INVISIBLE_MODE",LOCALE:"LOCALE",MEMBERSHIP:"MEMBERSHIP",PASSWORD:"PASSWORD",PREVIEW:"PREVIEW",SUBSCRIPTIONS:"SUBSCRIPTIONS",SETTINGS_BANNED:"SETTINGS_BANNED",SETTINGS_PRICING:"SETTINGS_PRICING",SETTINGS_PRIVACY:"SETTINGS_PRIVACY",STUDIO_STAFF:"STUDIO_STAFF",START_BROADCASTING:"START_BROADCASTING",STATUS:"STATUS",USER:"USER"},V=t.LOAD_CITIES_SUCCESS="profile/LOAD_CITIES_SUCCESS",G=t.SCROLL_TO_USER_GALLERY="profile/SCROLL_TO_USER_GALLERY",x=t.UPDATE_FAIL="profile/UPDATE_FAIL",W=t.UPDATE_PREPARE="profile/UPDATE_PREPARE",Y=t.UPDATE_START="profile/UPDATE_START",K=t.UPDATE_SUCCESS="profile/UPDATE_SUCCESS";t.resetCities=function(){return{type:V,data:{cities:[],country:"",start:""}}},t.scrollToUserGallery=function(){return{type:G,data:{}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSocialLinksForUser=t.pickModelFieldsForAmplitude=t.pickUserFieldsForAmplitude=t.getUserRole=t.getUserGoldPoints=t.getUserTokens=t.getIsNotFound=t.getMissingUserIds=t.getUsersBySortedIds=t.getUsersByIds=t.hasUserById=t.getUserByUsername=t.getUserById=t.createUsernameSelector=void 0;var a=n(33),o=r(a),i=n(115),s=r(i),l=n(95),u=r(l),c=n(13),d=r(c),f=n(48),p=r(f),m=n(279),g=r(m),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=n(18),E=n(32),y=n(16),b=n(51),_=n(27),S=function(e,t){return t.match.params.username},O=function(e){return e.users.collection},P=function(e){return e.users.tokens},T=function(e){return e.users.goldPoints},A=(t.createUsernameSelector=function(){return(0,E.createSelector)([S,O],function(e,t){return(0,y.findFirst)(t,{username:e},"",!1)})},t.getUserById=function(e,t){return(0,y.findById)(O(e),t)},t.getUserByUsername=function(e,t){return(0,y.findFirst)(O(e),{username:t},"",!1)},t.hasUserById=function(e,t){return(0,y.hasId)(O(e),t)},t.getUsersByIds=function(e,t){return(0,d.default)(t)?(0,v.Seq)():(0,y.find)(O(e),{id:t}).valueSeq()},t.getUsersBySortedIds=function(e,t){return(0,d.default)(t)?(0,v.Seq)():(0,y.findBySortedIds)(O(e),t).valueSeq()},t.getMissingUserIds=function(e,t){var n=O(e).keySeq().toArray();return(0,g.default)(t,n)},t.getIsNotFound=function(e,t){return e.users.notFoundKeys.has(t)},t.getUserTokens=function(e,t){return P(e).get(t)},t.getUserGoldPoints=function(e,t){return T(e).get(t)},t.getUserRole=function(e){return(0,p.default)(_.USER_ROLES_MAP,function(t,n){return e[n]})});t.pickUserFieldsForAmplitude=function(e){return h({},(0,o.default)(e,b.AMPLITUDE_USER_FIELDS),{userType:A(e)})},t.pickModelFieldsForAmplitude=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return t;var n=e.age,r=e.username;return h({},(0,o.default)(e,b.AMPLITUDE_MODEL_FIELDS),n?{age:n}:{},{modelName:r},(0,u.default)(t)?t:{})},t.getSocialLinksForUser=function(e,t){var n=e.users.socialLinks;return(0,s.default)(n.get(t)||{},"fancentro")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getModelPosition=t.getFavoritesModelsIds=t.getIsModelFavorited=t.getDefaultModelSortingType=t.getCurrentModelSortingType=t.getApiFilterParams=t.hasFilterParamsChanged=t.shouldLoadModels=t.getIsMyStudioModel=t.getModelBase64Preview=t.getBase64Previews=t.getViewCamUrl=t.getIsAllTag=t.getIsPending=t.getFilteredModels=t.getModelByUsername=t.getModelById=t.getAllTagsGroupedByAlphabet=t.getFilteredByPageTagLiveTagGroups=t.getFilteredByPreferenceLiveTagGroups=t.getSearchFormStatus=t.getCurrentTagsPreference=t.getLiveTagDetails=t.getLiveTagGroups=void 0;var o=n(86),i=r(o),s=n(142),l=r(s),u=n(46),c=r(u),d=n(11),f=r(d),p=n(13),m=r(p),g=n(280),h=r(g),v=n(14),E=r(v),y=n(48),b=r(y),_=n(47),S=r(_),O=n(6),P=r(O),T=n(32),A=n(12),C=n(281),I=n(97),w=n(222),N=n(5),R=n(16),M=n(57),L=n(41),k=function(e){return e.modelsOnline.isPending},D=function(e){return e.modelSearch.isPending},U=function(e){return e.modelSearch.collection},j=function(e){return e.modelsOnline.collection},F=function(e){return e.modelFilter.searchString},B=function(e){return e.viewCam.model?e.viewCam.model.id:null},H=function(e){return e.modelFilter.tagKey},V=function(e){return e.users.collection},G=function(e){return e.viewCam.model},x=function(e){return e.routing.location.pathname.replace("/tags/","")},W=t.getLiveTagGroups=function(e){return e.modelsOnline.liveTagGroups},Y=t.getLiveTagDetails=function(e){return e.modelsOnline.liveTagDetails},K=t.getCurrentTagsPreference=function(e){return e.modelsOnline.currentTagsPreference},q=(t.getSearchFormStatus=function(e){return Boolean(e.modelFilter.searchString)},t.getFilteredByPreferenceLiveTagGroups=(0,T.createSelector)([W,Y,K],function(e,t,n){var r=n,a=(0,f.default)(e,function(e){var n=e.alias,a=e.tags;return{alias:n,tags:(0,S.default)(a,function(e){return-1!==(0,h.default)(["all",(0,P.default)(t[e],"group")],r)})}});return(0,S.default)(a,function(e){return e.tags&&e.tags.length})}),t.getFilteredByPageTagLiveTagGroups=(0,T.createSelector)([W,Y,w.getTagsAliases,x],function(e,t,n,r){var a=(0,P.default)((0,b.default)(n,{alias:r}),"group","F"),o=(0,f.default)(e,function(e){var n=e.alias,r=e.tags;return{alias:n,tags:(0,S.default)(r,function(e){return-1!==(0,h.default)(["all",(0,P.default)(t[e],"group")],a)})}});return(0,S.default)(o,function(e){return e.tags&&e.tags.length})}),(0,T.createSelector)([w.getTagsAliases,K],function(e,t){return(0,c.default)(e,function(e,n){var r=n.tag,o=n.group,i=t;return"all"===o||i===o?[].concat(a(e),[r]):e},[])||[]})),z=(t.getAllTagsGroupedByAlphabet=(0,T.createSelector)([q,M.getTranslateFunction,M.getLocale],function(e,t,n){var r=N.ALPHABET[n];return(0,c.default)(e,function(e,n){var a=t("tags."+n)||n,o=a[0].toUpperCase(),i=void 0;return i=r?-1!==r.indexOf(o)?o:"#":"all",e[i]||(e[i]=[]),e[i].push(n),e},{})}),t.getModelById=function(e,t){var n=G(e);return n&&n.id===t?n:(0,R.findFirst)(j(e),{id:t},null,!1)||(0,R.findFirst)(V(e),{id:t},null,!1)},t.getModelByUsername=function(e,t){var n=G(e);return n&&n.username===t?n:(0,R.findFirst)(j(e),{username:t},null,!1)||(0,R.findFirst)(V(e),{username:t},null,!1)},t.getFilteredModels=(0,T.createSelector)([F,j,U],function(e,t,n){return e?n:t}),t.getIsPending=(0,T.createSelector)([F,D,k],function(e,t,n){return e&&t||n&&!t}),t.getIsAllTag=(0,T.createSelector)([W,H],function(e,t){return!(0,E.default)(A.PSEUDO_TAGS,t)&&(0,l.default)(e,function(e){return(0,E.default)(e.tags,t)})}),t.getViewCamUrl=function(e,t){return(0,E.default)(e.appSettings.data.availableRoutes,(0,i.default)(t))?"/cams/"+t:"/"+t},t.getBase64Previews=function(e){return e.ssr.base64Previews}),X=(t.getModelBase64Preview=function(e,t){return z(e)[t]},t.getIsMyStudioModel=(0,T.createSelector)([L.getCurrentUser,C.getModelIds,B],function(e,t,n){return!(!e||!e.isStudio)&&(0,E.default)(t,n)}),t.shouldLoadModels=function(e,t){if((0,m.default)(e))return!1;if((0,P.default)(t,"searchString"))return!1;var n=(0,P.default)(e,"searchString")&&!(0,P.default)(t,"searchString"),r=(0,P.default)(e,"modelUsername")&&(0,P.default)(e,"modelUsername")!==(0,P.default)(t,"modelUsername"),a=(0,P.default)(e,"isLoggedIn")!==(0,P.default)(t,"isLoggedIn"),o=(0,P.default)(e,"tagAlias")!==(0,P.default)(t,"tagAlias"),i=(0,P.default)(e,"limit")!==(0,P.default)(t,"limit")&&(0,P.default)(t,"initLimit"),s=(0,P.default)(e,"offset")!==(0,P.default)(t,"offset"),l=(0,P.default)(e,"sortBy")!==(0,P.default)(t,"sortBy");return o||i||s||n||r||a||l},t.hasFilterParamsChanged=function(e,t){return!(0,m.default)(e)&&((0,P.default)(e,"tagAlias")!==(0,P.default)(t,"tagAlias")||(0,P.default)(e,"searchString")!==(0,P.default)(t,"searchString")||(0,P.default)(e,"searchString")&&!(0,P.default)(t,"searchString"))},t.getApiFilterParams=function(e){var t=e.modelFilter,n=t.tagAlias,r=t.limit,a=t.offset,o=t.sortBy,i=e.viewCam.modelUsername;return{excludeUsernames:i?[i]:void 0,limit:r,offset:a,tagAlias:n||A.DEFAULT_INDEX_TAG_ALIAS,sortBy:o}},t.getCurrentModelSortingType=function(e){return e.modelFilter.sortBy},t.getDefaultModelSortingType=function(){return A.ONLINE_MODELS_SORTING_TYPES.INDEX_RATING_SORT},t.getIsModelFavorited=function(e,t){return(0,I.getFavoriteIds)(e).indexOf(t)>-1});t.getFavoritesModelsIds=function(e){var t=e.modelsOnline.collection,n=t.toArray(),r=[];return n.forEach(function(t,n){X(e,t.id)&&r.push(n)}),r},t.getModelPosition=function(e,t){return e.modelsOnline.collection.keySeq().toArray().indexOf(t)}},,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ANALYZED_MESSAGE_SUBTYPES=t.ANAL_URL_PARAMS=t.AMPLITUDE_URL_PARAMS=t.AMPLITUDE_USER_FIELDS=t.AMPLITUDE_MODEL_FIELDS=t.AMPLITUDE_KEY=t.AMPLITUDE_EVENTS_WHITE_LIST=t.AMPLITUDE_CHECK_DELAY=t.TIP_TYPES=t.TIP_SOURCES=t.BUY_TOKENS_DIALOG_SOURCES=t.AUTH_TRIGGER_SOURCES=t.BUY_TOKENS_SOURCES=t.AMPLITUDE_EVENTS_TIMEOUTS=t.ANALYTIC_TIMEOUT_IDS=t.TRACKING_PIXEL_API_URLS=t.AMPLITUDE_EVENTS_DEPEND_COUNTRY=t.AMPLITUDE_EVENTS=void 0;var a=n(85),o=r(a),i=n(18),s=r(i),l=n(15),u=r(l),c=n(66),d=n(114),f=t.AMPLITUDE_EVENTS={BUY_TOKENS_DIALOG:"Buy Tokens Dialog",CAM2CAM_START:"Cam2Cam Start",CHAT_COMMAND_USE:"Use chat Command",CHAT_INITIATED:"Initiated a Chat",CHAT_PRIVATE_INITIATED:"Initiated a Private Chat",CLICK_END_CAM2CAM:"Click End Cam2Cam",CLICK_END_PRIVATE:"Click End Private",CLICK_GIVEAWAY_BLOCK:"Click on Giveaway block",CLICK_GIVEAWAY_CLAIM:"Click on Claim",CLICK_GIVEAWAY_PARTICIPATE:"Click on Participate in Giveaway",CLICK_NOTIFY_WHEN_NEW_MESSAGES:"Notify When New Messages",CLICK_NOTIFY_WHEN_ONLINE:"Notify When Online",CLICK_PRIVATE_DIALOG_CAM2CAM:"Click on Cam2Cam in Private Dialog",CLICK_PRIVATE_DIALOG_PRIVATE:"Click on Private in Private Dialog",CLICK_SEND_TIP_DIALOG_SEND:"Click on Send Tip in Send Tip Dialog",CLICK_SEND_TIP:"Click on Send Tip",CLICK_SPY_DIALOG_SPY:"Click on Spy Now in Spy Dialog",CLICK_SPY:"Click on Spy",CLICK_START_PRIVATE:"Click on Start Private",DIALOG_LOGIN:"Login Dialog",DIALOG_SIGNUP:"Signup Dialog",EMAIL_VERIFIED:"Email is verified",INVISIBLE_SWITCH_ON:"Invisible Mode Switch On",PRIVATE_START:"Private Start",SELECT_LANGUAGE:"Select Language",SPY_END_CLICK:"Click End Spy",SPY_START:"Spy Start",START_BROADCASTING:"Start Broadcasting",TOKENS_SENT:"Tokens Sent",WATCH_MODEL:"Watch Model"};t.AMPLITUDE_EVENTS_DEPEND_COUNTRY=[f.BUY_TOKENS_DIALOG,f.CAM2CAM_START,f.CHAT_COMMAND_USE,f.CHAT_INITIATED,f.CHAT_PRIVATE_INITIATED,f.CLICK_END_CAM2CAM,f.CLICK_END_PRIVATE,f.CLICK_PRIVATE_DIALOG_CAM2CAM,f.CLICK_PRIVATE_DIALOG_PRIVATE,f.CLICK_SEND_TIP,f.CLICK_SEND_TIP_DIALOG_SEND,f.CLICK_SEND_TIP_DIALOG_SEND,f.CLICK_SPY,f.CLICK_SPY_DIALOG_SPY,f.CLICK_START_PRIVATE,f.DIALOG_LOGIN,f.DIALOG_SIGNUP,f.INVISIBLE_SWITCH_ON,f.PRIVATE_START,f.SPY_END_CLICK,f.SPY_START,f.WATCH_MODEL],t.TRACKING_PIXEL_API_URLS={SIGNUP_DIALOG:"https://tsyndicate.com/api/v1/retargeting/set/f42c5cfc-2e07-4c66-9fa3-182e1050fa97?",EMAIL_CONFIRMATION_SUCCESS:"https://tsyndicate.com/api/v1/retargeting/set/c7dbeb8a-7a14-4ada-ab39-60b896fe45d6?email=1",TOKENS_PURCHASE_DIALOG:"https://tsyndicate.com/api/v1/retargeting/set/c398fae6-0723-446c-943c-7a0b7839a509?payment=1",TOKENS_PURCHASE_SUCCESS:"https://tsyndicate.com/api/v1/retargeting/set/a790496f-7ca3-46eb-a817-fa369cef12e1?thanks=1"},t.ANALYTIC_TIMEOUT_IDS={WATCH_MODEL:"watchModelReport"},t.AMPLITUDE_EVENTS_TIMEOUTS=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},f.WATCH_MODEL,u.default.duration(2.5,"minutes")),t.BUY_TOKENS_SOURCES={ALBUM_FOR_PAYING:"AlbumForPaying"},t.AUTH_TRIGGER_SOURCES={ALBUM_FOR_FRIENDS:"AlbumForFriends",ALBUM_FOR_PAYING:"AlbumForPaying",ALBUM_FOR_REGISTERED:"AlbumForRegistered",BLACK_FRIDAY:"Advertisement_BlackFriday2017",BONUS_TOKENS_PROMO:"BonusTokensPromo",CHAT_COMMAND_TIP:"ChatCommand_Tip",CHRISTMAS_PROMO_2017:"ChristmasPromo2017",CHRISTMAS_PROMO_2017_POPUP:"ChristmasPromoPopup2017",EXTERNAL:"External",GIVEAWAY_MODAL_DIRECT_LINK:"Giveaway_ModalDirectLink",HEADER:"Header",LOGIN_PAGE:"LoginPage",MOBILE_DROPDOWN:"MobileDropdown",MODEL_CHAT_MESSAGE_LOGIN_REQUIRED:"ModelChatMessage_LoginRequired",MULTICAMS_LIMITATION:"MulticamsLimitation",NEW_YEAR_BANNER:"NewYearPromoBanner2017",NEW_YEAR_BANNER_GOLDS:"NewYearPromoBannerGolds2017",NEW_YEAR_POPUP:"NewYearPromoPopup2017",NEW_YEAR_POPUP_GOLDS:"NewYearPromoPopupGolds2017",NEW_YEAR_URL:"NewYearPromoURL2017",NO_ACCESS_REDIRECT:"NoAccessRedirect",SIGNUP_DIRECT_LINK_USER:"SignUp_DirectLinkUser",SIGNUP_DIRECT_LINK_MODEL:"SignUp_DirectLinkModel",SIGNUP_DIRECT_LINK_STUDIO:"SignUp_DirectLinkStudio",SIGNUP_DIRECT_LINK_INTERACTIVE:"Signup_DirectLinkInteractive",SIGNUP_MODEL_PAGE:"SignUp_PageModel",SIGNUP_STUDIO_PAGE:"SignUp_PageStudio",SIGNUP_USER_PAGE:"SignUp_PageUser",VIEW_CAM_WATCH_MODEL:"ViewCamWatchModel"},t.BUY_TOKENS_DIALOG_SOURCES={BANNED_SCREEN_BECOME_GREEN:"BannedScreen_BecomeGreenBtn",BLACK_FRIDAY:"Advertisement_BlackFriday2017",BUY_TOKENS_ROUTE:"BuyTokensRoute",NEW_YEAR_BANNER:"NewYearPromoBanner2017",NEW_YEAR_BANNER_GOLDS:"NewYearPromoBannerGolds2017",NEW_YEAR_POPUP:"NewYearPromoPopup2017",NEW_YEAR_POPUP_GOLDS:"NewYearPromoPopupGolds2017",NEW_YEAR_URL:"NewYearPromoURL2017",SUBSCRIPTION_DIRECT_LINK:"SubscriptionDirectLink"},t.TIP_SOURCES={CONSOLE:"Console",DIALOG:"Dialog"},t.TIP_TYPES={OFFLINE:"Offline",ONLINE:"Online"},t.AMPLITUDE_CHECK_DELAY=5e3,t.AMPLITUDE_EVENTS_WHITE_LIST=s.default.OrderedSet((0,o.default)(f)),t.AMPLITUDE_KEY=(0,d.getIsProdDeploy)()?"19a23394adaadec51c3aeee36622058d":"fb7ebc95d699fbf0bc2033d111f40505",t.AMPLITUDE_MODEL_FIELDS=["bodyType","country","doPrivate","doP2p","doSpy","ethnicity","favoritedCount","gender","isHd","isLive","isMobile","isNew","isVr","privateRate","p2pRate","ratingPosition","showProfileTo","spyRate","status","studioId","topBestPlace","viewersCount","whoCanChat"],t.AMPLITUDE_USER_FIELDS=["createdAt","gender","goldPoints","isEmailVerified","isGoldPermanent","isGoldSubscriber","isInvisible","isRebillEnabled","locale","showTokensTo","tokens","tokensPaid"],t.AMPLITUDE_URL_PARAMS=["ampl","creativeLanguage","creativeName","creativeSize","creativeTag","creativeType","referralHost","referralID","trafficNetwork"],t.ANAL_URL_PARAMS=["pushNotification"],t.ANALYZED_MESSAGE_SUBTYPES=[c.CONSOLE_MESSAGE_SUBTYPES.HELP,c.CONSOLE_MESSAGE_SUBTYPES.INFO,c.CONSOLE_MESSAGE_SUBTYPES.KING,c.CONSOLE_MESSAGE_SUBTYPES.LOVENSE,c.CONSOLE_MESSAGE_SUBTYPES.TIP,c.CONSOLE_MESSAGE_SUBTYPES.USERS]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return{type:de,data:{step:e}}}function i(){return function(e,t,n){var r=n.Api;return e({type:pe}),r.get("/purchase/digest/config").then(function(t){var n=t.hasPromoExpired,r=t.options,a=t.userOptions;return e({type:me,data:{hasPromoExpired:n,options:r,receivedUserOptions:a}}),null}).catch(Z.ApplicationError,function(t){e({type:fe,data:{optionsError:t}})})}}function s(e,t){return function(n,r,a){return a.Api.post("/users/"+e+"/preferredPackage",{package:t}).catch(Z.ApplicationError,function(e){ae.default.error("tokensPurchase:saveSelectedPackageError",{error:e})})}}function l(e,t,n){return function(r,a,o){return o.Api.post("/users/"+e+"/billingProcessor",{action:n,processor:t}).catch(Z.ApplicationError,function(e){ae.default.error("tokensPurchase:logChosenBillingProcessorError",{error:e})})}}function u(e){var t=e.errorDetails,n=e.hasSucceeded;return function(e,r){var a=r();if(n)e({type:ye});else{t&&ae.default.log("actions/tokens.handlePurchaseResult() errorDetails",t);var o=Me({state:a,errorDetails:t});e({type:ve,data:{error:o}})}return(0,Y.resolve)()}}function c(e){return function(t){return t({type:Ee,data:{excludeFields:e}})}}function d(e){return function(t){return t({type:Te,data:{isPromoPreselected:e}})}}function f(e){return function(t){return t({type:Ae,data:{isSubscriptionPreselected:e}})}}function p(e){return function(t){return t({type:Se,data:{preselectedMethod:{methodName:e}}})}}function m(e){return function(t){(0,B.default)(e)&&!(0,V.default)(e)||null===e||ae.default.error("Wrong criteria given for package preselection"),t({type:Pe,data:{preselectedPackageCriteria:e}})}}function g(){return function(e,t){e(d(!0)),e((0,se.startWizardWithActionOnEnter)(X.MODAL_TYPES.PURCHASE_TOKENS,{component:"SignUp",action:{backgroundImage:(0,ee.getStaticUrl)(t(),"/users/components/ui/SignUp/images/signup-christmas-gift.jpg"),shouldBypassActionPrefix:!0,type:"getDiscount"},className:"auth-modal-signup-christmas"}))}}function h(e){return function(t,n,r){return r.Api.put("/users/statistics/"+e).catch(Z.ApplicationError,function(e){ae.default.error("Statistics error",e)})}}function v(e){return function(t){t(f(!0)),t((0,se.startWizard)(X.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:e}))}}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.triggerSource;(0,$.composeActionOnEnter)("goldMembershipSubscribe",{}).then(function(a){n((0,q.showModal)(X.MODAL_TYPES.AUTH,W({action:W({},e,{type:"goldMembership",onSuccess:function(e){$.performActionOnEnter.goldMembershipSubscribe(W({currentUser:e,triggerSource:r},a.params),n)},onEnterAction:a}),component:"SignUp",className:"auth-modal-signup auth-modal-signup-gold-membership"},t)))})}}function y(e,t){return function(n){n(p(e)),n((0,se.startWizard)(X.MODAL_TYPES.PURCHASE_TOKENS,t))}}function b(e,t){return function(n,r){var a=r().auth.isLoggedIn,o=t.triggerSource;a?n(y(e,t)):(0,$.composeActionOnEnter)("showPreselectedMethod",{methodName:e,params:t}).then(function(e){n((0,q.showModal)(X.MODAL_TYPES.AUTH,{authParams:W({},t.authParams,{action:W({},t.authParams.action,{onSuccess:function(t){$.performActionOnEnter.showPreselectedMethod(W({currentUser:t},e.params),n)},onEnterAction:e}),component:"SignUp",triggerSource:o})}))})}}function _(){return function(e){e(d(!0)),e((0,se.startWizard)(X.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:z.BUY_TOKENS_DIALOG_SOURCES.BLACK_FRIDAY}))}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SignUp";return function(t,n){(0,$.composeActionOnEnter)("blackFridaySubscribe",{}).then(function(r){t((0,q.showModal)(X.MODAL_TYPES.AUTH,{action:{backgroundImage:(0,ee.getStaticUrl)(n(),"common/images/black-friday-bg.png"),shouldBypassActionPrefix:!0,type:"blackFriday",onSuccess:function(e){$.performActionOnEnter.blackFridaySubscribe(W({currentUser:e},r.params),t,n)},onEnterAction:r},component:e,triggerSource:z.AUTH_TRIGGER_SOURCES.BLACK_FRIDAY,className:"auth-modal-signup auth-modal-signup-gold-membership"}))})}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SignUp";return function(n,r){var a=r(),o=a.auth,i=o.currentUser,s=o.isLoggedIn;n({type:ge,data:{initiatedPromoName:"newYear2018"}});var l=(0,x.default)(i,"isGold"),u=e?"_"+e.toUpperCase():"",c=l&&"url"!==e?"_GOLDS":"",f=z.BUY_TOKENS_DIALOG_SOURCES["NEW_YEAR"+u+c];if(!s)return void n(P(e,t,f));n(d(!0)),n((0,se.startWizard)(X.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:f}))}}function P(e,t,n){return function(r,a){(0,$.composeActionOnEnter)("NewYearPromo2017",{}).then(function(o){r((0,q.showModal)(X.MODAL_TYPES.AUTH,{action:{backgroundImage:(0,ee.getStaticUrl)(a(),"users/components/ui/NewYearModal/new-year-bg.png"),shouldBypassActionPrefix:!0,type:"newYearPromo",onSuccess:function(){r(O(e))},onEnterAction:o},component:t,triggerSource:n,className:"auth-modal-signup auth-modal-signup-new-year"}))})}}function T(e,t){return function(n,r){(0,$.composeActionOnEnter)("ChristmasPromo",{}).then(function(a){n((0,q.showModal)(X.MODAL_TYPES.AUTH,{action:{backgroundImage:(0,ee.getStaticUrl)(r(),"/users/components/ui/SignUp/images/signup-christmas-2017.png"),shouldBypassActionPrefix:!0,type:"christmas2017",onSuccess:function(e){$.performActionOnEnter.ChristmasPromo(W({currentUser:e},a.params),n,r)},onEnterAction:a},component:e,triggerSource:t,className:"auth-modal-signup auth-modal-signup-gold-membership"}))})}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),a=r.auth.isLoggedIn;t({type:ge,data:{initiatedPromoName:"christmas2017"}});var o=e.authComponent,i=void 0===o?"SignUp":o,s=e.triggerSource,l=void 0===s?z.AUTH_TRIGGER_SOURCES.CHRISTMAS_PROMO_2017:s;a?(t(d(!0)),t((0,se.startWizard)(X.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:l}))):t(T(i,l))}}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SignUp";return function(n,r){(0,$.composeActionOnEnter)("cardVerificationBonusPackage",{triggerSource:e}).then(function(a){n((0,q.showModal)(X.MODAL_TYPES.AUTH,{action:{backgroundImage:(0,ee.getStaticUrl)(r(),"users/components/ui/SignUp/images/signup-lottery.jpg"),i18nParams:{parameters:{amount:50}},type:"cardVerificationBonus",onSuccess:function(e){$.performActionOnEnter.cardVerificationBonusPackage(W({currentUser:e},a.params),n,r)},onEnterAction:a},component:t,triggerSource:e,className:"auth-modal-signup-card-verification"}))})}}function I(e){return function(t,n){n().auth.isLoggedIn?(t(m({purchaseType:oe.PACKAGE_PURCHASE_TYPES.CARD_VERIFICATION,tokensSum:oe.CARD_VERIFICATION_BONUS})),t((0,se.startWizard)(X.MODAL_TYPES.PURCHASE_TOKENS,{component:"SignUp",triggerSource:e}))):t(C(e))}}function w(e){var t=e.chosenMethod,n=e.chosenPackage,r=e.chosenBilling;return function(e,a,i){var u=i.Api,c=a(),d=c.profile.user,f=c.tokens.triggerSource,p=r.purchase,m=r.name,g=(0,ie.getIsGoldSubscription)(n.purchaseType),v=(0,te.getModelPageUsername)(c);return e({type:_e,data:{isLoading:!0}}),e(h("click")),g||e(s(d.id,{methodName:t.name,tokensSum:n.tokensSum,billingName:r.name})),d.isRegular&&e(l(d.id,m,"view")),u.post("/purchase/digest/purchase",W({purchase:p},J.default.buildAmplitudeBackendDTO({source:f,modelName:v}))).then(function(t){var n=t.url,r=t.purchaseId;if(!n)throw new Z.ApplicationError("URL is empty");return Re(n)?(e({type:ce,data:{url:"",purchaseId:r}}),e({type:ye}),e(o(oe.WIZARD_STEPS.SUCCESS))):e({type:ce,data:{url:n,purchaseId:r}}),null}).catch(Z.NetworkError,function(t){e({type:ve,data:{error:t}})}).catch(Z.ApplicationError,function(t){var n=(0,x.default)(t,"details.isBillingProviderException")?t:null;e({type:ve,data:{error:n}})})}}function N(e){var t=e.optionType,n=e.newValue,r=e.mobileStep,a=void 0===r?oe.MOBILE_STEPS.METHOD:r;return function(e){if("billing"===t)e({type:Ce,data:{billingName:n,mobileStep:a}});else if("method"===t)e({type:Ie,data:{methodName:n,mobileStep:a}});else if("package"===t){var r=n.tokensSum,o=n.purchaseType,i=n.promoName,s=n.order;e({type:Ne,data:{currentPackageTokens:r,currentPackageType:o,currentPackagePromo:i,currentPackageOrder:s,mobileStep:a}})}}}function R(e){return function(t){return t({type:we,data:{mobileStep:e}})}}function M(e){return function(t){return t({type:ue,data:{iframeEventData:e}})}}function L(){return function(e,t){var n=t().tokens.isAdditionalPackagesShown;e({type:be,data:{isAdditionalPackagesShown:!n}})}}function k(){return function(e){return e({type:he})}}function D(e){return function(t,n){var r,o=n(),i=(r={},a(r,oe.PURCHASE_EFFECTS.BECAME_GOLD,"buyTokens.goldWelcomeMessage"),a(r,oe.PURCHASE_EFFECTS.BECAME_GREEN,"buyTokens.greenWelcomeMessage"),a(r,oe.PURCHASE_EFFECTS.REFILL,"buyTokens.yourAccountRefilledSuccessfully"),r),s=(0,ne.translate)(o,{messageId:i[e]});t((0,K.success)(s,"purchaseTokens"))}}function U(e,t){return function(n){return n({type:Oe,data:{isPurchaseModalOpen:e,triggerSource:t}})}}function j(e){var t=e.method,n=e.packageData,r=e.billing;return function(e){e(N({optionType:"method",newValue:t.name})),e(N({optionType:"package",newValue:n})),e(N({optionType:"billing",newValue:r.name}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_PACKAGE_CODE=t.UPDATE_MOBILE_STEP=t.UPDATE_METHOD_NAME=t.UPDATE_BILLING_NAME=t.TOGGLE_SUBSCRIPTION_PRESELECT=t.TOGGLE_PROMO_PRESELECT=t.SET_PACKAGE_PRESELECTION=t.TOGGLE_MODAL_OPEN=t.TOGGLE_METHOD_PRESELECT=t.TOGGLE_LOADING_STATE=t.TOGGLE_ADDITIONAL_PACKAGES_SHOWING=t.PURCHASE_SUCCESS=t.PURCHASE_RESET=t.PURCHASE_FAILED=t.PURCHASE_COMPLETE=t.PROMO_INITIATED=t.INITIATED_PROMO_CAMPAIGN_NOT_AVAILABLE=t.LOAD_OPTIONS_SUCCESS=t.LOAD_OPTIONS_START=t.LOAD_OPTIONS_ERROR=t.GO_TO_WIZARD_STEP=t.BILLING_URL_UPDATE=t.BILLING_MESSAGE_RECEIVED=void 0;var F=n(95),B=r(F),H=n(13),V=r(H),G=n(6),x=r(G),W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.goToWizardStep=o,t.loadPurchaseOptions=i,t.saveSelectedPackage=s,t.logChosenBillingProcessor=l,t.handlePurchaseResult=u,t.resetPurchase=c,t.togglePromoPreselect=d,t.toggleSubscriptionPreselect=f,t.preselectMethod=p,t.setPackagePreselection=m,t.showPurchaseTokensPromo=g,t.sendStats=h,t.showSubscriptionPackage=v,t.showSubscriptionPackageAfterAuth=E,t.showPreselectedMethod=y,t.showPreselectedMethodAfterAuth=b,t.showBlackFridayPackage=_,t.showBlackFridayPackageAfterAuth=S,t.showNewYearPackage=O,t.showChristmas2017Package=A,t.showCardVerificationBonusPackageAfterAuth=C,t.showCardVerificationBonusPackage=I,t.confirmPurchase=w,t.selectOption=N,t.updateMobileStep=R,t.handleIframeBillingMessage=M,t.toggleAdditionalPackagesShowing=L,t.completePurchase=k,t.showCompletedPurchaseMessage=D,t.togglePurchaseModalOpenState=U,t.applyOptionsCombo=j;var Y=n(20),K=n(28),q=n(9),z=n(51),X=n(5),Z=n(54),Q=n(59),J=r(Q),$=n(19),ee=n(21),te=n(68),ne=n(57),re=n(29),ae=r(re),oe=n(88),ie=n(148),se=n(60),le=n(27),ue=t.BILLING_MESSAGE_RECEIVED="tokens/BILLING_MESSAGE_RECEIVED",ce=t.BILLING_URL_UPDATE="tokens/BILLING_URL_UPDATE",de=t.GO_TO_WIZARD_STEP="tokens/GO_TO_WIZARD_STEP",fe=t.LOAD_OPTIONS_ERROR="tokens/LOAD_OPTIONS_ERROR",pe=t.LOAD_OPTIONS_START="tokens/LOAD_OPTIONS_START",me=t.LOAD_OPTIONS_SUCCESS="tokens/LOAD_OPTIONS_SUCCESS",ge=(t.INITIATED_PROMO_CAMPAIGN_NOT_AVAILABLE="tokens/INITIATED_PROMO_CAMPAIGN_NOT_AVAILABLE",t.PROMO_INITIATED="tokens/PROMO_INITIATED"),he=t.PURCHASE_COMPLETE="tokens/PURCHASE_COMPLETE",ve=t.PURCHASE_FAILED="tokens/PURCHASE_FAILED",Ee=t.PURCHASE_RESET="tokens/PURCHASE_RESET",ye=t.PURCHASE_SUCCESS="tokens/PURCHASE_SUCCESS",be=t.TOGGLE_ADDITIONAL_PACKAGES_SHOWING="tokens/TOGGLE_ADDITIONAL_PACKAGES_SHOWING",_e=t.TOGGLE_LOADING_STATE="tokens/TOGGLE_LOADING_STATE",Se=t.TOGGLE_METHOD_PRESELECT="tokens/TOGGLE_METHOD_PRESELECT",Oe=t.TOGGLE_MODAL_OPEN="tokens/TOGGLE_MODAL_OPEN",Pe=t.SET_PACKAGE_PRESELECTION="tokens/SET_PACKAGE_PRESELECTION",Te=t.TOGGLE_PROMO_PRESELECT="tokens/TOGGLE_PROMO_PRESELECT",Ae=t.TOGGLE_SUBSCRIPTION_PRESELECT="tokens/TOGGLE_SUBSCRIPTION_PRESELECT",Ce=t.UPDATE_BILLING_NAME="tokens/UPDATE_BILLING_NAME",Ie=t.UPDATE_METHOD_NAME="tokens/UPDATE_METHOD_NAME",we=t.UPDATE_MOBILE_STEP="tokens/UPDATE_MOBILE_STEP",Ne=t.UPDATE_PACKAGE_CODE="tokens/UPDATE_PACKAGE_CODE",Re=function(e){return 0===e.indexOf("javascript:window.parent.postMessage(")},Me=function(e){var t=e.state,n=e.errorDetails,r=void 0===n?{}:n,a=(0,ie.getChosenMethod)(t),o=void 0;if(r.paysafecardStatus)switch(r.paysafecardStatus){case le.PAYSAFECARD_STATUSES.CANCELED_CUSTOMER:var i=(0,ne.translate)(t,{messageId:"serverErrors.billing.paysafecard.abortedByUser"});o=new Z.ApplicationError(i)}else if(r.sepaStatus)switch(r.sepaStatus){case le.SEPA_STATUSES.OVERFLOW_PURCHASE_LIMIT:o=new Z.ApplicationError(r,{isOverflowLimit:!0})}else if("paysafecard"===a.name){var s=(0,ne.translate)(t,{messageId:"serverErrors.billing.paysafecard.cannotBeCompleted"});o=new Z.ApplicationError(s)}return o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(278),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(3),v=r(h),E=n(8),y=r(E),b=n(5),_=n(83),S=r(_),O=0,P=void 0,T=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(r.onChangeFocus=function(e){b.BROWSER_CAPABILITIES.iOS&&r.state.hasChildFocused!==e&&(r.setState({hasChildFocused:e}),r.updatePosition())},r.focusEventHandler=function(){clearTimeout(P),r.onChangeFocus(!0)},r.blurEventHandler=function(){clearTimeout(P),P=setTimeout(function(){r.onChangeFocus(!1)},300)},r.updatePosition=function(){var e=r.contentRef,t=r.modalWrapperRef;if(t&&e){r.state.hasChildFocused?(t.style.alignItems="flex-start",e.style.marginTop="10px"):(t.style.alignItems="center",e.style.marginTop="")}},r.orientationEventHandler=function(){r.modalWrapperRef&&(setTimeout(function(){var e=r.state.hasChildFocused;r.onChangeFocus(e)},10),r.changeScrollHandler())},r.bodyClickHandler=function(e){e.stopPropagation()},r.closeButtonClickHandler=function(e){e.preventDefault(),r.closeHandler(e)},r.changeScrollHandler=function(){var e=r.modalWrapperRef,t=e.scrollTop,n=e.scrollHeight,a=t+e.offsetHeight;0===t?e.scrollTop=1:a===n&&(e.scrollTop=t-1)},r.wrapperClickHandler=function(e){e.preventDefault();var t=r.modalFooterRef&&r.modalFooterRef.contains(e.target);r.state.isWrapperCloseDisabled||t||r.closeHandler(e)},r.keyDownHandler=function(e){e.keyCode!==b.KEY_CODES.escape||r.props.isWrapperCloseDisabled||r.closeHandler(e)},r.closeHandler=function(e){r.props.onClose(e)},r.touchScrollHandler=function(e){e.stopPropagation()},r.toggleFullscreenHandler=function(e){var t=(0,l.default)(e)?!r.state.isFullscreen:e;r.setState({isFullscreen:t})},r.onAutoFocus=function(){setTimeout(function(){r.onChangeFocus(!0)},50)},r.renderModalHeader=function(){var e=r.props.closePosition,t=r.state.isCloseBtnShown,n="top"===e;return g.default.createElement("div",{className:r.c("modal-header",{"top-placed":n})},g.default.createElement("span",null,r.renderTitle()),r.renderIf(t,function(){return g.default.createElement("a",{className:"button-close",onClick:r.closeButtonClickHandler,role:"button"},g.default.createElement(y.default,{img:n?"close-5":"close"}))}))},r.renderModalContent=function(){return g.default.createElement("div",{ref:function(e){r.modalWrapperRef=e},className:r.c("modal-wrapper",r.modalWrapperClassName),onClick:r.wrapperClickHandler},g.default.createElement("div",{className:r.c("modal-content","modal-header-"+r.state.titlePosition,{fullscreen:r.state.isFullscreen}),onClick:r.bodyClickHandler,ref:function(e){r.contentRef=e},style:r.styles.dialog},r.renderIf("none"!==r.state.titlePosition,r.renderModalHeader),r.renderContent()),r.renderFooter())},r.constructor===t)throw new TypeError("Cannot construct Abstract instances directly");return r}return i(t,e),c(t,[{key:"getDefaultState",value:function(){return u({},this.getNextState(this.props,this.context),{isCloseBtnShown:this.props.isCloseBtnShown,isFullscreen:this.props.isDefaultFullscreen})}},{key:"getNextState",value:function(e,n){return u({},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n),{isWrapperCloseDisabled:e.isWrapperCloseDisabled,titlePosition:e.titlePosition})}},{key:"componentDidMount",value:function(){var e=this.modalWrapperRef,n=this.contentRef;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.addBodyStyle(),this.registerEventListener(document,"keydown",this.keyDownHandler),this.registerEventListener(e,"scroll",this.changeScrollHandler),this.registerEventListener(window,"orientationchange",this.orientationEventHandler),b.BROWSER_CAPABILITIES.iOS&&(this.registerEventListener(n,"blur",this.blurEventHandler,!0),this.registerEventListener(n,"focus",this.focusEventHandler,!0))}},{key:"componentWillUnmount",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.removeBodyStyle(),clearTimeout(P)}},{key:"addBodyStyle",value:function(){var e=this,t=document,n=t.body,r=window.innerWidth-n.scrollWidth,a=document.querySelector("html");this.modalWrapperRef.style.top="1px",window.requestAnimationFrame(function(){O=S.default.get(),n.scrollTop=0,n.style.paddingRight=r+"px",n.style.marginTop="-"+O+"px",a.classList.add("disable-scroll"),e.modalWrapperRef&&(e.modalWrapperRef.style.top="0")})}},{key:"removeBodyStyle",value:function(){var e=document,t=e.body,n=document.querySelector("html");t.style.scrollBehavior="auto",t.style.paddingRight=0,t.style.marginTop="",n.classList.remove("disable-scroll"),S.default.set(O),window.requestAnimationFrame(function(){t.style.scrollBehavior=""})}},{key:"renderTitle",value:function(){return this.props.title?g.default.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.title}}):null}},{key:"renderContent",value:function(){return this.props.children}},{key:"renderFooterContent",value:function(){return null}},{key:"renderFooter",value:function(){var e=this,t=this.renderFooterContent();return t?g.default.createElement("div",{className:"modal-footer",ref:function(t){e.modalFooterRef=t}},t):null}},{key:"render",value:function(){return this.renderModalContent()}},{key:"styles",get:function(){return{wrapper:{},dialog:{},closeButton:{}}}},{key:"modalWrapperClassName",get:function(){return this.props.className}}]),t}(v.default);T.propTypes={className:p.default.string,isDefaultFullscreen:p.default.bool,isWrapperCloseDisabled:p.default.bool,onClose:p.default.func.isRequired,onDomReady:p.default.func,showOverlay:p.default.bool,title:p.default.node,titlePosition:p.default.oneOf(["inside","none","outside"]),isCloseBtnShown:p.default.bool},T.defaultProps={isDefaultFullscreen:!1,isWrapperCloseDisabled:!1,showOverlay:!0,title:null,titlePosition:"inside",isCloseBtnShown:!0},t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(817);Object.defineProperty(t,"ApiError",{enumerable:!0,get:function(){return r(a).default}});var o=n(185);Object.defineProperty(t,"ApplicationError",{enumerable:!0,get:function(){return r(o).default}});var i=n(820);Object.defineProperty(t,"NetworkError",{enumerable:!0,get:function(){return r(i).default}});var s=n(821);Object.defineProperty(t,"ServerError",{enumerable:!0,get:function(){return r(s).default}});var l=n(822);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return r(l).default}})},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(465),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"storage",get:function(){return"undefined"!=typeof window?window.localStorage:null}}]),t}(l.default),c=new u;t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasTranslation=t.getTranslateFunction=t.translate=t.getMessages=t.getLocale=void 0;var a=n(350),o=r(a),i=n(30),s=r(i),l=n(84),u=r(l),c=n(6),d=r(c),f=n(32),p=n(221),m=function(e){return e.i18n.data.translations},g=t.getLocale=function(e){return e.config.data.i18n.current},h=t.getMessages=(0,f.createSelector)([m,g],function(e,t){return(0,d.default)(e,[t,"messages"])});t.translate=function(e,t){var n=t.messageId,r=t.params,a=t.choiceParameter,o=h(e),i=g(e);return(0,p.trans)(o,n,r,a,i)},t.getTranslateFunction=(0,f.createSelector)([h,g],function(e,t){return(0,o.default)((0,s.default)(p.trans,e),t)}),t.hasTranslation=function(e,t){var n=h(e);return(0,u.default)(n,t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(35),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),u=r(l),c=n(0),d=r(c),f=n(67),p=n(605),m=r(p),g=n(39),h=r(g),v=function(e){var t=e.className,n=e.isMobileRelative,r=e.isOneLine,o=e.placement,i=e.targetId,l=e.tooltipRefExtractor,u=a(e,["className","isMobileRelative","isOneLine","placement","targetId","tooltipRefExtractor"]);return d.default.createElement(h.default,s({isMobileRelative:n,isOneLine:r,placement:o,targetId:i},{className:(0,f.classNames)([t,"error"]),isForceVisible:!0,ref:function(e){l(i,e&&e.getWrappedInstance())},"data-component-name":"ErrorTooltip"}),d.default.createElement(m.default,u))};v.propTypes={className:u.default.string,defaultMessage:u.default.string,error:u.default.object.isRequired,tooltipRefExtractor:u.default.func,fieldName:u.default.string,placement:u.default.oneOf(["top","right","bottom","left"])},v.defaultProps={defaultMessage:null,tooltipRefExtractor:i.default,fieldName:null,placement:"right"},t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Analytics=void 0;var o=n(76),i=r(o),s=n(33),l=r(s),u=n(278),c=r(u),d=n(105),f=r(d),p=n(14),m=r(p),g=n(80),h=r(g),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(79),b=n(114),_=r(b),S=n(51),O=n(129),P=n(29),T=r(P),A=n(44),C=function(){},I=t.Analytics=function(){function e(){var t=this;if(a(this,e),this.isAmplitudeInitialized=!1,this.isAmplitudeBlocked=!1,this.setupDataFromLocation=function(){var e=window.location.href,n=window.document.referrer||e,r=(0,l.default)((0,O.getParams)((0,O.buildLocationFromUrl)(e),!0),S.AMPLITUDE_URL_PARAMS),a=(0,O.getDomainsFromUrl)({url:n,levels:2});(0,b.getIsAmplitudeAvailable)()&&window.amplitude.getInstance().setUserProperties(v({},r,{referralID:r.referralID||a[2],referralHost:r.referralHost||a[2]+"."+a[1],siteHost:t.hostRoot.replace(/(.+)\..+/,"$1").toLowerCase()}))},this.action=function(e){var n=e.category,r=e.action,a=e.label,o=e.value,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useGa:!0,useAnal:!0,useAmplitude:!0};if(!r)return void T.default.warn('Param "action" is required for Analytics.action()');if(n||T.default.warn('Param "category" is required for Analytics.action() if you wanna send to GA or ANAL'),(0,b.getIsGaAvailable)()&&n&&i.useGa&&ga("send","event",n,r,a,o),(0,b.getIsAnalAvailable)()&&n&&i.useAnal){var s=(0,h.default)([n,r,a,o]).join("_");anal.send(s)}if((0,b.getIsAmplitudeAvailable)()&&S.AMPLITUDE_EVENTS_WHITE_LIST.has(r)&&i.useAmplitude){if((0,m.default)(S.AMPLITUDE_EVENTS_DEPEND_COUNTRY,r)&&!(0,m.default)(t.amplitudeTrackingCountryCodes,t.userCountry))return;T.default.log('Amplitude reports action "'+r+'"',o),amplitude.getInstance().logEvent(r,o)}},this.signUp=function(e){t.setValue("userId",e)},this.login=function(e){var n=e.id,r=e.isModel;t.setValue("userId",n),(0,b.getIsAmplitudeAvailable)()&&(amplitude.getInstance().setUserId(n),t.refreshUserProps(e)),setTimeout(function(){r&&(0,b.getIsAmplitudeBlocked)()&&(0,b.getIsAnalAvailable)()&&anal.send("ModelUsesBlocker",{id:n})},S.AMPLITUDE_CHECK_DELAY)},this.logout=function(){t.unsetValue("userId")},this.confirmEmail=function(e){t.setValue("userId",e)},this.sendConsoleMessage=function(e){t.action({category:"Console",action:e})},this.sendConsoleSubTypeMessage=function(e,n){t.action({category:"Console",action:e,label:n})},this.refreshUserProps=function(e){(0,b.getIsAmplitudeAvailable)()&&amplitude.getInstance().setUserProperties((0,A.pickUserFieldsForAmplitude)(e))},this.addUserProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,b.getIsAmplitudeAvailable)()&&amplitude.getInstance().setUserProperties(e)},this.onViewCamSwitch=function(e){t.action({category:"ViewCam",action:"Switch",label:e})},window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,(0,b.getIsGaAvailable)()&&window.ga("create",_.default.TRACKING_ID,"auto"),(0,b.getIsAmplitudeAvailable)()){var n=window.amplitude.getInstance();n.init(S.AMPLITUDE_KEY,null,{includeUtm:!0},function(){t.isAmplitudeInitialized=!0,C()}),n.setVersionName(_.default.RELEASE_VERSION)}}return E(e,[{key:"setOnInit",value:function(e){var t=this,n=function(){return(0,y.updateUserAmplitudeParams)(v({affiliateId:e},t.buildAmplitudeBackendDTO()))};this.isAmplitudeInitialized?n():C=n}},{key:"bindConfigData",value:function(e,t){var n=e.hostRoot,r=e.amplitudeTrackingCountryCodes;this.hostRoot=n,this.userCountry=t.country,this.amplitudeTrackingCountryCodes=r}},{key:"pageView",value:function(e){var t=(0,i.default)(e);(0,b.getIsGaAvailable)()&&ga("send","pageview",t)}},{key:"modalView",value:function(e){if(!e)return void T.default.warn("modalName is required in Analytics.modalView()");this.pageView(e)}},{key:"setValue",value:function(e,t){if(!e||(0,f.default)(e)&&!t)return void T.default.warn("fieldName and fieldValue are required");(0,b.getIsGaAvailable)()&&((0,f.default)(e)?ga("set",e,t):ga("set",e)),(0,b.getIsAnalAvailable)()&&(0,f.default)(e)&&anal.set(e,t)}},{key:"unsetValue",value:function(e){if((0,c.default)(e))return void T.default.warn("fieldName is required");(0,b.getIsGaAvailable)()&&ga("set",e,null),(0,b.getIsAnalAvailable)()&&anal.unset(e)}},{key:"initIfNeeded",value:function(e){window.ANAL_DELAY_INIT&&((0,b.getIsAnalAvailable)()?setTimeout(function(){return anal.init(e)},0):(window.ANAL_DELAY_INIT=!1,window.ANAL_INIT_DATA=v({},e)))}},{key:"getAmplitudeInnerProps",value:function(){return this.isAmplitudeInitialized?{deviceId:amplitude.getInstance().options.deviceId,sessionId:amplitude.getSessionId()}:null}},{key:"buildAmplitudeBackendDTO",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getAmplitudeInnerProps();return t?{ampl:{ep:e,device_id:t.deviceId,session_id:t.sessionId}}:{}}},{key:"indexShow",value:function(e){(0,b.getIsAnalAvailable)()&&anal.send("indexShow",e)}},{key:"clickOnThumb",value:function(e){(0,b.getIsAnalAvailable)()&&anal.send("clickOnThumb",e)}},{key:"pushNotification",value:function(e){(0,b.getIsAnalAvailable)()&&anal.send("PushNotificationClicked",e)}}]),e}(),w=new I;t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(){O=null}}function o(){return function(e,t){if(!O)return void e((0,E.hideModal)());var n=t(),r=n.auth,o=n.profile,i=n.tokens.isSubscriptionPreselected,s=r.isLoggedIn,l=r.currentUser;if(!N(n))return e(a()),void e((0,E.hideModal)());var u=(0,g.default)(o.user,"tokens",0),c=s&&(l.isAdmin||l.isSupport),d=(0,p.default)(A,P.triggerSource)&&!s&&!n.config.whiteLabelId,f=null,m={};if(d)f=b.MODAL_TYPES.PURCHASE_TOKENS,m=h({},P,m);else if(s)if(O===b.MODAL_TYPES.SEND_TIP||O===b.MODAL_TYPES.SEND_OFFLINE_TIP)f=u>0||c?O:b.MODAL_TYPES.PURCHASE_TOKENS,m=P;else if(O===b.MODAL_TYPES.CONFIRM_EMAIL)f=O;else if(O===b.MODAL_TYPES.START_PRIVATE)f=O;else{if(O!==b.MODAL_TYPES.PURCHASE_TOKENS)return void e(a());var v=P,y=v.subType,_="GoldMembership"===y,C="BuyAlbum"===y;if((_||i)&&l.isGold&&"NewYearPromoBanner2017"!==P.triggerSource)return void e(a());if(C){var I=P,w=I.user,R=I.albumId,M=I.albumCost,L=n.userAlbums.isLoaded;if(!L)return;var k=(0,S.getUserAlbumById)(n,{albumId:R,userId:w.id});if((0,S.getIsAlbumAccessGranted)(k))return void e(a());if(u>=M)return void e(a())}f=b.MODAL_TYPES.PURCHASE_TOKENS}else f=b.MODAL_TYPES.AUTH,m=h({},P,m);O===f&&(e(a()),m=h({},P,m,{currentUserTokens:u})),e((0,E.showModal)(f,m,T))}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return function(r){if(!(0,p.default)(C,e))throw new Error("Unavailable wizard type given: "+e);O=e,P=h({},t),T=n,r(o())}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return function(r){if(!(0,p.default)(C,e))throw new Error("Unavailable wizard type given: "+e);var a=t.user,o=h({},t);a&&(o.user={id:a.id,login:a.login},o.action=h({},o.action,{user:{username:a.username,isDeleted:a.isDeleted,avatarUrl:a.avatarUrl,topBestPlace:a.topBestPlace}})),(0,_.composeActionOnEnter)("showModal",{modalType:e,modalParams:o}).then(function(t){r(i(e,h({},o,{action:h({},o.action,{onSuccess:function(){_.performActionOnEnter.showModal(h({},t.params,{actions:{startWizard:function(){return(0,d.default)(r,i)}}}))},onEnterAction:t})}),n))})}}function l(){return function(e){e((0,E.hideModal)()),e(a())}}function u(){return function(e){e((0,E.hideModal)()),e(o())}}Object.defineProperty(t,"__esModule",{value:!0}),t.startWizard=void 0;var c=n(30),d=r(c),f=n(14),p=r(f),m=n(6),g=r(m),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.endWizard=a,t.process=o,t.startWizardWithActionOnEnter=s,t.closeModal=l,t.processModal=u;var v=n(45),E=n(9),y=n(51),b=n(5),_=n(19),S=n(165),O=null,P={},T=!1,A=[b.APP_BUTTONS.ADVERTISEMENT_PAYMENT_METHOD_PRZELEWY,b.APP_BUTTONS.VIDEO_GET_ACCESS,b.APP_BUTTONS.VIEWCAM_BUY_TOKENS,b.APP_BUTTONS.VIEWCAM_SEND_OFFLINE_TIP,b.APP_BUTTONS.VIEWCAM_SEND_ONLINE_TIP,b.APP_BUTTONS.VIEWCAM_START_PRIVATE,b.APP_BUTTONS.VIEWCAM_START_SPY,y.AUTH_TRIGGER_SOURCES.CHAT_COMMAND_TIP],C=[b.MODAL_TYPES.AUTH,b.MODAL_TYPES.CONFIRM_EMAIL,b.MODAL_TYPES.START_PRIVATE,b.MODAL_TYPES.PURCHASE_TOKENS,b.MODAL_TYPES.SEND_TIP,b.MODAL_TYPES.SEND_OFFLINE_TIP,b.MODAL_TYPES.TECHNICAL_PROBLEM],I=[b.MODAL_TYPES.CONFIRM_EMAIL],w=[b.MODAL_TYPES.CONFIRM_EMAIL],N=function(e){var t=e.auth,n=t.isLoggedIn,r=t.currentUser;if(!n)return!0;if(r.isModel)return(0,p.default)(I,O);if(r.isStudio){var a=(0,v.getIsMyStudioModel)(e)?[].concat(w,[b.MODAL_TYPES.START_PRIVATE]):w;return(0,p.default)(a,O)}return!0};t.startWizard=i},,function(e,t,n){"use strict";function r(e){for(var t=0,n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t);return t}function a(e){var t=(3355443&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t}function o(e){return a(r(e))}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return Math.min(n,Math.max(t,e))}function s(e,t){for(var n=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],r=0;r<n.length;r+=1)if(e>=n[r].value){var a=(e/n[r].value).toFixed(t);return a.replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[r].symbol}return e.toString()}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,t);return(Math.floor(e*n)/n).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return Math.floor(Math.random()*(e+1))}function d(e){return 100*Math.random()<e}Object.defineProperty(t,"__esModule",{value:!0}),t.hashCode=r,t.intToRgb=a,t.strToRgb=o,t.limit=i,t.formatNumber=s,t.roundFloat=l,t.moneyFormat=u,t.random=c,t.isSucceededWithProbability=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(465),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"storage",get:function(){return"undefined"!=typeof window?window.sessionStorage:null}}]),t}(l.default),c=new u;t.default=c},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MESSAGE_TYPES={APP:"lovense",KNIGHT_ADDED:"knightAdded",NEW_KING:"newKing",GOAL_UPDATED:"goal",PRIVATE_TIP:"privateTip",SYSTEM:"system",CONSOLE:"console",TIP:"tip",USER_BANNED:"userBanned",USER_UNBANNED:"userUnbanned"},t.SYSTEM_MESSAGE_SUBTYPES={CANNOT_SEND:"CANNOT_SEND",CONSOLE_ANNOUNCEMENT:"CONSOLE_ANNOUNCEMENT",EMAIL_VERIFY_REQUIRED:"EMAIL_VERIFY_REQUIRED",NOT_ENOUGH_TOKENS:"NOT_ENOUGH_TOKENS",GOLD_REQUIRED:"GOLD_REQUIRED",INVISIBLE_MODE:"INVISIBLE_MODE",LOGIN_REQUIRED:"LOGIN_REQUIRED",ONLY_GOLD_OR_GREEN:"ONLY_GOLD_OR_GREEN",PRIVATE_MODE_STARTED:"PRIVATE_MODE_STARTED",PRIVATE_MODE_ENDED:"PRIVATE_MODE_ENDED",TOKENS_GIVEAWAY_SIGNUP:"TOKENS_GIVEAWAY_SIGNUP",YOU_ARE_BANNED:"YOU_ARE_BANNED"},t.CONSOLE_MESSAGE_SUBTYPES={COMMAND:"COMMAND",HELP:"HELP",INFO:"INFO",KING:"KING",LOVENSE:"LOVENSE",TIP:"TIP",USERS:"USERS"},t.LOVENSE_MESSAGE_SUBTYPES={SETTINGS:"settings",TIP:"tip",TOY:"toy"},t.LOVENSE_TOY_STATUS={ON:"on",OFF:"off"}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.scrollIntoView=t.getIsDocumentVisible=t.scrollTo=t.addBodyCssClass=t.removeBodyLoader=t.renderIf=t.classNames=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(5);t.classNames=function(){var e=function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=[];for(var s in n)if(n.hasOwnProperty(s)&&n[s]){var l=n[s];if(Array.isArray(l))i=i.concat(e.apply(void 0,r(l)));else if("object"===(void 0===l?"undefined":a(l))&&l.constructor===Object)for(var u in l)l.hasOwnProperty(u)&&l[u]&&(i=i.concat(e(u)));else"string"==typeof l&&(i=i.concat(l.split(/\s+/)))}return i.filter(function(e,t){return""!==e&&i.indexOf(e)===t})},t=e.apply(void 0,arguments);return t.length?t.sort().join(" "):null},t.renderIf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e?t:n;return"function"==typeof r?r():r},t.removeBodyLoader=function(){var e=document.getElementById("body_loader");e&&e.parentNode.removeChild(e)},t.addBodyCssClass=function(){["safari","retina","ucbrowser","touch","firefox","edge","ie"].forEach(function(e){"undefined"!=typeof document&&o.BROWSER_CAPABILITIES[e]&&document.body.classList.add(e)})},t.scrollTo=function(e){var t=e.scrollableContainer,n=e.target,r=e.axis,a=void 0===r?"y":r,o=e.leftOffset,i=void 0===o?0:o,s=e.rightOffset,l=void 0===s?0:s;if(t&&n&&"x"===a){var u=t.getBoundingClientRect(),c=n.getBoundingClientRect(),d=t.scrollLeft,f=c.left-u.left;if(f<i)return void(t.scrollLeft=d-(i-f));var p=t.offsetWidth-i,m=f+n.offsetWidth;m>p&&(t.scrollLeft=d+(m-p)+l)}},t.getIsDocumentVisible=function(){return"undefined"==typeof document||!document.hidden},t.scrollIntoView=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.behavior,r=void 0===n?"smooth":n,a=t.block,o=void 0===a?"center":a,i=t.inline,s=void 0===i?"nearest":i;if(e&&e.scrollIntoView)try{e.scrollIntoView({behavior:r,block:o,inline:s})}catch(t){e.scrollIntoView()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getLangLinks=t.getCanonicalUrl=t.getModelPageUsername=t.getIsViewCamPage=t.getViewCamPageBranch=t.getIsPageAllowedToStartBroadcast=t.getGloballyActiveBranch=t.getIsOnBroadcastingPage=t.getIsOnSafePage=t.getIsOnMobilePage=t.getIsOnLoginRoute=t.getIsOnUnnavigableSignupRoute=t.getIsOnSignupRoute=t.findMatchedBranchSelectorFactory=t.getIsBuyTokensRouteActionsAllowed=t.getIsBuyTokensRoute=t.getCurrentLang=void 0;var o=n(14),i=r(o),s=n(6),l=r(s),u=n(48),c=r(u),d=n(11),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=n(32),g=n(323),h=function(e){return e.config.data.i18n.languages},v=function(e){return e.appSettings.data.availableRoutes},E=function(e){return e.config.data.hostRoot},y=function(e){var t=e.auth;return t.isLoggedIn&&t.currentUser.isModel},b=function(e){var t=e.auth;return t.isLoggedIn&&(t.currentUser.isModel||t.currentUser.isStudio)},_=function(e,t){return t.route.routes},S=function(e){return e.routing.location},O=function(e){return e.routing.location.pathname},P=t.getCurrentLang=function(e){return e.config.data.i18n.current},T=function(e){var t=e.auth,n=t.isLoggedIn,r=t.currentUser,a=e.routing.location;return n&&a.pathname==="/"+r.username},A=function(e){var t=e.languagesDict,n=e.hostRoot,r=e.pathname,a=e.language,o=(0,c.default)(t,{locale:a})||{};return"https://"+(o.subDomain?o.subDomain+".":"")+n+r},C=t.getIsBuyTokensRoute=function(e){var t=e.location;return Boolean(t)&&/^\/buy-tokens$/.test(t.pathname)},I=(t.getIsBuyTokensRouteActionsAllowed=(0,m.createSelector)([S,b],function(e,t){return C({location:e})&&!t}),t.findMatchedBranchSelectorFactory=function(e){var t=e.routes,n=e.isExact,r=e.toBool;return(0,m.createSelector)([S],function(e){var a=(0,g.matchRoutes)(t,(0,l.default)(e,"pathname")),o=(0,c.default)(a,function(e){var t=e.match;return n?t.isExact:t});return r?Boolean(o):o})}),w=(t.getIsOnSignupRoute=I({routes:[{path:"/signup/:type(user|model|studio)"},{path:"/signup"},{path:"/industry"}],toBool:!0}),t.getIsOnUnnavigableSignupRoute=I({routes:[{path:"/signup/user"},{path:"/industry"}],toBool:!0}),t.getIsOnLoginRoute=I({routes:[{path:"/login"}],toBool:!0}),t.getIsOnMobilePage=I({routes:[{path:"/mobile"},{path:"/mobile_auth/:qrCode"}],toBool:!0}),t.getIsOnSafePage=I({routes:[{path:"/terms"},{path:"/privacy"},{path:"/signup"},{path:"/signup/user"},{path:"/signup/model"},{path:"/signup/studio"},{path:"/login"}],toBool:!0}),t.getIsOnBroadcastingPage=I({routes:[{path:"/cams/:username"},{path:"/start-broadcasting"}],toBool:!0})),N=(t.getGloballyActiveBranch=(0,m.createSelector)([S,_],function(e,t){var n=(0,g.matchRoutes)(t,e.pathname);return(0,c.default)(n,function(e){return e.match.isExact})}),t.getIsPageAllowedToStartBroadcast=(0,m.createSelector)([y,w,T],function(e,t,n){return e&&!t&&!n}),I({routes:[{path:"/model/:username"},{path:"/cam/:username"},{path:"/:username"}],isExact:!0})),R=t.getViewCamPageBranch=I({routes:[{path:"/cam/:username"},{path:"/:username"}],isExact:!0});t.getIsViewCamPage=function(e){return e.viewCam.model&&R(e)},t.getModelPageUsername=(0,m.createSelector)([N,v],function(e,t){if(!e)return"";var n=e.match.params.username;return(0,i.default)(t,"/"+n)?"":n}),t.getCanonicalUrl=(0,m.createSelector)([O,h,P,E],function(e,t,n,r){return A({languagesDict:t,hostRoot:r,pathname:e,language:n})}),t.getLangLinks=(0,m.createSelector)([O,E,h,P],function(e,t,n,r){var o={languagesDict:n,hostRoot:t,pathname:e,language:r};return[{href:A(o),hreflang:"x-default"}].concat(a((0,f.default)(n,function(e){return{href:A(p({},o,{language:e.locale})),hreflang:e.locale}})))})},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getFullscreenChangeEventName=t.getIsCam2camEnabled=t.getIsPrivateEnabled=t.getFavoritesCount=t.getIsInCam2Cam=t.getIsInSpyMode=t.getPrivateMode=t.getGoalData=t.getBroadcastSettings=void 0;var a=n(14),o=r(a),i=n(6),s=r(i),l=n(5),u=n(68),c=n(12),d=n(97),f=n(72);t.getBroadcastSettings=function(e){var t=c.MODEL_STATUSES.STATUS_IDLE,n=c.MODEL_STATUSES.STATUS_OFF,r=e.viewCam.model;return(0,u.getIsViewCamPage)(e)&&!(0,o.default)([t,n],r.status)?{broadcastMethod:(0,f.getBroadcastType)(e),playerType:(0,f.getPlayerType)(e)}:{}},t.getGoalData=function(e,t){var n=e.auth,r=e.broadcast,a=e.viewCam,o=n.currentUser;return n.isLoggedIn&&o.id===t?r.goalData:a.goalData},t.getPrivateMode=function(e){var t=e.viewCam,n=e.broadcast,r=n.isBroadcastingPageOpen;return(0,s.default)(r?n:t,"show.mode","")},t.getIsInSpyMode=function(e){var t=e.auth,n=t.isLoggedIn,r=t.currentUser,a=e.viewCam,o=a.isOwnShow,i=a.show,l=(0,s.default)(i,"mode","");return!(!n||r&&r.isModel)&&((l===c.PRIVATE_MODES.MODE_PRIVATE||l===c.PRIVATE_MODES.MODE_VIRTUAL_PRIVATE)&&!o)},t.getIsInCam2Cam=function(e){var t=e.auth,n=t.isLoggedIn,r=t.currentUser,a=e.viewCam.show,o=(0,s.default)(a,"mode","");return n&&(r.isGold||r.isGreen)&&o===c.PRIVATE_MODES.MODE_P2P},t.getFavoritesCount=function(e){var t=e.viewCam,n=t.isReady,r=t.model,a=t.favoritedCount,i=void 0===a?0:a,s=(0,d.getGuestFavoriteIds)(e);return n&&r&&(0,o.default)(s,r.id)?i+1:i},t.getIsPrivateEnabled=function(e){var t=e.viewCam.model;return t&&t.doPrivate},t.getIsCam2camEnabled=function(e){var t=e.viewCam.model,n=(0,f.getPlayerType)(e),r=(0,f.getBroadcastType)(e);return!(!t||t.isMobile||!t.doP2p)&&(r===c.BROADCAST_PLAYER_TYPES.FLASH&&n===c.VIEWCAM_PLAYER_TYPES.FLASH||r===c.BROADCAST_PLAYER_TYPES.WEBRTC&&n===c.VIEWCAM_PLAYER_TYPES.WEBRTC&&l.BROWSER_CAPABILITIES.desktop)},t.getFullscreenChangeEventName=function(){return document.fullscreenEnabled?"fullscreenchange":document.webkitFullscreenEnabled?"webkitfullscreenchange":document.mozFullScreenEnabled?"mozfullscreenchange":document.msFullscreenEnabled?"msfullscreenchange":"fullscreenchange"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getStreamUrl=t.getSnapshotUrl=t.getPlayerType=t.getDefaultPlayerType=t.getBroadcastType=t.getWebRtcStreamConfig=t.getFlashStreamConfig=t.broadcastSettingsHasChanged=t.viewCamAspectRatioChanged=t.viewCamSettingsChanged=t.camHasBeenSwitchedOff=t.camStatusHasChanged=t.camHasChanged=void 0;var a=n(85),o=r(a),i=n(14),s=r(i),l=n(6),u=r(l),c=n(49),d=r(c),f=n(907),p=r(f),m=n(140),g=r(m),h=n(5),v=n(538),E=n(141),y=n(12),b=n(71),_=(t.camHasChanged=function(e,t){var n=(0,u.default)(t,"model.id");if(!n)return!1;var r=(0,u.default)(e,"model.id")!==n,a=(0,u.default)(e,"streamName")!==(0,u.default)(t,"streamName")||(0,u.default)(e,"userStreamName")!==(0,u.default)(t,"userStreamName"),o=(0,u.default)(e,"model.broadcastServer")!==(0,u.default)(t,"model.broadcastServer"),i=(0,u.default)(e,"streamConfig.playbackUrl")!==(0,u.default)(t,"streamConfig.playbackUrl"),s=e.privateMode!==t.privateMode,l=(0,u.default)(e,"model.status")!==(0,u.default)(t,"model.status");return r||a||o||s||l||i},t.camStatusHasChanged=function(e,t){return e.isCamActive!==t.isCamActive},t.camHasBeenSwitchedOff=function(e,t){var n=!0===e.isCamActive&&!1===t.isCamActive;return t.isBroadcastingPageOpen&&n},t.viewCamSettingsChanged=function(e,t){return!t.isBroadcastingPageOpen&&!(0,d.default)((0,u.default)(e,"viewCamSettings"),(0,u.default)(t,"viewCamSettings"))},t.viewCamAspectRatioChanged=function(e,t){return(0,u.default)(e,"viewCamSettings",{}).width!==(0,u.default)(t,"viewCamSettings",{}).width},t.broadcastSettingsHasChanged=function(e,t){return!(0,d.default)(e.broadcastSettings,t.broadcastSettings)},t.getFlashStreamConfig=function(e){var t=e.appSettings.data.viewServers,n=e.auth.isLoggedIn,r=e.broadcast,a=e.profile,o=e.viewCam,i=(0,b.getPrivateMode)(e),s=r.isBroadcastingPageOpen?r.counterpart:o.counterpart,l=r.isBroadcastingPageOpen?r.model:o.model,u=_(e),c=i===y.PRIVATE_MODES.MODE_P2P,d=n?a.user:null;if(!l)return{};var f=c&&!d.isModel?d.broadcastServer:l.broadcastServer,p=c&&d.isModel?"live":l.broadcastServer,m=c&&d.isModel?"s-"+s.broadcastServer:"b-"+t.wowza,g=u===y.BROADCAST_PLAYER_TYPES.WEBRTC?"rtmp://b-"+t.flashphoner+"."+h.BASE_DOMAIN_CDN+":1935":"rtmp://"+m+"."+h.BASE_DOMAIN_CDN+":1935/"+p;return{publishUrl:"rtmp://s-"+f+"."+h.BASE_DOMAIN_CDN+":1935/live",playbackUrl:g}},t.getWebRtcStreamConfig=function(e){var t=e.appSettings.data.viewServers,n=e.auth.isLoggedIn,r=e.broadcast,a=e.profile,o=e.viewCam,i=(0,b.getPrivateMode)(e),s=r.isBroadcastingPageOpen?r.model:o.model,l=r.isBroadcastingPageOpen?r.userStreamName:o.userStreamName,u=r.isBroadcastingPageOpen?r.streamName:o.streamName,c=n?a.user:{},d=i===y.PRIVATE_MODES.MODE_P2P,f=d&&c.isModel?{streamName:""+l,server:t.flashphoner}:{streamName:""+u,server:t.flashphoner};return{broadcastConfig:r.isBroadcastingPageOpen?{server:s.broadcastServer,streamName:""+u}:{server:c.broadcastServer,streamName:""+l},playConfig:f}},t.getBroadcastType=function(e){var t=e.appSettings.data.broadcastServers,n=e.broadcast,r=n.isBroadcastingPageOpen,a=n.model,o=e.viewCam,i=r?(0,u.default)(a,"broadcastServer"):(0,u.default)(o,"model.broadcastServer");return(0,p.default)(t,function(e){return(0,s.default)(e,i)})===v.BROADCAST_SERVER_TYPES.FLASHPHONER?y.BROADCAST_PLAYER_TYPES.WEBRTC:y.BROADCAST_PLAYER_TYPES.FLASH}),S=t.getDefaultPlayerType=function(e){var t=_(e);return t===y.BROADCAST_PLAYER_TYPES.WEBRTC&&h.BROWSER_CAPABILITIES.isWebRTCPlayer&&(0,E.getIsH264Supported)()?y.VIEWCAM_PLAYER_TYPES.WEBRTC:h.BROWSER_CAPABILITIES.isFlashPlayer?y.VIEWCAM_PLAYER_TYPES.FLASH:h.BROWSER_CAPABILITIES.isHTML5Player?y.VIEWCAM_PLAYER_TYPES.HTML5:h.BROWSER_CAPABILITIES.isDashPlayer&&t===y.BROADCAST_PLAYER_TYPES.FLASH?y.VIEWCAM_PLAYER_TYPES.DASH:y.VIEWCAM_PLAYER_TYPES.SNAPSHOT},O=t.getPlayerType=function(e){var t=e.viewCam.forcePlayerType;return(0,s.default)((0,o.default)(y.VIEWCAM_PLAYER_TYPES),t)?t:S(e)},P=t.getSnapshotUrl=function(e){var t=e.snapshotServer,n=e.streamName,r=e.modelToken;return"https://c-"+t+"."+h.BASE_DOMAIN_CDN+"/snapshot/"+n+"?audio_sync="+y.SNAPSHOT_PLAYER_AUDIO_SYNC+"&token="+r};t.getStreamUrl=function(e){var t=e.appSettings.data,n=t.sessionHash,r=t.viewServers,a=e.config,o=a.data.useSessionHash,i=a.whiteLabelId,s=e.viewCam,l=s.isReady,u=s.model,c=s.modelToken,d=s.streamName,f=o?{sessionHash:n,domain:i?"xh":""}:{token:c},p=O(e),m=_(e);if(!l)return"";switch(p){case y.VIEWCAM_PLAYER_TYPES.MSE:return"wss://b-"+r.flashphoner+"."+h.BASE_DOMAIN_CDN+":443/";case y.VIEWCAM_PLAYER_TYPES.HTML5:return m===y.BROADCAST_PLAYER_TYPES.WEBRTC?"https://hls."+h.BASE_DOMAIN_CDN+"/s-"+u.broadcastServer+"/"+d+"/"+d+".m3u8?"+g.default.stringify(f):"https://"+r.hls+"."+h.BASE_DOMAIN_CDN+"/"+u.broadcastServer+"/"+d+"_aac/playlist.m3u8?"+g.default.stringify(f);case y.VIEWCAM_PLAYER_TYPES.DASH:return"https://"+r.hls+"."+h.BASE_DOMAIN_CDN+"/"+u.broadcastServer+"/"+d+"_aac/manifest.mpd?token="+c;case y.VIEWCAM_PLAYER_TYPES.SNAPSHOT:var v=u.snapshotServer;return P({snapshotServer:v,streamName:d,modelToken:c});default:return""}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(220),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1156),f=r(d),p=n(1),m=r(p),g=n(0),h=r(g),v=n(3),E=r(v),y=n(5),b=n(7),_=function(){if("undefined"==typeof document)return 0;var e=document.createElement("div");e.style.visibility="hidden",e.style.position="absolute",e.style.width="100px";var t=document.createElement("div");t.style.width="100%",document.body.appendChild(e);var n=e.offsetWidth;e.style.msOverflowStyle="scrollbar",e.style.overflow="scroll",e.appendChild(t);var r=t.offsetWidth;return e.parentNode.removeChild(e),n-r}()>0,S={onScrollY:"ps-scroll-y",onScrollX:"ps-scroll-x",onScrollUp:"ps-scroll-up",onScrollDown:"ps-scroll-down",onScrollLeft:"ps-scroll-left",onScrollRight:"ps-scroll-right",onYReachStart:"ps-y-reach-start",onYReachEnd:"ps-y-reach-end",onXReachStart:"ps-x-reach-start",onXReachEnd:"ps-x-reach-end"},O=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.containerRefHandler=function(e){r.containerRef=e,r.props.containerRef&&r.props.containerRef(e)},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;if(!_)return void(this.props.onNativeScroll&&this.registerEventListener(this.containerRef,"scroll",this.props.onNativeScroll));(0,l.default)(S,function(t,n){var r=e.props[n];r&&e.registerEventListener(e.containerRef,t,r)});var t=this.props.libOptions,n={};(y.BROWSER_CAPABILITIES.ie||y.BROWSER_CAPABILITIES.edge)&&(n={scrollXMarginOffset:1,scrollYMarginOffset:1}),this.psInstance=new f.default(this.containerRef,u({wheelPropagation:!0},n,t))}},{key:"componentDidUpdate",value:function(){this.psInstance&&this.psInstance.update()}},{key:"componentWillUnmount",value:function(){this.psInstance&&this.psInstance.destroy()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isAlwaysVisible;return h.default.createElement("div",{className:this.c("scroll-bar-container",{"always-visible":n}),ref:this.containerRefHandler,"data-component-name":"ScrollBarContainer"},t)}}]),t}(E.default);O.propTypes=u({containerRef:m.default.func,isAlwaysVisible:m.default.bool,libOptions:m.default.object,onNativeScroll:m.default.func},(0,b.getPropTypedCollection)(S,m.default.func)),O.defaultProps={isAlwaysVisible:!1,libOptions:{}},t.default=O},,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.view;return function(e,n){var r=n(),a=r.appSettings.data,o=a.continent,i=a.country,s=a.region;e({type:C,data:{view:t,viewServers:(0,T.getViewServers)(t,o,i,s)}})}}function o(e){var t=e.broadcast,n=void 0===t?{}:t;return function(e){e({type:C,data:{broadcastServers:(0,T.getBroadcastServers)(n)}})}}function i(e){return function(t){var n=new Date(e)-Date.now();t({type:C,data:{timeDelta:n}})}}function s(e){return function(t){t({type:C,data:{isSocketReady:e}})}}function l(e,t){return function(n,r,a){var o=a.Api;return e?o.put("/users/"+t+"/fingerprint",{fingerprint:e}):Promise.resolve()}}function u(e){return function(t){return O.default.getAsync().then(function(n){var r=n.result;return t(l(r,e))})}}function c(){return function(e,t,n){var r=n.Api,a=document,o=a.referrer;return o?r.post("/referrer",{source:o}):Promise.resolve()}}function d(e){return y.default.post("/firebase/client",{clientId:e})}function f(e){return y.default.post("/amplitude",v({},e))}function p(e){var t=e.hostRoot,n=e.nextLocale,r=e.nextSubDomain;return function(e,a){var o=a(),i=o.auth.isLoggedIn,s=i?e((0,A.updateProfile)({locale:r||"en"},A.UPDATE_TYPES.LOCALE,{notifications:{success:null}})):Promise.resolve();return e({type:I,data:{nextLocale:n}}),s.then(function(){"undefined"!=typeof window&&(_.default.set("localeDomain",r,{domain:t,expires:90}),(0,P.redirectToSubDomain)(r,t))})}}function m(e){var t=e.snapshotMap;return function(e){e({type:C,data:{snapshotMap:t}})}}function g(e){var t=e.config,n=e.data,r=e.serverTime;return function(e){var s=t.snapshotMap,l=t.snapshotUrlTemplate;e({type:C,data:v({},n,{snapshotMap:s,snapshotUrlTemplate:l})}),e(i(r)),e(a(t)),e(o(t))}}function h(e){return function(t){t({type:C,data:{availableRoutes:e}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.CHANGE_LOCALE_START=t.UPDATE=void 0;var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.updateViewConfig=a,t.updateBroadcastConfig=o,t.updateTimeDelta=i,t.updateSocketReady=s,t.logFingerprint=l,t.generateAndLogFingerprint=u,t.logReferrer=c,t.updateFirebaseClientId=d,t.updateUserAmplitudeParams=f,t.changeLocale=p,t.updateSnapshotMap=m,t.updateSettings=g,t.updateAvailableRoutes=h;var E=n(159),y=r(E),b=n(106),_=r(b),S=n(274),O=r(S),P=n(19),T=n(538),A=n(43),C=t.UPDATE="appSettings/UPDATE",I=t.CHANGE_LOCALE_START="appSettings/CHANGE_LOCALE_START"},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e,t,n){var r=n.Api,a=t().auth.currentUser;return r.get("/users/"+a.id).then(function(t){var n=t.user;return e({type:de,data:{model:n}}),null})}}function o(){return function(e){e({type:ie})}}function i(e){return function(t,n,r){var a=r.Api,i=n().auth.currentUser;return a.post("/models/"+i.id+"/feedback",{rate:e}).then(function(){t(o())})}}function s(e){return function(t,n,r){var a=r.Api,o=n().auth,i=o.currentUser;return o.isLoggedIn?a.post("/models/"+i.id+"/updateBroadcastSettings",e):(0,B.resolve)()}}function l(){return function(e){e({type:fe})}}function u(){return function(e){return e((0,Q.validateModelProfile)(Q.UPDATE_TYPES.PREVIEW)).then(function(){e({type:pe})})}}function c(e){return function(t,n,r){var a=r.Api,o=n(),i=o.appSettings,s=o.auth,l=i.data.tabId,u=s.currentUser;return s.isLoggedIn?a.put("/models/"+u.id+"/cam",{tabId:l}).then(function(){t({type:oe,data:{playerType:e}})}):(0,B.reject)(new G.ApplicationError("User must be authorized to run this action"))}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,n,r){var a=r.Api,o=n(),i=o.appSettings,s=o.auth,l=o.broadcast,u=i.data.tabId,c=s.currentUser,d=s.isLoggedIn,f=s.isLoggingOut,p=l.isCamActive;return W.default.apiLog("debug","stopCam",{reason:e}),p&&d&&!f?a.del("/models/"+c.id+"/cam",{tabId:u}).finally(function(){return t({type:ae})}):(0,B.resolve)()}}function f(e,t){return function(n){return W.default.apiLog("debug",e,t),Te=0,_e=0,Ae=[],Se=null,n(d())}}function p(e){return function(t,n,r){var a=r.Api,o=r.ApiError,i=n().auth.currentUser,s=z.MODEL_STATUSES.STATUS_IDLE,l=z.MODEL_STATUSES.STATUS_OFF;return a.get("/users/"+i.id).then(function(n){var r=n.user;return!r||r.status!==s&&r.status!==l?(Se=e||null,Te=0,_e=0,Ae=[],null):(t(f("isCamActive.false.maxErrorCount",{reason:"onlineTimerErrorCount > maxErrorCount + status.off",lastErrors:Ae})),null)}).catch(G.NetworkError,function(){t(f("isCamActive.false.maxErrorCount",{reason:"onlineTimerErrorCount > maxErrorCount + NetworkError",lastErrors:Ae}))}).catch(o,function(e){t(f("isCamActive.false.maxErrorCount",{reason:"onlineTimerErrorCount > maxErrorCount + ApiError",lastErrors:Ae,error:e.toJSON()}))})}}function m(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=t(),i=o.auth,s=o.appSettings.data.tabId,l=i.currentUser,u=i.isLoggedIn,c=i.isLoggingOut;if(!u||c||!s)return(0,B.reject)(new Error("User must be authorized to run this action, tabId is also required"));var d=1e3*z.MAXIMUM_IDLE_TIME_SECONDS/z.UPDATE_BROADCAST_INTERVAL;return Te>d?e(p()):r.put("/models/"+l.id+"/online",{tabId:s},{isDefaultErrorHandlerEnabled:!1,timeout:z.UPDATE_BROADCAST_INTERVAL}).then(function(t){var n=t.serverTime;e((0,H.updateTimeDelta)(n));var r=Math.round(new Date(n).getTime()/1e3);return Se&&r-Se>z.MAXIMUM_IDLE_TIME_SECONDS?e(p(r)):(Se=r,Te=0,_e=0,Ae=[],null)}).catch(G.NetworkError,function(){Te+=1,Ae.push("NetworkError","#"+Te)}).catch(a,function(t){400===t.statusCode&&_e>1&&e({type:ue,data:{error:t}}),Ae.push("ApiError",t.statusCode),_e+=1}).catch(G.ServerError,function(e){Ae.push("ServerError",e.statusCode),Te+=1})}}function g(){return function(e,t){return t().broadcast.isBroadcastingPageOpen?(clearTimeout(Oe),Pe+=1,Pe%10==0&&e(a()),e(m()).then(function(){t().broadcast.isBroadcastingPageOpen&&(Oe=setTimeout(function(){return e(g())},z.UPDATE_BROADCAST_INTERVAL))})):(0,B.resolve)()}}function h(e){return function(t){t({type:te,data:{modelWarnings:e}})}}function v(e){return function(t){t({type:ve,data:{warningId:e}})}}function E(e){return function(t,n,r){var a=r.Api;return t(v(e)),a.put("/modelWarnings/"+e+"/accept")}}function y(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=t().auth.currentUser,i=$.REQUEST_TYPES.KNIGHTS,s=$.REQUEST_TYPES.USER;return r.composite({requests:[{id:"bansRequest",method:"get",url:"/front/users/"+o.id+"/bans"},{id:"camMembersRequest",method:"get",url:"/front/models/"+o.id+"/viewers"},{id:"camRequest",method:"get",url:"/front/models/"+o.id+"/cam"},{id:"goalRequest",method:"get",url:"/front/models/"+o.id+"/goal"},{id:"proposalRequest",method:"get",url:"/front/models/"+o.id+"/proposal"},(0,K.prepareChatRequest)(String(o.id)),$.prepareCompositeRequest[s](e,null,{id:o.id}),$.prepareCompositeRequest[i](e,null,{id:o.id})]}).then(function(t){var n=t.data,r=t.errors,l=n.bansRequest,u=n.camMembersRequest,c=n.camRequest,d=n.chatRequest,f=n.goalRequest,p=n[s],m=n.proposalRequest;if(!(0,L.default)(r)){var g=new a("loadCamData error",{errors:r});return e({type:ne,data:{error:g}}),(0,B.reject)(g)}e({type:$.USERS_SAVE,data:{users:(0,D.default)([m.user,c.king,p.user])}}),e((0,Y.add)(u,!0)),e({type:J.LOAD_SUCCESS,data:l}),$.processCompositeResponse[i](e,t),e((0,K.processChatResponse)(d,o.id)),c.king&&e((0,q.setKing)(c.king.id));var v=(0,j.default)(c,"modelWarnings",[]);v.length>0&&e(h(v));var E={id:(0,j.default)(c,"counterpart.id",0),broadcastServer:(0,j.default)(c,"counterpart.broadcastServer","")};return e({type:re,data:F({},c,f,{privateRequest:m,model:p.user,counterpart:E})}),null})}}function b(e){return function(t){t({type:ce,data:{isBroadcastMirrored:e}})}}function _(){return function(e,t){var n=t(),r=(0,Z.getBroadcastType)(n);return Se=null,e({type:le,data:{model:(0,ee.getCurrentUserProfile)(n)}}),(0,B.all)([e(g()),e(s({broadcastType:r}))]).then(function(){return e(y()),null})}}function S(){return function(e,t,n){var r=n.Api,a=t(),o=a.appSettings.data.tabId,i=a.auth,s=i.isLoggedIn,l=i.currentUser;return Te=0,s?r.del("/models/"+l.id+"/online",{tabId:o}).then(function(){return e(d())}):(0,B.resolve)()}}function O(e,t){return function(n,r,a){var o=a.Api,i=a.ApiError,s=r().auth.currentUser;return o.put("/models/"+s.id+"/goal",{goal:e,description:t}).catch(i,function(e){n({type:se,data:{error:e}})})}}function P(){return function(e,t,n){var r=n.Api,a=t().auth.currentUser;return r.get("/models/"+a.id+"/proposal").then(function(t){var n=t.proposeMode,r=t.proposeTimer,a=t.user;return n&&a&&(e({type:$.USERS_SAVE,data:{users:[a]}}),e({type:me,data:{privateRequest:{proposeMode:n,proposeTimer:r,user:a}}})),null})}}function T(e){return function(t,n,r){var a=r.Api,o=n(),i=o.appSettings.data.viewServers,s=o.auth.currentUser,l=(0,Z.getBroadcastType)(o),u=l===z.BROADCAST_PLAYER_TYPES.WEBRTC?i.flashphoner:i.wowza;return a.put("/models/"+s.id+"/shows/"+e+"/viewers/"+s.id,{server:u})}}function A(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.currentUser,i=a.broadcast.privateRequest,s=i.user,l=i.proposeMode;return s&&l?r.put("/models/"+o.id+"/viewers/"+s.id+"/"+l).then(function(t){var n=t.broadcastServer,r=t.serverTime,a=t.streamName,o=t.userStreamName,i=t.show;return e({type:ge,data:{counterpart:{id:s.id,broadcastServer:n},streamName:a,userStreamName:o,privateStartedAt:new Date(r),show:i}}),t}).then(function(t){var n=t.show;return n&&n.mode===z.PRIVATE_MODES.MODE_P2P&&e(T(n.id)),null}).catch(function(t){e((0,V.error)(t.message,"confirmPrivate"))}):(0,B.reject)(new G.ApplicationError("Cannot confirm private request, no pending request found"))}}function C(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.currentUser,i=a.broadcast.privateRequest,s=i.user,l=i.proposeMode;return s&&l?r.del("/models/"+o.id+"/viewers/"+s.id+"/"+l).then(function(){return e({type:me,data:{privateRequest:{proposeMode:null,proposeTimer:null,user:null}}}),null}):(0,B.reject)(new G.ApplicationError("Cannot cancel private request, no pending request found"))}}function I(){return function(e,t,n){var r=n.Api,a=t(),o=a.broadcast.counterpart,i=a.auth.currentUser,s=(0,X.getPrivateMode)(a);return e({type:he}),o.id&&s?r.del("/models/"+i.id+"/viewers/"+o.id+"/"+s).then(function(){return e(d())}):(0,B.reject)(new G.ApplicationError("Cannot stop private, already stopped"))}}function w(e){return function(t,n){clearTimeout(Oe),Se=null;var r=n(),a=r.auth.isLoggedIn;(0,X.getPrivateMode)(r)&&t(I()),a&&!_e&&(t(S()),W.default.apiLog("debug","isCamActive.false.resetBroadcast",{reason:e})),t({type:Ee})}}function N(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.currentUser;return r.put("/models/"+o.id+"/virtualPrivate").then(function(t){var n=t.serverTime,r=t.show,a=t.streamName;return e({type:ye,data:{privateStartedAt:new Date(n),show:r,streamName:a}}),t}).catch(function(t){e((0,V.error)(t.message,"virtualPrivateStart"))})}}function R(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.currentUser;return e({type:be}),r.del("/models/"+o.id+"/virtualPrivate").then(function(){return e(d())})}}Object.defineProperty(t,"__esModule",{value:!0}),t.VIRTUAL_PRIVATE_STOP=t.VIRTUAL_PRIVATE_START=t.RESET=t.REMOVE_MODEL_WARNING=t.PRIVATE_STOP=t.PRIVATE_START=t.PRIVATE_REQUEST_UPDATE=t.PREPARE_CAM_SUCCESS=t.PREPARE_CAM_START=t.MODEL_FIELDS_UPDATE=t.MIRRORED_CHANGE=t.INIT_FAIL=t.INIT=t.GOAL_SET_SUCCESS=t.GOAL_SET_FAIL=t.FEEDBACK_UPDATE=t.COUNTERPART_FIELDS_UPDATE=t.CAM_START=t.CAM_RESET=t.CAM_DATA_LOAD_SUCCESS=t.CAM_DATA_LOAD_FAIL=t.BROADCAST_CONFIG_UPDATE=t.ADD_MODEL_WARNINGS=void 0;var M=n(13),L=r(M),k=n(80),D=r(k),U=n(6),j=r(U),F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.updateModelFields=a,t.closeBroadcastFeedback=o,t.updateBroadcastFeedback=i,t.updateBroadcastSettings=s,t.updatePrepareStartBroadcasting=l,t.updateStartBroadcasting=u,t.startCam=c,t.stopCam=d,t.forceStatusOffline=f,t.checkOnlineStatus=p,t.updateOnlineStatus=m,t.onlineTimerMethod=g,t.addModelWarnings=h,t.removeModelWarning=v,t.acceptWarning=E,t.loadCamData=y,t.changeMirrored=b,t.init=_,t.cancelOnlineStatus=S,t.setGoal=O,t.processRequestNotification=P,t.saveViewServer=T,t.confirmPrivate=A,t.cancelPrivateRequest=C,t.stopPrivate=I,t.reset=w,t.startVirtualPrivate=N,t.stopVirtualPrivate=R;var B=n(20),H=n(79),V=n(28),G=n(54),x=n(29),W=r(x),Y=n(356),K=n(99),q=n(42),z=n(12),X=n(71),Z=n(72),Q=n(43),J=n(130),$=n(37),ee=n(38),te=t.ADD_MODEL_WARNINGS="broadcast/ADD_MODEL_WARNINGS",ne=(t.BROADCAST_CONFIG_UPDATE="broadcast/BROADCAST_CONFIG_UPDATE",t.CAM_DATA_LOAD_FAIL="broadcast/CAM_DATA_LOAD_FAIL"),re=t.CAM_DATA_LOAD_SUCCESS="broadcast/CAM_DATA_LOAD_SUCCESS",ae=t.CAM_RESET="broadcast/CAM_RESET",oe=t.CAM_START="broadcast/CAM_START",ie=(t.COUNTERPART_FIELDS_UPDATE="broadcast/COUNTERPART_FIELDS_UPDATE",t.FEEDBACK_UPDATE="broadcast/FEEDBACK_UPDATE"),se=t.GOAL_SET_FAIL="broadcast/GOAL_SET_FAIL",le=(t.GOAL_SET_SUCCESS="broadcast/GOAL_SET_SUCCESS",t.INIT="broadcast/INIT"),ue=t.INIT_FAIL="broadcast/INIT_FAIL",ce=t.MIRRORED_CHANGE="broadcast/MIRRORED_CHANGE",de=t.MODEL_FIELDS_UPDATE="broadcast/MODEL_FIELDS_UPDATE",fe=t.PREPARE_CAM_START="broadcast/PREPARE_CAM_START",pe=t.PREPARE_CAM_SUCCESS="broadcast/PREPARE_CAM_SUCCESS",me=t.PRIVATE_REQUEST_UPDATE="broadcast/PRIVATE_REQUEST_UPDATE",ge=t.PRIVATE_START="broadcast/PRIVATE_START",he=t.PRIVATE_STOP="broadcast/PRIVATE_STOP",ve=t.REMOVE_MODEL_WARNING="broadcast/REMOVE_MODEL_WARNING",Ee=t.RESET="broadcast/RESET",ye=t.VIRTUAL_PRIVATE_START="broadcast/VIRTUAL_PRIVATE_START",be=t.VIRTUAL_PRIVATE_STOP="broadcast/VIRTUAL_PRIVATE_STOP",_e=0,Se=null,Oe=void 0,Pe=0,Te=0,Ae=[]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t={gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png"};return(0,d.default)((0,D.default)((0,v.default)(e,function(e){return t[e]})))}function i(e,t,n){var r=o(t),a=e.type;if((0,w.default)(r,a))return(0,j.resolve)();var i=new V.ValidationError((0,G.translate)(n,{messageId:"errors.validation.fileIsOneOfImageTypes",params:{fileTypes:t.join(", "),type:a}}));return(0,j.reject)(i)}function s(e,t,n){var r=e.size;if(r<=t)return(0,j.resolve)();var a=new V.ValidationError((0,G.translate)(n,{messageId:"errors.validation.fileIsTooLarge",params:{fileSize:parseInt(r/F.BYTES_IN_MEGABYTE,10),maxSize:parseInt(t/F.BYTES_IN_MEGABYTE,10)}}));return(0,j.reject)(a)}function l(e,t,n,r){var a=e.width,o=e.height;if(a>=t&&o>=n)return(0,j.resolve)();var i=new V.ValidationError((0,G.translate)(r,{messageId:"errors.validation.imageDoesNotFitDimensions",params:{width:a,height:o,minHeight:n,minWidth:t}}));return(0,j.reject)(i)}function u(e,t,n){var r=[];t.formats&&t.formats.length&&r.push(i(e,t.formats,n)),t.size&&r.push(s(e,t.size,n));var a=t.minWidth,o=t.minHeight;if(a||o){var u=(0,B.getFileDataUrl)(e).then(function(e){return e?(0,H.getImageFromDataUrl)(e):null}).then(function(e){return l(e,a,o,n)});r.push(u)}return(0,j.all)(r).then(function(){return null}).catch(V.ValidationError,function(e){return e.message})}Object.defineProperty(t,"__esModule",{value:!0}),t.validators=t.isAlbumCostValid=t.isValidCost=t.isSwiftCompatible=t.isEqualTo=t.isPasswordValid=t.isUsernameValid=t.isLoginValid=t.isEmailValid=t.isTextValueFilled=t.isInRangeByLength=t.validateFields=t.getErrorMessage=void 0;var c=n(124),d=r(c),f=n(46),p=r(f),m=n(459),g=r(m),h=n(11),v=r(h),E=n(95),y=r(E),b=n(69),_=r(b),S=n(49),O=r(S),P=n(13),T=r(P),A=n(283),C=r(A),I=n(14),w=r(I),N=n(47),R=r(N),M=n(358),L=r(M),k=n(80),D=r(k),U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getMimeTypes=o,t.validateFileType=i,t.validateFileSize=s,t.validateImageDimensions=l,t.validateImageFile=u;var j=n(20),F=n(5),B=n(284),H=n(285),V=n(54),G=n(57),x=n(27),W=t.getErrorMessage=(0,g.default)(function(e,t,n){var r="errors.validation",a=r+".requiredFields."+t,o=(0,G.translate)(n,{messageId:a});return{required:o===a?(0,G.translate)(n,{messageId:r+".requiredFields.default",params:{fieldName:t}}):o,invalidEmail:(0,G.translate)(n,{messageId:r+".email"}),invalidLogin:(0,G.translate)(n,{messageId:r+".login"}),invalidPassword:(0,G.translate)(n,{messageId:r+".password",params:{minLength:x.MIN_PASSWORD_LENGTH}}),passwordsDontMatch:(0,G.translate)(n,{messageId:r+".passwordsDontMatch"}),swiftIncompatible:(0,G.translate)(n,{messageId:r+".swiftIncompatible"}),invalidAlbumCost:(0,G.translate)(n,{messageId:r+".albumCost",params:{min:x.MIN_ALBUM_COST,max:x.NEW_MAX_ALBUM_COST}})}[e]},function(e,t){return e+":"+t}),Y=(t.validateFields=function(e,t){return(0,p.default)(e,function(e,n,r){var o=n.value,i=n.validators;if(!Array.isArray(i))return e;var s=void 0;return!(0,L.default)((0,R.default)(i,function(e){return(0,y.default)(e)&&(0,_.default)(e.predicate)}),function(e){var t=e.predicate(o);return t||(s=e.errorType),t})&&s?U({},e,a({},r,W(s,r,t))):e},{})},t.isInRangeByLength=function(e){var t=e.min,n=void 0===t?0:t,r=e.max,a=void 0===r?1/0:r;return function(e){var t=e.length;return t>=n&&t<=a}}),K=t.isTextValueFilled=function(e){return!(0,T.default)(e)},q=t.isEmailValid=function(e){return x.EMAIL_REGEXP.test(e)},z=t.isLoginValid=function(e){return x.LOGIN_REGEXP.test(e)},X=(t.isUsernameValid=function(e){return x.USERNAME_REGEXP.test(e)},t.isPasswordValid=Y({min:x.MIN_PASSWORD_LENGTH})),Z=t.isEqualTo=function(e){return function(t){return(0,O.default)(t,e)}},Q=t.isSwiftCompatible=function(e){return x.SWIFT_COMPATIBILITY_REGEXP.test(e)},J=(t.isValidCost=function(e,t,n){return/^[1-9][0-9]*$/.test(e)&&(0,C.default)(e,t,n+1)},t.isAlbumCostValid=function(e){return/^[1-9][0-9]*$/.test(e)&&(0,C.default)(e,x.MIN_ALBUM_COST,x.NEW_MAX_ALBUM_COST+1)});t.validators={isRequiredValidator:{predicate:K,errorType:"required"},isEmailValidator:{predicate:q,errorType:"invalidEmail"},isLoginValidator:{predicate:z,errorType:"invalidLogin"},isPasswordValidator:{predicate:X,errorType:"invalidPassword"},isEqualToValidator:{predicate:Z,errorType:"invalidPassword"},isSwiftCompatibleValidator:{predicate:Q,errorType:"swiftIncompatible"},isAlbumCostValidator:{predicate:J,errorType:"invalidAlbumCost"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1136),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=function e(){r(this,e)};i.get=function(){if("undefined"!=typeof pageYOffset)return pageYOffset;if("undefined"==typeof window)return 0;var e=document,t=e.body,n=e.documentElement,r=n?n.scrollTop:0,a=t?t.scrollTop:0;return Math.max(r,a)},i.set=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"undefined"!=typeof window&&(0,o.default)(e,{duration:t})},i.to=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(0,o.default)(e,t)},i.reset=function(){"undefined"!=typeof window&&window.scrollTo(0,0)},t.default=i},,,,function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.Api,o=r.ApiError,i=e.isInBackground,s=void 0!==i&&i,l=e.preventLastRequestCancellation;!(void 0!==l&&l)&&I&&I.cancel(),s||t({type:P});var u=n(),c=u.ssr,d=c.headers,m=c.subdomain,h=u.routing.location,y=(0,g.getParams)(h,!0),b=(0,E.getGuestFavoriteIds)(u),_=p({},(0,f.default)(y,["countryCode","countryRating","landingTagName","regionCode","subdomain"]),{favoriteIds:b}),S=(0,v.getApiFilterParams)(u),A="undefined"!=typeof window?{}:{ssrHeaders:d},C="undefined"!=typeof window?{}:{subdomain:m};return I=a.get("/models",p({},_,C,S),p({isDefaultErrorHandlerEnabled:!1},A)).then(function(e){var n=e.count,r=e.models,a=e.filteredCount,o=e.liveTagDetails,i=e.liveTagGroups;return t({type:T,data:{filteredCount:a,liveCount:n,models:r,liveTagDetails:o,liveTagGroups:i}}),null}).catch(o,function(e){t({type:O,data:{error:e}})})}}function a(e,t){return function(n,r,a){var o=a.Api,i=r(),s=i.routing.location.pathname,l=(0,h.getIsOnIndexRoute)(s);t&&o.post("/models/"+e+"/widgets/hits",{timestamp:t}),l&&n({type:m.INDEX_CLICK_ON_THUMB,data:{modelId:e}})}}function o(e){return function(t,n,r){return r.Api.get("/models/"+e+"/cam").then(function(n){var r=n.modelToken,a=n.streamName;t({type:S,data:{hoverPlayerData:{modelId:e,modelToken:r,streamName:a}}})})}}function i(){return{type:b,data:{}}}function s(e){return{type:A,data:{liveCount:e}}}function l(){return{type:C,data:{}}}function u(){return{type:_,data:{}}}function c(e){return{type:y,data:{preference:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.SHOW_STUB_ITEMS=t.SET_LIVE_COUNT=t.LOAD_SUCCESS=t.LOAD_START=t.LOAD_FAIL=t.LOAD_HOVER_PLAYER_DATA=t.CLEAR_MODELS=t.CLEAR_HOVER_PLAYER_DATA=t.CHANGE_TAGS_PREFERENCE=void 0;var d=n(33),f=function(e){return e&&e.__esModule?e:{default:e}}(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.load=r,t.onModelItemClicked=a,t.getHoverPlayerData=o,t.clearHoverPlayerData=i,t.setLiveCount=s,t.showStubItems=l,t.clearOnlineModels=u,t.changeTagsPreference=c;var m=n(360),g=n(129),h=n(19),v=n(45),E=n(97),y=t.CHANGE_TAGS_PREFERENCE="modelsOnline/CHANGE_TAGS_PREFERENCE",b=t.CLEAR_HOVER_PLAYER_DATA="modelsOnline/CLEAR_HOVER_PLAYER_DATA",_=t.CLEAR_MODELS="modelsOnline/CLEAR_MODELS",S=t.LOAD_HOVER_PLAYER_DATA="modelsOnline/LOAD_HOVER_PLAYER_DATA",O=t.LOAD_FAIL="modelsOnline/LOAD_FAIL",P=t.LOAD_START="modelsOnline/LOAD_START",T=t.LOAD_SUCCESS="modelsOnline/LOAD_SUCCESS",A=t.SET_LIVE_COUNT="modelsOnline/SET_LIVE_COUNT",C=t.SHOW_STUB_ITEMS="modelsOnline/SHOW_STUB_ITEMS",I=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.METHOD_NAMES={altcoin:"Altcoins",cryptocoin:"Bitcoin + Altcoins",epoch:{BO:"Boleto",BT:"eKonto",EA:"Epay.bg",ES:"Eps-Überweisung",ET:"Euteller",EW:"Abaqoos",GP:"Giropay",MI:"Bancontact",NF:"Neosurf",PE:"Postepay",PO:"POLi Payments",PS:"Paysafecard",PZ:"Przelewy24",QW:"QIWI кошелёк",SF:"SafetyPay",SP:"Sporopay",TC:"ToditoCash"},ideal:"iDEAL",mobile:"Pay by Payforit",sepa:"SEPA",paypal:"PayPal",paysafecard:"paysafecard",sofort:"Sofort.",przelewy24:"Przelewy24"},t.BILLING_NAMES={bitpay:"Bitpay",centro:"CentroBill",coingate:"Coingate",coinpayments:"Coinpayments",commercegate:"CommerceGate",dimoco:"DIMOCO",epoch:"Epoch",paysafecard:"paysafecard",segpay:"SegPay",webbilling:"Webbilling"},t.MOBILE_STEPS={METHOD:"method",PACKAGE:"package",BILLING:"billing",SUBMIT:"submit"},t.WIZARD_STEPS={AUTH:"auth",BILLING:"billing",COMPLETED:"completed",ERROR:"error",SUCCESS:"success",TOKENS_PACKAGES:"TokensPackages"},t.PACKAGE_PURCHASE_TYPES={CARD_VERIFICATION:"creditCardVerification",GOLD_SUBSCRIPTION:"goldSubscription",GOLD_SUBSCRIPTION_ONE_MONTH:"goldSubscriptionOneMonth",TOKENS:"tokens"},t.ACCEPTED_BILLING_CURRENCIES={coinpayments:["Ethereum","Ripple","Bitcoin Cash","Litecoin","Dash","NEM","Monero","Ethereum Classic","Waves"],coingate:["Bitcoin","Bitcoin Cash","Ethereum","Litecoin","Dash"]},t.CARD_VERIFICATION_BONUS=50,t.PURCHASE_EFFECTS={BECAME_GOLD:"becameGold",BECAME_GREEN:"becameGreen",REFILL:"refill"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Avatar=void 0;var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(3),E=r(v),y=n(8),b=r(y),_=n(381),S=r(_),O=n(62),P=n(21),T=n(45),A=n(1158),C=r(A),I=t.Avatar=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:P.layoutHasChanged,action:function(){r.resizeComponent()}}],r.resizeComponent=function(){var e=r,t=e.avatarRef;t&&!r.props.size&&(t.style.lineHeight=t.offsetHeight+"px",t.style.fontSize=Math.ceil(t.offsetHeight/2)+"px")},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentDidMount",value:function(e,n,r){this.resizeComponent(),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this,e,n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.base64Preview,r=t.children,a=t.className,o=t.size,i=t.showOnlineStatus,s=t.user,c=t.isAwardBadgeVisible,d=t.isLoading;if(s&&s.isDeleted)return g.default.createElement("span",{className:this.c("avatar",a),ref:function(t){e.avatarRef=t},"data-component-name":"Avatar"},g.default.createElement(b.default,{img:"deleted-user"}));var f=(0,l.default)(s,"avatarUrl",n),p=(0,l.default)(s,"username"),m={},h="";o&&(m=u({},m,{borderRadius:o+"px",height:o+"px",lineHeight:o+"px",width:o+"px"})),!f&&p?(m=u({},m,{backgroundColor:"#"+(0,O.strToRgb)(p),fontSize:Math.ceil(o/2)+"px"}),h=p.charAt(0)):m.backgroundImage=d?"none":"url("+f+")";var v=i&&s&&s.isOnline&&s.id!==(0,l.default)(this.props.currentUser,"id");return g.default.createElement("span",{className:this.c("avatar",a,{empty:!f}),ref:function(t){e.avatarRef=t},style:m,"data-component-name":"Avatar"},h,r,this.renderIf(c,function(){return g.default.createElement(S.default,{username:s.username,place:s.topBestPlace,size:34,topMedalHeight:42})}),this.renderIf(v,function(){return g.default.createElement(C.default,{status:"online"})}))}}]),t}(E.default);I.propTypes={className:p.default.string,currentUser:p.default.object,isAwardBadgeVisible:p.default.bool,user:p.default.object,isLoading:p.default.bool,showOnlineStatus:p.default.bool,size:p.default.number},I.defaultProps={isLoading:!1,isAwardBadgeVisible:!1,showOnlineStatus:!0};var w=function(e,t){var n=e.auth.currentUser,r=e.ui,a=r.windowWidth,o=r.windowHeight,i=t.user.id;return{base64Preview:(0,T.getModelBase64Preview)(e,i),currentUser:n,windowWidth:a,windowHeight:o}};t.default=(0,h.connect)(w)(I)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getIsBanButtonVisible=t.hasCanBan=t.getCanBanIds=t.getCanBan=t.getIsSubscribed=t.getIsProfileAvailable=t.getIsGeoBanned=t.getIsBannedByKnight=t.getBanHasExpired=t.getIsBanned=t.getCanFriend=void 0;var a=n(11),o=r(a),i=n(80),s=r(i),l=n(15),u=r(l),c=(n(27),n(164)),d=function(e){return e.relations.banExpiry},f=function(e){return e.relations.canBan},p=function(e){return e.relations.canFriend},m=function(e){return e.relations.isBanned},g=function(e){return e.relations.isGeoBanned},h=function(e){return e.relations.isBannedByKnight},v=function(e){return e.relations.isProfileAvailable},E=function(e){return e.relations.isSubscribed},y=(t.getCanFriend=function(e,t){return p(e).get(String(t))||!1},t.getIsBanned=function(e,t){return m(e).get(String(t))||!1},t.getBanHasExpired=function(e,t){var n=e.appSettings.data.timeDelta,r=d(e).get(String(t)),a=(0,u.default)(r).diff((0,u.default)().add(n,"milliseconds"),"h",!0),o=Math.ceil(a);return o>0?o:1},t.getIsBannedByKnight=function(e,t){return h(e).get(String(t))||!1},t.getIsGeoBanned=function(e,t){return g(e).get(String(t))||!1},t.getIsProfileAvailable=function(e,t){return v(e).get(String(t))||!1},t.getIsSubscribed=function(e,t){return E(e).get(String(t))||!1},t.getCanBan=function(e,t,n){return f(e).get(t?t+":"+n:String(n))||!1});t.getCanBanIds=function(e,t){var n=f(e).keySeq().toArray();return(0,s.default)((0,o.default)(n,function(e){var n=e.split(":");return String(t)===n[0]&&n.length>1?n[1]:null}))},t.hasCanBan=function(e,t,n){return f(e).has(t?t+":"+n:String(n))},t.getIsBanButtonVisible=function(e,t){var n=e.auth,r=n.currentUser;if(!n.isLoggedIn)return!1;var a=y(e,null,t),o=(0,c.getHasBanned)(e,r.id,t);return a||o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(86),u=r(l),c=n(14),d=r(c),f=n(48),p=r(f),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},E=n(1),y=r(E),b=n(0),_=r(b),S=n(137),O=r(S),P=n(2),T=n(3),A=r(T),C=n(8),I=r(C),w=n(73),N=r(w),R=n(1172),M=r(R),L=n(5),k=n(1173),D=r(k),U=n(1174),j=r(U),F=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleMouseDown=function(e){if(!(r.props.isDisabled||"mousedown"===e.type&&0!==e.button)){if(e.stopPropagation(),e.preventDefault(),!r.props.isSearchable)return r.focus(),void r.setState({isOpen:!r.state.isOpen});if(r.state.isFocused){var t=!0,n=[r.controlRef,r.inputRef];r.state.isOpen&&(0,d.default)(n,e.currentTarget)&&(t=!1),r.setState({isOpen:t,isPseudoFocused:!1})}else r._openAfterFocus=!0,r.focus()}},r.touchEventHandler=function(e){var t=e.type;"touchstart"===t?r.isTouchMoved=!1:"touchmove"===t?r.isTouchMoved=!0:"touchend"!==t||r.isTouchMoved||r.handleMouseDown(e)},r.handleMouseDownOnArrow=function(e){r.props.isDisabled||"mousedown"===e.type&&0!==e.button||r.state.isOpen&&(e.stopPropagation(),e.preventDefault(),r.closeMenu())},r.handleInputFocus=function(e){r.props.onFocus&&r.props.onFocus(e),r.setState({isFocused:!0,isOpen:r.state.isOpen||r._openAfterFocus}),r._openAfterFocus=!1},r.handleInputBlur=function(e){document.activeElement&&r.menuRef&&document.activeElement.isEqualNode(r.menuRef)||(r.props.onBlur&&r.props.onBlur(e),r.setState({inputValue:"",isFocused:!1,isOpen:!1,isPseudoFocused:!1}))},r.handleInputChange=function(e){r.setState({isOpen:!0,isPseudoFocused:!1,inputValue:e.target.value})},r.handleKeyDown=function(e){if(!r.props.isDisabled){switch(e.keyCode){case L.KEY_CODES.backspace:return void(!r.state.inputValue&&r.props.isRemoveByBackspaceEnabled&&(e.preventDefault(),r.popValue()));case L.KEY_CODES.tab:return void(r.state.isOpen&&r.closeMenu());case L.KEY_CODES.enter:if(!r.state.isOpen)return;r.selectFocusedOption();break;case L.KEY_CODES.escape:r.state.isOpen?r.closeMenu():r.props.isClearable&&r.props.isClearByEscapeEnabled&&r.clearValue(e);break;case L.KEY_CODES.arrowUp:r.focusPreviousOption();break;case L.KEY_CODES.arrowDown:r.focusNextOption();break;default:return}e.preventDefault()}},r.handleValueClick=function(e,t){var n=r.props.onValueClick;n&&n(e,t)},r.handleMenuScroll=function(e){if(r.props.onMenuScrollToBottom){var t=e.target;t.scrollHeight>t.offsetHeight&&!(t.scrollHeight-t.offsetHeight-t.scrollTop)&&r.props.onMenuScrollToBottom()}},r.handleOptionSelect=function(e){r.props.isMultiple?(r.addValue(e),r.setState({inputValue:""})):(r.setValue(e),r.setState({isOpen:!1,inputValue:"",isPseudoFocused:r.state.isFocused}))},r.handleOptionFocus=function(e){r.setState({focusedOption:e})},r.clearValue=function(e){e&&"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),r.setValue(r.props.isMultiple?[]:null),r.setState({isOpen:!1,inputValue:""},function(){r.focus()}))},r.handleValueRemove=function(e){r.setValue(r.getValueArray().filter(function(t){return t!==e})),r.focus()},r.defaultFilterHandler=function(e,t,n){var a=t;r.props.isStripDiacriticsEnabled&&(a=(0,M.default)(a)),r.props.isCaseIgnored&&(a=(0,u.default)(a));var o=n?n.map(function(e){return e[r.props.valueKey]}):null;return e.filter(function(e){if(o&&o.indexOf(e[r.props.valueKey])>-1)return!1;if(r.props.filterOption)return r.props.filterOption.call(r,e,a);if(!a)return!0;var t=String(e[r.props.valueKey]),n=String(e[r.props.labelKey]);r.props.isStripDiacriticsEnabled&&(r.props.isDefaultFilterByValue&&(t=(0,M.default)(t)),r.props.isDefaultFilterByLabel&&(n=(0,M.default)(n))),r.props.isCaseIgnored&&(r.props.isDefaultFilterByValue&&(t=(0,u.default)(t)),r.props.isDefaultFilterByLabel&&(n=(0,u.default)(n)));return r.props.isDefaultFilterStartPositionOnly?r.props.isDefaultFilterByValue&&t.substr(0,a.length)===a||r.props.isDefaultFilterByLabel&&n.substr(0,a.length)===a:r.props.isDefaultFilterByValue&&t.indexOf(a)>=0||r.props.isDefaultFilterByLabel&&n.indexOf(a)>=0})},r.renderOptionLabel=function(e){return e[r.props.labelKey]},a=n,i(r,a)}return s(t,e),h(t,[{key:"getDefaultState",value:function(){return{inputValue:"",isFocused:!1,isLoading:!1,isOpen:!1,isPseudoFocused:!1}}},{key:"componentDidMount",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.isFocusAfterMountEnabled&&this.focus()}},{key:"componentDidUpdate",value:function(e,n,r){if(v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this,e,n,r),n.inputValue!==this.state.inputValue&&this.props.onInputChange&&this.props.onInputChange(this.state.inputValue),this._scrollToFocusedOptionOnUpdate&&this.focusedRef&&this.menuRef){this._scrollToFocusedOptionOnUpdate=!1;var a=O.default.findDOMNode(this.focusedRef),o=O.default.findDOMNode(this.menuRef),i=a.getBoundingClientRect(),s=o.getBoundingClientRect();(i.bottom>s.bottom||i.top<s.top)&&(o.scrollTop=a.offsetTop+a.clientHeight-o.offsetHeight)}}},{key:"focus",value:function(){var e=this.inputRef;e&&e.focus()}},{key:"closeMenu",value:function(){this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.isMultiple,inputValue:""})}},{key:"getValueArray",value:function(){var e=this.props,t=e.options,n=e.valueKey,r=function(e){return"string"!=typeof e&&"number"!=typeof e?e:t?(0,p.default)(t,a({},n,e)):null},o=this.props.value;if(this.props.isMultiple){if("string"==typeof o&&(o=o.split(this.props.multipleValueDelimiter)),!Array.isArray(o)){if(null===o||void 0===o)return[];o=[o]}return o.map(r).filter(function(e){return e})}var i=r(o);return i?[i]:[]}},{key:"setValue",value:function(e){this.props.onSelect&&this.props.onSelect(e)}},{key:"addValue",value:function(e){this.setValue(this.getValueArray().concat(e))}},{key:"popValue",value:function(){var e=this.getValueArray();e.length&&this.setValue(e.slice(0,e.length-1))}},{key:"focusNextOption",value:function(){this.focusAdjacentOption("next")}},{key:"focusPreviousOption",value:function(){this.focusAdjacentOption("previous")}},{key:"focusAdjacentOption",value:function(e){var t=this._visibleOptions.filter(function(e){return!e.isDisabled});if(this._scrollToFocusedOptionOnUpdate=!0,!this.state.isOpen)return void this.setState({isOpen:!0,inputValue:"",focusedOption:this._focusedOption||t["next"===e?0:t.length-1]});if(t.length){for(var n=-1,r=0;r<t.length;r+=1)if(this._focusedOption===t[r]){n=r;break}var a=t[0];"next"===e&&n>-1&&n<t.length-1?a=t[n+1]:"previous"===e&&(a=n>0?t[n-1]:t[t.length-1]),this.setState({focusedOption:a})}}},{key:"selectFocusedOption",value:function(){this._focusedOption&&this.handleOptionSelect(this._focusedOption)}},{key:"getOptionsFiltered",value:function(e){var t=this.state.inputValue,n=this.props.options||[];return this.props.onFilter?this.props.onFilter(n,t,e):this.defaultFilterHandler(n,t,e)}},{key:"renderLoading",value:function(){return this.renderIf(this.props.isLoading,function(){return _.default.createElement("span",{className:"select-loading-zone","aria-hidden":"true"},_.default.createElement("span",{className:"select-loading"}))})}},{key:"renderValue",value:function(e,t){var n=this,r=this.props.valueRenderer||this.renderOptionLabel,a=this.props.valueComponent;if(!e.length)return this.state.inputValue?null:_.default.createElement("div",{className:"select-placeholder"},this.props.placeholder||this.t("select.defaultPlaceholder"));var o=this.props.onValueClick?this.handleValueClick:null;return this.props.isMultiple?e.map(function(e,t){return _.default.createElement(a,{isDisabled:n.props.isDisabled,key:"value-"+t+"-"+e[n.props.valueKey],onClick:o,onRemove:n.handleValueRemove,option:e},r(e))}):this.state.inputValue?null:_.default.createElement(a,{isDisabled:this.props.isDisabled,onClick:t?o:null,option:e[0]},r(e[0]))}},{key:"renderInput",value:function(){var e=this,t=this.props,n=t.isDisabled,r=t.inputProps,a=t.isSearchable,o=t.tabIndex,i=this.state.inputValue,s=this.c("select-input",r.className);return n||!a?_.default.createElement("div",g({},r,{className:s,tabIndex:o||0,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:function(t){e.inputRef=t},style:{border:0,width:1,display:"inline-block"}})):_.default.createElement("input",g({},r,{className:s,tabIndex:o,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,ref:function(t){e.inputRef=t},value:i}))}},{key:"renderClear",value:function(){var e=this.props,t=e.isClearable,n=e.isDisabled,r=e.isLoading,a=e.isMultiple,o=e.value,i=!t||n||r,s=!o||a&&!o.length;if(i||s)return null;var l=this.props.isMultiple?this.props.textClearMultipleValues||this.t("select.clearMultipleValues"):this.props.textClearSingleValue||this.t("select.clearSingleValue");return _.default.createElement("span",{className:"select-clear-zone",title:l,"aria-label":l,onMouseDown:this.clearValue,onTouchEnd:this.clearValue},_.default.createElement(I.default,{img:"close-2",size:10}))}},{key:"renderArrow",value:function(){return _.default.createElement("span",{className:"select-arrow-zone",onMouseDown:this.handleMouseDownOnArrow},_.default.createElement(I.default,{img:"arrow-down"}))}},{key:"renderMenu",value:function(e,t,n){var r=this,a=void 0;if(e&&e.length){var o=this.props.optionComponent,i=this.props.optionRenderer||this.renderOptionLabel;a=e.map(function(e,a){var s=t&&t.indexOf(e)>-1,l=e===n,u=r.c({"select-option":!0,"is-selected":s,"is-focused":l,disabled:e.isDisabled});return _.default.createElement(o,{className:u,isDisabled:e.isDisabled,focused:l,key:"option-"+a+"-"+e[r.props.valueKey],onSelect:r.handleOptionSelect,onFocus:r.handleOptionFocus,option:e,isSelected:s,ref:function(e){r.focusedRef=l?e:null}},i(e))})}else a=_.default.createElement("div",{className:"select-no-result"},this.props.noResultText||this.t("select.noResult"));return a}},{key:"renderHiddenField",value:function(e){var t=this;if(!this.props.name)return null;var n=function(e){return"object"===(void 0===e?"undefined":m(e))?JSON.stringify(e):e},r=e.map(function(e){return n(e[t.props.valueKey])}).join(this.props.multipleValueDelimiter);return _.default.createElement("input",{type:"hidden",name:this.props.name,value:r,disabled:this.props.isDisabled})}},{key:"getFocusableOption",value:function(e){var t=this._visibleOptions;if(!t.length)return null;var n=this.state.focusedOption||e;return n&&t.indexOf(n)>-1?n:(0,p.default)(t,{isDisabled:!1})}},{key:"render",value:function(){var e=this,t=this.getValueArray(),n=this.getOptionsFiltered(this.props.isMultiple?t:null);this._visibleOptions=n;var r=this.state.isOpen,o=this.props.isMultiple&&!n.length,i=t.length&&!this.state.inputValue;o&&i&&(r=!1);var s=this.getFocusableOption(t[0]);this._focusedOption=s;var l=this.c("select",this.props.className,a({"is-multiple":this.props.isMultiple,disabled:this.props.isDisabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":r,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.isSearchable,"has-value":t.length},"select-"+this.props.size,!0));return _.default.createElement("div",{className:l,id:this.props.id,style:this.props.wrapperStyle,"data-component-name":"Select"},this.renderHiddenField(t),_.default.createElement("div",{ref:function(t){e.controlRef=t},className:"select-control",style:this.props.controlStyle,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchStart:this.touchEventHandler,onTouchMove:this.touchEventHandler,onTouchEnd:this.touchEventHandler},this.renderValue(t,r),this.renderInput(),this.renderLoading(),this.renderClear(),this.renderArrow()),this.renderIf(r,function(){return _.default.createElement("div",{className:"select-menu-outer",style:e.props.menuContainerStyle},_.default.createElement("div",{ref:function(t){e.menuRef=t},className:"select-menu",style:e.props.menuStyle},_.default.createElement(N.default,{onNativeScroll:e.handleMenuScroll,onScrollY:e.handleMenuScroll},e.renderMenu(n,e.props.isMultiple?null:t,s))))}))}}]),t}(A.default);F.propTypes={className:y.default.string,controlStyle:y.default.object,filterOption:y.default.func,inputProps:y.default.object,isCaseIgnored:y.default.bool,isClearable:y.default.bool,isClearByEscapeEnabled:y.default.bool,isDefaultFilterByValue:y.default.bool,isDefaultFilterByLabel:y.default.bool,isDefaultFilterStartPositionOnly:y.default.bool,isDisabled:y.default.bool,isFocusAfterMountEnabled:y.default.bool,isLoading:y.default.bool,isMultiple:y.default.bool,isRemoveByBackspaceEnabled:y.default.bool,isSearchable:y.default.bool,isStripDiacriticsEnabled:y.default.bool,labelKey:y.default.string,menuContainerStyle:y.default.object,menuStyle:y.default.object,multipleValueDelimiter:y.default.string,name:y.default.string,noResultText:y.default.string,onBlur:y.default.func,onSelect:y.default.func.isRequired,onFocus:y.default.func,onFilter:y.default.any,onInputChange:y.default.func,onMenuScrollToBottom:y.default.func,optionComponent:y.default.func,optionRenderer:y.default.func,options:y.default.array.isRequired,onValueClick:y.default.func,placeholder:y.default.string,size:y.default.oneOf(["default","small"]),tabIndex:y.default.string,textClearMultipleValues:y.default.string,textClearSingleValue:y.default.string,value:y.default.any,valueComponent:y.default.func,valueKey:y.default.string,valueRenderer:y.default.func,wrapperStyle:y.default.object},F.defaultProps={inputProps:{},isCaseIgnored:!0,isClearable:!1,isClearByEscapeEnabled:!0,isDefaultFilterByLabel:!0,isDefaultFilterByValue:!0,isDefaultFilterStartPositionOnly:!1,isDisabled:!1,isLoading:!1,isMultiple:!1,isRemoveByBackspaceEnabled:!0,isSearchable:!1,isStripDiacriticsEnabled:!0,labelKey:"label",multipleValueDelimiter:",",noResultText:null,onFilter:null,optionComponent:D.default,placeholder:null,size:"default",textClearMultipleValues:null,textClearSingleValue:null,valueComponent:j.default,valueKey:"value"};var B=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight}};t.default=(0,P.connect)(B,null,null,{withRef:!0})(F)},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSortedFavorites=t.getAllFavoriteIds=t.getIsBannerVisible=t.getHasReachedGuestFavoritesLimit=t.getGuestFavoriteIds=t.getFavoriteIds=t.getIsGuestFavoritesAvailable=t.getIsInFavorites=void 0;var o=n(14),i=r(o),s=n(146),l=r(s),u=n(11),c=r(u),d=n(80),f=r(d),p=n(32),m=n(16),g=n(27),h=function(e){return e.appSettings.data.availableRoutes},v=function(e){return e.modelsOnline.collection},E=function(e){return e.users.collection},y=function(e){return e.favorites.favoriteIds},b=function(e){return e.favorites.guestFavoriteIds},_=(t.getIsInFavorites=function(e,t){return y(e).has(t)||b(e).has(t)},t.getIsGuestFavoritesAvailable=function(e){var t=e.auth.isLoggedIn,n=e.abTesting.abTestingData;return!t&&"B"===n.guestFavorites}),S=t.getFavoriteIds=(0,p.createSelector)([y],function(e){return e.toArray()}),O=t.getGuestFavoriteIds=(0,p.createSelector)([b],function(e){return e.toArray()});t.getHasReachedGuestFavoritesLimit=function(e){return b(e).size>=g.MAX_FAVORITES_FOR_GUEST},t.getIsBannerVisible=function(e){var t=e.favorites.isGuestBannerHidden;return _(e)&&O(e).length&&!t},t.getAllFavoriteIds=(0,p.createSelector)([y,b],function(e,t){return[].concat(a(e),a(t))}),t.getSortedFavorites=(0,p.createSelector)([S,v,E,h],function(e,t,n,r){return(0,l.default)((0,f.default)((0,c.default)(e,function(e){var a=(0,m.findById)(t,e),o=a||(0,m.findById)(n,e);return!o||o.isDeleted?null:{viewCamUrl:(0,i.default)(r,"/"+o.username)?"/cams/"+o.username:"/"+o.username,isLive:o.isLive,model:o}})),"isLive","desc")})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r,a){var o=a.Api,i=r().auth.currentUser,s=t||i.id;return o.post("/users/"+s+"/relation",{userIds:e}).then(function(e){var r=(0,d.default)(e,p);t&&r.canBan&&(r=f({},r,{canBan:g(r.canBan,t)})),n({type:m,data:{relations:r}})})}}function i(e,t){return function(n){var r=(0,d.default)(e,p),a=t?f({},r,{canBan:g(e.canBan,t)}):r;n({type:m,data:{relations:a}})}}function s(e){return function(t){var n=e.banExpiresAt,r=e.canAddFriends,o=e.isBanned,s=e.isBannedByKnight,l=e.isGeoBanned,u=e.isProfileAvailable,c=e.isSubscribed,d=e.user;t(i({banExpiry:a({},d.id,n),canFriend:a({},d.id,r),isBanned:a({},d.id,o),isBannedByKnight:a({},d.id,s),isGeoBanned:a({},d.id,l),isProfileAvailable:a({},d.id,u),isSubscribed:a({},d.id,c)}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.adjustCanBan=t.createRelationMap=t.UPDATE=t.relationKeys=void 0;var l=n(46),u=r(l),c=n(33),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.load=o,t.update=i,t.process=s;var p=t.relationKeys=["banExpiry","canBan","canFriend","isBanned","isBannedByKnight","isGeoBanned","isProfileAvailable","isSubscribed"],m=t.UPDATE="relations/UPDATE",g=(t.createRelationMap=function(e,t,n){return{relations:a({},e,(0,u.default)(t,function(e,t){return e[t]=n,e},{}))}},t.adjustCanBan=function(e,t){return(0,u.default)(e,function(e,n,r){return f({},e,a({},t+":"+r,n))},{})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return Array.isArray(e)?e:Array.from(e)}function o(e,t){var n=e.canBan,r=e.messages,a=e.users;return function(e){(0,H.default)(a)||e({type:de.USERS_SAVE,data:{users:a}}),t&&!(0,H.default)(n)&&e({type:fe.UPDATE,data:{relations:{canBan:(0,fe.adjustCanBan)(n,t)}}}),e({type:ve,data:{messages:r,modelId:t,type:"server"}})}}function i(e){return function(t){t({type:_e,data:{error:e}})}}function s(e){var t=e.message;return function(e,n){var r=n(),a=t.modelId,o=t.senderId;return(Ne(r,a,o)?e((0,de.loadList)([o],!0,a)):(0,z.resolve)()).then(function(){e({type:Se,data:{messages:[t],type:"server"}})})}}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,le.getLastMessage)(e),a=e.auth.currentUser;return{details:n,createdAt:(0,re.getServerTimeShortISOString)(e),id:r?parseFloat(""+(r.id+1)):1,modelId:t,senderId:a?a.id:null,type:se.MESSAGE_TYPES.CONSOLE}}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,le.getLastMessage)(e),a=e.auth.currentUser;return{details:n,createdAt:(0,re.getServerTimeShortISOString)(e),id:r?parseFloat(""+(r.id+1)):1,modelId:t,senderId:a?a.id:null,type:se.MESSAGE_TYPES.APP}}function c(e,t){var n=(0,le.getLastMessage)(e);return{details:t,createdAt:(0,re.getServerTimeShortISOString)(e),id:n?parseFloat(""+(n.id+1)):1,type:se.MESSAGE_TYPES.SYSTEM}}function d(e,t){return function(n,r){var a=c(r(),{modelId:e,subtype:t}),o=(0,G.default)([se.SYSTEM_MESSAGE_SUBTYPES.CONSOLE_ANNOUNCEMENT,se.SYSTEM_MESSAGE_SUBTYPES.TOKENS_GIVEAWAY_SIGNUP],t);return n({type:Se,data:{messages:[a],type:o?"console":"system"}}),(0,z.resolve)()}}function f(e){return function(t,n){var r=se.SYSTEM_MESSAGE_SUBTYPES.INVISIBLE_MODE,a=n(),o=a.profile.user;return t(o&&o.isInvisible?d(e,r):{type:Te,data:{types:["system"],subtypes:[r]}}),(0,z.resolve)()}}function p(e,t){return function(n,r){var o=r(),i=e.id,s=o.auth,l=s.currentUser,u=s.isLoggedIn,c=o.viewCam.isCamAvailable,f=(0,ue.getPrivateMode)(o),p=(0,G.default)((0,I.default)(ie.PRIVATE_MODES),f),m=f===ie.PRIVATE_MODES.MODE_P2P&&c,g=e.status===ie.MODEL_STATUSES.STATUS_OFF,h=u&&(l.isModel||l.isStudio);if(g&&!h){var v=new Q.ValidationError("Tip error",{key:"camChat.console.errors.tipModelOffline",params:{modelName:e.username},elementFlags:{strong:!0,nowrap:!0}});return(0,z.reject)(v)}if(p){var E=new Q.ValidationError("Tip error",{key:(0,k.default)(f,ie.PRIVATE_MODES.MODE_P2P)?"camChat.console.errors.modelInP2P":"camChat.console.errors.modelInPrivate"});return(0,z.reject)(E)}if(!u){n((0,ce.startWizardWithActionOnEnter)(Z.MODAL_TYPES.SEND_TIP,{component:"SignUp",action:{backgroundImage:e.avatarUrl,type:"sendTip",user:e},user:e,triggerSource:X.AUTH_TRIGGER_SOURCES.CHAT_COMMAND_TIP}));var y=new Q.ValidationError("Tip error",{key:"camChat.console.errors.tipNotLogin"});return(0,z.reject)(y)}if(h){var b=new Q.ValidationError("Tip error",{key:"camChat.console.errors.tipModelsStudios"});return(0,z.reject)(b)}if(m){var _=new Q.ValidationError("Tip error",{key:"camChat.console.errors.userInP2P"});return(0,z.reject)(_)}var S=(0,pe.getCurrentUserProfile)(o),O=S.tokens,P=a(t.params),T=P[0],A=P.slice(1),C=/^[0-9]+$/.test(T)?parseInt(T,10):0,w=-1!==(0,W.default)(A,"0","").indexOf("-private"),N=w?(0,U.default)(A,1):A,R=N.join(" ");if(C<=0){var M=new Q.ValidationError("Tip error",{key:"camChat.console.errors.tipZero"});return(0,z.reject)(M)}return n(O<C?d(i,se.SYSTEM_MESSAGE_SUBTYPES.NOT_ENOUGH_TOKENS):(0,oe.sendTip)(i,C,R,w,X.TIP_SOURCES.CONSOLE)),(0,z.resolve)({tipAmount:C,subtype:t.subtype})}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var a=r(),o=e.id,i=l(a,o,{subtype:se.CONSOLE_MESSAGE_SUBTYPES.HELP});return $.default.sendConsoleSubTypeMessage("Help",t?"Correct":"Mismatch"),(0,z.resolve)(n({type:Se,data:{messages:[i],type:"console"}}))}}function g(e,t){return function(n,r,a){var o=a.Api,i=r(),s=e.id;return $.default.sendConsoleMessage("King"),o.get("/models/"+s+"/king").then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.kingId;return n((0,de.loadList)([r])).then(function(){var r=l(i,s,q({},t,e));return n({type:Se,data:{messages:[r],type:"console"}})})})}}function h(e,t){return function(n,r,a){var o=a.Api,i=r(),s=e.id;return o.get("/models/"+s+"/users").then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=l(i,s,q({},t,e));return n({type:Se,data:{messages:[r],type:"console"}})})}}function v(e,t){return function(n,r,a){var o=a.Api,i=r(),s=e.id;return o.get("/models/"+s+"/lovense").then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=l(i,s,q({},t,e));return n({type:Se,data:{messages:[r],type:"console"}})}).catch(function(){var r="camChat.console.errors."+t.subtype.toLowerCase(),a=e.username,o=l(i,s,q({},t,{error:{key:r,params:{modelName:a},elementFlags:{strong:!0}}}));n({type:Se,data:{messages:[o],type:"console"}})})}}function E(e,t){return function(n,r){var a=r(),o=e.id,i=se.CONSOLE_MESSAGE_SUBTYPES.HELP,s=se.CONSOLE_MESSAGE_SUBTYPES.KING,u=se.CONSOLE_MESSAGE_SUBTYPES.TIP,c=se.CONSOLE_MESSAGE_SUBTYPES.USERS,d=se.CONSOLE_MESSAGE_SUBTYPES.LOVENSE,f=(0,z.resolve)();if(t.subtype===s)f=n(g(e,t));else if(t.subtype===d)f=n(v(e,t));else if(t.subtype===u)f=n(p(e,t));else if(t.subtype===i)f=n(m(e,!0));else if(t.subtype===c)f=n(h(e,t));else{var E=l(a,o,t);n({type:Se,data:{messages:[E],type:"console"}})}return f.catch(function(e){var r="camChat.console.errors."+t.subtype.toLowerCase(),i=(0,ae.hasTranslation)(a,r)?(0,ae.translate)(a,{messageId:r}):e.message,s=l(a,o,q({},t,{error:q({key:i,params:{},elementFlags:{}},e.details)}));n({type:Se,data:{messages:[s],type:"console"}})})}}function y(e){return function(t){t({type:Oe,data:{inputText:e}})}}function b(){return function(e){e({type:Pe})}}function _(e){return function(t,n,r){var a=r.Api,i=r.ApiError;return t({type:he}),a.get("/models/"+e+"/chat").then(function(n){var r=t(o(n,e));t({type:de.USERS_SAVE,data:{users:r}})}).catch(i,function(e){t({type:Ee,data:{error:e}})})}}function S(e,t){return function(n,r){var o=(0,ge.getUserById)(r(),e),i=se.CONSOLE_MESSAGE_SUBTYPES.COMMAND,s=se.CONSOLE_MESSAGE_SUBTYPES.HELP,u=(0,K.default)(t.split(/^\/|\s+/)),c=a(u),d=c[0],f=c.slice(1),p=(0,W.default)(se.CONSOLE_MESSAGE_SUBTYPES,(0,F.default)(d),s),m=l(r(),e,{messageText:t,subtype:i});n({type:Se,data:{messages:[m],type:"console"}});var g=te.default.get("consoleCommandListFor"+e,[]);return g[0]!==t&&(g.unshift(t),te.default.set("consoleCommandListFor"+e,(0,M.default)(g,Ae))),n(E(o,{subtype:p,messageText:t,params:f}))}}function O(e,t){var n=e.viewCam.isCamAvailable,r=we(e,t),a=(0,le.getCanSend)(e,t);return r?new Q.ValidationError("Restriction error",{type:"system",subtype:r}):a?null:new Q.ValidationError("Cannot send error",{type:"system",subtype:se.SYSTEM_MESSAGE_SUBTYPES.CANNOT_SEND,body:(0,ae.translate)(e,{messageId:"viewCam.error."+(n?"spyChat":"privateChat")})})}function P(e,t){return function(n,r,a){var o=a.Api,i=r(),s=i.modelChat,l=s.isSending,u=Ce(t),c=u?t.replace(/^\\/,"/"):t,d=O(i,e),f=(0,z.resolve)();if(n({type:ye,data:{inputText:c}}),u)f=n(S(e,c));else if(d)f=(0,z.reject)(d);else{var p=(0,le.getCanSendSmiles)(i,e),m=p?c:Ie(c);l||(0,H.default)((0,N.default)(m))||(f=o.post("/models/"+e+"/chat",{text:m}))}return f.then(function(){return n({type:be,data:{isConsoleMessage:u,modelId:e}}),null}).catch(function(e){throw n({type:_e,data:{error:e}}),e})}}function T(e){return function(t,n){var r=n(),a=O(r,e);a&&t({type:_e,data:{error:a}})}}function A(e){return function(t,n){var r=n();(0,le.getIfShouldClearError)(r)&&t(i(null)),t(T(e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateLovenseMessage=t.getRestrictionSystemMessageSubtype=t.prepareChatRequest=t.REMOVE_MESSAGES=t.SET_INPUT_FOCUS=t.SET_INPUT_TEXT=t.ADD_MESSAGE=t.SEND_FAIL=t.SEND_SUCCESS=t.SEND_START=t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=t.INIT=void 0;var C=n(85),I=r(C),w=n(76),N=r(w),R=n(537),M=r(R),L=n(352),k=r(L),D=n(354),U=r(D),j=n(903),F=r(j),B=n(13),H=r(B),V=n(14),G=r(V),x=n(6),W=r(x),Y=n(80),K=r(Y),q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.processChatResponse=o,t.setChatError=i,t.addChatMessage=s,t.addSystemMessage=d,t.updateInvisibleModeMessage=f,t.addConsoleMessage=E,t.setInputText=y,t.setInputFocus=b,t.load=_,t.sendConsoleMessage=S,t.sendChatMessage=P,t.checkIfErrorShouldBeShown=T,t.changeInput=A;var z=n(20),X=n(51),Z=n(5),Q=n(54),J=n(59),$=r(J),ee=n(56),te=r(ee),ne=n(357),re=n(282),ae=n(57),oe=n(42),ie=n(12),se=n(66),le=n(359),ue=n(71),ce=n(60),de=n(37),fe=n(98),pe=n(38),me=n(91),ge=n(44),he=(t.INIT="modelsChat/INIT",t.LOAD_START="modelsChat/LOAD_START"),ve=t.LOAD_SUCCESS="modelsChat/LOAD_SUCCESS",Ee=t.LOAD_FAIL="modelsChat/LOAD_FAIL",ye=t.SEND_START="modelsChat/SEND_START",be=t.SEND_SUCCESS="modelsChat/SEND_SUCCESS",_e=t.SEND_FAIL="modelsChat/SEND_FAIL",Se=t.ADD_MESSAGE="modelsChat/ADD_MESSAGE",Oe=t.SET_INPUT_TEXT="modelsChat/SET_INPUT_TEXT",Pe=t.SET_INPUT_FOCUS="modelsChat/SET_INPUT_FOCUS",Te=t.REMOVE_MESSAGES="modelsChat/REMOVE_MESSAGES",Ae=20,Ce=function(e){return/^[\/\\]/.test((0,N.default)(e))},Ie=function(e){return e.replace(ne.smilesRegexp,function(e){return(0,ne.getSmileIndex)(e)>-1?"":e})},we=(t.prepareChatRequest=function(e){return{id:"chatRequest",method:"get",url:"/front/models/"+e+"/chat"}},t.getRestrictionSystemMessageSubtype=function(e,t){var n=se.SYSTEM_MESSAGE_SUBTYPES.EMAIL_VERIFY_REQUIRED,r=se.SYSTEM_MESSAGE_SUBTYPES.LOGIN_REQUIRED,a=se.SYSTEM_MESSAGE_SUBTYPES.YOU_ARE_BANNED,o=e.auth,i=e.signUp,s=o.currentUser,l=o.isLoggingIn,u=o.isLoggedIn,c=i.isPending,d=(0,ge.getUserById)(e,t),f=u&&d&&s.id===d.id,p=(0,me.getIsBanned)(e,t);if(l||c||!d||f)return null;if(p)return a;var m=d.whoCanChat,g=(0,G.default)(["registered"],m),h=u&&(s.isGold||s.isGreen||s.isEmailVerified);return g&&!u?r:g&&!h?n:null}),Ne=function(e,t,n){var r=e.auth,a=r.currentUser;return!(!r.isLoggedIn||n<0||n===t||n===a.id)&&(!(0,ge.hasUserById)(e,n)||!(0,me.hasCanBan)(e,t,n)||(0,le.getHasNoMessagesSent)(e,n))};t.updateLovenseMessage=function(e){return function(t,n){var r=n();if(r.viewCam.isLovenseEnabled){var a={lovenseDetails:{type:se.LOVENSE_MESSAGE_SUBTYPES.TOY,status:se.LOVENSE_TOY_STATUS.ON}},o=u(r,e,a);t({type:Se,data:{messages:[o],type:"app"}})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasJustBecomeFriends=t.getIsFriendshipButtonVisible=t.createUserFriendIdsSelector=t.createUserFriendsSelector=t.getIsMyFriend=t.getOutgoingFriendship=t.getIncomingFriendship=t.getOutgoingFriendships=t.getIncomingFriendships=t.getMyFriendships=t.getMyFriends=t.getMyFriendIds=void 0;var a=n(186),o=r(a),i=n(11),s=r(i),l=n(50),u=r(l),c=n(13),d=r(c),f=n(47),p=r(f),m=n(6),g=r(m),h=n(18),v=n(32),E=n(16),y=n(27),b=n(91),_=function(e){return e.auth.currentUser},S=function(e){return e.myFriends.collection},O=function(e){return e.userFriends.collection},P=function(e){return e.users.collection},T=function(e,t){return!(!e||!t||t.isDeleted||"approved"!==t.status)&&(t.inviteeId===e.id?t.inviterId:t.inviterId===e.id&&t.inviteeId)},A=function(e,t){return e&&t&&t.inviteeId===e.id},C=function(e,t){return e&&t&&t.inviterId===e.id},I=t.getMyFriendIds=(0,v.createSelector)([_,S],function(e,t){return(0,s.default)((0,p.default)((0,E.sortMapBy)(t,{itemKey:"updatedAt",order:"DESC"}).map(function(t){return T(e,t)}).toArray()),o.default)}),w=(t.getMyFriends=(0,v.createSelector)([I,P],function(e,t){return(0,d.default)(e)?(0,h.Seq)():(0,E.find)(t,{id:e}).valueSeq()}),t.getMyFriendships=(0,v.createSelector)([_,S],function(e,t){return t.filter(function(t){return T(e,t)})}),t.getIncomingFriendships=(0,v.createSelector)([_,S],function(e,t){return t.filter(function(t){return A(e,t)})})),N=t.getOutgoingFriendships=(0,v.createSelector)([_,S],function(e,t){return t.filter(function(t){return C(e,t)})}),R=(t.getIncomingFriendship=function(e,t){return(0,E.findFirst)(w(e),{inviterId:t})},t.getOutgoingFriendship=function(e,t){return(0,E.findFirst)(N(e),{inviteeId:t})}),M=t.getIsMyFriend=function(e,t){return I(e).indexOf(t)>-1};t.createUserFriendsSelector=function(e){var t=function(t,n){return(0,g.default)(n,e)};return(0,v.createSelector)([t,O,P],function(e,t,n){var r=(0,u.default)(e)?e:(0,E.findFirst)(n,{username:e},null,!1),a=(0,E.findById)(t,r.id);return a?(0,E.find)(n,{id:a.userIds}).valueSeq():(0,h.Seq)()})},t.createUserFriendIdsSelector=function(e){var t=function(t,n){return(0,g.default)(n,e)};return(0,v.createSelector)([t,O,P],function(e,t,n){var r=(0,u.default)(e)?e:(0,E.findFirst)(n,{username:e},null,!1);return r?(0,g.default)((0,E.findById)(t,r.id),"userIds",[]):[]})},t.getIsFriendshipButtonVisible=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=(0,b.getIsBanned)(e,t),i=(0,b.getCanFriend)(e,t),s=M(e,t),l=R(e,t),u=(0,g.default)(l,"status")===y.FRIENDSHIP_STATUSES.REQUESTED,c=!a||!o&&r.isRegular;return!((0,g.default)(l,"status")===y.FRIENDSHIP_STATUSES.DECLINED)&&(u||s||i||c)},t.hasJustBecomeFriends=function(e,t){return!1===e.isMyFriend&&!0===t.isMyFriend}},,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.formatOptions=void 0;var o=n(33),i=r(o),s=n(78),l=r(s),u=n(128),c=r(u),d=n(84),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(874),h=r(g),v=["path","expires","maxAge","domain","secure","httpOnly","firstPartyOnly"],E={expires:365,path:"/"},y=t.formatOptions=function(e){var t={expires:function(e){if((0,c.default)(e)){var t=new Date;return t.setMilliseconds(t.getMilliseconds()+864e5*e),t}return e},path:function(e){return e||"/"}};return(0,l.default)(e,function(e,n){return t[n]?t[n](e):e})},b=function(){function e(){a(this,e)}return m(e,null,[{key:"getAll",value:function(){return"undefined"!=typeof document?h.default.parse(document.cookie):{}}},{key:"get",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"undefined"!=typeof document?e.getAll()[t]||n:n}},{key:"has",value:function(t){return"undefined"!=typeof document&&t in e.getAll()}},{key:"set",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("undefined"!=typeof document){var a=(0,i.default)(p({},E,r),v),o=y(a);document.cookie=h.default.serialize(t,n,o)}return e.getAll()}},{key:"delete",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"!=typeof document&&(0,f.default)(e.getAll(),t)){var r=new Date(0),a=(0,i.default)(p({},E,n,{expires:r}),v),o=y(a);e.set(t,"",o)}return e.getAll()}},{key:"parse",value:function(e){try{return h.default.parse(e)}catch(e){return{}}}}]),e}();t.default=b},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=t().auth.currentUser;return e({type:_}),r.get("/users/"+o.id+"/favorites").then(function(t){var n=t.userIds;return e({type:S,data:{favoriteIds:n}}),e((0,b.loadMore)(n)),null}).catch(a,function(t){throw e({type:O,data:{error:t}}),t})}}function o(e,t){return function(n,r,o){var i=o.Api,s=o.ApiError;return n({type:I}),i.put("/users/"+e+"/favorites",f({favoriteIds:t},h.default.buildAmplitudeBackendDTO())).then(function(){return n({type:w}),n(a())}).catch(s,function(e){throw n({type:N,data:{error:e}}),e})}}function i(){return function(e){e({type:D})}}function s(e){return function(t,n,r){var a=r.Api,o=r.ApiError,i=n(),s=i.auth.currentUser;return t({type:P}),(0,y.getIsGuestFavoritesAvailable)(i)?t((0,y.getHasReachedGuestFavoritesLimit)(i)?(0,p.showModal)(m.MODAL_TYPES.ADD_TO_FAVORITES_LIMIT):{type:A,data:{favoriteId:e}}):a.put("/users/"+s.id+"/favorites/"+e,f({},h.default.buildAmplitudeBackendDTO())).then(function(){return t({type:T,data:{favoriteId:e}}),t((0,b.loadMore)([e])),null}).catch(o,function(e){throw t({type:C,data:{error:e}}),e})}}function l(e){return function(t,n,r){var a=r.Api,o=r.ApiError,i=n(),s=i.auth.currentUser;return t({type:R}),(0,y.getIsGuestFavoritesAvailable)(i)?t({type:L,data:{favoriteIds:e}}):a.del("/users/"+s.id+"/favorites/",{favoriteIds:e}).then(function(){return t({type:M,data:{favoriteIds:e}}),null}).catch(o,function(e){throw t({type:k,data:{error:e}}),e})}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var a=r(),o=a.auth.isLoggedIn,i=(0,y.getIsInFavorites)(a,e.id);if(!o&&!(0,y.getIsGuestFavoritesAvailable)(a))return void(0,v.composeActionOnEnter)("addToFavorites",{modelId:e.id,waitSocketSubscriptionKey:"userUpdated:"+e.id}).then(function(r){n((0,p.showModal)(m.MODAL_TYPES.AUTH,f({action:{backgroundImage:e.avatarUrl,href:m.BASE_URL+"/user/"+e.username,type:"addToFavorites",user:e,shouldBypassActionPrefix:!0,onSuccess:(0,d.default)(function(){v.performActionOnEnter.addToFavorites(r.params,n)},E.ADD_TO_FAVORITES_DELAY),onEnterAction:r},component:"SignUp",className:"auth-modal-signup"},t)))});n(i?l([e.id]):s(e.id))}}Object.defineProperty(t,"__esModule",{value:!0}),t.CLOSE_FAVORITE_BANNER=t.REMOVE_FAIL=t.REMOVE_GUEST_FAVORITE_SUCCESS=t.REMOVE_SUCCESS=t.REMOVE_START=t.UPDATE_FAIL=t.UPDATE_SUCCESS=t.UPDATE_START=t.ADD_FAIL=t.ADD_GUEST_FAVORITE_SUCCESS=t.ADD_SUCCESS=t.ADD_START=t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0;var c=n(36),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.load=a,t.update=o,t.hideBanner=i,t.add=s,t.remove=l,t.toggle=u;var p=n(9),m=n(5),g=n(59),h=r(g),v=n(19),E=n(12),y=n(97),b=n(37),_=t.LOAD_START="favorites/LOAD_START",S=t.LOAD_SUCCESS="favorites/LOAD_SUCCESS",O=t.LOAD_FAIL="favorites/LOAD_FAIL",P=t.ADD_START="favorites/ADD_START",T=t.ADD_SUCCESS="favorites/ADD_SUCCESS",A=t.ADD_GUEST_FAVORITE_SUCCESS="favorites/ADD_GUEST_FAVORITE_SUCCESS",C=t.ADD_FAIL="favorites/ADD_FAIL",I=t.UPDATE_START="favorites/UPDATE_START",w=t.UPDATE_SUCCESS="favorites/UPDATE_SUCCESS",N=t.UPDATE_FAIL="favorites/UPDATE_FAIL",R=t.REMOVE_START="favorites/REMOVE_START",M=t.REMOVE_SUCCESS="favorites/REMOVE_SUCCESS",L=t.REMOVE_GUEST_FAVORITE_SUCCESS="favorites/REMOVE_GUEST_FAVORITE_SUCCESS",k=t.REMOVE_FAIL="favorites/REMOVE_FAIL",D=t.CLOSE_FAVORITE_BANNER="favorites/CLOSE_FAVORITE_BANNER"},function(e,t,n){"use strict";function r(){return function(e,t,n){var r=n.Api,a=n.ApiError;e({type:p});var o=t(),s=o.routing,u=o.ssr,g=u.headers,h=u.subdomain,v=(new Date).getTimezoneOffset(),E="undefined"==typeof window,y=E?s:window,b=y.location,_=b.pathname,S=(0,c.getParams)(b),O={requestPath:_,requestQuery:S},P=E?i({},O,{subdomain:h}):O,T=E?{ssrHeaders:g}:{};return r.get("/config",i({timezoneOffset:v},P),T).then(function(t){e({type:m,data:t});var n=t.data;if(n){var r=n.user;r&&!r.hasFingerprint&&e((0,l.generateAndLogFingerprint)(r.id)),e((0,d.processLogin)(n))}return t}).catch(a,function(t){return e({type:f,error:t})})}}function a(e){return function(t){return t({type:g,data:e})}}function o(){return function(e){return(0,s.all)([e(r()),e((0,u.load)())]).then(function(e){return{config:e[0].config,data:e[0].data,translations:e[1].translations}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE=t.LOAD_SUCCESS=t.LOAD_START=t.LOAD_FAIL=t.CLEANUP_SSR=t.APP_INIT=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.load=r,t.update=a,t.loadWithTranslations=o;var s=n(20),l=n(79),u=n(361),c=n(129),d=n(34),f=(t.APP_INIT="config/APP_INIT",t.CLEANUP_SSR="config/CLEANUP_SSR",t.LOAD_FAIL="config/LOAD_FAIL"),p=t.LOAD_START="config/LOAD_START",m=t.LOAD_SUCCESS="config/LOAD_SUCCESS",g=t.UPDATE="config/UPDATE"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.fromRenderToApiFormat=t.fromApiToRenderFormat=t.getIntervalFor=t.formatIntervalToISO=t.formatDateToISO=t.DATE_MASK=t.ISO_8601_DATE_FORMAT=t.RENDER_DATE_FORMAT=t.HUMAN_DATE_FORMAT=t.BASE_DATE_FORMAT_LOCALE=void 0;var a,o=n(15),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(5),l=s.DATE_INTERVALS.TODAY,u=s.DATE_INTERVALS.YESTERDAY,c=s.DATE_INTERVALS.THIS_MONTH,d=s.DATE_INTERVALS.THIS_WEEK,f=s.DATE_INTERVALS.LAST_24_HOURS,p=s.DATE_INTERVALS.LAST_MONTH,m=s.DATE_INTERVALS.THIS_YEAR,g=(t.BASE_DATE_FORMAT_LOCALE="en",t.HUMAN_DATE_FORMAT="lll",t.RENDER_DATE_FORMAT="DD.MM.YYYY"),h=t.ISO_8601_DATE_FORMAT="YYYY-MM-DD",v=(t.DATE_MASK="39.19.2999",t.formatDateToISO=function(e){return e.utc().locale("en").format()}),E=t.formatIntervalToISO=function(e){var t=e.from,n=e.until,r=void 0===n?(0,i.default)():n;return{from:v(t),until:v(r)}};t.getIntervalFor=(a={},r(a,l,function(){return{from:(0,i.default)().startOf("day").utc().format(),until:(0,i.default)().utc().format()}}),r(a,u,function(){var e=(0,i.default)().subtract(1,"days");return{from:e.startOf("day").utc().format(),until:e.endOf("day").utc().format()}}),r(a,c,function(){var e=(0,i.default)().startOf("month");return E({from:e})}),r(a,f,function(){var e=(0,i.default)().subtract(24,"hours");return E({from:e})}),r(a,p,function(){var e=(0,i.default)().subtract(1,"months").startOf("month"),t=(0,i.default)().subtract(1,"months").endOf("month");return E({from:e,until:t})}),r(a,m,function(){var e=(0,i.default)().startOf("year");return E({from:e})}),r(a,d,function(){var e=(0,i.default)().startOf("week");return E({from:e})}),a),t.fromApiToRenderFormat=function(e){var t=(0,i.default)(e);return t.isValid()&&0===t.parsingFlags().unusedTokens.length?t.format(g):null},t.fromRenderToApiFormat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dayOnly,r=(0,i.default)(e,g,!0),a=n?r.format(h):r.utc().format();return r.isValid()&&0===r.parsingFlags().unusedTokens.length?a:null}},,,,function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getIsAmplitudeBlocked=t.getIsAmplitudeAvailable=t.getIsAnalAvailable=t.getIsGaAvailable=t.getIsProdDeploy=t.DEPLOY_ENVS=void 0;var a=n(50),o=r(a),i=n(69),s=r(i),l=n(56),u=r(l),c="4.8.1697",d=c.split(".").slice(0,-1).join("."),f={ENV:{PRODUCTION:"production",DEVELOPMENT:"dev",STAGING:"staging",TEST:"test"},BUILD_ENV:"production",DEPLOY_ENV:"undefined"!=typeof DEPLOY_ENV?DEPLOY_ENV:"",BUILD_TARGET:"browser",ERROR_REPORTING_ENABLED:"undefined"!=typeof window&&window.ERROR_REPORTING_ENABLED,HASHED_LIBS_URLS:"undefined"!=typeof window&&window.HASHED_LIBS_URLS,TRACKING_ID:"undefined"!=typeof window?window.TRACKING_ID:e.TRACKING_ID,MESSAGE_SENDER_ID:"undefined"!=typeof window?window.MESSAGE_SENDER_ID:e.MESSAGE_SENDER_ID,PERFORMANCE_REPORTING_ENABLED:"undefined"!=typeof window&&window.PERFORMANCE_REPORTING_ENABLED,VERSION:c,RELEASE_VERSION:d},p=t.DEPLOY_ENVS={DEVELOP:"dev",LOCAL:"local",PROD:"production",QA:"qa",RELEASE:"release",TEST:"test"},m=t.getIsProdDeploy=function(){return f.DEPLOY_ENV===p.PROD},g=(t.getIsGaAvailable=function(){return f.TRACKING_ID&&(0,s.default)(window.ga)},t.getIsAnalAvailable=function(){return(0,o.default)(window.anal)},function(){return m()||!0===u.default.get("enableAmplitudeReports")});t.getIsAmplitudeAvailable=function(){return(0,o.default)(window.amplitude)&&g()},t.getIsAmplitudeBlocked=function(){return g()&&"amplitude"in window&&(!("getSessionId"in window.amplitude)||!window.amplitude.getSessionId())};t.default=f}).call(t,n(25))},,,function(e,t,n){"use strict";function r(){return function(e,t,n){var r=n.ApiError,a=t().auth.currentUser;return e({type:s}),e((0,i.loadOne)({id:a.id},[i.REQUEST_TYPES.FRIENDS])).catch(r,function(t){e({type:l,data:{error:t}})})}}function a(e){return function(t,n,r){var a=r.Api,o=r.ApiError,s=n().auth.currentUser;return t({type:u}),a.put("/users/"+s.id+"/friends/"+e).then(function(e){var n=e.friendship,r=e.user;return t({type:i.USERS_SAVE,data:{users:[r]}}),t({type:c,data:{friendship:n}}),null}).catch(o,function(e){t({type:d,data:{error:e}})})}}function o(e){return function(t,n,r){var a=r.Api,o=r.ApiError,i=n().auth.currentUser;return t({type:f}),a.del("/users/"+i.id+"/friends/",{friendIds:e}).then(function(e){var n=e.friendships;return t({type:p,data:{friendships:n}}),null}).catch(o,function(e){throw t({type:m,data:{error:e}}),e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.REMOVE_FAIL=t.REMOVE_SUCCESS=t.REMOVE_START=t.ADD_FAIL=t.ADD_SUCCESS=t.ADD_START=t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0,t.load=r,t.add=a,t.remove=o;var i=n(37),s=t.LOAD_START="myFriends/LOAD_START",l=(t.LOAD_SUCCESS="myFriends/LOAD_SUCCESS",t.LOAD_FAIL="myFriends/LOAD_FAIL"),u=t.ADD_START="myFriends/ADD_START",c=t.ADD_SUCCESS="myFriends/ADD_SUCCESS",d=t.ADD_FAIL="myFriends/ADD_FAIL",f=t.REMOVE_START="myFriends/REMOVE_START",p=t.REMOVE_SUCCESS="myFriends/REMOVE_SUCCESS",m=t.REMOVE_FAIL="myFriends/REMOVE_FAIL"},function(e,t,n){"use strict";function r(){return function(e){return e({type:g,data:{didByUser:!0}})}}function a(){return function(e){return e({type:h})}}function o(e){return function(t,n,r){return r.Api.post("/models/"+e+"/views").then(function(){return t({type:v,data:{tag:e}}),null})}}function i(e){var t=e.tag,n=e.searchString,r=void 0===n?"":n;return function(e,n){var a=n(),o={searchString:r};void 0!==t&&Object.assign(o,{tagAlias:t,tagKey:(0,m.getAllAliasesTags)(a)[t]}),e({type:_,data:o})}}function s(){return function(e,t){var n=t().modelFilter;e({type:y,data:{activeModelListParams:(0,p.default)(n,"activeModelListParams")}})}}function l(e){var t=e.limit,n=e.offset,r=void 0===n?0:n,a=e.isInitLimit,o=void 0!==a&&a;return function(e,n){var a=n();if(Math.min(t,r)<0)return void Loader.error("Limit and offset must be positive",{limit:t,offset:r,isInitLimit:o});e({type:b,data:{limit:t,offset:r,initLimit:o?t:a.modelFilter.initLimit}})}}function u(){return{type:E}}function c(e){return{type:S,data:{sortBy:e}}}function d(){return{type:O}}Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_MODEL_SORT_TYPE=t.SAVE_MODEL_SORT_TYPE=t.SAVE_FILTER_PARAMS=t.SAVE_API_FILTER_PARAMS=t.SAVE_ACTIVE_FILTER_PARAMS=t.RESET_LIMIT=t.INCREMENT_TAG_VIEW=t.EXPAND_SEARCH_FORM=t.COLLAPSE_SEARCH_FORM=void 0;var f=n(115),p=function(e){return e&&e.__esModule?e:{default:e}}(f);t.collapseSearchForm=r,t.expandSearchForm=a,t.incrementTagViews=o,t.saveFilterParams=i,t.saveActiveFilterParams=s,t.saveApiFilterParams=l,t.resetLimit=u,t.saveModelSortType=c,t.resetModelSortType=d;var m=n(222),g=t.COLLAPSE_SEARCH_FORM="modelFilter/COLLAPSE_SEARCH_FORM",h=t.EXPAND_SEARCH_FORM="modelFilter/EXPAND_SEARCH_FORM",v=t.INCREMENT_TAG_VIEW="modelFilter/INCREMENT_TAG_VIEW",E=t.RESET_LIMIT="modelFilter/RESET_LIMIT",y=t.SAVE_ACTIVE_FILTER_PARAMS="modelFilter/SAVE_ACTIVE_FILTER_PARAMS",b=t.SAVE_API_FILTER_PARAMS="modelFilter/SAVE_API_FILTER_PARAMS",_=t.SAVE_FILTER_PARAMS="modelFilter/SAVE_FILTER_PARAMS",S=t.SAVE_MODEL_SORT_TYPE="modelFilter/SAVE_MODEL_SORT_TYPE",O=t.RESET_MODEL_SORT_TYPE="modelFilter/RESET_MODEL_SORT_TYPE"},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(160),u=r(l),c=n(267),d=r(c),f=n(35),p=r(f),m=n(278),g=r(m),h=n(13),v=r(h),E=n(6),y=r(E),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},O=n(1),P=r(O),T=n(0),A=r(T),C=n(2),I=n(24),w=n(3),N=r(w),R=n(8),M=r(R),L=n(39),k=r(L),D=n(5),U=n(29),j=r(U),F=n(21),B=n(163),H=n(630),V=r(H),G=n(1266),x=r(G),W=n(27),Y=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:F.hasInterfaceBlockChanged,action:function(e){return r.interfaceBlockChangeHandler(e)}}],r.interfaceBlockChangeHandler=function(e){var t=e.currentBlockingComponent;r.renderRootRef.contains(t)&&r.hidePopupNow()},r.clearPopupTimeouts=function(){r.showPopupTimeout&&clearTimeout(r.showPopupTimeout),r.hidePopupTimeout&&clearTimeout(r.hidePopupTimeout)},r.showPopupNow=function(){r.setState({isPopupVisible:!0})},r.hidePopupNow=function(){r.setState({isPopupVisible:!1})},r.showPopupDelayed=function(){r.clearPopupTimeouts(),r.showPopupTimeout=setTimeout(r.showPopupNow,300)},r.hidePopupDelayed=function(){r.clearPopupTimeouts(),r.hidePopupTimeout=setTimeout(r.hidePopupNow,300)},r.mouseEnterHandler=function(){r.hidePopupNow(),r.clearPopupTimeouts(),r.showPopupDelayed()},r.mouseLeaveHandler=function(){r.hidePopupDelayed()},r.popupMouseLeaveHandler=function(){r.hidePopupDelayed()},r.popupMouseMoveHandler=function(){r.clearPopupTimeouts()},r.tooltipToggleHandler=function(e){e.stopPropagation();var t=r.state.isTooltipVisible;r.setState({isTooltipVisible:!t})},r.renderPopup=function(e){return A.default.createElement(x.default,{key:"popup",modelId:r.props.modelId,controls:r.props.popupControls,onMouseLeave:r.popupMouseLeaveHandler,onMouseMove:r.popupMouseMoveHandler,isKnightIconVisible:r.props.isKnightIconVisible,isKing:r.props.isKing,targetId:e,user:r.props.user})},r.renderLevelIcon=function(){var e=r.props,t=e.user,n=e.isLevelStatusTooltipVisible,a=null;if(t.isGold?a=W.USER_LEVELS.GOLD:t.isGreen?a=W.USER_LEVELS.GREEN:t.isRegular&&(a=W.USER_LEVELS.REGULAR),!a)return null;var o=(0,u.default)("level_icon_tooltip_"+t.id),i=a===W.USER_LEVELS.REGULAR?38:28;return A.default.createElement("div",{className:"level-icon-wrapper",id:o},r.renderIf(n,A.default.createElement(V.default,{targetId:o,level:a})),A.default.createElement(M.default,{img:"user-"+a,size:i}))},a=n,i(r,a)}return s(t,e),_(t,[{key:"getNextState",value:function(e,t){var n=e.currentUser,r=e.isLoggedIn,a=e.isKing,o=e.isKingStateFrozen,i=e.user,s=r&&n.isModel&&n.id!==i.id,l={isPopupEnabled:e.isPopupEnabled&&s};return i.id!==(0,y.default)(this.props.user,"id")&&(l.isPopupVisible=!1),o&&(0,g.default)(this.state.frozenKingState)&&(l.frozenKingState=a),l}},{key:"componentWillUnmount",value:function(){S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.clearPopupTimeouts()}},{key:"renderEx",value:function(e){var t=this.state.isTooltipVisible,n=(0,u.default)("username_ex_tooltip_"+e);return A.default.createElement("span",null,A.default.createElement("sup",{id:n},"ex"),A.default.createElement(k.default,{className:"icon-tooltip",isForceVisible:t,shouldPreventDefault:!1,isMobileRelative:!1,placement:"right",targetId:n},this.t("camChat.exGreenDescription")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.forceKnightIconDisplay,o=t.isAdditionIconVisible,i=t.isLevelStatusVisible,s=t.isColored,l=t.isIconVisible,c=t.isKing,f=t.isKingStateFrozen,p=t.isKnight,m=t.isKnightIconVisible,g=t.isModelIconVisible,h=t.link,E=t.parentUid,y=t.user,_=t.onClick;if((0,v.default)(y))return j.default.error("Empty user supplied in UserName component props"),null;var S=this.state,O=S.frozenKingState,P=S.isPopupEnabled,T=S.isPopupVisible,C=[],w=y.gender?[this.genderIcon]:[];y.isAdmin||y.isSupport?(C.push("admin"),w=[].concat(a(w),[this.adminIcon])):y.isModel?(C.push("model"),w=g?this.modelIcon:w):y.isGold?C.push("gold"):y.isGreen?C.push("green"):y.isGuest?C.push("guest"):C.push("regular");var N=[];(f?O:c)&&(C.push("king"),N.push(this.kingIcon)),(r||p&&m)&&N.push(this.knightIcon);var R=this.c("username",n,C,{colored:s}),M=P&&!D.BROWSER_CAPABILITIES.touch?{onMouseEnter:this.mouseEnterHandler,onMouseLeave:this.mouseLeaveHandler}:{},L=E?E+"_"+y.id:(0,u.default)("username"),k=[y.username,y.isExGreen?this.renderEx(L):null],U=(0,d.default)({onClick:_});return A.default.createElement("div",b({className:R,key:"username",id:L,onClick:_,ref:function(t){e.renderRootRef=t}},U,{"data-component-name":"UserName"}),A.default.createElement("div",{className:"username-level-wrapper"},A.default.createElement("div",{className:"username-level"},this.renderIf(i,this.renderLevelIcon),this.renderIf(h,function(){return A.default.createElement(I.Link,b({},M,h),k)},function(){return A.default.createElement("div",b({className:"username-content"},M),k)}))),A.default.createElement("div",{className:"username-icons"},this.renderIf(l,w),this.renderIf(o,N)),this.renderIf(T,this.renderPopup(L)))}},{key:"genderIcon",get:function(){var e=this.props,t=e.isGenderIconHidden,n=e.user,r=e.size;if(t)return null;var a=Math.floor(1.5*r);return A.default.createElement("div",{className:"username-role-icon gender",key:"gender"},A.default.createElement(M.default,{img:n.gender,size:a}))}},{key:"knightIcon",get:function(){var e=this.props,t=e.isCurrentUser,n=e.isMyKnight,r=e.size,a=e.user,o=this.state.isTooltipVisible,i=Math.round(.9*r),s=D.BROWSER_CAPABILITIES.touch?{onClick:this.tooltipToggleHandler}:{},l=(0,u.default)("username_knight_tooltip_"+a.id),c=void 0;return c=t?this.t("camChat.knightDescriptionMyself"):n?this.t("camChat.knightDescriptionMine"):this.t("camChat.knightDescription"),A.default.createElement("div",{className:"username-role-icon knight",key:"knight"},A.default.createElement("div",b({},s,{className:"icon-wrapper",id:l}),A.default.createElement(M.default,{img:"knight",size:i})),this.renderIf(c,function(){return A.default.createElement(k.default,{className:"icon-tooltip",isForceVisible:o,shouldPreventDefault:!1,isMobileRelative:!1,placement:"right",targetId:l},c)}))}},{key:"adminIcon",get:function(){var e=this.props,t=e.isAdminIconVisible,n=e.size;return A.default.createElement("div",{className:"username-role-icon admin",key:"admin"},t?A.default.createElement(M.default,{img:"admin",size:n}):null,A.default.createElement("span",null,this.t("admin")))}},{key:"kingIcon",get:function(){var e=this.props,t=e.size,n=e.user,r=(0,u.default)("username_king_tooltip_"+n.id),a=Math.round(1.3*t);return A.default.createElement("div",{className:"username-role-icon king",key:"king"},A.default.createElement("div",{className:"icon-wrapper",id:r},A.default.createElement(M.default,{img:"king",size:a})),A.default.createElement(k.default,{className:"icon-tooltip",placement:"right",isMobileRelative:!1,targetId:r},this.t("camChat.kingDescription")))}},{key:"modelIcon",get:function(){var e=this.props,t=e.isModelIconVisible,n=e.size;return t?A.default.createElement("div",{className:"username-role-icon model",key:"model"},A.default.createElement(M.default,{img:"webcam",size:n})):null}}]),t}(N.default);Y.propTypes={actualUser:P.default.shape(),actualUserIsKing:P.default.bool,forceKnightIconDisplay:P.default.bool,isAdminIconVisible:P.default.bool,isAdditionIconVisible:P.default.bool,isColored:P.default.bool,isCurrentUser:P.default.bool,isGenderIconHidden:P.default.bool,isIconVisible:P.default.bool,isKing:P.default.bool,isKingStateFrozen:P.default.bool,isLevelStatusVisible:P.default.bool,isLevelStatusTooltipVisible:P.default.bool,isKnight:P.default.bool,isKnightIconVisible:P.default.bool,isModelIconVisible:P.default.bool,isMyKnight:P.default.bool,isPopupEnabled:P.default.bool,link:P.default.object,modelId:P.default.number,onClick:P.default.func,parentUid:P.default.string,popupControls:P.default.array,size:P.default.number,user:P.default.object.isRequired},Y.defaultProps={onClick:p.default,isColored:!0,isAdditionIconVisible:!0,isLevelStatusVisible:!1,isLevelStatusTooltipVisible:!0,isIconVisible:!0,isKnightIconVisible:!1,size:16};var K=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=t.modelId,s=t.user,l=(0,B.getIsMyKnight)(e,s.id),u=l||i&&(0,B.getIsKnightOfModel)(e,i,s.id);return{currentUser:r,isCurrentUser:a&&r.id===s.id,isLoggedIn:a&&!o,isKnight:u,isMyKnight:l}};t.default=(0,C.connect)(K)(Y)},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.PERMANENT_NOTIFICATIONS={BROWSER_RECOMMENDATION:"browserRecommendation",GIFT_CARD:"giftCardsNotification",MOBILE_APP_NEW_FEATURES:"mobileAppNewFeaturesNotification",PAYMENT_METHODS:"newPaymentMethods",PAYMENT_METHOD_PRZELEWY:"newPaymentMethodPrzelewy24",PUSH_NOTIFICATION:"pushNotification"};t.default=r},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.autoAcceptVisitorAgreement=t.buildLocationFromUrl=t.getParams=t.getDomainsFromUrl=void 0;var a=n(14),o=r(a),i=n(6),s=r(i),l=n(140),u=r(l),c=n(106),d=r(c),f=(t.getDomainsFromUrl=function(e){var t=e.url,n=e.levels,r=t.split("/"),a=void 0;a=(0,o.default)(t,"://")?r[2]:r[0],a=a.split(":")[0];for(var i=a.split("."),s={},l=1;n>=l&&l<=i.length;l+=1)s[l]=i[i.length-l];return s},t.getParams=function(e,t){var n=function(e){try{return JSON.parse(e)}catch(t){return e}},r={};t&&(r.decoder=n);var a=(0,s.default)(e,"search","").substr(1);return u.default.parse(decodeURIComponent(a),r)});t.buildLocationFromUrl=function(e){var t=document.createElement("a");return t.href=e,t},t.autoAcceptVisitorAgreement=function(e,t,n){var r=/^(http|https):\/\/([^\/]*)(xhamster(live)?|strip(dev|chat))\.(com|local)\//,a=(0,s.default)(window,"document.referrer"),o=(0,s.default)(window,"location")?window.location.protocol+"//"+window.location.hostname+"/":"",i=o===function(e){var t=r.exec(e);return t&&t[0]?t[0]:""}(a);((function(e){return Boolean((0,s.default)(f(e,!0),"affiliateId",!1))})(e)||function(e){return r.test(e)}(a)&&!i||function(e){return e.action||e.showModal}(n))&&d.default.set("isVisitorsAgreementAccepted","1",{domain:t})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(t,n,r){var a=r.Api,o=r.ApiError;return t({type:v}),a.get("/users/"+e+"/bans").then(function(e){var n=e.bans;return t({type:E,data:{bans:n}}),(0,f.all)([t((0,m.loadList)(_(n))),t((0,m.loadMore)(b(n)))])}).catch(o,function(e){throw t({type:y,data:{error:e}}),e})}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r,o,i){var s=i.Api;return r({type:v}),s.put("/users/"+e+"/bans/users/"+t,{shouldSendMessage:n}).then(function(o){var i=o.ban;return r({type:g,data:{ban:i}}),r(n?{type:p.UPDATE,data:{relations:{canBan:a({},e+":"+t,!1)}}}:(0,p.load)([t])),null})}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r,a){var o=a.Api,i=r().auth.currentUser;return o.del("/users/"+i.id+"/bans/users",{bannedIds:e}).then(function(){return n({type:h,data:{bannedIds:e}}),t||n((0,p.load)(e)),null})}}Object.defineProperty(t,"__esModule",{value:!0}),t.unBanChatMemeber=t.banChatMemeber=t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=t.UNBAN=t.BAN=void 0;var l=n(124),u=r(l),c=n(350),d=r(c);t.load=o,t.ban=i,t.unBan=s;var f=n(20),p=n(98),m=n(37),g=t.BAN="userBans/ban",h=t.UNBAN="userBans/unban",v=t.LOAD_START="userBans/LOAD_START",E=t.LOAD_SUCCESS="userBans/LOAD_SUCCESS",y=t.LOAD_FAIL="userBans/LOAD_FAIL",b=function(e){return e.map(function(e){return e.bannedId})},_=function(e){return(0,u.default)(e.map(function(e){return e.moderatorId}))};t.banChatMemeber=(0,d.default)(i,!0),t.unBanChatMemeber=(0,d.default)(s,!0)},function(e,t,n){"use strict";function r(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=t().auth.currentUser;return e({type:m}),r.get("/users/"+o.id+"/onlineSubscriptions",{limit:u.DEFAULT_LOAD_MORE_SIZE}).then(function(t){var n=t.models,r=t.subscriptions;return e({type:d.USERS_SAVE,data:{users:n}}),e({type:g,data:{subscriptions:r}}),null}).catch(a,function(t){e({type:h,data:{error:t}})})}}function a(e,t){return function(n,r,a){var o=a.Api,i=a.ApiError,s=r(),l=s.auth.currentUser;return n({type:v}),o.put("/users/"+l.id+"/onlineSubscriptions/"+e).then(function(e){var r=e.subscription;return n({type:A,data:{subscriptions:[r],source:t}}),null}).catch(i,function(e){throw n({type:E,data:{error:e}}),e})}}function o(e,t){return function(n,r,a){var o=a.Api,i=a.ApiError,s=r().auth.currentUser;return n({type:y}),o.del("/users/"+s.id+"/onlineSubscriptions",{modelIds:e}).then(function(){return n({type:b,data:{modelIds:e,source:t}}),null}).catch(i,function(e){n({type:O,data:{error:e}})})}}function i(e,t){return function(n,r){var i=r(),s=i.profile,l=(0,p.getIsSubscribed)(i,e),d=s.user&&s.user.isEmailVerified;return n(l?o([e],t):d?a(e,t):(0,f.startWizardWithActionOnEnter)(u.MODAL_TYPES.CONFIRM_EMAIL,{description:(0,c.translate)(i,{messageId:"modelOnlineNotifications.description"})}))}}function s(e){return function(t,n,r){var a=r.Api,o=r.ApiError;return a.del("/users/onlineSubscriptions/unsubscribe/"+e).then(function(e){var n=e.model;return t({type:d.USERS_SAVE,data:{users:[n]}}),t({type:_,data:{modelIds:[n.id],model:n}}),null}).catch(o,function(e){t({type:P,data:{error:e}})})}}function l(e,t){return function(n,r,a){var o=a.Api,i=a.ApiError;return o.del("/users/"+e+"/subscription"+t).then(function(){return n({type:S,data:{modelIds:[e]}}),null}).catch(i,function(e){n({type:T,data:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_SUCCESS=t.REMOVE_FAIL_PROMO=t.REMOVE_FAIL_MAIL=t.REMOVE_FAIL=t.REMOVE_SUCCESS_PROMO=t.REMOVE_SUCCESS_MAIL=t.REMOVE_SUCCESS=t.REMOVE_START=t.ADD_FAIL=t.ADD_SUCCESS=t.ADD_START=t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0,t.load=r,t.add=a,t.remove=o,t.toggle=i,t.removeForMail=s,t.removeForPromo=l;var u=n(5),c=n(57),d=n(37),f=n(60),p=n(91),m=t.LOAD_START="subscriptions/LOAD_START",g=t.LOAD_SUCCESS="subscriptions/LOAD_SUCCESS",h=t.LOAD_FAIL="subscriptions/LOAD_FAIL",v=t.ADD_START="subscriptions/ADD_START",E=(t.ADD_SUCCESS="subscriptions/ADD_SUCCESS",t.ADD_FAIL="subscriptions/ADD_FAIL"),y=t.REMOVE_START="subscriptions/REMOVE_START",b=t.REMOVE_SUCCESS="subscriptions/REMOVE_SUCCESS",_=t.REMOVE_SUCCESS_MAIL="subscriptions/REMOVE_SUCCESS_MAIL",S=t.REMOVE_SUCCESS_PROMO="subscriptions/REMOVE_SUCCESS_PROMO",O=t.REMOVE_FAIL="subscriptions/REMOVE_FAIL",P=t.REMOVE_FAIL_MAIL="subscriptions/REMOVE_FAIL_MAIL",T=t.REMOVE_FAIL_PROMO="subscriptions/REMOVE_FAIL_PROMO",A=t.UPDATE_SUCCESS="subscriptions/UPDATE_SUCCESS"},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(t,n){((0,i.default)(e)?e:[e]).forEach(function(e){var r=e.url,a=e.id,o=e.responseType;t({type:f}),l.default.get((0,d.getStaticUrl)(n(),r)+"?v="+c.default.VERSION,{responseType:o}).then(function(e){return t({type:p,data:{id:a,content:e}}),null}).catch(function(e){t({type:m,data:{error:e}})})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.STATIC_CONTENT_TYPES=t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0;var o=n(26),i=r(o);t.load=a;var s=n(557),l=r(s),u=n(114),c=r(u),d=n(21),f=t.LOAD_START="staticContent/LOAD_START",p=t.LOAD_SUCCESS="staticContent/LOAD_SUCCESS",m=t.LOAD_FAIL="staticContent/LOAD_FAIL";t.STATIC_CONTENT_TYPES={AGREEMENT:{id:"agreement",url:"cams/components/ui/AgreementPopup/agreement.html",responseType:"text"},CAREERS_BE:{id:"careersBe",url:"common/components/pages/static/careers.be.html",responseType:"text"},CAREERS_FE:{id:"careersFe",url:"common/components/pages/static/careers.fe.html",responseType:"text"},CAREERS_MB:{id:"careersMb",url:"common/components/pages/static/careers.mb.html",responseType:"text"},CAREERS_UX:{id:"careersUx",url:"common/components/pages/static/careers.ux.html",responseType:"text"},CHILD_PROTECTION:{id:"2257",url:"common/components/pages/static/2257.html",responseType:"text"},COPYRIGHT:{id:"copyright",url:"common/components/pages/static/copyright.html",responseType:"text"},PRIVACY:{id:"privacy",url:"common/components/pages/static/privacy.html",responseType:"text"},TERMS:{id:"privacy",url:"common/components/pages/static/terms.html",responseType:"text"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),o=r(a),i=n(1),s=r(i),l=n(0),u=r(l),c=n(2),d=n(617),f=r(d),p=function(e,t,n){var r=n.i18n.trans,a=t.isModel?"/model/"+t.username:"/user/"+t.username,i=[{label:r("userMenu.myProfile"),route:a,isEnabled:!0},{label:r("userMenu.myMessages"),route:"/messages",isEnabled:!0},{label:r("userMenu.myFriends"),route:"/friends",isEnabled:!0},{label:r("userMenu.myKnights"),route:"/model/knights",isEnabled:t.isModel},{label:r("userMenu.mySubscriptions"),route:"/followings",isEnabled:!0},{label:r("userMenu.settingsAndPrivacy"),route:"/settings",isEnabled:!0},{label:r("userMenu.documents"),route:"/model/documents/add",isEnabled:t.isModel},{label:r("userMenu.mobileApp"),route:"/mobile",isEnabled:t.isModel},{label:r("userMenu.bannedUsers"),route:"/model/bans",isEnabled:t.isModel}];return(0,o.default)(i,"isEnabled")},m=function(e,t){var n=(e.activeRoute,e.currentUser);return e.isLoggedIn?u.default.createElement(f.default,{items:p(0,n,t),"data-component-name":"ProfileHeaderSub"}):null};m.propTypes={currentUser:s.default.object,isLoggedIn:s.default.bool,activeRoute:s.default.string},m.contextTypes={i18n:s.default.object};var g=function(e){var t=e.auth;return{currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,c.connect)(g)(m)},,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.getIsH264Supported=t.updateRemoteSDP=t.isWebRTCSupported=t.getIsVideoCodecsAvailable=t.AVAILABLE_CODECS=t.RTCSessionDescription=t.RTCIceCandidate=t.RTCPeerConnection=t.RESOLUTION_LIST=t.PROFILE_LIST=t.WEBRTC_CONNECTION_EVENTS=t.PEER_CONNECTION_SIGNALING_STATE=t.PEER_CONNECTION_STATE=void 0;var o=n(142),i=r(o),s=n(84),l=r(s);n(848);var u=n(29),c=r(u),d=(t.PEER_CONNECTION_STATE={NEW:"new",CHECKING:"checking",CONNECTED:"connected",COMPLETED:"completed",FAILED:"failed",DISCONNECTED:"disconnected",CLOSED:"closed"},t.PEER_CONNECTION_SIGNALING_STATE={HAVE_LOCAL_OFFER:"have-local-offer"},t.WEBRTC_CONNECTION_EVENTS={BROADCASTING:"BROADCASTING",CLOSE_BROADCASTING:"CLOSE_BROADCASTING",CLOSE_PLAYING:"CLOSE_PLAYING",ERROR_BROADCASTING:"ERROR_BROADCASTING",ERROR_PLAYING:"ERROR_PLAYING",INIT_BROADCASTING:"INIT_BROADCASTING",INIT_PLAYING:"INIT_PLAYING",PLAYING:"PLAYING"},t.PROFILE_LIST={HD:"HD",WIDESCREEN:"WIDESCREEN",HIGH:"HIGH",LOW:"LOW"},t.RESOLUTION_LIST={HD:{width:1280,height:720,isEnabled:!1,isAvailable:!1},WIDESCREEN:{width:854,height:480,isEnabled:!0,isAvailable:!1},HIGH:{width:640,height:480,isEnabled:!0,isAvailable:!0},LOW:{width:320,height:240,isEnabled:!0,isAvailable:!0}},t.RTCPeerConnection="undefined"!=typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)),f=t.RTCIceCandidate="undefined"!=typeof window&&(window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate),p=t.RTCSessionDescription="undefined"!=typeof window&&(window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription),m=t.AVAILABLE_CODECS=['video/mp4; codecs="avc1.42e01e"','video/mp4; codecs="avc1.42e01f"','video/mp4; codecs="avc1.42001f"','video/mp4; codecs="avc1.420020"','video/mp4; codecs="avc1.420032"','video/mp4; codecs="avc1.640032"'],g=t.getIsVideoCodecsAvailable=function(){return"undefined"!=typeof window&&(0,l.default)(window,"MediaSource")&&(0,i.default)(m,function(e){return MediaSource.isTypeSupported(e)})},h=t.isWebRTCSupported=d&&f&&p&&g(),v=(t.updateRemoteSDP=function(e){var t=e.sdp;return{type:e.type,sdp:t.replace(/a=fmtp:97 .*\r\n/,"a=fmtp:97 packetization-mode=1;profile-level-id=42e01f\r\n").replace(/a=framerate.*\r\n/,"").replace(/a=framesize:.*\r\n/,"")}},function e(){var t=this;if(a(this,e),this.isSupported=null,c.default.info("H264Codec.getIsH264Supported()"),!h)return void(this.isSupported=!1);var n=new d({iceServers:[]},{optional:[{enableDtlsSrtp:!0},{DtlsSrtpKeyAgreement:!0},{googSuspendBelowMinBitrate:!0},{googImprovedWifiBwe:!0}]}),r={offerToReceiveVideo:1,offerToReceiveAudio:1,voiceActivityDetection:!0,iceRestart:!1};n.addTransceiver&&(n.addTransceiver("audio"),n.addTransceiver("video")),n.createOffer(r).then(function(e){var r=e.sdp;c.default.info("H264Codec.getIsH264Supported() success"),t.isSupported=/H264\/90000/.test(r),n.close()}).catch(function(){c.default.info("H264Codec.getIsH264Supported() error"),t.isSupported=!1,n.close()})}),E=new v;t.getIsH264Supported=function(){return null===E.isSupported&&c.default.error("H264Codec.getIsH264Supported() was called before the support check"),E.isSupported}},,,,,,function(e,t,n){"use strict";function r(e,t){return function(n){return n({type:O,data:{albumId:e,userId:t}})}}function a(e,t){return function(n,r,a){return a.Api.get("/users/"+t+"/albums/"+e).then(function(e){var r=e.album;n({type:T,data:{album:r,userId:t}})})}}function o(e,t){return function(n){return n({type:S,data:{albumId:e,userId:t}})}}function i(e){return function(t,n,r){return r.Api.get("/users/"+e+"/albums").then(function(n){t({type:b,data:c({userId:e},n)})})}}function s(e,t){return function(n,r){n({type:P,data:{}});var a=r(),o=(0,v.getUserAlbumById)(a,{albumId:e,userId:t}),i=o.cost,s=(0,E.getUserById)(a,t);return n((0,g.startWizardWithActionOnEnter)(m.MODAL_TYPES.PURCHASE_TOKENS,{component:"SignUp",action:{backgroundImage:s.avatarUrl,i18nParams:{choiceParameter:"tokensAmount",parameters:{tokensAmount:i},elements:{tokensAmount:i}},type:"albumAccessForPaid",user:s,shouldBypassActionPrefix:!0},subType:"BuyAlbum",triggerSource:p.AUTH_TRIGGER_SOURCES.ALBUM_FOR_PAYING,albumCost:i,albumId:o.id,user:s}))}}function l(e,t){return function(n,r,a){var o=a.Api,i=r(),l=i.auth,u=l.currentUser,c=l.isLoggedIn,E=i.profile.user;if(!c)return n(s(e,t));var y=(0,v.getUserAlbumById)(i,{albumId:e,userId:t});if(!y)return(0,d.reject)("Album with id = "+e+" not found on user with id = "+t);var b=y.cost,S=E.tokens;return!S||S<b?(n((0,g.startWizardWithActionOnEnter)(m.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:p.BUY_TOKENS_SOURCES.ALBUM_FOR_PAYING})),(0,d.resolve)()):o.put("/users/"+t+"/albums/"+e+"/buyers/"+u.id).then(function(r){var a=r.album;n({type:T,data:{album:a,userId:t}}),n((0,h.load)(e,t)),n({type:_,data:{albumId:e,userId:t}})}).catch(function(e){n((0,f.error)(e.message,"buyAlbum"))})}}function u(){return{type:y,data:{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE=t.START_WIZARD=t.SELECT=t.REMOVE=t.PURCHASE_ALBUM_SUCCESS=t.LOAD_SUCCESS=t.LOAD_START=t.LOAD_FAIL=t.END_WIZARD=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.select=r,t.update=a,t.remove=o,t.load=i,t.startWizard=s,t.buy=l,t.endWizard=u;var d=n(20),f=n(28),p=n(51),m=n(5),g=n(60),h=n(189),v=n(165),E=n(44),y=t.END_WIZARD="userAlbums/END_WIZARD",b=(t.LOAD_FAIL="userAlbums/LOAD_FAIL",t.LOAD_START="userAlbums/LOAD_START",t.LOAD_SUCCESS="userAlbums/LOAD_SUCCESS"),_=t.PURCHASE_ALBUM_SUCCESS="userAlbums/PURCHASE_ALBUM_SUCCESS",S=t.REMOVE="userAlbums/REMOVE",O=t.SELECT="userAlbums/SELECT",P=t.START_WIZARD="userAlbums/START_WIZARD",T=t.UPDATE="userAlbums/UPDATE"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getIsPromoCampaignActive=t.getChosenPurchaseData=t.getInitialOptionsCombo=t.getPreselectedPackageCombo=t.getPreselectedMethodCombo=t.getPromoPackageCombo=t.getSubscriptionPackageCombo=t.getChosenBilling=t.getSortedBillings=t.getChosenPackage=t.getVisiblePackages=t.getShouldShowCardDetailsPromo=t.getShouldShowAdditionalPackagesToggler=t.getChosenMethod=t.getSortedMethods=t.getIsPreferredPackageHidden=t.findPromoPackage=t.getIsGoldSubscription=t.getPreselectedPackageCriteria=t.getPreselectedMethodName=t.getIsMethodPreselected=t.getIsSubscriptionPreselected=t.getIsPromoPreselected=t.getIsPackagePreselected=void 0;var a=n(46),o=r(a),i=n(78),s=r(i),l=n(14),u=r(l),c=n(95),d=r(c),f=n(13),p=r(f),m=n(6),g=r(m),h=n(116),v=r(h),E=n(48),y=r(E),b=n(47),_=r(b),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O=n(18),P=r(O),T=n(32),A=n(88),C=(t.getIsPackagePreselected=function(e){var t=e.tokens;return Boolean(t.preselectedPackageCriteria)},t.getIsPromoPreselected=function(e){return e.tokens.isPromoPreselected},t.getIsSubscriptionPreselected=function(e){return e.tokens.isSubscriptionPreselected}),I=(t.getIsMethodPreselected=function(e){var t=e.tokens;return Boolean(t.preselectedMethod.methodName)},t.getPreselectedMethodName=function(e){return e.tokens.preselectedMethod.methodName},t.getPreselectedPackageCriteria=function(e){return e.tokens.preselectedPackageCriteria},function(e){return e.tokens.options}),w=function(e){return e.tokens.methodName},N=function(e){return e.tokens.billingName},R=function(e){return e.tokens.isAdditionalPackagesShown},M=function(e){return e.tokens.currentPackageTokens},L=function(e){return e.tokens.currentPackageType},k=function(e){return e.tokens.currentPackageOrder},D=function(e){return e.auth.isLoggedIn},U=function(e){return e.config.data.isCardDetailsPromoAvailable},j=function(e){return e.profile.user},F=t.getIsGoldSubscription=function(e){return(0,u.default)([A.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION,A.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION_ONE_MONTH],e)},B=function(e){return(0,d.default)(e)?P.default.OrderedMap(e).sortBy(function(e,t){return Number(t)}).toArray():e},H=function(e,t){var n=B(e);return(0,y.default)(n,{name:t})||(0,y.default)(n,{isDefault:!0})||(0,v.default)(n)},V=function(e,t,n){var r=B(e),a=(0,y.default)(r,function(e){var n=e.tokensSum,r=e.purchaseType,a=e.order,o=n===t.tokensSum;return t.order?a===t.order:t.purchaseType?r===t.purchaseType&&o:o});return n?a:a||(0,y.default)(r,{isBasic:!0,isDefault:!0})||(0,y.default)(r,{purchaseType:A.PACKAGE_PURCHASE_TYPES.TOKENS})},G=function(e){return(0,y.default)(e,{purchaseType:A.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION})},x=t.findPromoPackage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isGold,r=B(e),a=(0,y.default)(r,{isPromo:!0}),i=(0,g.default)(a,"promoCampaign"),s=(0,_.default)(r,{promoCampaign:i});return i&&1!==s.length&&n?(0,o.default)(s,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.tokensExtra>e.tokensExtra?t:e},a):a},W=function(e,t,n){var r=B(n);return(0,y.default)(r,{name:e})||(0,y.default)(r,{isDefault:!0})||(0,v.default)(r)},Y=(t.getIsPreferredPackageHidden=function(e){var t=e.methods,n=e.preferred,r=B(t),a=n.methodName,o=n.tokensSum;if(!a||!o||0===r.length)return!1;var i=r.find(function(e){return e.name===a});if(!i||!i.packages||0===i.packages.length||(0,p.default)(i.packages))return!1;var s=V(i.packages,{tokensSum:o});return!!s&&!1===s.isBasic},t.getSortedMethods=(0,T.createSelector)([I],function(e){return B(e.methods)})),K=t.getChosenMethod=(0,T.createSelector)([Y,w],function(e,t){return H(e,t)}),q=t.getShouldShowAdditionalPackagesToggler=(0,T.createSelector)([K],function(e){return Object.values(e.packages).some(function(e){return!e.isBasic})}),z=function(e){return(0,s.default)(e,function(e,t){return S({},e,{order:t})})},X=t.getShouldShowCardDetailsPromo=(0,T.createSelector)([D,U,j],function(e,t,n){var r=!e||n.isRegular&&!n.isExGreen;return t&&r}),Z=t.getVisiblePackages=(0,T.createSelector)([K,q,R,C,X],function(e,t,n,r,a){var o=z(e.packages),i=B(o),s=function(e){var t=e.isHidden,n=e.purchaseType;return r?F(n)||!t:n===A.PACKAGE_PURCHASE_TYPES.CARD_VERIFICATION?a:!t};return!t||n?(0,_.default)(i,s):(0,_.default)(i,function(e){return s(e)&&e.isBasic})}),Q=t.getChosenPackage=(0,T.createSelector)([Z,M,L,k],function(e,t,n,r){var a=n,o=void 0;return o=F(a)?null:t,V(e,{tokensSum:o,purchaseType:a,order:r})}),J=t.getSortedBillings=(0,T.createSelector)([Q],function(e){return B(e.billings)}),$=t.getChosenBilling=(0,T.createSelector)([J,N],function(e,t){return W(t,0,e)});t.getSubscriptionPackageCombo=function(e){var t=e.methods,n=e.preferred,r=n.methodName,a=n.billingName,o=H(t,r),i=G(o.packages);return i?{method:o,packageData:i,billing:W(a,0,i.billings)}:(o=H(t,"card"),i=G(o.packages),{method:o,packageData:i,billing:W(a,0,i.billings)})},t.getPromoPackageCombo=function(e){var t=e.methods,n=e.preferred,r=n.methodName,a=n.billingName,o=n.tokensSum,i=n.isGold,s=H(t,"card"),l=H(t,r),u=[{method:l,packageData:x(l.packages,{isGold:i})},{method:s,packageData:x(s.packages,{isGold:i})},{method:l,packageData:V(l.packages,{tokensSum:o})},{method:s,packageData:V(s.packages,{tokensSum:o})}],c=(0,y.default)(u,"packageData"),d=c.method,f=c.packageData;return{method:d,packageData:f,billing:W(a,0,f.billings)}},t.getPreselectedMethodCombo=function(e){var t=e.methods,n=e.preferred,r=e.preselectedMethodName,a=n.tokensSum,o=n.billingName,i=H(t,r),s=V(i.packages,{tokensSum:a});return{method:i,packageData:s,billing:W(o,0,s.billings)}},t.getPreselectedPackageCombo=function(e){var t=e.methods,n=e.preferred,r=e.criteria,a=n.methodName,o=n.billingName,i=H(t,a),s=H(t,"card"),l=[{method:i,packageData:V(i.packages,r,!0)},{method:s,packageData:V(s.packages,r,!0)},{method:i,packageData:V(s.packages,r)}],u=(0,y.default)(l,"packageData"),c=u.method,d=u.packageData;return{method:c,packageData:d,billing:W(o,0,d.billings)}},t.getInitialOptionsCombo=function(e){var t=e.methods,n=e.preferred,r=n.methodName,a=n.tokensSum,o=n.billingName,i=r||"card",s=H(t,i),l=V(s.packages,{tokensSum:a});return{method:s,packageData:l,billing:W(o,0,l.billings)}},t.getChosenPurchaseData=(0,T.createSelector)([K,Q,$],function(e,t,n){return{chosenMethod:e,chosenPackage:t,chosenBilling:n}}),t.getIsPromoCampaignActive=function(e,t){return e.tokens.options.activePromoCampaigns.indexOf(t)>-1}},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e,t,n){var r=n.Api,a=t().auth.currentUser;return r.get("/users/"+a.id+"/notifications").then(function(t){var n=t.canBan,r=t.friendships,a=t.modelOnline,o=t.notifications,i=t.privateMessages,s=t.unreadCount,l=t.users;return(0,g.default)(l)||e({type:y.USERS_SAVE,data:{users:l}}),(0,g.default)(i)||e({type:S.LOAD_SUCCESS,data:{messages:i}}),(0,g.default)(r)||e({type:_.LOAD_SUCCESS,data:{friendships:r}}),(0,g.default)(o)||e({type:A,data:{notifications:o,unreadCount:s}}),(0,g.default)(n)||e((0,O.update)({canBan:n})),(0,g.default)(a)||e({type:b.LOAD_SUCCESS,data:{subscriptions:a}}),null})}}function o(e){var t=e.friendship,n=e.modelOnline,r=e.notification,a=e.privateMessage,o=e.user,i=e.canBan;return function(e){o&&e({type:y.USERS_SAVE,data:{users:[o]}}),a&&e({type:S.LOAD_SUCCESS,data:{messages:[a]}}),t&&e({type:_.LOAD_SUCCESS,data:{friendships:[t]}}),i&&e((0,O.update)({canBan:i})),(0,g.default)(n)||e({type:b.ADD_SUCCESS,data:{subscriptions:[n]}}),e({type:T,data:{notification:r}})}}function i(e){return function(t){t({type:I,data:{notificationId:e}})}}function s(e){return function(t,n,r){var o=r.Api,i=n().auth.currentUser;return o.del("/users/"+i.id+"/notifications",{notificationIds:e}).then(function(){return t(a())})}}function l(e){return function(t,n){var r=(0,P.getNotificationsIdsFromCounterpart)(n(),e);return r.length?t(s(r)):(0,E.resolve)()}}function u(){return function(e,t,n){var r=n.Api,o=t().auth.currentUser;return r.del("/users/"+o.id+"/notifications/all").then(function(){return e(a())})}}function c(e){var t=e.notifications;return function(e){e({type:N,data:{isEmailEnabled:t.email,isPushEnabled:t.push}})}}function d(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser,s=o.personalNotifications,l=s.isPushEnabled,u=s.isEmailEnabled,c={push:(0,v.default)(e,"isPushEnabled",l),email:(0,v.default)(e,"isEmailEnabled",u)};return a.post("/users/"+i.id+"/notifications/settings",c).then(function(){t({type:N,data:e})})}}function f(){return function(e,t,n){var r=n.Api,a=t().auth.currentUser;return r.put("/users/"+a.id+"/notifications/all").then(function(){return e({type:C}),null})}}function p(e){return function(t,n){var r=n(),a=(0,P.getNotificationsIdsFromCounterpart)(r,e);t({type:w,data:{notificationsIds:a}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_NOTIFICATIONS_SETTINGS_UPDATE=t.PERSONAL_NOTIFICATIONS_REMOVE_PM_NOTIFICATIONS=t.PERSONAL_NOTIFICATIONS_REMOVE=t.PERSONAL_NOTIFICATIONS_READ_ALL=t.PERSONAL_NOTIFICATIONS_LOAD_SUCCESS=t.PERSONAL_NOTIFICATIONS_APPEND=void 0;var m=n(13),g=r(m),h=n(6),v=r(h);t.loadNotifications=a,t.addNotification=o,t.removeNotification=i,t.deleteNotifications=s,t.deleteNotificationsFromSender=l,t.deleteAllNotifications=u,t.applyNotificationSettings=c,t.updateNotificationSettings=d,t.readAllNotifications=f,t.removePrivateMessagesNotificationsFromCounterpart=p;var E=n(20),y=n(37),b=n(131),_=n(117),S=n(197),O=n(98),P=n(234),T=t.PERSONAL_NOTIFICATIONS_APPEND="personalNotifications/APPEND",A=t.PERSONAL_NOTIFICATIONS_LOAD_SUCCESS="personalNotifications/LOAD_SUCCESS",C=t.PERSONAL_NOTIFICATIONS_READ_ALL="personalNotifications/READ_ALL",I=t.PERSONAL_NOTIFICATIONS_REMOVE="personalNotifications/REMOVE",w=t.PERSONAL_NOTIFICATIONS_REMOVE_PM_NOTIFICATIONS="personalNotifications/REMOVE_PM_NOTIFICATIONS",N=t.PERSONAL_NOTIFICATIONS_SETTINGS_UPDATE="personalNotifications/PERSONAL_NOTIFICATIONS_SETTINGS_UPDATE"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=r(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),l=r(s),u=n(0),c=r(u),d=n(2),f=n(1121),p=n(68),m=function(e){var t=e.canonicalUrl,n=e.currentLang,r=e.description,a=e.langLinks,s=e.robots,l=e.title,u=e.titleTemplate;return c.default.createElement(f.Helmet,i({},u?{titleTemplate:u}:{},{"data-component-name":"StripHelmet"}),c.default.createElement("html",{lang:n}),l&&c.default.createElement("title",null,l),r&&c.default.createElement("meta",{name:"description",content:r}),s&&"all"!==s&&c.default.createElement("meta",{name:"robots",content:s}),c.default.createElement("link",{rel:"canonical",href:t}),(0,o.default)(a,function(e){return c.default.createElement("link",{rel:"alternate",href:e.href,hrefLang:e.hreflang,key:e.hreflang})}))};m.propTypes={canonicalUrl:l.default.string,currentLang:l.default.string,description:l.default.string,langLinks:l.default.arrayOf(l.default.object),robots:l.default.string,title:l.default.string,titleTemplate:l.default.string},m.defaultProps={description:null,robots:null,title:null,titleTemplate:null,currentLang:"en",canonicalUrl:null,langLinks:[]};var g=function(e,t){var n=(0,p.getCanonicalUrl)(e),r=(0,p.getLangLinks)(e);return{canonicalUrl:n,currentLang:(0,p.getCurrentLang)(e),description:t.description,langLinks:r,robots:t.robots,title:t.title,titleTemplate:t.titleTemplate}};t.default=(0,d.connect)(g)(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(160),o=r(a),i=n(0),s=r(i),l=n(1),u=r(l),c=n(39),d=r(c),f=n(67),p=function(e,t){var n=e.messageId,r=e.className,a=e.children,i=t.i18n.trans,l=(0,o.default)("help_tooltip_"),u=n||a?s.default.createElement(d.default,{isMobileRelative:!1,placement:"top",targetId:l},i(n),a):null;return s.default.createElement("span",{className:(0,f.classNames)("help-tooltip",r),id:l,"data-component-name":"HelpTooltip"},"?",u)};p.propTypes={className:u.default.string,messageId:u.default.string,children:u.default.element},p.contextTypes={i18n:u.default.object},t.default=p},,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(46),s=r(i),l=n(267),u=r(l),c=n(33),d=r(c),f=n(30),p=r(f),m=n(838),g=r(m),h=n(78),v=r(h),E=n(11),y=r(E),b=n(490),_=r(b),S=n(69),O=r(S),P=n(6),T=r(P),A=n(220),C=r(A),I=n(96),w=r(I),N=n(47),R=r(N),M=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=n(140),D=r(k),U=n(20),j=r(U),F=n(15),B=r(F),H=n(54),V=n(28),G=n(5),x=n(867),W=n(530),Y=n(348),K=n(57),q=500,z="/api/front",X="/composite",Z=function(e){return{json:"application/json",multipart:null}[e]},Q=function(e,t,n,r,a){var o=function(){return n===X?n+"?requests="+(0,y.default)(r.requests,"url").join(",").replace("/front/",""):n},i={json:function(){var t=e===G.API_METHODS.GET,i=void 0,s=void 0;if(t){var l=D.default.stringify(r);i=n+"?"+l,s=null}else s=JSON.stringify(L({},r,a)),i=o();return{requestData:s,requestPath:i}},multipart:function(){var e=new FormData;return(0,w.default)(L({},r,a),function(t,n){return e.append(n,t)}),{requestData:e,requestPath:n}}};return i[t]?i[t]():i[G.DEFAULT_REQUEST_TYPE]()},J=(0,x.bindLoggerMethods)("Api"),$=function(){function e(){var t=this;o(this,e),this.onBeforeParse=null,this.isLocked=!1,this.requestQueue=[],this.pendingRequests=[],this.csrfParams={csrfTimestamp:null,csrfNotifyTimestamp:null,csrfToken:null},this.addRequest=function(e){t.requestQueue.push(e),t.sendRequestsFromQueue()},this.sendRequestsFromQueue=function(){t.requestQueue=(0,R.default)(t.requestQueue,function(e,n){var r=(0,T.default)(e,"options.waitForAllToComplete");return!!(t.isLocked||r&&n>0)||(t.processRequest(e),!1)})},this.getIsJsonResponseTypeSupported=(0,g.default)(function(){var e=new XMLHttpRequest;try{e.responseType="json"}catch(e){return!1}return!0}),this.openXhr=function(e,n){var r=(e.MethodLogger,n.contentType),a=n.method,o=n.options,i=n.path,s=new XMLHttpRequest,l=o.timeout,u=o.upload,c=o.xhrAbortProvider;return s.open(a,i),u&&(0,C.default)(u,function(e,t){s.upload.addEventListener(t,e)}),(0,O.default)(c)&&c(s.abort.bind(s)),l&&(s.timeout=l),r&&s.setRequestHeader("Content-Type",r),a===G.API_METHODS.GET&&(s.setRequestHeader("Cache-Control","no-cache"),s.setRequestHeader("Pragma","no-cache")),t.getIsJsonResponseTypeSupported()&&(s.responseType="json"),s},this.getParsedResponse=function(e,t){var n=e.MethodLogger;if("string"!=typeof t||""===t)return t;var r=void 0,a=void 0;try{r=G.BROWSER_CAPABILITIES.ucbrowser&&!t?{}:JSON.parse(t)}catch(o){a=o}if(void 0!==a){var o=new H.ServerError("Failed to parse response",null,q,{error:a,details:r,status:q});return n.error({error:o}),o}return r||"Unknown Error"},this.ajaxRequest=function(e){var n=e.context,r=e.method,a=e.path,o=e.data,i=void 0===o?null:o,s=e.options,l=void 0===s?{}:s,u={dataType:G.DEFAULT_REQUEST_TYPE,isDefaultErrorHandlerEnabled:!0},c=L({},u,l),f=c.dataType,p=n.requestId,m=n.apiMethod,g=n.startTime,h=J("ajaxRequest",{prefix:"["+p+"]",postfix:'"'+r+'": "'+a+'"'});h.info('type: "'+f+'"');var v=t.csrfParams,E=L({},i,{uniq:(0,Y.getRandomLowerString)()}),y=Q(r,f,a,E,v),b=y.requestData,_=y.requestPath,S=t.openXhr({MethodLogger:h},{method:r,options:l,path:l.ignorePrefix?_:""+z+_,contentType:Z(f)}),O=new j.default(function(e,n){var a=function(){var e=t.store.getState(),a=new H.NetworkError((0,K.translate)(e,{messageId:"errors.networkError"}),{xhr:S,method:r});h.warn({error:a}),n(a)};S.onerror=a,S.ontimeout=a,S.onload=function(){t.processResponse({MethodLogger:h,apiMethod:m,requestPath:_,options:l},{resolve:e,reject:n},(0,d.default)(S,["status","statusText","response"]))}});return S.send(b),t.handleResponseErrors({method:r,options:l},O).finally(function(){var e=t.csrfParams.csrfNotifyTimestamp,n=Date.now()-g;if(e&&(0,B.default)().isAfter(e)){var r=t.store.getState();t.errorHeaderNotification({message:(0,K.translate)(r,{messageId:"errors.csrfTokenExpired"})},G.NETWORK_ERROR_HEADER_NOTIFICATION_TIMEOUT)}h.info("has completed in "+n+"ms")})},this.processCompositeResponse=function(e,n,r){var a=e.MethodLogger,o=e.options,i=n.resolve,s=(0,v.default)((0,_.default)((0,R.default)(r,"method"),"id"),function(e){var n=new j.default(function(n,r){t.processResponse({apiMethod:e.method,MethodLogger:a,options:o},{resolve:n,reject:r},(0,d.default)(e,["id","status","response"]))});return t.handleResponseErrors({method:e.method,options:o},n).reflect()});j.default.props(s).then(function(e){var t=(0,v.default)((0,u.default)(e,function(e){return e&&e.isFulfilled()}),function(e){return e.value()}),n=(0,v.default)((0,u.default)(e,function(e){return e&&e.isRejected()}),function(e){return e.reason()});i({data:t,errors:n})})},this.processResponse=function(e,n,r){var a=e.MethodLogger,o=e.apiMethod,i=e.requestPath,s=e.options,l=n.resolve,u=n.reject,c=r.response,d=r.status,f=(r.id,r.statusText),p=t.getParsedResponse({MethodLogger:a},c);if(t.onBeforeParse&&t.onBeforeParse(o,i,d,p),p instanceof Error)return void u(p);p&&p.csrfToken&&t.updateCsrfParams(p);var m="COMPOSITE"===o;if((0,W.getIsSuccessStatus)(d))m?t.processCompositeResponse({MethodLogger:a,options:s},{resolve:l},p):(a.info("RESPONSE:",d,":",p),l(p));else{var g=(0,T.default)(p,"error"),h=(0,T.default)(p,"data"),v=(0,T.default)(h,"isCsrfError",!1),E={url:i,status:d,name:f,message:g,data:h,isCsrfError:v},y=void 0;if((0,W.getIsServerErrorStatus)(d))y=new H.ServerError(g,h,d,E);else if(v)y=new H.ApiError("CSRF error",h,d,E),setTimeout(function(){return location.reload()},1e3);else{var b=t.store.getState(),_=(0,W.getIsEntityTooLargeErrorStatus)(d)?(0,K.translate)(b,{messageId:"errors.entityTooLargeError"}):g;y=new H.ApiError(_,h,d,E)}a.error(y),u(y)}},this.handleResponseErrors=function(e,n){var r=e.method,a=e.options;return!1===(0,T.default)(a,"isDefaultErrorHandlerEnabled")?n:n.catch(H.NetworkError,function(e){throw"GET"===r||a.preventNetworkErrorNotification||t.errorHeaderNotification(e,G.NETWORK_ERROR_HEADER_NOTIFICATION_TIMEOUT),e}).catch(H.ServerError,function(e){throw a.preventServerErrorNotification||t.errorHeaderNotification(e),e})},this.processRequest=function(e){var n=e.resolveRequest,r=e.context,a=e.method,o=e.path,i=e.data,s=e.options,l=s&&s.lock;l&&(t.isLocked=!0);var u=L({},r,{startTime:Date.now(),requestId:(0,Y.getRandomLowerString)(10)});J("request",{prefix:"["+u.requestId+"]",postfix:'"'+a+'": "'+o+'"'}).info("REQUEST:",{method:a,path:o,data:i,options:s,DEV_PARAMS:G.DEV_PARAMS}),n(t.ajaxRequest({context:u,data:i,method:a,options:s,path:o}).finally(function(){l&&(t.isLocked=!1),t.sendRequestsFromQueue()}))},this.errorHeaderNotification=function(e){var n=e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.DEFAULT_ERROR_HEADER_NOTIFICATION_TIMEOUT;t.store.dispatch((0,V.error)(n,"api",{timeout:r}))},Object.assign(this,(0,s.default)(G.API_METHODS,function(e,n,r){return L({},e,a({},r.toLowerCase(),function(e,a,o){return new j.default(function(i){var s={apiMethod:r};t.addRequest({resolveRequest:i,context:s,method:n,path:e,data:a,options:o})})}))},{})),(0,O.default)(this.composite)&&(this.composite=(0,p.default)(this.composite,X))}return M(e,[{key:"bindStore",value:function(e){this.store=e}},{key:"setBeforeParse",value:function(e){this.onBeforeParse=e}},{key:"updateCsrfParams",value:function(e){var t=e.csrfToken,n=e.csrfTimestamp,r=e.csrfNotifyTimestamp;this.csrfParams={csrfToken:t,csrfTimestamp:n,csrfNotifyTimestamp:r}}},{key:"getCsrfParams",value:function(){return this.csrfParams}}]),e}(),ee=new $;t.default=ee},,function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n,r){var l=r.Api,u=r.ApiError,c=n(),d=c.availableSettings.data;return!e&&d?(0,a.resolve)(d):(t({type:o}),l.get("/users/availableSettings",null).then(function(e){return t({type:i,data:{availableSettings:e}}),null}).catch(u,function(e){t({type:s,data:{error:e}})}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0,t.load=r;var a=n(20),o=t.LOAD_START="availableSettings/LOAD_START",i=t.LOAD_SUCCESS="availableSettings/LOAD_SUCCESS",s=t.LOAD_FAIL="availableSettings/LOAD_FAIL"},function(e,t,n){"use strict";function r(e){return function(t,n,r){var a=r.Api,o=r.ApiError;return t({type:l}),a.get("/models/"+e+"/knights").then(function(n){var r=n.userIds;return t({type:u,data:{userIds:r,modelId:e}}),t((0,s.loadList)(r)),null}).catch(o,function(e){t({type:c,data:{error:e}})})}}function a(e){return function(t,n,r){var a=r.Api,o=r.ApiError,i=n().auth.currentUser;return a.put("/models/"+i.id+"/knights/"+e).catch(o,function(e){t({type:d,data:{error:e}})})}}function o(e){return function(t,n,r){var a=r.Api,o=r.ApiError,i=n().auth.currentUser;return a.del("/models/"+i.id+"/knights/"+e).catch(o,function(e){t({type:f,data:{error:e}})})}}function i(e){return function(t,n,a){var o=a.Api,i=a.ApiError,s=n().auth.currentUser;return o.del("/models/"+s.id+"/knights/",{knightIds:e}).then(function(){return t(r(s.id))}).catch(i,function(e){t({type:f,data:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.DELETE_FAIL=t.DELETE=t.ADD_FAIL=t.ADD=t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0,t.load=r,t.add=a,t.remove=o,t.removeMany=i;var s=n(37),l=t.LOAD_START="modelKnights/LOAD_START",u=t.LOAD_SUCCESS="modelKnights/LOAD_SUCCESS",c=t.LOAD_FAIL="modelKnights/LOAD_FAIL",d=(t.ADD="modelKnights/ADD",t.ADD_FAIL="modelKnights/ADD_FAIL"),f=(t.DELETE="modelKnights/DELETE",t.DELETE_FAIL="modelKnights/DELETE_FAIL")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCanAddKnight=t.getIsMyKnight=t.getIsKnightOfModel=t.getKnightsOf=t.createModelKnightsSelector=t.getMyKnights=void 0;var o=n(50),i=r(o),s=n(6),l=r(s),u=n(18),c=n(32),d=n(16),f=n(12),p=function(e){return e.auth.currentUser},m=function(e){return e.modelKnights.collection},g=function(e){return e.users.collection},h=(t.getMyKnights=(0,c.createSelector)([p,m,g],function(e,t,n){if(!e||0===t.size)return(0,u.Seq)();var r=(0,d.findById)(t,e.id),o=r&&r.userIds?[].concat(a(r.userIds)).reverse():[];return r?(0,d.findBySortedIds)(n,o).valueSeq():(0,u.Seq)()}),t.createModelKnightsSelector=function(e){var t=function(t,n){return(0,l.default)(n,e)};return(0,c.createSelector)([t,m,g],function(e,t,n){var r=(0,i.default)(e)?e:(0,d.findFirst)(n,{username:e},null,!1);if(!r||0===t.size)return(0,u.Seq)();var a=(0,d.findById)(t,r.id);return a?(0,d.find)(n,{id:a.userIds}).valueSeq():(0,u.Seq)()})},t.getKnightsOf=function(e,t){return(0,l.default)((0,d.findById)(e.modelKnights.collection,t),"userIds",[])}),v=(t.getIsKnightOfModel=function(e,t,n){return h(e,t).indexOf(n)>-1},t.getIsMyKnight=function(e,t){var n=e.auth.currentUser;return!!n&&h(e,n.id).indexOf(t)>-1});t.getCanAddKnight=function(e,t){var n=e.auth.currentUser;return!(!n||v(e,t))&&h(e,n.id).length<f.MODEL_KNIGHTS_LIMIT}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getHasBanned=t.getModeratorUserIds=t.getBannedUserIds=t.getMyBans=t.getMyBansCollection=void 0;var a=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(32),l=n(16),u=function(e){var t=e.auth.currentUser;return(0,o.default)(t,"id",null)},c=function(e){return e.userBans.collection},d=function(e){return e.users.collection},f=t.getMyBansCollection=(0,s.createSelector)([u,c],function(e,t){return t.filter(function(t){return t.userId===e})}),p=(0,s.createSelector)([u,f,d],function(e,t,n){return t.map(function(e){var t=e.bannedId,a=e.moderatorId,o=r(e,["bannedId","moderatorId"]),s=(0,l.findById)(n,t),u=(0,l.findById)(n,a);return i({banned:s,moderator:u},o)}).valueSeq()});t.getMyBans=p;t.getBannedUserIds=(0,s.createSelector)([f],function(e){return e.map(function(e){return Number(e.bannedId)}).toArray()}),t.getModeratorUserIds=(0,s.createSelector)([f],function(e){return e.map(function(e){return Number(e.moderatorId)}).toArray()}),t.getHasBanned=function(e,t,n){var r=c(e);return Boolean((0,l.findFirst)(r,{userId:t,bannedId:n}))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getIsAlbumAccessGranted=t.getAlbumsByUserId=t.getAlbumById=t.getUserAlbumById=t.getSelectedUserAlbum=t.getMySelectedAlbum=t.getUserAlbums=t.getMyAlbums=void 0;var a=n(146),o=r(a),i=n(48),s=r(i),l=n(47),u=r(l),c=n(6),d=r(c),f=n(32),p=n(16),m=function(e){return e.myAlbums.collection},g=function(e){return e.myAlbums.selectedAlbumId},h=function(e){return e.userAlbums.collection},v=function(e){return e.userAlbums.selectedAlbumId},E=function(e){return e.users.collection},y=function(e,t){return t.user.username},b=function(e,t){return t.albumId},_=function(e,t){return t.userId},S=function(e){return(0,o.default)(e,"id","desc")},O=(t.getMyAlbums=(0,f.createSelector)([m],function(e){return S(e.valueSeq().toArray())}),t.getUserAlbums=(0,f.createSelector)([y,h,E],function(e,t,n){var r=(0,p.findFirst)(n,{username:e}),a=(0,p.findById)(t,r.id),o=(0,d.default)(a,"albums",[]);return S((0,u.default)(o,function(e){return e.photosCount>0}))}));t.getMySelectedAlbum=(0,f.createSelector)([m,g],function(e,t){return e.get(t)}),t.getSelectedUserAlbum=(0,f.createSelector)([v,O],function(e,t){return(0,s.default)(t,{id:e})}),t.getUserAlbumById=(0,f.createSelector)([_,b,h],function(e,t,n){return(0,s.default)(n.get(e).albums,{id:t})}),t.getAlbumById=(0,f.createSelector)([m,b],function(e,t){return e.get(t)}),t.getAlbumsByUserId=(0,f.createSelector)([_,h],function(e,t){return S(t.get(e).albums)}),t.getIsAlbumAccessGranted=function(e){return Boolean(e.preview)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getHasLostVideoToWatch=t.getFailedAccessModeSelector=t.getFailedAccessMode=t.getVideoByIdConsideringOwner=t.createFilterableVideosSelector=t.getVideosConsideringOwner=t.getUserVideos=t.getMyVideos=t.getEditingVideoData=t.hasVideoProcessedSuccessfully=t.hasVideoProcessingFailReseted=t.hasVideoProcessingFailed=t.hasUploadErrorReseted=t.hasPreUploadErrorReseted=t.hasUploadErrorOccurred=void 0;var a=n(146),o=r(a),i=n(50),s=r(i),l=n(48),u=r(l),c=n(47),d=r(c),f=n(6),p=r(f),m=n(32),g=n(16),h=n(191),v=n(100),E=function(e){return e.myVideos.editingVideoId},y=function(e,t){return t.isOwnProfile},b=function(e){return e.userVideos.lostVideoIds},_=function(e){return e.myVideos.collection},S=function(e,t){return t.user.id},O=function(e){return e.userVideos.collection},P=function(e,t){return t.videoId},T=function(e){return e.userVideos.videoToWatch},A=function(e){return e.auth.currentUser},C=(t.hasUploadErrorOccurred=function(e,t){return null===e.uploadError&&null!==t.uploadError},t.hasPreUploadErrorReseted=function(e,t){return(0,s.default)(e.preUploadError)&&null===t.preUploadError},t.hasUploadErrorReseted=function(e,t){return(0,s.default)(e.uploadError)&&null===t.uploadError},t.hasVideoProcessingFailed=function(e,t){return(0,p.default)(e.video,"status")===h.VIDEO_STATUSES.PROCESSING&&t.video.status===h.VIDEO_STATUSES.ERROR},t.hasVideoProcessingFailReseted=function(e,t){return!0===e.hasEditingVideoProcessingFailed&&!1===t.hasEditingVideoProcessingFailed},t.hasVideoProcessedSuccessfully=function(e,t){return(0,p.default)(e.video,"status")===h.VIDEO_STATUSES.PROCESSING&&t.video.status===h.VIDEO_STATUSES.READY},function(e){return(0,o.default)(e,"id","desc")}),I=(t.getEditingVideoData=(0,m.createSelector)([_,E],function(e,t){return e.get(t)}),t.getMyVideos=(0,m.createSelector)([_],function(e){return C(e.valueSeq().toArray())})),w=t.getUserVideos=(0,m.createSelector)([S,O],function(e,t){var n=(0,g.findById)(t,e);return C((0,p.default)(n,"videos",[]))}),N=t.getVideosConsideringOwner=(0,m.createSelector)([y,I,w],function(e,t,n){return e?t:n}),R=(t.createFilterableVideosSelector=function(e){return(0,m.createSelector)([N],function(t){return(0,d.default)(t,e)})},t.getVideoByIdConsideringOwner=(0,m.createSelector)([N,P],function(e,t){return(0,u.default)(e,{id:t})})),M=t.getFailedAccessMode=function(e){var t=e.accessMode;return e.videoUrl?null:t},L=function(e,t){var n=t.user;return(0,v.getIsMyFriend)(e,n.id)};t.getFailedAccessModeSelector=(0,m.createSelector)([T,R,y,A,L],function(e,t,n,r,a){return n?null:M(e||t,r,a)}),t.getHasLostVideoToWatch=(0,m.createSelector)([b,T],function(e,t){return Boolean(t&&e.has(t.id))})},,,,function(e,t,n){"use strict";function r(e,t){return function(n){n({type:u,data:{key:e,payload:t}})}}function a(){return function(e){e({type:c,data:{}})}}function o(e,t){return function(n){n({type:d,data:{subscriptionKey:e,callback:t}})}}function i(e,t){return function(n){n({type:f,data:{subscriptionKey:e,callback:t}})}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{invokeImmediately:!0};return function(r){r({type:l,data:{subscriptionKey:e,callback:t,options:n}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.process=r,t.reinit=a,t.subscribe=o,t.unsubscribe=i,t.invokeWhenSubscribed=s;var l=t.INVOKE_WHEN_SUBSCRIBED="socket/INVOKE_WHEN_SUBSCRIBED",u=t.PROCESS="socket/PROCESS",c=t.REINIT="socket/REINIT",d=t.SUBSCRIBE="socket/SUBSCRIBE",f=t.UNSUBSCRIBE="socket/UNSUBSCRIBE"},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(167),u=r(l),c=n(14),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(1),g=r(m),h=n(0),v=r(h),E=n(3),y=r(E),b=n(201),_=r(b),S=n(239),O=r(S),P=n(1253),T=r(P),A=n(22),C=r(A),I=n(73),w=r(I),N=n(29),R=r(N),M=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.editButtonClickHandler=function(){var e=r.state,t=e.deletedIds,n=e.isEditMode;r.setState({deletedIds:[],isEditMode:!n}),n&&r.editHandler(t)},r.toggleDeleteClickHandler=function(e){var t=r.state.deletedIds;r.setState({deletedIds:(0,d.default)(t,e)?(0,u.default)(t,e):[].concat(a(t),[e])})},r.editHandler=function(e){var t=r.props.onEdit;t?t(e):R.default.warn("EditableList.editHandler() has onEdit prop",{deletedIds:e,onEdit:t})},s=n,i(r,s)}return s(t,e),p(t,[{key:"getDefaultState",value:function(e,t){return{deletedIds:[],isEditMode:!1}}},{key:"renderList",value:function(){var e=this,t=this.props,n=t.isPending,r=t.isScrollable,a=t.selectedId,o=this.state,i=o.deletedIds,s=o.isEditMode,l=v.default.Children.map(this.listItems,function(t){return t?v.default.cloneElement(t,{isDeleted:t&&(0,d.default)(i,t.props.id),isEditMode:s,isSelected:a&&t.props.id===a,onDeleteClick:e.toggleDeleteClickHandler}):null});return r||!this.onLoadMore?v.default.createElement(w.default,null,v.default.createElement("div",{className:"list-items-container"},l)):v.default.createElement(T.default,f({className:"list-items-container",stubClassName:"list-item list-item-stub"},this.additionalInfiniteScrollProps,{hasMore:this.hasMore&&!n,isLoading:this.isLoadingMore,onLoadMore:this.onLoadMore}),l)}},{key:"renderStub",value:function(e){return v.default.createElement("div",{className:"list-items-container"},v.default.createElement(_.default,{className:"list-item-stub"}," "),e)}},{key:"renderTitle",value:function(){var e=this.props.title;return e?v.default.createElement("h2",null,e):null}},{key:"renderEditButton",value:function(){var e=this.state.isEditMode;return v.default.createElement(O.default,{isActive:e,onClick:this.editButtonClickHandler})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isEditable,r=t.isPending,a=t.isScrollable,o=this.state.isEditMode,i=this.hasMore||r||!this.isListEmpty,s=i&&n;return v.default.createElement("div",{className:this.c("editable-list",this.additionalClassNames,{"is-pending":r,"is-edit-mode":o,"is-empty":!i,scrollable:a}),"data-component-name":"EditableList"},v.default.createElement("div",{className:"list-header"},this.renderTitle(),this.renderIf(s,function(){return e.renderEditButton()})),this.renderIf(r,v.default.createElement(C.default,{isCentered:!0})),this.renderIf(i,function(){return e.renderList()},function(){return e.renderStub(v.default.createElement("p",{className:"empty-text"},e.t("empty")))}))}},{key:"listItems",get:function(){return this.props.children}},{key:"isListEmpty",get:function(){return!v.default.Children.count(this.listItems)}},{key:"hasMore",get:function(){return this.props.hasMore}},{key:"isLoadingMore",get:function(){return this.props.isLoading}},{key:"onLoadMore",get:function(){return this.props.onLoadMore}},{key:"additionalClassNames",get:function(){return this.props.className}},{key:"additionalInfiniteScrollProps",get:function(){return this.props.infiniteScroll}}]),t}(y.default);M.propTypes={className:g.default.string,hasMore:g.default.bool,isEditable:g.default.bool,isLoading:g.default.bool,infiniteScroll:g.default.object,isPending:g.default.bool,isScrollable:g.default.bool,onEdit:g.default.func,onLoadMore:g.default.func,selectedId:g.default.any,title:g.default.string},t.default=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(105),l=r(s),u=n(69),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),m=n(0),g=r(m),h=n(3),v=r(h),E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.unlockButtonClickHandler=function(e){e.preventDefault(),r.props.onUnlock()},i=n,o(r,i)}return i(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.additionalButton,r=e.additionalTitleContent,a=e.contentClassName,o=e.className,i=e.title,s=e.isLocked,l=e.lockedText;return g.default.createElement("div",{className:this.c("settings-island",o,{"settings-island-locked":s}),"data-component-name":"SettingsIsland"},g.default.createElement("div",{className:"settings-island-title-wrapper"},g.default.createElement("h3",{className:"settings-island-title"},i),r),g.default.createElement("div",{className:this.c("settings-island-content",a)},s?g.default.createElement("div",{className:"settings-island-content-button-container"},n,g.default.createElement("button",{className:"btn btn-large btn-default",onClick:this.unlockButtonClickHandler},l)):t))}}]),t}(v.default);E.propTypes={additionalButton:p.default.node,additionalTitleContent:p.default.node,title:p.default.node.isRequired,children:p.default.node.isRequired,isLocked:p.default.bool,lockedText:function(e,t,n){if(e.isLocked&&!(0,l.default)(e[t]))return new Error("Props Validation Failed in "+n+': "lockedText" has to be specified, if "isLocked" prop is true')},onUnlock:function(e,t,n){if(e.isLocked&&!(0,c.default)(e[t]))return new Error("Props Validation Failed in "+n+': "onUnlock" has to be specified, if "isLocked" prop is true')}},E.defaultProps={additionalTitleContent:null},t.default=E},,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=Boolean(Error.captureStackTrace),c=/@(.+?):(\d+):(\d+)$/,d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(s.message=e,s.details=n,s.statusCode=o,s.debugInfo=i,u)Error.captureStackTrace(s,s.constructor);else{var l=new Error,d=l.stack;if(d){d=d.split("\n").slice(1),s.stack=d.join("\n");var f=c.exec(d[0]||"");f&&(s.fileName=f[1],s.lineNumber=Number(f[2]),s.columnNumber=Number(f[3]))}}return s}return o(t,e),l(t,[{key:"toJSON",value:function(){return(0,s.default)(this,["message","details"])}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));d.prototype.name="ApplicationError",t.default=d},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e.replace(/([\W])(?=\w)/g,"$1***").replace(/([a-zA-Z])(?=[0-9])/g,"$1***").replace(/([a-z])(?=[A-Z])/g,"$1***").split(/\*{3,}/);return e.length>t&&e.length/r.length>t&&(r=e.match(new RegExp(".{1,"+t+"}","g"))),f.default.createElement("span",{className:n},r.map(function(e,t){return f.default.createElement("span",{key:t},e,f.default.createElement("wbr",null))}))}function o(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Object.defineProperty(t,"__esModule",{value:!0}),t.convertNullToEmptyStringRecursive=void 0;var i=n(78),s=r(i),l=n(95),u=r(l);t.insertInvisibleWordBreaks=a,t.htmlEntities=o;var c=n(1),d=(r(c),n(0)),f=r(d);t.convertNullToEmptyStringRecursive=function e(t){return(0,s.default)(t,function(t){return(0,u.default)(t)?e(t):null===t?"":t})}},function(e,t,n){"use strict";function r(e,t){return function(n,r,a){var u=a.Api,c=a.ApiError;return e&&t?(n({type:i}),u.get("/users/"+t+"/albums/"+e+"/photos").then(function(t){var r=t.photos;n({type:s,data:{photos:r,albumId:e}})}).catch(c,function(e){n({type:l,data:{error:e}})})):(0,o.reject)("You missed albumId or userId")}}function a(e){return function(t,n){var a=n(),i=a.userAlbums.selectedAlbumId;return i&&e?t(r(i,e)):(0,o.reject)("You missed userId or there is no selected album")}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0,t.load=r,t.loadCurrentAlbumPhotos=a;var o=n(20),i=t.LOAD_START="userPhotos/LOAD_START",s=t.LOAD_SUCCESS="userPhotos/LOAD_SUCCESS",l=t.LOAD_FAIL="userPhotos/LOAD_FAIL"},function(e,t,n){"use strict";function r(e,t){return function(n){return n({type:E,data:{video:e,userId:t}})}}function a(e){return function(t){return t({type:v,data:{video:e}})}}function o(e,t,n){return function(r){return r({type:g,data:{videoId:e,userId:t,isRejection:n}})}}function i(e,t){return function(n,i,s){return s.Api.get("/users/"+t+"/videos/"+e).then(function(o){var s=o.video,l=i(),u=l.userVideos.videoToWatch;return n(r(s,t)),(0,d.default)(u,"id")===e&&n(a(s)),null}).catch(function(r){404===r.statusCode&&n(o(e,t,!0))})}}function s(e,t,n){return function(o,i,s){var l=s.Api;return o({type:h}),l.get("/users/"+e.id+"/videos/"+t).then(function(n){var i=n.video;return o(r(i,e.id)),o(a(i)),i.videoUrl&&l.put("/users/"+e.id+"/videos/"+t+"/views"),null}).catch(function(r){var s=r.statusCode,l=(0,f.getVideoByIdConsideringOwner)(i(),{isOwnProfile:n,user:e,videoId:t});404===s&&l&&(o({type:m,data:{userId:e.id,videoId:t}}),o(a(l)))})}}function l(e,t){return function(n,o,i){var s=i.Api,l=o(),u=l.auth.currentUser,c=t.id;return s.put("/users/"+c+"/videos/"+e.id+"/buyers/"+u.id).then(function(e){var t=e.video;return n(r(t,c)),n(a(t)),null})}}function u(e){return function(t,n,r){return r.Api.get("/users/"+e+"/videos").then(function(n){var r=n.videos;t({type:p,data:{userId:e,videos:r}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_SUCCESS=t.WATCH_VIDEO_SUCCESS=t.WATCH_VIDEO_START=t.REMOVE=t.LOSE_VIDEO=t.LOAD_SUCCESS=t.LOAD_START=t.LOAD_FAIL=void 0;var c=n(6),d=function(e){return e&&e.__esModule?e:{default:e}}(c);t.updateSuccess=r,t.watchSuccess=a,t.remove=o,t.update=i,t.selectVideo=s,t.buy=l,t.fetchUserVideos=u;var f=n(166),p=(t.LOAD_FAIL="userVideos/LOAD_FAIL",t.LOAD_START="userVideos/LOAD_START",t.LOAD_SUCCESS="userVideos/LOAD_SUCCESS"),m=t.LOSE_VIDEO="userVideos/LOSE_VIDEO",g=t.REMOVE="userVideos/REMOVE",h=t.WATCH_VIDEO_START="userVideos/WATCH_VIDEO_START",v=t.WATCH_VIDEO_SUCCESS="userVideos/WATCH_VIDEO_SUCCESS",E=t.UPDATE_SUCCESS="userVideos/UPDATE_SUCCESS"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VIDEO_STATUSES={ERROR:"error",PROCESSING:"processing",READY:"ready"},t.SEXFLIX_SUPPORTED_FORMATS=[".3gp",".asf",".avi",".flv",".mkv",".mov",".mp4",".mpeg",".mpg"],t.TITLE_MAX_LENGTH=100,t.VIDEO_ACCESS_MODES={FREE:"free",VERIFIED_USERS:"verified",FRIENDS:"friends",PAID:"paid"},t.VIDEO_COST_RANGES={MIN:1,MAX:999}},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=e.file,n=e.url,r=e.status,a=e.type;return!t&&!n||"rejected"===r?a:null}function l(e,t){return function(n,r){var a=r(),o=e.file,l=e.type,u=void 0;if(s(e))u=B.default.resolve((0,K.translate)(a,{messageId:"personEdit.require.document."+l}));else if(o){var c=(0,M.default)(t,"data.document");u=(0,Y.validateImageFile)(o,c,a)}else u=B.default.resolve();return u.then(function(e){if(e){var t=new G.ValidationError((0,K.translate)(a,{messageId:"errors.validationError"}),i({},l,e));return B.default.reject(t)}return B.default.resolve()})}}function u(e){return(0,A.default)(e,function(t,n){var r="string"==typeof e[n]?e[n].trim():e[n];return pe[n]?pe[n](r):r})}function c(e,t){var n=[te,ne,re,ae,oe,ie,se,le,ue];return t[e.country]&&n.push(de),n}function d(e,t){return c(e,t).filter(function(t){return(0,N.default)("string"==typeof e[t]?e[t].trim():e[t])})}function f(e){var t=e.documents,n=e.person,r=e.regions;return function(e,a){var o=d(n,r),i=ge(n,o),s=a(),u=s.availableSettings,c={},f=(0,I.default)(t,function(t){var n=t.type;return e(l(t,u)).catch(G.ValidationError,function(e){c[n]=e.details[n]})});return B.default.all(f).then(function(){var e=i.length||o.length;if((0,N.default)(c)&&!e)return B.default.resolve();var t=new G.ValidationError((0,K.translate)(s,{messageId:"errors.validationError"}),j({},he(s,o,"personEdit.require",!0),he(s,i,"errors.validation.swiftIncompatible",!1),{documents:c}));return B.default.reject(t)})}}function p(e,t,n){return function(r,a,i){var s=i.Api,l=i.ApiError;r({type:z});var u=a(),c=u.config.data.regions;return r(f({documents:n,person:t,regions:c})).then(function(){var r=fe(t,n);return s.post("/models/"+e+"/persons",r,{dataType:"multipart"})}).catch(G.ValidationError,function(e){return{error:e}}).catch(l,function(e){return{error:e}}).then(function(e){var t=e.error,n=o(e,["error"]);return t?r({type:Z,data:{error:t}}):(r({type:X,data:{persons:[n.person]}}),r({type:H.DOCUMENTS_CREATE_SUCCESS,data:{documents:n.documents}})),B.default.reject(t)})}}function m(e,t,n){return function(r,a,i){var s=i.Api,l=i.ApiError;r({type:z});var u=a(),c=u.config.data.regions;return r(f({documents:n,person:t,regions:c})).then(function(){var r=fe(t,n);return s.post("/models/"+e+"/persons/"+t.id,r,{dataType:"multipart"})}).catch(G.ValidationError,function(e){return{error:e}}).catch(l,function(e){return{error:e}}).then(function(e){var t=e.error,n=o(e,["error"]);return t?r({type:Z,data:{error:t}}):(r({type:X,data:{persons:[n.person]}}),r({type:H.DOCUMENTS_CREATE_SUCCESS,data:{documents:n.documents}})),B.default.reject(t)})}}function g(e){return function(t,n,r){var o=r.Api,i=n(),s=i.persons,l=s.isLoading,u=s.isUpdating;return l||u||t({type:J}),o.get("/models/"+e+"/persons",null).then(function(e){return t({type:$,data:{persons:(0,I.default)(e.persons,"person")}}),t({type:H.DOCUMENTS_LOAD_SUCCESS,data:{documents:U.default.apply(void 0,a((0,I.default)(e.persons,"documents")))}}),null}).finally(function(){t({type:ee})})}}function h(e,t){return function(n,r,a){var o=a.Api;return n({type:Q}),t.length?o.del("/models/"+e+"/persons",{personIds:t}).then(function(){return n(g(e))}):B.default.resolve()}}function v(e){return function(t){t({type:J});var n=t((0,q.load)()),r=t(g(e));return B.default.all([n,r])}}function E(e){var t=e.userId,n=e.person,r=e.documents;return function(e){return e({type:z,data:{draftPerson:n}}),e({type:H.DOCUMENTS_CREATE_START,data:{draftDocuments:r}}),e(n.id?m(t,n,r):p(t,n,r))}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_END=t.LOAD_SUCCESS=t.LOAD_START=t.UPDATE_START=t.CREATE_ERROR=t.CREATE_SUCCESS=t.CREATE_START=void 0;var y=n(169),b=r(y),_=n(46),S=r(_),O=n(350),P=r(O),T=n(78),A=r(T),C=n(11),I=r(C),w=n(13),N=r(w),R=n(6),M=r(R),L=n(279),k=r(L),D=n(223),U=r(D),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.validateCurrentDocument=s,t.validateDocument=l,t.parsePerson=u,t.getRequiredFields=c,t.validateEmpty=d,t.validatePerson=f,t.add=p,t.update=m,t.load=g,t.deletePersons=h,t.loadDocumentsPageData=v,t.saveDocumentsPageData=E;var F=n(20),B=r(F),H=n(553),V=n(572),G=n(54),x=n(110),W=n(188),Y=n(82),K=n(57),q=n(161),z=t.CREATE_START="persons/CREATE_START",X=t.CREATE_SUCCESS="persons/CREATE_SUCCESS",Z=t.CREATE_ERROR="persons/CREATE_ERROR",Q=t.UPDATE_START="persons/UPDATE_START",J=t.LOAD_START="persons/LOAD_START",$=t.LOAD_SUCCESS="persons/LOAD_SUCCESS",ee=t.LOAD_END="persons/LOAD_END",te=V.PERSON_EDIT_FIELD_NAMES.ADDRESS,ne=V.PERSON_EDIT_FIELD_NAMES.AGREEMENT,re=V.PERSON_EDIT_FIELD_NAMES.BIRTH_DATE,ae=V.PERSON_EDIT_FIELD_NAMES.CITY,oe=V.PERSON_EDIT_FIELD_NAMES.COUNTRY,ie=V.PERSON_EDIT_FIELD_NAMES.FIRST_NAME,se=V.PERSON_EDIT_FIELD_NAMES.GENDER,le=V.PERSON_EDIT_FIELD_NAMES.ID_NUMBER,ue=V.PERSON_EDIT_FIELD_NAMES.LAST_NAME,ce=V.PERSON_EDIT_FIELD_NAMES.OTHER_NAMES,de=V.PERSON_EDIT_FIELD_NAMES.REGION,fe=function(e,t){var n=j({},e),r=0;return Object.keys(t).forEach(function(e){t[e].file&&(n["documents["+r+"][type]"]=e,n["documents["+r+"][file]"]=t[e].file,r+=1)}),(0,W.convertNullToEmptyStringRecursive)(n)},pe={birthDate:(0,P.default)(x.fromRenderToApiFormat,{dayOnly:!0})},me=function(){return[te,ae,ie,le,ue,ce]},ge=function(e,t){return(0,k.default)(me(),t).filter(function(t){return!(0,Y.isSwiftCompatible)(e[t])})},he=function(e,t,n,r){return(0,S.default)(t,function(t,a){return(0,b.default)(t,a,[(0,K.translate)(e,{messageId:n+(r?"."+a:"")})])},{})}},function(e,t,n){"use strict";function r(){return function(e,t,n){var r=n.Api,a=t(),o=a.studioModels.isLoading,i=a.auth.currentUser,s=i.id;return o||e({type:h}),r.get("/studios/"+s+"/models").then(function(t){var n=t.modelIds;return e({type:v,data:{modelIds:n}}),null})}}function a(e){return function(t,n,a){var o=a.Api,i=n(),s=i.auth.currentUser,l=s.id;t({type:E});var u=e.map(function(e){return o.del("/studios/"+l+"/models/"+e)});return c.default.all(u).then(function(){return t(r())}).finally(function(){t({type:y})})}}function o(e){var t=e.email,n=e.login,r=e.password;return function(e,a,o){var i=o.Api,s=o.ApiError,l=a(),u=l.auth.currentUser,c=u.id;return e({type:_}),i.post("/studios/"+c+"/models",{email:t,login:n,password:r}).then(function(t){var n=t.model;return e({type:f.USERS_SAVE,data:{users:[n]}}),e({type:S,data:{modelId:n.id}}),n}).catch(s,function(t){e({type:O,data:{error:t}})})}}function i(e){var t=e.id,n=e.email,r=e.password,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,o,i){var s=i.Api,u=i.ApiError,c=o(),d=c.auth.currentUser,p=l({notifications:{}},a),m=p.notifications,h=d.id;return e({type:E}),s.put("/studios/"+h+"/models/"+t,{email:n,password:r}).then(function(t){var n=t.model;return e({type:f.USERS_SAVE,data:{users:[n]}}),e({type:y}),m.success&&e((0,g.success)(m.success,"updateStudioFields")),n}).catch(u,function(t){e({type:b,data:{error:t}}),m.error&&e((0,g.error)(m.success,"updateStudioFields"))})}}function s(e){var t=e.username;return function(e,n){e({type:h});var r=e((0,m.load)()),a=e((0,f.loadOne)({username:t})),o=a.then(function(){var r=n(),a=r.users;if(t){var o=(0,d.findFirst)(a.collection,{username:t});return o?e((0,p.load)(o.id)):c.default.reject(new ReferenceError("Failed to find user by username: "+t))}return null});return c.default.all([a,r,o]).then(function(){e({type:v,data:{isModelPageDataLoading:!1}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.CREATE_ERROR=t.CREATE_SUCCESS=t.CREATE_START=t.UPDATE_ERROR=t.UPDATE_SUCCESS=t.UPDATE_START=t.LOAD_SUCCESS=t.LOAD_START=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.load=r,t.remove=a,t.create=o,t.update=i,t.loadModelPageData=s;var u=n(20),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=n(16),f=n(37),p=n(194),m=n(161),g=n(28),h=t.LOAD_START="studioModels/LOAD_START",v=t.LOAD_SUCCESS="studioModels/LOAD_SUCCESS",E=t.UPDATE_START="studioModels/UPDATE_START",y=t.UPDATE_SUCCESS="studioModels/UPDATE_SUCCESS",b=t.UPDATE_ERROR="studioModels/UPDATE_ERROR",_=t.CREATE_START="studioModels/CREATE_START",S=t.CREATE_SUCCESS="studioModels/CREATE_SUCCESS",O=t.CREATE_ERROR="studioModels/CREATE_ERROR"},function(e,t,n){"use strict";function r(e,t){return function(n,r,a){var o=a.Api,i=a.ApiError;return n({type:m}),o.post("/users/"+e+"/verify",{hash:t}).then(function(e){var t=e.showChangePasswordForm;return n({type:g,data:{type:S.SUCCESS,showChangePasswordForm:t}}),n((0,u.load)()),null}).catch(i,function(e){var t=e.details.emailHasConfirmedAlready?S.WRONG:S.ERROR;n({type:h,data:{type:t}})})}}function a(e,t){return function(n,r,a){var o=a.Api,i=a.ApiError,u=r(),m=u.auth.currentUser.id;n({type:y});var g=(0,l.resolve)();return(e.length<p.MIN_PASSWORD_LENGTH||e.length>c.DEFAULT_MAX_INPUT_LENGTH)&&(g=(0,l.reject)(new d.ValidationError("Password Length Error",{type:"password",text:(0,f.translate)(u,{messageId:"errors.validation.password",params:{minLength:p.MIN_PASSWORD_LENGTH}})}))),e!==t&&(g=(0,l.reject)(new d.ValidationError("Password Confirm Error",{type:"confirmPassword",text:(0,f.translate)(u,{messageId:"errors.validation.passwordsDontMatch"})}))),g.then(function(){return o.put("/users/"+m+"/password",{password:e}).then(function(){return n({type:b}),null}).catch(i,function(e){return(0,l.reject)(new d.ValidationError("Password Confirm Error",{type:"password",text:(0,s.default)(e.details.password)}))})}).catch(function(e){n({type:_,data:{error:e}})})}}function o(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=t().auth.currentUser;return r.get("/users/"+o.id+"/resendVerification").then(function(){return e({type:v}),null}).catch(a,function(t){e({type:E,data:{error:t}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES_OF_RESULT=t.CHANGE_PASSWORD_FAIL=t.CHANGE_PASSWORD_SUCCESS=t.CHANGE_PASSWORD_START=t.RESEND_FAIL=t.RESEND_SUCCESS=t.CONFIRM_FAIL=t.CONFIRM_SUCCESS=t.CONFIRM_START=void 0;var i=n(116),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.confirmEmail=r,t.changePassword=a,t.resendConfirmation=o;var l=n(20),u=n(109),c=n(5),d=n(54),f=n(57),p=n(27),m=t.CONFIRM_START="confirmEmail/CONFIRM_START",g=t.CONFIRM_SUCCESS="confirmEmail/CONFIRM_SUCCESS",h=t.CONFIRM_FAIL="confirmEmail/CONFIRM_FAIL",v=t.RESEND_SUCCESS="confirmEmail/RESEND_SUCCESS",E=t.RESEND_FAIL="confirmEmail/RESEND_FAIL",y=t.CHANGE_PASSWORD_START="confirmEmail/CHANGE_PASSWORD_START",b=t.CHANGE_PASSWORD_SUCCESS="confirmEmail/CHANGE_PASSWORD_SUCCESS",_=t.CHANGE_PASSWORD_FAIL="confirmEmail/CHANGE_PASSWORD_FAIL",S=t.TYPES_OF_RESULT={SUCCESS:"success",ERROR:"error",WRONG:"wrong"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser.id;return a.post("/users/"+i+"/conversations/"+e+"/read").then(function(){return t({type:N.CONVERSATIONS_READ,data:{counterpartId:e}}),t((0,T.removePrivateMessagesNotificationsFromCounterpart)(e)),null})}}function o(e){return function(t,n){t({type:N.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:b({},(0,R.getConversation)(n(),e),{counterpartFirstUnreadMessageId:null})}})}}function i(e,t){return function(n,r){n({type:N.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:b({},(0,R.getConversation)(r(),t),{messageDraft:e})}})}}function s(e){var t=e.id,n=e.username;return function(e,r,a){var o=a.Api,i=r(),s=i.auth.currentUser,l=s.id;return e({type:N.CONVERSATIONS_REMOVE_START}),o.del("/users/"+l+"/conversations/"+t).then(function(){e({type:N.CONVERSATIONS_REMOVE_SUCCESS,data:{id:t,username:n}})}).catch(function(t){throw e({type:N.CONVERSATIONS_REMOVE_ERROR,data:{error:t}}),t})}}function l(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser,s=i.id;return t({type:N.CONVERSATIONS_LOAD_START}),a.get("/users/"+s+"/conversations").then(function(r){var a=r.conversations,o=(0,v.default)(a,"counterpartId"),i=(0,v.default)(a,"message");return t((0,C.loadList)(o)).then(function(){var r=e?(0,M.getUserByUsername)(n(),e):null,o=(0,v.default)(a,function(e){var t=e.counterpartId,a=e.unread;return b({},(0,R.getConversation)(n(),t),{unreadCount:r&&r.id===t?0:a})});t({type:U,data:{messages:i}}),t({type:N.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:o}})})}).catch(O.ApplicationError,function(e){throw t({type:N.CONVERSATIONS_LOAD_ERROR,data:{error:e}}),e})}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r,o){var i=o.Api,s=r(),l=s.auth,u=l.currentUser;return l.isLoggedIn?(n({type:D}),i.get("/users/"+u.id+"/conversations/"+e,t).then(function(o){var i=o.isSubscribed,s=o.canSend,l=o.counterpart,u=o.counterpartFirstUnreadMessageId,c=o.friendship,d=o.messages;n({type:C.USERS_SAVE,data:{users:[l]}}),c&&n({type:A.ADD_SUCCESS,data:{friendship:c}});var f=!t.beforeMessageId||d.length>0,p=(0,R.getConversation)(r(),l.id),m=b({},p,{isSubscribed:i,canSend:s,counterpartFirstUnreadMessageId:u,hasMore:f,unreadCount:0});return(0,y.default)(p,m)||n({type:N.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:m}}),n({type:U,data:{messages:d}}),n(a(e))}).catch(O.ApplicationError,function(t){if(403===t.statusCode)return n({type:N.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:(0,R.getConversation)(r(),e),canSend:!1}}),void n({type:j,data:{error:t}});throw n({type:j,data:{error:t}}),t})):S.default.reject(new Error("User must be authorized to run this action"))}}function c(e,t){return function(n,r,a){var o=a.Api,i=r(),s=i.auth.currentUser.id;return n({type:F,data:{counterpartId:t,body:e}}),o.post("/users/"+s+"/conversations/"+t+"/messages",{body:e},{isDefaultErrorHandlerEnabled:!1}).then(function(e){var a=e.message;return n({type:B,data:{counterpartId:t,message:a}}),n({type:N.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:b({},(0,R.getConversation)(r(),t),{messageDraft:""})}}),null}).catch(O.ApplicationError,function(e){n({type:H,data:{counterpartId:t,error:e}})})}}function d(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser.id;return a.put("/users/"+i+"/pmSubscriptions/"+e).then(function(){t({type:N.CONVERSATIONS_ADD_SUBSCRIPTION,data:{counterpartId:e}})})}}function f(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser.id;return a.del("/users/"+i+"/pmSubscriptions/"+e).then(function(){t({type:N.CONVERSATIONS_REMOVE_SUBSCRIPTION,data:{counterpartId:e}})})}}function p(e,t){return function(n,r){var o=e.counterpart,i=e.friendship,s=e.message,l=e.unread,c=e.counterpartFirstUnreadMessageId;n({type:C.USERS_SAVE,data:{users:[o]}}),i&&n({type:A.ADD_SUCCESS,data:{friendship:i}}),n({type:U,data:{messages:[s]}});var d=[],f=l;return t&&s.senderId===t.counterpart.id&&(f=0,d.push(n(a(o.id))),t.canSend&&!t.isBanned||d.push(n(u(o.id)))),n({type:N.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:b({},(0,R.getConversation)(r(),o.id),{counterpartFirstUnreadMessageId:c,unreadCount:f})}}),S.default.all(d)}}function m(e){var t=e.username;return function(e){return t?e((0,C.loadOne)({username:t},[])).then(function(t){var n=t.user,r=[];return r.push(e(u(n.id))),r.push(e((0,I.load)([n.id]))),S.default.all(r)}):S.default.resolve(null)}}function g(e){return function(t,n){var r=n(),a=r.auth.currentUser;if(!a)return S.default.resolve();t({type:L});var o=[];o.push(t(l(e)));var i=a.id,s=a.isModel;return o.push(t((0,w.load)(i))),e&&o.push(t(m({username:e}))),s&&o.push(t((0,P.load)(i))),S.default.all(o).then(function(){t({type:k})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.SEND_ERROR=t.SEND_SUCCESS=t.SEND_START=t.LOAD_ERROR=t.LOAD_SUCCESS=t.LOAD_START=t.LOAD_PAGE_SUCCESS=t.LOAD_PAGE_START=void 0;var h=n(11),v=r(h),E=n(49),y=r(E),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.markConversationAsRead=a,t.markConversationAsReadByCounterpart=o,t.saveDraftDelayed=i,t.removeConversation=s,t.loadConversations=l,t.loadMessages=u,t.sendMessage=c,t.addSubscription=d,t.removeSubscription=f,t.updateConversation=p,t.loadCounterpart=m,t.loadPageData=g;var _=n(20),S=r(_),O=n(54),P=n(162),T=n(150),A=n(117),C=n(37),I=n(98),w=n(130),N=n(229),R=n(295),M=n(44),L=t.LOAD_PAGE_START="privateMessages/LOAD_PAGE_START",k=t.LOAD_PAGE_SUCCESS="privateMessages/LOAD_PAGE_SUCCESS",D=t.LOAD_START="privateMessages/LOAD_START",U=t.LOAD_SUCCESS="privateMessages/LOAD_SUCCESS",j=t.LOAD_ERROR="privateMessages/LOAD_ERROR",F=t.SEND_START="privateMessages/SEND_START",B=t.SEND_SUCCESS="privateMessages/SEND_SUCCESS",H=t.SEND_ERROR="privateMessages/SEND_ERROR"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getIsNotificationVisible=t.getIsPushNotificationVisible=void 0;var a=n(14),o=r(a),i=n(6),s=r(i),l=n(15),u=r(l),c=n(5),d=n(127),f=n(56),p=r(f),m=n(235),g=r(m),h=n(63),v=r(h),E=c.BROWSER_CAPABILITIES.desktop&&(c.BROWSER_CAPABILITIES.firefox||c.BROWSER_CAPABILITIES.chromeDesktop),y=["us"],b=t.getIsPushNotificationVisible=function(e){var t=e.config.data,n=t.features,r=t.isPushNotificationEnabled,a=e.personalNotifications.isPushEnabled,o=(0,s.default)(n,"notifications.push"),i=g.default.getIsPushApiEnabled(),l=g.default.getIsPushApiAvailable();return!!o&&(!(!r||!a)&&!(!l||i))},_=t.getIsNotificationVisible=function(e,t){var n=e.auth,r=n.isLoggedIn,a=n.currentUser,i=d.PERMANENT_NOTIFICATIONS.BROWSER_RECOMMENDATION,l=d.PERMANENT_NOTIFICATIONS.GIFT_CARD,f=d.PERMANENT_NOTIFICATIONS.PAYMENT_METHODS,m=d.PERMANENT_NOTIFICATIONS.PAYMENT_METHOD_PRZELEWY,g=d.PERMANENT_NOTIFICATIONS.MOBILE_APP_NEW_FEATURES,h=d.PERMANENT_NOTIFICATIONS.PUSH_NOTIFICATION,_=t+"Hidden";switch(t){case i:var S=!E&&!v.default.get(_)&&r&&a.isModel;return(c.BROWSER_CAPABILITIES.ie||c.BROWSER_CAPABILITIES.edge)&&!p.default.get(_)||S;case l:var O=e.config.data,P=O.country,T=O.features.buyTokensGiftCards,A=!r||!a.isModel&&!a.isStudio,C=(0,o.default)(y,P),I=p.default.has(_);return T&&A&&C&&!I;case f:var w=e.profile.user,N=r?w:null,R=(0,s.default)(N,"isRegular");return(0,u.default)().isBefore("2016-11-30T23:59:59Z")&&!p.default.has(_)&&(R||!r);case m:var M=e.config.data,L=M.country,k=M.features.przelewy24PaymentNotification,D=e.profile.user,U=r?D:null,j=(0,s.default)(U,"isRegular");return k&&!p.default.has(_)&&(j||!r)&&"pl"===L;case h:return r&&!p.default.has(_)&&b(e);case g:var F=e.config.data.features.mobileAppNewFeatures,B=r&&a.isModel,H=p.default.has(_),V=c.BROWSER_CAPABILITIES.desktop;return F&&V&&B&&!H;default:return!0}};t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),d=n(53),f=r(d),p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"renderContent",value:function(){return c.default.createElement("div",{className:"modal-body"},this.props.children)}}]),t}(f.default);p.defaultProps=s({},p.defaultProps,{className:"default-modal"}),t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStaticContent=void 0;var r=n(32),a=n(16),o=n(134),i=function(e){return e.staticContent.collection},s=function(e){return(0,r.createSelector)([i],function(t){return(0,a.findById)(t,e)})},l=Object.keys(o.STATIC_CONTENT_TYPES).reduce(function(e,t,n,r){var a=o.STATIC_CONTENT_TYPES[r[n]].id;return e[a]=s(a),e},{});t.getStaticContent=function(e,t){var n=l[t.id](e);return n?n.content:""}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(24),p=n(3),m=r(p),g=n(8),h=r(g),v=n(10),E=r(v),y=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.deleteClickHandler=function(){var e=r.props,t=e.id;(0,e.onDeleteClick)(t)},i=n,o(r,i)}return i(t,e),s(t,[{key:"renderChildren",value:function(){return this.props.children}},{key:"renderCaption",value:function(){return d.default.createElement("span",{className:"caption"},this.props.caption)}},{key:"renderDeleteRestoreButton",value:function(){var e=this,t=this.props.isDeleted;return this.renderIf(t,function(){return d.default.createElement(E.default,{className:"restore-button",onClick:e.deleteClickHandler},e.t("button.restore"))},function(){return d.default.createElement("a",{className:"delete-button",onClick:e.deleteClickHandler},d.default.createElement(h.default,{img:"close-4"}))})}},{key:"renderEditMode",value:function(){return d.default.createElement("div",{className:this.className,key:this.props.id},d.default.createElement("span",{className:"item-image-container"},this.renderDeleteRestoreButton(),this.renderChildren()),this.renderCaption())}},{key:"renderDefault",value:function(){var e=this.props,t=e.id,n=e.onClick,r=this.linkTo;return r?d.default.createElement("div",{className:this.className,key:t},d.default.createElement(f.Link,{onClick:n,to:r},d.default.createElement("span",{className:"item-image-container"},this.renderChildren()),this.renderCaption())):d.default.createElement("div",{className:this.className,key:t},d.default.createElement("span",{className:"item-image-container"},this.renderChildren()),this.renderCaption())}},{key:"render",value:function(){var e=this.props,t=e.isEmpty;return e.isEditMode?t?null:this.renderEditMode():this.renderDefault()}},{key:"className",get:function(){var e=this.props,t=e.className,n=e.isDeleted,r=e.isEmpty,a=e.isSelected;return this.c("list-item",t,{deleted:n,empty:r,selected:a})}},{key:"linkTo",get:function(){return this.props.linkTo}}]),t}(m.default);y.propTypes={caption:u.default.string,children:u.default.any,className:u.default.string,id:u.default.any,isDeleted:u.default.bool,isEmpty:u.default.bool,isEditMode:u.default.bool,isSelected:u.default.bool,linkTo:u.default.string,onDeleteClick:u.default.func,onClick:u.default.func},t.default=y},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.trans=t.replacePlaceholders=t.getMessage=t.pluralize=t.pluralPosition=t.convertNumber=t.REGEXES=t.PLURAL_SEPARATOR=t.PLACE_HOLDER_SUFFIX=t.PLACE_HOLDER_PREFIX=void 0;var o=n(144),i=r(o),s=n(128),l=r(s),u=n(220),c=r(u),d=n(84),f=r(d),p=n(6),m=r(p),g=t.PLACE_HOLDER_PREFIX="%",h=t.PLACE_HOLDER_SUFFIX="%",v=t.PLURAL_SEPARATOR="|",E=t.REGEXES={sPlural:new RegExp(/^\w+\: +(.+)$/),cPlural:new RegExp(/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/),iPlural:new RegExp(/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/)},y=t.convertNumber=function(e){return"-Inf"===e?Number.NEGATIVE_INFINITY:"+Inf"===e||"Inf"===e?Number.POSITIVE_INFINITY:parseInt(e,10)},b=t.pluralPosition=function(e,t){var n=t;switch("pt_BR"===t?n="xbr":t.length>3&&(n=(0,i.default)(t.split("_"))),n){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1===e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"hy":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1===e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return 1===e?0:e>=2&&e<=4?1:2;case"ga":return 1===e?0:2===e?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return 1===e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"lv":return 0===e?0:e%10==1&&e%100!=11?1:2;case"pl":return 1===e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2;case"cy":return 1===e?0:2===e?1:8===e||11===e?2:3;case"ro":return 1===e?0:0===e||e%100>0&&e%100<20?1:2;case"ar":return 0===e?0:1===e?1:2===e?2:e>=3&&e<=10?3:e>=11&&e<=99?4:5;default:return 0}},_=t.pluralize=function(e,t,n){var r=e.split(v),a=[],o=[];r.forEach(function(e){if(E.cPlural.test(e)){var t=e.match(E.cPlural);o[t[0]]=t[t.length-1]}else if(E.sPlural.test(e)){var n=e.match(E.sPlural);a.push(n[1])}else a.push(e)});for(var i in o)if(o.hasOwnProperty(i)&&E.iPlural.test(i)){var s=i.match(E.iPlural);if(s[1]){var l=s[2].split(",");for(var u in l)if(l.hasOwnProperty(u)&&(l[u]=y(l[u]),t===l[u]))return o[i]}else{var c=y(s[4]),d=y(s[5]);if(("["===s[3]?t>=c:t>c)&&("]"===s[6]?t<=d:t<d))return o[i]}}return a[b(t,n)]||a[0]||void 0},S=t.getMessage=function(e,t,n,r,a){var o=(0,m.default)(e,t,null),i=r&&(0,f.default)(n,r)?parseInt((0,m.default)(n,r,null),10):null;return o&&(0,l.default)(i)?_(o,i,a):o},O=t.replacePlaceholders=function(e,t){return(0,c.default)(t,function(t,n){var r=new RegExp(g+n+h,"g");r.test(e)&&(e=e.replace(r,t))}),e},P=t.trans=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments[4],o=S(e,t,n,r,a);return null===o?t:O(o,n)},T=function e(t){var n=this;a(this,e),this.getMessages=function(){var e=n.store.getState(),t=e.config.data.i18n.current,r=e.i18n.data.translations;return(0,m.default)(r,[t,"messages"],{})},this.getLocale=function(){return n.store.getState().config.data.i18n.current},this.trans=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=n.getMessages(),o=n.getLocale();return P(a,e,t,r,o)},this.transWhiteLabel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=n.store.getState(),o=a.config.whiteLabelId,i=e+(o?"_"+o:"");return n.trans(i,t,r)},this.store=t};t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isModelTag=t.getAllTagLinks=t.getAllAliasesTags=t.getAllTagsAliases=t.getTagsAliases=void 0;var o=n(46),i=r(o),s=n(11),l=r(s),u=n(900),c=r(u),d=n(14),f=r(d),p=n(6),m=r(p),g=n(48),h=r(g),v=n(32),E=n(12),y=t.getTagsAliases=function(e){return e.config.data.tagsAliases},b=t.getAllTagsAliases=(0,v.createSelector)([y],function(e){var t=(0,l.default)(e,"tag");return(0,i.default)([].concat(a(t),a(E.PSEUDO_TAGS),[E.DEFAULT_PSEUDO_TAG]),function(t,n){return t[n]=(0,m.default)((0,h.default)(e,function(e){return e.tag===n}),"alias",n),t},{})}),_=t.getAllAliasesTags=(0,v.createSelector)([b],function(e){return(0,c.default)(e)});t.getAllTagLinks=(0,v.createSelector)([b],function(e){return(0,i.default)(e,function(e,t,n){if(n){var r="/tags";(0,f.default)(E.PSEUDO_TAGS,n)&&(r=""),e[n]=r+"/"+t}else e[n]="/";return e},{})}),t.isModelTag=function(e,t){return t===E.DEFAULT_PSEUDO_TAG||(!!(0,f.default)(E.PSEUDO_TAGS,t)||t in _(e))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCanMuteMic=t.getCounterpart=t.hasStartBroadcastingUpdated=void 0;var r=n(84),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(32),i=n(16),s=function(e){return e.broadcast.counterpart.id},l=function(e){return e.users.collection};t.hasStartBroadcastingUpdated=function(e,t){return(0,a.default)(e,"isStartBroadcastingUpdate")&&e.isStartBroadcastingUpdate!==t.isStartBroadcastingUpdate&&t.isStartBroadcastingUpdate},t.getCounterpart=(0,o.createSelector)([l,s],function(e,t){return(0,i.findById)(e,t)}),t.getCanMuteMic=function(e){var t=e.auth,n=t.isLoggedIn,r=t.currentUser;return n&&(r.isGreen||r.isGold)}},,,function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return(0,h.hide)({type:"paymentsSettings"})}function o(e,t){var n=e.optionsConfirmed,r=e.optionsPending,o=(0,m.default)(n,"method"),i=(0,m.default)(r,"method"),s=i===E.FIRSTCHOICE_PAY.METHOD&&(0,m.default)(r,E.FIRSTCHOICE_PAY.STATUS_PROP)!==E.FIRSTCHOICE_PAY_STATUS.SIGNUP_APPROVED,l=i&&!o&&!s,u=i&&o&&!s,c=void 0;if(l)c=E.PAYMENT_SETTINGS_NOTIFICATION_TYPES.PENDING_NEW;else if(u)c=E.PAYMENT_SETTINGS_NOTIFICATION_TYPES.PENDING_MODIFIED;else{if(o)return a();c=E.PAYMENT_SETTINGS_NOTIFICATION_TYPES.EMPTY}return(0,h.show)({params:{type:c,userId:t},type:"paymentsSettings"})}function i(){return function(e,t,n){var r=n.Api,i=n.ApiError,s=t().auth.currentUser;e({type:y});var l=[{id:"availablePayoutSettings",method:"get",url:"/front/users/availablePayoutSettings"},{id:"paymentsSettings",method:"get",url:"/front/users/"+s.id+"/payoutSettings"}];return e(a),r.composite({requests:l}).then(function(t){var n=t.data,r=n.paymentsSettings,a=n.availablePayoutSettings;return e({type:b,data:{paymentsSettings:r,availablePayoutSettings:a}}),e(o(r,s.id)),{paymentsSettings:r,availablePayoutSettings:a}}).catch(i,function(t){throw e({type:_,data:{error:t}}),t})}}function s(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r,i){var s=i.Api,l=i.ApiError,u=r(),c=u.auth.currentUser;return n({type:S}),n(a),s.put("/users/"+c.id+"/payoutSettings",{options:e}).then(function(e){return n(t?(0,h.success)((0,v.translate)(u,{messageId:"paymentsSettings.updateSuccessNotification"}),"paymentsSettings"):a),n({type:O,data:e}),n(o(e,c.id)),e}).catch(l,function(e){n({type:P,data:{error:e}})})}}function l(){return function(e,t,n){var r=n.Api,i=n.ApiError,s=t(),l=s.auth.currentUser;return e({type:S}),e(a),r.del("/users/"+l.id+"/payoutSettings").then(function(t){return e((0,h.success)((0,v.translate)(s,{messageId:"paymentsSettings.clearSuccessNotification"}),"paymentsSettings")),e({type:O,data:t}),e(o(t,l.id)),null}).catch(i,function(t){e({type:P,data:{error:t}})})}}function u(e){var t=e.optionsConfirmed,n=e.optionsPending;return function(e,r){var i=r().auth.currentUser;e({type:O,data:{optionsConfirmed:t,optionsPending:n}}),e(a),e(o({optionsConfirmed:t,optionsPending:n},i.id))}}function c(e,t){return function(n,r,a){var o=a.Api,i=a.ApiError;return n({type:T}),o.post("/users/"+e+"/payoutSettings",{confirmationKey:t}).then(function(){return n({type:A}),null}).catch(i,function(e){n({type:C,data:{error:e}})})}}function d(e){return function(t){return t(s(g({},e,r({},E.FIRSTCHOICE_PAY.STATUS_PROP,E.FIRSTCHOICE_PAY_STATUS.SIGNUP_READY)),!1)).then(function(e){var t=(0,m.default)(e.optionsPending,E.FIRSTCHOICE_PAY.LINK_PROP);t&&"undefined"!=typeof window&&(location.href=t)})}}function f(){return function(e){return e(i()).then(function(t){var n=t.paymentsSettings,a=n.optionsPending,o=E.FIRSTCHOICE_PAY.STATUS_PROP,i=E.FIRSTCHOICE_PAY.METHOD;if(a.method===i&&(0,m.default)(a,o)===E.FIRSTCHOICE_PAY_STATUS.SIGNUP_READY){var l=g({},a,r({},o,E.FIRSTCHOICE_PAY_STATUS.SIGNUP_PENDING));return e(s(l,!1))}return null})}}Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIRM_FAIL=t.CONFIRM_SUCCESS=t.CONFIRM_START=t.SAVE_FAIL=t.SAVE_SUCCESS=t.SAVE_START=t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0;var p=n(6),m=function(e){return e&&e.__esModule?e:{default:e}}(p),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.load=i,t.save=s,t.clear=l,t.update=u,t.confirm=c,t.redirectToFirstchoicePaySignupUrl=d,t.setFirstchoicePayPending=f;var h=n(28),v=n(57),E=n(12),y=t.LOAD_START="paymentsSettings/LOAD_START",b=t.LOAD_SUCCESS="paymentsSettings/LOAD_SUCCESS",_=t.LOAD_FAIL="paymentsSettings/LOAD_FAIL",S=t.SAVE_START="paymentsSettings/SAVE_START",O=t.SAVE_SUCCESS="paymentsSettings/SAVE_SUCCESS",P=t.SAVE_FAIL="paymentsSettings/SAVE_FAIL",T=t.CONFIRM_START="paymentsSettings/CONFIRM_START",A=t.CONFIRM_SUCCESS="paymentsSettings/CONFIRM_SUCCESS",C=t.CONFIRM_FAIL="paymentsSettings/CONFIRM_FAIL"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e,t,n){return n.Api.get("/i18n/languages").then(function(t){var n=t.languages;return e({type:T,data:{languages:n}}),null})}}function o(){return function(e,t,n){return n.Api.get("/i18n/messages").then(function(t){return e({type:A,data:{messages:(0,b.parseMessages)(t)}}),null})}}function i(){return function(e,t,n){return n.Api.get("/i18n/screenshots").then(function(t){var n=t.screenshots;return e({type:C,data:{screenshots:n}}),null})}}function s(){return function(e,t,n){var r=n.ApiError;return e({type:I}),y.default.all([e(a()),e(o()),e(i())]).then(function(){return e({type:w})}).catch(r,function(t){return e({type:P,data:{error:t}})})}}function l(e,t){return function(n,r,a){var o=a.Api,i=a.ApiError,s=[];return(0,v.default)(t,function(t,n){(0,v.default)(t,function(t,r){t&&s.push({id:r,method:"put",url:"/front/i18n/messages/"+n+"/"+r.replace(/#/g,"."),params:{message:(0,g.default)(e,n+"."+r,"")}})})}),s.length?(n({type:I}),o.composite({requests:s}).then(function(){return n({type:N,data:{messages:e}}),null}).catch(i,function(e){return n({type:P,data:{error:e}})})):null}}function u(e,t){return function(n,r,a){return a.Api.post("/i18n/screenshots/"+e.replace(/#/g,"."),{screenshot:t},{dataType:"multipart"}).then(function(e){return n({type:M,data:{screenshots:e.screenshots}}),e})}}function c(e){return function(t){return t({type:R,data:{selectedLocale:e}})}}function d(e){return function(t){t({type:S,data:e})}}function f(e){return function(t){return t({type:O,data:e})}}function p(e){return function(t){t({type:S,data:{field:"keyValue"===e?"phrase":"keyValue",value:""}}),t({type:_,data:{appliedFilter:e}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_SCREENSHOTS=t.UPDATE_LOCALE=t.SAVE_MESSAGES=t.LOAD_SUCCESS=t.LOAD_START=t.LOAD_SCREENSHOTS_SUCCESS=t.LOAD_MESSAGES_SUCCESS=t.LOAD_LANGUAGES_SUCCESS=t.LOAD_ERROR=t.SORTING_CHANGE=t.FILTERS_CHANGE=t.APPLY_FILTER=t.APPLIED_FILTER_CHANGE=void 0;var m=n(6),g=r(m),h=n(371),v=r(h);t.loadLanguages=a,t.loadMessages=o,t.loadScreenshots=i,t.loadPageData=s,t.saveChanges=l,t.uploadScreenshot=u,t.updateSelectedLocale=c,t.filtersChange=d,t.sortingChange=f,t.applyFilter=p;var E=n(20),y=r(E),b=n(293),_=t.APPLIED_FILTER_CHANGE="translator/APPLIED_FILTER_CHANGE",S=(t.APPLY_FILTER="translator/APPLY_FILTER",t.FILTERS_CHANGE="translator/FILTERS_CHANGE"),O=t.SORTING_CHANGE="translator/SORTING_CHANGE",P=t.LOAD_ERROR="translator/LOAD_ERROR",T=t.LOAD_LANGUAGES_SUCCESS="translator/LOAD_LANGUAGES_SUCCESS",A=t.LOAD_MESSAGES_SUCCESS="translator/LOAD_MESSAGES_SUCCESS",C=t.LOAD_SCREENSHOTS_SUCCESS="translator/LOAD_SCREENSHOTS_SUCCESS",I=t.LOAD_START="translator/LOAD_START",w=t.LOAD_SUCCESS="translator/LOAD_SUCCESS",N=t.SAVE_MESSAGES="translator/SAVE_MESSAGES",R=t.UPDATE_LOCALE="translator/UPDATE_LOCALE",M=t.UPDATE_SCREENSHOTS="translator/UPDATE_SCREENSHOTS"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONVERSATIONS_ADD_SUBSCRIPTION="conversations/CONVERSATIONS_ADD_SUBSCRIPTION",t.CONVERSATIONS_REMOVE_SUBSCRIPTION="conversations/CONVERSATIONS_REMOVE_SUBSCRIPTION",t.CONVERSATIONS_LOAD_START="conversations/LOAD_START",t.CONVERSATIONS_LOAD_SUCCESS="conversations/LOAD_SUCCESS",t.CONVERSATIONS_LOAD_ERROR="conversations/LOAD_ERROR",t.CONVERSATIONS_READ="conversations/READ",t.CONVERSATIONS_REMOVE_START="conversations/REMOVE_START",t.CONVERSATIONS_REMOVE_SUCCESS="conversations/REMOVE_SUCCESS",t.CONVERSATIONS_REMOVE_ERROR="conversations/REMOVE_ERROR"},function(e,t,n){"use strict";function r(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=t(),i=o.auth.currentUser;return e({type:S}),r.get("/users/"+i.id+"/albums").then(function(t){var n=t.albums;return e({type:O,data:{albums:n}})}).catch(a,function(t){return e({type:_,data:{error:t}})})}}function a(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser;return t({type:C}),a.post("/users/"+i.id+"/albums",I(e)).catch(function(e){throw t({type:A,data:{error:e}}),e})}}function o(e){return function(t){return t({type:T,data:{albumId:e}})}}function i(){return function(e){return e({type:E})}}function s(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.currentUser,i=a.myAlbums.deletedAlbumIds,s=i.toArray();return s.length?r.del("/users/"+o.id+"/albums/",{albumIds:s}).then(function(){return e({type:y})}):(0,g.reject)("There are no marked albums to be deleted")}}function l(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser;return t({type:C}),a.put("/users/"+i.id+"/albums/"+e.id,I(e)).catch(function(e){throw t({type:A,data:{error:e}}),e})}}function u(){return function(e){return e({type:b})}}function c(){return function(e){return e({type:v})}}function d(){return function(e){return e({type:P})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_SUCCESS=t.UPDATE_START=t.UPDATE_ERROR=t.UPDATE=t.TOGGLE_ALBUM_DELETING=t.SELECT=t.RESET_ERROR=t.LOAD_SUCCESS=t.LOAD_START=t.LOAD_FAIL=t.EDIT_ALBUM_UNMOUNT=t.DELETE_SUCCESS=t.DELETE_MARK_CANCEL=t.CANCEL_ALBUMS_DELETING=t.ADD_SUCCESS=void 0;var f=n(76),p=function(e){return e&&e.__esModule?e:{default:e}}(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.load=r,t.create=a,t.toggleAlbumDeleting=o,t.cancelDeletePreparations=i,t.remove=s,t.update=l,t.editAlbumUnmount=u,t.cancelAlbumsDeleting=c,t.resetError=d;var g=n(20),h=n(231),v=(t.ADD_SUCCESS="myAlbums/ADD_SUCCESS",t.CANCEL_ALBUMS_DELETING="myAlbums/CANCEL_ALBUMS_DELETING"),E=t.DELETE_MARK_CANCEL="myAlbums/DELETE_MARK_CANCEL",y=t.DELETE_SUCCESS="myAlbums/DELETE_SUCCESS",b=t.EDIT_ALBUM_UNMOUNT="myAlbums/EDIT_ALBUM_UNMOUNT",_=t.LOAD_FAIL="myAlbums/LOAD_FAIL",S=t.LOAD_START="myAlbums/LOAD_START",O=t.LOAD_SUCCESS="myAlbums/LOAD_SUCCESS",P=t.RESET_ERROR="myAlbums/RESET_ERROR",T=(t.SELECT="myAlbums/SELECT",t.TOGGLE_ALBUM_DELETING="myAlbums/TOGGLE_ALBUM_DELETING"),A=(t.UPDATE="myAlbums/UPDATE",t.UPDATE_ERROR="myAlbums/UPDATE_ERROR"),C=t.UPDATE_START="myAlbums/UPDATE_START",I=(t.UPDATE_SUCCESS="myAlbums/UPDATE_SUCCESS",function(e){return m({},e,{cost:e.accessMode===h.ALBUMS_ACCESS_MODES.PAID?Number(e.cost):0,name:(0,p.default)(e.name)})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ALBUMS_ACCESS_MODES={FREE:"free",VERIFIED_USERS:"verified",FRIENDS:"friends",PAID:"paid"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=t(),i=o.auth.currentUser,s=o.myAlbums.selectedAlbumId;return e({type:A}),r.get("/users/"+i.id+"/albums/"+s+"/photos").then(function(t){var n=t.photos;e({type:C,data:{photos:n}})}).catch(a,function(t){e({type:T,data:{error:t}})})}}function o(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser,s=o.availableSettings.data,l=o.myAlbums.selectedAlbumId;return t({type:S}),(0,p.mapSeries)(e,function(e){if(!(e instanceof File||e instanceof Blob))throw new TypeError("Photo must be instance of File or Blob: "+e);return(0,g.validateImageFile)(e,s,o).then(function(t){return t&&v.default.log("validateImageFile() error",{error:t,photo:e,availableSettings:s}),{photo:e,error:t}})}).then(function(e){var n=(0,f.default)(e,function(e,t){var n=t.photo,r=t.error;r?e.errors.push(r):e.photosValid.push(n)},{photosValid:[],errors:[]}),r=n.photosValid,s=n.errors,u=void 0;return u=r.length?(0,p.each)(r,function(e){return a.post("/users/"+i.id+"/albums/"+l+"/photos",{photo:e},{dataType:"multipart"}).then(function(e){var n=e.photo;t({type:O,data:{photo:n}})})}):(0,p.resolve)(),u.then(function(){return s.length&&(t((0,m.error)((0,E.translate)(o,{messageId:"notifications.galleryUpdateFail",params:{error:s.pop()}}),"updateProfileFields")),t({type:y,data:{errors:s}})),t((0,m.success)((0,E.translate)(o,{messageId:"notifications.galleryUpdateSuccess"}),"updateProfileFields")),null})}).finally(function(){t({type:b})})}}function i(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=t(),i=o.auth.currentUser,s=o.myAlbums.selectedAlbumId,l=o.myPhotos.deletedPhotoIds,u=l.toArray();return u.length?(e({type:R}),r.del("/users/"+i.id+"/albums/"+s+"/photos",{photoIds:u}).then(function(){return e({type:M,data:{photoIds:u}}),e((0,m.success)((0,E.translate)(o,{messageId:"notifications.galleryUpdateSuccess"}),"updateProfileFields")),null}).catch(a,function(t){e({type:I,data:{error:t}})}).finally(function(){e({type:w})})):(0,p.reject)("There are no marked photos to be deleted")}}function s(e){return function(t){t({type:N,data:{url:e}})}}function l(e){return function(t){return t({type:L,data:{photoId:e}})}}function u(){return function(e){return e({type:P,data:{}})}}function c(e){return function(t){return t({type:_,data:{url:e}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.TOGGLE_PHOTO_DELETING=t.REMOVE_SUCCESS=t.REMOVE_START=t.REMOVE_FROM_IN_PROGRESS=t.REMOVE_FINISH=t.REMOVE_FAIL=t.LOAD_SUCCESS=t.LOAD_START=t.LOAD_FAIL=t.CANCEL_PHOTOS_DELETING=t.ADD_SUCCESS=t.ADD_START=t.ADD_IN_PROGRESS=t.ADD_FINISH=t.ADD_FAIL=void 0;var d=n(372),f=r(d);t.load=a,t.add=o,t.remove=i,t.removeFromInProgress=s,t.togglePhotoDeleting=l,t.cancelPhotosDeleting=u,t.addInProgress=c;var p=n(20),m=n(28),g=n(82),h=n(29),v=r(h),E=n(57),y=t.ADD_FAIL="myPhotos/ADD_FAIL",b=t.ADD_FINISH="myPhotos/ADD_FINISH",_=t.ADD_IN_PROGRESS="myPhotos/ADD_IN_PROGRESS",S=t.ADD_START="myPhotos/ADD_START",O=t.ADD_SUCCESS="myPhotos/ADD_SUCCESS",P=t.CANCEL_PHOTOS_DELETING="myPhotos/CANCEL_PHOTOS_DELETING",T=t.LOAD_FAIL="myPhotos/LOAD_FAIL",A=t.LOAD_START="myPhotos/LOAD_START",C=t.LOAD_SUCCESS="myPhotos/LOAD_SUCCESS",I=t.REMOVE_FAIL="myPhotos/REMOVE_FAIL",w=t.REMOVE_FINISH="myPhotos/REMOVE_FINISH",N=t.REMOVE_FROM_IN_PROGRESS="myPhotos/REMOVE_FROM_IN_PROGRESS",R=t.REMOVE_START="myPhotos/REMOVE_START",M=t.REMOVE_SUCCESS="myPhotos/REMOVE_SUCCESS",L=t.TOGGLE_PHOTO_DELETING="myPhotos/TOGGLE_PHOTO_DELETING"},function(e,t,n){"use strict";function r(e){return function(t){return t({type:A,data:{id:e}})}}function a(e){return function(t){t(r(e)),t((0,y.showModal)(b.MODAL_TYPES.EDIT_VIDEO))}}function o(e){return function(t){return t({type:w,data:{videoId:e}})}}function i(){return function(e){return e({type:O})}}function s(e){return function(t){return t({type:I,data:{error:e}})}}function l(e){return function(t){return t({type:C,data:{error:e}})}}function u(e){return function(t){return t({type:M,data:{error:e}})}}function c(){return function(e){e(l(null)),e(s(null))}}function d(e){return function(t){return t({type:k,data:{hasFailed:e}})}}function f(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser;return t({type:P}),a.post("/users/"+i.id+"/videos/upload-url",{filename:e.name,filesize:e.size},{preventServerErrorNotification:!0,preventNetworkErrorNotification:!0}).then(function(n){var r=n.url;return t((0,y.showModal)(b.MODAL_TYPES.EDIT_VIDEO,{isCloseBtnShown:!1,isNew:!0,isWrapperCloseDisabled:!0,file:e,uploadUrl:r})),null}).catch(_.ApplicationError,function(n){t(l(n)),t((0,y.showModal)(b.MODAL_TYPES.EDIT_VIDEO,{isNew:!0,file:e}))})}}function p(e){var t=e.uploadUrl,n=e.file,a=e.uploadProgressHandler,o=e.uploadSuccessHandler,i=e.xhrAbortProvider,l=e.freshFormDataProvider;return function(e,u,c){var d=c.Api,f=u(),p=f.auth.currentUser,m=function(){e(s({message:(0,S.translate)(f,{messageId:"videos.messages.uploadFailed"})}))};return d.post(t,{file:n},{ignorePrefix:!0,dataType:"multipart",upload:{progress:a,load:o,timeout:m,error:m},xhrAbortProvider:i}).then(function(e){var t=e.uploadId;return d.post("/users/"+p.id+"/videos",h({},l(),{uploadId:t}))}).then(function(t){var n=t.video;return e({type:L,data:{video:n}}),e(r(n.id)),null}).catch(function(t){e(s(t))})}}function m(e,t){return function(n,r,a){var o=a.Api,i=r(),s=i.auth.currentUser,l=i.myVideos.editingVideoId;return n({type:N}),o.put("/users/"+s.id+"/videos/"+l,e).then(function(e){var r=e.video;return n({type:R,data:{video:r}}),t||n((0,E.success)((0,S.translate)(i,{messageId:"videos.messages.videoUpdated"}))),null}).catch(function(e){throw n(u(e)),e})}}function g(e){return function(t,n,r){var a=r.Api,o=n(),i=o.auth.currentUser,s=o.myVideos.deletedVideoIds,l=e?[e]:s.toArray();return l.length?a.del("/users/"+i.id+"/videos/",{videoIds:l}).then(function(){return t({type:T,data:{videoIds:l}})}):(0,v.reject)("There are no marked videos to be deleted")}}Object.defineProperty(t,"__esModule",{value:!0}),t.SET_EDITING_VIDEO_PROCESSING_FAILED=t.UPLOAD_SUCCESS=t.UPDATE_ERROR=t.UPDATE_SUCCESS=t.UPDATE_START=t.TOGGLE_VIDEO_DELETING=t.SET_UPLOAD_ERROR=t.SET_PREUPLOAD_ERROR=t.SET_EDITING_ID=t.REMOVE_SUCCESS=t.REMOVE=t.LOAD_SUCCESS=t.FETCH_UPLOAD_URL_START=t.CLEAR_REMOVE_MARKS=void 0;var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.setEditingId=r,t.edit=a,t.toggleVideoDeleting=o,t.cancelDeletePreparations=i,t.setUploadError=s,t.setPreUploadError=l,t.setUpdateError=u,t.resetErrors=c,t.setEditingVideoProcessingFailed=d,t.startUploadProcess=f,t.upload=p,t.update=m,t.remove=g;var v=n(20),E=n(28),y=n(9),b=n(5),_=n(54),S=n(57),O=t.CLEAR_REMOVE_MARKS="myVideos/CLEAR_REMOVE_MARKS",P=t.FETCH_UPLOAD_URL_START="myVideos/FETCH_UPLOAD_URL_START",T=(t.LOAD_SUCCESS="myVideos/LOAD_SUCCESS",t.REMOVE="myVideos/REMOVE",t.REMOVE_SUCCESS="myVideos/REMOVE_SUCCESS"),A=t.SET_EDITING_ID="myVideos/SET_EDITING_ID",C=t.SET_PREUPLOAD_ERROR="myVideos/SET_PREUPLOAD_ERROR",I=t.SET_UPLOAD_ERROR="myVideos/SET_UPLOAD_ERROR",w=t.TOGGLE_VIDEO_DELETING="myVideos/TOGGLE_VIDEO_DELETING",N=t.UPDATE_START="myVideos/UPDATE_START",R=t.UPDATE_SUCCESS="myVideos/UPDATE_SUCCESS",M=t.UPDATE_ERROR="myVideos/UPDATE_ERROR",L=t.UPLOAD_SUCCESS="myVideos/UPLOAD_SUCCESS",k=t.SET_EDITING_VIDEO_PROCESSING_FAILED="myVideos/SET_EDITING_VIDEO_PROCESSING_FAILED"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getUnreadCount=t.getNotificationsIdsFromCounterpart=t.getPrivateMessagesCount=t.getNotificationData=t.getMessagesData=void 0;var o=n(374),i=r(o),s=n(146),l=r(s),u=n(11),c=r(u),d=n(14),f=r(d),p=n(18),m=n(32),g=n(16),h=n(27),v=n(41),E=h.PERSONAL_NOTIFICATION_TYPES.FRIENDSHIP_ACCEPTED,y=h.PERSONAL_NOTIFICATION_TYPES.FRIENDSHIP_INVITED,b=h.PERSONAL_NOTIFICATION_TYPES.GOLD_SUBSCRIPTION_CANCEL,_=h.PERSONAL_NOTIFICATION_TYPES.GOLD_SUBSCRIPTION_OVER,S=h.PERSONAL_NOTIFICATION_TYPES.GOLD_SUBSCRIPTION_RENEW,O=h.PERSONAL_NOTIFICATION_TYPES.KNIGHT,P=h.PERSONAL_NOTIFICATION_TYPES.MODEL_ONLINE,T=h.PERSONAL_NOTIFICATION_TYPES.OFFLINE_TIP,A=h.PERSONAL_NOTIFICATION_TYPES.UNLOCK_TIP,C=h.PERSONAL_NOTIFICATION_TYPES.PRIVATE_MESSAGE,I=h.PERSONAL_NOTIFICATION_TYPES.USER_PHOTO_DECLINED,w=h.PERSONAL_NOTIFICATION_TYPES.VIDEO_DECLINED,N=function(e){return e.myFriends.collection},R=function(e){return e.personalNotifications.collection},M=function(e){return e.privateMessages.collection},L=function(e){return e.users.collection},k=function(e){return e.subscriptions.collection},D=(t.getMessagesData=(0,m.createSelector)([R,M],function(e,t){var n=e.filter(function(e){return e.type===C}),r=e.filter(function(e){var t=e.type;return t===E||t===y||t===O||t===T||t===A||t===P||t===b||t===_||t===S||t===I||t===w}),o=n.groupBy(function(e){var n=e.recordId;return(0,g.findFirst)(t,{id:n}).senderId}).toArray();o=(0,l.default)(o,function(e){var t=e.max(function(e){return new Date(e.createdAt)});return new Date(t.createdAt)},"desc");var s=(0,c.default)([].concat(a(r),a(o)),function(e){return{message:p.OrderedMap.isOrderedMap(e)?e.last():e,count:p.OrderedMap.isOrderedMap(e)?e.size:1}});return{messages:(0,i.default)(s,function(e){return e.message.createdAt}).reverse(),notificationsCount:r.size+n.size}}),function(e,t){return t.notification});t.getNotificationData=(0,m.createSelector)([D,M,L,N,k],function(e,t,n,r,a){var o=e.recordId,i=e.type,s=void 0,l=void 0;switch(i){case C:s=function(){return(0,g.findFirst)(t,{id:o})},l="senderId";break;case E:s=function(){return(0,g.findById)(r,o)},l="inviteeId";break;case y:s=function(){return(0,g.findById)(r,o)},l="inviterId";break;case O:s=function(){return e},l="recordId";break;case P:s=function(){return(0,g.findById)(a,o)},l="modelId";break;case b:case _:case S:s=function(){return e},l="recordId";break;case T:case A:s=function(){return(0,g.findFirst)(t,{id:o})},l="senderId";break;case I:case w:s=function(){return e},l="userId"}var u=s();return{record:u,sender:u?(0,g.findFirst)(n,{id:u[l]}):null}}),t.getPrivateMessagesCount=(0,m.createSelector)([R],function(e){return(0,g.count)(e,{type:h.PERSONAL_NOTIFICATION_TYPES.PRIVATE_MESSAGE})}),t.getNotificationsIdsFromCounterpart=(0,m.createSelector)([v.getCurrentUser,R,M,function(e,t){return t}],function(e,t,n,r){var a=n.filter(function(t){return t.senderId===r&&e.id===t.recipientId}).map(function(e){return e.id}).toArray();return t.filter(function(e){return(0,f.default)(a,e.recordId)}).map(function(e){return e.id}).toArray()}),t.getUnreadCount=(0,m.createSelector)([R],function(e){return e.filter(function(e){return!e.isRead}).size})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FireBase=t.PERMISSION_STATE=void 0;var o=n(13),i=r(o),s=n(144),l=r(s),u=n(6),c=r(u),d=n(20),f=n(1058),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f);n(1076);var m=n(79),g=n(114),h=r(g),v=n(56),E=r(v),y=n(29),b=r(y),_=t.PERMISSION_STATE={GRANTED:"granted"},S=t.FireBase=function e(){var t=this;a(this,e),this.initializeApp=function(){b.default.info("FireBase.initializeApp()");var e=p.apps;return(0,i.default)(e)?t.client=p.initializeApp({messagingSenderId:h.default.MESSAGE_SENDER_ID}):t.client=(0,l.default)(e),t.messaging=p.messaging(),t.getIsPushApiAllowed().then(function(){return b.default.info("FireBase.initializeApp() Push api allowed"),null}).catch(function(){return b.default.info("FireBase.initializeApp() Push api disallowed"),null})},this.getIsPushApiAvailable=function(){return"undefined"!=typeof window&&("Notification"in window&&("permissions"in navigator&&("serviceWorker"in navigator&&"https:"===window.location.protocol)))},this.getIsNotificationEnabled=function(){return navigator.permissions.query({name:"notifications"}).then(function(e){var t=e.state;return b.default.info("FireBase.getIsNotificationEnabled() success",t),t===_.GRANTED?(0,d.resolve)(t):(0,d.reject)(new Error("Notification permission denied"))}).catch(function(e){throw b.default.error("FireBase.getIsNotificationEnabled() error",e),e})},this.getIsPushEnabled=function(){return navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){var t=e.state;return b.default.info("FireBase.getIsPushEnabled() success",t),t===_.GRANTED?(0,d.resolve)(t):(0,d.reject)(new Error("Push api permission denied"))}).catch(function(e){throw b.default.info("FireBase.getIsPushEnabled() error",e),e})},this.getIsPushApiAllowed=function(){return b.default.info("FireBase.getIsPushApiAllowed()"),t.getIsPushApiAvailable()?(0,d.all)([t.getIsPushEnabled(),t.getIsNotificationEnabled()]).then(function(){return b.default.info("FireBase.getIsPushAllowed() success"),E.default.set("pushApiEnabled",!0),null}).catch(function(e){return b.default.info("FireBase.getIsPushAllowed() error",e),E.default.set("pushApiEnabled",!1),e}):(0,d.reject)(new Error("Push api not enabled"))},this.getIsPushApiEnabled=function(){return E.default.get("pushApiEnabled",!1)},this.registerServiceWorker=function(){return navigator.serviceWorker.register("/assets/worker-push-notifications.js").then(function(e){return b.default.info("FireBase.registerServiceWorker() success",e),e.update(),t.messaging.useServiceWorker(e)}).catch(function(e){return b.default.error("FireBase.registerServiceWorker() error",e),null})},this.requestPermission=function(){return t.messaging.requestPermission().then(function(){return b.default.info("FireBase.requestPermission() success"),t.updateToken()}).catch(function(e){throw b.default.error("FireBase.requestPermission() error",e),e})},this.getToken=function(){return b.default.info("FireBase.getToken()"),t.messaging.getToken().then(function(e){return b.default.info("FireBase.getToken()",e),t.checkAndSaveToken(e)}).catch(function(e){throw b.default.error("FireBase.getToken() error",e),e})},this.checkAndSaveToken=function(e){if(b.default.info("FireBase.checkAndSaveToken()",e),t.userId){var n=E.default.get("pushNotificationTokens",{}),r=(0,c.default)(n,t.userId,null);e&&e!==r&&((0,m.updateFirebaseClientId)(e),n[t.userId]=e,E.default.set("pushNotificationTokens",n))}return(0,d.resolve)(e)},this.updateToken=function(){return b.default.info("FireBase.updateToken()"),t.getIsPushApiAllowed().then(t.registerServiceWorker).then(t.getToken).then(function(){return b.default.info("FireBase.updateToken() success"),null}).catch(function(e){return b.default.info("FireBase.updateToken() error",e),null})},this.updateUser=function(e){return b.default.info("FireBase.updateUser()",e),t.userId=e,t.updateToken()},this.removeToken=function(){b.default.info("FireBase.refreshToken()"),t.userId=null,E.default.remove("pushNotificationTokens")}},O=new S;t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=r(o),s=n(80),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(1),d=r(c),f=n(0),p=r(f),m=function(e){var t=e.className,n=e.shouldAnalyzePaymentSettings,r=e.type,o=e.user,s=a(e,["className","shouldAnalyzePaymentSettings","type","user"]),c=(0,l.default)([t,"badge","badge-"+r]).join(" ");return n&&!(0,i.default)(o,"hasPayoutSettingsAlert")?null:p.default.createElement("div",u({className:c},s,{"data-component-name":"Badge"}))};m.propTypes={className:d.default.string,shouldAnalyzePaymentSettings:d.default.bool,user:d.default.object,type:d.default.oneOf(["default","alert-medium","alert-small","question"])},m.defaultProps={shouldAnalyzePaymentSettings:!1,user:null,type:"default"},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.children,n=e.className,r=e.id,a=e.onClick,o=e.target,i=e.title,s=e.user,l=s.isModel,u=s.isStudio,f=s.username,p="user";return l?p="model":u&&(p="studio"),c.default.createElement(d.Link,{className:n,id:r,onClick:a,target:o,title:i,to:"/"+p+"/"+f},t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(35),i=r(o),s=n(1),l=r(s),u=n(0),c=r(u),d=n(24);a.defaultProps={className:"",title:"",onClick:i.default,target:"",id:""},a.propTypes={children:l.default.oneOfType([l.default.arrayOf(l.default.node),l.default.node]).isRequired,className:l.default.string,id:l.default.string,onClick:l.default.func,target:l.default.string,title:l.default.string,user:l.default.shape({id:l.default.number,isStudio:l.default.bool,isModel:l.default.bool}).isRequired},t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(15),u=r(l),c=function(e){var t=e.className,n=e.dateTime,r=e.showTime;return s.default.createElement("span",{className:t,"data-component-name":"DateTime"},r?(0,u.default)(n).format("LLL"):(0,u.default)(n).format("LL"))};c.propTypes={className:o.default.string,dateTime:o.default.oneOfType([o.default.instanceOf(Date),o.default.string]),showTime:o.default.bool},c.defaultProps={className:"date-time",dateTime:new Date,showTime:!1},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(8),g=r(m),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isActive,r=t.onClick;return d.default.createElement("a",{className:"edit-button",onClick:r,"data-component-name":"EditButton"},this.renderIf(n,function(){return d.default.createElement("button",{className:"btn btn-extra-small btn-apply"},e.t("button.save"))},function(){return d.default.createElement(g.default,{img:"edit"})}))}}]),t}(p.default);h.propTypes={isActive:u.default.bool,onClick:u.default.func.isRequired},h.defaultProps={isActive:!1},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),d=n(1),f=r(d),p=n(4),m=n(2),g=n(9),h=n(3),v=r(h),E=n(8),y=r(E),b=n(5),_=n(7),S=n(397),O=n(29),P=r(O),T=n(21),A=n(42),C=n(12),I=n(72),w=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.fullScreenButtonClickHandler=function(e){var t=r.props,n=t.model;t.isControlsBlockVisible&&(e.preventDefault(),e.stopPropagation(),r.props.emitButtonEvent(b.APP_BUTTONS.PLAYER_FULLSCREEN,{model:n}),P.default.log("Player fullScreenButtonClickHandler"))},r.volumeButtonClickHandler=function(e){var t=r.props,n=t.isControlsBlockVisible,a=t.volume;n&&(e.preventDefault(),e.stopPropagation(),r.props.changeVolume(a>0?0:50),P.default.log("Player volumeButtonClickHandler"))},r.settingsButtonClickHandler=function(e){var t=r.props,n=t.isControlsBlockVisible,a=t.isPlayerSettingsVisible;n&&(e.preventDefault(),e.stopPropagation(),r.props.toggleSettings(!a))},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderVolumeButton",value:function(){var e=this.props,t=e.volume,n=e.playerType;if(!(b.BROWSER_CAPABILITIES.iOS&&n===C.VIEWCAM_PLAYER_TYPES.HTML5)){var r=(0,S.getDeviceClickEvent)(this.volumeButtonClickHandler);return c.default.createElement("button",s({className:"btn btn-volume",title:this.t(t>0?"button.turnOffSound":"button.turnOnSound")},r),c.default.createElement(y.default,{img:"volume-"+(t>0?"off":"on")}))}return null}},{key:"renderSettingsButton",value:function(){var e=this.props.playerType;if(!b.BROWSER_CAPABILITIES.isMobile||!b.BROWSER_CAPABILITIES.isHTML5Player||e!==C.VIEWCAM_PLAYER_TYPES.HTML5&&e!==C.VIEWCAM_PLAYER_TYPES.SNAPSHOT)return null;var t=(0,S.getDeviceClickEvent)(this.settingsButtonClickHandler);return c.default.createElement("button",s({className:"btn btn-settings"},t),c.default.createElement(y.default,{img:"broadcast-settings",size:30}),c.default.createElement(y.default,{img:e===C.VIEWCAM_PLAYER_TYPES.HTML5?"hq":"lq",size:20}))}},{key:"renderFullscreenButton",value:function(){var e=this.props,t=e.isFullscreen,n=e.isLayoutUpToM,r=e.playerType,a=b.BROWSER_CAPABILITIES.iOS&&r===C.VIEWCAM_PLAYER_TYPES.SNAPSHOT&&n,o=b.BROWSER_CAPABILITIES.iPhoneOrIPod&&r===C.VIEWCAM_PLAYER_TYPES.WEBRTC;if(a||o)return null;var i=(0,S.getDeviceClickEvent)(this.fullScreenButtonClickHandler);return c.default.createElement("button",s({className:"btn btn-fullscreen",title:this.t(t?"button.turnOffFullscreen":"button.turnOnFullscreen")},i),c.default.createElement(y.default,{img:"fullscreen-"+(t?"off":"on")}))}},{key:"render",value:function(){var e=this.props.isControlsBlockVisible;return c.default.createElement("div",{className:this.c("player-controls",{hover:e}),"data-component-name":"PlayerControls"},c.default.createElement("div",{className:"player-controls-left"},this.renderVolumeButton()),c.default.createElement("div",{className:"player-controls-right"},this.renderSettingsButton(),this.renderFullscreenButton()))}}]),t}(v.default),N={changeVolume:A.changeVolume,emitButtonEvent:g.emitButtonEvent,toggleSettings:A.toggleSettings};w.propTypes=s({isLoggedIn:f.default.bool,isFullscreen:f.default.bool,isControlsBlockVisible:f.default.bool,isPlayerSettingsVisible:f.default.bool,model:f.default.object.isRequired,volume:f.default.number},(0,_.getActionPropTypes)(N));var R=function(e){var t=e.auth,n=t.isLoggedIn,r=t.isLoggingOut,a=e.viewCam,o=a.model,i=a.isFullscreen,s=a.isControlsBlockVisible,l=a.isPlayerSettingsVisible,u=a.playerVolume;return{isControlsBlockVisible:s,isFullscreen:i,isLayoutUpToM:(0,T.getIsLayoutUpToM)(e),isLoggedIn:n&&!r,isPlayerSettingsVisible:l,model:o,playerType:(0,I.getPlayerType)(e),volume:u}},M=function(e){return(0,p.bindActionCreators)(N,e)};t.default=(0,m.connect)(R,M)(w)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),i=r(o),s=n(875),l=r(s),u=n(20),c=r(u),d={excludeUserAgent:!0},f=function e(){var t=this;a(this,e),this.getFingerprint=function(e,n){new l.default(d).get(function(r,a){r&&!(0,i.default)(a)?(t.fingerprint={result:r,components:a},e(t.fingerprint)):(t.error=new Error("getFingerprint has failed"),n(t.error))})},this.getAsync=function(){return t.fingerprint?c.default.resolve(t.fingerprint):t.error?c.default.reject(t.error):t.promise},this.fingerprint=null,this.error=null,this.promise=new c.default(this.getFingerprint)},p=new f;t.default=p},,,,,,,function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.changedModelList=t.getNewModel=t.getSelectedModel=t.getStudioModels=t.getModelIds=void 0;var a=n(32),o=n(16),i=function(e){return e.users.collection},s=t.getModelIds=function(e){return e.studioModels.modelIds},l=function(e,t){return t.match.params.modelUsername},u=function(e){return e.studioModels.newModelCreatedId};t.getStudioModels=(0,a.createSelector)([i,s],function(e,t){return(0,o.find)(e,{id:[].concat(r(t))}).toArray()}),t.getSelectedModel=(0,a.createSelector)([l,i],function(e,t){return(0,o.findFirst)(t,{username:e})}),t.getNewModel=(0,a.createSelector)([u,i],function(e,t){return(0,o.findFirst)(t,{id:e})}),t.changedModelList=function(e,t){return e.isCreated!==t.isCreated&&t.isCreated}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCometUrl=t.getIsValidRoute=t.getServerTimeShortISOString=t.getServerTimeISOString=t.getServerTime=t.propsParamsViewServerHasChanged=void 0;var a=n(86),o=r(a),i=n(6),s=r(i),l=(t.propsParamsViewServerHasChanged=function(e,t){return(0,s.default)(e,"viewServers")!==(0,s.default)(t,"viewServers")},t.getServerTime=function(e,t){return new Date((t||new Date).getTime()+e.appSettings.data.timeDelta)}),u=t.getServerTimeISOString=function(e,t){return l(e,t).toISOString()};t.getServerTimeShortISOString=function(e,t){return u(e,t).replace(/\.(\d){3}Z/,"Z")},t.getIsValidRoute=function(e,t){return e.appSettings.data.availableRoutes.indexOf((0,o.default)(t))>-1},t.getCometUrl=function(e){var t=e.config.data,n=t.cometAuth;return t.wsUrl+"?auth="+n}},,function(e,t,n){"use strict";function r(e){return new Promise(function(t){var n=new FileReader;n.onload=function(){return t(n.result)},n.onerror=function(){return t(null)},n.readAsDataURL(e)})}function a(e){return new Promise(function(t){var n=new FileReader;n.onload=function(){return t(n.result)},n.onerror=function(){return t(null)},n.readAsArrayBuffer(e)})}function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,l.all)([r(e),a(e)]).then(function(e){var n=s(e,2),r=n[0],a=n[1],o={dataUrl:r,arrayBuffer:a};return r&&t?(0,u.getImageWithJpegOrientationApplied)(a,r).then(function(e){return{dataUrl:e,arrayBuffer:a}}):o})}function i(e){return e.split(".").slice(0,-1).join()}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getFileDataUrl=r,t.getFileArrayBuffer=a,t.getFileData=o,t.omitFileExtension=i;var l=n(20),u=n(285)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return new u.default(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=function(){n(new c.ValidationError("Image not valid"))},r.src=e})}function o(e,t){var n=g(e);return n<0?(0,l.resolve)(t):a(t).then(function(e){return m(e,n)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getBlobFromDataUrl=t.getJpegOrientation=t.getCutDataUrl=t.getDataUrlWithOrientationApplied=t.getTransformation=void 0;var i=n(11),s=r(i);t.getImageFromDataUrl=a,t.getImageWithJpegOrientationApplied=o;var l=n(20),u=r(l),c=n(54),d=/^data\:(.+)?\;base64,/,f=t.getTransformation=function(e,t){var n=e.height,r=e.width;return{1:function(e){return e.transform(1,0,0,1,0,0)},2:function(e){return e.transform(-1,0,0,1,r,0)},3:function(e){return e.transform(-1,0,0,-1,r,n)},4:function(e){return e.transform(1,0,0,-1,0,n)},5:function(e){return e.transform(0,1,1,0,0,0)},6:function(e){return e.transform(0,1,-1,0,n,0)},7:function(e){return e.transform(0,-1,-1,0,n,r)},8:function(e){return e.transform(0,-1,1,0,0,r)}}[t]||null},p=function(e){return e>=5},m=t.getDataUrlWithOrientationApplied=function(e,t){var n=f(e,t),r=n&&p(t),a=document.createElement("canvas");r?(a.width=e.height,a.height=e.width):(a.width=e.width,a.height=e.height);var o=a.getContext("2d");return o.imageSmoothingEnabled=!0,n&&n(o),o.drawImage(e,0,0),a.toDataURL("image/jpeg",.9)},g=(t.getCutDataUrl=function(e){var t=e.sourceImage,n=e.cutOffset,r=e.cutSize,a=e.resultSize,o=void 0===a?800:a,i=e.resultType,s=void 0===i?"image/jpeg":i,l=e.resultQuality,u=void 0===l?.9:l,c=Math.min(o,r),d=document.createElement("canvas");d.width=c,d.height=c;var f=d.getContext("2d");return f.imageSmoothingEnabled=!0,f.drawImage(t,n.x,n.y,r,r,0,0,c,c),d.toDataURL(s,u)},t.getJpegOrientation=function(e){var t=new DataView(e);if(65496!==t.getUint16(0,!1))return-2;for(var n=2;n<t.byteLength;){var r=t.getUint16(n,!1);if(n+=2,65505===r){if(n+=2,1165519206!==t.getUint32(n,!1))return-1;n+=6;var a=18761===t.getUint16(n,!1);n+=t.getUint32(n+4,a);var o=t.getUint16(n,a);n+=2;for(var i=0;i<o;i+=1)if(274===t.getUint16(n+12*i,a))return t.getUint16(n+12*i+8,a)}else{if(65280!=(65280&r))break;n+=t.getUint16(n,!1)}}return-1});t.getBlobFromDataUrl=function(e){var t=e.match(d)[1],n=atob(e.replace(d,"")),r=(0,s.default)(n,function(e,t,n){return n.charCodeAt(t)});return new Blob([new Uint8Array(r)],{type:t})}},,,,,,,function(e,t,n){"use strict";function r(e){return function(t,n,r){var l=r.Api,u=r.ApiError,c=n(),d=(0,a.getGuestFavoriteIds)(c);return t({type:o}),l.get("/models/search",{query:encodeURIComponent(e),favoriteIds:d}).then(function(e){var n=e.models;return t({type:i,data:{models:n}}),null}).catch(u,function(e){t({type:s,data:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.SEARCH_FAIL=t.SEARCH_SUCCESS=t.SEARCH_START=void 0,t.search=r;var a=n(97),o=t.SEARCH_START="modelSearch/SEARCH_START",i=t.SEARCH_SUCCESS="modelSearch/SEARCH_SUCCESS",s=t.SEARCH_FAIL="modelSearch/SEARCH_FAIL"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSortedFilteredMessagesKeys=t.getFilteredMessagesKeys=t.hasLocaleSensitivePropsChanged=t.translatedWordsDataSelectorFactory=t.getTranslatedStatistics=t.parseMessages=void 0;var a=n(146),o=r(a),i=n(541),s=r(i),l=n(46),u=r(l),c=n(6),d=r(c),f=n(50),p=r(f),m=n(26),g=r(m),h=n(372),v=r(h),E=n(86),y=r(E),b=n(70),_=r(b),S=n(13),O=r(S),P=n(280),T=r(P),A=n(14),C=r(A),I=n(47),w=r(I),N=n(48),R=r(N),M=n(11),L=r(M),k=n(32),D=function(e){return e.translator.languages},U=function(e,t){return t},j=function(e){return e.translator.messages},F=function(e){return e.auth.currentUser},B=function(e){return e.translator.selectedLocale},H=function(e){return e.translator.filters},V=function(e){return e.translator.sorters},G=function(e){return e.translator.screenshots},x=function(e){return e.translator.appliedFilter},W=(t.parseMessages=function(e){return(0,u.default)(e,function(e,t,n){return!(0,g.default)(t)&&(0,p.default)(t)?e[n]=(0,u.default)(t,function(e,t,n){return e[n.replace(/\./g,"#")]=t,e},{}):e[n]={},e},{})},function(e,t){var n=(0,d.default)(e,t,{}),r=/\s{2,}/g,a=void 0;return(0,u.default)(n,function(e,t){return a=t.replace(r," ").trim(),a?e+a.split(" ").length:e},0)}),Y=(t.getTranslatedStatistics=(0,k.createSelector)([D,j,F],function(e,t,n){var r=(0,s.default)(t.en),a=(0,v.default)(t,function(e,t,r){(n.isI18nAdmin||(0,C.default)(n.translatorLanguages,r))&&(e[r]=t)},{});return(0,L.default)(a,function(n,a){var o=W(t,a),i=(0,s.default)((0,w.default)(n,function(e){return e.replace(/\s{2,}/g," ").trim().length>0}));return{language:(0,d.default)((0,R.default)(e,function(e){return e.locale===a}),"name",""),keysCount:r,translatedKeysCount:i,translatedWordsCount:o}})}),t.translatedWordsDataSelectorFactory=function(){return(0,k.createSelector)([D,j,U],function(e,t,n){return{language:(0,d.default)((0,R.default)(e,function(e){return e.locale===n}),"name",""),count:W(t,n)}})},t.hasLocaleSensitivePropsChanged=function(e,t){var n=e.currentUser,r=e.userProfile;return(0,d.default)(n,"isI18nAdmin")!==(0,d.default)(t.currentUser,"isI18nAdmin")||(0,d.default)(r,"translatorLanguages")!==(0,d.default)(t.userProfile,"translatorLanguages")},t.getFilteredMessagesKeys=(0,k.createSelector)([j,B,H,V,x],function(e,t,n,r,a){var o=n.keyValue,i=n.onlyComposite,s=n.phrase;if((0,O.default)(e))return{};var l=e.en;return o||s||i?(0,_.default)(l).filter(function(n){var r=n.replace(/#/g,".");if("keyValue"===a)return o&&-1!==(0,y.default)(r).indexOf((0,y.default)(o));if("phrase"===a){var i=(0,d.default)(l,n),u=(0,d.default)(e,t+"."+n,"");return s&&(-1!==i.indexOf(s)||u&&-1!==u.indexOf(s))}if("onlyComposite"===a){var c=(0,d.default)(e,t+"."+n,"");return-1!==(0,T.default)(c,"{")&&-1!==(0,T.default)(c,"}")}return!1}):(0,_.default)(l)}));t.getSortedFilteredMessagesKeys=(0,k.createSelector)([Y,j,G,B,V],function(e,t,n,r,a){var i=a.sortByScreenshots,s=function(e){return i?null===(0,d.default)(n,e.replace(/#/g,"."),null):""===(0,d.default)(t,r+"."+e,"")};return(0,o.default)(e,s,"desc")})},function(e,t,n){"use strict";function r(e){var t=e.loginOrEmail,n=e.recaptcha;return function(e,r,a){var o=a.Api,i=a.ApiError,c=r();if(e({type:g}),(0,s.default)(t)){var d=new f.ValidationError("loginOrEmail is empty",{type:"loginOrEmail",loginOrEmail:[(0,p.translate)(c,{messageId:"errors.validation.requiredFields.loginOrEmail"})]});return e({type:h,data:{error:d}}),(0,l.reject)(d)}return o.post("/recovery",{loginOrEmail:t,recaptcha:n}).then(function(){return e({type:v}),e((0,u.success)((0,p.translate)(c,{messageId:"forgotPassword.notifications.success"}),"passwordRecovery")),null}).catch(i,function(t){throw e({type:h,data:{error:t}}),t})}}function a(e){return function(t,n,r){var a=r.Api,o=r.ApiError;return t({type:E}),a.get("/recovery/"+e).then(function(){return t({type:b}),null}).catch(o,function(e){t({type:y,data:{error:e}})})}}function o(e,t,n){return function(r,a,o){var i=o.Api,s=o.ApiError,g=a();return r({type:_}),t.length<m.MIN_PASSWORD_LENGTH||t.length>d.DEFAULT_MAX_INPUT_LENGTH?(r({type:S,data:{error:new f.ValidationError("Password Length Error",{type:"passwordError",text:(0,p.translate)(g,{messageId:"errors.validation.password",params:{minLength:m.MIN_PASSWORD_LENGTH}})})}}),(0,l.resolve)()):t!==n?(r({type:S,data:{error:new f.ValidationError("Password Repeat Error",{type:"passwordRepeatError",text:(0,p.translate)(g,{messageId:"errors.validation.passwordsDontMatch"})})}}),(0,l.resolve)()):i.post("/recovery/"+e,{password:t}).then(function(){return r({type:O}),r((0,c.loadWithTranslations)()),r((0,u.success)((0,p.translate)(g,{messageId:"passwordRecovery.successMessage"}),"passwordReset")),null}).catch(s,function(e){if(e.details&&e.details.password&&e.details.password.length>0)return void r({type:S,data:{error:new f.ValidationError("Password Error",{type:"passwordError",text:e.details.password.join(". ")})}});r({type:S,data:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_PASSWORD_SUCCESS=t.RESET_PASSWORD_FAIL=t.RESET_PASSWORD_START=t.CHECK_RECOVERY_KEY_SUCCESS=t.CHECK_RECOVERY_KEY_FAIL=t.CHECK_RECOVERY_KEY_START=t.FORGOT_PASSWORD_SUCCESS=t.FORGOT_PASSWORD_FAIL=t.FORGOT_PASSWORD_START=void 0;var i=n(13),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.requestPasswordRecovery=r,t.checkRecoveryKey=a,t.resetPassword=o;var l=n(20),u=n(28),c=n(109),d=n(5),f=n(54),p=n(57),m=n(27),g=t.FORGOT_PASSWORD_START="passwordRecovery/FORGOT_PASSWORD_START",h=t.FORGOT_PASSWORD_FAIL="passwordRecovery/FORGOT_PASSWORD_FAIL",v=t.FORGOT_PASSWORD_SUCCESS="passwordRecovery/FORGOT_PASSWORD_SUCCESS",E=t.CHECK_RECOVERY_KEY_START="passwordRecovery/CHECK_RECOVERY_KEY_START",y=t.CHECK_RECOVERY_KEY_FAIL="passwordRecovery/CHECK_RECOVERY_KEY_FAIL",b=t.CHECK_RECOVERY_KEY_SUCCESS="passwordRecovery/CHECK_RECOVERY_KEY_SUCCESS",_=t.RESET_PASSWORD_START="passwordRecovery/RESET_PASSWORD_START",S=t.RESET_PASSWORD_FAIL="passwordRecovery/RESET_PASSWORD_FAIL",O=t.RESET_PASSWORD_SUCCESS="passwordRecovery/RESET_PASSWORD_SUCCESS"},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getCounterpartLastReadMessageId=t.getCounterpartFirstUnreadMessageId=t.getSelectedConversation=t.getConversations=t.getSortedConversation=t.getConversation=t.getConversationEmpty=void 0;var a=n(48),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(32),l=n(16),u=function(e){return e.privateMessages.collection},c=function(e){return e.conversations.collection},d=function(e,t){return t},f=function(e,t){return t.match.params.username},p=function(e){return e.users.collection},m=t.getConversationEmpty=function(e){return{counterpartId:e,canSend:!0,hasMore:!0,messageDraft:"",unreadCount:0}},g=t.getConversation=(0,s.createSelector)([c,d],function(e,t){return(0,l.findFirst)(e,{counterpartId:t})||m(t)}),h=t.getSortedConversation=(0,s.createSelector)([c,u],function(e,t){return e.map(function(e){return i({},e,{lastMessage:(0,l.find)(t,function(t){var n=t.recipientId,r=t.senderId;return n===e.counterpartId||r===e.counterpartId}).maxBy(function(e){return e.id})})}).sortBy(function(e){var t=e.lastMessage;return t&&t.id}).reverse()}),v=(0,s.createSelector)([h,f,p],function(e,t,n){var a=function(e){var a=e.counterpartId,o=e.lastMessage,s=r(e,["counterpartId","lastMessage"]),u=(0,l.findFirst)(n,{id:a});return i({},s,{isSelected:t===u.username,counterpart:u,lastMessage:o})};return e.map(a).toArray()});t.getConversations=v;var E=(t.getSelectedConversation=(0,s.createSelector)([v],function(e){return(0,o.default)(e,{isSelected:!0})}),t.getCounterpartFirstUnreadMessageId=(0,s.createSelector)([g],function(e){return e.counterpartFirstUnreadMessageId}));t.getCounterpartLastReadMessageId=(0,s.createSelector)([E,d,u],function(e,t,n){if(!t||!n||0===n.size)return 0;var r=n.sortBy(function(e){return e.id});if(!e){var a=(0,l.findLast)(r,function(e){return e.recipientId===t});return a?a.id:0}var o=(0,l.findFirst)(r,{id:e});if(!o)return 0;var i=(0,l.findLast)(r,function(e){return e.createdAt<o.createdAt&&e.recipientId===t});return i?i.id:0})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e){e({type:A})}}function o(e){return function(t){return t({type:w,data:{source:e}})}}function i(e){return function(t,n,r){return r.Api.get("/users/checkUsername",{username:e}).then(function(){t({type:C})}).catch(function(e){t({type:T,data:{error:e}})})}}function s(e,t){return function(n,r){var a=r(),o=(0,S.validateFields)(e,a),s=(0,c.default)(e,t+".value"),l=(0,c.default)(o,t);return(0,f.default)(s)?(n({type:C}),(0,m.resolve)()):(0,f.default)(l)?n(i(s)):(n({type:T,data:{error:new v.ValidationError(l)}}),(0,m.reject)(l))}}function l(e){var t=e.login,n=e.email,r=e.password,a=e.recaptcha,o=e.source,i=e.isModel,s=void 0!==i&&i,l=e.isStudio,u=void 0!==l&&l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,i,l){var d=l.Api,f=l.ApiError,v=i(),E=v.auth.isLoggedIn,b=v.config.data.features.noPasswordMode,S=E?e((0,P.logout)()):(0,m.resolve)(),T="/users"+(b?"/noPassword":"");e({type:N});var A=(0,O.getModelPageUsername)(v);return S.then(function(){return _.default.getAsync()}).catch(function(){return{result:null}}).then(function(i){var l=i.result;return d.post(T,p({login:t,email:n,password:r,recaptcha:a,isModel:s,isStudio:u,fingerprint:l,modelName:A,source:o},y.default.buildAmplitudeBackendDTO({source:o,modelName:A})),{waitForAllToComplete:!0,lock:!0}).then(function(){return e((0,h.loadWithTranslations)())}).then(function(t){return e({type:R}),t}).then(function(t){var n=t.data;return c.success&&e((0,g.success)(c.success,"signUp")),y.default.signUp(n.user.id),{data:{user:n.user}}})}).catch(f,function(t){e({type:I,data:{error:t}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.SIGNUP_SUCCESS=t.SIGNUP_START=t.SIGNUP_SOURCE_CHANGED=t.SIGNUP_FAIL=t.SIGNUP_CHECK_SUCCESS=t.SIGNUP_CHECK_START=t.SIGNUP_CHECK_FAIL=void 0;var u=n(6),c=r(u),d=n(13),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.prepareCheck=a,t.emitSignupSourceChanged=o,t.check=i,t.validate=s,t.signUp=l;var m=n(20),g=n(28),h=n(109),v=n(54),E=n(59),y=r(E),b=n(274),_=r(b),S=n(82),O=n(68),P=n(34),T=t.SIGNUP_CHECK_FAIL="signUp/SIGNUP_CHECK_FAIL",A=t.SIGNUP_CHECK_START="signUp/SIGNUP_CHECK_START",C=t.SIGNUP_CHECK_SUCCESS="signUp/SIGNUP_CHECK_SUCCESS",I=t.SIGNUP_FAIL="signUp/UPDATE_FAIL",w=t.SIGNUP_SOURCE_CHANGED="signUp/SIGNUP_SOURCE_CHANGED",N=t.SIGNUP_START="signUp/SIGNUP_START",R=t.SIGNUP_SUCCESS="signUp/UPDATE_SUCCESS"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=function e(){var t=this;r(this,e),this.intervals=o.default.Map(),this.timeouts=o.default.Map(),this.startInterval=function(e,n,r){t.intervals=t.intervals.set(e,setInterval(r,n))},this.startTimeout=function(e,n,r){t.timeouts=t.timeouts.set(e,setTimeout(r,n))},this.stopInterval=function(e){clearInterval(t.intervals.get(e)),t.intervals=t.intervals.delete(e)},this.stopTimeout=function(e){clearTimeout(t.timeouts.get(e)),t.timeouts=t.timeouts.delete(e)},this.stopAllIntervals=function(){t.intervals.forEach(function(e,n){t.stopInterval(n)})},this.stopAllTimeouts=function(){t.timeouts.forEach(function(e,n){t.stopTimeout(n)})}};t.default=new i},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),l=r(s),u=n(128),c=r(u),d=n(36),f=r(d),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},g=n(1),h=r(g),v=n(0),E=r(v),y=n(3),b=r(y),_=1e3,S=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.renderRecaptcha=function(){var e=r.props.recaptchaSiteKey;if("undefined"==typeof window)return null;window.grecaptcha?r.recaptchaRef&&(r.recaptchaId=window.grecaptcha.render(r.recaptchaRef,{sitekey:e,"expired-callback":r.resetRecaptcha,callback:r.verifyChangeHandler})):r.renderRecaptchaDebounce()},r.renderRecaptchaDebounce=(0,f.default)(r.renderRecaptcha,_),r.resetRecaptcha=function(){(0,c.default)(r.recaptchaId)&&window.grecaptcha&&(window.grecaptcha.reset(r.recaptchaId),r.setState({secretKey:null}))},r.verifyChangeHandler=function(e){r.setState({secretKey:e})},i=n,o(r,i)}return i(t,e),p(t,[{key:"componentDidMount",value:function(){this.renderRecaptcha(),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.onRecaptchaRendered()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.recaptchaContainerId;return E.default.createElement("div",{id:r,className:this.c("recaptcha",n),ref:function(t){e.recaptchaRef=t},"data-component-name":"Recaptcha"})}},{key:"value",get:function(){return this.state.secretKey}}]),t}(b.default);S.propTypes={className:h.default.string,onRecaptchaRendered:h.default.func,recaptchaContainerId:h.default.string,recaptchaSiteKey:h.default.string.isRequired},S.defaultProps={className:"",onRecaptchaRendered:l.default,recaptchaContainerId:null},t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(3),g=r(m),h=n(10),v=r(h),E=n(199),y=r(E),b=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.cancelClickHandler=function(){r.props.onCancel()},r.confirmClickHandler=function(){r.props.onConfirm()},a=n,i(r,a)}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=a(e,["className","children"]);return p.default.createElement(y.default,l({className:this.c("confirmation-modal",t),onClose:this.cancelClickHandler,titlePosition:"outside"},r,{"data-component-name":"ConfirmationModal"}),n,p.default.createElement("div",{className:"confirmation-modal-controls controls"},p.default.createElement(v.default,{className:"confirmation-modal-btn-cancel",onClick:this.cancelClickHandler},this.t("button.cancel")),p.default.createElement(v.default,{className:"confirmation-modal-btn-confirm",onClick:this.confirmClickHandler,style:"primary"},this.t("button.ok"))))}}]),t}(g.default);b.propTypes={onConfirm:d.default.func.isRequired,onCancel:d.default.func.isRequired},t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(33),l=r(s),u=n(35),c=r(u),d=n(13),f=r(d),p=n(6),m=r(p),g=n(36),h=r(g),v=n(187),E=r(v),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},S=n(20),O=r(S),P=n(1),T=r(P),A=n(0),C=r(A),I=n(2),w=n(24),N=n(4),R=n(3),M=r(R),L=n(390),k=r(L),D=n(381),U=r(D),j=n(8),F=r(j),B=n(22),H=r(B),V=n(39),G=r(V),x=n(5),W=n(54),Y=n(7),K=n(1242),q=r(K),z=n(87),X=n(618),Z=r(X),Q=n(1243),J=r(Q),$=n(1244),ee=r($),te=n(619),ne=r(te),re=n(12),ae=n(45),oe=n(72),ie=500,se=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.loadSnapshotPromise=null,r.snapshotTimestamp=null,r.propsUpdateToActionsMap=[{update:["model.id","model.status"],action:function(e){(0,E.default)(r.loadSnapshot,e)}}],r.loadSnapshot=function(e){r.loadSnapshotCancel();var t=r,n=t._isMounted,a=e.base64Preview,o=e.fallbackTimeout,i=e.model.previewUrlThumbSmall,s=r.getSnapshotUrl(e);if(!s&&!a)return void(n&&r.setStateIfModified({snapshotUrl:i}));r.loadSnapshotPromise=new O.default(function(e,t,n){var r=new Image,a=setTimeout(function(){r.src="",t(new W.ApplicationError("Cancel to load image: "+s))},o);r.onload=function(){clearTimeout(a),setTimeout(e,100)},r.onerror=function(){clearTimeout(a),t(new W.ApplicationError("Failed to load image: "+s))},n(function(){r.src="",clearTimeout(a)}),r.src=s}).then(function(){return n&&r.setStateIfModified({snapshotUrl:s}),null}).catch(function(){n&&r.setStateIfModified({snapshotUrl:i})})},r.loadSnapshotPlayer=(0,h.default)(function(){var e=r.props;(0,e.getHoverPlayerData)(e.model.id)},ie),r.mouseEnterEventHandler=function(){r.props.hasPlayOnHover&&r.loadSnapshotPlayer()},r.mouseLeaveEventHandler=function(){var e=r.props.clearHoverPlayerData;r.loadSnapshotPlayer.cancel(),e()},r.renderSnapshotPlayer=function(){var e=r.props.streamUrl;return C.default.createElement(ne.default,{streamUrl:e})},r.renderGenderIcon=function(){var e=r.props.model,t=e.gender,n=e.broadcastGender,a=n&&n!==re.BROADCASTING_GENDERS.GROUP?n:t;return a?C.default.createElement("div",{className:"gender-wrapper"},C.default.createElement(F.default,{img:a,size:17})):null},r.renderPromoFlags=function(){var e=r.props,t=e.htmlIdPrefix,n=e.model,a=[];return a.push(C.default.createElement(U.default,{key:"award-place",htmlIdPrefix:t,place:n.topBestPlace,username:n.username,topMedalHeight:26})),a},i=n,o(r,i)}return i(t,e),b(t,[{key:"componentWillUnmount",value:function(){this.loadSnapshotCancel(),_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"getSnapshotUrl",value:function(e){var t=e.model,n=t.id,r=t.snapshotServer;if(t.status!==re.MODEL_STATUSES.STATUS_PUBLIC||!r)return null;var a=this.props.snapshotTemplateConfig,o=a.snapshotUrlTemplate,i=a.snapshotMap;return this.snapshotTimestamp=(0,m.default)(i,r),q.default.parse(o,{parity:""+n%2,convertServer:r,modelId:n,timestamp:this.snapshotTimestamp,type:x.BROWSER_CAPABILITIES.retina?"previews":"thumbs"})}},{key:"loadSnapshotCancel",value:function(){this.loadSnapshotPromise&&this.loadSnapshotPromise.cancel()}},{key:"renderStatus",value:function(){var e=(0,m.default)(this.props,"model.status"),t=void 0,n=void 0;switch(e){case re.MODEL_STATUSES.STATUS_P2P:t=this.t("modelList.status.cam2cam"),n="spy-on";break;case re.MODEL_STATUSES.STATUS_PRIVATE:case re.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE:t=this.t("modelList.status.private"),n="lock-1";break;default:t=null}return t?C.default.createElement("div",{className:"private-status"},C.default.createElement(F.default,{className:"private-status-icon",img:n,size:18}),C.default.createElement("span",{className:"private-status-label"},t)):null}},{key:"renderOnlineStatus",value:function(){var e=this.props,t=e.isStatusVisible,n=e.model;return t&&n.isLive?C.default.createElement(F.default,{img:"badge-live"}):null}},{key:"renderCountryFlag",value:function(){var e=this.props,t=e.htmlIdPrefix,n=e.model,r=n.country,a=n.id,o=!x.BROWSER_CAPABILITIES.touch,i=t+"_model_country_"+a;return r?C.default.createElement("div",{className:"country-flag-wrapper",id:i},C.default.createElement(k.default,{country:r}),this.renderIf(o,C.default.createElement(G.default,{isMobileRelative:!1,placement:"top",shouldPreventDefault:!0,targetId:i},this.t("country."+r)))):null}},{key:"renderFavoritedHeart",value:function(){var e=this.props,t=e.isFavoritedHeartHidden,n=e.isInFavorites,r=e.model;if(!n||t)return null;var a=this.props.htmlIdPrefix,o=a+"_favorited_heart_"+r.id;return C.default.createElement("div",{id:o,className:"favorited-heart"},C.default.createElement(F.default,{img:"badge-favorite"}),C.default.createElement(G.default,{isMobileRelative:!1,placement:"top",shouldPreventDefault:!0,targetId:o},this.t("myFavoriteModel")))}},{key:"renderHeader",value:function(){var e=this.props.model;return C.default.createElement("div",{className:"model-thumb-header"},C.default.createElement("div",{className:"model-thumb-header-left"},this.renderOnlineStatus(),C.default.createElement(Z.default,{model:e})),C.default.createElement("div",{className:"model-thumb-header-right"},this.renderIf(e.isNew,C.default.createElement(F.default,{img:"badge-new"}),this.renderPromoFlags)))}},{key:"renderLeftSideBox",value:function(){var e=this.props,t=e.htmlIdPrefix,n=e.isFavoritedHeartHidden,r=e.isInFavorites,a=e.model,o=a.id,i=a.isRecommended,s=!x.BROWSER_CAPABILITIES.touch,l=t+"_model_recommended_"+o;return!i||r&&!n?null:C.default.createElement("div",{id:l,className:"model-thumb-left"},C.default.createElement(F.default,{img:"flag-recommended"}),this.renderIf(s,C.default.createElement(G.default,{isMobileRelative:!1,placement:"top",shouldPreventDefault:!0,targetId:l},this.t("modelList.recommended.tooltip"))))}},{key:"renderFooter",value:function(){var e=this.props,t=e.isFavoritedHeartHidden,n=e.isInFavorites,r=e.model.username,a=e.searchString;return C.default.createElement("div",{className:this.c("model-thumb-footer",{favorited:n&&!t})},C.default.createElement("div",{className:"model-thumb-footer-left"},C.default.createElement("div",{className:"favorite-heart-wrapper"},this.renderFavoritedHeart()),C.default.createElement(J.default,{username:r,searchString:a}),this.renderGenderIcon()),C.default.createElement("div",{className:"model-thumb-footer-right"},this.renderCountryFlag()))}},{key:"render",value:function(){var e=this,t=this.props,n=t.base64Preview,r=t.children,a=t.clickHandler,o=t.htmlIdPrefix,i=t.model,s=t.streamUrl,l=t.hasPlayOnHover,u=t.viewCamUrl,c=this.state.snapshotUrl,d=c||n,f={};return d&&(f.backgroundImage="url("+d+")"),C.default.createElement("div",{className:"model-list-item","data-component-name":"ModelListItem"},r,C.default.createElement("div",{className:"model-thumb"},this.renderIf(i.ratingDebug,C.default.createElement(ee.default,{htmlIdPrefix:o,model:i})),C.default.createElement(w.Link,{className:"model-thumb-image",to:u,style:f,onClick:a,"data-snapshot-timestamp":this.snapshotTimestamp,"data-model-id":i.id,onMouseEnter:this.mouseEnterEventHandler,onMouseLeave:this.mouseLeaveEventHandler},C.default.createElement("div",{className:"hover-player-wrapper",ref:function(t){e.playerWrapperRef=t}},this.renderIf(l&&s,this.renderSnapshotPlayer)),this.renderHeader(),this.renderIf(n&&!c,C.default.createElement(H.default,{isCentered:!0,loaderType:"sector-circle",size:40})),this.renderLeftSideBox(),this.renderStatus(),this.renderFooter())))}}]),t}(M.default),le={getHoverPlayerData:z.getHoverPlayerData,clearHoverPlayerData:z.clearHoverPlayerData};se.propTypes=y({base64Preview:T.default.string,clickHandler:T.default.func,fallbackTimeout:T.default.number,htmlIdPrefix:T.default.oneOfType([T.default.number,T.default.string]),isStatusVisible:T.default.bool,isFavoritedHeartHidden:T.default.bool,isInFavorites:T.default.bool,model:T.default.object.isRequired,snapshotTemplateConfig:T.default.shape({snapshotMap:T.default.object,snapshotUrlTemplate:T.default.string}).isRequired,searchString:T.default.string,viewCamUrl:T.default.string},(0,Y.getActionPropTypes)(le)),se.defaultProps={clickHandler:c.default,fallbackTimeout:1e4,htmlIdPrefix:"",isStatusVisible:!0,isFavoritedHeartHidden:!1};var ue=function(e,t){var n=t.model,r=n.id,a=n.username,o=n.snapshotServer,i=n.status,s=e.abTesting.abTestingData.playerOnThumbHover,u=e.appSettings,c=e.modelsOnline.hoverPlayerData,d=e.config.data,p=d.hasPlayOnHover,m=d.snapshotTimeout,g=e.modelFilter.searchString,h=p&&!x.BROWSER_CAPABILITIES.touch&&"B"===s;return{searchString:g,streamUrl:h&&i===re.MODEL_STATUSES.STATUS_PUBLIC&&!(0,f.default)(c)&&c.modelId===r?(0,oe.getSnapshotUrl)({snapshotServer:o,streamName:c.streamName,modelToken:c.modelToken}):null,hasPlayOnHover:h,snapshotTemplateConfig:(0,l.default)(u.data,["snapshotMap","snapshotUrlTemplate"]),fallbackTimeout:1e3*m,viewCamUrl:(0,ae.getViewCamUrl)(e,a)}},ce=function(e){return(0,N.bindActionCreators)(le,e)};t.default=(0,I.connect)(ue,ce)(se)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stopStream=t.requestUserMedia=t.isGetUserMediaSupported=void 0;var o=n(278),i=r(o),s=n(69),l=r(s),u=n(20),c=r(u),d=n(29),f=r(d),p=function(){if("undefined"==typeof navigator)return new Error("Webcam.getGetUserMediaImplementation: this module can only be used in the browser, not node.js");if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return function(e,t,n){return navigator.mediaDevices.getUserMedia(e).then(t).catch(n)};var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return(0,l.default)(e)?function(t,n,r){e.call(navigator,t,n,r)}:new Error("getUserMedia is not implemented in this browser")};t.isGetUserMediaSupported=function(){return!(p()instanceof Error)},t.requestUserMedia=function(e){var t=p();return t instanceof Error?c.default.reject(t):new c.default(function(n,r){t(e,n,r)})},t.stopStream=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"==typeof window)throw new Error("Webcam.requestUserMedia: this module can only be used in the browser, not node.js");if((0,l.default)(e.stop))return void e.stop();(0,l.default)(e.getAudioTracks)&&(0,l.default)(e.getVideoTracks)?[].concat(a(e.getVideoTracks()),a(e.getAudioTracks())).forEach(function(e){return e.stop()}):t?window.location&&window.location.reload():f.default.error("This browser does not support stopping of the stream, that means that the webcam is still running.");var n=window,r=n.MediaStream,o=n.webkitMediaStream,s=r;if((0,i.default)(r)&&!(0,i.default)(o)&&(s=o),!(e instanceof s))throw new Error("Webcam.stopStream: you must pass in a valid MediaStream.")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserRole=t.canSendCurrentTypeError=t.USER_ROLES=void 0;var o=n(33),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(861),c=r(u),d=n(114),f=r(d),p=n(62),m=n(530),g="5db94727fb84466faf12093c11ddabe2@sentry.stripchat.com/2",h=t.USER_ROLES=["isAdmin","isSupport","isTranslator","isGreen","isGold","isRegular","isStudio","isModel"],v=90,E=99,y=t.canSendCurrentTypeError=function(e,t){var n=t.isClientErrorEnabled,r=t.isServerErrorEnabled;return(0,m.getIsClientErrorStatus)(e.statusCode)&&n||(0,m.getIsServerErrorStatus)(e.statusCode)&&r},b=t.getUserRole=function(e){if(!e)return"guest";var t=h.find(function(t){return!0===e[t]});return t?t.slice(2).toLowerCase():"unknown"},_=function(){function e(){var t=this;a(this,e),this.canSendReport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return f.default.ERROR_REPORTING_ENABLED&&!(0,p.isSucceededWithProbability)(e)},this.canSendErrorReport=function(e){return f.default.ERROR_REPORTING_ENABLED&&y(e,t.errorReporterConfig)&&(0,p.isSucceededWithProbability)(t.errorReporterConfig.percent)},this.canSendPerformanceReport=function(){return f.default.PERFORMANCE_REPORTING_ENABLED&&!(0,p.isSucceededWithProbability)(E)},f.default.ERROR_REPORTING_ENABLED&&c.default.config("https://"+g,{release:f.default.VERSION,fingerprint:["{{ default }}"]}).install()}return l(e,[{key:"bindStore",value:function(e){var t=this;f.default.ERROR_REPORTING_ENABLED&&e&&e.subscribe(function(){if(e.getState().auth.isLoggedIn!==t.isLoggedIn){var n=e.getState(),r=n.auth,a=r.currentUser,o=r.guestId,i=r.isLoggedIn,s=n.config.data,l=s.env,u=s.errorReporter;t.errorReporterConfig=u,t.configEnv=l,t.guestId=o,t.isLoggedIn=i,t.currentUser=a,t.updateRavenContext()}})}},{key:"updateRavenContext",value:function(){c.default.setTagsContext({role:b(this.currentUser),env:this.configEnv}),c.default.setUserContext(s({id:this.isLoggedIn?this.currentUser.id:this.guestId},this.isLoggedIn?{username:this.currentUser.username}:{}))}},{key:"setModelContext",value:function(e){if(e){var t=(0,i.default)(e,["id","username","status","broadcastServer","snapshotServer"]);c.default.setExtraContext({model:t}),c.default.setTagsContext({modelName:t.username,modelStatus:t.status,broadcastServer:t.broadcastServer,snapshotServer:t.snapshotServer})}}},{key:"removeModelContext",value:function(){c.default.setExtraContext({model:null})}},{key:"sendError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.canSendErrorReport(e)){var r=s({},t,{errorDetails:e.details});c.default.captureException(e,{extra:r,tags:n})}}},{key:"sendMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments[3];this.canSendReport(r)&&c.default.captureMessage(e,{extra:t,level:n})}},{key:"sendPerformanceReport",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";this.canSendPerformanceReport()&&c.default.captureMessage(e,{extra:t,level:n})}}]),e}(),S=new _;t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomLowerString=t.getRandomString=t.isShallowEqual=t.is=void 0;var r=n(869),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.prototype.hasOwnProperty,s=t.is=function(e,t){return e===t?0!==e||0!==t||1/e==1/t:Number.isNaN(e)&&Number.isNaN(t)},l=(t.isShallowEqual=function(e,t){if(s(e,t))return!0;if("object"!==(void 0===e?"undefined":o(e))||null===e||"object"!==(void 0===t?"undefined":o(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a+=1)if(!i.call(t,n[a])||!s(e[n[a]],t[n[a]]))return!1;return!0},t.getRandomString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return(0,a.default)(t,e).join("")});t.getRandomLowerString=function(e){return l(e,"abcdefghijklmnopqrstuvwxyz0123456789")}},,,,,,,function(e,t,n){"use strict";function r(e){return function(t,n,r){var s=r.ApiError;return t({type:o}),t((0,a.loadOne)(e,[a.REQUEST_TYPES.FRIENDS])).catch(s,function(e){t({type:i,data:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0,t.load=r;var a=n(37),o=t.LOAD_START="userFriends/LOAD_START",i=(t.LOAD_SUCCESS="userFriends/LOAD_SUCCESS",t.LOAD_FAIL="userFriends/LOAD_FAIL")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=e.guests,n=e.spies,r=e.invisibles,o=e.users,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e,s){var l=s().auth.currentUser,u=(0,p.default)(o,"user"),c=(0,p.default)(u,"id"),f=(0,p.default)(o,function(e){var t=e.user,n=e.tokens;return{userId:t.id,tokens:n}}),m=(0,p.default)(o,function(e){var t=e.user;return{userId:t.id,goldPoints:t.goldPoints}}),g={canBan:(0,d.default)(o,function(e,t){var n=t.user,r=t.canBan;return E({},e,a({},l.id+":"+n.id,r))},{})};e({type:_.USERS_UPDATE_TOKENS,data:{userTokens:f}}),e({type:_.USERS_UPDATE_GOLD_POINTS,data:{goldPoints:m}}),e({type:_.USERS_SAVE,data:{users:u}}),e({type:b.UPDATE,data:{relations:g}}),e({type:i?C:T,data:{camMembersIds:c,guests:t,invisibles:r,spies:n}})}}function i(e){return function(t){t({type:A,data:e})}}function s(){return function(e,t,n){var r=n.Api,a=t().auth.currentUser;return r.get("/models/"+a.id+"/viewers").then(function(t){return e(o(t,!0))})}}function l(e){var t=e.guests,n=e.invisibles,r=e.spies;return function(e){e({type:I,data:{guests:t,spies:r,invisibles:n}})}}function u(e){var t=e.guests,n=e.invisibles,r=e.spies,a=e.userIds;return function(e,s,u){var c=u.Api,d=s(),f=d.auth.currentUser,p=(0,S.getCamMembersIdsSet)(d).toArray(),m=(0,v.default)(p,a),h=P%O==0;P+=1,(0,g.default)(m)||e(i(m));var E=h?a:(0,y.getMissingIds)(d.users,a);return(0,g.default)(E)?e(l({guests:t,invisibles:n,spies:r})):c.get("/models/"+f.id+"/viewers").then(function(t){return e(o(t,h))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_COUNTERS=t.REPLACE=t.REMOVE=t.ADD=void 0;var c=n(46),d=r(c),f=n(11),p=r(f),m=n(13),g=r(m),h=n(279),v=r(h),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.add=o,t.remove=i,t.load=s,t.updateViewersCount=l,t.update=u;var y=n(16),b=n(98),_=n(37),S=n(536),O=5,P=0,T=t.ADD="camMembers/ADD",A=t.REMOVE="camMembers/REMOVE",C=t.REPLACE="camMembers/REPLACE",I=t.UPDATE_COUNTERS="camMembers/UPDATE_COUNTERS"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSmileIndex=t.getSmileCode=t.smilesRegexp=t.smiles=void 0;var r=n(280),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=t.smiles=["grinning","tongue","thumbsup","lol","wink","flirting","inlove","cool","facepalm","wanker","agree","ahh","airkiss","asking","ass","behind","blowjob","boobs","bounce","bye","chainsaw","cheekkiss","crazyguy","flirt","cry","redface","kissass","kissing","movingboobs","onbed","sado","shakeass","stuckouttongue","cheerleader","dancing","eros","king","kitty","knight","rainbow","rocknroll","shy"],i=(t.smilesRegexp=new RegExp("(:"+o.join(":|:")+":)","g"),t.getSmileCode=function(e){return e.replace(/:/g,"")});t.getSmileIndex=function(e){return/^:[a-z]+:$/.test(e)?(0,a.default)(o,i(e)):-1}},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getIfShouldClearError=t.getHasNoMessagesSent=t.getCanSend=t.getCanSendSmiles=t.hasChatOwnerChanged=t.getLastMessage=t.getChatMessages=void 0;var a=n(6),o=r(a),i=n(18),s=r(i),l=n(32),u=n(16),c=n(12),d=n(66),f=function(e){return e.viewCam.model?e.viewCam.model.id:null},p=function(e){return e.modelChat.messages.server.collection},m=function(e){return e.modelChat.messages.system.collection},g=function(e){return e.modelChat.messages.console.collection},h=function(e){return e.modelChat.messages.app.collection},v=t.getChatMessages=(0,l.createSelector)([p,m,g,h,f],function(e,t,n,r){var a=s.default.OrderedMap().merge(e,t,n,r);return(0,u.findAll)(a,["createdAt","id"]).valueSeq()});t.getLastMessage=(0,l.createSelector)([v],function(e){return(0,u.findLast)(e,{},["createdAt","id"])}),t.hasChatOwnerChanged=function(e,t){return e.chatOwner&&e.chatOwner.id!==t.chatOwner.id},t.getCanSendSmiles=function(e,t){var n=e.auth;return n.isLoggedIn&&(n.currentUser.isGold||t===n.currentUser.id)},t.getCanSend=function(e,t){var n=e.auth,r=n.currentUser;if(n.isLoggedIn&&t===r.id)return!0;var a=e.viewCam,o=a.model,i=a.isOwnShow,s=a.isCamAvailable,l=c.MODEL_STATUSES.STATUS_PRIVATE,u=c.MODEL_STATUSES.STATUS_P2P,d=c.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE;return!(o&&(o.status===l||o.status===d||o.status===u))||i||!s},t.getHasNoMessagesSent=function(e,t){return!p(e).some(function(e){return e.senderId===t})},t.getIfShouldClearError=function(e){var t=e.modelChat.sendError;if(!t)return!1;var n=(0,o.default)(t,"details.subtype","");return n!==d.SYSTEM_MESSAGE_SUBTYPES.EMAIL_VERIFY_REQUIRED&&n!==d.SYSTEM_MESSAGE_SUBTYPES.LOGIN_REQUIRED&&n!==d.SYSTEM_MESSAGE_SUBTYPES.CANNOT_SEND}},function(e,t,n){"use strict";function r(e,t){return{type:s,data:{name:e,value:t}}}function a(e){return{type:l,data:{name:e}}}function o(){return function(e){e(r("lastIndexShowId",(0,i.getRandomString)(20))),e({type:u,data:{}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.INDEX_CLICK_ON_THUMB=t.INDEX_SHOW=t.REMOVE_EVENT_INDEX=t.ADD_EVENT_INDEX=void 0,t.addEventIndex=r,t.removeEventIndex=a,t.triggerIndexShow=o;var i=n(348),s=t.ADD_EVENT_INDEX="analytics/ADD_EVENT_INDEX",l=t.REMOVE_EVENT_INDEX="analytics/REMOVE_EVENT_INDEX",u=t.INDEX_SHOW="modelsOnline/INDEX_SHOW";t.INDEX_CLICK_ON_THUMB="modelsOnline/INDEX_CLICK_ON_THUMB"},function(e,t,n){"use strict";function r(){return function(e,t,n){var r=n.Api,s=n.ApiError;e({type:a});var l=t(),u=l.ssr,c=u.headers,d=u.subdomain,f="undefined"==typeof window&&d?{subdomain:d}:{},p="undefined"!=typeof window?{}:{ssrHeaders:c};return r.get("/i18n",f,p).then(function(t){return e({type:o,data:t}),t}).catch(s,function(t){e({type:i,error:t})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.load=r;var a=t.LOAD_START="i18n/LOAD_START",o=t.LOAD_SUCCESS="i18n/LOAD_SUCCESS",i=t.LOAD_FAIL="i18n/LOAD_FAIL"},,,,,function(e,t,n){"use strict";function r(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.currentUser.id;return e({type:l}),r.post("/lottery/users/"+o).then(function(t){e({type:u,data:{user:t}})}).catch(function(t){e((0,s.error)(t.message,"lottery"))})}}function a(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.currentUser.id;return e({type:c}),r.put("/lottery/users/"+o+"/prize").then(function(t){e({type:d,data:{user:t}})}).catch(function(t){e((0,s.error)(t.message,"lottery"))})}}function o(e){return function(t){t({type:f,data:{lottery:e}})}}function i(){return function(e,t,n){var r=n.Api,a=n.ApiError;return r.get("/lottery").then(function(t){e({type:f,data:{lottery:t}})}).catch(a,function(){e({type:p})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_FAIL=t.LOAD_SUCCESS=t.CLAIM_SUCCESS=t.CLAIM_START=t.PARTICIPATE_SUCCESS=t.PARTICIPATE_START=void 0,t.participate=r,t.claim=a,t.update=o,t.load=i;var s=n(28),l=t.PARTICIPATE_START="lottery/PARTICIPATE_START",u=t.PARTICIPATE_SUCCESS="lottery/PARTICIPATE_SUCCESS",c=t.CLAIM_START="lottery/CLAIM_START",d=t.CLAIM_SUCCESS="lottery/CLAIM_SUCCESS",f=t.LOAD_SUCCESS="lottery/LOAD_SUCCESS",p=t.LOAD_FAIL="lottery/LOAD_FAIL"},,,function(e,t,n){"use strict";function r(e){return function(t){t({type:u,data:{levels:e}})}}function a(e){return function(t){t({type:c,data:{status:e}})}}function o(e,t){return function(n,r,a){return a.Api.put("/models/"+e+"/lovense",{settings:{levels:t}})}}function i(e){return function(t,n,r){return r.Api.del("/models/"+e+"/lovense")}}function s(e){var t=e.type,n=e.status,r=void 0===n?"":n,a=e.detail,o=void 0===a?{}:a;return function(e,n,a){var i=a.Api,s=n(),u=s.auth.currentUser;return s.broadcast.isCamActive?i.post("/models/"+u.id+"/chat/lovense",{lovenseDetails:{status:r,type:t,detail:o}}):(0,l.resolve)()}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOVENSE_UPDATE_TOY_STATUS=t.LOVENSE_TIP=t.LOVENSE_REMOVE_SETTINGS=t.LOVENSE_UPDATE_SETTINGS=void 0,t.updateLovenseSettings=r,t.updateLovenseToyStatus=a,t.saveLovenseSettings=o,t.removeLovenseSettings=i,t.sendLovenseMessage=s;var l=n(20),u=t.LOVENSE_UPDATE_SETTINGS="thirdPartyApplication/LOVENSE_UPDATE_SETTINGS",c=(t.LOVENSE_REMOVE_SETTINGS="thirdPartyApplication/LOVENSE_REMOVE_SETTINGS",t.LOVENSE_TIP="thirdPartyApplication/LOVENSE_TIP",t.LOVENSE_UPDATE_TOY_STATUS="thirdPartyApplication/LOVENSE_UPDATE_TOY_STATUS")},function(e,t,n){"use strict";function r(e){return function(t){return t({type:o,data:{toast:e}})}}function a(e){return function(t){return t({type:i,data:{criteria:e}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addToast=r,t.removeToast=a;var o=t.TOAST_ADD="interface/TOAST_ADD",i=t.TOAST_REMOVE="interface/TOAST_REMOVE"},,,function(e,t,n){"use strict";function r(){return function(e,t,n){var r=n.Api,a=n.ApiError,o=n.ServerError,i=t().auth.currentUser;return e({type:f}),r.del("/users/"+i.id+"/membership",s({},c.default.buildAmplitudeBackendDTO())).then(function(t){var n=t.user;e((0,d.saveUpdatedProfile)(n)),e({type:p})}).catch(a,function(t){e({type:m,data:{error:t}})}).catch(o,function(t){e({type:m,data:{error:t}})})}}function a(e,t){return function(n){n({type:g,data:{renewalSource:e,renewalModelName:t}}),n((0,l.push)("/gold-membership/subscribe"))}}function o(){return function(e,t,n){var r=n.ApiError,a=n.Api,o=n.ServerError,i=t(),l=i.auth.currentUser,u=i.goldMembership,f=u.renewalSource,p=u.renewalModelName;return e({type:h}),a.put("/users/"+l.id+"/membership",s({},c.default.buildAmplitudeBackendDTO({modelName:p,source:f}))).then(function(t){var n=t.user;e((0,d.saveUpdatedProfile)(n)),e({type:v})}).catch(r,function(t){e({type:E,data:{error:t}})}).catch(o,function(t){e({type:E,data:{error:t}})})}}function i(){return function(e){return e({type:y})}}Object.defineProperty(t,"__esModule",{value:!0}),t.RESET=t.RENEW_FAIL=t.RENEW_SUCCESS=t.RENEW_START=t.RENEW_PREPARE=t.CANCEL_FAIL=t.CANCEL_SUCCESS=t.CANCEL_START=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.cancel=r,t.prepareRenewal=a,t.renew=o,t.reset=i;var l=n(31),u=n(59),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=n(43),f=t.CANCEL_START="goldMembership/CANCEL_START",p=t.CANCEL_SUCCESS="goldMembership/CANCEL_SUCCESS",m=t.CANCEL_FAIL="goldMembership/CANCEL_FAIL",g=t.RENEW_PREPARE="goldMembership/RENEW_PREPARE",h=t.RENEW_START="goldMembership/RENEW_START",v=t.RENEW_SUCCESS="goldMembership/RENEW_SUCCESS",E=t.RENEW_FAIL="goldMembership/RENEW_FAIL",y=t.RESET="goldMembership/RESET"},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return function(e,t,n){var r=n.Api,a=t(),o=a.auth.currentUser;return e({type:g}),r.get("/studios/"+o.id+"/document").then(function(t){var n=t.isDocumentUploaded;return e({type:h,data:{isDocumentUploaded:n}}),null})}}function i(e){var t=e.type,n=e.file;return function(e,r){var o=r(),i=o.availableSettings,s=(0,u.default)(i,"data.document");return e({type:v}),(0,p.validateImageFile)(n,s,o).then(function(n){if(n){var r=new f.ValidationError((0,m.translate)(o,{messageId:"errors.validationError"}),a({},t,n));return e({type:y,data:{error:n}}),d.default.reject(r.details[t])}return e({type:E,data:{}}),d.default.resolve()})}}function s(e){var t=e.type,n=e.file;return function(e,r,a){var o=a.Api,s=r(),l=s.auth.currentUser,u={"document[type]":t,"document[file]":n};return e(i({type:t,file:n})).then(function(){return e({type:v}),o.post("/studios/"+l.id+"/document",u,{dataType:"multipart"}).then(function(t){var n=t.isDocumentUploaded;return e({type:E,data:{isDocumentUploaded:n}}),null}).catch(function(t){return e({type:y,data:{error:t}}),null})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_ERROR=t.UPDATE_SUCCESS=t.UPDATE_START=t.LOAD_SUCCESS=t.LOAD_START=void 0;var l=n(6),u=r(l);t.load=o,t.validateDocument=i,t.upload=s;var c=n(20),d=r(c),f=n(54),p=n(82),m=n(57),g=t.LOAD_START="studioSettings/LOAD_START",h=t.LOAD_SUCCESS="studioSettings/LOAD_SUCCESS",v=t.UPDATE_START="studioSettings/UPDATE_START",E=t.UPDATE_SUCCESS="studioSettings/UPDATE_SUCCESS",y=t.UPDATE_ERROR="studioSettings/UPDATE_ERROR"},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(594),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(3),v=r(h),E=n(21),y=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:[E.layoutHasChanged,E.orientationHasChanged],action:function(){r.update()}}],r.update=function(){var e=r.props.text,t=r,n=t.canvasRef,a=t.canvasWrapperRef,o=t.fontReferenceRef,i=window,s=i.devicePixelRatio,u=n.getContext("2d");o.textContent=e;var c=window.getComputedStyle(a),d=c.color,f=c.fontSize,p=c.fontFamily,m=c.lineHeight,g=c.fontVariant,h=c.fontWeight,v=o.offsetHeight,E=o.offsetWidth,y=(0,l.default)(f);s?(n.height=v*s,n.width=E*s,n.style.height=v+"px",n.style.width=E+"px",u.scale(s,s)):(n.height=v,n.width=E),n.style.verticalAlign="bottom",o.textContent="",u.fillStyle=d,u.textBaseline="alphabetic",u.textAlign="left",u.font=g+" "+h+" "+f+"/"+m+" "+p,u.fillText(e,0,y)},i=n,o(r,i)}return i(t,e),u(t,[{key:"componentDidRender",value:function(){var e;this.update();for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this)).call.apply(e,[this].concat(r))}},{key:"render",value:function(){var e=this,t=this.props.display;return m.default.createElement("span",{ref:function(t){e.canvasWrapperRef=t},className:"canvas-text "+t,style:{display:t},"data-component-name":"CanvasText"},m.default.createElement("span",{ref:function(t){e.fontReferenceRef=t},style:{position:"absolute"}}),m.default.createElement("canvas",{ref:function(t){e.canvasRef=t}}))}}]),t}(v.default);y.propTypes={display:f.default.string,text:f.default.string},y.defaultProps={display:"inline"};var b=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight,windowOrientation:t.windowOrientation}};t.default=(0,g.connect)(b)(y)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(3),g=r(m),h=n(8),v=r(h),E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onChangeHandler=function(){r.props.onChange(!r.state.isChecked)},i=n,o(r,i)}return i(t,e),u(t,[{key:"getNextState",value:function(e,t){return{isChecked:e.isChecked}}},{key:"render",value:function(){var e=this.props,t=e.size,n=e.className,r=this.state.isChecked,a=this.c("switcher",t,n,{on:r});return p.default.createElement("div",{className:a,onClick:this.onChangeHandler,"data-component-name":"Switcher"},p.default.createElement("div",{className:"switcher-wrapper"},p.default.createElement("span",{className:"switcher-label"},p.default.createElement(v.default,{img:"check"})),p.default.createElement("span",{className:"switcher-switch"}),p.default.createElement("span",{className:"switcher-label"})))}}]),t}(g.default);E.contextTypes={},E.propTypes={onChange:d.default.func,isChecked:d.default.bool,className:d.default.string,size:d.default.oneOf(["default","small","medium","large"])},E.defaultProps={onChange:l.default,size:"default"},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(128),l=r(s),u=n(283),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),m=n(0),g=r(m),h=n(3),v=r(h),E=n(8),y=r(E),b=n(39),_=r(b),S=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),d(t,[{key:"checkPlaceRange",value:function(e,t){var n=this.props.place;return(0,l.default)(n)&&(0,c.default)(n,e,t)}},{key:"render",value:function(){var e=this.props,t=e.htmlIdPrefix,n=e.isOtherPlaceVisible,r=this.checkPlaceRange(1,4);if(!r&&!n)return null;var a=this.props,o=a.isTooltipVisible,i=a.size,s=a.username,l=a.place,u=a.topMedalHeight,c=t+"_"+s+"_place_"+l,d=this.checkPlaceRange(1,100);return g.default.createElement("div",{id:c,className:this.c("award-place",{"award-place-other":!d,"award-place-top":r}),"data-component-name":"AwardPlace"},g.default.createElement(y.default,{img:r?"medal-"+l:"rating-position",size:r?null:i,height:r?u:null,width:r?Number((u/(100/77)).toFixed(1)):null}),this.renderIf(!r,g.default.createElement("span",{className:"title-place"},l)),this.renderIf(o,g.default.createElement(_.default,{isMobileRelative:!1,placement:"top",shouldPreventDefault:!0,targetId:c},this.t("topBestPlace",{username:s,place:l}))))}}]),t}(v.default);S.propTypes={htmlIdPrefix:p.default.oneOfType([p.default.number,p.default.string]),isOtherPlaceVisible:p.default.bool,isTooltipVisible:p.default.bool,username:p.default.string.isRequired,place:p.default.number.isRequired,size:p.default.number,topMedalHeight:p.default.number},S.defaultProps={htmlIdPrefix:"",isOtherPlaceVisible:!1,isTooltipVisible:!0,size:20},t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(35),i=r(o),s=n(33),l=r(s),u=n(13),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(9),y=n(5),b=n(67),_=n(63),S=r(_),O=n(8),P=r(O),T=n(7),A=n(608),C=r(A),I=n(1181),w=r(I),N=n(27),R=function(e,t){var n=t.i18n.trans,r=e.action,o=e.canClose,i=e.className,s=e.email,u=e.isCloseBtnShown,f=e.onAutoFocus,p=e.onClose,m=e.onProceed,h=e.showRecaptchaForced,v=e.triggerSource,E=e.type,_=function(t){var n=e.action,r=e.className,o=e.isModal,i=e.showModal,s=e.triggerSource,u=(0,l.default)(e,["email","showRecaptchaForced"]);o?(t.preventDefault(),i(y.MODAL_TYPES.AUTH,d({component:"Login",className:(0,b.classNames)("auth-modal-login",a({},r,!(0,c.default)(r))),action:n,triggerSource:s},u))):S.default.set("loginTriggerSource",s)},O=function(t,n){var r=e.action,o=e.className,i=e.isModal,s=e.showModal,u=e.triggerSource,f=(0,l.default)(e,["email","showRecaptchaForced"]);i&&(n.preventDefault(),s(y.MODAL_TYPES.AUTH,d({component:"SignUp",className:(0,b.classNames)("auth-modal-signup",a({},o,!(0,c.default)(o))),type:t,action:r,triggerSource:u},f)))};return g.default.createElement("div",{className:(0,b.classNames)("signup","island-wrapper",{recaptcha:h}),"data-component-name":"SignUp"},g.default.createElement("div",{className:"island-top"},g.default.createElement("h1",{className:"island-top-title"},n("signUp."+E+".title"),g.default.createElement("span",{className:"island-top-icon"},g.default.createElement(P.default,{img:"lock"}))),(0,b.renderIf)(o&&p,function(){return g.default.createElement("a",{className:"button-close",onClick:p,role:"button"},g.default.createElement(P.default,{img:"close"}))})),g.default.createElement("div",{className:"island-container"},g.default.createElement("div",{className:"island island-small"},g.default.createElement(C.default,{action:r,canClose:u,className:i,email:s,onAutoFocus:f,onClose:p,onProceed:m,showRecaptchaForced:h,triggerSource:v,type:E})),g.default.createElement(w.default,{action:r,type:E,onGoToLogin:_,onGoToSignUp:O})))},M={showModal:E.showModal};R.propTypes=d({action:p.default.shape({messageId:p.default.string,user:p.default.object,onSuccess:p.default.func}),canClose:p.default.bool,email:p.default.string,isModal:p.default.bool,onAutoFocus:p.default.func,onClose:p.default.func,recaptchaSiteKey:p.default.string,showRecaptcha:p.default.bool,showRecaptchaForced:p.default.bool,type:p.default.oneOf([N.SIGNUP_USER_ROLES.USER,N.SIGNUP_USER_ROLES.MODEL,N.SIGNUP_USER_ROLES.STUDIO])},(0,T.getActionPropTypes)(M)),R.defaultProps={canClose:!0,className:"auth-modal-signup",onAutoFocus:i.default,onSuccess:i.default,type:N.SIGNUP_USER_ROLES.USER},R.contextTypes={i18n:p.default.object};var L=function(e,t){var n=e.config.data.showRecaptcha;return{showRecaptchaForced:t.showRecaptchaForced||n}},k=function(e){return(0,v.bindActionCreators)(M,e)};t.default=(0,h.connect)(L,k)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.setTimeout(e,1)}function l(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.clearTimeout(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(33),c=r(u),d=n(35),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},h=n(1),v=r(h),E=n(0),y=r(E),b=n(2),_=n(1189),S=r(_),O=n(3),P=r(O),T=n(21),A=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.propsUpdateToActionsMap=[{update:T.layoutHasChanged,action:function(){r.resizeComponent()}}],r.refHandler=function(e){r.rootDOMNode=e},r.changeHandler=function(e){r.resizeComponent(),r.props.onChange(e)},r.blurHandler=function(e){r.props.onBlur(e)},r.resizeComponent=function(){var e=r.props.useCacheForDOMMeasurements;r.setState((0,S.default)(r.rootDOMNode,e,r.props.rows||r.props.minRows,r.props.maxRows))},r.onNextFrameActionId=null,r.rootDOMNode=null,r}return i(t,e),m(t,[{key:"getDefaultState",value:function(){return p({},g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{height:null,minHeight:-1/0,maxHeight:1/0})}},{key:"componentDidMount",value:function(){this.resizeComponent(),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillReceiveProps",value:function(e,n){this.clearNextFrame(),this.onNextFrameActionId=s(this.resizeComponent),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e,n)}},{key:"componentDidUpdate",value:function(e,n,r){this.state.height!==n.height&&this.props.onHeightChange(this.state.height),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this,e,n,r)}},{key:"componentWillUnmount",value:function(){this.clearNextFrame(),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"clearNextFrame",value:function(){this.onNextFrameActionId&&l(this.onNextFrameActionId)}},{key:"focus",value:function(){this.rootDOMNode.focus()}},{key:"blur",value:function(){this.rootDOMNode.blur()}},{key:"render",value:function(){var e=this.props.className,t=this.state.height,n=(0,c.default)(this.props,["autoCapitalize","autoFocus","defaultValue","disabled","maxLength","id","placeholder","rows"]);return y.default.createElement("textarea",p({className:this.c("textarea","textarea-autosize",e),onChange:this.changeHandler,onBlur:this.blurHandler,ref:this.refHandler,style:{height:t}},p({},n),{"data-component-name":"TextareaAutosize"}))}},{key:"value",get:function(){return this.rootDOMNode.value},set:function(e){this.rootDOMNode.value=e}}]),t}(P.default);A.propTypes={autoCapitalize:v.default.string,autoFocus:v.default.bool,className:v.default.string,defaultValue:v.default.string,disabled:v.default.bool,id:v.default.string,minRows:v.default.number,maxLength:v.default.number,maxRows:v.default.number,onChange:v.default.func,onBlur:v.default.func,onHeightChange:v.default.func,placeholder:v.default.string,rows:v.default.number,value:v.default.string,useCacheForDOMMeasurements:v.default.bool},A.defaultProps={onChange:f.default,onBlur:f.default,onHeightChange:f.default,useCacheForDOMMeasurements:!1};var C=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight}};t.default=(0,b.connect)(C,null,null,{withRef:!0})(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FriendshipButton=void 0;var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(28),E=n(9),y=n(3),b=r(y),_=n(10),S=r(_),O=n(5),P=n(7),T=n(117),A=n(27),C=n(100),I=n(91),w=t.FriendshipButton=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.friendButtonClickHandler=function(){var e=r.props.uniqueName;r.props.emitButtonEvent(e,{user:r.props.user})},i=n,o(r,i)}return i(t,e),c(t,[{key:"getNextState",value:function(e,t){var n=e.outgoingFriendship;return{hasFriendshipRequestSent:(0,l.default)(n,"status")===A.FRIENDSHIP_STATUSES.REQUESTED}}},{key:"render",value:function(){var e=this.props,t=e.canFriend,n=e.currentUser,r=e.isBanned,a=e.isLoggedIn,o=e.isMyFriend,i=e.isPending,s=e.shouldHideRemovalState,l=e.size,u=e.style,c=e.type,d=this.state.hasFriendshipRequestSent,f=!a||!r&&n.isRegular,p=void 0;return d?p=this.t("button.friendship.requestSent"):o?p=s?null:this.t("button.friendship.remove"):(t||f)&&(p=this.t("button.friendship.invite")),p?"anchor"===c?m.default.createElement("a",{className:"btn-friendship",disabled:i||d,onClick:this.friendButtonClickHandler,"data-component-name":"FriendshipButton"},p):m.default.createElement(S.default,{className:"btn-friendship",disabled:i||d,onClick:this.friendButtonClickHandler,size:l,style:u,type:c,"data-component-name":"FriendshipButton"},p):null}}]),t}(b.default),N={addFriends:T.add,emitButtonEvent:E.emitButtonEvent,removeFriends:T.remove,showErrorNotification:v.error,showModal:E.showModal};w.propTypes=u({uniqueName:f.default.string,canFriend:f.default.bool,currentUser:f.default.object,shouldHideRemovalState:f.default.bool,isBanned:f.default.bool,isLoggedIn:f.default.bool,isMyFriend:f.default.bool,outgoingFriendship:f.default.object,style:f.default.string,type:f.default.string,user:f.default.shape({id:f.default.number}).isRequired},(0,P.getActionPropTypes)(N)),w.defaultProps={shouldHideRemovalState:!1,size:"default",uniqueName:O.APP_BUTTONS.FRIENDSHIP};var R=function(e,t){var n=e.auth,r=e.myFriends,a=t.user;return{canFriend:(0,I.getCanFriend)(e,a.id),currentUser:n.currentUser,isBanned:(0,I.getIsBanned)(e,a.id),isLoggedIn:n.isLoggedIn&&!n.isLoggingOut,isMyFriend:(0,C.getIsMyFriend)(e,a.id),isPending:r.isPending,outgoingFriendship:(0,C.getOutgoingFriendship)(e,a.id)}},M=function(e){return(0,h.bindActionCreators)(N,e)};t.default=(0,g.connect)(R,M)(w)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(6),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(24),y=n(4),b=n(614),_=r(b),S=n(388),O=r(S),P=n(1226),T=r(P),A=n(387),C=r(A),I=n(12),w=n(9),N=n(3),R=r(N),M=n(615),L=r(M),k=n(8),D=r(k),U=n(7),j=["","new","female","autoTagCouples","male","tranny","spy"],F=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.getTagLabel=function(e){return r.t("tags."+e)},r.dropDownMenuClickHandler=function(e){e.stopPropagation();var t=r.props,n=t.parentBlockingComponent;t.isInterfaceBlocked&&r.allTagsDropdownTriggerRef===n&&r.props.blockInterface(n,null)},r.allTagsClickHandler=function(e){e.preventDefault(),e.stopPropagation(),r.getIsAllTagsDropdownOpen()?r.props.releaseInterface():r.props.blockInterface(r.allTagsDropdownTriggerRef)},r.getIsCurrentTagKeyActive=function(e){var t=r.props.tagKey;return!(0,c.default)(r.props,"location.pathname").match(/^\/tags\/?$/)&&(!t&&e===I.DEFAULT_PSEUDO_TAG||r.props.tagKey===e)},r.activeMenuItemRefHandler=function(e,t){var n=t!==r.state.activeMenuRef,a=r.getIsCurrentTagKeyActive(e);t&&n&&a&&r.setState({activeMenuRef:t})},r.getActiveMenuItem=function(){return r.state.activeMenuRef},r.renderTagsWrapper=function(){var e=r.state.isEmbedded;return h.default.createElement(L.default,{className:"nav-left",activeItemRef:r.state.activeMenuRef,getActiveMenuItem:r.getActiveMenuItem},j.map(function(t){var n=t||I.DEFAULT_PSEUDO_TAG;return h.default.createElement("div",{className:"header-sub-item-wrapper",key:t,ref:(0,l.default)(r.activeMenuItemRefHandler,n)},h.default.createElement(C.default,{className:r.c("link",{active:r.getIsCurrentTagKeyActive(n)}),label:r.getTagLabel(n),shouldPreventDefault:e,tag:t}))}))},i=n,o(r,i)}return i(t,e),f(t,[{key:"getNextState",value:function(e,t){return{isEmbedded:Boolean((0,c.default)(e,"match.params.username"))}}},{key:"getIsAllTagsDropdownOpen",value:function(){var e=this.props,t=e.currentBlockingComponent,n=e.parentBlockingComponent;return e.isInterfaceBlocked&&(t===this.allTagsDropdownTriggerRef||n===this.allTagsDropdownTriggerRef)}},{key:"renderAllTagsTrigger",value:function(){var e=this,t=this.getIsAllTagsDropdownOpen();return h.default.createElement("button",{className:this.c("btn dropdown-link all-tags-dropdown-trigger media-after-l-hidden",{open:t}),onClick:this.allTagsClickHandler,ref:function(t){e.allTagsDropdownTriggerRef=t}},h.default.createElement(D.default,{img:"bullet-list",size:14}),h.default.createElement(D.default,{className:"xs-only",img:"close-2",size:14}),h.default.createElement("span",{className:"dropdown-label media-up-to-xs-hidden"},this.t("tagGroups.categories"),h.default.createElement("span",{className:"dropdown-arrow"},h.default.createElement(D.default,{img:"selectbox",size:8}))))}},{key:"renderAllTagsDropdown",value:function(){return this.getIsAllTagsDropdownOpen()?h.default.createElement("div",{className:"model-filter-dropdown-wrapper media-after-l-hidden",onClick:this.dropDownMenuClickHandler},h.default.createElement(O.default,{parentBlockingComponent:this.allTagsDropdownTriggerRef}),h.default.createElement(_.default,{filterTagsByPreference:!0,className:"model-filter-dropdown"})):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchString,r=t.isExpandedSearchForm,a=this.state.isEmbedded;return h.default.createElement("div",{className:"model-filter header-sub","data-component-name":"ModelFilter"},h.default.createElement("div",{className:this.c("model-filter-container","container",{container:a,"full-width-container":!a,"search-expanded":r})},this.renderIf(!r,function(){return e.renderTagsWrapper()}),h.default.createElement("nav",{className:"nav-right"},this.renderIf(!r,this.renderAllTagsTrigger()),h.default.createElement(T.default,{isEmbedded:a,searchString:n,shouldReleaseInterface:!0})),this.renderIf(!r&&this.getIsAllTagsDropdownOpen(),function(){return e.renderAllTagsDropdown()})))}}]),t}(R.default),B={blockInterface:w.blockInterface,releaseInterface:w.releaseInterface};F.propTypes=d({currentBlockingComponent:m.default.node,isExpandedSearchForm:m.default.bool,isInterfaceBlocked:m.default.bool,parentBlockingComponent:m.default.node,searchString:m.default.string,tagKey:m.default.string},(0,U.getActionPropTypes)(B));var H=function(e){var t=e.ui,n=t.currentBlockingComponent,r=t.isInterfaceBlocked,a=t.parentBlockingComponent,o=e.modelFilter;return{currentBlockingComponent:n,isExpandedSearchForm:o.isExpandedSearchForm,isInterfaceBlocked:r,parentBlockingComponent:a,searchString:o.searchString,tagKey:o.tagKey}},V=function(e){return(0,y.bindActionCreators)(B,e)};t.default=(0,E.withRouter)((0,v.connect)(H,V)(F))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=r(s),u=n(6),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(24),E=n(2),y=n(31),b=n(4),_=n(118),S=n(12),O=n(222),P=n(9),T=n(7),A=n(83),C=r(A),I=n(3),w=r(I),N=n(68),R=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.clickHandler=function(e){var t=r.props,n=t.onClick,a=t.shouldScrollToTop,o=t.shouldPreventDefault,i=t.shouldReleaseInterface,s=t.tag,u=t.tagLink,c=t.tagsAliases;e.stopPropagation(),e.preventDefault(),i&&r.props.releaseInterface(),n&&n(s||""),a&&C.default.reset(),s&&!(0,l.default)(S.PSEUDO_TAGS,s)&&r.props.incrementTagViews(s),o?r.props.saveFilterParams({tag:c[s]||""}):r.props.push(u||"/")},r.clickNavLinkHandler=function(e){r.props.shouldPreventDefault&&e.preventDefault()},i=n,o(r,i)}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.count,r=e.label,a=e.location,o=e.tagLink;return h.default.createElement("div",{className:this.c("model-filter-link-wrapper",t,{active:o===a}),onClick:this.clickHandler,"data-component-name":"ModelFilterLink"},h.default.createElement(v.NavLink,{className:"model-filter-link",onClick:this.clickNavLinkHandler,to:o||"/",exact:!0},r),this.renderIf(void 0!==n,h.default.createElement("span",{className:this.c("model-filter-link-count",t+"-count")},"  ",n)))}}]),t}(w.default),M={incrementTagViews:_.incrementTagViews,push:y.push,saveFilterParams:_.saveFilterParams,releaseInterface:P.releaseInterface};R.propTypes=d({className:m.default.string,count:m.default.number,label:m.default.string.isRequired,location:m.default.string.isRequired,onClick:m.default.func,shouldScrollToTop:m.default.bool,shouldPreventDefault:m.default.bool,shouldReleaseInterface:m.default.bool,tag:m.default.string,tagLink:m.default.string,releaseInterface:m.default.func.isRequired,tagsAliases:m.default.objectOf(m.default.string)},(0,T.getActionPropTypes)(M)),R.defaultProps={className:"",shouldPreventDefault:!1,shouldReleaseInterface:!1,tag:"",count:void 0,onClick:void 0};var L=function(e){return(0,b.bindActionCreators)(M,e)},k=function(e,t){return{location:(0,c.default)(e,"routing.location.pathname"),tagsAliases:(0,O.getAllTagsAliases)(e),tagLink:(0,O.getAllTagLinks)(e)[t.tag],shouldScrollToTop:!(0,N.getViewCamPageBranch)(e)}};t.default=(0,v.withRouter)((0,E.connect)(k,L)(R))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(11),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(9),b=n(3),_=r(b),S=n(8),O=r(S),P=n(5),T=n(7),A=n(87),C=n(12),I=n(45),w={F:h.default.createElement(O.default,{img:"female"}),M:h.default.createElement(O.default,{img:"male"}),T:h.default.createElement(O.default,{img:"tranny"})},N=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.openDropdownHandler=function(e){e.preventDefault(),e.stopPropagation();var t=r.props,n=t.blockInterface,a=t.isInterfaceBlocked,o=t.currentBlockingComponent,i=t.parentBlockingComponent;a?r.tagsPreferenceDropdownRef!==o?n(r.tagsPreferenceDropdownRef,o):n(i):n(r.tagsPreferenceDropdownRef)},r.itemClickHandler=function(e){r.props.changeTagsPreference(e)},r.isOpen=function(){var e=r.props,t=e.currentBlockingComponent,n=e.isInterfaceBlocked,a=e.parentBlockingComponent;return n&&(r.tagsPreferenceDropdownRef===t||r.tagsPreferenceDropdownRef===a)},r.nativeSelectOnChangeHandler=function(e){var t=e.target.value;r.props.changeTagsPreference(t)},r.renderNativeSelect=function(){var e=r.props.currentTagsPreference;return P.BROWSER_CAPABILITIES.desktop?null:h.default.createElement("select",{className:"tags-preference-mobile-select",value:e,onChange:r.nativeSelectOnChangeHandler},(0,c.default)(C.GENDER_TAGS_GROUPS,function(e){return h.default.createElement("option",{key:e,value:e},r.t("preferenceTagGroups."+e))}))},r.renderDropdown=function(){var e=r.props.currentTagsPreference,t=r.t("preferenceTagGroups."+e);return h.default.createElement("div",{className:"tags-preference-dropdown-wrapper"},h.default.createElement("div",{onClick:P.BROWSER_CAPABILITIES.desktop?r.openDropdownHandler:null,className:r.c("tags-preference-dropdown-trigger",{active:r.isOpen()}),title:t},h.default.createElement("div",{className:"tags-preference-current-type"},w[e],h.default.createElement("span",{className:"media-up-to-m-hidden tags-preference-label"},t),r.renderNativeSelect()),h.default.createElement("span",{className:"selectbox-arrow"},h.default.createElement(O.default,{img:"selectbox"}))),r.renderOpenedDropDown())},i=n,o(r,i)}return i(t,e),f(t,[{key:"renderOpenedDropDown",value:function(){var e=this;return this.isOpen()&&P.BROWSER_CAPABILITIES.desktop?h.default.createElement("div",{className:"tags-preference-dropdown-content"},(0,c.default)(C.GENDER_TAGS_GROUPS,function(t){var n=e.props.currentTagsPreference===t;return h.default.createElement("div",{key:t,className:e.c("tags-preference-type-item",{active:n}),onClick:(0,l.default)(e.itemClickHandler,t)},w[t],e.t("preferenceTagGroups."+t))})):null}},{key:"render",value:function(){var e=this;return h.default.createElement("div",{className:"tags-preference-dropdown",ref:function(t){e.tagsPreferenceDropdownRef=t},"data-component-name":"TagsPreferenceDropdown"},h.default.createElement("div",{className:"tags-preference-desktop-layout"},this.renderDropdown()))}}]),t}(_.default),R={blockInterface:y.blockInterface,changeTagsPreference:A.changeTagsPreference,releaseInterface:y.releaseInterface};N.propTypes=d({currentBlockingComponent:m.default.node,currentTagsPreference:m.default.string,isInterfaceBlocked:m.default.bool.isRequired,parentBlockingComponent:m.default.node},(0,T.getActionPropTypes)(R));var M=function(e){var t=e.ui,n=t.currentBlockingComponent,r=t.parentBlockingComponent,a=t.isInterfaceBlocked;return{currentTagsPreference:(0,I.getCurrentTagsPreference)(e),isInterfaceBlocked:a,currentBlockingComponent:n,parentBlockingComponent:r}},L=function(e){return(0,E.bindActionCreators)(R,e)};t.default=(0,v.connect)(M,L)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NotFound=void 0;var a=n(107),o=r(a),i=n(1),s=r(i),l=n(0),u=r(l),c=n(2),d=n(24),f=n(616),p=r(f),m=n(5),g=t.NotFound=function(e,t){var n=e.hostRoot,r=t.i18n.trans;return u.default.createElement("div",{className:"not-found","data-component-name":"NotFound"},u.default.createElement(p.default,{status:m.HTTP_CODES.NOT_FOUND}),u.default.createElement("h1",null,"404"),u.default.createElement("h2",null,r("errors.pageNotAvailable")),u.default.createElement("div",{className:"controls"},u.default.createElement(d.Link,{to:"/",className:"btn btn-accept"},(0,o.default)(n))))};g.propTypes={hostRoot:s.default.string.isRequired},g.contextTypes={i18n:s.default.object};var h=function(e){return{hostRoot:e.config.data.hostRoot}};t.default=(0,c.connect)(h)(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=function(e){var t=e.country;return s.default.createElement("span",{className:"flag flag-"+t.toLowerCase(),"data-component-name":"CountryFlag"})};l.propTypes={country:o.default.string.isRequired},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasChangedPersonOrStatus=t.getSelectedPerson=t.savedSelectedPerson=t.changedPersonList=t.getPersons=t.getDefaultPerson=t.getMinStatus=void 0;var o=n(374),i=r(o),s=n(49),l=r(s),u=n(48),c=r(u),d=n(11),f=r(d),p=n(144),m=r(p),g=n(6),h=r(g),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=n(32),y=n(110),b=n(12),_=n(621),S=function(e){return e.persons.collection},O=function(e){return e.documents.collection},P=function(e,t){return t.personId},T=function(e,t){return t.userId},A=t.getMinStatus=function(e){return(0,m.default)((0,i.default)(e,function(e){return b.MODERATION_STATUS_WEIGHTS[e]}))},C=t.getDefaultPerson=function(){return{address:null,agreement:null,birthDate:null,city:null,country:null,firstName:null,gender:null,id:null,idNumber:null,lastName:null,otherNames:null,reason:null,region:null,status:null,userId:null,statusCombined:null}},I=function(e){return e.persons.draftPerson||C()},w=t.getPersons=(0,E.createSelector)([S,O,T],function(e,t,n){return e.filter(function(e){return e.userId===n}).map(function(e){var n=(0,_.getDocuments)(t,e.id),r=n.face?n.face.url:null;return v({},e,{avatarUrl:e.avatarUrl||r,birthDate:(0,y.fromApiToRenderFormat)(e.birthDate),statusCombined:A([].concat(a((0,f.default)(n,function(e){return(0,h.default)(e,"status")})),[e.status]))})}).toArray()});t.changedPersonList=function(e,t){return e.isUpdatingPerson!==t.isUpdatingPerson&&!t.isUpdatingPerson&&e.persons&&t.persons.length!==e.persons.length},t.savedSelectedPerson=function(e,t){return!(0,l.default)(e.selectedPerson,t.selectedPerson)},t.getSelectedPerson=(0,E.createSelector)([w,I,P],function(e,t,n){return n?(0,c.default)(e,function(e){return e.id===n}):t}),t.hasChangedPersonOrStatus=function(e,t){return(0,h.default)(e.person,"id")!==(0,h.default)(t.person,"id")||(0,h.default)(e.person,"statusCombined")!==(0,h.default)(t.person,"statusCombined")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(273),c=r(u),d=n(48),f=r(d),p=n(172),m=r(p),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},E=n(1),y=r(E),b=n(0),_=r(b),S=n(15),O=r(S),P=n(3),T=r(P),A=n(5),C=n(110),I=function(e){function t(e,n){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.inputChangeHandler=function(e){var t=r.state,n=t.value,a=t.isSuccessSymbol,o=r.props,i=o.mask,s=o.placeholder,l=o.onChange;if(a){var u=r.parseValue({value:r.getSolidValue(e.target.value),mask:i,placeholder:s});u===n&&r.selection.start>r.prevSelection.start&&(r.selection=(0,m.default)(r.prevSelection)),r.updateSelectionLimits(u),r.updateSelection(!0),r.setState({value:u},function(){l&&l(u)})}r.setState({isSuccessSymbol:!0})},r.inputKeyPressHandler=function(e){var t=r.selection.start,n=(0,f.default)(r.regularExpressions,function(e,n){return n>=t&&e}),a=!n||n&&n.test(function(e){return null===e.which?e.keyCode<32?null:String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode?e.which<32?null:String.fromCharCode(e.which):null}(e));return r.setState({isSuccessSymbol:a}),a},r.selectionChangeHandler=function(e,t){var n=function(){r.updateSelection(),r.setInputSelection(),t&&t(e)};A.BROWSER_CAPABILITIES.ie11?setTimeout(n):n()},r.getPlaceholder=function(e){var t=e.mask;return e.placeholder||t},r.onKeyUp=function(e){r.selectionChangeHandler(e,r.props.onKeyUp)},r.onMouseUp=function(e){r.selectionChangeHandler(e,r.props.onMouseUp)},r.nativeDatepickerOnChange=function(e){var t=r.props.dateFormat,n=(0,O.default)(e.target.valueAsDate).format(t);r.props.onChange(n)},r.selection={start:0,end:0,min:0,max:e.mask.length+1},r.prevSelection=g({},r.selection),r.state={isSuccessSymbol:!0},r}return l(t,e),h(t,[{key:"getNextState",value:function(e,t){var n=e.mask,r=e.value,a=e.placeholder,o=r||"";return this.regularExpressions=this.getRegularExpressions(n),this.updateSelectionLimits(o),{value:A.BROWSER_CAPABILITIES.androidChrome?o:this.parseValue({value:o,mask:n,placeholder:a})}}},{key:"getRegularExpressions",value:function(e){var t=[0,1,2,3,4,5,6,7,8,9].map(function(e){return{source:new RegExp(""+e),target:new RegExp("[0-"+e+"]")}}),n=[].concat(o(t),[{source:/\d/,target:/\d/},{source:/[A-Z]/,target:/[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]/},{source:/\*/,target:/[\dA-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]/},{source:/\_/,target:/[^\_]/}]);return e.split("").map(function(e){var t=(0,f.default)(n,function(t){return t.source.test(e)});return t?t.target:null})}},{key:"getSolidValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n="",r=this.props,a=r.mask,o=r.placeholder,i=this.getPlaceholder({mask:a,placeholder:o}),s=this.state.value||"",l=s.length>t.length,u=t.length>s.length,c=this.selection.start,d=this.selection.end-this.selection.start>0,f=t.split("");if(u&&""!==s)if(this.regularExpressions[c])f.splice(c+1,1);else{var p=f.splice(c,1);f.splice(c+1,1,p)}if(l&&s!==i){for(var m=d?c:c-1;!this.regularExpressions[m]&&m>0;)f.splice(m-1,1,i[m-1]),m-=1;d||f.splice(c-1,0,i[c])}return f=f.join(""),i.split("").forEach(function(t,r){e.regularExpressions[r]&&f[r]&&e.regularExpressions[r].test(f[r])?n+=f[r]:n+=i[r]}),n}},{key:"componentDidRender",value:function(e,n,r){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this,e,n,r),A.BROWSER_CAPABILITIES.androidChrome||this.setInputSelection()}},{key:"updateSelection",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.inputRef,r=function(t){return e.regularExpressions[t-1]},a=function(t){return e.regularExpressions[t]},o=function(e){return r(e)||a(e)},i=function(t){var n=e.selection.min;return e.regularExpressions.forEach(function(e,r){r>n&&r<t&&o(r)&&(n=r)}),n},s=function(t){var n=(0,c.default)(e.regularExpressions,function(e,n){return n>t&&o(n)});return-1===n?e.selection.max:n};this.prevSelection=g({},this.prevSelection,this.selection),this.selection=g({},this.selection,{start:n.selectionStart,end:n.selectionEnd});var l=this.selection.start,u=this.selection.end;a(l)&&r(l)||!t||(this.selection.start<this.prevSelection.start?this.selection.start=i(l):this.selection.start=s(l),this.selection.end<this.prevSelection.end?this.selection.end=i(u):this.selection.end=s(u)),this.selection.start<this.selection.min&&(this.selection.start=this.selection.min),this.selection.end>this.selection.max&&(this.selection.end=this.selection.max,this.selection.end<this.selection.start&&(this.selection.start=this.selection.end)),this.selection.end<this.selection.start&&(this.selection.end=this.selection.start)}},{key:"updateSelectionLimits",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.selection.max=e.length}},{key:"setInputSelection",value:function(){var e=this.inputRef;e.selectionStart===this.selection.start&&e.selectionEnd===this.selection.end||e.setSelectionRange&&e.setSelectionRange(this.selection.start,this.selection.end,e.selectionDirection)}},{key:"parseValue",value:function(e){var t=e.value,n=e.mask,r=e.placeholder,a=this.getPlaceholder({mask:n,placeholder:r}),o=t;if(t&&t.length){var i=[];this.regularExpressions.forEach(function(e,n){i[n]=e&&t[n]&&e.test(t[n])?t[n]:a[n]}),o=i.join("")}else o=a;return o}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.dateFormat,o=a(t,["className","dateFormat"]),i=this.state.value,s=this.getPlaceholder(this.props);return A.BROWSER_CAPABILITIES.androidChrome&&r?_.default.createElement("div",{className:"masked-input-wrapper","data-component-name":"MaskedInput"},_.default.createElement("input",{type:"date",className:"input masked-input-invisible",value:i?(0,O.default)(i,r).format(C.ISO_8601_DATE_FORMAT):"",onChange:this.nativeDatepickerOnChange,disabled:o.disabled}),_.default.createElement("input",g({className:"input"},o,{type:"text",value:i}))):_.default.createElement("input",g({},g({type:"text"},o,{onChange:this.inputChangeHandler,onKeyUp:this.onKeyUp,onKeyPress:this.inputKeyPressHandler,onMouseUp:this.onMouseUp,value:i===s?"":i,ref:function(t){e.inputRef=t}}),{className:this.c("input",n),"data-component-name":"MaskedInput"}))}}]),t}(T.default);I.propTypes={className:y.default.string,dateFormat:y.default.string,mask:y.default.string.isRequired,onChange:y.default.func.isRequired},t.default=I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(13),u=r(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(18),f=n(1),p=r(f),m=n(0),g=r(m),h=n(4),v=n(2),E=n(3),y=r(E),b=n(8),_=r(b),S=n(173),O=r(S),P=n(201),T=r(P),A=n(162),C=n(394),I=r(C),w=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.listEditHandler=function(e){(0,u.default)(e)||r.props.removeKnights(e)},r.renderKnightItem=function(e){return g.default.createElement(I.default,{id:e.id,key:e.id,user:e})},r.renderHasMoreItem=function(){var e=r.props,t=e.isOwnProfile,n=e.user.username;return g.default.createElement(T.default,{isEmpty:!0,key:"empty",linkTo:t?"/model/knights":"/user/"+n+"/knights"},g.default.createElement("span",{className:"item-image"},g.default.createElement(_.default,{img:"more",size:44})))},a=n,i(r,a)}return s(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.counter,r=e.hasMore,o=e.isOwnProfile,i=e.isPending,s=e.knights,l=e.user,u=o?this.t("myKnights"):this.t("knightsTitle",{username:l.username}),c=n?" ("+n+")":"",d=r&&!i;return g.default.createElement(O.default,{isEditable:o,isPending:i,title:""+u+c,className:this.c("knights",t),onEdit:this.listEditHandler,"data-component-name":"Knights"},[].concat(a(s.map(this.renderKnightItem)),a(d?[this.renderHasMoreItem()]:[])))}}]),t}(y.default);w.propTypes={className:p.default.string,counter:p.default.number,hasMore:p.default.bool,isOwnProfile:p.default.bool,isPending:p.default.bool,knights:p.default.instanceOf(d.Seq),removeKnights:p.default.func,user:p.default.object};var N=function(e){return(0,h.bindActionCreators)({removeKnights:A.removeMany},e)};t.default=(0,v.connect)(null,N)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(201),m=r(p),g=n(89),h=r(g),v=n(120),E=r(v),y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"renderChildren",value:function(){return f.default.createElement("div",null,f.default.createElement(h.default,{user:this.props.user}),this.props.children)}},{key:"renderCaption",value:function(){return f.default.createElement("span",{className:"caption"},f.default.createElement(E.default,{isIconVisible:!1,isAdditionIconVisible:!1,user:this.props.user}))}},{key:"linkTo",get:function(){return this.props.linkTo||"/user/"+this.props.user.username}}]),t}(m.default);y.propTypes=s({},y.propTypes,{user:c.default.object.isRequired}),t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(18),d=r(c),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(569),y=n(1270),b=r(y),_=n(12),S=n(1271),O=n(3),P=r(O),T=n(10),A=r(T),C=n(7),I=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.renderTitle=function(){return r.props.shouldShowLatestOnly?g.default.createElement("h3",{className:"model-news-title"},r.t("startBroadcasting.latestNews.title")):null},r.renderBtnRow=function(){return r.props.shouldShowLatestOnly?g.default.createElement("div",{className:"model-news-btn-row"},g.default.createElement(A.default,{size:"small",to:"/model-news",type:"link"},r.t("startBroadcasting.latestNews.allNewsBtn"))):null},i=n,o(r,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);var e=this.props;(0,e.loadModelNews)(e.shouldShowLatestOnly?_.LATEST_NEWS_LIMIT:void 0)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.news;return g.default.createElement("div",{className:this.c("model-news",t),"data-component-name":"ModelNews"},this.renderTitle(),g.default.createElement(b.default,{modelNews:n}),this.renderBtnRow())}}]),t}(P.default),w={loadModelNews:E.load};I.propTypes=s({news:p.default.instanceOf(d.default.Map).isRequired,shouldShowLatestOnly:p.default.bool},(0,C.getActionPropTypes)(w)),I.defaultProps={shouldShowLatestOnly:!1};var N=function(e,t){return{news:t.shouldShowLatestOnly?(0,S.getLatestNews)(e):(0,S.getAllNews)(e)}},R=function(e){return(0,v.bindActionCreators)(w,e)};t.default=(0,h.connect)(N,R)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(30),u=r(l),c=n(115),d=r(c),f=n(11),p=r(f),m=n(358),g=r(m),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=n(15),y=r(E),b=n(1),_=r(b),S=n(0),O=r(S),P=n(3),T=r(P),A=n(10),C=r(A),I=n(392),w=r(I),N=n(110),R=function(e){return e&&((0,y.default)(e,N.RENDER_DATE_FORMAT,!0).isValid()||(0,y.default)(e,y.default.ISO_8601,!0).isValid())},M=function(e){return(0,y.default)(e).isAfter()},L=function(e,t){return(0,y.default)(e).isAfter(t)},k=function(e){return"custom"!==e.intervalName||(0,g.default)((0,d.default)(e,"intervalName"),R)&&!M(e.from)&&!L(e.from,e.until)},D=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.intervalChangeHandler=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=k(e),a=r.props.onUpdate;r.setState({isIntervalValid:n},function(){a(e,t&&n)})},r.buttonClickHandler=function(e){r.intervalChangeHandler(h({},N.getIntervalFor[e](),{intervalName:e}),!0)},r.inputChangeHandler=function(e,t){var n,o=r.props.interval,i={from:"startOf",until:"endOf"},s=(0,y.default)(t,N.RENDER_DATE_FORMAT,!0).locale("en");r.intervalChangeHandler(h({},o,(n={},a(n,e,s.isValid()?s[i[e]]("day").utc().format():t),a(n,"intervalName","custom"),n)))},r.intervalSubmitHandler=function(e){e.preventDefault();var t=r.props.interval;r.intervalChangeHandler(h({},t,{intervalName:"custom"}),!0)},s=n,i(r,s)}return s(t,e),v(t,[{key:"getDefaultState",value:function(){return{isIntervalValid:!0}}},{key:"render",value:function(){var e=this,t=this.props,n=t.isPending,r=t.buttonIntervalNames,a=t.interval,o=t.currentIntervalName,i=this.state.isIntervalValid;return O.default.createElement("div",{className:"table-filter","data-component-name":"TableFilter"},O.default.createElement("div",{className:"table-filter-interval-button"},(0,p.default)(r,function(t,r){return O.default.createElement(C.default,{key:r,disabled:n,className:e.c({active:o===t}),onClick:(0,u.default)(e.buttonClickHandler,t),style:"tokens"},e.t("tableFilter.buttons."+t))})),O.default.createElement("form",{onSubmit:this.intervalSubmitHandler,className:"table-filter-interval-custom"},O.default.createElement("label",null,this.t("tableFilter.customDates.label")),(0,p.default)(a,function(t,r){var a=(0,y.default)(t).isValid()?(0,y.default)(t).locale("en").format(N.RENDER_DATE_FORMAT):t;return O.default.createElement(w.default,{key:r,mask:N.DATE_MASK,placeholder:N.RENDER_DATE_FORMAT,dateFormat:N.RENDER_DATE_FORMAT,type:"text",value:"custom"===o?a:"",onChange:(0,u.default)(e.inputChangeHandler,r),disabled:n,"data-component-name":"TableFilter"})}),O.default.createElement(C.default,{disabled:n||!i,style:"apply",type:"submit"},this.t("tableFilter.customDates.request"))))}}]),t}(T.default);D.propTypes={isPending:_.default.bool,buttonIntervalNames:_.default.arrayOf(_.default.string).isRequired,currentIntervalName:_.default.string.isRequired,onUpdate:_.default.func.isRequired},t.default=D},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceClickEvent=void 0;var a=n(5);t.getDeviceClickEvent=function(e){return r({},a.BROWSER_CAPABILITIES.touch?"onTouchEnd":"onClick",e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(13),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(18),m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(4),b=n(3),_=r(b),S=n(8),O=r(S),P=n(173),T=r(P),A=n(201),C=r(A),I=n(117),w=n(37),N=n(394),R=r(N),M=n(44),L=function(e){function t(){var e,n,r,a;i(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.loadMoreHandler=function(){var e=r.props,t=e.friendIds,n=e.isPending,a=e.isUsersPending,o=e.loadMoreUsers;n||a||o(t)},r.listEditHandler=function(e){(0,c.default)(e)||r.props.removeFriends(e)},r.renderFriendItem=function(e){return v.default.createElement(R.default,{id:e.id,key:e.id,user:e})},r.renderHasMoreItem=function(){var e=r.props,t=e.isOwnProfile,n=e.username;return v.default.createElement(C.default,{isEmpty:!0,key:"empty",linkTo:t?"/friends":"/user/"+n+"/friends"},v.default.createElement("span",{className:"item-image"},v.default.createElement(O.default,{img:"more",size:44})))},a=n,s(r,a)}return l(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.counter,r=e.friends,i=e.hasMore,s=e.hasMoreFriends,l=e.isOwnProfile,u=e.isPending,c=e.isUsersPending,f=e.username,p=o(e,["className","counter","friends","hasMore","hasMoreFriends","isOwnProfile","isPending","isUsersPending","username"]),m=l?this.t("myFriends"):this.t("friendsTitle",{username:f}),g=n?" ("+n+")":"",h=i&&!u;return v.default.createElement(T.default,d({isEditable:l,isLoading:c,isPending:u,title:""+m+g},p,{className:this.c("user-friends",t),hasMore:s,onEdit:this.listEditHandler,onLoadMore:this.loadMoreHandler,"data-component-name":"UserFriends"}),[].concat(a(r.map(this.renderFriendItem)),a(h?[this.renderHasMoreItem()]:[])))}}]),t}(_.default);L.propTypes={className:g.default.string,counter:g.default.number,friends:g.default.instanceOf(p.Seq),friendIds:g.default.arrayOf(g.default.number).isRequired,hasMore:g.default.bool,hasMoreFriends:g.default.bool,loadMoreUsers:g.default.func,isOwnProfile:g.default.bool,isPending:g.default.bool,isUsersPending:g.default.bool,removeFriends:g.default.func,username:g.default.string};var k=function(e,t){return{isUsersPending:e.users.isPending,friends:(0,M.getUsersBySortedIds)(e,t.friendIds),hasMoreFriends:(0,M.getMissingUserIds)(e,t.friendIds).length>0}},D=function(e){return(0,y.bindActionCreators)({loadMoreUsers:w.loadMore,removeFriends:I.remove},e)};t.default=(0,E.connect)(k,D)(L)},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(76),l=r(s),u=n(78),c=r(u),d=n(13),f=r(d),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(4),b=n(3),_=r(b),S=n(236),O=r(S),P=n(10),T=r(P),A=n(8),C=r(A),I=n(40),w=r(I),N=n(39),R=r(N),M=n(5),L=n(82),k=n(196),D=n(43),U=n(174),j=r(U),F=n(38),B=D.UPDATE_TYPES.EMAIL,H="settings_email",V="settings_current_password",G=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.getIsPasswordRequired=function(){var e=r.props.userProfile,t=e.isEmailVerified;return!(e.noPasswordMode&&!t)},r.cancelClickHandler=function(){r.setState({formFieldsErrors:{},isLocked:!0})},r.submitKeyDownHandler=function(e){e.keyCode===M.KEY_CODES.enter&&r.submitClickHandler(e)},r.submitClickHandler=function(e){e.preventDefault();var t=r.props,n=t.updateProfile,a=t.userProfile,o=r.context.store.getState,i=r.formFields.email.value,s=r.formFields.password.value,l=(0,L.validateFields)(r.formFields,o());if((0,f.default)(l)&&i!==a.email){var u={success:r.t("settings.changeEmail.notifications.success")};n({id:a.id,email:i,oldPassword:s},B,{notifications:u})}r.setState({formFieldsErrors:l})},r.unlockButtonClickHandler=function(){var e=r.props.config;if(e.whiteLabelId)return void(location.href=e.data.whiteLabel.url.accountSettings.changeEmail);r.setState({isLocked:!1})},r.changeHandler=function(){var e=r,t=e.emailRef,n=e.passwordRef,a=e.props,o=r.getIsPasswordRequired();r.setState({isValueChanged:t.value!==a.userProfile.email&&(!o||n.value)})},r.resendConfirmationEmailClickHandler=function(){r.props.resendConfirmationEmail()},i=n,o(r,i)}return i(t,e),p(t,[{key:"getDefaultState",value:function(){return{formFieldsErrors:{},isLocked:!0,isValueChanged:!1}}},{key:"getNextState",value:function(e,t){var n=e.isSucceeded,r=e.updatePrepare,a=e.updateError;return n?(this.formRef.reset(),r(B),{isValueChanged:!1,isLocked:!0}):{isValueChanged:!1,formFieldsErrors:a?(0,c.default)(a.details,function(e){return e.join(". ")}):{}}}},{key:"renderFormFieldError",value:function(e,t){var n=this.state.formFieldsErrors[e];return n?v.default.createElement(R.default,{className:"error",isForceVisible:!0,placement:"right",targetId:t},n):null}},{key:"renderMyEmailField",value:function(){var e=this,t=this.state.formFieldsErrors,n=this.props,r=n.isUpdating,a=n.userProfile.email,o=this.getIsPasswordRequired(),i=!r;return v.default.createElement("form",{className:"settings-form",ref:function(t){e.formRef=t}},v.default.createElement("div",{className:"settings-field"},v.default.createElement("label",{className:"settings-label",htmlFor:H},this.t("settings.changeEmail.labels.email")),v.default.createElement("span",{className:"settings-input"},v.default.createElement(w.default,{type:"email",defaultValue:a,disabled:!i,onChange:this.changeHandler,onKeyDown:this.submitKeyDownHandler,maxLength:M.DEFAULT_MAX_INPUT_LENGTH,id:H,className:this.c({error:t.email}),ref:function(t){e.emailRef=t}}),this.renderFormFieldError("email",H))),this.renderIf(o,v.default.createElement("div",{className:"settings-field"},v.default.createElement("label",{className:"settings-label",htmlFor:V},this.t("settings.changeEmail.labels.password")),v.default.createElement("span",{className:"settings-input"},v.default.createElement(w.default,{type:"password",defaultValue:"",disabled:!i,onChange:this.changeHandler,onKeyDown:this.submitKeyDownHandler,maxLength:M.DEFAULT_MAX_INPUT_LENGTH,id:V,className:this.c({error:t.passwordId}),ref:function(t){e.passwordRef=t}}),this.renderFormFieldError("oldPassword",V)))))}},{key:"renderResendButton",value:function(){var e=this.props,t=e.config;return e.userProfile.isEmailVerified||t.whiteLabelId?null:v.default.createElement(T.default,{className:"settings-title-email-resend",onClick:this.resendConfirmationEmailClickHandler,size:"large"},this.t("settings.changeEmail.emailResendConfirmation"))}},{key:"renderCurrentEmail",value:function(){var e=this.props.userProfile,t=e.email,n=e.isEmailVerified,r=n?this.t("settings.changeEmail.emailConfirmed"):this.t("settings.changeEmail.emailNotConfirmed");return v.default.createElement("div",{className:this.c("settings-title-email",{confirmed:n})},t,v.default.createElement("div",{className:"settings-title-email-status",id:"settings_email_status"},this.renderIf(n,v.default.createElement(C.default,{img:"check"}),v.default.createElement(O.default,{type:"alert-medium"},"!"))),v.default.createElement(R.default,{className:this.c({error:!n}),placement:"top",targetId:"settings_email_status",isMobileRelative:!1},r))}},{key:"render",value:function(){var e=this.t("settings.changeEmail.title"),t=this.props,n=t.config,r=t.isUpdating,a=this.state,o=a.isValueChanged,i=a.isLocked,s=!r&&o,l=n.whiteLabelId?"_"+n.whiteLabelId:"";return v.default.createElement(j.default,{title:e,lockedText:this.t("settings.changeEmail.lockedText"+l),additionalTitleContent:this.renderCurrentEmail(),additionalButton:this.renderResendButton(),isLocked:i,onUnlock:this.unlockButtonClickHandler,"data-component-name":"ChangeEmail"},v.default.createElement("div",{className:"settings-form-wrapper"},this.renderMyEmailField()),v.default.createElement(T.default,{disabled:!s,onClick:this.submitClickHandler,size:"large",style:"apply"},this.t("settings.save")),v.default.createElement(T.default,{onClick:this.cancelClickHandler,size:"large"},this.t("settings.cancel")))}},{key:"formFields",get:function(){var e=this.getIsPasswordRequired();return{email:{value:(0,l.default)(this.emailRef.value),validators:[L.validators.isEmailValidator]},password:{value:e?(0,l.default)(this.passwordRef.value):""}}}}]),t}(_.default);G.propTypes={currentUser:g.default.object,isLoggedIn:g.default.bool,isSucceeded:g.default.bool,isUpdating:g.default.bool,resendConfirmationEmail:g.default.func.isRequired,updateError:g.default.instanceOf(Error),updatePrepare:g.default.func.isRequired,updateProfile:g.default.func.isRequired,userProfile:g.default.object.isRequired};var x=function(e){return(0,y.bindActionCreators)({updatePrepare:D.updatePrepare,updateProfile:D.updateProfile,resendConfirmationEmail:k.resendConfirmation},e)},W=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut;return{config:e.config,currentUser:n,isLoggedIn:r&&!a,isUpdating:(0,F.getIsUpdating)(e,B),isSucceeded:(0,F.getIsSucceeded)(e,B),updateError:(0,F.getError)(e,B),userProfile:(0,F.getCurrentUserProfile)(e)}};t.default=(0,E.connect)(W,x)(G)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(76),l=r(s),u=n(385),c=r(u),d=n(1410),f=r(d),p=n(78),m=r(p),g=n(11),h=r(g),v=n(13),E=r(v),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=n(1),_=r(b),S=n(0),O=r(S),P=n(2),T=n(4),A=n(3),C=r(A),I=n(10),w=r(I),N=n(58),R=r(N),M=n(40),L=r(M),k=n(5),D=n(82),U=n(43),j=n(174),F=r(j),B=n(38),H=U.UPDATE_TYPES.PASSWORD,V=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.cancelClickHandler=function(){r.setState({formFieldsErrors:{},isLocked:!0})},r.submitKeyDownHandler=function(e){e.keyCode===k.KEY_CODES.enter&&r.submitClickHandler(e)},r.changeHandler=function(){r.setState({isValueChanged:["oldPassword","newPassword","reTypeNewPassword"].every(function(e){return Boolean(r[e+"Ref"].value)})})},r.submitClickHandler=function(e){e.preventDefault();var t=r.props,n=t.updateProfile,a=t.userProfile,o=r.state,i=o.isUpdatingUser,s=o.isValueChanged;if(!i&&s){var l=r.context.store.getState,u=(0,D.validateFields)(r.formFields,l());if((0,E.default)(u)){var c={success:r.t("settings.changePassword.notifications.success")};n({id:a.id,oldPassword:r.formFields.oldPassword.value,password:r.formFields.newPassword.value},H,{notifications:c})}r.setState({formFieldsErrors:u})}},r.unlockButtonClickHandler=function(){var e=r.props.config;if(e.whiteLabelId)return void(location.href=e.data.whiteLabel.url.accountSettings.changePassword);r.setState({isLocked:!1})},r.renderMyPasswordField=function(e){var t=r.props.isUpdating,n="settings_"+(0,c.default)(e)+"_"+r.uid,a=!t,o=r.state.formFieldsErrors[e];return O.default.createElement("div",{className:"settings-field",key:e},O.default.createElement("label",{className:"settings-label",htmlFor:n},r.t("settings.changePassword.labels."+e)),O.default.createElement("span",{className:"settings-input"},O.default.createElement(L.default,{type:"password",disabled:!a,onKeyDown:r.submitKeyDownHandler,onChange:r.changeHandler,maxLength:k.DEFAULT_MAX_INPUT_LENGTH,id:n,className:r.c({error:r.state.formFieldsErrors[e]}),autoCapitalize:"none",ref:function(t){r[e+"Ref"]=t}}),r.renderIf(o,function(){return O.default.createElement(R.default,{error:{message:o},targetId:n})})))},i=n,o(r,i)}return i(t,e),y(t,[{key:"getDefaultState",value:function(){return{formFieldsErrors:{},isLocked:!0,isValueChanged:!1}}},{key:"getNextState",value:function(e,t){var n=e.isSucceeded,r=e.updatePrepare,a=e.updateError;return n?(this.formRef.reset(),r(H),{isValueChanged:!1,isLocked:!0}):{isValueChanged:!1,formFieldsErrors:a?(0,m.default)((0,f.default)(a.details,function(e,t){return"password"===t?"newPassword":t}),function(e){return e.join(". ")}):{}}}},{key:"render",value:function(){var e=this,t=this.t("settings.changePassword.title"),n=this.props,r=n.isUpdating,a=n.config,o=this.state,i=o.isValueChanged,s=o.isLocked,l=!r&&i,u=a.whiteLabelId?"_"+a.whiteLabelId:"";return O.default.createElement(F.default,{title:t,isLocked:s,lockedText:this.t("settings.changePassword.lockedText"+u),onUnlock:this.unlockButtonClickHandler,"data-component-name":"ChangePassword"},O.default.createElement("div",{className:"settings-form-wrapper"},O.default.createElement("form",{className:"settings-form",ref:function(t){e.formRef=t}},(0,h.default)(["oldPassword","newPassword","reTypeNewPassword"],this.renderMyPasswordField))),O.default.createElement(w.default,{disabled:!l,onClick:this.submitClickHandler,size:"large",style:"apply"},this.t("settings.save")),O.default.createElement(w.default,{onClick:this.cancelClickHandler,size:"large"},this.t("settings.cancel")))}},{key:"formFields",get:function(){var e=this,t=this.oldPasswordRef,n=this.newPasswordRef,r=this.reTypeNewPasswordRef,a=function(t){return{predicate:function(n){return n===(0,l.default)(e[t+"Ref"].value)},errorType:"passwordsDontMatch"}};return{oldPassword:{value:(0,l.default)(t.value),validators:[D.validators.isRequiredValidator]},newPassword:{value:(0,l.default)(n.value),validators:[D.validators.isRequiredValidator,D.validators.isPasswordValidator,a("reTypeNewPassword")]},reTypeNewPassword:{value:(0,l.default)(r.value),validators:[D.validators.isRequiredValidator,a("newPassword")]}}}}]),t}(C.default);V.propTypes={isSucceeded:_.default.bool,isUpdating:_.default.bool,updateError:_.default.instanceOf(Error),updatePrepare:_.default.func.isRequired,updateProfile:_.default.func.isRequired,userProfile:_.default.object.isRequired};var G=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut;return{config:e.config,currentUser:n,isLoggedIn:r&&!a,isUpdating:(0,B.getIsUpdating)(e,H),isSucceeded:(0,B.getIsSucceeded)(e,H),updateError:(0,B.getError)(e,H),userProfile:(0,B.getCurrentUserProfile)(e)}},x=function(e){return(0,T.bindActionCreators)({updatePrepare:U.updatePrepare,updateProfile:U.updateProfile},e)};t.default=(0,P.connect)(G,x)(V)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(28),E=n(3),y=r(E),b=n(17),_=r(b),S=n(152),O=r(S),P=n(380),T=r(P),A=n(7),C=n(150),I=n(174),w=r(I),N="https://caniuse.com/#search=push",R=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.togglePushNotification=function(e){r.props.updateNotificationSettings({isPushEnabled:e})},r.toggleEmailNotification=function(e){r.props.updateNotificationSettings({isEmailEnabled:e})},r.renderEmailNotificationsSwitcher=function(){var e=r.props,t=e.isEmailAvailable,n=e.isEmailEnabled;return t?m.default.createElement("div",{className:r.c("settings-field"),key:"mail"},m.default.createElement("label",{className:"settings-label",htmlFor:"mail"},r.t("settings.notifications.labels.mail")),m.default.createElement("span",{className:"settings-input"},m.default.createElement(T.default,{size:"medium",isChecked:n,onChange:r.toggleEmailNotification}))):null},r.renderPushNotificationsSwitcher=function(){var e=r.props,t=e.isPushAvailable,n=e.isPushEnabled;return t?m.default.createElement("div",{className:"settings-field push-notifications-settings",key:"push"},m.default.createElement("label",{className:"settings-label",htmlFor:"push"},r.t("settings.notifications.labels.push"),m.default.createElement(O.default,null,m.default.createElement(_.default,{messageId:"settings.notifications.supportedBrowsersWarningLabel",elements:{link:m.default.createElement("a",{href:N,target:"_blank"})}}))),m.default.createElement("span",{className:"settings-input"},m.default.createElement(T.default,{size:"medium",isChecked:n,onChange:r.togglePushNotification}))):null},i=n,o(r,i)}return i(t,e),c(t,[{key:"render",value:function(){return m.default.createElement(w.default,{key:"notifications",title:this.t("settings.notifications.title"),"data-component-name":"NotificationsSettings"},m.default.createElement("form",{className:"settings-form settings-form-notifications"},this.renderEmailNotificationsSwitcher(),this.renderPushNotificationsSwitcher()))}}]),t}(y.default),M={hide:v.hide,updateNotificationSettings:C.updateNotificationSettings};R.propTypes=u({currentUser:f.default.object,isEmailAvailable:f.default.bool,isEmailEnabled:f.default.bool,isLoggedIn:f.default.bool,isPushAvailable:f.default.bool,isPushEnabled:f.default.bool},(0,A.getActionPropTypes)(M));var L=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.config.data.features,i=e.personalNotifications,s=i.isPushEnabled,u=i.isEmailEnabled;return{currentUser:n,isEmailAvailable:(0,l.default)(o,"notifications.email"),isEmailEnabled:u,isLoggedIn:r&&!a,isPushAvailable:(0,l.default)(o,"notifications.push"),isPushEnabled:s}},k=function(e){return(0,h.bindActionCreators)(M,e)};t.default=(0,g.connect)(L,k)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(169),u=r(l),c=n(33),d=r(c),f=n(30),p=r(f),m=n(78),g=r(m),h=n(11),v=r(h),E=n(49),y=r(E),b=n(6),_=r(b),S=n(47),O=r(S),P=n(172),T=r(P),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),I=n(1),w=r(I),N=n(0),R=r(N),M=n(2),L=n(4),k=n(92),D=r(k),U=n(3),j=r(U),F=n(10),B=r(F),H=n(43),V=n(174),G=r(V),x=n(38),W=H.UPDATE_TYPES.SETTINGS_PRIVACY,Y=function(e){var t=[{field:"showProfileTo",enabled:!e.isModel},{field:"showTokensTo",enabled:!e.isStudio&&!e.isModel},{field:"whoCanChat",enabled:e.isModel}];return(0,v.default)((0,O.default)(t,"enabled"),"field")},K=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.savePrivacyButtonClickHandler=function(){var e=r.state,t=e.privacyFields,n=e.userModified;(0,r.props.updateProfile)((0,d.default)(n,t),W)},r.selectFieldChangeHandler=function(e,t){var n=t.value,a=/^rates\./,o=a.test(e)?e.replace(a,"").concat("Rate"):e,i=(0,T.default)(r.state.userModified);i[o]=n,r.setState({userModified:i})},a=n,i(r,a)}return s(t,e),C(t,[{key:"getDefaultState",value:function(){var e=this.props.userProfile;return{privacyFields:Y(e),userModified:e}}},{key:"getNextState",value:function(e,t){var n=e.isSucceeded,r=e.updatePrepare,a=e.updateError;return n?(r(W),{isValueChanged:!1,isLocked:!0}):{isValueChanged:!1,formFieldsErrors:a?(0,g.default)(a.details,function(e){return e.join(". ")}):{}}}},{key:"renderSelect",value:function(e){var t=this,n=this.props.availableSettings,r=e.fieldName,o=e.fieldClassName,i=e.settingName,s=a(e,["fieldName","fieldClassName","settingName"]),l="settings_"+i+"_"+r;return(0,u.default)(s,"inputProps.id",l),R.default.createElement("div",{className:this.c("settings-field",o),key:r},R.default.createElement("label",{className:"settings-label",htmlFor:l},this.t("settings."+i+".labels."+r)),R.default.createElement("span",{className:"settings-input"},R.default.createElement(D.default,A({value:(0,_.default)(this.state.userModified,r),onSelect:(0,p.default)(this.selectFieldChangeHandler,r),options:(0,v.default)((0,_.default)(n,r),function(e){var n="settings."+i+".options."+r+"."+e,a=t.t(n);return{value:e,label:a===n?e:a}})},s))))}},{key:"render",value:function(){var e=this,t=this.props.isUpdating,n=this.state.privacyFields,r=(0,y.default)((0,d.default)(this.props.userProfile,n),(0,d.default)(this.state.userModified,n)),a=t||r;return R.default.createElement(G.default,{key:"privacy",title:this.t("settings.privacy.title"),"data-component-name":"PrivacySettings"},R.default.createElement("form",{className:"settings-form settings-form-privacy"},(0,v.default)(n,function(t){return e.renderSelect({fieldName:t,settingName:"privacy"})})),R.default.createElement(B.default,{disabled:a,onClick:this.savePrivacyButtonClickHandler,size:"large",style:"apply"},this.t("settings.save")))}}]),t}(j.default);K.propTypes={availableSettings:w.default.object,currentUser:w.default.object,isLoggedIn:w.default.bool,isSucceeded:w.default.bool,isUpdating:w.default.bool,updateError:w.default.instanceOf(Error),updatePrepare:w.default.func.isRequired,updateProfile:w.default.func.isRequired,userProfile:w.default.object.isRequired};var q=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut;return{availableSettings:e.availableSettings.data,currentUser:n,isLoggedIn:r&&!a,isUpdating:(0,x.getIsUpdating)(e,W),isSucceeded:(0,x.getIsSucceeded)(e,W),updateError:(0,x.getError)(e,W),userProfile:(0,x.getCurrentUserProfile)(e)}},z=function(e){return(0,L.bindActionCreators)({updatePrepare:H.updatePrepare,updateProfile:H.updateProfile},e)};t.default=(0,M.connect)(q,z)(K)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(O){v.default.log("developer.actions.addLog()",n);var a={hour:"numeric",minute:"numeric",second:"numeric"},o=(new Date).toLocaleString("en-US",a),i=g({id:(0,f.default)(),method:e,time:o,name:t},n);(0,m.default)(function(){return r({type:_,data:i})},100)}}}function o(e){return function(t){O&&(v.default.log("developer.actions.removeLog()",e),(0,m.default)(function(){return t({type:S,data:{criteria:e}})},100))}}function i(e,t,n,r){return function(o){v.default.log("developer.actions.addDbLog()",r),O||(O=!0,o({type:y})),o(a(e,t,{status:n,request:r,type:"requestLog"}))}}function s(e,t){return function(n){O&&(v.default.log("developer.actions.addSocketLog()",t),n(a("SOCKET",e,{params:t,type:"socketLog"})))}}function l(e,t){return function(n){O&&(v.default.log("developer.actions.addSocketSubscribeLog()",t),n("subscribe"===e?a("SOCKET:SUBSCRIBE",t,{key:t,type:"subscribeLog"}):o({key:t})))}}function u(){return function(e){v.default.log("developer.actions.clear()"),e({type:E})}}function c(e){return function(t){return t({type:b,data:{currentFilterType:e}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_REMOVE=t.LOG_ADD=t.FILTER_UPDATE=t.DEBUG_LOG_ENABLE=t.CLEAR=void 0;var d=n(160),f=r(d),p=n(171),m=r(p),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.addLog=a,t.removeLog=o,t.addRequestLog=i,t.addSocketLog=s,t.addSocketSubscribeLog=l,t.clear=u,t.updateFilter=c;var h=n(29),v=r(h),E=t.CLEAR="developer/CLEAR",y=t.DEBUG_LOG_ENABLE="developer/DEBUG_LOG_ENABLE",b=t.FILTER_UPDATE="developer/FILTER_UPDATE",_=t.LOG_ADD="developer/LOG_ADD",S=t.LOG_REMOVE="developer/LOG_REMOVE",O=!1},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a,o=t.LOG_TYPES={ALL:"all",CACHE:"cacheLog",DB:"dbLog",REQUEST:"requestLog",SOCKET:"socketLog",SOCKET_SUBSCRIBERS:"subscribeLog"};t.LOG_FILTER_LABELS=(a={},r(a,o.ALL,"All"),r(a,o.CACHE,"Cache"),r(a,o.DB,"DB"),r(a,o.SOCKET,"Socket"),r(a,o.SOCKET_SUBSCRIBERS,"Socket subscribers"),a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"getChildContext",value:function(){return{i18n:this.props.i18n}}},{key:"render",value:function(){return s.Children.only(this.props.children)}}]),t}(s.Component);c.propTypes={i18n:u.default.shape({trans:u.default.func.isRequired,transWhiteLabel:u.default.func.isRequired}).isRequired,children:u.default.element.isRequired},c.childContextTypes={i18n:u.default.shape({trans:u.default.func.isRequired,transWhiteLabel:u.default.func.isRequired})},t.default=c},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(124),s=r(i),l=n(466),u=r(l),c=n(95),d=r(c),f=n(26),p=r(f),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=new Map,v=function(){function e(){if(o(this,e),this.isStorageSupported=!0,this.constructor===e)throw new TypeError("Cannot construct Storage instances directly");if("object"===m(this.storage))try{this.storage.setItem("storageTest",1),this.storage.removeItem("storageTest")}catch(e){this.isStorageSupported=!1}else this.isStorageSupported=!1}return g(e,[{key:"has",value:function(e){return this.isStorageSupported?this.storage.hasOwnProperty(e):this.storageMap.has(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!this.has(e)||this.hasExpired(e))return this.remove(e),t;var n=this.isStorageSupported?this.storage.getItem(e):this.storageMap.get(e),r=void 0;try{r=JSON.parse(n)}catch(e){r=n}return r}},{key:"pull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.get(e,t);return this.remove(e),n}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.isStorageSupported?this.storage.setItem(e,JSON.stringify(t)):this.storageMap.set(e,t),n&&this.setExpires(e,n)}},{key:"update",value:function(e,t,n){var r=this.get(e);return r?(0,d.default)(r)&&(0,d.default)(t)?this.set(e,(0,u.default)({},r,t),n):(0,p.default)(r)&&(0,p.default)(t)&&this.set(e,(0,s.default)([].concat(a(r),a(t))),n):this.set(e,t,n),r}},{key:"remove",value:function(e){this.isStorageSupported?(this.storage.removeItem(e),this.storage.removeItem(e+"_expires")):(this.storageMap.delete(e),this.storageMap.delete(e+"_expires"))}},{key:"setExpires",value:function(e,t){var n=Date.now()+t;this.isStorageSupported?this.storage.setItem(e+"_expires",n):this.storageMap.set(e+"_expires",n)}},{key:"getExpires",value:function(e){return this.isStorageSupported?this.storage.getItem(e+"_expires"):this.storageMap.get(e+"_expires")}},{key:"hasExpired",value:function(e){return this.getExpires(e)&&this.getExpires(e)<Date.now()}},{key:"storage",get:function(){return h}},{key:"storageMap",get:function(){return h}}]),e}();t.default=v},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getIsSuccessStatus=function(e){return e>=200&&e<300},t.getIsRedirectStatus=function(e){return e>=300&&e<400},t.getIsClientErrorStatus=function(e){return e>=400&&e<500},t.getIsServerErrorStatus=function(e){return e>=500&&e<600},t.getIsEntityTooLargeErrorStatus=function(e){return 413===e}},,,,,,function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getViewersCount=t.getMembersUsersData=t.getCamMembersIdsSet=void 0;var a=n(32),o=n(224),i=n(16),s=t.getCamMembersIdsSet=function(e){return e.camMembers.camMembersIds},l=function(e){return e.auth.currentUser},u=function(e){return e.camMembers.guests},c=function(e){return e.camMembers.invisibles},d=function(e){return e.users.collection},f=function(e){return(0,i.find)(e,function(e){return e.isKnight}).toArray()},p=function(e){return(0,i.find)(e,function(e){return e.isGold&&!e.isKnight},{itemKey:"goldPoints",order:"DESC"}).toArray()},m=function(e){return(0,i.find)(e,function(e){return e.isGreen&&!e.isKnight},{itemKey:"goldPoints",order:"DESC"}).toArray()},g=function(e){return(0,i.find)(e,function(e){return!e.isGold&&!e.isGreen},"username",-100).toArray()},h=t.getMembersUsersData=(0,a.createSelector)([d,s,l,o.getCounterpart],function(e,t,n,a){var o=[n],s=0;if(a)o.push(a);else{var l=(0,i.find)(e,function(e){return t.has(e.id)});o.push.apply(o,r(f(l)).concat(r(p(l)),r(m(l)),r(g(l))));var u=t.size,c=o.length-1;s=u>c?u-c:0}return{members:o,moreRegularUsers:s}});t.getViewersCount=(0,a.createSelector)([c,u,h],function(e,t,n){var r=n.members,a=n.moreRegularUsers;return e+t+r.length+a})},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBroadcastServers=t.getViewServers=t.getServers=t.BROADCAST_SERVER_TYPES=void 0;var a=n(13),o=r(a),i=n(14),s=r(i),l=n(48),u=r(l),c=n(47),d=r(c),f=n(6),p=r(f),m=n(11),g=r(m),h=n(78),v=r(h),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=(t.BROADCAST_SERVER_TYPES={WOWZA:"wowza",FLASHPHONER:"flashphoner"},t.getServers=function(e,t,n){var r=n.continent,a=n.country,i=n.region,l=[];return i&&(l=(0,d.default)(e,function(e){return(0,s.default)(e.countries,a)&&(0,s.default)(e.regions,i)&&e.weight}),l.length)?l:a&&(l=(0,d.default)(e,function(e){return(0,s.default)(e.countries,a)&&(0,o.default)(e.regions)&&e.weight}),l.length)?l:r&&(l=(0,d.default)(e,function(e){return(0,s.default)(e.continents,r)&&(0,o.default)(e.regions)&&(0,o.default)(e.countries)&&e.weight}),l.length)?l:(0,d.default)(e,function(e){return e.weight>0})});t.getViewServers=function(e,t,n,r){var a=e.serverWeightMultiplier,o={continent:t,country:n,region:r};return(0,v.default)(e.servers,function(e){var t=y(e,a,o),n=0,r=(0,g.default)(t,function(e){return n+=e.weight,E({},e,{min:n-e.weight,max:n})}),i=Math.random()*n;return(0,p.default)((0,u.default)(r,function(e){return e.min<=i&&i<=e.max}),"address","")})},t.getBroadcastServers=function(e){var t=e.servers,n=void 0===t?{}:t;return(0,v.default)(n,function(e){return(0,g.default)(e,"address")})}},,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DOCUMENTS_LOAD_SUCCESS="documents/LOAD_SUCCESS",t.DOCUMENTS_CREATE_SUCCESS="documents/CREATE_SUCCESS",t.DOCUMENTS_CREATE_START="documents/CREATE_START"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case h.LOAD_START:case h.ADD_START:case h.REMOVE_START:return d({},e,{isPending:!0});case h.LOAD_SUCCESS:return d({},e,{error:null,favoriteIds:p.default.OrderedSet(t.data.favoriteIds),isPending:!1});case h.ADD_SUCCESS:return d({},e,{error:null,favoriteIds:e.favoriteIds.add(t.data.favoriteId),isPending:!1});case h.ADD_GUEST_FAVORITE_SUCCESS:return d({},e,{error:null,guestFavoriteIds:e.guestFavoriteIds.add(t.data.favoriteId),isPending:!1});case h.REMOVE_SUCCESS:return d({},e,{error:null,favoriteIds:e.favoriteIds.filterNot(function(e){return t.data.favoriteIds.indexOf(e)>-1}),isPending:!1});case h.REMOVE_GUEST_FAVORITE_SUCCESS:return d({},e,{error:null,guestFavoriteIds:e.guestFavoriteIds.filterNot(function(e){return t.data.favoriteIds.indexOf(e)>-1}),isPending:!1});case h.UPDATE_SUCCESS:return d({},e,{error:null,guestFavoriteIds:p.default.OrderedSet(),isPending:!1});case h.LOAD_FAIL:case h.ADD_FAIL:case h.REMOVE_FAIL:return d({},e,{error:t.data.error,isPending:!1});case h.CLOSE_FAVORITE_BANNER:return d({},e,{isGuestBannerHidden:!0});case v.LOGOUT_SUCCESS:return d({},y);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.getCookieGuestFavoriteIds=void 0;var o=n(950),i=r(o),s=n(11),l=r(s),u=n(80),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var f=n(18),p=r(f),m=n(106),g=r(m),h=n(108),v=n(34),E=t.getCookieGuestFavoriteIds=function(){return(0,l.default)((0,c.default)((0,i.default)(g.default.get("guestFavoriteIds",""),",")),Number)},y=t.initialState={error:null,favoriteIds:p.default.OrderedSet(),guestFavoriteIds:p.default.OrderedSet(E()),isGuestBannerHidden:g.default.get("isGuestBannerHidden",!1),isPending:!1}},,function(e,t,n){"use strict";function r(){return function(e){return e({type:s}),o.default.get(i).then(function(t){var n=t.qrCode;return e({type:l,data:{qrCode:n}}),null}).catch(function(t){throw e({type:u,data:{error:t}}),t})}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_ERROR=t.LOAD_SUCCESS=t.LOAD_START=void 0,t.loadData=r;var a=n(557),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i="/api/mobile/v1/qr",s=t.LOAD_START="mobileApp/LOAD_START",l=t.LOAD_SUCCESS="mobileApp/LOAD_SUCCESS",u=t.LOAD_ERROR="mobileApp/LOAD_ERROR"},,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return function(t,n,r){var s=r.Api,l=r.ApiError;return t({type:a}),s.get("/news",{limit:e}).then(function(e){return t({type:o,data:e}),null}).catch(l,function(e){t({type:i,data:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.load=r;var a=t.LOAD_START="modelNews/LOAD_START",o=t.LOAD_SUCCESS="modelNews/LOAD_SUCCESS",i=t.LOAD_FAIL="modelNews/LOAD_FAIL"},function(e,t,n){"use strict";function r(e){return function(t,n,r){var l=r.Api,u=r.ApiError;return t({type:o,data:{contestType:e}}),l.get("/models/top/"+e).then(function(e){var n=e.models,r=e.prizes,o=e.tops,s=e.winnerIds;return t({type:a.USERS_SAVE,data:{users:n}}),t({type:i,data:{prizes:r,tops:o,winnerIds:s}}),null}).catch(u,function(e){t({type:s,data:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_FAIL=t.LOAD_SUCCESS=t.LOAD_START=void 0,t.load=r;var a=n(37),o=t.LOAD_START="modelsTop/LOAD_START",i=t.LOAD_SUCCESS="modelsTop/LOAD_SUCCESS",s=t.LOAD_FAIL="modelsTop/LOAD_FAIL"},function(e,t,n){"use strict";function r(e){var t=e.from,n=e.until;return function(e,r,s){var l=s.Api,u=s.ApiError,c=r().auth.currentUser;return e({type:a}),l.get("/users/"+c.id+"/payoutHistory",{from:t,until:n}).then(function(t){var n=t.transactions,r=t.sum;return e({type:o,data:{transactions:n,transactionsSum:r}}),null}).catch(u,function(t){e({type:i,data:{error:t}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.load=r;var a=t.LOAD_START="paymentsHistory/LOAD_START",o=t.LOAD_SUCCESS="paymentsHistory/LOAD_SUCCESS",i=t.LOAD_FAIL="paymentsHistory/LOAD_FAIL"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PERSON_EDIT_FIELD_NAMES={ADDRESS:"address",AGREEMENT:"agreement",BIRTH_DATE:"birthDate",CITY:"city",COUNTRY:"country",FIRST_NAME:"firstName",GENDER:"gender",ID_NUMBER:"idNumber",LAST_NAME:"lastName",OTHER_NAMES:"otherNames",REGION:"region"}},function(e,t,n){"use strict";function r(e){var t=e.from,n=e.until;return function(e,r,s){var l=s.Api,u=s.ApiError,c=r().auth.currentUser;return e({type:a}),l.get("/users/"+c.id+"/earnings",{from:t,until:n}).then(function(t){var n=t.earnings;return e({type:o,data:{earnings:n}}),null}).catch(u,function(t){e({type:i,data:{error:t}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.load=r;var a=t.LOAD_START="studioEarnings/LOAD_START",o=t.LOAD_SUCCESS="studioEarnings/LOAD_SUCCESS",i=t.LOAD_FAIL="studioEarnings/LOAD_FAIL"},function(e,t,n){"use strict";function r(e){var t=e.from,n=e.until;return function(e,r,s){var l=s.Api,u=s.ApiError,c=r().auth.currentUser;return e({type:a}),l.get("/users/"+c.id+"/transactions",{from:t,until:n}).then(function(t){var n=t.inTokens,r=t.inUsd,a=t.transactions;return e({type:o,data:{totalEarnings:{inTokens:n,inUsd:r},transactions:a}}),null}).catch(u,function(t){e({type:i,data:{error:t}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.load=r;var a=t.LOAD_START="tokensHistory/LOAD_START",o=t.LOAD_SUCCESS="tokensHistory/LOAD_SUCCESS",i=t.LOAD_FAIL="tokensHistory/LOAD_FAIL"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t,n){var r=n(),o=n(),i=o.config.whiteLabelId,l=i||"sc";e.forEach(function(e){if(e.enabled&&(0,s.default)(e.whiteLabels,l)){var n=f(r,e);"undefined"!=typeof window&&u.default.addUserProps(a({},e.amplitudeName,n)),t({type:d,data:{experimentName:e.name,chosenVariant:n}})}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.SAVE_AB_TEST=void 0;var i=n(14),s=r(i);t.initAbTests=o;var l=n(59),u=r(l),c=n(1003),d=t.SAVE_AB_TEST="abTesting/SAVE_AB_TEST",f=function(e,t){var n=e.abTesting.abTestingData[t.name];return n?((0,c.saveExperiment)(t.name,n),n):(0,c.createExperiment)(t.name,t.variants)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e){e({type:y})}}function o(e){return function(t,n,r){var a=r.Api,o=r.ApiError;if(!P(e,t,n))return(0,f.reject)(new m.ValidationError("Validation error"));var i=n(),l=(0,u.default)(e,"value"),c=l.username,d=l.email,v=l.department,y=l.subject,O=l.message;return t({type:b}),a.post("/support",{username:c,email:d,department:v,subject:y,message:O,browserCapabilities:g.BROWSER_CAPABILITIES,lastPathNames:(0,s.default)(h.lastPathNames,-10)}).then(function(){return t({type:_}),(0,p.success)((0,E.translate)(i,{messageId:"feedback.notifications.success"}),"feedback"),null}).catch(o,function(e){t({type:S,data:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.SEND_FAIL=t.SEND_SUCCESS=t.SEND_START=t.SEND_PREPARE=void 0;var i=n(354),s=r(i),l=n(78),u=r(l),c=n(13),d=r(c);t.prepare=a,t.send=o;var f=n(20),p=n(28),m=n(54),g=n(5),h=n(19),v=n(82),E=n(57),y=t.SEND_PREPARE="feedback/SEND_PREPARE",b=t.SEND_START="feedback/SEND_START",_=t.SEND_SUCCESS="feedback/SEND_SUCCESS",S=t.SEND_FAIL="feedback/SEND_FAIL",O=function(e){var t=(0,u.default)(e,function(e){return[e]});return new m.ValidationError(["Form validation error"],t)},P=function(e,t,n){var r=n(),a=(0,v.validateFields)(e,r),o=(0,d.default)(a);return o||t({type:S,data:{error:O(a)}}),o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1053);Object.defineProperty(t,"analytics",{enumerable:!0,get:function(){return r(a).default}});var o=n(1055);Object.defineProperty(t,"config",{enumerable:!0,get:function(){return r(o).default}});var i=n(1057);Object.defineProperty(t,"headerNotifications",{enumerable:!0,get:function(){return r(i).default}});var s=n(1083);Object.defineProperty(t,"clientPerformance",{enumerable:!0,get:function(){return r(s).default}});var l=n(1084);Object.defineProperty(t,"socket",{enumerable:!0,get:function(){return r(l).default}});var u=n(1086);Object.defineProperty(t,"toastNotifications",{enumerable:!0,get:function(){return r(u).default}});var c=n(1087);Object.defineProperty(t,"ui",{enumerable:!0,get:function(){return r(c).default}});var d=n(1088);Object.defineProperty(t,"visitorAgreement",{enumerable:!0,get:function(){return r(d).default}})},function(e,t,n){"use strict";function r(){return function(e){return e({type:a})}}Object.defineProperty(t,"__esModule",{value:!0}),t.emitPageView=r;var a=t.PAGE_VIEW="pages/PAGE_VIEW"},,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=r(o),s=n(347),l=r(s),u=[],c=void 0,d=void 0,f=void 0,p=void 0,m=void 0,g=void 0,h=function e(){var t=this;a(this,e),this.onWindowLoaded=function(){window.removeEventListener("load",t.onWindowLoaded),d=+new Date;var e=d-c;t.addMetricToReport(t.composeMetricDescription("index.html was received","window's onload listener triggered"),e)},this.onConfigReceived=function(){f=+new Date;var e=f-c;t.addMetricToReport(t.composeMetricDescription("index.html was received","app config was received"),e)},this.onTranslationsReceived=function(){p=+new Date;var e=p-c;t.addMetricToReport(t.composeMetricDescription("index.html was received","translations was received"),e)},this.onRootComponentWillRender=function(){m=+new Date;var e=m-c;t.addMetricToReport(t.composeMetricDescription("index.html was loaded","react started render root component"),e)},this.onRootComponentDidRender=function(){g=+new Date;var e=g-c;t.addMetricToReport(t.composeMetricDescription("index.html was loaded","react has rendered root component"),e),t.sendReport()},this.composeMetricDescription=function(e,t){return"Time spent between <"+e+"> AND <"+t+">"},this.addMetricToReport=function(e,t){return u.push({description:e,time:t})},this.sendReport=function(){return l.default.sendPerformanceReport("Performance metrics report",{report:u})},"undefined"!=typeof window&&(c=(0,i.default)(window,"INDEX_HTML_RECEIVED_TIME"),window.addEventListener("load",this.onWindowLoaded))},v=new h;t.default=v},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),o=r(a),i=n(105),s=r(i),l=n(128),u=r(l),c=n(1118),d=r(c),f=n(1),p=r(f),m={BOOLEAN:{check:function(e){return(0,d.default)(e)},react:p.default.bool.isRequired},NUMBER:{check:function(e){return(0,u.default)(e)},react:p.default.number.isRequired},STRING:{check:function(e){return(0,s.default)(e)},react:p.default.string.isRequired},NODE:{check:function(e){return(0,o.default)(e)},react:p.default.node.isRequired}};t.default=m},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(r(a),n(0)),i=r(o),s=n(17),l=r(s),u=function(){return i.default.createElement(l.default,{choiceParameter:"tokens",elements:{CentroBill:i.default.createElement("a",{href:"https://centrobill.com/",target:"_blank",rel:"nofollow"},"CentroBill"),SegPay:i.default.createElement("a",{href:"https://cs.segpay.com/",target:"_blank",rel:"nofollow"},"SegPay"),Epoch:i.default.createElement("a",{href:"https://epoch.com/",target:"_blank",rel:"nofollow"},"Epoch")},messageId:"footer.salesAgents"})};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(597),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(28),v=n(3),E=r(v),y=n(8),b=r(y),_=n(83),S=r(_),O=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(){var e=r.props;(0,e.hide)({id:e.id}),S.default.set(-1)},i=n,o(r,i)}return i(t,e),u(t,[{key:"render",value:function(){return this.props.isPermanent?p.default.createElement("div",{className:this.className,"data-component-name":"HeaderNotification"},p.default.createElement("span",{className:"header-notification-body"},this.props.children)):p.default.createElement("div",{className:this.className,onClick:this.clickHandler,"data-component-name":"HeaderNotification"},p.default.createElement("span",{className:"header-notification-body"},this.props.children),p.default.createElement(b.default,{img:"close"}))}},{key:"className",get:function(){var e=this.props,t=e.isPermanent,n=e.type;return this.c("header-notification","header-notification-"+(0,l.default)(n),{"header-notification-permanent":t})}}]),t}(E.default);O.propTypes={children:d.default.any,hide:d.default.func.isRequired,id:d.default.string,isPermanent:d.default.bool,type:d.default.string.isRequired};var P=function(e){return(0,g.bindActionCreators)({hide:h.hide},e)};t.default=(0,m.connect)(null,P)(O)},,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=n(601),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"current",get:function(){return this.pathname.login}},{key:"whiteLabelType",get:function(){return"login"}},{key:"other",get:function(){return[this.pathname.signUp.default,this.pathname.signUp.industry]}},{key:"modalProps",get:function(){return{component:"Login",className:"auth-modal-login",triggerSource:this.props.triggerSource}}}]),t}(u.default),d=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,s.connect)(d)(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractAuthLink=void 0;var s=n(11),l=r(s),u=n(26),c=r(u),d=n(6),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(1),h=r(g),v=n(140),E=r(v),y=n(0),b=r(y),_=n(24),S=n(9),O=n(3),P=r(O),T=n(5),A=n(59),C=r(A),I=n(68),w=t.AbstractAuthLink=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.pathname={login:"/login",signUp:{default:"/signup",user:"/signup/user",model:"/signup/model",studio:"/signup/studio",industry:"/industry"}},r.clickHandler=function(e){var t=r.context.store,n=t.dispatch,a=t.getState;if(a().config.whiteLabelId)return r.clickHandlerWhiteLabel(e);r.onClick(e);var o=(0,c.default)(r.other)?(0,l.default)(r.other,function(e){return{path:e}}):[{path:r.other}];(0,I.findMatchedBranchSelectorFactory)({routes:o,toBool:!0})(a())||(e.preventDefault(),n((0,S.showModal)(T.MODAL_TYPES.AUTH,r.modalProps)))},r.clickHandlerWhiteLabel=function(e){var t=r.context.store.getState,n=r.props.triggerSource,a=t();r.onClick(e),e.preventDefault();var o=r.props.config.data.whiteLabel.url,i=(0,f.default)(o,r.whiteLabelType),s=(0,I.getModelPageUsername)(a),l=p({},C.default.buildAmplitudeBackendDTO({modelName:s,source:n})),u=decodeURIComponent(E.default.stringify(l)),c=encodeURIComponent(location.href+"?"+u);"undefined"!=typeof window&&(location.href=i+"?url="+c)},r.onClick=function(e){var t=r.props.onClick;t&&t(e)},i=n,o(r,i)}return i(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.linkProps,n=e.className,r=e.children;this.context.store.getState;return b.default.createElement(_.Link,p({},t,{className:n,to:this.current,onClick:this.clickHandler,"data-component-name":"AbstractAuthLink"}),r)}},{key:"current",get:function(){}},{key:"whiteLabelType",get:function(){}},{key:"other",get:function(){}},{key:"modalProps",get:function(){}}]),t}(P.default);w.propTypes={className:h.default.string,children:h.default.any.isRequired,linkProps:h.default.object,onClick:h.default.func,triggerSource:h.default.string.isRequired},w.defaultProps={linkProps:{}},t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=(r(d),n(2)),p=n(601),m=r(p),g=n(27),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"current",get:function(){return this.pathname.signUp[this.props.signUpType]}},{key:"whiteLabelType",get:function(){switch(this.props.signUpType){case g.SIGNUP_USER_ROLES.USER:return"signup";case g.SIGNUP_USER_ROLES.MODEL:return"signupModel";case g.SIGNUP_USER_ROLES.STUDIO:return"signupStudio";default:return"signup"}}},{key:"other",get:function(){return this.pathname.login}},{key:"modalProps",get:function(){return{component:"SignUp",className:"auth-modal-signup",triggerSource:this.props.triggerSource}}}]),t}(m.default);h.propTypes=s({},m.default.propTypes,{signUpType:c.default.oneOf(["user","model","studio"])}),h.defaultProps={signUpType:"user"};var v=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,f.connect)(v)(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(17),u=r(l),c=n(62),d=n(1176),f=r(d),p=function(e){var t=e.votersCount,n=e.rating;return n?s.default.createElement("div",{className:"private-rating","data-component-name":"PrivateRating"},s.default.createElement(f.default,{rating:(0,c.roundFloat)(n)}),s.default.createElement("span",null,s.default.createElement(u.default,{messageId:"viewCam.privateRating.votersCount",parameters:{votersCount:t},choiceParameter:"votersCount"}))):null};p.propTypes={rating:o.default.number,votersCount:o.default.number},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ForgotPassword=void 0;var s=n(13),l=r(s),u=n(6),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(31),E=n(2),y=n(4),b=n(3),_=r(b),S=n(58),O=r(S),P=n(10),T=r(P),A=n(8),C=r(A),I=n(40),w=r(I),N=n(300),R=r(N),M=n(5),L=n(7),k=n(294),D=t.ForgotPassword=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:["requestPasswordError"],action:function(e){var t=e.requestPasswordError,n=e.showRecaptcha;t&&n&&r.recaptchaRef.resetRecaptcha()}}],r.requestPasswordRecoveryButtonClickHandler=function(e){e.preventDefault();var t=r.props,n=t.onSuccess,a=t.requestPasswordRecovery,o=t.routerPush,i=r,s=i.recaptchaRef;a({loginOrEmail:i.loginOrEmailRef.value,recaptcha:(0,c.default)(s,"value","")}).then(function(){n?n():o("/")}).catch(function(){})},i=n,o(r,i)}return i(t,e),f(t,[{key:"renderRecaptcha",value:function(){var e=this,t=this.props.config.data.recaptchaSiteKey,n=this.props.requestPasswordError,r=(0,c.default)(n,"details",{}),a=r.recaptcha,o="password_recovery_recaptcha_"+this.uid;return h.default.createElement("div",{className:"field field-recaptcha"},h.default.createElement(R.default,{recaptchaContainerId:o,className:"field",recaptchaSiteKey:t,ref:function(t){e.recaptchaRef=t}}),this.renderIf(!(0,l.default)(a),h.default.createElement(O.default,{error:{message:a},targetId:o})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isRequestingPassword,r=t.onAutoFocus,a=t.onClose,o=t.requestPasswordError,i=t.showRecaptcha,s=(0,c.default)(o,"details",{}),u="forgot_password_login_or_email_"+this.uid,d=Boolean(o)&&!(0,l.default)(s.loginOrEmail);return h.default.createElement("div",{className:this.c("forgot-password","island-wrapper",{"recaptcha-shown":i}),"data-component-name":"ForgotPassword"},h.default.createElement("div",{className:"island island-small"},h.default.createElement("div",{className:"island-header"},h.default.createElement("h1",{className:"island-title"},this.t("login.forgotPassword")),this.renderIf(a,h.default.createElement("a",{className:"button-close",onClick:a,role:"button"},h.default.createElement(C.default,{img:"close"})))),h.default.createElement("form",{className:"forgot-password-form island-form"},h.default.createElement("div",{className:"field field-loginOrEmail"},h.default.createElement(w.default,{autoCapitalize:"none",autoFocus:!0,onFocus:r,className:this.c("input-loginOrEmail",{error:Boolean(o)}),disabled:n,id:u,maxLength:M.DEFAULT_MAX_INPUT_LENGTH,placeholder:this.t("forgotPassword.form.placeholders.usernameOrEmail"),ref:function(t){e.loginOrEmailRef=t}}),this.renderIf(d,function(){return h.default.createElement(O.default,{error:{message:s.loginOrEmail[0]},targetId:u})})),this.renderIf(i,this.renderRecaptcha()),h.default.createElement("div",{className:"field field-action field-submit"},h.default.createElement(T.default,{disabled:n,className:"input-submit btn-action",style:"primary",type:"submit",onClick:this.requestPasswordRecoveryButtonClickHandler},this.t("button.submit"))))))}}]),t}(_.default),U={requestPasswordRecovery:k.requestPasswordRecovery,routerPush:v.push};D.propTypes=d({isModal:m.default.bool,isRequestingPassword:m.default.bool,onAutoFocus:m.default.func,onClose:m.default.func,onSuccess:m.default.func,requestPasswordError:m.default.instanceOf(Error)},(0,L.getActionPropTypes)(U));var j=function(e){var t=e.passwordRecovery,n=t.isRequestingPassword,r=t.requestPasswordError,a=e.config;return{config:a,isRequestingPassword:n,requestPasswordError:r,showRecaptcha:a.data.showRecaptchaEnv}},F=function(e){return(0,y.bindActionCreators)(U,e)};t.default=(0,E.connect)(j,F)(D)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){if(!this.props.error)return null;var e=this.props,t=e.error,n=e.fieldName,r=t.details,a=this.props.defaultMessage||this.t("errors.unknownError");return n&&r&&r[n]?a=Array.isArray(r[n])?r[n].join(". "):r[n]:t.message&&(a=t.message),a?d.default.createElement("span",{className:"error-message",dangerouslySetInnerHTML:{__html:a}}):null}}]),t}(p.default);m.propTypes={defaultMessage:u.default.string,error:u.default.shape({message:u.default.string}).isRequired,fieldName:u.default.string},m.defaultProps={defaultMessage:null,fieldName:null},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Login=void 0;var o=n(35),i=r(o),s=n(33),l=r(s),u=n(13),c=r(u),d=n(6),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=n(1),g=r(m),h=n(140),v=r(h),E=n(0),y=r(E),b=n(2),_=n(4),S=n(24),O=n(9),P=n(5),T=n(67),A=n(8),C=r(A),I=n(7),w=n(607),N=r(w),R=t.Login=function(e,t){var n=t.i18n.trans,r=e.action,o=e.className,i=e.email,s=e.isModal,u=e.isRecaptchaShown,d=e.location,m=e.onAutoFocus,g=e.onClose,h=e.onProceed,E=e.showRecaptchaForced,b=e.triggerSource,_=e.xhlUrl,O=(0,f.default)(d,"state.returnRoute"),A=O?{returnRoute:O}:null,I=function(t){var n=e.isModal,r=e.showModal;n&&(t.preventDefault(),r(P.MODAL_TYPES.AUTH,{component:"ForgotPassword",className:"auth-modal-forgot-password"}))},w=function(t){var n=e.action,r=e.className,o=e.isModal,i=e.showModal,s=e.triggerSource,u=(0,l.default)(e,["email","showRecaptchaForced"]);o&&(t.preventDefault(),i(P.MODAL_TYPES.AUTH,p({component:"SignUp",className:(0,T.classNames)("auth-modal-signup",a({},r,!(0,c.default)(r))),action:n,triggerSource:s},u)))};return y.default.createElement("div",{className:(0,T.classNames)("login","island-wrapper",{"recaptcha-shown":u}),"data-component-name":"Login"},y.default.createElement("div",{className:"island island-small"},y.default.createElement("div",{className:"island-header"},y.default.createElement("h1",{className:"island-title"},n("login.title")),(0,T.renderIf)(s,function(){return y.default.createElement("a",{className:"button-close",onClick:g,role:"button"},y.default.createElement(C.default,{img:"close"}))})),y.default.createElement("div",{className:"suggestion"},y.default.createElement("span",{className:"text suggestion-text"},n("login.notYetAMember")),y.default.createElement(S.Link,{to:{pathname:"/signup",state:A},onClick:w,className:"link link-after-text suggestion-link"},n("login.signUpHere"))),y.default.createElement(N.default,{action:r,className:o,email:i,isModal:!0,onAutoFocus:m,onClose:g,onProceed:h,triggerSource:b,showRecaptchaForced:E}),y.default.createElement("div",{className:"island-footer island-footer-centered forgot-password"},y.default.createElement(S.Link,{to:"/forgot-password",onClick:I,className:"link forgot-password-link"},n("login.forgotPassword")))),(0,T.renderIf)(_,y.default.createElement("div",{className:"login-via-xh"},y.default.createElement("a",{href:function(){var t=e.action,n=e.location,r=e.whiteLabel,a=e.isModal,o=(0,f.default)(t,"onEnterAction",{}),i=(0,f.default)(n,"search",""),s=(0,f.default)(n,"pathname",""),l=a?(0,f.default)(t,"href",""+r.url.xhlUrl+s+i):r.url.xhlUrl;return r.url.login+"?url="+encodeURIComponent(l+"?"+decodeURIComponent(v.default.stringify(o)))}()},y.default.createElement("span",null,n("login.loginViaXHButtonTitle"))))))},M={showModal:O.showModal};R.propTypes=p({action:g.default.shape({onSuccess:g.default.func}),isModal:g.default.bool,onClose:g.default.func,triggerSource:g.default.string.isRequired},(0,I.getActionPropTypes)(M)),R.defaultProps={onAutoFocus:i.default,onClose:i.default},R.contextTypes={i18n:g.default.object};var L=function(e){var t=e.auth,n=e.config.data.whiteLabel,r=(0,f.default)(n,"url.xhlUrl");return{isRecaptchaShown:Boolean((0,f.default)(t,"loginError.details.recaptcha")),whiteLabel:n,xhlUrl:r}},k=function(e){return(0,_.bindActionCreators)(M,e)};t.default=(0,b.connect)(L,k)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginForm=void 0;var l=n(76),u=r(l),c=n(33),d=r(c),f=n(35),p=r(f),m=n(78),g=r(m),h=n(70),v=r(h),E=n(69),y=r(E),b=n(13),_=r(b),S=n(26),O=r(S),P=n(220),T=r(P),A=n(116),C=r(A),I=n(6),w=r(I),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},L=n(1),k=r(L),D=n(0),U=r(D),j=n(2),F=n(24),B=n(4),H=n(9),V=n(3),G=r(V),x=n(58),W=r(x),Y=n(10),K=r(Y),q=n(40),z=r(q),X=n(300),Z=r(X),Q=n(51),J=n(5),$=n(59),ee=r($),te=n(82),ne=n(7),re=n(34),ae=te.validators.isRequiredValidator,oe=t.LoginForm=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.tooltipRefsContainer={},r.getSubmitButtonText=function(){return r.props.submitButtonText||r.t("login.form.submitBtn")},r.loginButtonClickHandler=function(e){e.preventDefault();var t=r.props,n=t.action,a=t.performLogin,o=r.context.store,i=o.dispatch,s=o.getState,l=r.getFormFields(),u=(0,te.validateFields)(l,s()),c=(0,_.default)(u),d=(0,g.default)(l,"value");c&&a(d).then(function(e){(0,w.default)(e,"data.user.id")&&n&&(0,y.default)(n.onSuccess)&&n.onSuccess({user:e.data.user,dispatch:i})}).catch(function(){return r.recaptchaRef&&r.recaptchaRef.resetRecaptcha()}),r.setState({formFieldsErrors:u})},r.goToForgotPasswordHandler=function(e){var t=r.props,n=t.isModal,a=t.showModal;n&&(e.preventDefault(),a(J.MODAL_TYPES.AUTH,{component:"ForgotPassword",className:"auth-modal-forgot-password"}))},r.extractValidationTooltipRef=function(e,t){r.tooltipRefsContainer[e]=t},r.onRecaptchaRendered=function(){(0,T.default)(r.tooltipRefsContainer,function(e){return e.updatePosition()})},r.renderRecaptcha=function(){var e=r.props.config.data.recaptchaSiteKey,t="login_irecaptcha_"+r.uid,n=(0,w.default)(r.state,"formFieldsErrors.recaptcha"),a=n&&isNaN(Date.parse(n));return U.default.createElement("div",{className:"field",id:t},U.default.createElement(Z.default,{ref:function(e){r.recaptchaRef=e},recaptchaSiteKey:e,onRecaptchaRendered:r.onRecaptchaRendered}),r.renderIf(a,U.default.createElement(W.default,{error:{message:n},targetId:t})))},a=n,i(r,a)}return s(t,e),R(t,[{key:"componentDidMount",value:function(){M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);var e=this.props.triggerSource;ee.default.action({action:Q.AMPLITUDE_EVENTS.DIALOG_LOGIN,value:{source:e}})}},{key:"getDefaultState",value:function(){return{formFieldsErrors:{}}}},{key:"getNextState",value:function(e,t){var n=e.auth,r=n.isLoggingIn,o=n.loginError,i={};if(!r&&o){var s=(0,v.default)(this.getFormFields()),l=(0,d.default)(o.details,s);i.formFieldsErrors=(0,_.default)(l)?a({},(0,C.default)(s),o.message):(0,g.default)(l,function(e){return(0,O.default)(e)?e.join(". "):e})}return i}},{key:"getFormFields",value:function(){var e=this.loginOrEmailRef,t=this.passwordRef,n=this.rememberRef,r=this.recaptchaRef,a=this.props.isRecaptchaShown,o={exists:{value:null},loginOrEmail:{value:(0,u.default)(e.value),validators:[ae]},password:{value:(0,u.default)(t.value),validators:[ae]},remember:{value:n.checked}};return a&&(o.recaptcha={value:(0,u.default)(r.value),validators:[ae]}),o}},{key:"renderFormFieldError",value:function(e,t){var n=this.state.formFieldsErrors,r=(0,w.default)(n,"exists");if(r&&"loginOrEmail"===e)return U.default.createElement(W.default,{error:{message:this.t("errors.validation.loginExists_"+r)},targetId:t});var a=n[e];return a?U.default.createElement(W.default,{error:{message:a},targetId:t,tooltipRefExtractor:this.extractValidationTooltipRef}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.isRecaptchaShown,r=t.onAutoFocus,a=t.isLoggingIn,o=this.state.formFieldsErrors,i=o.loginOrEmail,s=o.password,l="login_login_or_email_"+this.uid,u="login_password_"+this.uid;return U.default.createElement("form",{className:"login-form island-form","data-component-name":"LoginForm"},U.default.createElement("div",{className:"field field-loginOrEmail"},U.default.createElement(z.default,{autoCapitalize:"none",autoFocus:!0,onFocus:r,className:this.c("input-loginOrEmail",{error:i}),disabled:a,id:l,maxLength:J.DEFAULT_MAX_INPUT_LENGTH,placeholder:this.t("login.form.placeholders.usernameOrEmail"),ref:function(t){e.loginOrEmailRef=t}}),this.renderFormFieldError("loginOrEmail",l)),U.default.createElement("div",{className:"field field-password"},U.default.createElement(z.default,{autoCapitalize:"none",className:this.c("input-password",{error:s}),disabled:a,id:u,maxLength:J.DEFAULT_MAX_INPUT_LENGTH,placeholder:this.t("login.form.placeholders.password"),ref:function(t){e.passwordRef=t},type:"password"}),this.renderFormFieldError("password",u)),n&&this.renderRecaptcha(),U.default.createElement("div",{className:"field field-checkbox field-remember"},U.default.createElement(z.default,{className:"checkbox-small white",defaultChecked:!0,disabled:a,id:"login_remember",ref:function(t){e.rememberRef=t},type:"checkbox"}),U.default.createElement("label",{htmlFor:"login_remember",className:"label-remember"},this.t("login.form.rememberMe"))),U.default.createElement("div",{className:"field field-action field-submit"},U.default.createElement(K.default,{className:"input-submit btn-action",disabled:a,onClick:this.loginButtonClickHandler,size:this.props.submitButtonSize,style:this.props.submitButtonStyle,type:"submit"},this.getSubmitButtonText())))}}]),t}(G.default),ie={performLogin:re.login,showModal:H.showModal};oe.propTypes=N({action:k.default.shape({onSuccess:k.default.func}),isModal:k.default.bool,loginViaXHLUrl:k.default.string,onAutoFocus:k.default.func,onClose:k.default.func,triggerSource:k.default.string.isRequired},(0,ne.getActionPropTypes)(ie)),oe.defaultProps={onAutoFocus:p.default,onClose:p.default,submitButtonSize:"default",submitButtonStyle:"primary"};var se=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isLoggingIn:t.isLoggingIn,isRecaptchaShown:Boolean((0,w.default)(t,"loginError.details.recaptcha"))}},le=function(e){return(0,B.bindActionCreators)(ie,e)};t.default=(0,F.withRouter)((0,j.connect)(se,le)(oe))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(76),c=r(u),d=n(33),f=r(d),p=n(30),m=r(p),g=n(35),h=r(g),v=n(78),E=r(v),y=n(70),b=r(y),_=n(69),S=r(_),O=n(13),P=r(O),T=n(6),A=r(T),C=n(116),I=r(C),w=n(119),N=r(w),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),L=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},k=n(1),D=r(k),U=n(0),j=r(U),F=n(24),B=n(2),H=n(4),V=n(9),G=n(3),x=r(G),W=n(10),Y=r(W),K=n(58),q=r(K),z=n(300),X=r(z),Z=n(8),Q=r(Z),J=n(40),$=r(J),ee=n(5),te=n(82),ne=n(7),re=n(296),ae=n(27),oe=te.validators.isEmailValidator,ie=te.validators.isLoginValidator,se=te.validators.isPasswordValidator,le=te.validators.isRequiredValidator,ue=function(e,t){return e.triggerSource!==t.triggerSource},ce=1e3,de=function(e){function t(){var e,n,r,a;i(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:ue,action:function(e){var t=e.triggerSource;(0,e.emitSignupSourceChanged)(t)}},{update:["isSigningUp","signUpError","showRecaptcha"],action:function(e){var t=e.isSigningUp,n=e.signUpError,a=e.showRecaptcha,i={};if(!t&&n){var s=(0,b.default)(r.getFormFields()),l=(0,f.default)(n.details,s);i=(0,P.default)(l)?o({},(0,I.default)(s),n.message):(0,E.default)(l,function(e){return e.join(". ")}),a&&r.recaptchaRef.resetRecaptcha()}r.setState({formFieldsErrors:i})}}],r.formSubmitHandler=function(e){e.preventDefault();var t=r.state.isTermsAccepted,n=r.getFormFields(),a=r.context.store,o=a.dispatch,i=a.getState,s=(0,te.validateFields)(n,i());if((0,P.default)(s)&&t){var l=(0,E.default)(n,"value"),u=r.props,c=u.action,d=u.type,f=u.triggerSource;l.isModel=d===ae.SIGNUP_USER_ROLES.MODEL,l.isStudio=d===ae.SIGNUP_USER_ROLES.STUDIO,l.source=f;var p={success:r.t("signUp.notifications.success")};r.props.performSignUp(l,p).then(function(e){e&&c&&(0,S.default)(c.onSuccess)&&c.onSuccess({user:e.data.user,dispatch:o})})}r.setState({formFieldsErrors:s})},r.termsCheckboxChangeHandler=function(){r.setState({isTermsAccepted:!r.state.isTermsAccepted})},r.validateChangeHandler=function(e){var t=r.props.prepareCheck,n=r.getFormFields();t(),r.validateFields(n,e)},r.validateFields=(0,N.default)(function(e,t){r.props.validate(e,t)},ce,{leading:!1}),r.renderFormFieldIcon=function(e){if("login"!==e)return null;var t=r.getFormFields(),n=(0,A.default)(t,"login.value"),a=r.props.isValidating,o=r.state.formFieldsErrors;return Boolean(o[e])?j.default.createElement(Q.default,{img:"close-5",size:15}):a||(0,P.default)(n)?null:j.default.createElement(Q.default,{img:"check-1",size:15})},a=n,s(r,a)}return l(t,e),M(t,[{key:"getDefaultState",value:function(){return{isTermsAccepted:!1,formFieldsErrors:{}}}},{key:"componentDidMount",value:function(){L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.prepareCheck()}},{key:"getFormFields",value:function(){var e=this.loginRef,t=this.emailRef,n=this.passwordRef,r=this.recaptchaRef,a=this.props,o=a.showRecaptcha,i=a.noPasswordMode,s=o&&r?{recaptcha:{value:(0,c.default)(r.value),validators:[le]}}:{},l=i?{}:{password:{value:(0,c.default)(n.value),validators:[se]}};return R({login:{value:(0,c.default)((0,A.default)(e,"value","")),validators:[ie]},email:{value:(0,c.default)((0,A.default)(t,"value","")),validators:[oe]}},l,s)}},{key:"getSubmitText",value:function(){return this.props.submitButtonText||this.t("signUp."+this.props.type+".submitBtn")}},{key:"getFormFieldsInfo",value:function(){var e=this.props,t=e.email,n=e.noPasswordMode,r="signUp.form.placeholders";return[{name:"login",type:"text",placeholder:this.t(r+".username"),autoFocus:!0,maxLength:25,enabled:!0,autoCapitalize:"none",onChange:(0,m.default)(this.validateChangeHandler,"login"),onFocus:this.props.onAutoFocus},{defaultValue:t,name:"email",type:"email",enabled:!0,maxLength:ee.DEFAULT_MAX_INPUT_LENGTH,tooltip:"signUp.form.emailTooltip",placeholder:this.t(r+".email"),autoCapitalize:"none"},{name:"password",type:"password",enabled:!n,placeholder:this.t(r+".password"),autoCapitalize:"none"}]}},{key:"renderFormField",value:function(e,t){var n=this,r=e.enabled,o=e.isSigningUp,i=e.maxLength,s=e.name,l=e.type,u=e.tooltip,c=e.placeholder,d=a(e,["enabled","isSigningUp","maxLength","name","type","tooltip","placeholder"]),f=this.props.noPasswordMode,p=this.state.formFieldsErrors,m=Boolean(p[s]),g="sign_up_input_"+s+"_"+this.uid;return r?j.default.createElement("div",{className:"field field-"+s,key:t},j.default.createElement("div",{className:"field-input"},j.default.createElement($.default,R({className:this.c("input-"+s,{error:m}),disabled:o,id:g,maxLength:i,placeholder:c,ref:function(e){n[s+"Ref"]=e},type:l},d)),this.renderFormFieldIcon(s)),this.renderIf(u&&f,function(){return j.default.createElement("div",{className:"field-tooltip"},n.t(u))}),this.renderIf(m,function(){return j.default.createElement(q.default,{error:{message:p[s]},targetId:g})})):null}},{key:"renderRecaptcha",value:function(){var e=this,t=this.props,n=t.showRecaptcha,r=t.recaptchaSiteKey;if(!n)return null;var a=this.state.formFieldsErrors,o=Boolean(a.recaptcha),i="sign_up_irecaptcha_"+this.uid;return j.default.createElement("div",{className:"field field-recaptcha",id:i},j.default.createElement(X.default,{className:"field",recaptchaSiteKey:r,ref:function(t){e.recaptchaRef=t}}),this.renderIf(o,function(){return j.default.createElement(q.default,{error:{message:a.recaptcha},targetId:i})}))}},{key:"render",value:function(){var e=this.getFormFieldsInfo(),t=this.props.isSigningUp,n=this.state.isTermsAccepted;return j.default.createElement("form",{className:"signup-form island-form",onSubmit:this.formSubmitHandler,noValidate:!0,"data-component-name":"SignUpForm"},j.default.createElement("div",{className:"form-field-wrapper"},e.map(this.renderFormField.bind(this)),this.renderRecaptcha(),j.default.createElement("div",{className:"field field-checkbox field-terms"},j.default.createElement($.default,{onChange:this.termsCheckboxChangeHandler,className:"white",type:"checkbox",id:"signup_terms",size:"small"}),j.default.createElement("label",{htmlFor:"signup_terms",className:"label-terms"},this.t("signUp.form.labels.agreeTo"),j.default.createElement(F.Link,{className:"link link-after-text terms-link",to:"/terms",target:"_blank"},this.t("signUp.termsAndConditions"))))),j.default.createElement("div",{className:"field field-action field-submit"},j.default.createElement(Y.default,{className:"btn-action",disabled:t||!n,size:this.props.submitButtonSize,style:this.props.submitButtonStyle,type:"submit"},this.getSubmitText())))}}]),t}(x.default),fe={emitSignupSourceChanged:re.emitSignupSourceChanged,performSignUp:re.signUp,prepareCheck:re.prepareCheck,showModal:V.showModal,validate:re.validate};de.propTypes=R({action:D.default.shape({messageId:D.default.string,user:D.default.object,onSuccess:D.default.func}),canClose:D.default.bool,email:D.default.string,isModal:D.default.bool,isValidating:D.default.bool,noPasswordMode:D.default.bool,onAutoFocus:D.default.func,onClose:D.default.func,recaptchaSiteKey:D.default.string,showRecaptcha:D.default.bool,showRecaptchaForced:D.default.bool,submitButtonSize:D.default.string,submitButtonText:D.default.string,submitButtonStyle:D.default.string,type:D.default.oneOf([ae.SIGNUP_USER_ROLES.USER,ae.SIGNUP_USER_ROLES.MODEL,ae.SIGNUP_USER_ROLES.STUDIO])},(0,ne.getActionPropTypes)(fe)),de.defaultProps={canClose:!0,className:"auth-modal-signup",onAutoFocus:h.default,onSuccess:h.default,submitButtonSize:"default",submitButtonStyle:"primary",submitButtonText:"",type:ae.SIGNUP_USER_ROLES.USER};var pe=function(e,t){var n=e.auth,r=n.isLoggedIn,a=n.isLoggingOut,o=n.currentUser,i=e.signUp,s=i.isPending,l=i.isValidating,u=i.error,c=e.config.data,d=c.features.noPasswordMode,f=c.showRecaptcha;return{noPasswordMode:d,recaptchaSiteKey:c.recaptchaSiteKey,showRecaptcha:t.showRecaptchaForced||f,currentUser:o,isLoggedIn:r&&!a,isSigningUp:s,isValidating:l,signUpError:u}},me=function(e){return(0,H.bindActionCreators)(fe,e)};t.default=(0,B.connect)(pe,me)(de)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(220),u=r(l),c=n(187),d=r(c),f=n(36),p=r(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},v=n(18),E=r(v),y=n(1),b=r(y),_=n(0),S=r(_),O=n(2),P=n(3),T=r(P),A=n(8),C=r(A),I=n(73),w=r(I),N=n(5),R=n(21),M=n(1206),L=r(M),k=n(100),D="visible",U=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.trailerRefs={},r.listItemRefs={},r.scrollContainer=null,r.leftOverflowIndicatorRef=null,r.rightOverflowIndicatorRef=null,r.listItemWidth=0,r.overflowIndicatorWidth=0,r.state={playingTrailerId:null},r.propsUpdateToActionsMap=[{update:["selectedVideoId"],action:function(e){e.smartXScrolling&&r.scrollToSelectedThumbIfNeeded(e)}},{update:["videos.length"],action:function(e){e.smartXScrolling&&(0,d.default)(r.toggleXAxisOverflowIndicators)}},{update:R.layoutHasChanged,action:function(){return r.windowResizeHandler()}}],r.getHasScroll=function(){return r.scrollContainer&&r.scrollContainer.scrollWidth>r.scrollContainer.clientWidth},r.scrollToSelectedThumbIfNeeded=function(e){var t=e.selectedVideoId,n=r.listItemRefs[t];if(n&&r.getHasScroll()){var a=r.scrollContainer.scrollLeft,o=n.offsetLeft-a;if(o<r.overflowIndicatorWidth)return void(r.scrollContainer.scrollLeft=a-(r.overflowIndicatorWidth-o));var i=r.scrollContainer.offsetWidth-r.overflowIndicatorWidth,s=o+n.offsetWidth;s>i&&(r.scrollContainer.scrollLeft=a+(s-i))}},r.toggleXAxisOverflowIndicators=function(){var e=r.scrollContainer.scrollLeft,t=e>0,n=e+r.scrollContainer.offsetWidth,a=n<r.scrollContainer.scrollWidth;r.leftOverflowIndicatorRef&&r.rightOverflowIndicatorRef&&(t?r.leftOverflowIndicatorRef.classList.add(D):r.leftOverflowIndicatorRef.classList.remove(D),a?r.rightOverflowIndicatorRef.classList.add(D):r.rightOverflowIndicatorRef.classList.remove(D))},r.stopTrailer=function(e){e&&(e.pause(),e.currentTime&&(e.currentTime=0))},r.stopAllTrailers=function(){(0,u.default)(r.trailerRefs,function(e){return r.stopTrailer(e)})},r.windowResizeHandler=function(){var e=Object.keys(r.listItemRefs)[0],t=r.listItemRefs[e];t&&(r.listItemWidth=t.offsetWidth),r.toggleXAxisOverflowIndicators()},r.scrollContainerRefHandler=function(e){r.scrollContainer=e},r.leftArrowRefHandler=function(e){r.leftOverflowIndicatorRef=e},r.rightArrowRefHandler=function(e){r.rightOverflowIndicatorRef=e},r.videoRefHandler=function(e){if(e){var t=e.dataset.videoId;r.trailerRefs[t]=e}},r.listItemRefHandler=function(e){if(e){var t=e.dataset.videoId;r.listItemRefs[t]=e}},r.leftScrollArrowClickHandler=function(){r.scrollContainer.scrollLeft=r.scrollContainer.scrollLeft-r.listItemWidth},r.rightScrollArrowClickHandler=function(){r.scrollContainer.scrollLeft=r.scrollContainer.scrollLeft+r.listItemWidth},r.listClickHandler=function(){r.stopAllTrailers()},r.listScrollHandler=(0,p.default)(r.toggleXAxisOverflowIndicators,50),r.thumbMouseEnterHandler=function(e){var t=e.currentTarget.dataset,n=t.videoId,a=t.hasFailedProcessing,o=t.isLost;r.props.isEditMode||a||o||N.BROWSER_CAPABILITIES.iOS||(r.trailerRefs[n].play(),r.setState({playingTrailerId:Number(n)}))},r.thumbMouseLeaveHandler=function(e){var t=e.currentTarget.dataset.videoId,n=r.trailerRefs[t];r.stopTrailer(n),r.setState({playingTrailerId:null})},a=n,i(r,a)}return s(t,e),g(t,[{key:"componentDidMount",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.smartXScrolling&&(this.overflowIndicatorWidth=this.leftOverflowIndicatorRef.offsetWidth,this.windowResizeHandler(),this.toggleXAxisOverflowIndicators())}},{key:"render",value:function(){var e=this,t=this.props,n=t.deletedVideoIds,r=t.isEditMode,o=t.isMobileLayout,i=t.isOwnProfile,s=t.isScrollAlwaysVisible,l=t.lostVideoIds,u=t.scrollBarLibOptions,c=t.shouldPreventUploader,d=t.smartXScrolling,f=t.uploaderClickHandler,p=t.user,g=t.videos,h=a(t,["deletedVideoIds","isEditMode","isMobileLayout","isOwnProfile","isScrollAlwaysVisible","lostVideoIds","scrollBarLibOptions","shouldPreventUploader","smartXScrolling","uploaderClickHandler","user","videos"]),v=this.state.playingTrailerId;return S.default.createElement("div",{className:this.c("videos-list-wrapper",{"edit-mode":r}),ref:this.rootRefHandler,"data-component-name":"VideosList"},S.default.createElement(w.default,{containerRef:this.scrollContainerRefHandler,isAlwaysVisible:s,libOptions:u,onNativeScroll:this.listScrollHandler,onScrollX:this.listScrollHandler},S.default.createElement("div",{className:"videos-list",onClick:this.listClickHandler},this.renderIf(i&&p.isModel&&!c,S.default.createElement(L.default,{isUploader:!0,uploaderClickHandler:f})),g.map(function(t){return S.default.createElement(L.default,m({key:t.id,isDeleted:n&&n.has(t.id),isEditMode:r,isOwnProfile:i,isPlaying:v===t.id,isLost:l.has(t.id),video:t,videoRefHandler:e.videoRefHandler,thumbMouseEnterHandler:e.thumbMouseEnterHandler,thumbMouseLeaveHandler:e.thumbMouseLeaveHandler,listItemRefHandler:e.listItemRefHandler},h))}))),this.renderIf(d,S.default.createElement("div",null,S.default.createElement("div",{className:"video-list-scroller-left",ref:this.leftArrowRefHandler,style:{pointerEvents:o?"none":null},onClick:this.leftScrollArrowClickHandler},this.renderIf(!o,S.default.createElement(C.default,{img:"prev-small",size:24}))),S.default.createElement("div",{className:"video-list-scroller-right",ref:this.rightArrowRefHandler,style:{pointerEvents:o?"none":null},onClick:this.rightScrollArrowClickHandler},this.renderIf(!o,S.default.createElement(C.default,{img:"next-small",size:24}))))))}}]),t}(T.default);U.propTypes={currentUser:b.default.object,deletedVideoIds:b.default.instanceOf(E.default.Set),deleteClickHandler:b.default.func,isEditMode:b.default.bool,isMyFriend:b.default.bool.isRequired,isOwnProfile:b.default.bool.isRequired,isScrollAlwaysVisible:b.default.bool,lostVideoIds:b.default.instanceOf(E.default.Set),recoveryClickHandler:b.default.func,scrollBarLibOptions:b.default.object,settingsClickHandler:b.default.func,shouldPreventUploader:b.default.bool,smartXScrolling:b.default.bool,thumbClickHandler:b.default.func.isRequired,uploaderClickHandler:b.default.func,user:b.default.object.isRequired,videos:b.default.array.isRequired},U.defaultProps={isEditMode:!1,isScrollAlwaysVisible:!1};var j=function(e,t){var n=e.auth.currentUser,r=e.ui,a=r.windowHeight,o=r.windowWidth,i=e.userVideos.lostVideoIds;return{currentUser:n,isMobileLayout:(0,R.getIsLayoutUpToS)(e),isMyFriend:(0,k.getIsMyFriend)(e,t.user.id),lostVideoIds:i,windowHeight:a,windowWidth:o}};t.default=(0,O.connect)(j)(U)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(2),u=n(67),c=n(21),d=["altcoin","billing-coinpayments","billing-segpay","cryptocoin","epoch-bo","epoch-bt","epoch-es","epoch-et","epoch-ew","epoch-nf","epoch-pe","epoch-po","epoch-sf","epoch-sp","epoch-tc","ideal","sepa","mobile"],f=function(e){return d.includes(e)},p=function(e){var t=e.backgroundUrl,n=e.className,r=e.name;return s.default.createElement("div",{className:(0,u.classNames)(n,"tokens-image","tokens-image-"+r,{"is-png":f(r)}),style:{backgroundImage:"url("+t+")"},"data-component-name":"TokensImage"})};p.propTypes={backgroundUrl:o.default.string.isRequired,className:o.default.string,name:o.default.string.isRequired},p.defaultProps={className:""};var m=function(e,t){var n=t.name;return{backgroundUrl:(0,c.getStaticUrl)(e,"tokens/components/ui/TokensImage/images/"+n+"."+(f(n)?"png":"svg"))}};t.default=(0,l.connect)(m)(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(30),o=r(a),i=n(0),s=r(i),l=n(2),u=n(4),c=n(10),d=r(c),f=n(8),p=r(f),m=n(52),g=function(e,t){var n=e.updateMobileStep,r=e.mobileStep;t.preventDefault(),t.stopPropagation(),n(r)},h=function(e){var t=e.mobileStep,n=e.updateMobileStep;return s.default.createElement(d.default,{className:"mobile-back",onClick:(0,o.default)(g,{updateMobileStep:n,mobileStep:t}),size:"small",style:"outline"},s.default.createElement(p.default,{img:"left",size:16}))},v=function(e){return(0,u.bindActionCreators)({updateMobileStep:m.updateMobileStep},e)};t.default=(0,l.connect)(null,v)(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(8),u=r(l),c=n(17),d=r(c),f=n(67),p=n(88),m=function(e){return s.default.createElement("div",{className:"note note-credit-card","data-component-name":"TokensNoteCreditCard"},s.default.createElement("span",{className:"lock-wrapper"},s.default.createElement(u.default,{img:"lock",size:10})),(0,f.renderIf)(e.chosenPackage.purchaseType===p.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION,s.default.createElement(d.default,{messageId:"buyTokens.yourCreditCardAnnexForSubscription"}),s.default.createElement(d.default,{messageId:"buyTokens.yourCreditCardAnnex"})))};m.propTypes={chosenPackage:o.default.shape({purchaseType:o.default.string})},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(8),u=r(l),c=function(e){var t=e.button,n=e.closeClickHandler,r=e.icon,a=e.id,o=e.message;return s.default.createElement("div",{className:"toast-notification","data-component-name":"ToastNotification"},s.default.createElement("div",{className:"toast-part-left"},r),s.default.createElement("div",{className:"toast-part-right"},s.default.createElement("div",{"data-toast-id":a,className:"toast-close-icon-box",onClick:n},s.default.createElement(u.default,{className:"toast-close-icon",img:"close-5"})),o&&s.default.createElement("div",{className:"toast-message"},o),t&&s.default.createElement("div",{className:"toast-buttons"},t)))};c.propTypes={button:o.default.oneOfType([o.default.arrayOf(o.default.element),o.default.element]),closeClickHandler:o.default.func.isRequired,icon:o.default.element,id:o.default.string.isRequired,message:o.default.oneOfType([o.default.string,o.default.element])},c.defaultProps={button:null,icon:null,message:null},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Categories=void 0;var s=n(6),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(24),h=n(387),v=r(h),E=n(45),y=n(3),b=r(y),_=n(8),S=r(_),O=n(68),P=t.Categories=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.getTagLabel=function(e){return r.t("tags."+e)},r.renderTagGroup=function(e){var t=e.alias,n=e.tags,a=r.props,o=a.showCounts,i=a.liveTagDetails,s=a.shouldPreventDefault;return p.default.createElement("div",{className:"tag-group",key:t},p.default.createElement("div",{className:"group-header"},r.t("tagGroups."+t)),p.default.createElement("ul",null,n.map(function(e){return p.default.createElement("li",{key:e},p.default.createElement(v.default,{label:r.getTagLabel(e),shouldPreventDefault:s,shouldReleaseInterface:!0,tag:e,count:o&&(0,l.default)(i,e+".modelsLive")}))})))},i=n,o(r,i)}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.liveTagGroups;return p.default.createElement("div",{className:n,"data-component-name":"Categories"},p.default.createElement("div",{className:"model-filter-header"},this.t("tagsFilterHeader")),p.default.createElement("div",{className:"model-filter-groups"},r.map(function(t){return e.renderTagGroup(t)})),p.default.createElement(g.Link,{to:"/tags",className:"model-filter-show-more"},this.t("showMore"),p.default.createElement(S.default,{img:"next-small",size:10})))}}]),t}(b.default);P.propTypes={className:d.default.string,filterTagsByPreference:d.default.bool,liveTagGroups:d.default.arrayOf(d.default.shape({alias:d.default.string,tags:d.default.arrayOf(d.default.string)})),liveTagDetails:d.default.arrayOf(d.default.object),shouldPreventDefault:d.default.bool,showCounts:d.default.bool};var T=function(e,t){return{liveTagGroups:t.filterTagsByPreference?(0,E.getFilteredByPreferenceLiveTagGroups)(e):(0,E.getFilteredByPageTagLiveTagGroups)(e),liveTagDetails:(0,E.getLiveTagDetails)(e),shouldPreventDefault:(0,O.getIsViewCamPage)(e)}};t.default=(0,m.connect)(T)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(3),m=r(p),g=n(1227),h=r(g),v=n(1228),E=r(v),y=n(1229),b=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.activeItemRef,n=e.children,r=e.className,a=e.getActiveMenuItem;return e.isTouchDevice?d.default.createElement(h.default,{activeItemRef:t,className:r,getActiveMenuItem:a,"data-component-name":"Navbar"},n):d.default.createElement(E.default,{className:r,"data-component-name":"Navbar"},n)}}]),t}(m.default);b.propTypes={activeMenuRef:u.default.node,className:u.default.string,getActiveMenuItem:u.default.func,isTouchDevice:u.default.bool.isRequired};var _=function(e){return{isTouchDevice:(0,y.getIsTouchDevice)(e)}};t.default=(0,f.connect)(_)(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(85),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),u=r(l),c=n(0),d=r(c),f=n(24),p=n(5),m=function(e,t){var n=t.router.staticContext,r=e.status,o=e.to,i=a(e,["status","to"]);return n&&(n.status=r,n.redirectUrl=o),o?d.default.createElement(f.Redirect,s({to:o},i,{"data-component-name":"Redirector"})):null};m.propTypes=s({},f.Redirect.propTypes,{status:u.default.oneOf((0,i.default)(p.HTTP_CODES)),to:u.default.string}),m.defaultProps=s({},f.Redirect.defaultProps,{status:p.HTTP_CODES.TEMPORARY_REDIRECT,to:""}),m.contextTypes={router:u.default.object.isRequired},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(107),l=r(s),u=n(30),c=r(u),d=n(69),f=r(d),p=n(13),m=r(p),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(1),E=r(v),y=n(0),b=r(y),_=n(24),S=n(3),O=r(S),P=n(615),T=r(P),A=n(67),C=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.activeMenuItemRefHandler=function(e,t){var n=r.props.match.url,a=t!==r.state.activeMenuRef;t&&a&&e===n&&r.setState({activeMenuRef:t})},r.getActiveMenuItem=function(){return r.state.activeMenuRef},i=n,o(r,i)}return i(t,e),h(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.items;return(0,m.default)(r)?null:b.default.createElement("div",{className:(0,A.classNames)("header-sub",n),"data-component-name":"HeaderSub"},b.default.createElement("div",{className:"container"},b.default.createElement(T.default,{activeItemRef:this.state.activeMenuRef,getActiveMenuItem:this.getActiveMenuItem},r.map(function(t){var n=t.isActive,r=t.label,a=t.route;return b.default.createElement("div",{className:"header-sub-item-wrapper",ref:(0,c.default)(e.activeMenuItemRefHandler,a),key:a},b.default.createElement(_.NavLink,g({className:"link",to:a},(0,f.default)(n)?{isActive:n}:{}),(0,l.default)(r)))}))))}}]),t}(O.default);C.propTypes={items:E.default.arrayOf(E.default.shape({isActive:E.default.func,isIndex:E.default.bool,label:E.default.string.isRequired,route:E.default.string.isRequired})).isRequired,className:E.default.string},t.default=(0,_.withRouter)(C)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(8),g=r(m),h=n(39),v=r(h),E=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.model,t=e.id,n=e.isHd,r=e.isMobile,a=e.isVr,o=void 0,i=void 0;if(a)o=d.default.createElement(g.default,{img:"badge-vr"}),i="modelList.broadcastType.vr";else if(r)o=d.default.createElement(g.default,{img:"badge-mobile"}),i="modelList.broadcastType.mobile";else{if(!n)return null;o=d.default.createElement(g.default,{img:"badge-hd"}),i="modelList.broadcastType.hd"}var s="model_"+t+"_broadcast_type";return d.default.createElement("div",{className:"broadcast-type",id:s,"data-component-name":"BroadcastTypeIcon"},o,d.default.createElement(v.default,{isMobileRelative:!1,placement:"top",shouldPreventDefault:!0,targetId:s},this.t(i)))}}]),t}(p.default);E.propTypes={model:u.default.object.isRequired},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1245),u=r(l),c=n(35),d=r(c),f=n(49),p=r(f),m=n(6),g=r(m),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},y=n(1),b=r(y),_=n(0),S=r(_),O=n(3),P=r(O),T=n(29),A=r(T),C=function(){return""+(new Date).valueOf()},I=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:["streamUrl"],action:function(e){r.onCamHasChanged(e)}}]),r.enqueueImage=function(){if(r.loader.queue){var e=r.loader.queue.shift(),t=r.props.streamUrl;e.src=t+"&_="+C(),e.queueIndex=r.loader.lastQueuedIndex,r.loader.lastQueuedIndex+=1,r.loader.queue.push(e)}},r.clearCanvas=function(){var e=r,t=e.canvasRef;if(t){t.getContext("2d").clearRect(0,0,t.width,t.height)}},s=n,i(r,s)}return s(t,e),v(t,[{key:"getDefaultState",value:function(){return{isLoading:!0,size:this.props.size}}},{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,p.default)(this.props.streamUrl,e.streamUrl)||!(0,p.default)(this.state,t)}},{key:"onCamHasChanged",value:function(e){this.unmountLoader(),this.mountLoader(e),this.setState({isLoading:!0,size:e.size})}},{key:"componentWillUnmount",value:function(){this.unmountLoader(),E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"mountLoader",value:function(e){var t=this,n=function(){var e=new Image;return e.setAttribute("crossOrigin","anonymous"),e.onLoadListener=t.onImageLoaded.bind(t,e),e.addEventListener("load",e.onLoadListener),e};this.loader={queue:(0,u.default)(e.queueSize,n),interval:null,intervalTime:10*Math.round(100/e.fps),intervalTimer:null,lastQueuedIndex:0,lastDrawnIndex:0},this.loader.intervalTimer=function(){t.enqueueImage(),t.loader.interval=setTimeout(t.loader.intervalTimer,t.loader.intervalTime)},this.loader.intervalTimer()}},{key:"unmountLoader",value:function(){this.clearCanvas(),(0,g.default)(this.loader,"queue")&&this.loader.queue.forEach(function(e,t,n){n[t].src="",n[t].removeEventListener("load",n[t].onLoadListener)}),(0,g.default)(this.loader,"interval")&&clearTimeout(this.loader.interval),this.loader={}}},{key:"onImageLoaded",value:function(e){if(""===this.src||e.queueIndex<this.loader.lastDrawnIndex)return void A.default.warn("SnapshotPlayer onImageLoaded: skip");var t=this.canvasRef;if(t){this.state.isLoading&&(this.setState({isLoading:!1}),this.props.onVideoStartPlaying());var n=this.state.size,r=e.naturalHeight,a=e.naturalWidth;r===n.height&&a===n.width||this.setState({size:{height:r,width:a}}),this.loader.lastDrawnIndex=e.queueIndex;var o=t.getContext("2d");if(t.width>0&&t.height>0&&e){var i=this.cropCanvas(e),s=i.canvasWidth,l=i.canvasHeight,u=i.canvasWidthOffset,c=i.canvasHeightOffset;o.clearRect(0,0,t.width,t.height),o.drawImage(e,u,c,s,l,0,0,t.width,t.height)}}}},{key:"cropCanvas",value:function(e){var t=this.canvasRef,n={height:t.offsetHeight,width:t.offsetWidth},r=e.height,a=e.width,o=n.height,i=n.width,s=Math.max(i/a,o/r),l=a*s,u=r*s,c=(l-i)/s,d=(u-o)/s;return{canvasWidth:a-c,canvasHeight:r-d,canvasWidthOffset:c/2,canvasHeightOffset:d/2}}},{key:"render",value:function(){var e=this,t=this.state.size;return S.default.createElement("div",{className:"canvas-wrapper","data-component-name":"CanvasPlayer"},S.default.createElement("div",{className:"canvas-container"},S.default.createElement("canvas",h({ref:function(t){e.canvasRef=t}},t))))}}]),t}(P.default);I.propTypes=h({},I.propTypes,{fps:b.default.number,streamUrl:b.default.string.isRequired,onVideoStartPlaying:b.default.func,queueSize:b.default.number,size:b.default.shape({height:b.default.number,width:b.default.number})}),I.defaultProps=h({},I.defaultProps,{onVideoStartPlaying:d.default,queueSize:30,fps:10,size:{height:480,width:640}}),t.default=I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(8),g=r(m),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return d.default.createElement("div",{className:this.c(this.props.className,"broadcasting-rules"),"data-component-name":"BroadcastingRules"},d.default.createElement("h3",null,this.props.title||this.t("startBroadcasting.rules.title")),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleAge")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleLive")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleMicrophone")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleMatchingPhotos")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleScamming")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleAskingMoney")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleClearPhotos")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleSpam")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleTurnOff")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleContests")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleProhibitedActivities.intro"),d.default.createElement("ul",null,d.default.createElement("li",null,this.t("startBroadcasting.rules.ruleProhibitedActivities.minors")),d.default.createElement("li",null,this.t("startBroadcasting.rules.ruleProhibitedActivities.incest")),d.default.createElement("li",null,this.t("startBroadcasting.rules.ruleProhibitedActivities.pets")),d.default.createElement("li",null,this.t("startBroadcasting.rules.ruleProhibitedActivities.drugs")),d.default.createElement("li",null,this.t("startBroadcasting.rules.ruleProhibitedActivities.toys")),d.default.createElement("li",null,this.t("startBroadcasting.rules.ruleProhibitedActivities.unsafe")),d.default.createElement("li",null,this.t("startBroadcasting.rules.ruleProhibitedActivities.piss")),d.default.createElement("li",null,this.t("startBroadcasting.rules.ruleProhibitedActivities.sleeping")))),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleConfined")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.rulePayoutsRegular"),d.default.createElement("ul",null,d.default.createElement("li",null,this.t("startBroadcasting.rules.rulePayoutsRegularDay1")),d.default.createElement("li",null,this.t("startBroadcasting.rules.rulePayoutsRegularDay16")))),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.rulePayoutsMinSum")),d.default.createElement("li",null,d.default.createElement(g.default,{img:"check"}),this.t("startBroadcasting.rules.ruleViolence"))))}}]),t}(p.default);h.propTypes={className:u.default.string,title:u.default.string},t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonDocuments=t.getDocuments=t.getDefaultDocuments=t.getDefaultDocument=void 0;var r=n(372),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(32),i=n(12),s=function(e){return e.documents.collection},l=function(e,t){return t.person.id},u=t.getDefaultDocument=function(e){return{type:e,id:null,personId:null,status:null,reason:null,url:null}},c=t.getDefaultDocuments=function(){return(0,a.default)(i.DOCUMENT_TYPES,function(e,t){e[t]=u(t)},{})},d=function(e){return e.documents.draftDocuments||c()},f=t.getDocuments=function(e,t){return(0,a.default)(i.DOCUMENT_TYPES,function(n,r){n[r]=e.find(function(e){return e.personId===t&&e.type===r})},{})};t.getPersonDocuments=(0,o.createSelector)([s,d,l],function(e,t,n){return n?f(e,n):t})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(46),u=r(l),c=n(13),d=r(c),f=n(279),p=r(f),m=n(14),g=r(m),h=n(6),v=r(h),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},_=n(1),S=r(_),O=n(0),P=r(O),T=n(4),A=n(2),C=n(3),I=r(C),w=n(7),N=n(29),R=r(N),M=n(194),L=n(1250),k=r(L),D=n(623),U=r(D),j=n(1251),F=r(j),B=n(1252),H=r(B),V=n(12),G=n(621),x=n(391),W=[V.MODERATION_STATUSES.notReviewed,V.MODERATION_STATUSES.approved],Y=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.propsUpdateToActionsMap=[{update:["documents"],action:function(e){var t=e.documents;r.setState({documents:t})}},{update:x.hasChangedPersonOrStatus,action:function(e){var t=e.person;r.setState({person:t})}}],r.documentChangeHandler=function(e){var t=e.type,n=e.file,o=e.isReady,i=E({},(0,G.getDefaultDocument)(t),{file:n,personId:r.props.personId,type:t}),s=o?(0,p.default)(r.state.dataChangeRequired,["document."+t]):r.state.dataChangeRequired;r.setState({isEditMode:!0,dataChangeRequired:s,documents:E({},r.state.documents,a({},t,i))}),r.props.onPersonChange(!0)},r.submitClickHandler=function(){var e=r.state,t=e.person,n=e.documents,a=r.props,o=a.agreement,i=a.saveDocumentsPageData,s=a.user.id,l=(0,M.parsePerson)(t);R.default.log("DocumentsPage.submitClickHandler()",{userId:s,person:l,documents:n}),i({userId:s,person:l,documents:n}).catch(function(e){var t=e.details,n=(0,u.default)(t,function(e,t,n){return(0,d.default)(t)||(e[n]=t),e},{}),a=Object.keys(n);1!==a.length||!(0,g.default)(a,"agreement")||o||l.agreement||r.setState({isAgreementPopupOpen:!0,isRequestApprovement:!0})})},r.personChangeHandler=function(e){var t=e.isReady,n=e.person,a=t?(0,p.default)(r.state.dataChangeRequired,["person"]):r.state.dataChangeRequired;r.setState({dataChangeRequired:a,isEditMode:!0,person:E({},n,{agreement:r.props.agreement})}),r.props.onPersonChange(!0)},r.seeAgreementClickHandler=function(e){e.preventDefault(),r.setState({isAgreementPopupOpen:!0})},r.agreementPopupCloseHandler=function(){r.setState({isAgreementPopupOpen:!1,isRequestApprovement:!1})},r.agreementSignHandler=function(e){var t=r.state.isRequestApprovement,n=E({},r.state.person,{agreement:e});r.setState({isAgreementPopupOpen:!1,isRequestApprovement:!1,person:n},function(){t&&r.submitClickHandler()})},r.renderDocumentUpload=function(e){var t=r.props,n=t.personError,a=t.canAddNewPerson,o=t.isUpdatingPerson,i=r.state.documents,s=[V.MODERATION_STATUSES.notReviewed,V.MODERATION_STATUSES.approved],l=(0,v.default)(n,"details.documents"),u=!a||i&&(0,g.default)(s,(0,v.default)(i[e],"status"));return P.default.createElement("div",{key:e},P.default.createElement(U.default,{document:(0,v.default)(i,e),type:e,error:l?l[e]:null,isPending:o,isReadOnly:u,onChange:r.documentChangeHandler}))},s=n,i(r,s)}return s(t,e),y(t,[{key:"getDefaultState",value:function(){var e=this.props;return{person:e.person,documents:e.documents,dataChangeRequired:!1,isRequestApprovement:!1}}},{key:"componentDidRender",value:function(e){(0,v.default)(e.person,"id")!==(0,v.default)(this.props.person,"id")&&this.props.onPersonChange(!1),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this)}},{key:"getIsSubmitEnabled",value:function(){var e=this.state,t=e.isSavingPage,n=e.dataChangeRequired;return!t&&!n.length}},{key:"render",value:function(){var e=this,t=this.props,n=t.isUpdatingPerson,r=t.user,a=t.personError,o=t.agreement,i=t.canAddNewPerson,s=this.state,l=s.person,u=s.isAgreementPopupOpen,c=a&&(!a.details||(0,d.default)(a.details))&&a.message?a.message:null,f=i&&!(0,g.default)(W,l.statusCombined),p=i&&!(0,v.default)(l,"agreement");return P.default.createElement("div",{"data-component-name":"PersonForm"},this.renderIf(i,P.default.createElement(H.default,{className:"documents-page-block",person:l})),P.default.createElement("div",{className:"documents-page-block person-and-documents"},P.default.createElement("div",{className:"person-edit-column"},P.default.createElement(k.default,{errors:a?a.details:null,isPending:n,isReadOnly:!i||(0,g.default)(W,l.status),onChange:this.personChangeHandler,person:l})),P.default.createElement("div",{className:"documents-column"},P.default.createElement("div",null,P.default.createElement("h3",null,this.t("documentsPage.uploadDocumentTitle")),V.DOCUMENT_TYPES.map(this.renderDocumentUpload)))),this.renderIf(p&&!o,function(){return P.default.createElement("div",{className:"documents-page-block agreement"},P.default.createElement("a",{className:"see-agreement-link",href:"#",onClick:e.seeAgreementClickHandler},e.t("documentsPage.seeAgreement")),e.renderIf(u,function(){return P.default.createElement(F.default,{isSigned:Boolean(l.agreement),onClose:e.agreementPopupCloseHandler,onSign:e.agreementSignHandler,person:(0,M.parsePerson)(l),user:r})}))}),this.renderIf(c,function(){return P.default.createElement("div",{className:"documents-page-block error-general"},P.default.createElement("p",null,c))}),this.renderIf(f,function(){return P.default.createElement("div",{className:"documents-page-block submit"},P.default.createElement("button",{className:"btn btn-apply",disabled:!e.getIsSubmitEnabled(),onClick:e.submitClickHandler},e.t("personEdit.requestApprovement")))}))}}]),t}(I.default),K={saveDocumentsPageData:M.saveDocumentsPageData};Y.propTypes=E({agreement:S.default.string,documents:S.default.shape({face:S.default.object,id:S.default.object}),canAddNewPerson:S.default.bool,isUpdatingPerson:S.default.bool,onPersonChange:S.default.func,person:S.default.object.isRequired,personError:S.default.object,user:S.default.object.isRequired},(0,w.getActionPropTypes)(K)),Y.defaultProps={agreement:null};var q=function(e,t){var n=e.persons;return{isUpdatingPerson:n.isUpdating,personError:n.error,documents:(0,G.getPersonDocuments)(e,t)}},z=function(e){return(0,T.bindActionCreators)({saveDocumentsPageData:M.saveDocumentsPageData},e)};t.default=(0,A.connect)(q,z)(Y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(3),m=r(p),g=n(10),h=r(g),v=n(199),E=r(v),y=n(58),b=r(y),_=n(40),S=r(_),O=n(8),P=r(O),T=n(22),A=r(T),C=n(284),I=n(21),w=n(12),N=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:["document"],action:function(){r.setState({fileDataUrl:null})}},{update:["error"],action:function(){r.setState({isChanged:!1,isDataUrlPending:!1})}}],r.exampleLinkClickHandler=function(e){e.preventDefault(),r.setState({isExampleImagePopupOpen:!0})},r.examplePopupCloseHandler=function(){r.setState({isExampleImagePopupOpen:!1})},r.selectFileButtonClickHandler=function(e){r.fileInputRef.click(e)},r.fileInputChangeHandler=function(e){var t=r.props,n=(t.document,t.onChange),a=t.type,o=e.target.files&&e.target.files.length?e.target.files[0]:null;o&&r.setState({isDataUrlPending:!0,isChanged:!0},function(){n({file:o,isReady:!0,type:a}),(0,C.getFileData)(o).then(function(e){r.setState({fileDataUrl:e.dataUrl,isDataUrlPending:!1})})})},r.statusClickHandler=function(e){e.preventDefault(),r.setState({isDocumentImagePopupOpen:!0})},r.documentImagePopupCloseHandler=function(){r.setState({isDocumentImagePopupOpen:!1})},r.renderImageModal=function(e){var t=e.backgroundImage,n=e.className,a=e.onClose;return d.default.createElement(E.default,{className:r.c("default-modal",n),onClose:a,titlePosition:"outside"},d.default.createElement("div",{className:"modal-body-image",style:{backgroundImage:t}}))},i=n,o(r,i)}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{fileDataUrl:null,isExampleImagePopupOpen:!1,isChanged:!1,isDataUrlPending:!1}}},{key:"renderUploadButton",value:function(){var e=this;return this.props.isReadOnly?null:d.default.createElement("div",{className:"button"},d.default.createElement(h.default,{onClick:this.selectFileButtonClickHandler},this.t("button.selectFile")),d.default.createElement(S.default,{onChange:this.fileInputChangeHandler,ref:function(t){e.fileInputRef=t},type:"file"}))}},{key:"renderExampleImage",value:function(){var e=this,t=w.DOCUMENT_EXAMPLE_LINKS[this.props.document.type];if(!t)return null;var n=this.props.getStaticUrl(t),r=this.state.isExampleImagePopupOpen;return d.default.createElement("div",{className:"example"},d.default.createElement("a",{href:n,onClick:this.exampleLinkClickHandler},this.t("documentUpload.showExample")),this.renderIf(r,function(){return e.renderImageModal({backgroundImage:"url("+n+")",className:"document-upload-example-image-modal",onClose:e.examplePopupCloseHandler})}))}},{key:"renderStatus",value:function(){var e=this,t=this.props,n=t.document,r=t.isShowPreview,a=n.reason,o=n.status,i=n.url,s=this.state,l=s.fileDataUrl,u=s.isDocumentImagePopupOpen,c=r?l||i:"",f=c?this.statusClickHandler:null;return d.default.createElement("div",{className:this.c("body-pane",{clickable:f}),onClick:f},d.default.createElement("div",{className:"image",style:{backgroundImage:c?"url("+c+")":"none"}}),this.renderIf(this.isPending,function(){return d.default.createElement(A.default,{isCentered:!0})},function(){return d.default.createElement("div",{className:"text"},d.default.createElement("div",{className:"statusText"},e.t("documentUpload.document.status."+(o||"notUploadedYet"))),d.default.createElement("div",{className:"reasonText"},a))}),this.renderIf(u,function(){return e.renderImageModal({backgroundImage:"url("+c+")",className:"default-modal document-upload-image-modal",onClose:e.documentImagePopupCloseHandler})}))}},{key:"render",value:function(){var e=this.props.document.status,t=this.props,n=t.error,r=t.isReadOnly,a=t.type,o=this.c("document-upload","document-type-"+a,{"is-pending":this.isPending,"read-only":r}),i=n&&!this.state.isChanged,s="document_upload_pane_"+a+"_"+this.uid;return d.default.createElement("div",{className:o,"data-component-name":"DocumentUpload"},d.default.createElement("div",{className:"header"},d.default.createElement("div",{className:"upload"},d.default.createElement("span",null,this.t("documentUpload.headers."+a),":")),d.default.createElement("div",{className:"status"},d.default.createElement("span",null,this.t("documentUpload.status"),":"))),d.default.createElement("div",{className:"body"},d.default.createElement("div",{className:this.c("upload",{error:i})},d.default.createElement("div",{className:"body-pane",id:s},d.default.createElement("div",{className:"image"},d.default.createElement(P.default,{img:"upload-"+a})),this.renderUploadButton(),this.renderExampleImage(),this.renderIf(i,function(){return d.default.createElement(b.default,{error:{message:n},targetId:s})}))),d.default.createElement("div",{className:this.c("status",e)},this.renderStatus())))}},{key:"isPending",get:function(){return this.props.isPending||this.state.isDataUrlPending}}]),t}(m.default);N.propTypes={availableSettings:u.default.object,document:u.default.object,error:u.default.string,getStaticUrl:u.default.func.isRequired,isPending:u.default.bool,isShowPreview:u.default.bool,isReadOnly:u.default.bool,onChange:u.default.func.isRequired,onStatusClick:u.default.func,type:u.default.string},N.defaultProps={document:{id:null,personId:null,type:null,status:null,reason:null,url:null},isShowPreview:!0};var R=function(e){return{availableSettings:e.availableSettings.data,getStaticUrl:function(t){return(0,I.getStaticUrl)(e,t)}}};t.default=(0,f.connect)(R)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=(r(l),n(0)),c=r(u),d=n(3),f=r(d),p=n(8),m=r(p),g=n(12),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"model-rules"},c.default.createElement("h3",null,this.t("modelRules.title")),c.default.createElement("p",null,this.t("modelRules.intro")),c.default.createElement("ul",null,g.DOCUMENT_TYPES.map(function(t){return c.default.createElement("li",{key:t},c.default.createElement(m.default,{img:"check"}),e.t("modelRules.documents."+t))})),c.default.createElement("p",{dangerouslySetInnerHTML:{__html:this.t("modelRules.allRequired.all",{strong:"<strong>"+this.t("modelRules.allRequired.strong")+"</strong>"})}}),c.default.createElement("p",null,this.t("modelRules.fillEachPerson")))}}]),t}(f.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(14),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(3),b=r(y),_=n(8),S=r(_),O=n(173),P=r(O),T=n(201),A=r(T),C=n(194),I=n(12),w=n(89),N=r(w),R=function(e){function t(){var e,n,r,a;i(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.listEditHandler=function(e){if(e.length){(0,r.props.deletePersons)(r.props.currentUser.id,e)}},r.renderPersonItem=function(e){var t=[I.MODERATION_STATUSES.notReviewed,I.MODERATION_STATUSES.rejected],n=e.avatarUrl,a=e.firstName,o=e.id,i=e.lastName,s=e.linkTo,l=e.onClick,u=e.statusCombined,d={avatarUrl:n,username:i||a};return h.default.createElement(A.default,{caption:a+" "+i,className:r.c("person",I.MODERATION_STATUS_CLASSES[u]),id:o,key:o,linkTo:s||"/model/documents/"+o,onClick:l},h.default.createElement(N.default,{className:"item-image",user:d},r.renderIf((0,c.default)(t,u),function(){return h.default.createElement("span",{className:"person-status text"},r.t("personList.person.status."+u))})))},r.renderPersonAddItem=function(e){var t=e.plusItemId,n=e.plusItemProps;return h.default.createElement(A.default,d({caption:r.t("button.addPerson"),isEmpty:!0,id:t,key:"empty",linkTo:"/model/documents/add"},n),h.default.createElement("span",{className:"item-image"},h.default.createElement(S.default,{img:"plus",size:44})))},a=n,s(r,a)}return l(t,e),f(t,[{key:"getNextState",value:function(e,t){return{persons:e.persons}}},{key:"render",value:function(){var e=this.props,t=e.onEdit,n=e.plusItemProps,r=e.selectedPersonId,i=e.title,s=o(e,["onEdit","plusItemProps","selectedPersonId","title"]);return h.default.createElement(P.default,d({},s,{className:this.c("person-list",this.props.className),isEditable:!0,onEdit:t||this.listEditHandler,selectedId:r||"plus",title:i||this.t("personList.title"),"data-component-name":"PersonList"}),[].concat(a(this.state.persons.map(this.renderPersonItem)),[this.renderPersonAddItem({plusItemId:"plus",plusItemProps:n})]))}}]),t}(b.default);R.propTypes={isPending:m.default.bool,onEdit:m.default.func,persons:m.default.arrayOf(m.default.object),plusItemProps:m.default.object,selectedPersonId:m.default.number,title:m.default.string},R.defaultProps={plusItemProps:{}};var M=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}},L=function(e){return(0,E.bindActionCreators)({deletePersons:C.deletePersons},e)};t.default=(0,v.connect)(M,L)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(0),l=r(s),u=n(2),c=n(4),d=n(9),f=n(10),p=r(f),m=n(8),g=r(m),h=n(17),v=r(h),E=n(5),y=n(7),b=n(97),_=n(52),S=function(e){var t=e.config,n=e.currentUser,r=e.isLoggedIn,a=e.isTokensGiveawayHidden,o=e.activePromoCampaigns,i=!r||r&&n.isRegular,s=r&&n.isGold,l=t.data.features,u=!r||n.isRegular||n.isGreen||n.isGold,c=l.christmasPromoForGreys?"greys":null,d=s&&l.christmasPromoForGolds?"golds":c,f=d||c;return l.newYearPromo&&u?{type:"new-year"}:f?s||i?{type:"christmas",subType:f}:null:l.christmas2017&&u&&o.indexOf("christmas2017")>-1?{type:"christmas-2017"}:l.blackFriday&&u?{type:"black-friday"}:l.userLevelsBanner?{type:"user-levels"}:l.newLogo&&!t.whiteLabelId?{type:"new-logo"}:!l.tokensGiveaway||r||a?l.halloween&&u?{type:"halloween"}:null:{type:"tokens-giveaway"}},O=function(e,t){var n=t.i18n.trans,r=S(e);if(!r)return null;var a=function(){e.showPurchaseTokensPromo()},o=function(){e.showModal(E.MODAL_TYPES.USER_LEVELS)},i=function(){e.showModal(E.MODAL_TYPES.NEW_LOGO)},s=function(){e.showModal(E.MODAL_TYPES.TOKENS_GIVEAWAY)},u=function(t){t.stopPropagation(),e.emitButtonEvent(E.APP_BUTTONS.HALLOWEEN_GIVEAWAY_BANNER),window.open("https://twitter.com/stripchat")},c=function(t){t.stopPropagation(),e.isLoggedIn?e.showBlackFridayPackage():e.showBlackFridayPackageAfterAuth()},d=function(t){t.stopPropagation(),e.showNewYearPackage("banner")},f=function(){e.showChristmas2017Package()};switch(r.type){case"christmas":return function(e){return l.default.createElement("div",{className:"model-list-promo christmas-"+e},l.default.createElement("div",{className:"container",onClick:a},l.default.createElement("div",{className:"promo-description"},l.default.createElement("div",{className:"title"},l.default.createElement(v.default,{elements:{accent:l.default.createElement("strong",null)},messageId:"promo.christmas.title"})),l.default.createElement("div",{className:"content"},l.default.createElement(v.default,{elements:{accent:l.default.createElement("span",{className:"accent"})},messageId:"promo.christmas."+e}))),l.default.createElement("div",{className:"promo-controls"},l.default.createElement(p.default,{style:"apply-alter",size:"large",onClick:a},n("button.getTokensNow")))))}(r.subType);case"user-levels":return function(){return l.default.createElement("div",{className:"model-list-promo user-levels-banner"},l.default.createElement("div",{className:"container",onClick:o},l.default.createElement("div",{className:"promo-icon-wrapper"},l.default.createElement(g.default,{img:"speaker-fill",size:60})),l.default.createElement("div",{className:"promo-description"},l.default.createElement(v.default,{elements:{accent:l.default.createElement("span",{className:"accent"})},messageId:"promo.userLevels.title"})),l.default.createElement("div",{className:"promo-controls"},l.default.createElement(p.default,{style:"apply-alter",size:"large",onClick:o},n("button.learnMore")))))}();case"new-logo":return function(){return l.default.createElement("div",{className:"model-list-promo new-logo-banner"},l.default.createElement("div",{className:"container",onClick:i},l.default.createElement("div",{className:"promo-description"},n("promo.newLogo.title")),l.default.createElement("div",{className:"promo-icon-wrapper"}),l.default.createElement("div",{className:"promo-controls"},l.default.createElement(p.default,{style:"apply-alter",size:"large",onClick:i},n("button.learnMore")))))}();case"tokens-giveaway":return function(){return l.default.createElement("div",{className:"model-list-promo tokens-giveaway-banner"},l.default.createElement("div",{className:"container",onClick:s},l.default.createElement("div",{className:" tokens-giveaway-banner-container"},l.default.createElement("div",{className:"promo-description"},l.default.createElement(g.default,{img:"playing-dices",size:24}),l.default.createElement(v.default,{elements:{strong:l.default.createElement("strong",null)},messageId:"promo.tokensGiveaway.title"})),l.default.createElement("div",{className:"promo-icon-wrapper"},l.default.createElement(g.default,{img:"playing-dices",size:40})),l.default.createElement("div",{className:"promo-controls"},l.default.createElement(p.default,{style:"apply-alter",onClick:s},n("promo.tokensGiveaway.buttonTitle"))))))}();case"halloween":return function(){return l.default.createElement("div",{className:"model-list-promo halloween-banner"},l.default.createElement("div",{className:"container",onClick:u},l.default.createElement("div",{className:"halloween-banner-container"},l.default.createElement("div",{className:"promo-description"},l.default.createElement(v.default,{elements:{accent:l.default.createElement("span",{className:"accent"})},parameters:{siteLabel:e.config.whiteLabelId?"xHamsterLive":"Stripchat",tokensAmountLabel:"10 000"},messageId:"promo.halloween.title"})),l.default.createElement("div",{className:"promo-controls"},l.default.createElement(p.default,{style:"primary",onClick:u},n("button.learnMore"))))))}();case"black-friday":return function(){var t=e.isLoggedIn,n=e.currentUser,r=t&&n.isGold,a=r?"promo.blackFriday.titleForGold":"promo.blackFriday.title";return l.default.createElement("div",{className:"model-list-promo black-friday-banner","data-component-name":"ModelListPromo"},l.default.createElement("div",{className:"container",onClick:c},l.default.createElement("div",{className:"black-friday-banner-container"},l.default.createElement("div",{className:"black-friday-badge"},"BLACK FRIDAY"),l.default.createElement("div",{className:"promo-description"},l.default.createElement(v.default,{elements:{accent:l.default.createElement("span",{className:"accent"})},messageId:a})),l.default.createElement("div",{className:"promo-controls"},l.default.createElement(p.default,{style:"signup",onClick:c},"Get Now!")))))}();case"new-year":return function(){var t=e.isLoggedIn,r=e.currentUser,a=t&&r.isGold,o=a?"promo.newYear.titleForGold":"promo.newYear.title";return l.default.createElement("div",{className:"model-list-promo new-year-banner","data-component-name":"ModelListPromo"},l.default.createElement("div",{className:"container",onClick:d},l.default.createElement("div",{className:"new-year-banner-container"},l.default.createElement("div",{className:"promo-description"},l.default.createElement(v.default,{elements:{accent:l.default.createElement("span",{className:"accent"}),strong:l.default.createElement("strong",null)},messageId:o})),l.default.createElement("div",{className:"promo-controls"},l.default.createElement(p.default,{style:"signup",onClick:d},n("button.learnMore"))))))}();case"christmas-2017":return function(){var t=e.isLoggedIn;return l.default.createElement("div",{className:"model-list-promo christmas-2017-banner","data-component-name":"ModelListPromo"},l.default.createElement("div",{className:"container",onClick:f},l.default.createElement("div",{className:"christmas-2017-banner-container"},l.default.createElement("div",{className:"promo-description"},l.default.createElement(v.default,{elements:{strong:l.default.createElement("strong",null)},messageId:"promo.christmas2017."+(t?"title":"titleForGuests")})),l.default.createElement("div",{className:"promo-controls"},l.default.createElement(p.default,{style:"signup",onClick:f},n("promo.christmas2017."+(t?"buttonTitle":"buttonTitleForGuests")))))))}();default:return null}},P={emitButtonEvent:d.emitButtonEvent,showBlackFridayPackage:_.showBlackFridayPackage,showBlackFridayPackageAfterAuth:_.showBlackFridayPackageAfterAuth,showChristmas2017Package:_.showChristmas2017Package,showModal:d.showModal,showNewYearPackage:_.showNewYearPackage,showPurchaseTokensPromo:_.showPurchaseTokensPromo};O.propTypes=a({activePromoCampaigns:i.default.array,config:i.default.shape({data:i.default.object,whiteLabelId:i.default.string}),currentUser:i.default.shape({isGold:i.default.bool,isGreen:i.default.bool,isRegular:i.default.bool}),isLoggedIn:i.default.bool,isTokensGiveawayHidden:i.default.bool},(0,y.getActionPropTypes)(P)),O.contextTypes={i18n:i.default.object};var T=function(e){return(0,c.bindActionCreators)(P,e)},A=function(e){var t=e.auth,n=e.config,r=e.tokens.options.activePromoCampaigns,a=(0,b.getIsGuestFavoritesAvailable)(e),o=(0,b.getAllFavoriteIds)(e);return{auth:t,config:n,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isTokensGiveawayHidden:a&&o.length,activePromoCampaigns:r}};t.default=(0,u.connect)(A,T)(O)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),l=r(s),u=n(30),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},m=n(18),g=n(1),h=r(g),v=n(0),E=r(v),y=n(2),b=n(4),_=n(87),S=n(614),O=r(S),P=n(1260),T=r(P),A=n(12),C=n(45),I=n(222),w=n(3),N=r(w),R=n(22),M=r(R),L=n(389),k=r(L),D=n(297),U=r(D),j=n(7),F=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.renderContent=function(){var e=r.props,t=e.isLazyLoading,n=e.isPaginated,a=e.isModelsOnlinePending,o=e.isTagNotFound,i=e.isSearching,s=e.models,u=e.excludeIds,c=e.searchString,d=e.hasFiltersColumn,f=0===s.size&&a||c&&i;return o?E.default.createElement(k.default,null):[d&&E.default.createElement(O.default,{key:"categoriesInLeftColumn",showCounts:!0,className:"model-list-filter media-up-to-m-hidden"}),E.default.createElement("div",{key:"modelsList",className:r.c("model-list-container")},r.props.children,r.renderIf(f,E.default.createElement("div",{className:"loader-container"},E.default.createElement(M.default,{isCentered:!0})),E.default.createElement(T.default,{excludeIds:u,isOnlineStatusVisible:!(0,l.default)(c),isPaginated:n,isLazyLoading:t,models:s,isPaginatedChildrenPerPageMode:!c})))]},i=n,o(r,i)}return i(t,e),f(t,[{key:"componentDidMount",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),U.default.startInterval("onlineModels",A.UPDATE_MODEL_LIST_INTERVAL,(0,c.default)(this.props.loadModels,{isInBackground:!0}))}},{key:"componentWillUnmount",value:function(){U.default.stopInterval("onlineModels"),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"render",value:function(){return E.default.createElement("div",{className:"model-list-wrapper container","data-component-name":"ModelListWrapper"},this.renderContent())}}]),t}(N.default),B={loadModels:_.load};F.propTypes=d({children:h.default.oneOfType([h.default.element,h.default.arrayOf(h.default.element)]).isRequired,excludeIds:h.default.arrayOf(h.default.number),hasFiltersColumn:h.default.bool,isLoggedIn:h.default.bool,isPaginated:h.default.bool,isLazyLoading:h.default.bool,isPending:h.default.bool,isTagNotFound:h.default.bool,models:h.default.instanceOf(m.Iterable),searchString:h.default.string,tagAlias:h.default.string},(0,j.getActionPropTypes)(B)),F.defaultProps={excludeIds:[],isLazyLoading:!1,isPaginated:!1};var H=function(e,t){var n=e.auth,r=e.modelFilter,a=r.searchString,o=r.sortBy,i=r.tagAlias,s=r.initLimit,l=r.limit,u=r.offset,c=e.viewCam.modelUsername,d=e.modelsOnline.isPending,f=e.modelSearch.isPending;return{initLimit:s,isLazyLoading:t.isLazyLoading&&!a,isLoggedIn:n.isLoggedIn&&!n.isLoggingOut,isModelsOnlinePending:d,isPending:(0,C.getIsPending)(e),isSearching:f,isTagNotFound:Boolean(i)&&!(0,I.isModelTag)(e,i),limit:l,models:(0,C.getFilteredModels)(e),modelUsername:c,offset:u,searchString:a,sortBy:o,tagAlias:i}},V=function(e){return(0,b.bindActionCreators)(B,e)};t.default=(0,y.connect)(H,V)(F)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),l=r(s),u=n(36),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},p=n(1),m=r(p),g=n(0),h=r(g),v=n(137),E=n(18),y=n(2),b=n(3),_=r(b),S=n(1263),O=r(S),P=n(5),T=n(63),A=r(T),C=n(21),I=function(e,t){return Math.ceil(e/t)||1},w=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));N.call(n);var r=A.default.get("paginatedListLastViewedItemIndex")||1,i=n.getPageSize(),s=I(r,i);return n.state={currentPage:s,lastViewedItemIndex:r},n}return i(t,e),d(t,[{key:"getNextState",value:function(e,t){var n=this.getPageSize(),r=this.state,a=r.currentPage,o=r.lastViewedItemIndex,i=e.updateKey!==this.props.updateKey,s=!this.props.isChildrenPerPageMode&&e.children.size<o;return(i||s)&&(a=1,o=1,A.default.set("paginatedListLastViewedItemIndex",1)),{currentPage:a,pageSize:n,lastViewedItemIndex:o}}},{key:"componentDidMount",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.windowResizeHandler()}},{key:"getPageSize",value:function(){var e=this.childRef,t=this.listRef,n=this.props,r=n.rows,a=n.defaultPageSize;if(!e||!t)return a;var o=(0,v.findDOMNode)(e).clientWidth,i=(0,v.findDOMNode)(t).clientWidth;return r*Math.round(i/o)}},{key:"renderList",value:function(){var e=this,t=this.props,n=t.itemsCount,r=t.hiddenButtons,a=this.state,o=a.currentPage,i=a.pageSize,s=this.getPaginationContent(),l=s.firstChild,u=s.otherChildren;return l?h.default.createElement("div",{className:"paginated-list-wrapper"},h.default.createElement("div",{className:"paginated-list",ref:function(t){e.listRef=t}},h.default.cloneElement(l,{ref:function(t){e.childRef=t}}),u),h.default.createElement(O.default,{currentPage:o,itemsCount:n,pageChangeCallback:this.pageChangeHandler,pageSize:i,hiddenButtons:r})):null}},{key:"render",value:function(){var e=this.props.children;return e&&e.size?this.renderList():this.renderEmpty()}}]),t}(_.default),N=function(){var e=this;this.propsUpdateToActionsMap=[{update:[C.layoutHasChanged,C.orientationHasChanged],action:function(){e.windowResizeHandler()}}],this.pageChangeHandler=function(t){var n=e.props.isChildrenPerPageMode,r=e.state.currentPage,a=e.props.children.size,o=e.getPageSize(),i=o*(t-1),s=i+1;!n&&s>a&&(s=i+(a-i)),e.setState({currentPage:t,lastViewedItemIndex:s},function(){e.scrollIntoView(),e.props.onPageChange(t,r,o)}),A.default.set("paginatedListLastViewedItemIndex",s)},this.windowResizeHandler=(0,c.default)(function(){if(e._isMounted){var t=e.getPageSize(),n=e.state.lastViewedItemIndex;e.setStateIfModified({currentPage:I(n,t),pageSize:t})}},P.DEFAULT_RESIZE_EVENT_DEBOUNCE_WAIT),this.scrollIntoView=function(){var t=e.listRef;t&&t.getBoundingClientRect().top<0&&t.scrollIntoView()},this.renderEmpty=function(){return h.default.createElement("div",{className:"paginated-list empty"})},this.getPaginationContent=function(){var t=e.props,n=t.children,r=t.isChildrenPerPageMode,a=e.state,o=a.currentPage,i=a.pageSize;if(r){return{firstChild:n.get(0),otherChildren:n.size>1?n.slice(1,i):null}}var s=(o-1)*i,l=s+i;return{firstChild:n.get(s),otherChildren:n.size>s+1?n.slice(s+1,l):null}}};w.propTypes={children:m.default.instanceOf(E.Seq),defaultPageSize:m.default.number,isChildrenPerPageMode:m.default.bool,onPageChange:m.default.func,rows:m.default.number,hiddenButtons:m.default.bool,updateKey:m.default.string},w.defaultProps={defaultPageSize:12,hiddenButtons:!1,isChildrenPerPageMode:!1,onPageChange:l.default,rows:3};var R=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight,windowOrientation:t.windowOrientation}};t.default=(0,y.connect)(R)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(8),u=r(l),c=function(e){var t=e.active,n=e.id,r=e.isDisabled,a=e.isHidden,o=e.onClick,i=e.pageNumber,l=e.type,c=function(e){r||a||(e.preventDefault(),e.stopPropagation(),o(i))},d={prev:s.default.createElement(u.default,{img:"prev"}),"prev-small":s.default.createElement(u.default,{img:"prev-small"}),next:s.default.createElement(u.default,{img:"next"}),"next-small":s.default.createElement(u.default,{img:"next-small"}),ellipsis:"...",page:i},f="page-button page-button-"+l+(t?" active":"")+(a?" hidden":"");return s.default.createElement("a",{className:f,id:n,onClick:c,"data-component-name":"PageButton"},d[l])};c.propTypes={active:o.default.bool,id:o.default.string,isDisabled:o.default.bool,isHidden:o.default.bool,onClick:o.default.func.isRequired,pageNumber:o.default.number.isRequired,type:o.default.oneOf(["prev","prev-small","page","ellipsis","next","next-small"]).isRequired},c.defaultProps={active:!1,isDisabled:!1,isHidden:!1},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BenefitsTooltip=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(3),v=r(h),E=n(8),y=r(E),b=n(39),_=r(b),S=n(5),O=n(21),P=n(27),T=t.BenefitsTooltip=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:O.hasInterfaceBlockChanged,action:function(e){return r.interfaceBlockChangeHandler(e)}}],r.interfaceBlockChangeHandler=function(){r.setState({isLevelTooltipVisible:!1})},r.showUserLevelsModal=function(){(0,r.context.store.dispatch)((0,g.showModal)(S.MODAL_TYPES.USER_LEVELS))},r.showLevelTooltip=function(e){var t=r.targetElement;if(t&&e.target.id===t.id){var n=r.state.isLevelTooltipVisible;r.props.blockInterface(t),r.setState({isLevelTooltipVisible:!n})}},r.renderLevelInfo=function(e){return P.USER_FEATURES[e].filter(function(e){return e!==P.LEVELS_OF_AVAILABILITY.NOT_AVAILABLE}).map(function(t,n){var a=P.USER_FEATURES[e][n];return f.default.createElement("div",{className:"user-levels-icon-wrapper",key:n},f.default.createElement(y.default,{img:a===P.LEVELS_OF_AVAILABILITY.FULL?"check-1":"check-2",size:12,className:r.c({"not-full":a===P.LEVELS_OF_AVAILABILITY.PARTIAL})}),f.default.createElement("div",{className:"icon-title"},r.t("userLevels.features."+P.FEATURES_LIST[n])))})},i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.targetElement;e&&this.registerEventListener(e,"click",this.showLevelTooltip),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){var e=this.state.isLevelTooltipVisible,t=this.props,n=t.targetId,r=t.level;return e?f.default.createElement(_.default,{className:"benefits-tooltip",placement:"bottom",isForceVisible:!0,isMobileRelative:!1,targetId:n,"data-component-name":"BenefitsTooltip"},f.default.createElement("div",{className:"user-levels-header"},this.t("userLevels.benefits."+r)),this.renderLevelInfo(r),f.default.createElement("div",{className:"user-levels-more",onClick:this.showUserLevelsModal},this.t("userLevels.readMore"))):null}},{key:"targetElement",get:function(){return this.props.targetId?document.getElementById(this.props.targetId):null}}]),t}(v.default);T.propTypes={targetId:c.default.string,level:c.default.string};var A=function(e){return(0,m.bindActionCreators)({blockInterface:g.blockInterface,showModal:g.showModal},e)},C=function(e){var t=e.ui;return{currentBlockingComponent:t.currentBlockingComponent,isInterfaceBlocked:t.isInterfaceBlocked}};t.default=(0,p.connect)(C,A)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(17),u=r(l),c=function(e,t){var n=t.i18n.trans;return s.default.createElement("div",{className:"models-payout-info"},s.default.createElement("h4",{className:"models-payout-info-title"},n("tokensHistory.modelInfo.title")),s.default.createElement("ul",{className:"models-payout-info-list"},s.default.createElement("li",{className:"models-payout-info-list-item"},s.default.createElement(u.default,{messageId:"tokensHistory.modelInfo.list.firstDay",elements:{strong:s.default.createElement("strong",null)}})),s.default.createElement("li",{className:"models-payout-info-list-item"},s.default.createElement(u.default,{messageId:"tokensHistory.modelInfo.list.halfMonth",elements:{strong:s.default.createElement("strong",null)}}))),s.default.createElement("p",{className:"models-payout-info-footer"},n("tokensHistory.modelInfo.footer")))};c.contextTypes={i18n:o.default.object},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStudioEarningsTotal=t.getStudioEarnings=t.getTokensHistory=void 0;var r=n(115),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(32),i=n(16),s=function(e){return e.tokensHistory.collection},l=function(e){return e.studioEarnings.collection},u=function(e){return e.auth.currentUser},c=(t.getTokensHistory=(0,o.createSelector)([u,s],function(e,t){return(0,i.findAll)(t).valueSeq()}),t.getStudioEarnings=(0,o.createSelector)([u,l],function(e,t){return(0,i.findAll)(t).valueSeq()}));t.getStudioEarningsTotal=(0,o.createSelector)(c,function(e){return 0===e.size?{total:0,usdTotal:0}:e.toArray().map(function(e){return(0,a.default)(e,["username"])}).reduce(function(e,t){return{tip:e.tip+t.tip,offlineTip:e.offlineTip+t.offlineTip,pmUnlockTip:e.pmUnlockTip+t.pmUnlockTip,album:e.album+t.album,private:e.private+t.private,spy:e.spy+t.spy,p2p:e.p2p+t.p2p,contest:e.contest+t.contest,total:e.total+t.total,usdTotal:e.usdTotal+t.usdTotal,videoUnlock:e.videoUnlock+t.videoUnlock}})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),u=r(l),c=n(8),d=r(c),f=n(29),p=r(f),m=n(1),g=r(m),h=n(0),v=r(h),E=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{value:this.props.defaultValue}}},{key:"handleClick",value:function(e,t){t.stopPropagation(),t.preventDefault(),p.default.log("StarRating handleMouseDown",this.state,e),this.props.onChange&&e!==this.state.value&&this.props.onChange(e),this.setState({value:e})}},{key:"renderStar",value:function(e,t){return v.default.createElement("span",{className:"star",key:"star-"+e+"-"+(t?"active":"readonly"),onClick:t?this.handleClick.bind(this,e):function(){}},v.default.createElement(d.default,{img:"star"}))}},{key:"renderStars",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],n=1;n<=5;n+=1)t.push(this.renderStar(n,e));return t}},{key:"render",value:function(){return v.default.createElement("span",{className:this.c("star-rating",{editable:!this.props.readOnly}),"data-component-name":"StarRating"},v.default.createElement("div",{className:"back"},this.renderStars(!this.props.readOnly)),v.default.createElement("div",{className:"front",style:{width:this.fillPercent+"%"}},this.renderStars()))}},{key:"fillPercent",get:function(){return Math.round(this.state.value/5*100)}}]),t}(u.default);E.propTypes={defaultValue:g.default.number.isRequired,onChange:g.default.func,readOnly:g.default.bool},E.defaultProps={readOnly:!1},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(11),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(4),b=n(3),_=r(b),S=n(5),O=n(7),P=n(397),T=n(42),A=n(1306),C=r(A),I=n(1307),w=r(I),N=n(12),R=n(71),M=n(72),L=null,k=3e3,D=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:["model.id"],action:function(){S.BROWSER_CAPABILITIES.desktop||r.toggleControlsBlockVisibleHandler()}},{update:["isFullscreen"],action:function(e){var t=e.isFullscreen,n=S.BROWSER_CAPABILITIES.touch&&!S.BROWSER_CAPABILITIES.iOS;S.BROWSER_CAPABILITIES.touch||r.updateBodyStyles(t),n&&r.toggleNativeFullscreen(t)}}],r.showControls=function(){var e=r.props.isControlsBlockVisible;S.BROWSER_CAPABILITIES.touch||e||r.props.toggleControlsBlockVisible(!0)},r.hideControls=function(){var e=r.props.isControlsBlockVisible;!S.BROWSER_CAPABILITIES.touch&&e&&r.props.toggleControlsBlockVisible(!1)},r.updateBodyStyles=function(e){var t=document,n=t.body,r=S.BROWSER_CAPABILITIES.iOS,a=S.BROWSER_CAPABILITIES.mac,o=S.BROWSER_CAPABILITIES.safari;n.style.overflow=e?"hidden":"auto",(r||a&&o)&&(n.style.position=e?"fixed":"relative")},r.keyDownHandler=function(e){r.props.isFullscreen&&e.keyCode===S.KEY_CODES.escape&&(e.preventDefault(),e.stopPropagation(),r.props.toggleFullscreen(!1))},r.onFullscreenChangeHandler=function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;r.props.toggleFullscreen(Boolean(e))},r.toggleNativeFullscreen=function(e){var t=r,n=t.playerWrapperRef,a=n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen,o=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;a&&o&&(e?a.apply(n):o.apply(document))},r.toggleControlsBlockVisibleHandler=function(){var e=r.props,t=e.isControlsBlockVisible,n=e.volume,a=e.toggleControlsBlockVisible;e.playerType!==N.VIEWCAM_PLAYER_TYPES.SNAPSHOT||n>0?(L&&clearTimeout(L),t||(L=setTimeout(r.toggleControlsBlockVisibleHandler,k)),a(!t)):a(!0)},r.updatePlayerType=function(e){r.props.updatePlayerType(e)},r.resetPlayerType=function(){r.props.updatePlayerType("")},i=n,o(r,i)}return i(t,e),f(t,[{key:"componentDidMount",value:function(){this.registerEventListener(document,"keydown",this.keyDownHandler),this.registerEventListener(document,(0,R.getFullscreenChangeEventName)(),this.onFullscreenChangeHandler),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){L&&clearTimeout(L),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"renderPrivateTimer",value:function(){var e=this.props,t=e.privateMode,n=e.privateStartedAt,r=e.isControlsBlockVisible;return n&&t?v.default.createElement(w.default,{className:this.c({hover:r}),privateStartedAt:n}):null}},{key:"renderPlayerType",value:function(){var e=this,t=this.props,n=t.isDebug,r=t.playerType,a=t.broadcastType;return n?v.default.createElement("div",{className:"player-types"},v.default.createElement("div",{className:"player-types-wrapper"},"Broadcast:",v.default.createElement("div",{className:"player-type"},a)),v.default.createElement("div",{className:"player-types-wrapper"},"Player:",(0,c.default)(N.VIEWCAM_PLAYER_TYPES,function(t){return v.default.createElement("div",{key:t,className:e.c("player-type",{selected:t===r}),onClick:(0,l.default)(e.updatePlayerType,t)},t)}),v.default.createElement("div",{className:"player-type",onClick:this.resetPlayerType},"X"))):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFullscreen,r=t.isPlayerSettingsVisible,a=t.playerType,o=t.children,i=t.className,s=t.broadcastType,l=n&&(!S.BROWSER_CAPABILITIES.touch||S.BROWSER_CAPABILITIES.iPad||a===N.VIEWCAM_PLAYER_TYPES.SNAPSHOT),u=(0,P.getDeviceClickEvent)(this.toggleControlsBlockVisibleHandler);return v.default.createElement("div",d({className:this.c("player-wrapper","broadcast-type-"+s,i,{fullscreen:l}),onMouseMove:this.showControls,onMouseEnter:this.showControls,onMouseLeave:this.hideControls},u,{ref:function(t){e.playerWrapperRef=t},"data-component-name":"PlayerWrapper"}),this.renderIf(r,v.default.createElement(C.default,null)),o,this.renderPlayerType(),this.renderPrivateTimer())}}]),t}(_.default),U={toggleFullscreen:T.toggleFullscreen,toggleControlsBlockVisible:T.toggleControlsBlockVisible,updatePlayerType:T.updatePlayerType};D.propTypes=d({broadcastType:g.default.string,isDebug:g.default.bool,isFullscreen:g.default.bool,isPlayerSettingsVisible:g.default.bool,model:g.default.object.isRequired,playerType:g.default.string,privateMode:g.default.string,privateStartedAt:g.default.instanceOf(Date),volume:g.default.number},(0,O.getActionPropTypes)(U));var j=function(e){var t=e.config.data.debug,n=e.broadcast,r=n.isBroadcastingPageOpen,a=n.privateStartedAt,o=e.viewCam,i=o.isPlayerSettingsVisible,s=o.model,l=o.playerVolume,u=o.isControlsBlockVisible,c=o.isFullscreen,d=o.privateStartedAt,f=(0,R.getPrivateMode)(e);return{isControlsBlockVisible:u,isDebug:t,isFullscreen:c,isPlayerSettingsVisible:i,model:s,playerType:(0,M.getPlayerType)(e),broadcastType:(0,M.getBroadcastType)(e),privateMode:f,privateStartedAt:r?a:d,volume:l}},F=function(e){return(0,y.bindActionCreators)(U,e)};t.default=(0,E.connect)(j,F)(D)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(85),u=r(l),c=n(75),d=r(c),f=n(46),p=r(f),m=n(30),g=r(m),h=n(35),v=r(h),E=n(14),y=r(E),b=n(371),_=r(b),S=n(36),O=r(S),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=n(1),I=r(C),w=n(0),N=r(w),R=n(2),M=n(4),L=n(28),k=n(9),D=n(3),U=r(D),j=n(17),F=r(j),B=n(114),H=r(B),V=n(5),G=n(62),x=n(56),W=r(x),Y=n(7),K=n(21),q=n(303),z=n(29),X=r(z),Z=n(81),Q=n(12),J=n(42),$=n(224),ee=n(72),te=n(71),ne=function(e){return(0,d.default)(e).replace(/[\r%&+=]/g,function(e){return{"\r":"%0D","%":"%25","&":"%26","+":"%2B","=":"%3D"}[e]})},re=function(e){var t=[];return(0,_.default)(e,function(e,n){t.push(ne(n)+"="+ne(e))}),t.join("&")},ae=void 0,oe=void 0,ie=function(e){var t=e.i18n,n=function(e){return t.trans(e)},r=["camera","resolution","microphone","cameraPreview","qualityProfile","modelStatus"],a=["low","medium","high","hd"];return A({backToShow:n("flash.backToShow"),retryButton:n("flash.retryButton"),startShow:n("flash.startShow")},(0,p.default)(r,function(e,t){return e["settings_"+t+"Caption"]=n("flash.settings."+t),e},{}),(0,p.default)(a,function(e,t){return e["profile_"+t]=n("flash.profiles."+t),e},{}))},se=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),le.call(r),a=n,i(r,a)}return s(t,e),P(t,[{key:"getDefaultState",value:function(){var e=this.props,t=e.isBroadcastMirrored,n=e.isBroadcastingPageOpen,r=n&&(0,q.isGetUserMediaSupported)();return{camProfileId:W.default.get("camProfileId",null),camId:W.default.get("camId",null),audioCodec:W.default.get("audioCodec","Speex"),isBroadcastMirrored:t,isCameraAccessDenied:!1,isRequestingUserMedia:r,micId:W.default.get("micId",null)}}},{key:"componentWillMount",value:function(){"undefined"!=typeof window&&(window.scEvent=this.processSwfEventDeferred),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this)}},{key:"componentDidMount",value:function(){var e=this;this.state.isRequestingUserMedia&&(0,q.requestUserMedia)({video:!0}).then(function(t){return e.setState({isRequestingUserMedia:!1}),(0,q.stopStream)(t),null}).catch(function(){return e.setState({isCameraAccessDenied:!0,isRequestingUserMedia:!1}),null});this.startFlashUnavailableTimer(),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){clearTimeout(ae),clearTimeout(oe),this.props.hideNotification({key:"flashUnavailable"}),window.scEvent=null,T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"onCamHasChanged",value:function(e){this.startFlashUnavailableTimer(),this.setFlashProps(e),this.setFlashModelStatus(e)}},{key:"onViewCamSettingsChanged",value:function(e){this.setModelMicMuted(e)}},{key:"getSwfUrl",value:function(){var e=H.default.ENV,t=e.PRODUCTION,n=e.STAGING,r=this.props.config.data,a=r.env,o=r.cdnUrl,i=a===t||a===n?o:"",s=re(this.flashVars),l=i+"/assets/cams/components/ui/Player/player-debug.swf?"+s,u=i+"/assets/cams/components/ui/Player/player.swf?"+s,c=!1===W.default.get("flashDebug"),d=W.default.get("flashDebug")||this.props.config.data.debug?l:u;return c?u:d}},{key:"setFlashProps",value:function(e){var t=e.config,n=e.counterpart,r=e.currentUser,o=e.isBroadcastingPageOpen,i=e.isLoggedIn,s=e.privateMode,l=e.streamName,c=e.streamConfig,d=e.userStreamName,f=e.sessionHash,p=this.flashRef,m=t.data.hostRoot,g=s===Q.PRIVATE_MODES.MODE_P2P,h=s===Q.PRIVATE_MODES.MODE_P2P_AUDIO,v=o?"":""+l,E=o?l:"";if(i&&(g||h)&&(r.isModel&&n.id?v=d:E=d),p&&p.setProps){var y=A({publishId:E,playbackId:v},c,{sessionId:f,domain:m});X.default.info("FlashPlayer.setFlashProps()",y),p.setProps.apply(p,a((0,u.default)(y)))}else X.default.warn("flashRef is not defined or has no setMedia",p)}},{key:"performFlashStreamReconnect",value:function(){var e=this.flashRef;e&&e.reconnect?e.reconnect():X.default.warn("flashRef is not defined or has no reconnect",e)}},{key:"setFlashVolume",value:function(e){var t=e.volume,n=this.flashRef;n&&n.setVolume?n.setVolume((0,G.roundFloat)(t/100)):X.default.warn("flashRef is not defined or has no setVolume",n)}},{key:"performFlashBlur",value:function(){var e=this.flashRef;e&&!V.BROWSER_CAPABILITIES.ie&&e.blur()}},{key:"startFlashBroadcasting",value:function(){var e=this.flashRef;e&&e.startBroadcasting?(X.default.info("flashRef startBroadcasting()"),e.startBroadcasting()):X.default.warn("flashRef is not defined or has no startBroadcasting",e)}},{key:"stopFlashBroadcasting",value:function(){var e=this.flashRef;e&&e.stopBroadcasting?(X.default.info("flashRef stopBroadcasting()"),e.stopBroadcasting()):X.default.warn("flashRef is not defined or has no stopBroadcasting",e)}},{key:"setFlashModelStatus",value:function(e){var t=e.isBroadcastingPageOpen,n=e.model.status,r=this.flashRef;if(t)if(r&&r.setModelStatus&&n){var a=this.t("viewCam.poster."+n);X.default.info("flashRef setModelStatus()",n,a),r.setModelStatus(a)}else X.default.warn("flashRef is not defined or has no setModelStatus",r)}},{key:"setFlashBroadcastConfig",value:function(e){var t=e.isBroadcastingPageOpen,n=e.broadcastConfig,r=this.flashRef;if(t)if(r&&r.setCustomProfile){var a=n.flashFps,o=n.flashWidth,i=n.flashHeight;X.default.info("flashRef setCustomProfile()",{flashFps:a,flashWidth:o,flashHeight:i}),r.setCustomProfile(o,i,a)}else X.default.warn("flashRef is not defined or has no setCustomProfile",r)}},{key:"setModelMicMuted",value:function(e){var t=e.isBroadcastingPageOpen,n=e.viewCamSettings,r=this.flashRef;if(t)if(r&&r.setModelMicMuted&&n){var a=n.isMuted;r.setModelMicMuted(a)}else X.default.warn("flashRef is not defined or has no setModelMicMuted",r)}},{key:"onVolumeHasChanged",value:function(e){this.setFlashVolume(e)}},{key:"onStreamErrorOccurred",value:function(e){X.default.error("onStreamErrorOccurred",e)}},{key:"getObjectParams",value:function(){return[{name:"wmode",value:W.default.get("flashWMode")||"opaque"},{name:"allowScriptAccess",value:"always"},{name:"bgcolor",value:"#2b2b2b"},{name:"allowFullscreen",value:"true"},{name:"flashvars",value:re(this.flashVars)}]}},{key:"onFlashReInit",value:function(){var e=this.flashRef;e&&setTimeout(function(){e.style.display="none",ae=setTimeout(function(){e&&(e.style.display="block")},100)})}},{key:"renderParams",value:function(){return this.getObjectParams().map(function(e){return N.default.createElement("param",{key:e.name,name:e.name,value:e.value})})}},{key:"render",value:function(){var e=this,t=this.state.isRequestingUserMedia,n=this.props,r=n.isBroadcastingPageOpen,a=n.isCamAvailable,o=n.isViewCamReady,i=n.model;if(!i)return null;var s=o&&a||r&&!t;return N.default.createElement("div",{className:"flash-player","data-component-name":"FlashPlayer"},this.renderIf(s,function(){return N.default.createElement("object",{id:"xVideoCams",data:e.getSwfUrl(),height:"100%",key:i.id,ref:function(t){e.flashRef=t},type:"application/x-shockwave-flash",width:"100%"},e.renderParams())}))}},{key:"flashVars",get:function(){var e=this.props,t=e.canMuteMic,n=e.config,r=e.getStaticUrl,a=e.isBroadcastingPageOpen,o=e.isLoggedIn,i=e.lastSnapshotUrl,s=this.state,l=s.audioCodec,u=s.camId,c=s.camProfileId,d=s.isBroadcastMirrored,f=s.isCameraAccessDenied,p=s.micId,m=a?"":i,g=n.whiteLabelId?"_xh":"";return{bgColor:2829099,camId:u,camProfileId:c,disableMicMute:!t,isFullscreenEnabled:o,micId:p,audioCodec:l,forceLowCamProfile:!a,mirrorVideo:d,isModel:a,isCameraAccessDenied:f,previewUrl:m,localeData:JSON.stringify(ie(this.context)),version:H.default.VERSION,watermarkUrl:r("cams/components/ui/Watermark/watermark"+g+".png")}}}]),t}(U.default),le=function(){var e=this;this.propsUpdateToActionsMap=[{update:ee.viewCamSettingsChanged,action:function(t){e.onViewCamSettingsChanged(t)}},{update:ee.camHasChanged,action:function(t){e.onCamHasChanged(t)}},{update:["broadcastConfig"],action:function(t){e.setFlashBroadcastConfig(t)}},{update:ee.camHasBeenSwitchedOff,action:function(){e.stopFlashBroadcasting()}},{update:["volume"],action:function(t){e.onVolumeHasChanged(t)}},{update:["isBroadcastingPageOpen"],action:function(e){e.isBroadcastingPageOpen&&clearTimeout(oe)}}],this.startFlashUnavailableTimer=function(){e.props.hasFlashInitialized||e.props.isBroadcastingPageOpen||(oe&&clearTimeout(oe),oe=setTimeout(function(){e.props.showErrorNotification(e.renderFlashUnavailableNotification(),"flashUnavailable")},1e4))},this.applyBroadcastSettings=function(){var t=e.flashRef;e.setState({camProfileId:W.default.get("camProfileId",null),camId:W.default.get("camId",null),micId:W.default.get("micId",null)},function(){t.style.display="none",setTimeout(function(){t.style.display="block"},200)})},this.processSwfEventDeferred=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];setTimeout(g.default.apply(void 0,[e.processSwfEvent].concat(n)),0)},this.changeVolumeThrottled=(0,O.default)(function(t){e.props.changeVolume(Math.round(100*t))},300),this.changeStreamQualityProfile=function(e){W.default.set("camProfileId",e)},this.saveChosenCamId=function(e){W.default.set("camId",e)},this.saveChosenMicId=function(e){W.default.set("micId",e)},this.onVideoStartPlaying=function(){e.setState({isLoading:!1})},this.onVideoPausedPlaying=function(){e.setState({isLoading:!0})},this.onFlashInited=function(){e.props.hideNotification({key:"flashUnavailable"}),clearTimeout(oe),e.props.setFlashInited()},this.checkIfStartBroadcast=function(){var t=e.props,n=t.currentUser,r=t.isCurrentUserInCam2Cam,a=t.privateMode;t.isLoggedIn&&((n.isModel&&(0,y.default)((0,u.default)(Q.PRIVATE_MODES),a)||r)&&e.startFlashBroadcasting())},this.processSwfEvent=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];X.default.info("flashRef processSwfEvent()",t,r);var o=e.props,i=o.mouseEnterCallback,s=o.mouseLeaveCallback,l=o.isBroadcastingPageOpen,u=o.model,c=o.startBroadcast,d=o.stopBroadcast,f=o.stopPrivate,p=o.updateBroadcastSettings;switch(t){case"init":e.onFlashInited(),e.setFlashVolume(e.props),e.setModelMicMuted(e.props),e.setFlashProps(e.props),e.setFlashModelStatus(e.props),e.setFlashBroadcastConfig(e.props),e.checkIfStartBroadcast();break;case"playStart":e.onVideoStartPlaying();break;case"streamStart":c(Q.BROADCAST_PLAYER_TYPES.FLASH),l&&p({broadcastType:Q.BROADCAST_PLAYER_TYPES.FLASH});break;case"streamStop":l?d():f();break;case"volumeChange":var m=r[0];e.changeVolumeThrottled(m);break;case"reInit":e.onFlashReInit();break;case"resolutionChange":p({width:r[0],height:r[1],broadcastType:Q.BROADCAST_PLAYER_TYPES.FLASH});break;case"micMuted":p({isMuted:r[0],broadcastType:Q.BROADCAST_PLAYER_TYPES.FLASH});break;case"mirrorVideo":var g=r[0];e.props.changeMirrored(g);break;case"profileChange":var h=r[0];e.changeStreamQualityProfile(h);break;case"camChange":var v=r[0];e.saveChosenCamId(v);break;case"micChange":var E=r[0];e.saveChosenMicId(E);break;case"error":e.onStreamErrorOccurred(r);break;case"camList":break;case"fullscreen":e.props.emitButtonEvent(V.APP_BUTTONS.PLAYER_FULLSCREEN,{model:u});break;case"controlsShow":i();break;case"controlsHide":s(),e.performFlashBlur()}},this.switchToDashPlayer=function(){var t=V.BROWSER_CAPABILITIES.safari?Q.VIEWCAM_PLAYER_TYPES.HTML5:Q.VIEWCAM_PLAYER_TYPES.DASH;e.props.updatePlayerType(t,!0)},this.renderFlashUnavailableNotification=function(){var t=function(e){return e.stopPropagation()};return N.default.createElement(F.default,{elements:{downloadFlashLink:N.default.createElement("a",{href:"https://get.adobe.com/flashplayer/",target:"_blank",onClick:t}),dashLink:N.default.createElement("a",{onClick:e.switchToDashPlayer})},messageId:"viewCam.flashUnavailable"})}},ue={changeMirrored:Z.changeMirrored,changeVolume:J.changeVolume,emitButtonEvent:k.emitButtonEvent,hideNotification:L.hide,initBroadcast:Z.init,setFlashInited:J.setFlashInited,showErrorNotification:L.error,startBroadcast:Z.startCam,stopBroadcast:Z.stopCam,stopPrivate:J.stopPrivate,updateBroadcastSettings:Z.updateBroadcastSettings,updatePlayerType:J.updatePlayerType};se.propTypes=A({broadcastConfig:I.default.object,counterpart:I.default.object,getStaticUrl:I.default.func.isRequired,lastSnapshotUrl:I.default.string,isBroadcastMirrored:I.default.bool,isBroadcastingPageOpen:I.default.bool,isCamActive:I.default.bool,isCamAvailable:I.default.bool,hasFlashInitialized:I.default.bool,isLoggedIn:I.default.bool,isViewCamReady:I.default.bool,model:I.default.object,mouseEnterCallback:I.default.func,mouseLeaveCallback:I.default.func,privateMode:I.default.string,sessionHash:I.default.string,streamName:I.default.string.isRequired,streamConfig:I.default.shape({publishUrl:I.default.string,playbackUrl:I.default.string}).isRequired,userStreamName:I.default.string,userProfile:I.default.object,viewCamSettings:I.default.object,volume:I.default.number},(0,Y.getActionPropTypes)(ue)),se.defaultProps={mouseEnterCallback:v.default,mouseLeaveCallback:v.default};var ce=function(e){var t=e.appSettings.data.sessionHash,n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.broadcast,s=e.broadcast,l=s.broadcastConfig,u=s.isBroadcastMirrored,c=s.isBroadcastingPageOpen,d=s.isCamActive,f=e.config,p=e.profile,m=e.viewCam,g=e.viewCam,h=g.isCamAvailable,v=g.hasFlashInitialized,E=g.viewCamSettings;return{broadcastConfig:l,canMuteMic:(0,$.getCanMuteMic)(e),config:f,counterpart:c?i.counterpart:m.counterpart,currentUser:r,getStaticUrl:function(t){return(0,K.getStaticUrl)(e,t)},isCurrentUserInCam2Cam:(0,te.getIsInCam2Cam)(e),isBroadcastMirrored:u,isBroadcastingPageOpen:c,isCamActive:d,isCamAvailable:h,hasFlashInitialized:v,isLoggedIn:a&&!o,isViewCamReady:m.isReady,model:c?i.model:m.model,privateMode:(0,te.getPrivateMode)(e),streamConfig:(0,ee.getFlashStreamConfig)(e),sessionHash:t,streamName:c?i.streamName:m.streamName,userStreamName:c?i.userStreamName:m.userStreamName,userProfile:p.user,viewCamSettings:E}},de=function(e){return(0,M.bindActionCreators)(ue,e)};t.default=(0,R.connect)(ce,de)(se)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(1308),h=r(g),v=n(1309),E=r(v),y=n(1310),b=r(y),_=n(3),S=r(_),O=n(22),P=r(O),T=n(141),A=n(637),C=n(303),I=function(e,t){return e.isBroadcastingPageOpen!==t.isBroadcastingPageOpen&&t.isBroadcastingPageOpen},w=500,N=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={isCameraAccessAllow:!1,isRequestingUserMedia:!0},r.propsUpdateToActionsMap=[{update:I,action:function(){(0,C.isGetUserMediaSupported)()?(0,A.checkUserMediaDevices)().then(r.checkUserMediaDevicesSuccess).catch(r.checkUserMediaDevicesError):r.checkUserMediaDevicesSuccess()}},{update:["isCamAvailable"],action:function(e){e.isCamAvailable&&r.checkUserMediaDevicesSuccess()}}],r.checkUserMediaDevicesSuccess=(0,l.default)(function(){r.setState({isCameraAccessAllow:!0,isRequestingUserMedia:!1})},w),r.checkUserMediaDevicesError=(0,l.default)(function(){r.setState({isCameraAccessAllow:!1,isRequestingUserMedia:!1})},w),i=n,o(r,i)}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.lastSnapshotUrl,n=e.volume,r=this.state,a=r.isRequestingUserMedia,o=r.isCameraAccessAllow,i=null;return i=a?p.default.createElement(P.default,{isCentered:!0}):o&&!T.isWebRTCSupported?p.default.createElement(E.default,null):a||o?p.default.createElement(b.default,{lastSnapshotUrl:t,volume:n}):p.default.createElement(h.default,null),p.default.createElement("div",{className:"web-rtc-player-wrapper","data-component-name":"WebRtcPlayer"},i)}}]),t}(S.default);N.propTypes={isBroadcastingPageOpen:d.default.bool,isCamAvailable:d.default.bool};var R=function(e){var t=e.broadcast.isBroadcastingPageOpen;return{isCamAvailable:e.viewCam.isCamAvailable,isBroadcastingPageOpen:t}};t.default=(0,m.connect)(R)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.USER_MEDIA=t.getAvailableResolutions=t.checkResolution=t.checkUserMediaDevices=t.getEnumerateDevices=t.getUserMedia=t.removeStream=t.DEVICES_TYPE=void 0;var s=n(6),l=r(s),u=n(46),c=r(u),d=n(267),f=r(d),p=n(69),m=r(p),g=n(13),h=r(g),v=n(70),E=r(v),y=n(33),b=r(y),_=n(47),S=r(_),O=n(116),P=r(O),T=n(14),A=r(T),C=n(49),I=r(C),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=n(149),R=n(20),M=n(5),L=n(29),k=r(L),D=n(56),U=r(D),j=n(141),F={USER:"user",ENVIRONMENT:"environment",LEFT:"left",RIGHT:"right"},B=t.DEVICES_TYPE={VIDEO:"videoinput",AUDIO:"audioinput"},H=[],V=t.removeStream=function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e.getTracks()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;i.stop(),e.removeTrack(i)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}(0,m.default)(e.stop)&&e.stop()}return(0,R.resolve)()},G=function(e){var t=e.audioDeviceId;return!t||{deviceId:M.BROWSER_CAPABILITIES.safari?t:{exact:t}}},x=function(e){var t=e.videoDeviceId,n=e.videoProfile;if(!t)return!0;var r=(0,l.default)(j.RESOLUTION_LIST,n,{}),a=r.width,o=r.height,i=a&&o?a/o:1.3333333333333333,s=navigator.mediaDevices.getSupportedConstraints(),u=!M.BROWSER_CAPABILITIES.desktop&&s.facingMode;return{aspectRatio:i,deviceId:t?{exact:t}:null,facingMode:u?{exact:F.ENVIRONMENT}:null,height:o,width:a,advanced:[{width:{min:a-100,max:a+100},height:{min:o-100,max:o+100}},{aspectRatio:i}]}},W=t.getUserMedia=function(e){var t=e.videoDeviceId,n=e.audioDeviceId,r=e.videoProfile,a={audio:G({audioDeviceId:n}),video:x({videoDeviceId:t,videoProfile:r})};return k.default.info("UserMedia.getUserMedia()",a),navigator.mediaDevices.getUserMedia(a)},Y=t.getEnumerateDevices=function(){return navigator.mediaDevices.enumerateDevices()},K=(t.checkUserMediaDevices=function(){return navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(function(e){return k.default.info("UserMedia.checkUserMediaDevices",e),V(e)}).catch(function(e){throw k.default.info("UserMedia.checkUserMediaDevices",e),e})},t.checkResolution=function(e,t){return function(){var n=(0,l.default)(j.RESOLUTION_LIST,t,{}),r=n.isAvailable;return k.default.info("UserMedia.checkResolutionStart()",{videoProfile:t,isAvailable:r}),(r?(0,R.resolve)():W({videoProfile:t,videoDeviceId:e})).then(function(e){return k.default.info("UserMedia.checkResolutionSuccess()",{videoProfile:t}),H.push(t),V(e)}).catch(function(e){return k.default.error("UserMedia.checkResolutionError()",{videoProfile:t,error:e}),null})}}),q=t.getAvailableResolutions=function(e){H=U.default.get("videoDeviceId-"+e,[]);var t=(0,R.resolve)();if((0,h.default)(H)){var n=(0,f.default)(j.RESOLUTION_LIST,"isEnabled");t=(0,c.default)(n,function(t,n,r){return t.then(K(e,r))},(0,R.resolve)())}return t.then(function(){return k.default.info("UserMedia.getAvailalbeResolutions()",e,H),U.default.set("videoDeviceId-"+e,H),(0,R.resolve)(H)})},z=t.USER_MEDIA={ERROR:"ERROR",UPDATE:"UPDATE",UPDATE_STREAM:"UPDATE_STREAM",REMOVE_STREAM:"REMOVE_STREAM"},X=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k.default.info("UserMedia.create()",e),r.config=e,r.getEnumerateDevices().then(r.updateAvailableResolution).then(r.updateDeviceParams).then(r.updateStream)},r.destroy=function(){k.default.info("UserMedia.destroy()"),r.config=null,r.removeStream()},r.update=function(e){var t=(0,E.default)(e),n=!(0,I.default)((0,b.default)(r.config,t),e);return k.default.info("UserMedia.update()",{hasConfigChanged:n,config:e}),n?(r.config=w({},r.config,e),r.updateAvailableResolution().then(r.updateDeviceParams).then(r.removeStream).then(r.updateStream)):(0,R.resolve)()},r.updateStream=function(){var e=r,t=e.config;return k.default.info("UserMedia.updateStream()",t),W(t).then(function(e){r.stream=e,k.default.info("UserMedia.updateStreamSuccess()",e),r.emit(z.UPDATE_STREAM,e)}).catch(function(e){k.default.error("UserMedia.updateStreamError()",e),r.emit(z.ERROR,e)})},r.removeStream=function(){var e=r,t=e.stream;return k.default.info("UserMedia.removeStream()",t),V(t)},r.getEnumerateDevices=function(){return k.default.info("UserMedia.getEnumerateDevices()"),(0,R.resolve)().then(function(){return M.BROWSER_CAPABILITIES.firefox?W({}):(0,R.resolve)()}).then(Y).then(function(e){r.devices=e;var t=r,n=t.config,a=(0,S.default)(e,function(e){return e.kind===B.AUDIO}),o=n.audioDeviceId||(0,l.default)(a,"0.deviceId",null),i=(0,S.default)(e,function(e){return e.kind===B.VIDEO}),s=n.videoDeviceId||(0,l.default)(i,"0.deviceId",null);r.config=w({},n,{audioDeviceId:o,videoDeviceId:s}),k.default.info("UserMedia.getEnumerateDevicesSuccess()",e)})},r.updateAvailableResolution=function(){var e=r.config.videoDeviceId,t=e&&e!==r.deviceId;return k.default.info("UserMedia.updateAvailableResolution()",e),t?q(e).then(function(t){r.deviceId=e,r.resolutions=t;var n=r,a=n.config,o=(0,A.default)(t,a.videoProfile)?a.videoProfile:(0,P.default)(t);r.config=w({},a,{videoProfile:o}),k.default.info("UserMedia.updateAvailableResolutionSuccess()",{videoDeviceId:e,resolutions:t})}):(0,R.resolve)()},r.updateDeviceParams=function(){var e=r,t=e.resolutions,n=e.devices,a=e.config;r.emit(z.UPDATE,w({},a,{resolutions:t,devices:n}))},i=n,o(r,i)}return i(t,e),t}(N.EventEmitter);t.default=X},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(107),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(3),g=r(m),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.code;return p.default.createElement("span",{className:"smile smile-"+e,title:(0,l.default)(e),"data-component-name":"Smile"})}}]),t}(g.default);h.propTypes={code:d.default.string.isRequired},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(8),g=r(m),h=n(1327),v=function(e,t){return"https://twitter.com/intent/tweet?url="+e+"&text="+encodeURIComponent(t)},E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.twitterShareBtnClickHandler=function(){var e=r.props.onClickHandler;e&&e()},i=n,o(r,i)}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{isTwitterJsLoaded:!1}}},{key:"componentDidMount",value:function(){var e=this;(0,h.injectTwitterJs)().then(function(){e.setState({isTwitterJsLoaded:!0})})}},{key:"render",value:function(){if(!this.state.isTwitterJsLoaded)return null;var e=this.props,t=e.labelMobileText,n=e.shareLinkUrl,r=e.shareText,a=e.labelText,o=e.type,i="round"===o,s=v(n,r);return d.default.createElement("div",{className:"twitter-share-button-wrapper","data-component-name":"TwitterShareButton"},d.default.createElement("a",{className:this.c("btn twitter-share-button-element",{"btn-send":!i,"btn-default":i,"twitter-share-button-round-icon":i}),href:s,onClick:this.twitterShareBtnClickHandler},d.default.createElement("span",null,d.default.createElement(g.default,{img:"twitter-original",size:18})),this.renderIf(!i,d.default.createElement("span",{className:"desktop-label"},a)),this.renderIf(!i&&t,d.default.createElement("span",{className:"mobile-label"},t))))}}]),t}(p.default);E.propTypes={labelMobileText:u.default.string,labelText:u.default.string,onClickHandler:u.default.func,shareLinkUrl:u.default.string.isRequired,shareText:u.default.string.isRequired,type:u.default.oneOf(["regular","round"]).isRequired},E.defaultProps={type:"regular"},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=r(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),l=r(s),u=n(0),c=r(u),d=n(2),f=n(24),p=n(4),m=n(99),g=n(1342),h=r(g),v=n(66),E=n(9),y=n(17),b=r(y),_=n(51),S=n(5),O=n(7),P=n(600),T=r(P),A=n(602),C=r(A),I="/"+(0,o.default)(v.CONSOLE_MESSAGE_SUBTYPES.HELP),w=v.SYSTEM_MESSAGE_SUBTYPES.CONSOLE_ANNOUNCEMENT,N=v.SYSTEM_MESSAGE_SUBTYPES.EMAIL_VERIFY_REQUIRED,R=v.SYSTEM_MESSAGE_SUBTYPES.INVISIBLE_MODE,M=v.SYSTEM_MESSAGE_SUBTYPES.LOGIN_REQUIRED,L=v.SYSTEM_MESSAGE_SUBTYPES.NOT_ENOUGH_TOKENS,k=v.SYSTEM_MESSAGE_SUBTYPES.PRIVATE_MODE_ENDED,D=v.SYSTEM_MESSAGE_SUBTYPES.PRIVATE_MODE_STARTED,U=v.SYSTEM_MESSAGE_SUBTYPES.TOKENS_GIVEAWAY_SIGNUP,j=v.SYSTEM_MESSAGE_SUBTYPES.YOU_ARE_BANNED,F=function(e,t){var n=e.body,r=void 0===n?null:n,a=e.emitButtonEvent,i=e.model,s=e.sendConsoleMessage,l=e.subtype,u=t.i18n.trans,d=null,p=i.username,m=function(e){e.stopPropagation(),a(S.APP_BUTTONS.MODEL_CHAT_MESSAGE_BUY_TOKENS,{model:i})},g=function(){s(i.id,I)};switch(l){case L:d=c.default.createElement(b.default,{elements:{buyTokens:c.default.createElement("a",{href:"#",onClick:m})},messageId:"camChat.notEnoughTokensForTip"});break;case j:d=c.default.createElement("span",null,u("camChat.youAreBannedByUser",{username:p}));break;case D:d=c.default.createElement("span",null,u("camChat.youAreInPrivateMode",{username:p}));break;case k:d=c.default.createElement("span",null,u("camChat.youHaveLeftPrivateMode",{username:p}));break;case M:var E=_.AUTH_TRIGGER_SOURCES.MODEL_CHAT_MESSAGE_LOGIN_REQUIRED;d=c.default.createElement(b.default,{elements:{LoginLink:c.default.createElement(T.default,{triggerSource:E}),SignUpLink:c.default.createElement(C.default,{triggerSource:E})},messageId:"camChat.modelHasDisabledChatForAnonymous"});break;case N:d=c.default.createElement(b.default,{elements:{link:c.default.createElement(f.Link,{to:"/settings"})},messageId:"camChat.modelHasDisabledChatForUnverifiedEmails"});break;case R:d=c.default.createElement("span",null,u("camChat.youAreInInvisibleMode"));break;case w:d=c.default.createElement(b.default,{elements:{a:c.default.createElement("a",{className:"console-link",onClick:g})},parameters:{help:"/"+(0,o.default)(v.CONSOLE_MESSAGE_SUBTYPES.HELP)},messageId:"camChat.console.announcement"});break;case U:d=c.default.createElement(h.default,null)}return r?c.default.createElement("span",null,r):d},B={emitButtonEvent:E.emitButtonEvent,sendConsoleMessage:m.sendConsoleMessage};F.propTypes=i({body:l.default.string,isLoggedIn:l.default.bool,model:l.default.shape({id:l.default.number,username:l.default.string}),subtype:l.default.string},(0,O.getActionPropTypes)(B)),F.contextTypes={i18n:l.default.object};var H=function(e){return{isLoggedIn:e.auth.isLoggedIn}},V=function(e){return(0,p.bindActionCreators)(B,e)};t.default=(0,d.connect)(H,V)(F)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addMediaAction=t.performAction=t.checkPlayAvailability=t.READY_STATES=t.NETWORK_STATES=void 0;var a=n(20),o=r(a),i=n(5),s=n(185),l=r(s),u=new WeakMap,c=t.NETWORK_STATES={EMPTY:0,IDLE:1,LOADING:2,NO_SOURCE:3},d=t.READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},f=t.checkPlayAvailability=function(e,t){var n=e.readyState===d.HAVE_NOTHING,r=e.networkState!==c.LOADING&&e.networkState!==c.IDLE;if(i.BROWSER_CAPABILITIES.firefox&&"play"===t&&n&&r)throw new l.default("Can not play audio")},p=t.performAction=function(e,t){return e instanceof HTMLMediaElement?(f(e,t),"function"==typeof t?t(e):e[t]()):null};t.addMediaAction=function(e,t){var n=u.get(e),r=n&&n.isPending()?n:o.default.resolve(),a=r.then(function(){var n=p(e,t);return n&&n.then?o.default.resolve(n):new o.default(function(e){setTimeout(function(){e(n)},150)})});return u.set(e,a),a}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(3),v=r(h),E=n(10),y=r(E),b=n(5),_=n(19),S=n(131),O=n(91),P=function(e){function t(){var e,n,r,i;a(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.subscribeButtonClickHandler=function(){var e=r.props,t=e.isLoggedIn,n=e.user,a=e.showModal,o=e.toggleSubscription,i=e.buttonLocation,l=r.context.store.dispatch;t?o(n.id,i):(0,_.composeActionOnEnter)("subscription",{modelId:n.id}).then(function(e){a(b.MODAL_TYPES.AUTH,{action:{backgroundImage:n.avatarUrl,type:"notifyWhenOnline",user:n,onSuccess:function(){_.performActionOnEnter.subscription(s({},e.params,{buttonLocation:i}),l)},onEnterAction:e},component:"SignUp",className:"auth-modal-signup",triggerSource:b.APP_BUTTONS.SUBSCRIBE})})},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.isSubscribed,n=e.isPending,r=e.style,a=e.user,o=void 0;return o=t?this.t("button.subscription.unSubscribe"):this.t("button.subscription.subscribe"),a.isModel?f.default.createElement("div",{className:"subscribe-button-container","data-component-name":"SubscribeButton"},f.default.createElement(y.default,{className:"subscribe-button",disabled:n,onClick:this.subscribeButtonClickHandler,size:"default",type:"anchor",style:t?"default":r},o)):null}}]),t}(v.default);P.propTypes={hasSucceeded:c.default.bool,isLoggedIn:c.default.bool,isSubscribed:c.default.bool,style:c.default.string,user:c.default.shape({id:c.default.number}).isRequired,buttonLocation:c.default.string,showModal:c.default.func.isRequired,toggleSubscription:c.default.func.isRequired},P.defaultProps={style:"default"};var T=function(e,t){var n=e.auth,r=n.isLoggedIn,a=n.isLoggingOut,o=e.profile,i=e.subscriptions,s=t.user;return{hasSucceeded:i.hasAddSucceeded||i.hasRemoveSucceeded,isEmailVerified:o.user&&o.user.isEmailVerified,isSubscribed:(0,O.getIsSubscribed)(e,s.id),isLoggedIn:r&&!a,isPending:i.isPending}},A=function(e){return(0,m.bindActionCreators)({showModal:g.showModal,toggleSubscription:S.toggle},e)};t.default=(0,p.connect)(T,A)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Profile=t.PROFILE_KNIGHTS_LIST_MAX_LENGTH=t.PROFILE_FRIENDS_LIST_MAX_LENGTH=t.hasFriendshipChanged=void 0;var l=n(537),u=r(l),c=n(6),d=r(c),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(18),m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(4),b=n(3),_=r(b),S=n(393),O=r(S),P=n(163),T=n(1357),A=r(T),C=n(398),I=r(C),w=n(1358),N=r(w),R=n(1367),M=r(R),L=n(1370),k=r(L),D=n(1378),U=r(D),j=n(1379),F=r(j),B=n(100),H=n(91),V=n(147),G=n(189),x=t.hasFriendshipChanged=function(e,t){return(0,d.default)(e,"user.id")===(0,d.default)(t,"user.id")&&(0,d.default)(e,"isUserMyFriend")!==(0,d.default)(t,"isUserMyFriend")},W=t.PROFILE_FRIENDS_LIST_MAX_LENGTH=9,Y=t.PROFILE_KNIGHTS_LIST_MAX_LENGTH=9,K=t.Profile=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:[x],action:function(){r.props.loadUserAlbums(r.props.user.id),r.props.loadCurrentAlbumPhotos(r.props.user.id)}}]),s=n,i(r,s)}return s(t,e),f(t,[{key:"getSocketEventBindings",value:function(e,t){var n=this.props.user,r=[{subscriptionKey:"userBanned:"+n.id},{subscriptionKey:"userUnbanned:"+n.id}];if(!e.isOwnProfile){var a=this.props.user;a&&r.push({subscriptionKey:"userUpdated:"+a.id})}return r}},{key:"shouldSocketResubscribe",value:function(e,t){return(0,d.default)(e,"user.id")!==(0,d.default)(this.props,"user.id")}},{key:"render",value:function(){var e=this,t=this.props,n=t.friendIds,r=t.isBanned,a=t.isDeleted,o=t.isFriendsVisible,i=t.isGeoBanned,s=t.isOwnProfile,l=t.isProfileAvailable,c=t.knights,d=t.shouldRenderWatchButton,f=t.user;return v.default.createElement("div",{className:"profile","data-component-name":"Profile"},v.default.createElement("div",{className:"columns"},v.default.createElement("div",{className:"column xs-12 s-12 m-12 l-7 xl-7"},this.renderIf(!a,function(){return v.default.createElement(U.default,{className:"page-block",user:f})}),v.default.createElement("div",{className:"page-block"},this.renderIf(s,function(){return v.default.createElement(k.default,null)},function(){return v.default.createElement(M.default,{isBanned:r,isGeoBanned:i,isProfileAvailable:l,shouldRenderWatchButton:d,user:f})})),this.renderIf(l&&!r&&!i&&!a&&f.description||s,function(){return v.default.createElement(A.default,{className:"page-block",user:f})})),this.renderIf(l&&!r&&!i||s,function(){return v.default.createElement("div",{className:"column xs-12 s-12 m-12 l-5 xl-5"},v.default.createElement(N.default,{className:"page-block",isOwnProfile:s,user:f}),v.default.createElement(F.default,{className:"page-block",isOwnProfile:s,user:f}),e.renderIf(c&&c.size,function(){return v.default.createElement(O.default,{className:"page-block",counter:c.size>Y?c.size:null,hasMore:c.size>Y,isOwnProfile:s,knights:c.take(Y),user:f})}),e.renderIf(o,function(){return v.default.createElement(I.default,{className:"page-block",counter:n.length>W?n.length:null,friendIds:(0,u.default)(n,W),hasMore:n.length>W,isOwnProfile:s,username:f.username})}))})))}}]),t}(_.default),q={loadCurrentAlbumPhotos:G.loadCurrentAlbumPhotos,loadUserAlbums:V.load};K.propTypes={currentUser:g.default.object,friendIds:g.default.arrayOf(g.default.number),isLoggedIn:g.default.bool,isOwnProfile:g.default.bool,isProfileAvailable:g.default.bool,knights:g.default.instanceOf(p.Seq),shouldRenderWatchButton:g.default.bool,user:g.default.shape({id:g.default.number})},K.defaultProps={shouldRenderWatchButton:!0};var z=(0,P.createModelKnightsSelector)("user"),X=(0,B.createUserFriendIdsSelector)("user"),Z=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=t.isOwnProfile,s=t.user,l=!(i||!s)&&(0,H.getIsBanned)(e,s.id),u=!(i||!s)&&(0,H.getIsGeoBanned)(e,s.id),c=s&&s.isDeleted,d=!!i||s&&("all"===s.showProfileTo||(0,H.getIsProfileAvailable)(e,s.id)),f=i?(0,B.getMyFriendIds)(e):X(e,t),p=i&&f.length>0,m=!i&&(0,B.getIsMyFriend)(e,s.id);return{currentUser:r,isBanned:l,isDeleted:c,isGeoBanned:u,isFriendsVisible:p,isLoggedIn:a&&!o,isProfileAvailable:d,isUserMyFriend:m,friendIds:f,knights:z(e,t)}},Q=function(e){return(0,y.bindActionCreators)(q,e)};t.default=(0,E.connect)(Z,Q)(K)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(46),u=r(l),c=n(11),d=r(c),f=n(13),p=r(f),m=n(26),g=r(m),h=n(14),v=r(h),E=n(48),y=r(E),b=n(80),_=r(b),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=n(15),T=r(P),A=n(1),C=r(A),I=n(0),w=r(I),N=n(2),R=n(4),M=n(9),L=n(3),k=r(L),D=n(39),U=r(D),j=n(8),F=r(j),B=n(10),H=r(B),V=n(17),G=r(V),x=n(390),W=r(x),Y=n(7),K=n(5),q=n(630),z=r(q),X=n(27),Z=n(44),Q=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.showBuyTokensModal=function(){r.props.showModal(K.MODAL_TYPES.USER_LEVELS)},r.renewMembershipClickHandler=function(){r.props.emitButtonEvent(K.APP_BUTTONS.PROFILE_RENEW)},r.renderHelpIcon=function(){var e=r.getUserLevel();return w.default.createElement("div",{className:"user-status-info"},w.default.createElement(z.default,{targetId:"user_status",level:e}),w.default.createElement("span",{className:"status-help",id:"user_status"},"?"))},r.renderUpgrade=function(){var e=r.props,t=e.isOwnProfile,n=e.user,a=n.isModel,o=n.isStudio,i=n.isGold,s=t&&!(a||o||i),l=t&&n.isGoldSubscriber&&!n.isRebillEnabled,u=s||l&&n.mayRenewRebill;return s||l?w.default.createElement("div",null,r.renderIf(l,w.default.createElement(G.default,{className:"user-status-until",elements:{strong:w.default.createElement("strong",null)},messageId:"profile.membershipTill",parameters:{date:(0,T.default)(n.subscriptionExpiresAt).format("MMMM D")}})),r.renderIf(u,w.default.createElement(H.default,{className:r.c({"user-status-renew":l,"user-status-upgrade":s}),size:"small",style:"primary",onClick:s?r.showBuyTokensModal:r.renewMembershipClickHandler},w.default.createElement(F.default,{img:s?"upgrade":"renew",size:14}),r.t(s?"profile.upgrade":"profile.renew")))):null},a=n,i(r,a)}return s(t,e),O(t,[{key:"renderBirthDate",value:function(){var e=this,t=this.props.user,n=(0,T.default)(t.birthDate),r=(0,T.default)(),a=r.diff(n,"years"),o="birth-date-"+t.id,i="birth-date-today-"+t.id,s=r.get("date")===n.get("date")&&r.get("month")===n.get("month");return w.default.createElement("div",{className:"birth-date-block"},w.default.createElement("div",{id:o},w.default.createElement(G.default,{choiceParameter:"age",messageId:"profile.yearsOld",parameters:{age:a}}),w.default.createElement(U.default,{isMobileRelative:!1,placement:"top",targetId:o},n.format("LL"))),this.renderIf(s,function(){return w.default.createElement("div",{id:i},w.default.createElement(F.default,{img:"birthday-cake",size:12}),w.default.createElement(U.default,{isMobileRelative:!1,placement:"top",targetId:i},e.t("profile.todayIsBirthDay",{modelName:t.username})))}))}},{key:"getUserLevel",value:function(){var e=this.props.user;return e.isGold?X.USER_LEVELS.GOLD:e.isGreen?X.USER_LEVELS.GREEN:e.isRegular?X.USER_LEVELS.REGULAR:null}},{key:"renderStatus",value:function(){var e=this.props,t=e.isOwnProfile,n=e.isStatusLevelVisible,r=this.getUserLevel();return w.default.createElement("div",{className:this.c("user-status",r)},w.default.createElement("span",{className:"user-status-name"},this.t("userLevels.status."+r)),this.renderIf(n,this.renderHelpIcon),this.renderIf(t,this.renderUpgrade))}},{key:"renderSocialNetworkLinks",value:function(){var e=this,t=this.props,n=t.user,r=n.isApprovedModel,o=n.amazonWishlist,i=t.socialLinks;if(!r)return null;var s=Object.assign({},{amazonWishlist:o},i),l=(0,u.default)(Object.keys(s),function(e,t){return s[t]?S({},e,a({},t,"https://"+s[t].replace(/^http(s?):\/\//,""))):e},{}),c=Object.keys(l);if(!c.length)return null;var f=(0,d.default)(c,function(t,n){return[w.default.createElement("a",{key:n,className:"field-link",rel:"nofollow",href:l[t],target:"_blank"},e.t("profile.info.detailsRead."+t)),n!==c.length-1?", ":""]});return w.default.createElement("div",{className:"field-row",key:"socialNetworks"},w.default.createElement("div",{className:"field-label"},this.t("profile.info.detailsRead.socialLinks"),":"),w.default.createElement("div",{className:"field-value"},f))}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,r=n.countries,a=n.regions,o=n.languages,i=t.user,s=i.isApprovedModel,l={},u=function(t){var n=i[t];(0,g.default)(n)?n.length&&(l[t]=n.map(function(t){return e.t("preferenceValues."+t)}).join(", ")):n&&(l[t]=e.t("preferenceValues."+n))};i.name&&(l.name=i.name),u("interestedIn");var c=i.country?(0,y.default)(r,{code:i.country}):null;if(c){var f=i.region&&a[i.country]?(0,y.default)(a[i.country],{code:i.region}):null,m=this.t("country."+c.code),h=m===c.code?c.title:m,E=(0,_.default)([h,f?f.title:null,i.city]).join(", ");l.from=w.default.createElement("span",{className:"country"},w.default.createElement(W.default,{country:i.country}),E)}return this.getUserLevel()&&(l.status=this.renderStatus()),i.languages&&i.languages.length&&(l.languages=o.filter(function(e){var t=e.code;return(0,v.default)(i.languages,t)}).map(function(t){var n=t.code;return e.t("language."+n)}).join(", ")),(0,T.default)(i.birthDate).isValid()&&(l.age=this.renderBirthDate()),u("bodyType"),u("specifics"),u("ethnicity"),u("hairColor"),u("eyeColor"),u("subculture"),this.renderIf(!(0,p.default)(l),function(){return w.default.createElement("div",{className:"details"},(0,d.default)(l,function(t,n){return"amazonWishlist"!==n||s?w.default.createElement("div",{className:"field-row",key:n,"data-component-name":"UserInfoDetails"},w.default.createElement("div",{className:"field-label"},e.t("profile.info.detailsRead."+n),":"),w.default.createElement("div",{className:"field-value"},t)):null}),e.renderSocialNetworkLinks())})}}]),t}(k.default),J={emitButtonEvent:M.emitButtonEvent,showModal:M.showModal};Q.propTypes=S({config:C.default.object.isRequired,isOwnProfile:C.default.bool,isStatusLevelVisible:C.default.bool,user:C.default.object.isRequired},(0,Y.getActionPropTypes)(J));var $=function(e,t){var n=t.user.id;return{socialLinks:(0,Z.getSocialLinksForUser)(e,n)}},ee=function(e){return(0,R.bindActionCreators)(J,e)};t.default=(0,N.connect)($,ee)(Q)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(85),u=r(l),c=n(49),d=r(c),f=n(14),p=r(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},v=n(1),E=r(v),y=n(0),b=r(y),_=n(137),S=r(_),O=n(399),P=r(O),T=(n(2),n(62)),A=n(285),C=n(3),I=r(C),w=n(10),N=r(w),R=n(199),M=r(R),L=n(8),k=r(L),D=n(22),U=r(D),j=n(21),F=0,B=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.sourceElement=null,r.sourceContainer=null,r.frameWrapper=null,r.moveStartPosition=null,r.pinchStartScale=null,r.propsUpdateToActionsMap=[{update:j.layoutHasChanged,action:function(){r.resizeHandler()}}],r.combinePositions=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{x:e.x+n*t.x,y:e.y+n*t.y}},r.updateFrameWrapperWidth=function(){var e=r,t=e.frameWrapper,n=e.sourceContainer;if(t&&n){var a=Math.min(n.offsetWidth,n.offsetHeight);t.style.height=a+"px",t.style.width=a+"px"}},r.frameWrapperRefHandler=function(e){r.frameWrapper=e},r.sourceContainerRefHandler=function(e){if(r.sourceContainer=e,e){var t=new P.default(e);t.get("pinch").set({enable:!0}),t.on("pinch pinchstart pinchend",r.pinchEventHandler),r.sourceContainerHammer=t}else r.sourceContainerHammer.stop(),r.sourceContainerHammer.destroy(),r.sourceContainerHammer=null},r.sourceElementRefHandler=function(e){r.sourceElement=S.default.findDOMNode(e)},r.pinchEventHandler=function(e){r.moveStartPosition=null;var t=r.pinchStartScale,n=e.scale,a=e.type;"pinchstart"===a?(r.pinchStartScale=r.scale,t=r.pinchStartScale):"pinchend"===a?r.pinchStartScale=null:"pinchcancel"===a&&(r.pinchStartScale=null,n=1);var o=t*n;r.zoomTo(parseInt(10*(o-1),10))},r.resizeHandler=function(){r.updateFrameWrapperWidth(),r.applySourceElementStyle(r.state.photoOffset)},r.cutModalCloseHandler=function(){r.props.onClose()},r.sourceElementWheelHandler=function(e){r.zoomBy(e.deltaY<0||e.deltaX<0?1:-1)},r.zoomInButtonClickHandler=function(){r.zoomBy(1)},r.zoomOutButtonClickHandler=function(){r.zoomBy(-1)},r.zoomBy=function(e){r.zoomTo(r.state.photoZoom+e)},r.zoomTo=function(e){var t=(0,T.limit)(e,F,r.maxZoomValue);r.setState({mayZoomIn:t<r.maxZoomValue,mayZoomOut:t>F,photoZoom:t},function(){r.applySourceElementStyle(r.state.photoOffset)})},r.stopEventPropagation=function(e){e.stopPropagation()},r.photoMoveEventsHandler=function(e){if(void 0===e.button||0===e.button){var t=e.clientX,n=e.clientY,a=e.targetTouches,o=e.type;e.preventDefault(),e.stopPropagation();var i=r.lastEventPosition;if(a&&a.length){var s=a[0];i={x:s.pageX,y:s.pageY}}else void 0!==t&&void 0!==n&&(i={x:t,y:n});r.lastEventPosition=i;var l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,p.default)(t,o)},u=l("mousedown","touchstart"),c=r.moveStartPosition&&l("mousemove","touchmove"),f=r.moveStartPosition&&l("mouseup","mouseleave","touchend","touchcancel");if(u||c||f){var m=r.state.photoOffset,g=r,h=g.moveStartPosition,v=g.combinePositions,E=i&&h?v(i,h,-1):{x:0,y:0},y=r.getOffsetLimited(v(m,E));u?r.moveStartPosition=i:c?(0,d.default)(m,y)||r.applySourceElementStyle(y):f&&(r.moveStartPosition=null,r.setState({photoOffset:y}))}}},r.saveClickHandler=function(){var e=r.resultImageDimensions,t=r.calcImageOffset(e),n=r.getCutBlob(e,t);r.props.onSave(n)},r.renderZoomControls=function(){var e=r.state,t=e.mayZoomIn,n=e.mayZoomOut;return b.default.createElement("div",{className:"photo-cut-zoom-controls"},r.renderIf(t,function(){return b.default.createElement("span",{className:"control zoom-in",onClick:r.zoomInButtonClickHandler,onMouseDown:r.stopEventPropagation,onMouseLeave:r.stopEventPropagation,onMouseMove:r.stopEventPropagation,onMouseUp:r.stopEventPropagation,onTouchCancel:r.stopEventPropagation,onTouchEnd:r.stopEventPropagation,onTouchMove:r.stopEventPropagation,onTouchStart:r.stopEventPropagation},b.default.createElement(k.default,{img:"zoom-in"}))}),r.renderIf(n,function(){return b.default.createElement("span",{className:"control zoom-out",onClick:r.zoomOutButtonClickHandler,onMouseDown:r.stopEventPropagation,onMouseLeave:r.stopEventPropagation,onMouseMove:r.stopEventPropagation,onMouseUp:r.stopEventPropagation,onTouchCancel:r.stopEventPropagation,onTouchEnd:r.stopEventPropagation,onTouchMove:r.stopEventPropagation,onTouchStart:r.stopEventPropagation},b.default.createElement(k.default,{img:"zoom-out"}))}))},r.renderCutModal=function(){var e=r.props.isPending,t=r.state.photoOffset;return b.default.createElement(M.default,{backgroundColor:null,className:r.c("user-photo-upload-cut-modal",{"is-pending":e}),isWrapperCloseDisabled:!0,minHeight:null,minWidth:null,onClose:r.cutModalCloseHandler,title:r.t("profile.photoUpload.popupTitle"),titlePosition:"outside"},r.renderPhotoCutHeader(),r.renderIf(e,function(){return b.default.createElement(U.default,{isCentered:!0,size:150})}),b.default.createElement("div",{className:"photo-cut-source-container",ref:r.sourceContainerRefHandler,onMouseDown:r.photoMoveEventsHandler,onMouseLeave:r.photoMoveEventsHandler,onMouseMove:r.photoMoveEventsHandler,onMouseUp:r.photoMoveEventsHandler,onTouchCancel:r.photoMoveEventsHandler,onTouchEnd:r.photoMoveEventsHandler,onTouchMove:r.photoMoveEventsHandler,onTouchStart:r.photoMoveEventsHandler,onWheel:r.sourceElementWheelHandler},b.default.createElement("div",{className:"photo-cut-source-wrapper"},r.renderSourceContainerElement({ref:r.sourceElementRefHandler,style:r.getSourceStyle(t)})),r.renderCutFrame(),r.renderZoomControls()),r.renderPhotoControls())},a=n,i(r,a)}return s(t,e),g(t,[{key:"getDefaultState",value:function(){return m({},h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{mayZoomIn:!1,mayZoomOut:0>F,photoOffset:{x:0,y:0},photoZoom:0})}},{key:"componentDidMount",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.updateFrameWrapperWidth()}},{key:"getCutBlob",value:function(e,t){return(0,A.getBlobFromDataUrl)((0,A.getCutDataUrl)({sourceImage:this.sourceElement,cutSize:Math.min(e.height,e.width),cutOffset:t,resultSize:this.maxAvatarSize}))}},{key:"calcImageOffset",value:function(e){var t=this.sourceDimensions,n=this.cutSize,r={x:(t.width-e.width)/2,y:(t.height-e.height)/2},o=Math.min.apply(Math,a((0,u.default)(e)))/n;return this.combinePositions(r,this.state.photoOffset,-o)}},{key:"applySourceElementStyle",value:function(e){var t=this.sourceElement;t&&Object.assign(t.style,this.getSourceStyle(this.getOffsetLimited(e)))}},{key:"getOffsetLimited",value:function(e){var t=e.x,n=e.y,r=this.offsetLimits,a=r.min,o=r.max;if(a.x>o.x||a.y>o.y)throw new RangeError("Incorrect offset limit: "+a.x+" < x < "+o.x+"; "+a.y+" < y < "+o.y);return{x:(0,T.limit)(t,a.x,o.x),y:(0,T.limit)(n,a.y,o.y)}}},{key:"getSourceStyle",value:function(e){var t={};if(this.sourceElement){var n=this.combinePositions(this.sourcePositionInitial,e);t={transform:"translate("+n.x+"px, "+n.y+"px)",height:this.sourceDimensionsScaled.height+"px"}}return t}},{key:"renderCutFrame",value:function(){return b.default.createElement("div",{className:"photo-cut-frame-wrapper",ref:this.frameWrapperRefHandler},b.default.createElement("div",{className:"photo-cut-filler"}),b.default.createElement("div",{className:"photo-cut-frame"}))}},{key:"renderPhotoControls",value:function(){return b.default.createElement("div",{className:"photo-cut-buttons"},b.default.createElement(N.default,{className:"save",onClick:this.saveClickHandler,style:"apply-alter"},this.t("button.savePhoto")),b.default.createElement(N.default,{className:"cancel",onClick:this.cutModalCloseHandler},this.t("button.cancel")))}},{key:"renderPhotoCutHeader",value:function(){return b.default.createElement("div",{className:"photo-cut-header"},b.default.createElement("div",{className:"title"},this.t("profile.photoCut.headerTitle")),b.default.createElement("div",{className:"text"},this.t("profile.photoCut.headerText")))}},{key:"render",value:function(){return this.renderCutModal()}},{key:"scale",get:function(){return 1+.1*this.state.photoZoom}},{key:"sourceSize",get:function(){var e=this.sourceDimensions,t=e.width,n=e.height;return Math.min(t,n)}},{key:"resultImageDimensions",get:function(){var e=parseInt(this.sourceSize/this.scale,10);return{width:e,height:e}}},{key:"minAvatarSize",get:function(){var e=this.props.settings;return Math.max(e.minHeight,e.minWidth)}},{key:"maxAvatarSize",get:function(){var e=this.props.settings;return Math.max(e.maxHeight,e.maxWidth)}},{key:"maxZoomValue",get:function(){return Math.floor(10*(this.sourceSize/this.minAvatarSize-1))}},{key:"sourceContainerDimensions",get:function(){var e=this.sourceContainer;return{width:e.offsetWidth,height:e.offsetHeight}}},{key:"sourceDimensions",get:function(){throw new Error("This is an abstract method, you have to define it yourself")}},{key:"cutSize",get:function(){var e=this.sourceContainerDimensions,t=e.width,n=e.height;return Math.min(t,n)}},{key:"sourceDimensionsScaled",get:function(){var e=this.sourceDimensions,t=e.width,n=e.height,r=this.scale*this.cutSize/this.sourceSize;return{width:t*r,height:n*r}}},{key:"offsetLimits",get:function(){var e=this.cutSize,t=this.sourceDimensionsScaled,n=t.width,r=t.height,a=Math.abs(n-e)/2,o=Math.abs(r-e)/2;return{min:{x:-a,y:-o},max:{x:a,y:o}}}},{key:"sourcePositionInitial",get:function(){var e=this.sourceContainerDimensions,t=this.sourceDimensionsScaled;return{x:(e.width-t.width)/2,y:(e.height-t.height)/2}}}]),t}(I.default);B.propTypes={settings:E.default.object,isPending:E.default.bool,onClose:E.default.func.isRequired,onSave:E.default.func.isRequired},t.default=B},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCounterpartMessages=t.hasPageOrConversationsLoaded=void 0;var a=n(49),o=r(a),i=n(84),s=r(i),l=n(32),u=n(16),c=function(e){return e.privateMessages.collection},d=function(e,t){return t};t.hasPageOrConversationsLoaded=function(e,t){var n=(0,s.default)(e,"isLoadingPage")&&e.isLoadingPage!==t.isLoadingPage,r=(0,s.default)(e,"conversations")&&!(0,o.default)(e.conversations,t.conversations);return n||r},t.getCounterpartMessages=(0,l.createSelector)([c,d],function(e,t){return(0,u.find)(e,function(e){var n=e.recipientId,r=e.senderId;return n===t||r===t}).sortBy(function(e){return e.id}).toArray()})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateMessagesSubscription=void 0;var s=n(35),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(3),g=r(m),h=n(380),v=r(h),E=n(39),y=r(E),b=t.PrivateMessagesSubscription=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.isSubscribed;return p.default.createElement("div",{className:"private-messages-subscription","data-component-name":"PrivateMessagesSubscription"},p.default.createElement("label",{className:"subscription-description"},this.t("privateMessages.notifyAboutNewMessages"),p.default.createElement("div",{className:"subscription-info"},p.default.createElement(y.default,{isMobileRelative:!1,placement:"top",targetId:"subscription_trigger"},this.t("privateMessages.notifyAboutNewMessagesHelp")),p.default.createElement("span",{className:"subscription-help",id:"subscription_trigger"},"?"))),p.default.createElement(v.default,{isChecked:e,onChange:this.props.onChange}))}}]),t}(g.default);b.propTypes={isSubscribed:d.default.bool},b.defaultProps={onChange:l.default},t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(2),u=n(4),c=n(9),d=n(10),f=r(d),p=n(5),m=p.MODAL_TYPES.DELETE_ACCOUNT,g=function(e,t){var n=e.showModal,r=t.i18n,a=function(e){e.preventDefault(),n(m)};return s.default.createElement("div",{className:"settings-show-delete-my-account","data-component-name":"DeleteMyAccountButton"},s.default.createElement(f.default,{size:"small",onClick:a},r.trans("settings.deleteMyAccount")))};g.propTypes={showModal:o.default.func.isRequired},g.contextTypes={i18n:o.default.object};var h=function(e){return(0,u.bindActionCreators)({showModal:c.showModal},e)};t.default=(0,l.connect)(null,h)(g)},,,,,function(e,t,n){n(654),n(676),n(684),n(694),n(697),n(700),n(703),e.exports=n(705)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(20),o=r(a),i=n(417),s=r(i),l=n(0),u=r(l),c=n(137),d=r(c),f=n(2),p=n(323),m=n(31),g=n(442),h=r(g),v=n(756),E=r(v),y=n(109),b=n(1102),_=r(b),S=n(79),O=n(5),P=n(235),T=r(P),A=n(67),C=n(221),I=r(C),w=n(1418),N=n(16),R=n(19),M=n(588),L=r(M),k=n(1419);o.default.config({warnings:!0,longStackTraces:!O.BROWSER_CAPABILITIES.ie11,cancellation:!0}),T.default.initializeApp(),(0,k.addDeveloperPanel)(),(0,A.addBodyCssClass)();var D=(0,s.default)(),U=(0,E.default)((0,N.getPreloadedState)(),D),j=new I.default(U),F=function(e){(0,A.removeBodyLoader)(),L.default.onRootComponentWillRender(),d.default.hydrate(u.default.createElement(f.Provider,{store:U},u.default.createElement(h.default,{i18n:j},u.default.createElement(m.ConnectedRouter,{history:D},(0,p.renderRoutes)(e)))),document.getElementById("body"),L.default.onRootComponentDidRender)};U.dispatch({type:y.APP_INIT}),U.dispatch((0,y.loadWithTranslations)()).then(function(e){var t=e.config;return U.dispatch((0,S.logReferrer)()),(0,R.redirectToSubDomainFromCookie)(t),t.analScriptUrl&&(0,w.InjectScript)(t.analScriptUrl),(0,w.InjectGizmoScript)(),F((0,_.default)(U)),null})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){e.forEach(function(e){return e.bindStore(t)})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=[g.default.withExtraArgument({Api:b.default,ApiError:E.ApiError,ServerError:E.ServerError,Socket:S.default}),(0,c.routerMiddleware)(t)].concat(o((0,u.default)(A)),o((0,u.default)(I)),o((0,u.default)(N)),o((0,u.default)(M)),o((0,u.default)(k)));"undefined"!=typeof window&&v.default.BUILD_ENV===v.default.ENV.DEVELOPMENT&&n.push(p.default);var r="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:d.compose,a=(0,d.createStore)(P.default,e,r(d.applyMiddleware.apply(void 0,o(n))));return i([b.default,S.default,U.default],a),a}Object.defineProperty(t,"__esModule",{value:!0});var l=n(11),u=a(l);t.default=s;var c=n(31),d=n(4),f=n(807),p=a(f),m=n(464),g=a(m),h=n(114),v=a(h),E=n(54),y=n(159),b=a(y),_=n(873),S=a(_),O=n(945),P=a(O),T=n(1041),A=r(T),C=n(577),I=r(C),w=n(1089),N=r(w),R=n(1091),M=r(R),L=n(1100),k=r(L),D=n(347),U=a(D)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(33),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(185),d=r(c),f=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.message=r[0],s}return i(t,e),u(t,[{key:"toJSON",value:function(){return(0,l.default)(this,["code","message","details"])}}]),t}(d.default);f.prototype.name="ApiError",t.default=f},,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(185),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(e){function t(){var e;r(this,t);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return s.message=o[0],s}return o(t,e),t}(s.default);l.prototype.name="NetworkError",t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(185),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(e){function t(){var e;r(this,t);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return s.message=o[0]||"Server Error",s}return o(t,e),t}(s.default);l.prototype.name="ServerError",t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(33),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(185),d=r(c),f=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.message=e,r.details=n,r}return i(t,e),u(t,[{key:"toJSON",value:function(){return(0,l.default)(this,["message","details"])}}]),t}(d.default);f.prototype.name="ValidationError",t.default=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.bindLoggerMethods=void 0;var o=n(46),i=r(o),s=n(30),l=r(s),u=n(868),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(29),p=r(f);t.bindLoggerMethods=(0,c.default)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.prefix,o=void 0===r?"":r,s=n.postfix,u=void 0===s?"":s;return(0,i.default)(p.default,function(n,r,i){var s=o?o+" ":"",c=e?e+".":"",f=u?" "+u+":":":";return d({},n,a({},i,(0,l.default)(r,""+s+c+t+f)))},{})})},,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(79),s=n(916),l=r(s),u=n(944),c=r(u),d=function(){function e(){a(this,e),this.isSocket2=!1}return o(e,[{key:"init",value:function(){var e=this.store.getState().config.data.mustUseComet2;this.isSocket2=e,this.adapter=e?new c.default:new l.default,this.adapter.bindStore(this.store),this.adapter.init()}},{key:"reconnect",value:function(){this.isSocket2?this.adapter.reconnect():this.store.dispatch((0,i.updateSocketReady)(!0))}},{key:"bindStore",value:function(e){this.store=e}}]),e}();t.default=new d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(541),i=r(o),s=n(11),l=r(s),u=n(70),c=r(u),d=n(6),f=r(d),p=n(96),m=r(p),g=n(36),h=r(g),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(20),b=r(y),_=n(920),S=r(_),O=n(79),P=n(5),T=n(29),A=r(T),C=n(34),I=1e4,w=6e4,N={forceNew:!0,reconnection:!0,reconnectionAttempts:60,reconnectionDelay:1e3,reconnectionDelayMax:6e4},R=function(){function e(){var t=this;a(this,e),this.addEventHandler=function(e,n){t.connection?t.connection.on(e,n):A.default.warn("Socket.addEventHandler() no connection",{eventName:e})},this.init=(0,h.default)(function(){return t.connection||(t.connection=S.default.connect((0,f.default)(document,"location.origin"),v({path:P.COMET_PATH},N)),(0,m.default)(t.handlers,function(e,n){return t.addEventHandler(n,e)}),A.default.info("Socket.init()",{connection:t.connection})),t},I,{leading:!0,maxWait:w}),this.invokeWhenSubscribed=function(e,n,r){r.invokeImmediately&&t.notificationHandlers[e]?n():(t.subscriptionCallbacks[e]||(t.subscriptionCallbacks[e]=[]),t.subscriptionCallbacks[e].push(n))},this.notificationEventHandler=function(e){var n=e.params,r=e.subscriptionKey;A.default.info('Socket event received "'+r+'"',n),(0,m.default)(t.notificationHandlers[r],function(e){return e(n,r)})},this.authEventHandler=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.store.getState(),r=n.auth;n.signUp.isPending||r.isLoggingIn||r.isLoggingOut||t.store.dispatch((0,C.updateAuthThroughSocket)(e))},this.refreshEventHandler=function(){window.location.reload()},this.isConnected=!1,this.connection=null,this.notificationHandlers={},this.subscriptionCallbacks={},this.eventQueue=[],this.createSocketEventHandlers(),this.isReady=!1}return E(e,[{key:"bindStore",value:function(e){this.store=e}},{key:"createSocketEventHandlers",value:function(){var e=this;this.handlers={connect:function(){e.logEvent("connect"),e.emitEventQueue(),e.addEventHandler("notification",e.notificationEventHandler.bind(e)),e.addEventHandler("auth",e.authEventHandler),e.addEventHandler("refresh",e.refreshEventHandler),e.resubscribe(),e.isReady=!0,e.store.dispatch((0,O.updateSocketReady)(!0))},disconnect:function(){e.logEvent("disconnect").reconnect()},connect_timeout:function(){e.logEvent("connect_timeout")},connect_error:function(){e.logEvent("connect_error")},reconnect:function(t){e.logEvent("reconnect",{attemptNumber:t})},reconnecting:function(t){e.logEvent("reconnecting",{attemptNumber:t})},reconnect_error:function(){e.logEvent("reconnect_error")},reconnect_failed:function(){e.logEvent("reconnect_failed").reconnect()},error:function(t){"TransportError"===t.type&&400===t.description?(A.default.error("Socket [error]: TransportError 400",{error:t}),e.reconnect()):e.logEvent("error",{error:t})}}}},{key:"logEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A.default.info("Socket ["+e+"]",v({eventQueue:this.eventQueue},t)),this}},{key:"reconnect",value:function(){return A.default.info("Socket.reconnect()",{eventQueue:this.eventQueue}),this.store.dispatch((0,O.updateSocketReady)(!1)),this.isReady=!1,this.connection&&this.connection.disconnect(),this.connection=null,b.default.delay(I).then(this.init)}},{key:"emitSubscribed",value:function(e){var t=this;this.emit("subscribe",{subscriptionKey:e},!1),setTimeout(function(){(0,m.default)(t.subscriptionCallbacks[e],function(e){return e()}),t.subscriptionCallbacks[e]=null},1500)}},{key:"emit",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.connection?(A.default.info("Socket event emitted:",e,t),this.eventQueue.length&&A.default.warn("Socket.emit() non-empty queue",{currentEventName:e,queuedEventNames:(0,l.default)(this.eventQueue,"eventName")}),this.connection.emit(e,t)):n&&(A.default.info("Socket event queued:",e,t),this.eventQueue.push({eventName:e,payload:t})),this}},{key:"emitEventQueue",value:function(){for(A.default.info("Socket.emitEventQueue() queue length",(0,i.default)(this.eventQueue));this.connection&&this.eventQueue.length>0;){var e=this.eventQueue.pop(),t=e.eventName,n=e.payload;A.default.info("Socket event emitted (from queue):",t,n),this.connection.emit(t,n)}return this}},{key:"subscribe",value:function(e,t){return this.notificationHandlers[e]||(this.notificationHandlers[e]=[]),this.notificationHandlers[e].push(t),this.isReady&&this.emitSubscribed(e),this}},{key:"unsubscribe",value:function(e,t){if(this.notificationHandlers[e]){if(t){var n=this.notificationHandlers[e].indexOf(t);n>=0&&this.notificationHandlers[e].splice(n,1)}else this.notificationHandlers[e]=[];0===this.notificationHandlers[e].length&&this.emit("unsubscribe",{subscriptionKey:e})}return this}},{key:"resubscribe",value:function(){var e=this;return A.default.info("Socket.resubscribe() handlers count",(0,i.default)(this.notificationHandlers)),(0,m.default)((0,c.default)(this.notificationHandlers),function(t){return e.emitSubscribed(t)}),this}},{key:"ready",value:function(){return this.readyPromise}},{key:"isReady",get:function(){return this.isConnected},set:function(e){var t=this;if(this.isConnected=e,e)return void this.readyPromiseResolve();this.readyPromise&&this.readyPromise.isPending()||(this.readyPromise=new b.default(function(e){t.readyPromiseResolve=e}))}}]),e}();t.default=R},,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(167),s=r(i),l=n(124),u=r(l),c=n(70),d=r(c),f=n(115),p=r(f),m=n(14),g=r(m),h=n(96),v=r(h),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=n(20),_=r(b),S=n(79),O=n(114),P=r(O),T=n(106),A=r(T),C=n(282),I=n(34),w={CLOSE_NORMAL:1e3},N=w.CLOSE_NORMAL,R={reconnection:!0,maxReconnectionAttempts:60,initReconnectionDelay:1e3},M=function(){function e(){var t=this;o(this,e),this.connect=function(){var e=t.store.getState(),n=(0,C.getCometUrl)(e);return t.connection=new WebSocket(n),t.connection.onopen=t.onOpen,t.connection.onmessage=t.onMessage,t.connection.onerror=t.onError,t.connection.onclose=t.onClose,t.logEvent("Socket connect",n),t},this.defaultSubscriptions={auth:function(e){var n=t.store.getState(),r=n.auth;n.signUp.isPending||r.isLoggingIn||r.isLoggingOut||t.store.dispatch((0,I.updateAuthThroughSocket)(e))},refresh:function(){window.location.refresh()}},this.onMessage=function(e){var n=void 0;try{n=JSON.parse(e.data)}catch(n){t.logEvent("JSON parse error",e.data)}var r=n,a=r.id,o=r.subscriptionKey,i=r.params;t.updatePendingSubscriptionsRequestsMap(a),(0,v.default)(t.subscriptionHandlers[o],function(e,t){return e(i,t)})},this.onConnectedSubscription=function(e){var n=e.clientId;t.clientId=n,t.logEvent("ClientId received: "+n),t.isConnected=!0,t.emitQueues(),t.shouldResubscribe&&(t.resubscribe(),t.shouldResubscribe=!1),t.emitSubscribeQueues(),(0,v.default)(t.defaultSubscriptions,function(e,n){return t.subscribe(n,e)}),t.logEvent("Socket ready"),t.store.dispatch((0,S.updateSocketReady)(!0))},this.onError=function(e){t.logEvent("Connection error",e)},this.onClose=function(e){var n=e.code;t.logEvent("Connection onClose",n),t.isConnected=!1,t.store.dispatch((0,S.updateSocketReady)(!1)),(0,g.default)([N],n)||t.reconnectAfterFail()},this.reconnectAfterFail=function(){if(t.failReconnectionAttempts>R.maxReconnectionAttempts)return void t.logEvent("Stop reconnection tries due max reconnection attempts were made");t.failReconnectionAttempts+=1;var e=Math.pow(2,t.failReconnectionAttempts)*R.initReconnectionDelay;t.logEvent("Reconnect attempt #"+t.failReconnectionAttempts+" will be in "+e+" ms",t.subscriptionHandlers),_.default.delay(e).then(function(){t.shouldResubscribe=!0,t.connect()})},this.reconnect=function(){t.logEvent("Reconnect"),t.close().then(function(){t.shouldResubscribe=!0,t.connect()})},this.close=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return t.isConnected=!1,new _.default(function(n){if(!t.connection)return void n();var r=t.connection.onclose;t.connection.onclose=function(e){r(e),n()},t.connection.close(e)})},this.updatePendingSubscriptionsRequestsMap=function(e){if(t.pendingSubscriptionsRequestsMap.has(e)){var n=t.pendingSubscriptionsRequestsMap.get(e);t.invokeSubscribedCallbacks(n),t.pendingSubscriptionsRequestsMap.delete(e)}},this.resubscribe=function(){var e=["connected"].concat(a((0,d.default)(t.defaultSubscriptions))),n=(0,u.default)(s.default.apply(void 0,[(0,d.default)(t.subscriptionHandlers)].concat([].concat(a(e),a(t.eventSubscribeQueues)))));n.length&&(t.logEvent("Resubscribe to "+(0,d.default)(n).length,n),(0,v.default)(n,function(e){return t.emitSubscribe(e)}))},this.emitQueues=function(){for(t.logEvent("Emit "+t.eventQueues.length+" queues messages",t.eventQueues);t.isConnected&&t.eventQueues.length>0;){var e=t.eventQueues.pop();t.emit(e)}return t},this.emitSubscribeQueues=function(){for(t.logEvent("Emit "+t.eventSubscribeQueues.length+" subscribe queues messages",t.eventSubscribeQueues),t.eventSubscribeQueues=(0,u.default)(t.eventSubscribeQueues);t.isConnected&&t.eventSubscribeQueues.length>0;){var e=t.eventSubscribeQueues.pop();t.emitSubscribe(e)}return t},this.onOpen=function(){t.logEvent("Open connection"),t.failReconnectionAttempts=0,t.subscribe("connected",t.onConnectedSubscription,!1)},this.subscribe=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.subscriptionHandlers[e]||(t.subscriptionHandlers[e]=[],r&&t.emitSubscribe(e)),(0,g.default)(t.subscriptionHandlers[e],n)||t.subscriptionHandlers[e].push(n),t},this.unsubscribe=function(e,n){if(t.subscriptionHandlers[e]){if(n){var r=t.subscriptionHandlers[e].indexOf(n);r>=0&&t.subscriptionHandlers[e].splice(r,1)}else t.subscriptionHandlers[e]=[];0===t.subscriptionHandlers[e].length&&(delete t.subscriptionHandlers[e],t.emitUnsubscribe(e))}return t},this.invokeWhenSubscribed=function(e,n,r){return r.invokeImmediately&&t.subscriptionHandlers[e]?(n(),t):(t.subscriptionDelayedCallbacks[e]||(t.subscriptionDelayedCallbacks[e]=[]),t.subscriptionDelayedCallbacks[e].push(n),t.logEvent("Add to delayed callbacks",e),t)},this.invokeSubscribedCallbacks=function(e){return t.subscriptionDelayedCallbacks[e]?(t.logEvent("Invoke subscribed callbacks",e),(0,v.default)(t.subscriptionDelayedCallbacks[e],function(e){return e()}),delete t.subscriptionDelayedCallbacks[e],t):t},this.isConnected=!1,this.connection=null,this.clientId=null,this.failReconnectionAttempts=0,this.shouldResubscribe=!1,this.subscriptionHandlers={},this.eventQueues=[],this.eventSubscribeQueues=[],this.subscriptionDelayedCallbacks={},this.pendingSubscriptionsRequestsMap=new Map}return y(e,[{key:"init",value:function(){return this.logEvent("Socket init"),this.connect(),this}},{key:"bindStore",value:function(e){this.store=e}},{key:"emit",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.isConnected)return this.logEvent("Emit while connection is connecting",e),t&&(this.logEvent("Adding to queue while connection is connecting",e),this.eventQueues.push(e)),this;var n=e.requestId,r=void 0===n?Date.now().toString():n,a=E({id:r},(0,p.default)(e,"requestId"));return this.connection.send(JSON.stringify(a)),this}},{key:"emitSubscribe",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.isConnected)return t&&(this.logEvent("Add subscribe to queue'"+e+"', clientId = "+this.clientId),this.eventSubscribeQueues.push(e)),this;var n=Date.now().toString()+"-sub-"+e,r={method:"PUT",requestId:n,url:"/front/clients/"+this.clientId+"/subscriptions/"+e};return this.logEvent("EmitSubscribe '"+e+"', clientId = "+this.clientId),this.pendingSubscriptionsRequestsMap.set(n,e),this.emit(r),this}},{key:"emitUnsubscribe",value:function(e){this.logEvent("EmitUnsubscribe '"+e+"'");var t=Date.now().toString()+"-unsub-"+e,n={method:"DELETE",requestId:t,url:"/front/clients/"+this.clientId+"/subscriptions/"+e};return this.emit(n),this}},{key:"logEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(P.default.BUILD_ENV!==P.default.ENV.PRODUCTION||A.default.has("isConsoleDebugEnabled"))&&console.warn("[Socket2] "+e,t)}}]),e}();t.default=M},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(4),i=n(31),s=n(946),l=r(s),u=n(1001),c=r(u),d=n(1013),f=r(d),p=n(1015),m=r(p),g=n(1017),h=r(g),v=(0,o.combineReducers)(a({},l,c,f,m,h,{routing:i.routerReducer}));t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(947);Object.defineProperty(t,"broadcast",{enumerable:!0,get:function(){return r(a).default}});var o=n(948);Object.defineProperty(t,"camMembers",{enumerable:!0,get:function(){return r(o).default}});var i=n(949);Object.defineProperty(t,"documents",{enumerable:!0,get:function(){return r(i).default}});var s=n(554);Object.defineProperty(t,"favorites",{enumerable:!0,get:function(){return r(s).default}});var l=n(952);Object.defineProperty(t,"lottery",{enumerable:!0,get:function(){return r(l).default}});var u=n(953);Object.defineProperty(t,"mobileApp",{enumerable:!0,get:function(){return r(u).default}});var c=n(985);Object.defineProperty(t,"modelChat",{enumerable:!0,get:function(){return r(c).default}});var d=n(986);Object.defineProperty(t,"modelFilter",{enumerable:!0,get:function(){return r(d).default}});var f=n(987);Object.defineProperty(t,"modelKnights",{enumerable:!0,get:function(){return r(f).default}});var p=n(988);Object.defineProperty(t,"modelNews",{enumerable:!0,get:function(){return r(p).default}});var m=n(989);Object.defineProperty(t,"modelSearch",{enumerable:!0,get:function(){return r(m).default}});var g=n(990);Object.defineProperty(t,"modelsOnline",{enumerable:!0,get:function(){return r(g).default}});var h=n(991);Object.defineProperty(t,"modelsTop",{enumerable:!0,get:function(){return r(h).default}});var v=n(992);Object.defineProperty(t,"paymentsHistory",{enumerable:!0,get:function(){return r(v).default}});var E=n(993);Object.defineProperty(t,"paymentsSettings",{enumerable:!0,get:function(){return r(E).default}});var y=n(994);Object.defineProperty(t,"persons",{enumerable:!0,get:function(){return r(y).default}});var b=n(995);Object.defineProperty(t,"studioEarnings",{enumerable:!0,get:function(){return r(b).default}});var _=n(996);Object.defineProperty(t,"studioModels",{enumerable:!0,get:function(){return r(_).default}});var S=n(997);Object.defineProperty(t,"subscriptions",{enumerable:!0,get:function(){return r(S).default}});var O=n(998);Object.defineProperty(t,"tokensHistory",{enumerable:!0,get:function(){return r(O).default}});var P=n(999);Object.defineProperty(t,"thirdPartyApplication",{enumerable:!0,get:function(){return r(P).default}});var T=n(1e3);Object.defineProperty(t,"viewCam",{enumerable:!0,get:function(){return r(T).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g.ADD_MODEL_WARNINGS:return u({},e,{modelWarnings:y(e,t.data.modelWarnings)});case g.BROADCAST_CONFIG_UPDATE:return u({},e,{broadcastConfig:t.data.broadcastConfig});case g.CAM_DATA_LOAD_SUCCESS:return u({},e,{broadcastConfig:b(t.data.broadcastConfig),goalData:t.data.goal,model:t.data.model,modelToken:t.data.modelToken,streamName:t.data.streamName,userStreamName:t.data.userStreamName,privateRequest:t.data.privateRequest||e.privateRequest,show:t.data.show,counterpart:t.data.counterpart});case g.CAM_RESET:return u({},e,{isCamActive:!1});case g.CAM_START:return u({},e,{isCamActive:!0});case g.COUNTERPART_FIELDS_UPDATE:return u({},e,{counterpart:t.data.counterpart});case g.FEEDBACK_UPDATE:return u({},e,{isFeedbackUpdated:!0});case g.GOAL_SET_SUCCESS:return u({},e,{goalData:t.data.goal});case g.INIT:return u({},e,{isBroadcastingPageOpen:!0,isAlreadyBroadcasting:!1,model:t.data.model});case g.INIT_FAIL:return u({},e,{isAlreadyBroadcasting:!0});case h.LOGOUT_SUCCESS:return u({},E);case g.MIRRORED_CHANGE:return u({},e,{isBroadcastMirrored:t.data.isBroadcastMirrored});case g.MODEL_FIELDS_UPDATE:return u({},e,{model:t.data.model});case g.PREPARE_CAM_START:return u({},e,{isStartBroadcastingUpdate:!1});case g.PREPARE_CAM_SUCCESS:return u({},e,{isStartBroadcastingUpdate:!0});case g.PRIVATE_REQUEST_UPDATE:return u({},e,{privateRequest:t.data.privateRequest});case g.PRIVATE_START:return u({},e,{counterpart:t.data.counterpart,streamName:t.data.streamName,userStreamName:t.data.userStreamName,privateRequest:E.privateRequest,privateStartedAt:t.data.privateStartedAt,show:t.data.show});case g.PRIVATE_STOP:return u({},e,{counterpart:E.counterpart,privateStartedAt:E.privateStartedAt});case g.REMOVE_MODEL_WARNING:return u({},e,{modelWarnings:e.modelWarnings.delete(t.data.warningId)});case g.RESET:return u({},e,{isBroadcastingPageOpen:!1});case g.VIRTUAL_PRIVATE_START:return u({},e,{privateStartedAt:t.data.privateStartedAt,show:t.data.show,streamName:t.data.streamName});case g.VIRTUAL_PRIVATE_STOP:return u({},e,{show:null});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=n(13),i=r(o),s=n(96),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var c=n(18),d=r(c),f=n(5),p=n(56),m=r(p),g=n(81),h=n(34),v={flashFps:30,flashWidth:640,flashHeight:480},E=t.initialState={broadcastConfig:v,counterpart:{id:0,broadcastServer:""},goalData:{description:"",goal:0,left:0,spent:0},isAlreadyBroadcasting:!1,isBroadcastingPageOpen:!1,isBroadcastMirrored:m.default.get("isBroadcastMirrored",!1),isCamActive:!1,isFeedbackUpdated:m.default.get("isFeedbackUpdated",!1),isStartBroadcastingUpdate:!1,model:null,modelToken:"",modelWarnings:new d.default.OrderedMap,streamName:"",userStreamName:"",playerVolume:m.default.get("playerVolume",f.DEFAULT_VOLUME_MODEL),privateRequest:{proposeMode:null,proposeTimer:null,user:null},privateStartedAt:null,show:null},y=function(e,t){return e.modelWarnings.withMutations(function(e){(0,l.default)(t,function(t){e.set(t.id,t)})})},b=function(e){return(0,i.default)(e)?v:e}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.ADD:return a({},e,u(e,t.data),{camMembersIds:e.camMembersIds.union(t.data.camMembersIds)});case s.REMOVE:return a({},e,{camMembersIds:e.camMembersIds.subtract(t.data)});case s.REPLACE:return a({},e,u(e,t.data),{camMembersIds:i.default.OrderedSet(t.data.camMembersIds)});case s.UPDATE_COUNTERS:return a({},e,u(e,t.data));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(356),l=t.initialState={camMembersIds:i.default.OrderedSet(),guests:0,spies:0,invisibles:0},u=function(e,t){var n=t.guests,r=void 0===n?e.guests:n,a=t.invisibles,o=void 0===a?e.invisibles:a,i=t.spies;return{guests:r,invisibles:o,spies:void 0===i?e.spies:i}}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.DOCUMENTS_LOAD_SUCCESS:return a({},(0,o.save)(e,t.data.documents));case i.DOCUMENTS_CREATE_START:return a({},e,{draftDocuments:t.data.draftDocuments,isUpdating:!0});case i.DOCUMENTS_CREATE_SUCCESS:return a({},(0,o.save)(e,t.data.documents),{draftDocuments:null});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(553),s=t.initialState=a({},(0,o.createCollection)(),{draftDocuments:null,isUpdating:!1})},,,function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.CLAIM_SUCCESS:case o.PARTICIPATE_SUCCESS:return a({},e,t.data.user);case o.LOAD_SUCCESS:return a({},i,t.data.lottery);case o.LOAD_FAIL:return a({},i);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(366),i=t.initialState={status:"off",applyEndedAt:null,claimEndedAt:null,user:null,winners:[]}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.LOAD_START:return a({},e,{isPending:!0});case o.LOAD_SUCCESS:case o.LOAD_ERROR:return a({},e,t.data,{isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(556),i=t.initialState={isPending:!1,error:null,qrCodeHash:null}},,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m.LOAD_START:return f({},e,{isLoading:!0});case m.LOAD_SUCCESS:return f({},e,E(e,t.data),{inputText:"",loadError:null,sendError:null,isLoading:!1,isSending:!1});case m.LOAD_FAIL:return f({},e,{loadError:t.data.error,isLoading:!1});case m.SEND_START:return f({},e,{sendError:null,inputText:t.data.inputText,isSending:!0});case m.SEND_SUCCESS:return f({},e,{sendError:null,inputText:"",isSending:!1});case m.SEND_FAIL:return f({},e,{sendError:t.data.error,isSending:!1});case m.ADD_MESSAGE:return f({},e,v(e,t.data));case m.SET_INPUT_TEXT:return f({},e,{inputText:t.data.inputText});case m.SET_INPUT_FOCUS:return f({},e,{modelChatFocusToken:Symbol("modelChatFocusToken")});case m.REMOVE_MESSAGES:return f({},e,y(e,t.data));case m.INIT:return t.data.modelId!==e.modelId?f({},g,{modelId:t.data.modelId}):e;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addMessages=t.initialState=void 0;var i=n(46),s=r(i),l=n(14),u=r(l),c=n(13),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var p=n(16),m=n(99),g=t.initialState={messages:{server:f({},(0,p.createCollection)({isOrdered:!1})),console:f({},(0,p.createCollection)({isOrdered:!1})),system:f({},(0,p.createCollection)({isOrdered:!1})),app:f({},(0,p.createCollection)({isOrdered:!1}))},modelChatFocusToken:Symbol("modelChatFocusToken"),modelId:null,inputText:"",loadError:null,sendError:null,isLoading:!1,isSending:!1},h=function(e){return(0,p.count)(e.collection)>100?f({},e,{collection:(0,p.findAll)(e.collection,["createdAt","id"]).takeLast(100)}):e},v=t.addMessages=function(e,t){var n=t.messages,r=t.type;return(0,d.default)(n)?{messages:e.messages}:{messages:f({},e.messages,a({},r,(0,p.save)(h(e.messages[r]),n)))}},E=function(e,t){var n=t.messages,r=t.type;return{messages:f({},e.messages,a({},r,(0,p.replace)(h(e.messages[r]),n)))}},y=function(e,t){var n=t.types,r=t.subtypes;return{messages:f({},e.messages,(0,s.default)(n,function(t,o){return f({},t,a({},o,(0,u.default)(n,o)?(0,p.delBy)(e.messages[o],function(e){var t=e.details;return!r||(0,u.default)(r,t.subtype)}):e.messages[o]))},{}))}}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.SAVE_FILTER_PARAMS:case s.SAVE_MODEL_SORT_TYPE:return a({},e,t.data);case s.COLLAPSE_SEARCH_FORM:return a({},e,{isExpandedSearchForm:!1});case s.EXPAND_SEARCH_FORM:return a({},e,{isExpandedSearchForm:!0});case s.SAVE_API_FILTER_PARAMS:return a({},e,t.data);case s.SAVE_ACTIVE_FILTER_PARAMS:return a({},e,{activeModelListParams:t.data.activeModelListParams,isNextModelAvailable:!0,isPrevModelAvailable:!0});case s.RESET_LIMIT:return a({},e,{limit:d.limit,initLimit:0});case l.NEXT_PREV_MODEL_NOT_AVAILABLE:return a({},e,t.data);case s.RESET_MODEL_SORT_TYPE:return a({},e,{sortBy:(0,c.getDefaultModelSortingType)()});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(63),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(118),l=n(42),u=n(12),c=n(45),d=t.initialState=a({callbackPage:"",initLimit:0,isNextModelAvailable:!0,isExpandedSearchForm:!1,isPrevModelAvailable:!0,limit:"undefined"==typeof window?u.SSR_VISIBLE_MODELS_COUNT:2,offset:0,tagAlias:"",tagKey:"",searchString:"",sortBy:(0,c.getDefaultModelSortingType)(),activeModelListParams:a({tagAlias:"",tagKey:"",searchString:""},i.default.get("activeModelListParams",{}))},i.default.get("modelListParams",{}))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.LOAD_START:return c({},e,{isPending:!0});case f.LOAD_SUCCESS:return c({},(0,d.save)(e,t.data),{isPending:!1});case f.LOAD_FAIL:return c({},e,{isPending:!1});case f.ADD:return c({},(0,d.save)(e,g(e,t.data)),{isPending:!1});case f.DELETE:return c({},(0,d.save)(e,h(e,t.data)),{isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n(167),s=r(i),l=n(6),u=r(l),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var d=n(16),f=n(162),p=t.initialState=c({},(0,d.createCollection)({itemKey:"modelId"}),{isPending:!1}),m=function(e,t){return(0,u.default)((0,d.findById)(e.collection,t),"userIds",[])},g=function(e,t){var n=t.modelId,r=t.userId;return{modelId:n,userIds:[].concat(a(m(e,n)),[r])}},h=function(e,t){var n=t.modelId,r=t.userId;return{modelId:n,userIds:(0,s.default)([].concat(a(m(e,n))),r)}}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{error:null,isPending:!0});case i.LOAD_SUCCESS:return a({},(0,o.save)(e,t.data.news),{error:null,isPending:!1});case i.LOAD_FAIL:return a({},e,{error:t.data.error,isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(569),s=t.initialState=a({},(0,o.createCollection)(),{error:null,isPending:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.SEARCH_START:return a({},e,{isPending:!0});case i.SEARCH_SUCCESS:return a({},(0,o.replace)(e,t.data.models),{isPending:!1});case i.SEARCH_FAIL:return a({},e,{isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(292),s=t.initialState=a({},(0,o.createCollection)(),{isPending:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case l.CHANGE_TAGS_PREFERENCE:return a({},e,{currentTagsPreference:t.data.preference});case l.LOAD_START:return a({},e,{isPending:!0});case l.LOAD_HOVER_PLAYER_DATA:return a({},e,{hoverPlayerData:t.data.hoverPlayerData});case l.LOAD_SUCCESS:return a({},e,(0,o.replace)(e,t.data.models),{filteredCount:t.data.filteredCount,isPending:!1,isInitialLoad:!1,liveCount:t.data.liveCount,liveTagGroups:t.data.liveTagGroups,liveTagDetails:t.data.liveTagDetails,shouldShowStubItems:!1});case l.LOAD_FAIL:return a({},e,{isInitialLoad:!1,isPending:!1});case l.SET_LIVE_COUNT:return a({},e,{liveCount:t.data.liveCount});case l.SHOW_STUB_ITEMS:return a({},e,{shouldShowStubItems:!0});case l.CLEAR_HOVER_PLAYER_DATA:return a({},e,{hoverPlayerData:u.hoverPlayerData});case l.CLEAR_MODELS:return a({},e,{collection:e.collection.clear()});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(63),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(87),u=t.initialState=a({},(0,o.createCollection)(),{hoverPlayerData:{},currentTagsPreference:s.default.get("currentTagsPreference")||"F",filteredCount:0,isPending:!1,isInitialLoad:!0,liveCount:0,liveTagGroups:[],liveTagDetails:[],shouldShowStubItems:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case l.LOAD_START:return a({},e,{contestType:t.data.contestType,isPending:!0,loadError:null});case l.LOAD_SUCCESS:return a({},e,c(t.data),{isPending:!1});case l.LOAD_FAIL:return a({},e,{isPending:!1,loadError:t.error});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(16),l=n(570),u=t.initialState={contestType:null,isPending:!0,loadError:null,prizes:i.default.OrderedMap(),tops:i.default.OrderedMap(),winnerIds:i.default.OrderedMap()},c=function(e){return{prizes:i.default.OrderedMap((0,s.plainArrayToObject)(e.prizes)),tops:i.default.OrderedMap((0,s.plainArrayToObject)(e.tops)),winnerIds:i.default.OrderedMap((0,s.plainArrayToObject)(e.winnerIds))}}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{error:null,isPending:!0});case i.LOAD_SUCCESS:return a({},(0,o.replace)(e,t.data.transactions),{error:null,isPending:!1,transactionsSum:t.data.transactionsSum});case i.LOAD_FAIL:return a({},e,{error:t.data.error,isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(571),s=t.initialState=a({},(0,o.createCollection)(),{error:null,isPending:!1,transactionsSum:{tokens:0,usd:0}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=[],n=(0,u.default)(e,"options.min"),r=(0,u.default)(e,"options.countries");return(0,p.default)((0,u.default)(e,"options.methods"),function(e){t.push({name:e.name,title:e.title,fields:(0,u.default)(v,e.name),min:(0,d.default)(n,function(t){return t>=e.min})})}),{methods:t,countries:r}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g.LOAD_START:return m({},e,{error:null,isLoading:!0});case g.LOAD_SUCCESS:var n=t.data,r=n.paymentsSettings,o=r.optionsConfirmed,i=r.optionsPending,s=n.availablePayoutSettings;return m({},e,{availableSettings:s?a(s):e.availableSettings,optionsConfirmed:o,optionsPending:i,error:null,isLoading:!1});case g.LOAD_FAIL:return m({},e,{error:t.data.error,isLoading:!1});case g.SAVE_START:return m({},e,{error:null,isSaving:!0});case g.SAVE_SUCCESS:var l=t.data,u=l.optionsConfirmed,c=l.optionsPending;return m({},e,{optionsConfirmed:u,optionsPending:c,error:null,isSaving:!0});case g.SAVE_FAIL:return m({},e,{error:t.data.error,isSaving:!1});case g.CONFIRM_START:return m({},e,{error:null,isConfirming:!1,isSuccessfullyConfirmed:!1});case g.CONFIRM_SUCCESS:return m({},e,{error:null,isConfirming:!1,isSuccessfullyConfirmed:!0});case g.CONFIRM_FAIL:return m({},e,{error:t.data.error,isConfirming:!1,isSuccessfullyConfirmed:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.paymentMethodFields=t.initialState=void 0;var i=n(86),s=r(i),l=n(6),u=r(l),c=n(47),d=r(c),f=n(96),p=r(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var g=n(227),h=t.initialState={availableSettings:{},error:null,isConfirming:!1,isLoading:!1,isSaving:!1,isSuccessfullyConfirmed:!1,optionsConfirmed:{},optionsPending:{}},v=t.paymentMethodFields={check:[{id:"check_fname",type:"string",required:!0},{id:"check_lname",type:"string",required:!0},{id:"check_street",type:"string",required:!0},{id:"check_city",type:"string",required:!0},{id:"check_state",type:"string",required:!0,hidden:function(e){var t=e.check_country;return"us"!==(0,s.default)(t)}},{id:"check_zip",type:"string",required:!0},{id:"check_country",type:"country",required:!0}],wire:[{id:"wire_name",type:"string",required:!0},{id:"wire_street",type:"string",required:!0},{id:"wire_city",type:"string",required:!0},{id:"wire_state",type:"string",required:!0,hidden:function(e){var t=e.wire_country;return"us"!==(0,s.default)(t)}},{id:"wire_zip",type:"string",required:!0},{id:"wire_country",type:"country"},{id:"wire_iban",type:"string",required:!0},{id:"wire_bank",type:"string",required:!0},{id:"wire_routing",type:"string",required:!0,hidden:function(){return!0}},{id:"wire_swift",type:"string",required:!0},{id:"wire_bcountry",type:"country",required:!0},{id:"wire_usd_bank_name",type:"string"},{id:"wire_usd_bank_swift",type:"string"},{id:"wire_usd_bank_account",type:"string"},{id:"wire_comment",type:"string"}],paxum:[{id:"paxum_name",type:"email",required:!0}]}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{isLoading:!0});case i.LOAD_END:return a({},e,{isLoading:!1,isUpdating:!1});case i.LOAD_SUCCESS:return a({},(0,o.replace)(e,t.data.persons),{isLoading:!1,isUpdating:!1});case i.UPDATE_START:return a({},e,{isUpdating:!0});case i.CREATE_START:return a({},e,t.data,{error:null,isUpdating:!0});case i.CREATE_ERROR:return a({},e,t.data,{isUpdating:!1});case i.CREATE_SUCCESS:return a({},(0,o.save)(e,t.data.persons),{draftPerson:null,isUpdating:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(194),s=t.initialState=a({},(0,o.createCollection)(),{draftPerson:null,error:null,isLoading:!1,isUpdating:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{error:null,isPending:!0});case i.LOAD_SUCCESS:return a({},(0,o.replace)(e,t.data.earnings),{error:null,isPending:!1});case i.LOAD_FAIL:return a({},e,{error:t.data.error,isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(573),s=t.initialState=a({},(0,o.createCollection)({itemKey:"username"}),{error:null,isPending:!1})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return o({},s,{isLoading:!0});case i.LOAD_SUCCESS:return o({},e,t.data,{isLoading:!1});case i.UPDATE_START:return o({},e,{isUpdating:!0,error:null});case i.UPDATE_SUCCESS:return o({},e,{isUpdating:!1,error:null});case i.UPDATE_ERROR:return o({},e,{isUpdating:!1,error:t.data.error});case i.CREATE_START:return o({},e,{isCreating:!0,isCreated:!1,newModelCreatedId:null});case i.CREATE_SUCCESS:return o({},e,{error:null,modelIds:[].concat(r(e.modelIds),[t.data.modelId]),isCreating:!1,isCreated:!0,newModelCreatedId:t.data.modelId});case i.CREATE_ERROR:return o({},e,{error:t.data.error,isCreating:!1,isCreated:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var i=n(195),s=t.initialState={modelIds:[],newModelCreatedId:null,error:null,isLoading:!1,isModelPageDataLoading:!0,isCreating:!1,isUpdating:!1}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{isPending:!0});case i.ADD_START:return a({},e,{hasAddSucceeded:!1,isPending:!0});case i.REMOVE_START:return a({},e,{hasRemoveSucceeded:!1,isPending:!0});case i.LOAD_SUCCESS:return a({},(0,o.replace)(e,t.data.subscriptions),{error:null,isPending:!1});case i.ADD_SUCCESS:case i.UPDATE_SUCCESS:return a({},(0,o.save)(e,t.data.subscriptions),{hasAddSucceeded:!0,error:null,isPending:!1});case i.REMOVE_SUCCESS:case i.REMOVE_SUCCESS_MAIL:case i.REMOVE_SUCCESS_PROMO:return a({},e,{hasRemoveSucceeded:!0,error:null,isPending:!1,collection:e.collection.filterNot(function(e){return t.data.modelIds.indexOf(e.modelId)>-1})});case i.LOAD_FAIL:case i.ADD_FAIL:case i.REMOVE_FAIL:case i.REMOVE_FAIL_MAIL:case i.REMOVE_FAIL_PROMO:return a({},e,{error:t.data.error,isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(131),s=t.initialState=a({},(0,o.createCollection)(),{error:null,hasAddSucceeded:!1,hasRemoveSucceeded:!1,isPending:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{error:null,isPending:!0});case i.LOAD_SUCCESS:return a({},(0,o.replace)(e,t.data.transactions),{error:null,isPending:!1,totalEarnings:t.data.totalEarnings});case i.LOAD_FAIL:return a({},e,{error:t.data.error,isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(574),s=t.initialState=a({},(0,o.createCollection)(),{error:null,isPending:!1,totalEarnings:{inUsd:0,isTokens:0}})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.LOVENSE_UPDATE_SETTINGS:return a({},e,{levels:t.data.levels});case o.LOVENSE_UPDATE_TOY_STATUS:return a({},e,{status:t.data.status});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(369),i=n(66),s=t.initialState={status:i.LOVENSE_TOY_STATUS.OFF,levels:null}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d.FLASH_PLAYER_INITED:return o({},e,{hasFlashInitialized:!0});case d.INIT:return o({},e,{isCamActive:!0,isReady:!1,kingId:null,model:t.data.model||null,favoritedCount:null});case d.KING_SET:return o({},e,{kingId:t.data.kingId});case d.GOAL_SET_SUCCESS:return o({},e,{goalData:t.data.goal});case d.CAM_DATA_LOAD_SUCCESS:return o({},e,{viewCamSettings:t.data.broadcastSettings,goalData:t.data.goal,isCamAvailable:t.data.isCamAvailable,isLovenseEnabled:t.data.isLovenseEnabled,isOwnShow:t.data.isOwnShow,isCamActive:t.data.isCamActive,isReady:!0,modelToken:t.data.modelToken,streamName:t.data.streamName,userStreamName:t.data.userStreamName,kingId:t.data.king?t.data.king.id:null,model:t.data.model,show:t.data.show,favoritedCount:t.data.model.favoritedCount});case d.CAM_DATA_LOAD_FAIL:return o({},e,{isCamAvailable:!1,isOwnShow:!1,kingId:null,model:null,show:null});case d.PREPARE_BUY_TOKENS:return o({},e,{unblockModelId:t.data.unblockModelId});case d.PRIVATE_START:return o({},e,{privateStartedAt:t.data.privateStartedAt,proposeTimer:null,proposeMode:""});case d.PRIVATE_STOP:return o({},e,{privateStartedAt:null});case d.PROFILE_SHOW:return o({},e,{isProfileVisible:!0,viewCamProfileShowToken:Symbol("viewCamProfileShowToken")});case d.PROFILE_HIDE:return o({},e,{isProfileVisible:!1});case d.PROPOSAL_CHANGE:return o({},e,{proposeError:null,proposeMode:t.data.proposeMode,proposeTimer:t.data.proposeTimer});case d.PROPOSAL_ERROR:return o({},e,{proposeError:t.data.error,proposeMode:m.proposeMode,proposeTimer:m.proposeTimer});case d.SET_PLAYER_TYPE:return o({},e,{forcePlayerType:t.data.forcePlayerType,isFullscreen:!1});case d.TOGGLE_SETTINGS:return o({},e,{isPlayerSettingsVisible:t.data.isPlayerSettingsVisible});case d.UPDATE_CAM_ACTIVE:return o({},e,{isCamActive:t.data.isCamActive});case d.UPDATE_VIEWCAM_MODEL_USERNAME:return o({},e,{modelUsername:t.data.username});case d.VIEWCAM_MODEL_UPDATE:return o({},e,{model:t.data.model});case d.VIEWCAM_SETTINGS_CHANGE:return o({},e,{viewCamSettings:t.data.viewCamSettings});case d.VIEWCAM_VOLUME_CHANGE:return o({},e,{playerVolume:t.data.playerVolume});case d.VIEWCAM_CONTROLS_BLOCK_VISIBLE_CHANGE:return o({},e,{isControlsBlockVisible:t.data.isControlsBlockVisible});case d.VIEWCAM_FULLSCREEN_CHANGE:return o({},e,{isFullscreen:t.data.isFullscreen});case d.RESET:return o({},m,{playerVolume:e.playerVolume,forcePlayerType:e.forcePlayerType});case c.ADD_SUCCESS:return o({},e,{favoritedCount:e.favoritedCount+1});case c.REMOVE_SUCCESS:return o({},e,{favoritedCount:e.favoritedCount-1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var i=n(56),s=r(i),l=n(63),u=r(l),c=n(108),d=n(42),f=n(12),p=n(5),m=t.initialState={favoritedCount:null,goalData:{description:"",goal:0,left:0,spent:0},error:null,isCamAvailable:!1,isCamActive:!0,isFullscreen:!1,isControlsBlockVisible:!1,hasFlashInitialized:!1,isLovenseEnabled:!1,isOwnShow:!1,isProfileVisible:!1,isPlayerSettingsVisible:!1,isReady:!1,kingId:null,model:null,modelToken:"",modelUsername:"",streamName:"",userStreamName:"",unblockModelId:null,playerStatus:f.PLAYER_STATUSES.playing,forcePlayerType:s.default.get("forcePlayerType")||u.default.get("forcePlayerType"),playerVolume:s.default.get("playerVolume",p.DEFAULT_VOLUME_USER),privateStartedAt:s.default.get("spyStartedAt")?new Date(s.default.get("spyStartedAt")):null,proposeError:null,proposeMode:"",proposeTimer:0,show:null,viewCamProfileShowToken:Symbol("viewCamProfileShowToken"),viewCamSettings:{broadcastType:f.BROADCAST_PLAYER_TYPES.FLASH,height:480,width:640,isMuted:!1}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1002);Object.defineProperty(t,"abTesting",{enumerable:!0,get:function(){return r(a).default}});var o=n(1004);Object.defineProperty(t,"analytics",{enumerable:!0,get:function(){return r(o).default}});var i=n(1005);Object.defineProperty(t,"appSettings",{enumerable:!0,get:function(){return r(i).default}});var s=n(1006);Object.defineProperty(t,"config",{enumerable:!0,get:function(){return r(s).default}});var l=n(1007);Object.defineProperty(t,"headerNotifications",{enumerable:!0,get:function(){return r(l).default}});var u=n(1008);Object.defineProperty(t,"i18n",{enumerable:!0,get:function(){return r(u).default}});var c=n(1009);Object.defineProperty(t,"ssr",{enumerable:!0,get:function(){return r(c).default}});var d=n(1010);Object.defineProperty(t,"staticContent",{enumerable:!0,get:function(){return r(d).default}});var f=n(1011);Object.defineProperty(t,"toastNotifications",{enumerable:!0,get:function(){return r(f).default}});var p=n(1012);Object.defineProperty(t,"ui",{enumerable:!0,get:function(){return r(p).default}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.SAVE_AB_TEST:var n=t.data,a=n.experimentName,l=n.chosenVariant;return o({},e,{abTestingData:o({},e.abTestingData,r({},a,l))});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var i=n(575),s={abTestingData:{}}},function(e,t,n){"use strict";function r(e){return"ABTest_"+e+"_key"}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t.length)throw new TypeError("Cannot exist "+e+" A/B test");var n=r(e);if(!i.default.has(n)){var a=Math.ceil(Math.random()*t.length)-1,o=t[a];return s(e,o),o}return i.default.get(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.saveExperiment=t.experimentKeyRegexp=void 0,t.getExperimentKey=r,t.createExperiment=a;var o=n(106),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=(t.experimentKeyRegexp=/^ABTest_([a-zA-Z]+)_key$/,t.saveExperiment=function(e,t){return i.default.set(r(e),t)})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.ADD_EVENT_INDEX:var n=t.data,r=n.name,o=n.value;return a({},e,{eventIndexesMap:e.eventIndexesMap.set(r,o)});case s.REMOVE_EVENT_INDEX:return a({},e,{eventIndexesMap:e.eventIndexesMap.delete(t.data.name)});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(360),l=t.initialState={eventIndexesMap:i.default.Map()}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.UPDATE:return a({},e,{data:a({},e.data,t.data)});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(79),i=t.initialState={data:{availableRoutes:[],broadcastServers:{},continent:"",country:"",region:"",localeChangeError:null,isSocketReady:!1,snapshotMap:{},sessionHash:null,snapshotUrlTemplate:null,qrCodeHash:null,tabId:null,timeDelta:0,view:{},viewServers:{}}}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.LOAD_START:return a({},e,{isPending:!0,error:null});case o.LOAD_SUCCESS:return a({},e,{isDebugEnabled:t.isDebugEnabled,isPending:!1,data:a({},e.data,t.data.config,t.data.data)});case o.LOAD_FAIL:return a({},e,{isPending:!1,error:t.error});case o.UPDATE:return a({},e,{data:a({},e.data,t.data)});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(109),i=n(56),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=t.initialState={error:null,isPending:!1,isDebugEnabled:s.default.get("isConsoleDebugEnabled",!1),whiteLabelId:"undefined"!=typeof window?window.WHITE_LABEL_ID||"":"",data:{amplitudeTrackingCountryCodes:[],analScriptUrl:null,countries:[],country:"",debug:!1,env:"",features:{},errorReporter:{isClientErrorEnabled:!1,isServerErrorEnabled:!1,percent:10},hostRoot:"",hosts:{},i18n:{current:"en",default:"en",languages:[]},isCardDetailsPromoAvailable:!1,isCurrentUrlApprovedModel:!1,isPushNotificationEnabled:!1,languages:{},links:{},playOnHover:!1,popularTags:[],privateMessages:{maxLength:500},regions:null,recaptchaSiteKey:null,runAppUrl:null,showFraudAlert:!1,snapshotTimeout:10,showRecaptcha:!1,staticRoot:null,support:{departments:[]},tagGroups:[],tagsAliases:[],view:{servers:[],serverWeightMultiplier:.5},whiteLabel:{login:null,signup:null,signupModel:null,signupStudio:null,url:{accountSettings:{changeEmail:null,changePassword:null}}}}}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.HIDE:return a({},(0,o.delBy)(e,t.data.criteria));case i.SHOW:return a({},l(e,t.data.notification));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(28),s=t.initialState=a({},(0,o.createCollection)()),l=function(e,t){var n=t.key,r=t.type,a=e;return n&&(a=(0,o.delBy)(e,{key:n})),a=(0,o.delBy)(a,{type:r}),(0,o.save)(a,t)}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.LOAD_START:return a({},e,{isPending:!0,error:null});case o.LOAD_SUCCESS:return a({},e,{isPending:!1,data:t.data});case o.LOAD_FAIL:return a({},e,{isPending:!1,error:t.error});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(361),i=t.initialState={error:null,isPending:!1,data:{}}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case o.CLEANUP_SSR:return a({},e,{base64Previews:{}});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(109),i=t.initialState={base64Previews:{},deviceType:null,headers:{},globals:{},subdomain:""}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{error:null,isPending:!0});case i.LOAD_SUCCESS:return a({},(0,o.save)(e,t.data),{error:null,isPending:!1});case i.LOAD_FAIL:return a({},e,{error:t.data.error,isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(134),s=t.initialState=a({},(0,o.createCollection)(),{error:null,isPending:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.TOAST_ADD:return a({},(0,o.save)(e,t.data.toast));case i.TOAST_REMOVE:return a({},(0,o.delBy)(e,t.data.criteria));default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(370),s=a({},(0,o.createCollection)())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case c.BLOCK:return s({},e,t.data,{isInterfaceBlocked:!0});case c.HIDE_MODAL:var n=(0,i.default)(e,"currentModalParams.persistenceKey")||e.currentModalName;return s({},e,{currentModalName:"",currentModalParams:null,hasModal:!1,hiddenModalsSet:(0,i.default)(t,"data.shouldPersist")?e.hiddenModalsSet.add(n):e.hiddenModalsSet});case c.ON_ENTER_END:return s({},e,{isOnEnterPrevented:!1});case c.RELEASE:return s({},e,{currentBlockingComponent:null,isInterfaceBlocked:!1});case c.SAVE_TIP_AMOUNT:return s({},e,{tipAmount:t.data.tipAmount});case c.CHANGE_VOLUME:case c.PREFETCH_SOUND:case c.SET_TITLE:case c.SET_TITLE_PREFIX:case c.UPDATE_DOCUMENT_VISIBILITY:case c.UPDATE_WINDOW_DIMENSIONS:case c.UPDATE_WINDOW_ORIENTATION:case c.UPDATE_WINDOW_FOCUSED:return s({},e,t.data);case c.SHADE_LAYOUT:return s({},e,{isLayoutShaded:t.data.isActive});case c.SHOW_MODAL:var r=t.data,a=r.params,o=r.modalName,l=r.isOnEnterPrevented,u=o;return s({},e,{currentModalName:u,currentModalParams:a,hasModal:Boolean(u),isOnEnterPrevented:l});case g.LOGIN_SUCCESS:var f=t.data,p=f.isLoggedIn,m=f.currentUser;return s({},e,{volume:p&&m.isModel?d.DEFAULT_VOLUME_MODEL:d.DEFAULT_VOLUME_USER});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=n(6),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var l=n(18),u=r(l),c=n(9),d=n(5),f=n(67),p=n(56),m=r(p),g=n(34),h=t.initialState={audioMap:u.default.Map(),currentBlockingComponent:null,currentModalName:"",currentModalParams:null,hiddenModalsSet:u.default.Set(m.default.get("hiddenModalsSet",[])),docTitlePrefix:"",docTitle:"",hasModal:!1,isDocumentVisible:(0,f.getIsDocumentVisible)(),isInterfaceBlocked:!1,isLayoutShaded:!1,isWindowFocused:"undefined"==typeof document||!document.hasFocus||document.hasFocus(),isOnEnterPrevented:!1,parentBlockingComponent:null,tipAmount:20,volume:d.DEFAULT_VOLUME_USER,windowWidth:0,windowHeight:0,windowOrientation:""}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1014);Object.defineProperty(t,"translator",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case l.LOAD_START:return s({},e,{isLoading:!0,loadError:null});case l.LOAD_ERROR:return s({},e,{isLoading:!1,loadError:t.data.error});case l.LOAD_SUCCESS:return s({},e,{isLoading:!1});case l.SAVE_MESSAGES:return s({},e,{isLoading:!1},t.data);case l.APPLY_FILTER:case l.APPLIED_FILTER_CHANGE:case l.LOAD_LANGUAGES_SUCCESS:case l.LOAD_MESSAGES_SUCCESS:case l.LOAD_SCREENSHOTS_SUCCESS:case l.UPDATE_LOCALE:return s({},e,t.data);case l.FILTERS_CHANGE:return s({},e,{filters:s({},e.filters,r({},t.data.field,t.data.value))});case l.SORTING_CHANGE:return s({},e,{sorters:s({},e.sorters,r({},t.data.field,t.data.value))});case l.UPDATE_SCREENSHOTS:return s({},e,{screenshots:(0,i.default)({},e.screenshots,t.data.screenshots)});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(466),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var l=n(228),u={appliedFilter:null,filters:{keyValue:"",phrase:"",onlyComposite:!1},filteredMessagesKeys:[],isLoading:!1,languages:[],loadError:null,messages:{},screenshots:{},selectedLocale:"",sorters:{sortByScreenshots:!1}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1016);Object.defineProperty(t,"tokens",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d.BILLING_URL_UPDATE:return u({},e,{billingUrl:t.data.url,isLoading:!1,purchaseId:t.data.purchaseId});case d.GO_TO_WIZARD_STEP:return u({},e,{currentWizardStep:t.data.step});case d.LOAD_OPTIONS_ERROR:return u({},e,t.data.error,{isLoading:!1});case d.LOAD_OPTIONS_START:return u({},e,{isLoading:!0,optionsError:null,currentWizardStep:f.WIZARD_STEPS.TOKENS_PACKAGES});case d.LOAD_OPTIONS_SUCCESS:var n=t.data,r=n.hasPromoExpired,a=n.options,o=n.receivedUserOptions,s=o.preferredPackage||{};return u({},e,{hasPromoExpired:r,isLoading:!1,options:a,preferredPackage:s});case c.LOAD_SUCCESS:var m=t.data.data.activePromoCampaigns;return u({},e,{options:u({},e.options,{activePromoCampaigns:m})});case d.TOGGLE_ADDITIONAL_PACKAGES_SHOWING:case d.TOGGLE_LOADING_STATE:case d.TOGGLE_PROMO_PRESELECT:case d.TOGGLE_SUBSCRIPTION_PRESELECT:case d.TOGGLE_METHOD_PRESELECT:case d.UPDATE_BILLING_NAME:case d.UPDATE_METHOD_NAME:case d.UPDATE_MOBILE_STEP:case d.SET_PACKAGE_PRESELECTION:case d.TOGGLE_MODAL_OPEN:case d.UPDATE_PACKAGE_CODE:case d.PROMO_INITIATED:return u({},e,t.data);case d.PURCHASE_COMPLETE:return u({},e,{isPurchaseCompleted:!0});case d.PURCHASE_FAILED:return u({},e,{billingUrl:"",purchaseError:t.data.error,hasPurchaseFailed:!0,isLoading:!1});case d.PURCHASE_RESET:return u({},p,{options:e.options},(0,l.default)(e,t.data.excludeFields));case d.PURCHASE_SUCCESS:return u({},e,{purchaseError:null,hasPurchaseFailed:!1,isLoading:!1});case d.INITIATED_PROMO_CAMPAIGN_NOT_AVAILABLE:return u({},e,{options:u({},e.options,{activePromoCampaigns:(0,i.default)(e.options.activePromoCampaigns,t.data.promoName)})});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(167),i=r(o),s=n(33),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var c=n(109),d=n(52),f=n(88),p={billingUrl:"",currentWizardStep:f.WIZARD_STEPS.TOKENS_PACKAGES,hasPromoExpired:!1,hasPurchaseFailed:!1,initiatedPromoName:"",isAdditionalPackagesShown:!1,isGoldMembershipPackageAvailable:!1,isLoading:!1,isPromoPreselected:!1,isPurchaseCompleted:!1,isPurchaseModalOpen:!1,isSubscriptionPreselected:!1,mobileStep:f.MOBILE_STEPS.METHOD,options:{activePromoCampaigns:[],methods:null},optionsError:null,purchaseError:null,purchaseId:null,preselectedMethod:{methodName:""},preselectedPackageCriteria:null,methodName:"",billingName:"",currentPackageTokens:null,currentPackageType:null,currentPackagePromo:null,currentPackageOrder:null,triggerSource:"",preferredPackage:{}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1018);Object.defineProperty(t,"availableSettings",{enumerable:!0,get:function(){return r(a).default}});var o=n(1019);Object.defineProperty(t,"auth",{enumerable:!0,get:function(){return r(o).default}});var i=n(1020);Object.defineProperty(t,"conversations",{enumerable:!0,get:function(){return r(i).default}});var s=n(1021);Object.defineProperty(t,"confirmEmail",{enumerable:!0,get:function(){return r(s).default}});var l=n(1022);Object.defineProperty(t,"feedback",{enumerable:!0,get:function(){return r(l).default}});var u=n(1023);Object.defineProperty(t,"goldMembership",{enumerable:!0,get:function(){return r(u).default}});var c=n(1024);Object.defineProperty(t,"myFriends",{enumerable:!0,get:function(){return r(c).default}});var d=n(1025);Object.defineProperty(t,"myAlbums",{enumerable:!0,get:function(){return r(d).default}});var f=n(1026);Object.defineProperty(t,"myPhotos",{enumerable:!0,get:function(){return r(f).default}});var p=n(1027);Object.defineProperty(t,"myVideos",{enumerable:!0,get:function(){return r(p).default}});var m=n(1028);Object.defineProperty(t,"passwordRecovery",{enumerable:!0,get:function(){return r(m).default}});var g=n(1029);Object.defineProperty(t,"personalNotifications",{enumerable:!0,get:function(){return r(g).default}});var h=n(1030);Object.defineProperty(t,"privateMessages",{enumerable:!0,get:function(){return r(h).default}});var v=n(1031);Object.defineProperty(t,"profile",{enumerable:!0,get:function(){return r(v).default}});var E=n(1032);Object.defineProperty(t,"relations",{enumerable:!0,get:function(){return r(E).default}});var y=n(1033);Object.defineProperty(t,"signUp",{enumerable:!0,get:function(){return r(y).default}});var b=n(1034);Object.defineProperty(t,"studioSettings",{enumerable:!0,get:function(){return r(b).default}});var _=n(1035);Object.defineProperty(t,"userAlbums",{enumerable:!0,get:function(){return r(_).default}});var S=n(1036);Object.defineProperty(t,"userBans",{enumerable:!0,get:function(){return r(S).default}});var O=n(1037);Object.defineProperty(t,"userFriends",{enumerable:!0,get:function(){return r(O).default}});var P=n(1038);Object.defineProperty(t,"userPhotos",{enumerable:!0,get:function(){return r(P).default}});var T=n(1039);Object.defineProperty(t,"userVideos",{enumerable:!0,get:function(){return r(T).default}});var A=n(1040);Object.defineProperty(t,"users",{enumerable:!0,get:function(){return r(A).default}})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.LOAD_START:return a({},e,{error:null,isPending:!0});case o.LOAD_FAIL:return a({},e,{error:t.data.error,isPending:!1});case o.LOAD_SUCCESS:return{data:t.data.availableSettings,error:null,isPending:!1};default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(161),i=t.initialState={data:null,error:null,isPending:!1}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.LOGIN_START:return a({},e,{isLoggingIn:!0,loginError:null});case o.LOGIN_SUCCESS:return a({},e,{isLoggingIn:!1},t.data);case o.LOGIN_FAIL:return a({},l,{isLoggingIn:!1,loginError:t.error});case o.LOGOUT_START:return a({},e,{isLoggingOut:!0,logoutError:null});case o.LOGOUT_SUCCESS:return a({},l);case o.LOGOUT_FAIL:return a({},e,{isLoggingOut:!1,logoutError:t.error});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(34),i=n(63),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=t.initialState={currentUser:null,guestId:null,isLoggedIn:!1,isLoggingIn:!1,isLoggingOut:!1,loginError:function(){var e=s.default.get("isLoginRecaptchaShown");return e?{details:{recaptcha:e}}:null}(),logoutError:null}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.CONVERSATIONS_LOAD_START:return a({},e,{isLoading:!0});case s.CONVERSATIONS_LOAD_SUCCESS:return a({},(0,o.save)(e,t.data.conversations),{isLoading:!1});case s.CONVERSATIONS_LOAD_ERROR:return a({},e,{isLoading:!1});case s.CONVERSATIONS_REMOVE_START:return a({},e,{isUpdating:!0});case s.CONVERSATIONS_REMOVE_SUCCESS:return a({},(0,o.delBy)(e,{counterpartId:t.data.id}),{isUpdating:!1});case s.CONVERSATIONS_REMOVE_ERROR:return a({},e,{isUpdating:!1});case i.LOGOUT_SUCCESS:return a({},l);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(34),s=n(229),l=t.initialState=a({},(0,o.createCollection)({itemKey:"counterpartId"}),{isLoading:!1,isUpdating:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.CONFIRM_START:return a({},i,{isConfirmingEmail:!0});case o.CONFIRM_SUCCESS:return a({},e,{isConfirmingEmail:!1,shouldShowSetPassword:t.data.showChangePasswordForm,confirmationType:t.data.type});case o.CONFIRM_FAIL:return a({},e,{isConfirmingEmail:!1,shouldShowSetPassword:null,confirmationType:t.data.type});case o.CHANGE_PASSWORD_START:return a({},e,{isUpdating:!0});case o.CHANGE_PASSWORD_SUCCESS:return a({},e,{error:null,shouldShowSetPassword:null,hasChangedPassword:!0,isUpdating:!1});case o.CHANGE_PASSWORD_FAIL:return a({},e,{error:t.data.error,isUpdating:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(196),i=t.initialState={error:null,hasChangedPassword:!1,isConfirmingEmail:!1,isUpdating:!1,shouldShowSetPassword:!1,confirmationType:null}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case a.SEND_PREPARE:return{sendFeedbackError:null,isSendingFeedback:!1,sendFeedbackSuccess:!1};case a.SEND_START:return{sendFeedbackError:null,isSendingFeedback:!0,sendFeedbackSuccess:!1};case a.SEND_SUCCESS:return{sendFeedbackError:null,isSendingFeedback:!1,sendFeedbackSuccess:!0};case a.SEND_FAIL:return{sendFeedbackError:t.data.error,isSendingFeedback:!1,sendFeedbackSuccess:!1};default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0,t.default=r;var a=n(576),o=t.initialState={sendFeedbackError:null,isSendingFeedback:!1,sendFeedbackSuccess:!1}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.CANCEL_START:return a({},e,{hasCancelSucceeded:!1,hasRenewSucceeded:!1,isPending:!0});case o.CANCEL_SUCCESS:return a({},e,{error:null,hasCancelSucceeded:!0,hasRenewSucceeded:!1,isPending:!1});case o.CANCEL_FAIL:return a({},e,{error:t.data.error,isPending:!1});case o.RENEW_PREPARE:return a({},e,{canSubscribe:!0,hasRenewSucceeded:!1,isPending:!0,renewalModelName:t.data.renewalModelName,renewalSource:t.data.renewalSource});case o.RENEW_START:return a({},e,{hasCancelSucceeded:!1,hasRenewSucceeded:!1,isPending:!0});case o.RENEW_SUCCESS:return a({},e,{canSubscribe:!1,error:null,hasCancelSucceeded:!1,hasRenewSucceeded:!0,isPending:!1,renewalModelName:null,renewalSource:null});case o.RENEW_FAIL:return a({},e,{canSubscribe:!1,error:t.data.error,isPending:!1,renewalModelName:null,renewalSource:null});case o.RESET:return a({},i);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(373),i=t.initialState={error:null,canSubscribe:!1,hasCancelSucceeded:!1,hasRenewSucceeded:!1,isPending:!1,renewalSource:null,renewalModelName:null}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.LOAD_START:case s.ADD_START:case s.REMOVE_START:return a({},e,{isPending:!0});case s.LOAD_SUCCESS:return a({},(0,o.save)(e,t.data.friendships),{isPending:!1});case s.ADD_SUCCESS:return a({},(0,o.save)(e,t.data.friendship),{isPending:!1});case s.REMOVE_SUCCESS:return a({},(0,o.save)(e,t.data.friendships),{isPending:!1});case s.LOAD_FAIL:case s.ADD_FAIL:case s.REMOVE_FAIL:return a({},e,{error:t.data.error,isPending:!1});case i.LOGOUT_SUCCESS:return a({},l);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(34),s=n(117),l=t.initialState=a({},(0,o.createCollection)(),{error:null,isPending:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case l.ADD_SUCCESS:return a({},(0,s.save)(e,t.data.album));case l.CANCEL_ALBUMS_DELETING:return a({},e,{deletedAlbumIds:i.default.Set()});case l.LOAD_START:return a({},e,{isPending:!0});case l.LOAD_SUCCESS:return a({},(0,s.save)(e,t.data.albums),{isPending:!1});case l.LOAD_FAIL:return a({},e,{error:t.data.error});case l.SELECT:return a({},e,{selectedAlbumId:t.data.albumId});case l.DELETE_SUCCESS:return a({},(0,s.delBy)(e,function(t){var n=t.id;return e.deletedAlbumIds.has(n)}),{deletedAlbumIds:e.deletedAlbumIds.clear()});case l.DELETE_MARK_CANCEL:return a({},e,{deletedAlbumIds:e.deletedAlbumIds.clear()});case l.EDIT_ALBUM_UNMOUNT:case l.RESET_ERROR:return a({},e,{error:null});case l.TOGGLE_ALBUM_DELETING:var n=e.deletedAlbumIds,r=t.data.albumId;return a({},e,{deletedAlbumIds:n.has(r)?n.remove(r):n.add(r)});case l.UPDATE_START:return a({},e,{isUpdating:!0});case l.UPDATE:return a({},(0,s.save)(e,t.data.album),{isUpdating:!1});case l.UPDATE_ERROR:return a({},e,{error:t.data.error,isUpdating:!1});case u.LOGOUT_SUCCESS:return c;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(16),l=n(230),u=n(34),c=t.initialState=a({},(0,s.createCollection)(),{deletedAlbumIds:i.default.Set(),error:null,isPending:!1,isUpdating:!1,selectedAlbumId:null})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u.LOAD_START:case u.ADD_START:return a({},e,{isPending:!0});case u.ADD_IN_PROGRESS:return a({},e,{inProgress:e.inProgress.add(t.data.url)});case u.REMOVE_START:return a({},e,{isPending:!0});case u.LOAD_SUCCESS:return a({},(0,s.replace)(e,t.data.photos),{isPending:!1});case u.ADD_SUCCESS:return a({},(0,s.save)(e,t.data.photo));case u.REMOVE_SUCCESS:return a({},(0,s.del)(e,t.data.photoIds));case u.LOAD_FAIL:case u.ADD_FAIL:case u.REMOVE_FAIL:return a({},e,{error:t.data.error,isPending:!1});case u.ADD_FINISH:case u.REMOVE_FINISH:return a({},e,{isPending:!1});case u.REMOVE_FROM_IN_PROGRESS:return a({},e,{inProgress:e.inProgress.remove(t.data.url)});case l.LOGOUT_SUCCESS:return a({},c);case u.CANCEL_PHOTOS_DELETING:return a({},e,{deletedPhotoIds:i.default.Set()});case u.TOGGLE_PHOTO_DELETING:var n=e.deletedPhotoIds,r=t.data.photoId;return a({},e,{deletedPhotoIds:n.has(r)?n.remove(r):n.add(r)});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(16),l=n(34),u=n(232),c=t.initialState=a({},(0,s.createCollection)(),{inProgress:i.default.Set(),deletedPhotoIds:i.default.Set(),error:null,isPending:!1})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m.CLEAR_REMOVE_MARKS:return s({},e,{deletedVideoIds:e.deletedVideoIds.clear()});case m.FETCH_UPLOAD_URL_START:return s({},e,{hasEditingVideoProcessingFailed:!1,isUploading:!0,preUploadError:null,uploadError:null});case m.LOAD_SUCCESS:return s({},(0,f.replace)(e,t.data.videos),{isPending:!1});case m.REMOVE:return s({},(0,f.delBy)(e,function(e){return e.id===t.data.videoId}));case m.REMOVE_SUCCESS:return s({},(0,f.delBy)(e,function(e){var n=e.id;return(0,i.default)(t.data.videoIds,n)}),{deletedVideoIds:e.deletedVideoIds.clear()});case m.SET_EDITING_ID:return s({},e,{editingVideoId:t.data.id});case m.SET_EDITING_VIDEO_PROCESSING_FAILED:return s({},e,{hasEditingVideoProcessingFailed:t.data.hasFailed});case m.SET_PREUPLOAD_ERROR:return s({},e,{isUploading:!1,preUploadError:t.data.error});case m.SET_UPLOAD_ERROR:return s({},e,{isUploading:!1,uploadError:t.data.error});case m.TOGGLE_VIDEO_DELETING:var n=e.deletedVideoIds,r=t.data.videoId;return s({},e,{deletedVideoIds:n.has(r)?n.remove(r):n.add(r)});case m.UPDATE_START:return s({},e,{isUpdating:!0,updateError:null});case m.UPDATE_SUCCESS:return s({},(0,f.save)(e,t.data.video),{isUpdating:!1});case m.UPDATE_ERROR:return s({},e,{isUpdating:!1,updateError:t.data.error});case m.UPLOAD_SUCCESS:return s({},(0,f.save)(e,t.data.video),{isUploading:!1});case p.LOGOUT_SUCCESS:return s({},g);case c.SHOW_MODAL:var a=g.updateError;return t.data.modalName===d.MODAL_TYPES.EDIT_VIDEO&&e.updateError!==a?s({},e,{updateError:a}):e;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=n(14),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var l=n(18),u=r(l),c=n(9),d=n(5),f=n(16),p=n(34),m=n(233),g=t.initialState=s({},(0,f.createCollection)(),{editingVideoId:null,hasEditingVideoProcessingFailed:!1,isPending:!1,isUpdating:!1,isUploading:!1,deletedVideoIds:u.default.Set(),uploadError:null,updateError:null})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.FORGOT_PASSWORD_START:return a({},e,{isRequestingPassword:!0,requestPasswordError:null});case o.FORGOT_PASSWORD_SUCCESS:return a({},e,{isRequestingPassword:!1,requestPasswordError:null});case o.FORGOT_PASSWORD_FAIL:return a({},e,{isRequestingPassword:!1,requestPasswordError:t.data.error});case o.CHECK_RECOVERY_KEY_START:return a({},e,{isCheckingRecoveryKey:!0,recoveryKeyCheckError:null});case o.CHECK_RECOVERY_KEY_SUCCESS:return a({},e,{isCheckingRecoveryKey:!1,recoveryKeyCheckError:null});case o.CHECK_RECOVERY_KEY_FAIL:return a({},e,{recoveryKeyCheckError:t.data.error,isCheckingRecoveryKey:!1});case o.RESET_PASSWORD_START:return a({},e,{isResettingPassword:!0,resetPasswordError:null,resetPasswordSuccess:!1});case o.RESET_PASSWORD_SUCCESS:return a({},e,{isResettingPassword:!1,resetPasswordError:null,resetPasswordSuccess:!0});case o.RESET_PASSWORD_FAIL:return a({},e,{isResettingPassword:!1,resetPasswordError:t.data.error,resetPasswordSuccess:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(294),i=t.initialState={requestPasswordError:null,recoveryKeyCheckError:null,resetPasswordError:null,resetPasswordSuccess:!1,isRequestingPassword:!1,isCheckingRecoveryKey:!1,isResettingPassword:!1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=new Date;return((0,s.default)(t)?t:[t]).map(function(t){var r=(0,d.findFirst)(e,{id:t.id});return c({},t,{receivedAt:r?r.receivedAt:n})})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m.PERSONAL_NOTIFICATIONS_APPEND:return c({},(0,d.save)(e,a(e.collection,t.data.notification)));case m.PERSONAL_NOTIFICATIONS_LOAD_SUCCESS:return c({},(0,d.replace)(e,a(e.collection,t.data.notifications)));case m.PERSONAL_NOTIFICATIONS_READ_ALL:return c({},(0,d.save)(e,h(e.collection)));case m.PERSONAL_NOTIFICATIONS_REMOVE:var n=t.data.notificationId;return(0,d.hasId)(e.collection,n)?c({},(0,d.del)(e,n)):e;case m.PERSONAL_NOTIFICATIONS_REMOVE_PM_NOTIFICATIONS:return c({},(0,d.delBy)(e,function(e){return(0,u.default)(t.data.notificationsIds,e.id)&&e.type!==p.PERSONAL_NOTIFICATION_TYPES.KNIGHT}));case m.PERSONAL_NOTIFICATIONS_SETTINGS_UPDATE:return c({},e,t.data);case f.LOGOUT_SUCCESS:return c({},g);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n(26),s=r(i),l=n(14),u=r(l),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var d=n(16),f=n(34),p=n(27),m=n(150),g=t.initialState=c({},(0,d.createCollection)(),{push:!1,email:!1}),h=function(e){return e.map(function(e){return c({},e,{isRead:!0,readAt:(new Date).toISOString()})}).toArray()}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.LOAD_PAGE_START:return a({},e,{isLoadingPage:!0});case s.LOAD_PAGE_SUCCESS:return a({},e,{isLoadingPage:!1});case s.LOAD_START:return a({},e,{error:null,isLoading:!0});case s.LOAD_SUCCESS:return a({},(0,o.save)(e,t.data.messages),{isLoading:!1});case s.SEND_START:return a({},e,{error:null,isSending:!0});case s.SEND_SUCCESS:return a({},(0,o.save)(e,t.data.message),{isSending:!1});case s.SEND_ERROR:return a({},e,{error:t.data.error,isSending:!1});case i.LOGOUT_SUCCESS:return a({},l);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(34),s=n(197),l=t.initialState=a({},(0,o.createCollection)(),{isLoadingPage:!0,isLoading:!1,isSending:!1})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case l.UPDATE_PREPARE:return o({},e,{isUpdating:!0,succeededTypes:e.succeededTypes.delete(t.data.type),typeErrors:e.typeErrors.delete(t.data.type)});case l.UPDATE_START:return o({},e,{isUpdating:!0,updatingTypes:e.updatingTypes.add(t.data.type),succeededTypes:e.succeededTypes.delete(t.data.type),typeErrors:e.typeErrors.delete(t.data.type)});case l.UPDATE_SUCCESS:return o({},e,{isUpdating:!1,user:o({},e.user,t.data.user),updatingTypes:e.updatingTypes.delete(t.data.type),succeededTypes:e.succeededTypes.add(t.data.type)});case l.UPDATE_FAIL:return o({},e,{isUpdating:!1,updatingTypes:e.updatingTypes.delete(t.data.type),typeErrors:e.typeErrors.set(t.data.type,t.data.error)});case u.LOGIN_SUCCESS:return o({},e,{user:t.data.currentUser});case u.LOGOUT_SUCCESS:return o({},e,{user:c.user});case l.LOAD_CITIES_SUCCESS:var n=t.data,a=n.cities,i=n.start,s=n.country;return o({},e,{cities:a,citiesCache:o({},e.citiesCache,r({},s,o({},e.citiesCache[s],r({},i,a))))});case l.SCROLL_TO_USER_GALLERY:return o({},e,{scrollToUserGalleryToken:Symbol("scrollToUserGalleryToken")});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var i=n(18),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(43),u=n(34),c=t.initialState={cities:[],citiesCache:{},isUpdating:!1,updatingTypes:s.default.Set(),user:null,typeErrors:s.default.Map(),scrollToUserGalleryToken:null,succeededTypes:s.default.Set()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p.UPDATE:return u({},g(e,t.data.relations),{isPending:!1});case f.LOGIN_SUCCESS:case f.LOGOUT_SUCCESS:return u({},m,{isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=n(46),i=r(o),s=n(96),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var c=n(18),d=r(c),f=n(34),p=n(98),m=t.initialState={banExpiry:d.default.Map(),canBan:d.default.Map(),canFriend:d.default.Map(),isBanned:d.default.Map(),isBannedByKnight:d.default.Map(),isGeoBanned:d.default.Map(),isProfileAvailable:d.default.Map(),isSubscribed:d.default.Map()},g=function(e,t){var n=(0,i.default)(t,function(t,n,r){return t[r]=e[r].withMutations(function(e){(0,l.default)(n,function(t,n){e.set(n,t)})}),t},{});return u({},e,n)}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case a.SIGNUP_START:return{error:null,isPending:!0};case a.SIGNUP_SUCCESS:return{error:null,isPending:!1};case a.SIGNUP_FAIL:return{error:t.data.error,isPending:!1};case a.SIGNUP_CHECK_START:return{error:null,isPending:!1,isValidating:!0};case a.SIGNUP_CHECK_SUCCESS:return{error:null,isPending:!1};case a.SIGNUP_CHECK_FAIL:return{error:t.data.error,isPending:!1,isValidating:!1};default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0,t.default=r;var a=n(296),o=t.initialState={error:null,isPending:!1,isValidating:!0}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.LOAD_START:return a({},e,{isLoading:!0,error:null});case o.LOAD_SUCCESS:return a({},e,t.data,{isLoading:!1,error:null});case o.UPDATE_START:return a({},e,{isUpdating:!0,error:null});case o.UPDATE_SUCCESS:return a({},e,t.data,{isUpdating:!1,error:null});case o.UPDATE_ERROR:return a({},e,t.data,{isUpdating:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(375),i=t.initialState={isLoading:!1,isUpdating:!1,error:null,isDocumentUploaded:!1}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u.LOAD_START:return s({},e,{isPending:!0});case u.LOAD_SUCCESS:return s({},(0,l.save)(e,t.data),{isPending:!1,isLoaded:!0});case u.LOAD_FAIL:return s({},e,{isPending:!1,isLoaded:!0});case u.SELECT:return s({},e,{selectedAlbumId:t.data.albumId});case u.UPDATE:var n=t.data,a=n.userId,o=n.album,f=e.collection.get(a).albums,p=[].concat(r((0,i.default)(f,function(e){return e.id!==o.id})),[o]);return s({},(0,l.save)(e,{userId:a,albums:p}));case u.REMOVE:var m=t.data,g=m.userId,h=m.albumId,v=e.collection.get(g).albums,E=[].concat(r((0,i.default)(v,function(e){return e.id!==h})));return s({},(0,l.replace)(e,{userId:g,albums:E}));case u.START_WIZARD:return s({},e,{isWizardActive:!0,isLoaded:!1});case u.END_WIZARD:return s({},e,{isWizardActive:!1});case c.LOGIN_SUCCESS:case c.LOGOUT_SUCCESS:return s({},e,{isLoaded:!!e.isPending&&e.isLoaded});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=n(47),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var l=n(16),u=n(147),c=n(34),d=t.initialState=s({},(0,l.createCollection)({itemKey:"userId"}),{isPending:!1,isLoaded:!1,isWizardActive:!1,selectedAlbumId:null})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.LOAD_START:return a({},e,{isPending:!0});case s.LOAD_SUCCESS:return a({},(0,o.save)(e,t.data.bans),{isPending:!1});case s.LOAD_FAIL:return a({},e,{error:t.data.error,isPending:!1});case s.BAN:return a({},(0,o.save)(e,t.data.ban),{isPending:!1});case s.UNBAN:return a({},(0,o.delBy)(e,{bannedId:t.data.bannedIds}),{isPending:!1});case i.LOGOUT_SUCCESS:return a({},l);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(34),s=n(130),l=t.initialState=a({},(0,o.createCollection)(),{error:null,isPending:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{isPending:!0});case i.LOAD_SUCCESS:return a({},(0,o.save)(e,t.data),{isPending:!1});case i.LOAD_FAIL:return a({},e,{isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(355),s=t.initialState=a({},(0,o.createCollection)({itemKey:"userId"}),{isPending:!1})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case i.LOAD_START:return a({},e,{isPending:!0});case i.LOAD_SUCCESS:return a({},(0,o.save)(e,t.data),{isPending:!1});case i.LOAD_FAIL:return a({},e,{isPending:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(16),i=n(189),s=t.initialState=a({},(0,o.createCollection)({itemKey:"albumId"}),{isPending:!1})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g.LOAD_START:return c({},e,{isPending:!0});case g.LOAD_SUCCESS:return c({},(0,p.save)(e,t.data),{lostVideoIds:e.lostVideoIds.subtract((0,s.default)(t.data.videos,"id")),isPending:!1});case g.LOAD_FAIL:return{error:t.data.error,isPending:!1};case g.REMOVE:var n=t.data,r=n.userId,o=n.videoId,i=e.collection.get(r).videos,l=[].concat(a((0,u.default)(i,function(e){return e.id!==o})));return c({},(0,p.replace)(e,{userId:r,videos:l}));case g.WATCH_VIDEO_SUCCESS:return c({},e,{videoToWatch:t.data.video});case g.UPDATE_SUCCESS:var d=t.data,f=d.userId,v=d.video,E=e.collection.get(f).videos,y=[].concat(a((0,u.default)(E,function(e){return e.id!==v.id})),[v]),b={userId:f,videos:y};return c({},(0,p.save)(e,b),{lostVideoIds:e.lostVideoIds.remove(v.id)});case g.LOSE_VIDEO:return c({},e,{lostVideoIds:e.lostVideoIds.add(t.data.videoId)});case m.UPDATE_SUCCESS:return c({},e,{lostVideoIds:e.lostVideoIds.remove(t.data.video.id)});case m.LOAD_SUCCESS:return c({},e,{lostVideoIds:e.lostVideoIds.subtract((0,s.default)(t.data.videos,"id"))});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n(11),s=r(i),l=n(47),u=r(l),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var d=n(18),f=r(d),p=n(16),m=n(233),g=n(190),h=t.initialState=c({},(0,p.createCollection)({itemKey:"userId"}),{isPending:!1,videoToWatch:null,lostVideoIds:f.default.Set()})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d.SOCIAL_LINKS_UPDATE:return s({},e,{socialLinks:g(e,t.data.socialLinks)});case d.USERS_LOAD_START:return s({},e,{isPending:!0});case d.USERS_SAVE:return s({},(0,c.save)(e,t.data.users,t.data.usersNotFound));case d.USERS_REMOVE:return s({},(0,c.del)(e,t.data.userIds),{isPending:!1});case d.USERS_LOAD_FINISH:return s({},e,{isPending:!1});case d.USERS_UPDATE_TOKENS:return s({},e,{tokens:m(e,t.data.userTokens)});case d.USERS_UPDATE_GOLD_POINTS:return s({},e,{goldPoints:p(e,t.data.goldPoints)});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUsers=t.initialState=void 0;var o=n(96),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var l=n(18),u=r(l),c=n(16),d=n(37),f=t.initialState=s({},(0,c.createCollection)({shouldCreateNotFoundSet:!0}),{goldPoints:u.default.Map(),isPending:!1,socialLinks:u.default.Map(),tokens:u.default.Map()}),p=function(e,t){return e.goldPoints.withMutations(function(e){(0,i.default)(t,function(t){var n=t.userId,r=t.goldPoints;e.set(n,r)})})},m=function(e,t){return e.tokens.withMutations(function(e){(0,i.default)(t,function(t){var n=t.userId,r=t.tokens;e.set(n,r)})})},g=function(e,t){return e.socialLinks.withMutations(function(e){(0,i.default)(t,function(t,n){e.set(Number(n),t)})})};t.getUsers=function(e){return e.users.collection}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1042);Object.defineProperty(t,"broadcast",{enumerable:!0,get:function(){return r(a).default}});var o=n(1043);Object.defineProperty(t,"chat",{enumerable:!0,get:function(){return r(o).default}});var i=n(1044);Object.defineProperty(t,"favorites",{enumerable:!0,get:function(){return r(i).default}});var s=n(1045);Object.defineProperty(t,"lottery",{enumerable:!0,get:function(){return r(s).default}});var l=n(1046);Object.defineProperty(t,"modelFilter",{enumerable:!0,get:function(){return r(l).default}});var u=n(1048);Object.defineProperty(t,"modelsOnline",{enumerable:!0,get:function(){return r(u).default}});var c=n(1049);Object.defineProperty(t,"subscriptions",{enumerable:!0,get:function(){return r(c).default}});var d=n(1050);Object.defineProperty(t,"tips",{enumerable:!0,get:function(){return r(d).default}});var f=n(1051);Object.defineProperty(t,"thirdPartyApplication",{enumerable:!0,get:function(){return r(f).default}});var p=n(1052);Object.defineProperty(t,"viewCam",{enumerable:!0,get:function(){return r(p).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=n(5),i=n(56),s=r(i),l=n(63),u=r(l),c=n(161),d=n(43),f=n(81),p=function(e){return function(t){return function(n){var r=e.dispatch,i=e.getState,l=t(n);switch(n.type){case f.PREPARE_CAM_START:var p=d.UPDATE_TYPES.PREVIEW,m=d.UPDATE_TYPES.START_BROADCASTING;u.default.set("hasVisitedStartBroadcastingPage",!0),e.dispatch((0,c.load)(!0)),e.dispatch((0,d.updatePrepare)(m)),e.dispatch((0,d.updatePrepare)(p)),e.dispatch((0,d.validateModelProfile)(p));break;case f.FEEDBACK_UPDATE:s.default.set("isFeedbackUpdated",!0);break;case f.MIRRORED_CHANGE:s.default.set("isBroadcastMirrored",n.data.isBroadcastMirrored);break;case f.ADD_MODEL_WARNINGS:case f.REMOVE_MODEL_WARNING:var g=i(),h=g.broadcast.modelWarnings;if(h.size>0){var v=h.keySeq().first(),E=h.get(v),y=E.moderatorUsername,b=E.reason,_=E.id;r((0,a.showModal)(o.MODAL_TYPES.MODEL_WARNING,{moderatorUsername:y,reason:b,warningId:_}))}else r((0,a.hideModal)())}return l}}};t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),i=r(o),s=n(6),l=r(s),u=n(81),c=n(99),d=n(42),f=n(66),p=n(9),m=n(5),g=n(21),h=n(52),v=n(34),E=n(60),y=n(43),b=f.SYSTEM_MESSAGE_SUBTYPES.CONSOLE_ANNOUNCEMENT,_=f.SYSTEM_MESSAGE_SUBTYPES.INVISIBLE_MODE,S=f.SYSTEM_MESSAGE_SUBTYPES.PRIVATE_MODE_STARTED,O=f.SYSTEM_MESSAGE_SUBTYPES.TOKENS_GIVEAWAY_SIGNUP,P={consoleAnnouncement:{id:"consoleAnnouncement",action:function(e,t){return t((0,c.addSystemMessage)(e,b))},timeout:3e3},tokensGiveaway:{id:"tokensGiveaway",action:function(e,t,n){return!n.auth.isLoggedIn&&t((0,c.addSystemMessage)(e,O))},timeout:8e3}},T={},A=function(e,t,n,r){e.forEach(function(e){var a=P[e],o=a.id,s=a.action,l=a.timeout;o in T&&clearTimeout(T[o]),T[o]=setTimeout((0,i.default)(s,t,n,r),l)})},C=function(e){return function(t,n){var r=n(),a=(0,c.getRestrictionSystemMessageSubtype)(r,e);a&&t((0,c.addSystemMessage)(e,a))}},I=function(e,t){var n=e.dispatch,r=e.getState,o=t.data,i=o.uniqueName,s=a(o,["uniqueName"]),l=r(),u=l.auth,c=u.isLoggedIn,d=u.isLoggingOut,f=i;switch(i){case m.APP_BUTTONS.EMOJI_ERROR_SUBSCRIBE:n(c&&!d?(0,h.showSubscriptionPackage)(f):(0,h.showSubscriptionPackageAfterAuth)({backgroundImage:(0,g.getStaticUrl)(l,"common/images/bg-gm.jpg")},{triggerSource:f}));break;case m.APP_BUTTONS.MODEL_CHAT_MESSAGE_BUY_TOKENS:var p=s.model;n((0,E.startWizardWithActionOnEnter)(m.MODAL_TYPES.PURCHASE_TOKENS,{component:"SignUp",action:{backgroundImage:p.avatarUrl,type:"buyTokens",user:p},user:p,triggerSource:f}))}},w=function(e){return function(t){return function(n){var r=e.dispatch,a=e.getState;switch(n.type){case p.BUTTON:I(e,n)}var o=t(n);switch(n.type){case u.INIT:var i=a(),s=i.auth.currentUser.id,f=i.modelChat.modelId;r({type:c.INIT,data:{modelId:s}}),f!==s&&A(["consoleAnnouncement"],s,r,i);break;case v.LOGIN_SUCCESS:var m=a(),g=m.viewCam.model;g&&(r({type:c.REMOVE_MESSAGES,data:{types:["system","console"]}}),r(C(g.id)),r((0,c.updateInvisibleModeMessage)(g.id)),A(["consoleAnnouncement"],g.id,r,m),r((0,c.setChatError)(null)));break;case d.PRIVATE_START:var h=a().viewCam.model;h&&r((0,c.addSystemMessage)(h.id,S,!0));break;case y.UPDATE_SUCCESS:var E=a(),b=E.viewCam.model,O=n.data.type;b&&O===_&&r((0,c.updateInvisibleModeMessage)(b.id));break;case d.INIT:var P=(0,l.default)(n,"data.model.id"),T=a(),w=T.modelChat.modelId;r({type:c.REMOVE_MESSAGES,data:{types:["console"]}}),A(["consoleAnnouncement","tokensGiveaway"],P,r,T),w!==P&&r({type:c.INIT,data:{modelId:P}});break;case d.CAM_DATA_LOAD_SUCCESS:var N=a(),R=N.auth,M=R.isLoggingOut,L=R.isLoggingIn,k=M||L,D=N.viewCam.model,U=(0,l.default)(D,"id");!k&&U&&(r({type:c.REMOVE_MESSAGES,data:{types:["system","app"]}}),r((0,c.updateLovenseMessage)(U)),r(C(U)),r((0,c.updateInvisibleModeMessage)(U)))}return o}}};t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(167),i=r(o),s=n(13),l=r(s),u=n(106),c=r(u),d=n(108),f=n(554),p=n(34),m=n(97),g=function(e){return function(t){return function(n){var r=e.dispatch,o=e.getState,s=o(),u=s.config.data.hostRoot;switch(n.type){case d.ADD_GUEST_FAVORITE_SUCCESS:var g=n.data.favoriteId;if((0,m.getIsGuestFavoritesAvailable)(s)){var h=(0,f.getCookieGuestFavoriteIds)(),v=[].concat(a(h),[g]);c.default.set("guestFavoriteIds",v,{domain:"."+u})}break;case d.REMOVE_GUEST_FAVORITE_SUCCESS:if((0,m.getIsGuestFavoritesAvailable)(s)){var E=(0,f.getCookieGuestFavoriteIds)(),y=[].concat(a(i.default.apply(void 0,[E].concat(a(n.data.favoriteIds)))));c.default.set("guestFavoriteIds",y,{domain:"."+u})}break;case d.CLOSE_FAVORITE_BANNER:c.default.set("isGuestBannerHidden",!0,{domain:"."+u});break;case p.LOGIN_SUCCESS:var b=n.data,_=b.isLoggedIn,S=b.currentUser;if(_&&!S.isModel&&!S.isStudio){var O=(0,m.getGuestFavoriteIds)(s);(0,l.default)(O)||r((0,d.update)(S.id,O))}_&&(c.default.delete("guestFavoriteIds",{domain:"."+u}),c.default.delete("isGuestBannerHidden",{domain:"."+u}))}return t(n)}}};t.default=g},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(366),i=n(9),s=n(5),l=n(21),u=function(e){return{action:{type:"tokenGiveaway",backgroundImage:(0,l.getStaticUrl)(e,"users/components/ui/SignUp/images/signup-lottery.jpg"),shouldBypassActionPrefix:!0},component:"SignUp",className:"auth-modal-signup auth-modal-signup-lottery"}},c=function(e,t){var n=e.dispatch,l=e.getState,c=t.data,d=c.uniqueName,f=r(c,["uniqueName"]),p=l(),m=d;switch(d){case s.APP_BUTTONS.GIVEAWAY_MODAL_REGISTER:n((0,i.showModal)(s.MODAL_TYPES.AUTH,a({},u(p),{triggerSource:f.triggerSource||m})));break;case s.APP_BUTTONS.GIVEAWAY_REGISTER:case s.APP_BUTTONS.GIVEAWAY_SYSTEM_MESSAGE_REGISTER:n((0,i.showModal)(s.MODAL_TYPES.AUTH,a({},u(p),{triggerSource:m})));break;case s.APP_BUTTONS.VIEWCAM_LOTTERY_CLAIM:n((0,o.claim)());break;case s.APP_BUTTONS.VIEWCAM_LOTTERY_PARTICIPATE:n((0,o.participate)())}},d=function(e){return function(t){return function(n){switch(n.type){case i.BUTTON:c(e,n)}return t(n)}}};t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),o=r(a),i=n(142),s=r(i),l=n(115),u=r(l),c=n(6),d=r(c),f=n(84),p=r(f),m=n(1047),g=r(m),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=n(31),E=n(63),y=r(E),b=n(42),_=n(118),S=n(87),O=n(292),P=n(12),T=n(45),A=n(34),C=function(e){return Boolean(e&&0===e.indexOf("/search/"))},I=(0,o.default)(function(e,t){e(t?(0,O.search)(t):(0,S.load)())},P.DEBOUNCE_LOAD_MODEL_LIST),w=["limit","offset","tagAlias","tagKey","searchString","sortBy"],N=function(e,t){var n=e.modelFilter,r=t.modelFilter;return(0,s.default)(w,function(e){return n[e]!==r[e]&&!(0,g.default)(r[e])})},R=function(e,t){var n=t.data,r=t.type,a=e.modelFilter,o=(0,p.default)(n,"tagAlias")&&(0,d.default)(n,"tagAlias")!==a.tagAlias,i=o?{type:r,data:h({},n,{offset:0,limit:a.initLimit,sortBy:(0,T.getDefaultModelSortingType)()})}:{data:n,type:r};return a.tagAlias&&n.searchString?i.data.callbackPage="/tags/"+a.tagAlias:o&&(i.data.callbackPage=""),i},M=function(e){return function(t){return function(n){switch(n.type){case _.COLLAPSE_SEARCH_FORM:var r=e.getState,a=e.dispatch,o=r(),i=o.modelFilter.callbackPage,s=(0,d.default)(n,"data.didByUser");return i&&s&&a((0,v.push)(i)),t(n);case v.LOCATION_CHANGE:var l=e.getState,c=e.dispatch,f=l(),m=f.modelFilter.callbackPage,g=(0,d.default)(n,"payload.pathname"),h=(0,d.default)(f,"routing.location.pathname")||"",E=C(g),S=C(h),O=S&&!E&&g!==m;return O&&"/"!==g&&c({type:_.SAVE_FILTER_PARAMS,data:{callbackPage:"",searchString:""}}),O&&c({type:_.COLLAPSE_SEARCH_FORM}),t(n);case _.SAVE_MODEL_SORT_TYPE:case _.SAVE_API_FILTER_PARAMS:case _.SAVE_FILTER_PARAMS:var P=e.dispatch,T=e.getState,w=T(),M=n.data.offset;(0,p.default)(n.data,"offset")?y.default.set("modelListApiFilterParams",{offset:M}):y.default.remove("paginatedListLastViewedItemIndex"),y.default.set("modelListParams",n.data);var L=R(w,n),k=t(L),D=T();return P({type:D.modelFilter.searchString?_.EXPAND_SEARCH_FORM:_.COLLAPSE_SEARCH_FORM}),N(w,D)&&I(P,D.modelFilter.searchString),k;case A.LOGIN_SUCCESS:case A.LOGOUT_SUCCESS:case b.UPDATE_VIEWCAM_MODEL_USERNAME:var U=e.dispatch,j=e.getState,F=j(),B=F.modelFilter.searchString;I(U,B);break;case _.SAVE_ACTIVE_FILTER_PARAMS:var H=e.getState().modelFilter;y.default.set("activeModelListParams",(0,u.default)(H,"activeModelListParams"))}return t(n)}}};t.default=M},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(87),a=n(63),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=function(){return function(e){return function(t){switch(t.type){case r.CHANGE_TAGS_PREFERENCE:var n=t.data;n=void 0===n?{}:n;var a=n.preference,i=void 0===a?"":a;return o.default.set("currentTagsPreference",i),e(t)}return e(t)}}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(31),i=n(28),s=n(9),l=n(5),u=n(68),c=n(21),d=n(57),f=n(131),p=n(52),m=n(229),g=n(373),h=n(98),v=n(37),E=n(38),y=function(e,t){var n=e.dispatch,r=e.getState,a=t.data.uniqueName,o=r(),i=a;switch(a){case l.APP_BUTTONS.GOLD_MEMBERSHIP_PAGE_RENEW:case l.APP_BUTTONS.PROFILE_RENEW:case l.APP_BUTTONS.USER_LEVELS_MODAL_RENEW:n((0,g.prepareRenewal)(i,(0,u.getModelPageUsername)(o)));break;case l.APP_BUTTONS.INVISIBLE_MODE_MODAL_SUBSCRIBE:n((0,p.showSubscriptionPackage)(i));break;case l.APP_BUTTONS.USER_LEVELS_MODAL_MAKE_ME_GOLD:n((0,E.getCurrentUserProfile)(o)?(0,p.showSubscriptionPackage)(i):(0,p.showSubscriptionPackageAfterAuth)({backgroundImage:(0,c.getStaticUrl)(o,"common/images/bg-gm.jpg")},{triggerSource:i}))}},b=function(e){return function(t){return function(n){var r=e.dispatch,l=e.getState,u=l();switch(n.type){case s.BUTTON:y(e,n);break;case f.LOAD_SUCCESS:r({type:h.UPDATE,data:(0,h.createRelationMap)("isSubscribed",(0,a.default)(n.data.subscriptions,"modelId"),!0)});break;case m.CONVERSATIONS_ADD_SUBSCRIPTION:r((0,i.updatePushNotificationPermission)());break;case f.ADD_SUCCESS:var c=(0,a.default)(n.data.subscriptions,"modelId");r((0,v.loadMore)(c)),r({type:h.UPDATE,data:(0,h.createRelationMap)("isSubscribed",c,!0)});break;case f.UPDATE_SUCCESS:var p=(0,a.default)(n.data.subscriptions,"modelId");r((0,i.updatePushNotificationPermission)()),r((0,i.success)((0,d.translate)(u,{messageId:"notifications.subscriptions.subscribeSuccess"}),"subscription")),r({type:h.UPDATE,data:(0,h.createRelationMap)("isSubscribed",p,!0)});break;case f.REMOVE_SUCCESS:r({type:h.UPDATE,data:(0,h.createRelationMap)("isSubscribed",n.data.modelIds,!1)}),r((0,i.success)((0,d.translate)(u,{messageId:"notifications.subscriptions.unsubscribeSuccess"}),"subscription"));break;case f.REMOVE_SUCCESS_MAIL:r({type:h.UPDATE,data:(0,h.createRelationMap)("isSubscribed",n.data.modelIds,!1)}),r((0,i.success)((0,d.translate)(u,{messageId:"notifications.subscriptions.emailUnsubscribeSuccess"}),{username:n.data.model.username})),r((0,o.push)("/"));break;case f.REMOVE_SUCCESS_PROMO:r({type:h.UPDATE,data:(0,h.createRelationMap)("isSubscribed",n.data.modelIds,!1)}),r((0,i.warning)((0,d.translate)(u,{messageId:"notifications.subscriptions.promoUnsubscribeSuccess"})));break;case f.REMOVE_FAIL_MAIL:r((0,i.error)((0,d.translate)(u,{messageId:"notifications.subscriptions.unsubscribeError"})));break;case f.REMOVE_FAIL_PROMO:r((0,i.error)((0,d.translate)(u,{messageId:"notifications.subscriptions.promoUnsubscribeError"})))}return t(n)}}};t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28),a=n(42),o=function(e){return function(t){return function(n){var o=e.dispatch;switch(n.type){case a.SEND_TIP_FAIL:case a.SEND_OFFLINE_TIP_FAIL:o((0,r.error)(n.data.error.message,"viewCam"))}return t(n)}}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(369),a=n(66),o=n(81),i=function(e){return function(t){return function(n){var i=e.dispatch,s=e.getState;switch(n.type){case r.LOVENSE_UPDATE_SETTINGS:var l=s(),u=l.auth,c=u.isLoggedIn,d=u.currentUser,f=l.broadcast.isCamActive;c&&f&&i((0,r.saveLovenseSettings)(d.id,n.data.levels));break;case r.LOVENSE_UPDATE_TOY_STATUS:var p=s(),m=p.auth.currentUser,g=p.broadcast.isCamActive,h=p.thirdPartyApplication,v=h.levels,E=h.status;g&&n.data.status!==E&&(i((0,r.sendLovenseMessage)({type:a.LOVENSE_MESSAGE_SUBTYPES.TOY,status:n.data.status})),n.data.status===a.LOVENSE_TOY_STATUS.OFF&&i((0,r.removeLovenseSettings)(m.id)),n.data.status===a.LOVENSE_TOY_STATUS.ON&&v&&i((0,r.saveLovenseSettings)(m.id,v)));break;case o.CAM_START:var y=s(),b=y.auth.currentUser,_=y.thirdPartyApplication.levels;_&&i((0,r.saveLovenseSettings)(b.id,_));break;case o.CAM_RESET:var S=s(),O=S.auth.currentUser;S.thirdPartyApplication.levels&&i((0,r.removeLovenseSettings)(O.id))}return t(n)}}};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=r(o),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(9),u=n(51),c=n(5),d=n(56),f=r(d),p=n(63),m=r(p),g=n(42),h=n(45),v=n(71),E=n(60),y=n(38),b=n(44),_=function(e,t){var n=e.dispatch,r=e.state,a=t.type,o=void 0===a?null:a,l=t.modalType,u=t.modelId,d=t.isSpy,f=void 0!==d&&d,p=t.triggerSource,m=r.auth,g=m.isLoggedIn&&!m.isLoggingOut,h=(0,y.getCurrentUserProfile)(r),v=(0,i.default)(h,"tokens",0),_=(0,b.getUserById)(r,u),S={user:_,currentUserTokens:v,triggerSource:p};l===c.MODAL_TYPES.START_PRIVATE&&(S.isSpy=f),g||(S=s({},S,{component:"SignUp",action:{backgroundImage:_.avatarUrl,type:o,user:_}})),n((0,E.startWizardWithActionOnEnter)(l,S))},S=function(e,t){var n=e.dispatch,r=e.state,a=t.minProp,o=t.modelId,s=t.privateType,u=t.triggerSource,d=(0,y.getCurrentUserProfile)(r),f=(0,i.default)(d,"tokens",0),p=(0,b.getUserById)(r,o),m=f>=p[a],v=d.isAdmin||d.isSupport,_=(0,h.getIsMyStudioModel)(r)&&"spy"===s;if(!m&&!v&&!_)return void n((0,l.showModal)(c.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:u}));n((0,E.closeModal)()),n((0,g.proposePrivate)(p.id,s))},O=function(e,t){var n=e.dispatch,r=e.getState,o=t.data,i=o.uniqueName,s=a(o,["uniqueName"]),d=r(),f={dispatch:n,state:d},p=i;switch(i){case c.APP_BUTTONS.VIEWCAM_BUY_TOKENS:var m=s.modelId,h=(0,b.getUserById)(d,m);n((0,E.startWizardWithActionOnEnter)(c.MODAL_TYPES.PURCHASE_TOKENS,{component:"SignUp",action:{backgroundImage:h.avatarUrl,type:"buyTokens",user:h},user:h,triggerSource:p}));break;case c.APP_BUTTONS.START_PRIVATE_MODAL_PRIVATE:case c.APP_BUTTONS.START_PRIVATE_MODAL_P2P:case c.APP_BUTTONS.START_PRIVATE_MODAL_SPY:var v=s.minProp,y=s.modelId,O=s.privateType;S(f,{minProp:v,modelId:y,privateType:O,triggerSource:p});break;case c.APP_BUTTONS.VIEWCAM_START_PRIVATE:_(f,{type:"startPrivate",modalType:c.MODAL_TYPES.START_PRIVATE,modelId:s.modelId,triggerSource:p});break;case c.APP_BUTTONS.VIEWCAM_START_SPY:_(f,{modalType:c.MODAL_TYPES.START_PRIVATE,modelId:s.modelId,isSpy:!0,triggerSource:p,type:"startSpy"});break;case c.APP_BUTTONS.VIEWCAM_SEND_ONLINE_TIP:_(f,{modalType:c.MODAL_TYPES.SEND_TIP,modelId:s.modelId,triggerSource:p,type:"sendTip"});break;case c.APP_BUTTONS.VIEWCAM_SEND_OFFLINE_TIP:_(f,{modalType:c.MODAL_TYPES.SEND_OFFLINE_TIP,modelId:s.modelId,triggerSource:p,type:"sendTip"});break;case c.APP_BUTTONS.PLAYER_FULLSCREEN:var P=d.auth,T=P.isLoggedIn,A=P.isLoggingOut,C=d.viewCam.isFullscreen,I=s.model;if(T&&!A){n((0,g.toggleFullscreen)(!C));break}n((0,l.showModal)(c.MODAL_TYPES.AUTH,{action:{type:"watchInFullscreen",user:I},component:"SignUp",className:"auth-modal-signup",triggerSource:p}));break;case c.APP_BUTTONS.PLAYER_SIGNUP:var w=s.model;n((0,l.showModal)(c.MODAL_TYPES.AUTH,{action:{backgroundImage:w.avatarUrl,type:"joinMe",user:w},component:"SignUp",className:"auth-modal-signup"}));break;case c.APP_BUTTONS.SEND_ONLINE_TIP_MODAL_SEND:var N=s.isPrivate,R=s.message,M=s.modelId,L=s.tipsAmount;L&&(n((0,g.sendTip)(M,L,R,N,u.TIP_SOURCES.DIALOG)),n((0,E.closeModal)()));break;case c.APP_BUTTONS.SEND_OFFLINE_TIP_MODAL_SEND:var k=s.message,D=s.modelId,U=s.tipsAmount;U&&(n((0,g.sendOfflineTip)(D,U,k,u.TIP_SOURCES.DIALOG)),n((0,E.closeModal)()));break;case c.APP_BUTTONS.VIEWCAM_STOP_PRIVATE:case c.APP_BUTTONS.VIEWCAM_STOP_P2P:n((0,g.stopPrivate)());break;case c.APP_BUTTONS.VIEWCAM_STOP_SPY:n((0,g.stopSpy)());break;case c.APP_BUTTONS.VIEWCAM_TOKENS_LEFT_MESSAGE:n((0,l.showModal)(c.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:p}))}},P=function(e){return function(t){return function(n){var r=e.getState(),a=e.dispatch,o=r.viewCam,u=o.model,c=o.privateStartedAt,d=(0,i.default)(n,"data.privateStartedAt",c),p=(0,v.getIsInSpyMode)(r),h=(0,v.getPrivateMode)(r);switch(n.type){case l.BUTTON:O(e,n);break;case g.INIT:h||f.default.set("spyStartedAt",0);break;case g.VIRTUAL_PRIVATE_START:case g.PRIVATE_START:if(u&&h){if(p){var E=(new Date).getTime();f.default.set("spyStartedAt",E)}return t(s({},n,{data:{privateStartedAt:p?new Date:d}}))}break;case g.SET_PLAYER_TYPE:n.data.isPermanent?f.default.set("forcePlayerType",n.data.forcePlayerType):m.default.set("forcePlayerType",n.data.forcePlayerType),a((0,g.toggleSettings)(!1));break;case g.PRIVATE_STOP:f.default.set("spyStartedAt",0);break;case g.VIEWCAM_VOLUME_CHANGE:f.default.set("playerVolume",n.data.playerVolume)}return t(n)}}};t.default=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1054),i=r(o),s=n(35),l=r(s),u=n(14),c=r(u),d=n(6),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=n(81),g=n(99),h=n(87),v=n(131),E=n(42),y=n(12),b=n(66),_=n(72),S=n(71),O=n(45),P=n(360),T=n(79),A=n(578),C=n(9),I=n(51),w=n(5),N=n(59),R=r(N),M=n(297),L=r(M),k=n(19),D=n(63),U=r(D),j=n(68),F=n(21),B=n(52),H=n(196),V=n(229),G=n(197),x=n(43),W=n(296),Y=n(44),K=function(e,t){return R.default.action({action:e,value:t})},q=function(e,t){return(0,Y.pickModelFieldsForAmplitude)((0,Y.getUserById)(e,t))},z={action:"click",category:"banner",label:"halloween2017UnderSubheaderBanner"},X=function(e,t){var n=t.data,r=n.uniqueName,o=a(n,["uniqueName"]),i=o.modelId,s=i&&q(e,i),l=(0,S.getBroadcastSettings)(e);switch(r){case w.APP_BUTTONS.VIEWCAM_SEND_ONLINE_TIP:case w.APP_BUTTONS.VIEWCAM_SEND_OFFLINE_TIP:K(I.AMPLITUDE_EVENTS.CLICK_SEND_TIP,p({},s,l));break;case w.APP_BUTTONS.VIEWCAM_START_PRIVATE:K(I.AMPLITUDE_EVENTS.CLICK_START_PRIVATE,p({},s,l));break;case w.APP_BUTTONS.VIEWCAM_START_SPY:K(I.AMPLITUDE_EVENTS.CLICK_SPY,p({},s,l));break;case w.APP_BUTTONS.VIEWCAM_STOP_SPY:K(I.AMPLITUDE_EVENTS.SPY_END_CLICK,s);break;case w.APP_BUTTONS.VIEWCAM_STOP_P2P:K(I.AMPLITUDE_EVENTS.CLICK_END_CAM2CAM,s);break;case w.APP_BUTTONS.VIEWCAM_STOP_PRIVATE:K(I.AMPLITUDE_EVENTS.CLICK_END_PRIVATE,s);break;case w.APP_BUTTONS.VIEWCAM_LOTTERY_CLAIM:K(I.AMPLITUDE_EVENTS.CLICK_GIVEAWAY_CLAIM);break;case w.APP_BUTTONS.VIEWCAM_LOTTERY_PARTICIPATE:K(I.AMPLITUDE_EVENTS.CLICK_GIVEAWAY_PARTICIPATE);break;case w.APP_BUTTONS.SEND_ONLINE_TIP_MODAL_SEND:K(I.AMPLITUDE_EVENTS.CLICK_SEND_TIP_DIALOG_SEND,p({},s,{tipType:I.TIP_TYPES.ONLINE}));break;case w.APP_BUTTONS.SEND_OFFLINE_TIP_MODAL_SEND:K(I.AMPLITUDE_EVENTS.CLICK_SEND_TIP_DIALOG_SEND,p({},s,{tipType:I.TIP_TYPES.OFFLINE}));break;case w.APP_BUTTONS.START_PRIVATE_MODAL_PRIVATE:K(I.AMPLITUDE_EVENTS.CLICK_PRIVATE_DIALOG_PRIVATE,s);break;case w.APP_BUTTONS.START_PRIVATE_MODAL_P2P:K(I.AMPLITUDE_EVENTS.CLICK_PRIVATE_DIALOG_CAM2CAM,s);break;case w.APP_BUTTONS.START_PRIVATE_MODAL_SPY:K(I.AMPLITUDE_EVENTS.CLICK_SPY_DIALOG_SPY,s);break;case w.APP_BUTTONS.HALLOWEEN_GIVEAWAY_BANNER:R.default.action(z,{useGa:!0});break;case w.APP_BUTTONS.PLAYER_SIGNUP:var u=(0,S.getBroadcastSettings)(e),c=(0,j.getModelPageUsername)(e);K(I.AMPLITUDE_EVENTS.DIALOG_SIGNUP,p({},u,{source:"Viewcam_JoinMeBtn",modelName:c}))}},Z={},Q=function(e,t){if(!t.config.whiteLabelId&&!Z[e]){document.createElement("img").src=e,Z[e]=!0}},J=function(e,t){var n=t.modalName,r=t.params;switch(n){case w.MODAL_TYPES.PURCHASE_TOKENS:var a=(0,S.getBroadcastSettings)(e),o=(0,j.getModelPageUsername)(e);K(I.AMPLITUDE_EVENTS.BUY_TOKENS_DIALOG,p({source:(0,f.default)(r,"triggerSource"),modelName:o},a)),Q(I.TRACKING_PIXEL_API_URLS.TOKENS_PURCHASE_DIALOG,e)}},$=function(e){var t=e.abTesting.abTestingData.playerOnThumbHover,n=e.analytics.eventIndexesMap,r=e.modelsOnline,a=r.collection,o=r.filteredCount,i=r.liveCount,s=e.modelFilter,l=s.sortBy,u=s.tagAlias,c=n.get("lastIndexShowId"),d=(0,O.getFavoritesModelsIds)(e),f=d.length?","+d+",":"",p=u||y.DEFAULT_INDEX_TAG_ALIAS;R.default.indexShow({amountOfLoadedThumbs:a.size,amountOfModels:i,amountOfThumbs:o,columns:(0,F.getColumnCount)(),eventId:c,favsPositions:f,indexModification:p,rows:(0,F.getRowCount)(),sorting:l,test1:t})},ee=function(e,t){var n=e.abTesting.abTestingData.playerOnThumbHover,r=e.analytics.eventIndexesMap,a=t.data.modelId,o=r.get("lastIndexShowId");R.default.clickOnThumb({indexShowId:o,thumbPosition:(0,O.getModelPosition)(e,a),isFavourited:(0,O.getIsModelFavorited)(e,a),test1:n})},te=l.default,ne=function(e){return function(t){return function(n){var r=e.getState,a=r();switch(n.type){case g.ADD_MESSAGE:var o=n.data,s=o.messages;o.type===b.MESSAGE_TYPES.CONSOLE&&s.forEach(function(e){var t=e.details.subtype;(0,c.default)(I.ANALYZED_MESSAGE_SUBTYPES,t)&&(R.default.sendConsoleMessage((0,i.default)(t)),K(I.AMPLITUDE_EVENTS.CHAT_COMMAND_USE,{commandName:t}))});break;case C.BUTTON:X(a,n);break;case T.CHANGE_LOCALE_START:K(I.AMPLITUDE_EVENTS.SELECT_LANGUAGE,{lang:n.data.nextLocale});break;case P.INDEX_CLICK_ON_THUMB:ee(a,n);break;case P.INDEX_SHOW:var u=t(n),d=r();return $(d),u;case h.LOAD_SUCCESS:var O=t(n),N=e.getState(),M=N.routing,D=(0,f.default)(M,"location.pathname");return(0,k.getIsOnIndexRoute)(D)&&e.dispatch((0,P.triggerIndexShow)()),O;case B.PURCHASE_COMPLETE:Q(I.TRACKING_PIXEL_API_URLS.TOKENS_PURCHASE_SUCCESS,a);break;case m.CAM_START:var F=a.auth.currentUser;K(I.AMPLITUDE_EVENTS.START_BROADCASTING,(0,Y.pickModelFieldsForAmplitude)(F,{broadcastMethod:n.data.playerType,uploadSpeed:n.data.uploadSpeed}));break;case A.PAGE_VIEW:var z=a.routing.location.pathname;R.default.pageView(z);break;case g.SEND_SUCCESS:var Z=r(),ne=Z.auth,re=ne.currentUser,ae=ne.isLoggedIn,oe=n.data,ie=oe.isConsoleMessage,se=oe.modelId,le=!ae||re.id!==se,ue=U.default.get("publicChatInitiatedWith");if(!(0,c.default)(ue,se)&&le&&!ie){var ce=(0,S.getBroadcastSettings)(Z),de=q(Z,se);U.default.update("publicChatInitiatedWith",[se]),K(I.AMPLITUDE_EVENTS.CHAT_INITIATED,p({},ce,de))}break;case E.SEND_TIP_SUCCESS:case E.SEND_OFFLINE_TIP_SUCCESS:var fe=n.data,pe=fe.amount,me=fe.modelId,ge=fe.tipSource,he=fe.tipType,ve=q(a,me);K(I.AMPLITUDE_EVENTS.TOKENS_SENT,p({},ve,{amount:pe,tipSource:ge,tipType:he})),ge===I.TIP_SOURCES.CONSOLE&&K(I.AMPLITUDE_EVENTS.CHAT_COMMAND_USE,{commandName:b.CONSOLE_MESSAGE_SUBTYPES.TIP});break;case v.UPDATE_SUCCESS:var Ee=n.data.source;(0,f.default)(n.data,"subscriptions",[]).map(function(e){return e.modelId}).filter(Boolean).forEach(function(e){var t=(0,Y.getUserById)(a,e),n={action:"subscribe",source:Ee};t.isModel&&(n.modelParameters=(0,Y.pickModelFieldsForAmplitude)(t)),R.default.addUserProps((0,Y.pickUserFieldsForAmplitude)(a.auth.currentUser)),K(I.AMPLITUDE_EVENTS.CLICK_NOTIFY_WHEN_ONLINE,n)});break;case v.REMOVE_SUCCESS:var ye=n.data.source;(0,f.default)(n.data,"modelIds",[]).forEach(function(e){var t=(0,Y.getUserById)(a,e),n={action:"unsubscribe",source:ye};t.isModel&&(n.modelParameters=(0,Y.pickModelFieldsForAmplitude)(t)),R.default.addUserProps((0,Y.pickUserFieldsForAmplitude)(a.auth.currentUser)),K(I.AMPLITUDE_EVENTS.CLICK_NOTIFY_WHEN_ONLINE,n)});break;case V.CONVERSATIONS_REMOVE_SUBSCRIPTION:var be=n.data.counterpartId,_e=(0,Y.getUserById)(a,be),Se={action:"unsubscribe",interlocutorUserType:(0,Y.getUserRole)(_e)};_e.isModel&&(Se.modelParameters=(0,Y.pickModelFieldsForAmplitude)(_e)),R.default.addUserProps((0,Y.pickUserFieldsForAmplitude)(a.auth.currentUser)),K(I.AMPLITUDE_EVENTS.CLICK_NOTIFY_WHEN_NEW_MESSAGES,Se);break;case V.CONVERSATIONS_ADD_SUBSCRIPTION:var Oe=n.data.counterpartId,Pe=(0,Y.getUserById)(a,Oe),Te={action:"subscribe",interlocutorUserType:(0,Y.getUserRole)(Pe)};Pe.isModel&&(Te.modelParameters=(0,Y.pickModelFieldsForAmplitude)(Pe)),R.default.addUserProps((0,Y.pickUserFieldsForAmplitude)(a.auth.currentUser)),K(I.AMPLITUDE_EVENTS.CLICK_NOTIFY_WHEN_NEW_MESSAGES,Te);break;case G.SEND_SUCCESS:var Ae=n.data.counterpartId,Ce=(0,Y.getUserById)(a,Ae),Ie=U.default.get("privateChatInitiatedWith");if(Ce.isModel&&!(0,c.default)(Ie,Ae)){var we=(0,S.getBroadcastSettings)(a),Ne=(0,Y.pickModelFieldsForAmplitude)(Ce);K(I.AMPLITUDE_EVENTS.CHAT_PRIVATE_INITIATED,p({},we,Ne)),U.default.update("privateChatInitiatedWith",[Ae])}break;case E.PRIVATE_START:var Re=a.viewCam.model,Me=(0,S.getIsInSpyMode)(a),Le=(0,S.getPrivateMode)(a),ke=void 0;ke=Me?I.AMPLITUDE_EVENTS.SPY_START:Re.status===y.MODEL_STATUSES.STATUS_P2P?I.AMPLITUDE_EVENTS.CAM2CAM_START:I.AMPLITUDE_EVENTS.PRIVATE_START,Re&&Le&&K(ke,q(a,Re.id));break;case W.SIGNUP_SOURCE_CHANGED:var De=(0,S.getBroadcastSettings)(a),Ue=(0,j.getModelPageUsername)(a);if(K(I.AMPLITUDE_EVENTS.DIALOG_SIGNUP,p({},De,{source:n.data.source,modelName:Ue})),(0,j.getIsOnUnnavigableSignupRoute)(a))break;Q(I.TRACKING_PIXEL_API_URLS.SIGNUP_DIALOG,a);break;case H.CONFIRM_SUCCESS:Q(I.TRACKING_PIXEL_API_URLS.EMAIL_CONFIRMATION_SUCCESS,a);break;case C.SHOW_MODAL:J(a,n.data);break;case x.UPDATE_SUCCESS:var je=a.auth.currentUser,Fe=n.data,Be=Fe.user;Fe.type===x.UPDATE_TYPES.INVISIBLE_MODE&&!je.isInvisible&&Be.isInvisible&&K(I.AMPLITUDE_EVENTS.INVISIBLE_SWITCH_ON);break;case E.WATCH_MODEL_BEGIN:var He=a.viewCam.isOwnShow,Ve=a.ui.isDocumentVisible,Ge=n.data.modelId;if(He||!Ve)break;var xe=I.AMPLITUDE_EVENTS_TIMEOUTS[I.AMPLITUDE_EVENTS.WATCH_MODEL];te=l.default,L.default.stopTimeout(I.ANALYTIC_TIMEOUT_IDS.WATCH_MODEL),L.default.startTimeout(I.ANALYTIC_TIMEOUT_IDS.WATCH_MODEL,xe.asMilliseconds(),function(){var t=e.getState(),n=t.ui.isDocumentVisible,r=function(){var t=e.getState(),n=t.viewCam.viewCamSettings.broadcastType;K(I.AMPLITUDE_EVENTS.WATCH_MODEL,p({},q(t,Ge),{broadcastMethod:n,duration:xe.asMinutes(),playerType:(0,_.getPlayerType)(t),screenOrientation:w.BROWSER_CAPABILITIES.getScreenOrientation()})),te=l.default};n?r():te=r});break;case E.RESET:L.default.stopTimeout(I.ANALYTIC_TIMEOUT_IDS.WATCH_MODEL);break;case C.UPDATE_DOCUMENT_VISIBILITY:n.data.isDocumentVisible&&te()}return t(n)}}};t.default=ne},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.i18n;p.default.locale(t.current)}function o(e,t){var n=e.features.abTesting;t((0,v.initAbTests)((0,c.default)(n,["autoInit",!0])))}function i(e){var t=e.csrfToken,n=e.csrfTimestamp,r=e.csrfNotifyTimestamp;O.default.updateCsrfParams({csrfToken:t,csrfTimestamp:n,csrfNotifyTimestamp:r})}function s(e,t){_.default.bindConfigData(e,t)}function l(e){return e.snapshotTimeout?1e3*(e.snapshotTimeout+1):11e3}Object.defineProperty(t,"__esModule",{value:!0}),t.publishGlobalDebug=t.getIsDebugEnabled=void 0;var u=n(47),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(15),p=r(f),m=n(79),g=n(109),h=n(170),v=n(575),E=n(114),y=r(E),b=n(59),_=r(b),S=n(159),O=r(S),P=n(1056),T=r(P),A=n(56),C=r(A),I=n(29),w=n(87),N=n(150),R=t.getIsDebugEnabled=function(e){var t=e.debug,n=e.env;return!0===t||Boolean(n)&&n!==y.default.ENV.PRODUCTION||C.default.has("isConsoleDebugEnabled")},M=(t.publishGlobalDebug=function(){"undefined"!=typeof window&&"undefined"!=typeof REACT_PERF&&(window.Perf=REACT_PERF)},function(e){if("undefined"!=typeof window){var t=e.cdnMonitoring,n=t.distribution,r=t.latencyImage,a=t.bandwidthImage;T.default.measure({distribution:n,latencyImage:r,bandwidthImage:a})}}),L=function(e){return function(t){return function(n){switch(n.type){case g.LOAD_SUCCESS:var r=e.dispatch,u=e.getState,c=u(),f=(c.config.whiteLabelId,n.data),p=f.data,v=f.config,E=f.serverTime,y=R(v);M(v),a(v),o(v,r),r((0,w.setLiveCount)(v.liveCount)),"undefined"!=typeof window&&(setTimeout(function(){return r({type:g.CLEANUP_SSR})},l(v)),i(p),s(v,p),r((0,N.applyNotificationSettings)(p)),r((0,m.updateSettings)({data:p,config:v,serverTime:E})));var b=t(d({},n,{isDebugEnabled:y}));return(0,I.setIsDebugEnabled)(y),r((0,h.reinit)()),b}return t(n)}}};t.default=L},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.percentCheck=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(20),l=r(s),u=n(159),c=r(u),d=t.percentCheck=function(e){return 100*Math.random()<e},f=function e(){var t=this;o(this,e),this.delay=function(e){return new l.default(function(t){return setTimeout(t,e)})},this.measure=function(e){var n=e.distribution,r=e.latencyImage,a=e.bandwidthImage;if(!d(n))return l.default.resolve();var o=[{url:r,id:"latency"},{url:r,id:"latencyRepeat"},{url:a,id:"bandwidth"}];return t.delay(1e4).then(function(){return l.default.mapSeries(o,t.makeUrlMeasure)}).then(t.processResponse).then(t.sendToServer).catch(function(e){throw e})},this.makeUrlMeasure=function(e){var t=e.url,n=e.id;return new l.default(function(e,r){var a=new Image,o=t+"?_="+(new Date).getTime(),i=performance.now();a.addEventListener("load",function(){var t=void 0;try{var r=performance.getEntriesByName(o)[0].duration;if(0===r)throw new Error("Invalid duration");t=r}catch(e){t=performance.now()-i}e({id:n,tookTime:Math.round(t)})}),a.addEventListener("error",function(){r(new Error("CDN measurement download image error"))}),a.src=o})},this.processResponse=function(e){return e.reduce(function(e,t){var n=t.id,r=t.tookTime;return i({},e,a({},n,r))},{})},this.sendToServer=function(e){return c.default.put("/cdnMonitoring",e)}},p=new f;t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),i=n(9),s=n(28),l=n(5),u=n(127),c=n(235),d=r(c),f=n(56),p=r(f),m=n(63),g=r(m),h=n(21),v=n(52),E=n(60),y=function(e,t){var n=e.dispatch,r=e.getState,a=t.data.uniqueName,i=r(),s=a;switch(a){case l.APP_BUTTONS.ADVERTISEMENT_IDEAL_PAYMENT:p.default.set("tryIdealNotificationHidden",!0),n((0,v.showPreselectedMethodAfterAuth)("ideal",{authParams:{action:{isDefaultBanner:!0}},triggerSource:s}));break;case l.APP_BUTTONS.ADVERTISEMENT_GIFT_CARDS:p.default.set("giftCardsNotificationHidden",!0),n((0,v.showPreselectedMethodAfterAuth)("giftcard",{authParams:{action:{backgroundImage:(0,h.getStaticUrl)(i,"common/images/bg-bt.jpg"),type:"buyTokens"},className:"auth-modal-signup auth-modal-signup-bonus-tokens"},triggerSource:s}));break;case l.APP_BUTTONS.ADVERTISEMENT_PAYMENT_METHODS:var u=i.auth,c=u.isLoggedIn,d=u.isLoggingOut,f=i.config,m=c&&!d,g=(0,o.default)(f,"data.whiteLabel.url.signup"),y=f.whiteLabelId;if(p.default.set("newPaymentMethodsHidden",!0),!m&&y&&"undefined"!=typeof window){var b=l.BASE_URL+"/buy-tokens";location.href=g+"?url="+encodeURIComponent(b);break}n((0,E.startWizard)(l.MODAL_TYPES.PURCHASE_TOKENS,{component:"SignUp",triggerSource:s}));break;case l.APP_BUTTONS.ADVERTISEMENT_PAYMENT_METHOD_PRZELEWY:p.default.set("newPaymentMethodPrzelewy24Hidden",!0),n((0,v.showPreselectedMethod)("przelewy24",{triggerSource:s}))}},b=function(e,t){var n=e.getState,r=t.data.criteria.type,a=n(),o=a.auth,i=o.isLoggedIn,s=o.currentUser,l=u.PERMANENT_NOTIFICATIONS.BROWSER_RECOMMENDATION,c=u.PERMANENT_NOTIFICATIONS.GIFT_CARD,d=u.PERMANENT_NOTIFICATIONS.PAYMENT_METHODS,f=u.PERMANENT_NOTIFICATIONS.PAYMENT_METHOD_PRZELEWY,m=u.PERMANENT_NOTIFICATIONS.MOBILE_APP_NEW_FEATURES,h=u.PERMANENT_NOTIFICATIONS.PUSH_NOTIFICATION,v=r+"Hidden";switch(r){case l:i&&s.isModel?g.default.set(v,!0):p.default.set(v,!0,6048e5);break;case c:case m:case d:case f:case h:p.default.set(v,!0)}},_=function(e){return function(t){return function(n){switch(n.type){case i.BUTTON:y(e,n);break;case s.HIDE:b(e,n);break;case s.PUSH_PERMISSION:var r=e.getState,a=r(),o=a.personalNotifications.isPushEnabled;d.default.getIsPushApiAvailable()&&o&&d.default.requestPermission()}return t(n)}}};t.default=_},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(361),a=n(109),o=n(588),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){return function(e){return function(t){var n=e(t);switch(t.type){case r.LOAD_SUCCESS:i.default.onTranslationsReceived();break;case a.LOAD_SUCCESS:i.default.onConfigReceived()}return n}}};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(589),i=r(o),s=n(6),l=r(s),u=n(47),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(79),p=n(170),m=n(9),g=n(81),h=n(356),v=n(99),E=n(162),y=n(42),b=n(12),_=n(66),S=n(147),O=n(34),P=n(43),T=n(98),A=n(37),C=n(130),I=n(190),w=n(52),N=n(88),R=function(e){var t=e.split(":");return d({key:t[0]},t.length>1?{id:Number(t[1])||t[1]}:{})},M=function(e){return function(t){var n=(0,l.default)(e,"details.amount");if(n){var r=(0,i.default)(b.TIP_SOUND_FILENAMES,function(e,t){return n>=t});t((0,m.playSound)(r))}}},L=function(e,t){var n=t.dispatch,r=t.getState,o=e.data,i=o.key,s=o.payload,u=r(),p=u.auth,m=p.currentUser,L=p.isLoggedIn,k=u.broadcast,D=u.viewCam,U=R(i);switch(U.key){case"albumUpdated":var j=s.albumId,F=U.id;n((0,S.update)(j,F));break;case"albumDeleted":var B=s.albumId,H=U.id;n((0,S.remove)(B,H));break;case"broadcastConfig":var V=U.id;m.id===V&&n({type:g.BROADCAST_CONFIG_UPDATE,data:{broadcastConfig:s}});break;case"broadcastSettingsChanged":n({type:y.VIEWCAM_SETTINGS_CHANGE,data:{viewCamSettings:s}});break;case"canBanChanged":var G=s.canBan;n({type:T.UPDATE,data:{relations:{canBan:G}}});break;case"goalChanged":var x=s.goal;n(L&&m.id===U.id?{type:g.GOAL_SET_SUCCESS,data:{goal:x}}:{type:y.GOAL_SET_SUCCESS,data:{goal:x}});break;case"knightAdded":var W=s.user,Y=U.id;n({type:A.USERS_SAVE,data:{users:[W]}}),n({type:E.ADD,data:{modelId:Y,userId:W.id}}),n((0,T.load)([W.id],Y));break;case"knightDeleted":var K=s.user,q=U.id;n({type:A.USERS_SAVE,data:{users:[K]}}),n({type:E.DELETE,data:{modelId:q,userId:K.id}}),n((0,T.load)([K.id],q));break;case"modelStatusChanged":var z=s.model,X=b.MODEL_STATUSES.STATUS_IDLE,Z=b.MODEL_STATUSES.STATUS_OFF,Q=z.status;Q!==X&&Q!==Z||n((0,g.init)()).then(function(){n((0,g.stopCam)({modelStatus:Q,model:z}))});break;case"modelWarning":var J=s.moderatorUsername,$=s.reason,ee=s.id;n((0,g.addModelWarnings)([{moderatorUsername:J,reason:$,id:ee}]));break;case"modelWarningDeleted":var te=s.id;n((0,g.removeModelWarning)(te));break;case"newChatMessage":var ne=s.message,re=ne.details,ae=ne.senderId,oe=ne.userData,ie=re.knightId,se=re.kingId,le=se||ie||ae;n((0,A.updateUsersFields)(d({},oe,{id:le}))),n((0,v.addChatMessage)({message:d({},ne,{isNew:!0})})),L&&m.id===U.id&&n(M(ne));break;case"newKing":var ue=s.user;n({type:A.USERS_SAVE,data:{users:[ue]}}),n({type:y.KING_SET,data:{kingId:ue.id}});break;case"privateProposed":n((0,g.processRequestNotification)());break;case"privateProposalCanceled":n({type:g.PRIVATE_REQUEST_UPDATE,data:{privateRequest:{proposeMode:null,proposeTimer:null,user:null}}});break;case"privateStarted":var ce=s.model,de=s.show;n((0,y.loadCamData)({modelId:ce.id})).then(function(){return n({type:y.PRIVATE_START,data:{privateStartedAt:new Date(de.createdAt)}})});break;case"privateStopped":var fe=U.id;n(m.id===fe?(0,g.stopPrivate)():(0,y.stopPrivate)());break;case"ratePrivate":var pe=s.model,me=(s.show,_.SYSTEM_MESSAGE_SUBTYPES.PRIVATE_MODE_ENDED);n((0,v.addSystemMessage)(pe.id,me,!0));break;case"snapshotUrlTemplateChanged":n((0,f.updateSnapshotMap)({snapshotMap:s}));break;case"spyStopped":var ge=D.model;ge&&n((0,y.loadCamData)({modelId:ge.id}));break;case"userBanned":var he=s.ban,ve=s.banned,Ee=s.knight,ye=s.user;n({type:A.USERS_SAVE,data:{users:(0,c.default)([ve,Ee,ye],"id")}});var be=(0,l.default)(Ee,"id")===he.moderatorId;if(m&&m.id===ve.id){var _e={banExpiry:a({},ye.id,he.expiredAt),canFriend:a({},ye.id,!1),isBanned:a({},ye.id,!0),isBannedByKnight:a({},ye.id,be)};n({type:T.UPDATE,data:{relations:_e}})}else if(m&&m.id===ye.id){n({type:C.BAN,data:{ban:he}});var Se={banExpiry:a({},ve.id,he.expiredAt),canBan:a({},m.id+":"+ve.id,!1),canFriend:a({},ve.id,!1),isBanned:a({},ve.id,!1),isBannedByKnight:a({},ve.id,be)};n({type:T.UPDATE,data:{relations:Se}})}m&&(m.id===ve.id||be)||n((0,v.load)(he.moderatorId));break;case"userBroadcastServerChanged":var Oe=D.model,Pe=s.user;n((0,A.update)(s.user)),L&&m.id===Pe.id&&(n({type:P.UPDATE_SUCCESS,data:{user:Pe}}),n({type:g.MODEL_FIELDS_UPDATE,data:{model:Pe}})),Oe&&Oe.id===s.user.id&&n({type:y.VIEWCAM_MODEL_UPDATE,data:{model:Pe}});break;case"userJoined":n((0,h.add)({users:[s]}));break;case"userLeft":var Te=(0,l.default)(s,"user.id");Te===(0,l.default)(u,"broadcast.privateRequest.user.id",null)&&n((0,g.cancelPrivateRequest)()),n((0,h.remove)([Te]));break;case"userPurchaseCompleted":var Ae=s.purchaseId,Ce=s.purchaseEffect,Ie=u.tokens,we=Ie.currentWizardStep,Ne=Ie.purchaseId,Re=Ae===Ne,Me=Re&&we===N.WIZARD_STEPS.SUCCESS;n((0,w.showCompletedPurchaseMessage)(Ce)),Re&&(n((0,w.handlePurchaseResult)({currentUser:m,hasSucceeded:!0})),n((0,w.completePurchase)())),Me&&n((0,w.goToWizardStep)(N.WIZARD_STEPS.COMPLETED));break;case"userSensitiveUpdated":L&&m.id===s.user.id?(n({type:P.UPDATE_SUCCESS,data:{user:s.user}}),n((0,O.updateCurrentUser)(s.user))):n((0,A.update)(s.user));break;case"userUnbanned":var Le=s.ban,ke=s.banned,De=s.user;if(m.id===ke.id){var Ue={canFriend:a({},De.id,!0),isBanned:a({},De.id,!1)};n({type:T.UPDATE,data:{relations:Ue}})}else if(m.id===De.id){n({type:C.UNBAN,data:{ban:Le,bannedIds:[ke.id]}});var je={canBan:a({},m.id+":"+ke.id,!0),canFriend:a({},ke.id,!0),isBanned:a({},ke.id,!1)};n({type:T.UPDATE,data:{relations:je}})}break;case"userUpdated":var Fe=D.model,Be=k.model,He=k.counterpart,Ve=s.user;n((0,A.update)(Ve)),Fe&&Fe.id===Ve.id&&n(Fe.status!==Ve.status?(0,y.loadCamData)({modelId:Ve.id}):{type:y.VIEWCAM_MODEL_UPDATE,data:{model:Ve}}),Be&&Be.id===Ve.id&&n({type:g.MODEL_FIELDS_UPDATE,data:{model:Ve}}),He&&He.id===Ve.id&&n({type:g.COUNTERPART_FIELDS_UPDATE,data:{counterpart:Ve}});break;case"viewServerChanged":case"userViewServerChanged":var Ge=s.view;n((0,f.updateViewConfig)({view:Ge}));break;case"videoDeleted":var xe=s.videoId,We=U.id;n((0,I.remove)(xe,We));break;case"videoUpdated":var Ye=s.videoId,Ke=U.id;n((0,I.update)(Ye,Ke));break;case"viewersList":var qe=s.guests,ze=s.invisibles,Xe=s.spies,Ze=s.userIds;n((0,h.update)({guests:qe,invisibles:ze,spies:Xe,userIds:Ze}))}return e},k=function(e,t){var n=t.dispatch,r=e.data,a=r.subscriptionKey,o=r.callback,i=r.options;return n(function(t,n,r){var s=r.Socket;switch(e.type){case p.REINIT:s.adapter?s.reconnect():s.init();break;case p.SUBSCRIBE:s.adapter.subscribe(a,o);break;case p.UNSUBSCRIBE:s.adapter.unsubscribe(a,o);break;case p.INVOKE_WHEN_SUBSCRIBED:s.adapter.invokeWhenSubscribed(a,o,i)}}),e},D=function(e){return function(t){return function(n){switch(n.type){case p.PROCESS:return t(L(n,e));case p.INVOKE_WHEN_SUBSCRIBED:case p.REINIT:case p.SUBSCRIBE:case p.UNSUBSCRIBE:return t(k(n,e));default:return t(n)}}}};t.default=D},,function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=n(370),o=n(9),i=n(5),s=n(52),l=function(e,t){var n=e.dispatch,o=t.data,l=o.uniqueName,u=r(o,["uniqueName"]);switch(l){case i.APP_BUTTONS.TOAST_CARD_VERIFICATION:var c=u.id;n((0,s.showCardVerificationBonusPackage)(l)),n((0,a.removeToast)({id:c}))}},u=function(e){return function(t){return function(n){switch(n.type){case o.BUTTON:l(e,n)}return t(n)}}};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),i=n(171),s=r(i),l=n(31),u=n(9),c=n(5),d=n(56),f=r(d),p=n(21),m=n(34),g=n(60),h=function(e,t,n){switch(t.data.uniqueName){case c.APP_BUTTONS.ACCEPT_VISITOR_AGREEMENT_BUTTON:n((0,g.processModal)())}},v=function(e){return function(t){return function(n){var r=e.getState,a=e.dispatch,i=r(),d=i.ui,g=d.hiddenModalsSet,v=d.currentModalName,E=d.currentModalParams,y=t(n);switch(n.type){case u.BUTTON:h(0,n,a);break;case m.LOGIN_SUCCESS:var b=n.data,_=b.isLoggedIn,S=b.currentUser,O=c.MODAL_PERSISTENCE_KEYS.VIDEOS_FEATURE,P=!(0,p.getWasAlreadyHidden)(i,O)&&_&&S.isApprovedModel,T=function(){return a((0,u.hideModal)({shouldPersist:!0}))};P&&(0,s.default)(function(){var e="featureAnnouncements.videos";a((0,u.showModal)(c.MODAL_TYPES.FEATURE_ANNOUNCEMENT,{persistenceKey:O,tryNowClickHandler:function(){a((0,l.replace)("/model/"+S.username)),T()},modalCloseHandler:T,imageUrl:(0,p.getStaticUrl)(i,"users/components/ui/FeatureAnnouncementModal/images/videos.jpg"),bodyHeaderKey:e+".mainHeader",sectionsKeys:[{header:e+".organize.header",body:e+".organize.body"},{header:e+".earnMoney.header",body:e+".earnMoney.body"},{header:e+".grantAccess.header",body:e+".grantAccess.body"}]}))},1e3);break;case u.HIDE_MODAL:(0,o.default)(n,"data.shouldPersist")&&f.default.set("hiddenModalsSet",g.add(E.persistenceKey||v))}return y}}};t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=r(a),i=n(6),s=r(i),l=n(187),u=r(l),c=n(31),d=n(109),f=n(9),p=n(5),m=n(106),g=r(m),h=n(129),v=n(19),E=n(68),y=function(e){var t=(0,h.getParams)(e,!0);if((0,o.default)(t))return!1;var n=t.action,r=t.showModal,a=n in v.performActionOnEnter,i=r in v.showModalsOnEnter;return a||i},b=function(e,t,n,r){var a=e(),o=a.auth.isLoggedIn,i="1"===g.default.get("isVisitorsAgreementAccepted"),s=n.payload,l=y(s),c=(0,h.getParams)(s,!0),d=(0,h.getParams)(a.routing.location),m=!c.action&&d.action||!c.showModal&&d.showModal,v=r(n),b=e(),_=(0,E.getIsOnSafePage)(b,s);return i||_||o||l||m||(0,u.default)(function(){return t((0,f.showModal)(p.MODAL_TYPES.VISITORS_AGREEMENT))}),v},_=function(e){return function(t){return function(n){var r=e.getState,a=e.dispatch;switch(n.type){case c.LOCATION_CHANGE:b(r,a,n,t);break;case d.APP_INIT:var o=t(n),i=r(),l=i.config,u="undefined"!=typeof window?window.location:{},m=l.data.hostRoot,v=(0,h.getParams)(u,!0);return(0,h.autoAcceptVisitorAgreement)(u,m,v),o;case f.BUTTON:var E=n.data.uniqueName,y=r(),_=y.config;switch(E){case p.APP_BUTTONS.ACCEPT_VISITOR_AGREEMENT_BUTTON:g.default.set("isVisitorsAgreementAccepted","1",{domain:_.data.hostRoot,expires:365,path:"/"})}break;case d.LOAD_SUCCESS:var S=n.data,O=S.config,P=S.data;(0,s.default)(P,"user")&&g.default.set("isVisitorsAgreementAccepted","1",{domain:O.hostRoot})}return t(n)}}};t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1090);Object.defineProperty(t,"tokens",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),o=r(a),i=n(6),s=r(i),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(29),c=r(u),d=n(12),f=n(9),p=n(170),m=n(5),g=n(52),h=n(88),v=n(148),E=n(60),y=function(e){var t=e.source,n=e.bitpayStatus,r=e.payload;if("paymentico"===t)return r.type;if(n)switch(n){case d.BITPAY_INVOICE_STATUS.NEW:return null;case d.BITPAY_INVOICE_STATUS.PAID:case d.BITPAY_INVOICE_STATUS.COMPLETE:case d.BITPAY_INVOICE_STATUS.CONFIRMED:return d.PAYMENTICO_MESSAGE_TYPE.SUCCESS;case d.BITPAY_INVOICE_STATUS.EXPIRED:case d.BITPAY_INVOICE_STATUS.INVALID:return d.PAYMENTICO_MESSAGE_TYPE.ERROR;default:return c.default.warn("Unknown bitpay invoice status",n),null}return null},b=function(e){var t=e.dispatch,n=e.state,r=e.methods,a=e.preferred;if((0,v.getIsPromoPreselected)(n))return t((0,g.applyOptionsCombo)((0,v.getPromoPackageCombo)({methods:r,preferred:a}))),t((0,g.togglePromoPreselect)(!1)),!0;if((0,v.getIsSubscriptionPreselected)(n))return t((0,g.applyOptionsCombo)((0,v.getSubscriptionPackageCombo)({methods:r,preferred:a}))),!0;if((0,v.getIsMethodPreselected)(n)){var o=(0,v.getPreselectedMethodName)(n),i=(0,v.getPreselectedMethodCombo)({methods:r,preferred:a,preselectedMethodName:o});return t((0,g.applyOptionsCombo)(i)),t((0,g.preselectMethod)("")),!0}if((0,v.getIsPackagePreselected)(n)){var s=(0,v.getPreselectedPackageCriteria)(n),l=(0,v.getPreselectedPackageCombo)({methods:r,preferred:a,criteria:s});return t((0,g.applyOptionsCombo)(l)),!0}return!1},_=function(e,t){var n=e.dispatch,r=t.data.uniqueName;switch(r){case m.APP_BUTTONS.HEADER_TOKENS_MENU_BTN:case m.APP_BUTTONS.HEADER_TOKENS_MENU_ICON:n((0,f.showModal)(m.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:r}))}},S=function(e){return function(t){return function(n){var r=e.dispatch,a=e.getState,i=a();switch(n.type){case f.BUTTON:_(e,n);break;case g.PURCHASE_COMPLETE:var u=i.tokens.initiatedPromoName;"christmas2017"===u&&r({type:g.INITIATED_PROMO_CAMPAIGN_NOT_AVAILABLE,data:{promoName:u}});break;case g.PURCHASE_FAILED:var m=t(n),S=a(),O=S.tokens,P=O.options.methods,T=O.preferredPackage;return r((0,g.applyOptionsCombo)((0,v.getInitialOptionsCombo)({methods:P,preferred:T}))),r((0,g.goToWizardStep)(h.WIZARD_STEPS.ERROR)),m;case g.BILLING_MESSAGE_RECEIVED:var A=i.auth,C=A.currentUser,I=A.isLoggedIn,w=i.tokens,N=w.billingName,R=w.isPurchaseCompleted,M=n.data.iframeEventData,L=M.source,k=M.status,D=M.payload,U=y({bitpayStatus:k,payload:D,source:L});if(!U)break;switch(U){case d.PAYMENTICO_MESSAGE_TYPE.SUCCESS:if(!I){c.default.error("User in not authorized; event '"+U+"'");break}r((0,g.handlePurchaseResult)({currentUser:C,hasSucceeded:!0}));C.isRegular&&r((0,g.logChosenBillingProcessor)(C.id,N,"convert"));var j=R?h.WIZARD_STEPS.COMPLETED:h.WIZARD_STEPS.SUCCESS;r((0,g.goToWizardStep)(j));break;case d.PAYMENTICO_MESSAGE_TYPE.ERROR:var F=D.errorDetails;r((0,g.handlePurchaseResult)({errorDetails:F,hasSucceeded:!1}));break;default:c.default.warn("Unknown message type: "+U)}break;case g.LOAD_OPTIONS_SUCCESS:var B=n.data,H=B.options,V=H.activePromoCampaigns,G=H.methods,x=B.receivedUserOptions,W=l({isGold:(0,s.default)(i,"auth.currentUser.isGold",!1)},x.preferredPackage);b({dispatch:r,state:i,methods:G,preferred:W})||r((0,g.applyOptionsCombo)((0,v.getInitialOptionsCombo)({methods:G,preferred:W}))),(0,v.getIsPreferredPackageHidden)({methods:G,preferred:W})&&r((0,g.toggleAdditionalPackagesShowing)());var Y=i.tokens.initiatedPromoName;Y&&!(0,o.default)(V,Y)&&r({type:g.INITIATED_PROMO_CAMPAIGN_NOT_AVAILABLE,data:{promoName:Y}});break;case g.GO_TO_WIZARD_STEP:var K=i.auth,q=K.currentUser,z=K.isLoggedIn,X=i.tokens.currentPackagePromo,Z=n.data.step;if(z&&(q.isModel||q.isStudio))return r((0,E.closeModal)());if(Z!==h.WIZARD_STEPS.AUTH&&Z!==h.WIZARD_STEPS.BILLING||X&&r({type:g.PROMO_INITIATED,data:{initiatedPromoName:X}}),Z===h.WIZARD_STEPS.AUTH&&z){var Q=l({},n,{data:l({},n.data,{step:h.WIZARD_STEPS.BILLING})}),J=(0,v.getChosenPurchaseData)(i);return r((0,g.confirmPurchase)(J)),t(Q)}if(Z===h.WIZARD_STEPS.BILLING){r({type:g.TOGGLE_LOADING_STATE,data:{isLoading:!0}});var $=function(){var e=(0,v.getChosenPurchaseData)(i);r((0,g.confirmPurchase)(e))},ee="userPurchaseCompleted:"+q.id;r((0,p.invokeWhenSubscribed)(ee,$,{invokeImmediately:!1}))}Z===h.WIZARD_STEPS.COMPLETED&&r((0,E.process)())}return t(n)}}};t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1092);Object.defineProperty(t,"albums",{enumerable:!0,get:function(){return r(a).default}});var o=n(1093);Object.defineProperty(t,"auth",{enumerable:!0,get:function(){return r(o).default}});var i=n(1094);Object.defineProperty(t,"friends",{enumerable:!0,get:function(){return r(i).default}});var s=n(1095);Object.defineProperty(t,"personalNotifications",{enumerable:!0,get:function(){return r(s).default}});var l=n(1096);Object.defineProperty(t,"photos",{enumerable:!0,get:function(){return r(l).default}});var u=n(1097);Object.defineProperty(t,"privateMessages",{enumerable:!0,get:function(){return r(u).default}});var c=n(1098);Object.defineProperty(t,"profile",{enumerable:!0,get:function(){return r(c).default}});var d=n(1099);Object.defineProperty(t,"videos",{enumerable:!0,get:function(){return r(d).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(230),o=n(147),i=n(232),s=n(189),l=n(43),u=n(60),c=function(e,t){var n=e.getState(),r=n.auth,a=r.currentUser,o=r.isLoggedIn,i=t.data.userId;return o&&a.id===i},d=function(e,t,n){return c(e,t)?r({},t,{type:n}):t},f=function(e){return function(t){return function(n){var r=e.dispatch,c=e.getState;switch(n.type){case o.LOAD_SUCCESS:var f=t(d(e,n,a.LOAD_SUCCESS));return c().userAlbums.isWizardActive&&(r((0,u.process)()),r((0,o.endWizard)())),f;case o.SELECT:var p=d(e,n,a.SELECT),m=p.data,g=m.userId,h=m.albumId,v=t(p);return h?(r(p.type===a.SELECT?(0,i.load)():(0,s.load)(h,g)),r((0,l.scrollToUserGallery)()),v):v;case o.UPDATE:return t(d(e,n,a.UPDATE));default:return t(n)}}}};t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),o=r(a),i=n(31),s=n(9),l=n(59),u=r(l),c=n(235),d=r(c),f=n(63),p=r(f),m=n(108),g=n(195),h=n(34),v=n(150),E=n(37),y=function(e,t){var n=e.data,r=n.currentUser,a=n.isLoggedIn;a&&(d.default.updateUser(r.id),t((0,v.loadNotifications)()),t((0,m.load)()),r.isStudio&&t((0,g.load)()),u.default.login(r),t({type:E.USERS_SAVE,data:{users:[r]}})),u.default.initIfNeeded({userFields:{userId:a?r.id:null}})},b=function(e,t,n){var r=n(),a=e.error,l=a.details.recaptcha,u=a.details.userBlocked,c=a.details.userDeleted,d=r.routing.location.pathname,f=(0,o.default)(["/account-blocked","/account-deleted"],d);if(l){var m=new Date(l).getTime()-(new Date).getTime();p.default.set("isLoginRecaptchaShown",!0,m)}else p.default.remove("isLoginRecaptchaShown");u&&t((0,i.push)("/account-blocked")),c&&t((0,i.push)("/account-deleted")),f&&(u||c)&&t((0,s.hideModal)())},_=function(e){u.default.logout(),d.default.removeToken()},S=function(e){return function(t){return function(n){var r=t(n),a=e.dispatch,o=e.getState;switch(n.type){case h.LOGIN_SUCCESS:y(n,a);break;case h.LOGOUT_SUCCESS:_();break;case h.LOGIN_FAIL:b(n,a,o)}return r}}};t.default=S},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=n(28),o=n(9),i=n(51),s=n(5),l=n(29),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(57),d=n(117),f=n(231),p=n(165),m=n(100),g=n(91),h=function(e,t,n){var r=e.dispatch,i=e.getState,l=i(),f=l.auth,p=f.currentUser,h=f.isLoggedIn,v=(0,m.getIsMyFriend)(l,t.id),E=(0,g.getCanFriend)(l,t.id);v?r((0,d.remove)([t.id])):E?r((0,d.add)(t.id)):h?p.isRegular?r((0,a.error)((0,c.translate)(l,{messageId:"notifications.greyUserAddToFriendsFail"}),"friendshipButton")):u.default.warn("friends middleware: failed to handle friendship click"):r((0,o.showModal)(s.MODAL_TYPES.AUTH,{action:{backgroundImage:t.avatarUrl,type:"addToFriends",user:t},component:"SignUp",className:"auth-modal-signup",triggerSource:n}))},v=function(e,t){var n=t.data,a=n.uniqueName,l=r(n,["uniqueName"]),u=e.dispatch,c=e.getState,d=c();switch(a){case s.APP_BUTTONS.FRIENDSHIP:var m=d.userAlbums.selectedAlbumId,g=l.user,v=m?(0,p.getUserAlbumById)(d,{userId:g.id,albumId:m}):null,E=v&&v.accessMode===f.ALBUMS_ACCESS_MODES.FRIENDS?i.AUTH_TRIGGER_SOURCES.ALBUM_FOR_FRIENDS:a;h(e,g,E);break;case s.APP_BUTTONS.VIDEO_FRIENDSHIP:var y=d.auth.isLoggedIn,b=d.profile.user,_=l.user;y&&(b.isGold||b.isGreen)||u((0,o.hideModal)()),h(e,_,a)}},E=function(e){return function(t){return function(n){var r=t(n);switch(n.type){case o.BUTTON:v(e,n)}return r}}};t.default=E},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=n(5),i=n(52),s=n(150),l=function(e,t){var n=e.dispatch,a=t.data,l=a.uniqueName,u=r(a,["uniqueName"]);switch(l){case o.APP_BUTTONS.PERSONAL_NOTIFICATIONS_GOLD_OVER:u.notification&&n((0,s.deleteNotifications)([u.notification.id])),n((0,i.showSubscriptionPackage)(l))}},u=function(e){return function(t){return function(n){switch(n.type){case a.BUTTON:l(e,n)}return t(n)}}};t.default=u},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(31),i=n(9),s=n(51),l=n(5),u=n(147),c=n(189),d=n(60),f=n(232),p=function(e,t){var n=e.getState().auth,r=n.currentUser,o=n.isLoggedIn,i=t.data.userId;return o&&r.id===i?a({},t,{type:f.LOAD_SUCCESS}):t},m=function(e,t){var n=e.dispatch,a=t.data,i=a.uniqueName,c=r(a,["uniqueName"]);switch(i){case l.APP_BUTTONS.USER_GALLERY_BUY_ALBUM:var f=c.albumId,p=c.userId;n((0,u.buy)(f,p));break;case l.APP_BUTTONS.USER_GALLERY_GO_TO_SETTINGS:n((0,o.push)("/settings"));break;case l.APP_BUTTONS.USER_GALLERY_ALBUM_REGISTERED_SIGNUP:var m=c.model;n((0,d.startWizardWithActionOnEnter)(l.MODAL_TYPES.AUTH,{component:"SignUp",action:{backgroundImage:m.avatarUrl,type:"albumAccessForVerified",user:m,shouldBypassActionPrefix:!0},user:m,triggerSource:s.AUTH_TRIGGER_SOURCES.ALBUM_FOR_REGISTERED}))}},g=function(e){return function(t){return function(n){var r=t(n);switch(n.type){case i.BUTTON:m(e,n);break;case c.LOAD_SUCCESS:return t(p(e,n));case f.ADD_SUCCESS:var a=n.data.photo.urlThumb;e.dispatch((0,f.addInProgress)(a))}return r}}};t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(229),o=n(295),i=function(e){return function(t){return function(n){var i=t(n);switch(n.type){case a.CONVERSATIONS_ADD_SUBSCRIPTION:var s=e.getState,l=e.dispatch,u=n.data.counterpartId;l({type:a.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:r({},(0,o.getConversation)(s(),u),{isSubscribed:!0})}});break;case a.CONVERSATIONS_REMOVE_SUBSCRIPTION:var c=e.getState,d=e.dispatch,f=n.data.counterpartId;d({type:a.CONVERSATIONS_LOAD_SUCCESS,data:{conversations:r({},(0,o.getConversation)(c(),f),{isSubscribed:!1})}})}return i}}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28),a=n(59),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=n(57),s=n(196),l=n(43),u=function(e){return function(t){return function(n){var a=t(n),u=e.dispatch,c=e.getState,d=c();switch(n.type){case s.CONFIRM_SUCCESS:u({type:l.UPDATE_SUCCESS,data:{user:{isEmailVerified:!0}}}),o.default.confirmEmail(n.data.userId);break;case s.RESEND_FAIL:u((0,r.error)(n.data.error.message));break;case s.RESEND_SUCCESS:u((0,r.success)((0,i.translate)(d,{messageId:"settings.changeEmail.notifications.resendConfirmationSuccess"})))}return a}}};t.default=u},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(31),i=n(28),s=n(9),l=n(5),u=n(57),c=n(60),d=n(233),f=n(190),p=n(166),m=null,g=function(e,t){var n=e.getState(),r=n.auth,a=r.currentUser,o=r.isLoggedIn,i=t.data.userId;return o&&a.id===i},h=function(e,t,n){return g(e,t)?a({},t,{type:n}):t},v=function(e,t){var n=e.dispatch,a=e.getState,i=t.data,s=i.uniqueName,u=r(i,["uniqueName"]),d=s;switch(s){case l.APP_BUTTONS.VIDEO_GET_ACCESS:var p=a(),g=p.auth.isLoggedIn,h=p.profile.user,v=u.user,E=u.video;if(!g||h.tokens<E.cost){m={user:v,video:E},n((0,c.startWizardWithActionOnEnter)(l.MODAL_TYPES.PURCHASE_TOKENS,{component:"SignUp",action:{backgroundImage:v.avatarUrl},subType:"BuyVideo",triggerSource:d,user:v,video:E}));break}n((0,f.buy)(E,v));break;case l.APP_BUTTONS.VIDEO_GO_SETTINGS:n((0,o.push)("/settings"));break;case l.APP_BUTTONS.VIDEO_SIGNUP:var y=u.user;n((0,c.startWizardWithActionOnEnter)(l.MODAL_TYPES.AUTH,{component:"SignUp",action:{backgroundImage:y.avatarUrl,shouldBypassActionPrefix:!0,type:"videoAccessSignup",user:y},triggerSource:d,user:y}))}},E=function(e){return function(t){return function(n){var r=e.dispatch,a=e.getState;switch(n.type){case s.BUTTON:v(e,n);break;case f.LOAD_SUCCESS:return t(h(e,n,d.LOAD_SUCCESS));case s.HIDE_MODAL:if(a().ui.currentModalParams.triggerSource===l.APP_BUTTONS.VIDEO_GET_ACCESS){var o=m,c=o.user,E=o.video,y=t(n);return r((0,s.showModal)(l.MODAL_TYPES.WATCH_VIDEO,{isOwnProfile:!1,user:c,videoId:E.id})),y}break;case f.UPDATE_SUCCESS:var b=n.data.video;if(g(e,n)){var _=a(),S=b.id,O=_.myVideos,P=O.collection,T=O.editingVideoId,A=P.get(S),C=S===T,I=(0,p.hasVideoProcessedSuccessfully)({video:A},{video:b});!C&&I&&r((0,i.success)((0,u.translate)(_,{messageId:"videos.messages.videoProcessedSuccessfully",params:{videoTitle:b.title}})))}return t(h(e,n,d.UPDATE_SUCCESS));case f.REMOVE:var w=n.data,N=w.videoId,R=w.isRejection;if(g(e,n)&&R){var M=a(),L=M.myVideos.collection,k=L.get(N);k&&r((0,i.error)((0,u.translate)(M,{messageId:"videos.messages.videoRejected",params:{title:k.title}})))}return t(h(e,n,d.REMOVE))}return t(n)}}};t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1101);Object.defineProperty(t,"translate",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(228),a=n(293),o=function(e){return function(t){return function(n){var o=t(n),i=e.dispatch,s=e.getState();switch(n.type){case r.APPLIED_FILTER_CHANGE:case r.LOAD_MESSAGES_SUCCESS:case r.SAVE_MESSAGES:case r.SORTING_CHANGE:case r.UPDATE_LOCALE:case r.UPDATE_SCREENSHOTS:i({type:r.APPLY_FILTER,data:{filteredMessagesKeys:"onlyComposite"===n.data.appliedFilter?(0,a.getFilteredMessagesKeys)(s):(0,a.getSortedFilteredMessagesKeys)(s)}});break;case r.FILTERS_CHANGE:"onlyComposite"===n.data.field&&i({type:r.APPLIED_FILTER_CHANGE,data:{appliedFilter:"onlyComposite"}})}return o}}};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(124),o=r(a),i=n(11),s=r(i),l=n(1103),u=r(l),c=n(80),d=r(c),f=n(0),p=r(f),m=n(79),g=n(19),h=n(1104),v=r(h),E=n(1120),y=r(E),b=n(1225),_=r(b),S=n(1232),O=r(S),P=n(1233),T=r(P),A=n(1234),C=r(A),I=n(1237),w=r(I),N=n(1238),R=r(N),M=n(1239),L=r(M),k=n(1240),D=r(k),U=n(616),j=r(U),F=n(1241),B=r(F),H=n(1249),V=r(H),G=n(1254),x=r(G),W=n(1255),Y=r(W),K=n(1258),q=r(K),z=n(1265),X=r(z),Z=n(1267),Q=r(Z),J=n(1269),$=r(J),ee=n(1272),te=r(ee),ne=n(1275),re=r(ne),ae=n(1277),oe=r(ae),ie=n(1278),se=r(ie),le=n(1286),ue=r(le),ce=n(1289),de=r(ce),fe=n(1290),pe=r(fe),me=n(1291),ge=r(me),he=n(1292),ve=r(he),Ee=n(1296),ye=r(Ee),be=n(1297),_e=r(be),Se=n(1301),Oe=r(Se),Pe=n(12),Te=n(1380),Ae=r(Te),Ce=n(1386),Ie=r(Ce),we=n(1387),Ne=r(we),Re=n(1389),Me=r(Re),Le=n(1390),ke=r(Le),De=n(1392),Ue=r(De),je=n(1393),Fe=r(je),Be=n(1394),He=r(Be),Ve=n(1395),Ge=r(Ve),xe=n(1396),We=r(xe),Ye=n(1404),Ke=r(Ye),qe=n(1405),ze=r(qe),Xe=n(1407),Ze=r(Xe),Qe=n(1416),Je=r(Qe),$e=n(1417),et=r($e),tt=new Map,nt=function(e){if(!tt.has(e)){var t=(0,v.default)(e);return tt.set(e,t),t}return tt.get(e)},rt=[{path:"/",component:y.default,routes:[{path:"/",exact:!0,component:nt(q.default),key:"index-page"},{path:"/account-blocked",component:nt(Ie.default),routeParams:{accountState:"blocked"}},{path:"/account-deleted",component:nt(Ie.default),routeParams:{accountState:"deleted"}},{path:"/new",exact:!0,component:nt(q.default),tag:"new",key:"index-page"},{path:"/spy",exact:!0,component:nt(q.default),tag:"spy",key:"index-page"},{path:"/tags/:tagGroup(men|trans)?/:tag",exact:!0,component:nt(q.default),key:"index-page"},{path:"/tags",exact:!0,component:_.default},{path:"/search/:searchString?",exact:!0,component:nt(q.default),componentKey:"IndexPage",key:"index-page"},{path:"/buy-tokens",exact:!0,component:nt(q.default),key:"index-page"},{path:"/unsubscribe",exact:!0,component:nt(q.default),key:"index-page"},{path:"/user/:username",exact:!0,component:nt(Ke.default)},{path:"/top/:type("+(0,s.default)(Pe.BEST_MODELS_CONTEST_TYPES,"id").join("|")+")",exact:!0,component:nt(B.default)},{path:"/top/:type",exact:!0,component:function(){return p.default.createElement(j.default,{to:"/top"})}},{path:"/top",exact:!0,component:nt(B.default)},{path:"/favorites",exact:!0,component:nt(Y.default)},{path:"/followings",exact:!0,component:nt(_e.default)},{path:"/friends",exact:!0,component:nt(Fe.default)},{path:"/gold-membership/:action",exact:!0,component:nt(Me.default)},{path:"/user/:username/friends",exact:!0,component:nt(He.default)},{path:"/user/:username/knights",exact:!0,component:nt(pe.default)},{path:"/login",exact:!0,component:nt(Ge.default)},{path:"/signup/:type(user|model|studio)",exact:!0,component:nt(et.default)},{path:"/signup",exact:!0,component:function(){return p.default.createElement(j.default,{to:"/signup/user"})}},{path:"/industry",exact:!0,component:nt(Je.default)},{path:"/forgot-password",component:nt(Ue.default)},{path:"/confirm-email/:userId/:confirmationKey",exact:!0,component:Ne.default},{path:"/payments-settings/firstchoicePay-signup",exact:!0,component:nt(re.default),routeParams:{firstchoicePaySignup:!0}},{path:"/payments-settings",exact:!0,component:nt(re.default)},{path:"/confirm-payment-settings/:userId/:confirmationKey",exact:!0,component:nt(de.default)},{path:"/reset-password/:recoveryKey?",exact:!0,component:ze.default},{path:"/settings",exact:!0,component:nt(Ze.default)},{path:"/studio",exact:!0,component:nt(ge.default)},{path:"/studio/model-add",exact:!0,component:nt(ye.default)},{path:"/studio/models/:modelUsername/add",exact:!0,component:nt(ve.default)},{path:"/studio/models/:modelUsername/:personId?",exact:!0,component:nt(ve.default)},{path:"/studio/:username",exact:!0,component:nt(Ke.default)},{path:"/model/knights",exact:!0,component:nt(X.default)},{path:"/model/bans",exact:!0,component:nt(Q.default)},{path:"/model/documents/add",exact:!0,component:nt(V.default)},{path:"/model/documents/:personId",exact:!0,component:nt(V.default)},{path:"/model/documents",exact:!0,component:function(){return p.default.createElement(j.default,{to:"/model/documents/add"})}},{path:"/model/:username",exact:!0,component:nt(Ke.default)},{path:"/mobile",exact:!0,component:nt(x.default)},{path:"/mobile_auth/:qrCode",exact:!0,component:nt(x.default)},{path:"/messages/:username?",exact:!0,component:nt(We.default)},{path:"/2257",exact:!0,component:w.default},{path:"/copyrights",exact:!0,component:R.default},{path:"/careers",exact:!0,component:C.default},{path:"/terms",exact:!0,component:D.default},{path:"/privacy",exact:!0,component:L.default},{path:"/support/billing",exact:!0,component:T.default},{path:"/support",exact:!0,component:ke.default},{path:"/start-broadcasting",exact:!0,component:nt(oe.default)},{path:"/tokens-history",exact:!0,component:nt(se.default)},{path:"/studio-earnings",exact:!0,component:nt(ue.default)},{path:"/payments-history",exact:!0,component:nt(te.default)},{path:"/model-news",exact:!0,component:nt($.default)},{path:"/i18n",exact:!0,component:nt(Ae.default)},{path:"/cams/:username",exact:!0,component:nt(Oe.default),componentKey:"ViewCamPage"},{path:"/:username",exact:!0,component:nt(Oe.default),componentKey:"ViewCamPage"},{component:O.default}]}],at=function(e){var t=e.dispatch,n=(0,o.default)((0,d.default)((0,u.default)((0,g.mapRecursive)(rt,function(e){return(e.path||"").replace(/(\/.*?)[\/:](.+)/,"$1")}))));return t((0,m.updateAvailableRoutes)(n)),rt};t.default=at},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=function(t){function n(e,t){a(this,n);var r=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.state={isRedirected:!1},r}return i(n,t),l(n,[{key:"componentWillMount",value:function(){this.props.emitPageView(),this.checkAccess(this.props)}},{key:"checkAccess",value:function(t){var n=(0,v.checkHasAccess)(t,e.checkAccess,this.context);n&&this.setState({isRedirected:n})}},{key:"render",value:function(){return this.state.isRedirected?null:c.default.createElement(e,s({},this.props,{"data-component-name":"Restricted"}))}}]),n}(u.Component),n={emitPageView:h.emitPageView};t.propTypes=s({},(0,E.getReactRouterPropTypes)(),(0,E.getActionPropTypes)(n)),t.contextTypes={store:g.default.object,router:g.default.object.isRequired};var r=function(e){return(0,p.bindActionCreators)(n,e)};return(0,f.withRouter)((0,d.connect)(null,r)(t))};var u=n(0),c=r(u),d=n(2),f=n(24),p=n(4),m=n(1),g=r(m),h=n(578),v=n(19),E=n(7)},,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1117);Object.defineProperty(t,"photo",{enumerable:!0,get:function(){return r(a).default}});var o=n(1119);Object.defineProperty(t,"accordionItem",{enumerable:!0,get:function(){return r(o).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(592),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=a.default.BOOLEAN,i=a.default.NUMBER,s=a.default.STRING,l={id:i,createdAt:s,isDeleted:o,aspectRatio:s,order:i,status:s,reason:s};t.default=l},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(592),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=a.default.STRING,i=a.default.NODE,s={title:o,body:i};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(13),u=r(l),c=n(115),d=r(c),f=n(6),p=r(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},v=n(1),E=r(v),y=n(0),b=r(y),_=n(2),S=n(323),O=n(31),P=n(4),T=n(140),A=r(T),C=n(28),I=n(9),w=n(151),N=r(w),R=n(3),M=r(R),L=n(1130),k=r(L),D=n(1131),U=r(D),j=n(1134),F=r(j),B=n(1135),H=r(B),V=n(1153),G=r(V),x=n(1163),W=r(x),Y=n(1164),K=r(Y),q=n(1165),z=r(q),X=n(1220),Z=r(X),Q=n(51),J=n(59),$=r(J),ee=n(19),te=n(7),ne=n(63),re=r(ne),ae=n(129),oe=n(170),ie=n(29),se=r(ie),le=n(282),ue=n(68),ce=n(21),de=n(60),fe=n(1224),pe=r(fe),me=n(234),ge=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:le.propsParamsViewServerHasChanged,action:function(e){return r.updateRegisteredSocketEvents(e,r.context)}},{update:ce.isLayoutShadedHasChanged,action:function(e){return r.layoutShadedChangeHandler(e)}}],r.layoutShadedChangeHandler=function(e){var t=document.getElementById("body");e.isLayoutShaded?t.classList.add("shaded"):t.classList.remove("shaded")},r.handleClick=function(e){var t=r.props,n=t.isInterfaceBlocked,a=t.releaseInterface;n&&(se.default.info("MainLayout.handleClick",e),a(e.target))},a=n,i(r,a)}return s(t,e),g(t,[{key:"componentWillReceiveProps",value:function(e,n){var r=this.props,a=r.hideModal,o=r.location,i=o.pathname,s=e.location.pathname;i!==s&&(e.hideAllNotificationsExcept({redirectFromForgotPasswordPage:"/forgot-password"===i&&"/"===s}),a({isOnEnter:!0})),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e,n)}},{key:"componentDidMount",value:function(){var e=this;h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);var n=this.context.store,r=n.dispatch,o=n.getState,i=this.props,s=i.history,l=i.location,c=i.routerReplace,f=i.invokeWhenSubscribed,g=(0,ae.getParams)(l,!0),v=(0,p.default)(g,"affiliateId");if(v&&$.default.setOnInit(v),this.registerEventListener(window,"unload",function(){re.default.remove("loginTriggerSource")}),$.default.setupDataFromLocation(),g.pushNotification&&$.default.pushNotification({type:g.pushNotification}),!(0,u.default)(g)){var E=g.showModal,y=g.action,b=g.params||{},_=this.props.startWizard;if(y in ee.performActionOnEnter){var S=function(){ee.performActionOnEnter[y](m({actions:{startWizard:_}},e.props,b),r,o)},O=b.waitSocketSubscriptionKey;O?f(O,S):S()}E in ee.showModalsOnEnter&&ee.showModalsOnEnter[E](m({actions:{startWizard:_}},this.props));var P=s.location;c(m({},P,{search:A.default.stringify((0,d.default)(g,[].concat(a(Q.ANAL_URL_PARAMS),a(Q.AMPLITUDE_URL_PARAMS),["action","params","showModal"])))}))}}},{key:"getSocketEventBindings",value:function(e,t){var n=e.isLoggedIn,r=e.currentUser,a=e.viewServers,o=[{subscriptionKey:"viewServerChanged:"+a.wowza},{subscriptionKey:"viewServerChanged:"+a.hls},{subscriptionKey:"viewServerChanged:"+a.flashphoner}];return n&&r.isModel||o.push({subscriptionKey:"snapshotUrlTemplateChanged"}),n?[].concat(o,[{subscriptionKey:"userUpdated:"+r.id},{subscriptionKey:"userSensitiveUpdated:"+r.id},{subscriptionKey:"userViewServerChanged:"+r.id},{subscriptionKey:"userPurchaseCompleted:"+r.id}]):o}},{key:"shouldSocketResubscribe",value:function(e,t){return e.isLoggedIn!==this.props.isLoggedIn}},{key:"renderMeta",value:function(){var e=this.props.unreadNotificationsCount,t=e>0?"("+e+") ":"";return b.default.createElement(N.default,{title:this.twl("seo.title.default"),titleTemplate:t+"%s | "+this.twl("seo.title.ending"),description:this.twl("seo.description.default"),robots:"all"})}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.globallyActiveBranch,r=e.isLoggedIn,a=e.match.params,o=e.route,i=r&&a.username===t.username,s=(0,p.default)(n,"route.componentKey","").toLowerCase();return b.default.createElement("div",{onClick:this.handleClick,className:this.c("main-layout",s,{ownpage:i}),"data-component-name":"MainLayout"},this.renderMeta(),b.default.createElement(z.default,null),b.default.createElement(F.default,null),b.default.createElement(k.default,null),b.default.createElement("div",{className:"wrapper"},b.default.createElement(pe.default,null),b.default.createElement(K.default,null),b.default.createElement(W.default,null),b.default.createElement("header",null,b.default.createElement(G.default,null)),b.default.createElement(H.default,null),b.default.createElement(Z.default,null),b.default.createElement("main",{id:"app"},(0,S.renderRoutes)(o.routes))),b.default.createElement(U.default,null))}}]),t}(M.default),he={hideAllNotificationsExcept:C.hideAllExcept,hideModal:I.hideModal,releaseInterface:I.releaseInterface,routerReplace:O.replace,showModal:I.showModal,startWizard:de.startWizard,invokeWhenSubscribed:oe.invokeWhenSubscribed};ge.propTypes=m({config:E.default.object,currentUser:E.default.object,isInterfaceBlocked:E.default.bool.isRequired,isLayoutShaded:E.default.bool.isRequired,isLoggedIn:E.default.bool,unreadNotificationsCount:E.default.number.isRequired,viewServers:E.default.object},(0,te.getActionPropTypes)(he));var ve=function(e,t){var n=e.appSettings.data.viewServers,r=e.auth,a=r.currentUser,o=r.isLoggedIn,i=r.isLoggingOut,s=e.config,l=e.ui,u=l.isInterfaceBlocked,c=l.isLayoutShaded;return{config:s,currentUser:a,globallyActiveBranch:(0,ue.getGloballyActiveBranch)(e,t),isInterfaceBlocked:u,isLayoutShaded:c,isLoggedIn:o&&!i,viewServers:n,unreadNotificationsCount:(0,me.getUnreadCount)(e)}},Ee=function(e){return(0,P.bindActionCreators)(he,e)};t.default=(0,_.connect)(ve,Ee)(ge)},,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.InitialLocationActionsHandler=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(1),d=r(c),f=n(24),p=n(2),m=n(4),g=n(3),h=r(g),v=n(9),E=n(51),y=n(5),b=n(7),_=n(68),S=n(60),O=t.InitialLocationActionsHandler=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"buyTokensActions",value:function(){var e=this.props.isLoggedIn,t=E.BUY_TOKENS_DIALOG_SOURCES.BUY_TOKENS_ROUTE;e?this.props.showModal(y.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:t},!0):this.props.startWizardWithActionOnEnter(y.MODAL_TYPES.PURCHASE_TOKENS,{action:{isDefaultBanner:!0,type:"buyTokens"},component:"Login",triggerSource:t})}},{key:"componentDidMount",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.isBuyTokensRouteActionsAllowed&&this.buyTokensActions()}},{key:"render",value:function(){return null}}]),t}(h.default),P={showModal:v.showModal,startWizardWithActionOnEnter:S.startWizardWithActionOnEnter};O.propTypes=s({isBuyTokensRouteActionsAllowed:d.default.bool.isRequired,isLoggedIn:d.default.bool.isRequired},(0,b.getActionPropTypes)(P));var T=function(e){var t=e.auth.isLoggedIn;return{isBuyTokensRouteActionsAllowed:(0,_.getIsBuyTokensRouteActionsAllowed)(e),isLoggedIn:t}},A=function(e){return(0,m.bindActionCreators)(P,e)};t.default=(0,f.withRouter)((0,p.connect)(T,A)(O))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=n(540),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(24),E=n(3),y=r(E),b=n(8),_=r(b),S=n(378),O=r(S),P=n(1132),T=r(P),A=n(1133),C=r(A),I=n(5),w=n(595),N=r(w),R=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.getFaqType=function(){var e=r.props,t=e.isLoggedIn,n=e.currentUser,a=t&&n.isStudio,o=t&&n.isModel;return a?"studiosFaq":o?"modelsFaq":"usersFaq"},r.renderHelpSection=function(){var e=r.props,t=e.links,n=e.whiteLabelId,a=r.getFaqType();return g.default.createElement("div",{className:"footer-section column xs-6 s-6 m-6"},g.default.createElement("h4",{className:"footer-section-header"},r.t("footer.help")," & ",r.t("footer.support")),g.default.createElement("ul",null,g.default.createElement("li",{className:"footer-section-item"},g.default.createElement(v.Link,{to:"/support"},r.t("footer.contactSupport"))),g.default.createElement("li",{className:"footer-section-item"},g.default.createElement(v.Link,{to:t.faq,target:"_blank"},r.t("footer."+a))),g.default.createElement("li",{className:"footer-section-item"},g.default.createElement(v.Link,{to:"/support/billing"},r.t("footer.billingSupport"))),r.renderIf(!n,g.default.createElement("li",{className:"footer-section-item"},g.default.createElement("a",{href:I.IMPROVE_STRIPCHAT_URL,target:"_blank"},r.t("footer.improveStripchat"))))))},r.renderSecuritySection=function(){return g.default.createElement("div",{className:"footer-section column xs-6 s-6 m-6"},g.default.createElement("h4",{className:"footer-section-header"},r.t("footer.legal")),g.default.createElement("ul",null,g.default.createElement("li",{className:"footer-section-item"},g.default.createElement(v.Link,{to:"/privacy"},r.t("footer.privacyPolicy"))),g.default.createElement("li",{className:"footer-section-item"},g.default.createElement("a",{target:"_blank",href:"http://www.parentalcontrolbar.org",rel:"noopener noreferrer"},r.t("footer.parentalControl"))),g.default.createElement("li",{className:"footer-section-item"},g.default.createElement(v.Link,{to:"/terms"},r.t("footer.termsOfUse")))))},r.renderWorkSection=function(){var e=r.props,t=e.isLoggedIn,n=e.currentUser,a=e.whiteLabel,o=e.whiteLabelId,i=t&&n.isModel;return g.default.createElement("div",{className:"footer-section column xs-6 s-6 m-6"},g.default.createElement("h4",{className:"footer-section-header"},r.t("footer.workWithUs")),g.default.createElement("ul",null,g.default.createElement("li",{className:"footer-section-item"},r.renderIf(o,function(){return g.default.createElement("a",{href:(0,l.default)(a,"url.signupModel")},r.t("footer.becomeAModel"))},function(){return g.default.createElement(v.Link,{to:i?"/settings":"/signup/model"},r.t("footer.becomeAModel"))})),g.default.createElement("li",{className:"footer-section-item"},r.renderIf(o,function(){return g.default.createElement("a",{href:(0,l.default)(a,"url.signupStudio")},r.t("footer.studioSignup"))},function(){return g.default.createElement(v.Link,{to:i?"/settings":"/signup/studio"},r.t("footer.studioSignup"))})),g.default.createElement("li",{className:"footer-section-item"},g.default.createElement(v.Link,{to:"/careers"},r.t("footer.careers")))))},r.renderFollowSection=function(){return g.default.createElement("div",{className:"footer-section column xs-6 s-6 m-6"},g.default.createElement("h4",{className:"footer-section-header"},r.t("footer.socialMedia")),g.default.createElement("ul",null,g.default.createElement("li",{className:"footer-section-item"},g.default.createElement("a",{className:"footer-social-link",href:I.TWITTER_URL,target:"_blank",rel:"noopener noreferrer"},g.default.createElement(_.default,{img:"twitter-original",size:14}),r.t("footer.twitter"))),g.default.createElement("li",{className:"footer-section-item"},g.default.createElement("a",{className:"footer-social-link",href:I.INSTAGRAM_URL,target:"_blank",rel:"noopener noreferrer"},g.default.createElement(_.default,{img:"instagram-original",size:14}),r.t("footer.instagram"))),g.default.createElement("li",{className:"footer-section-item"},g.default.createElement("a",{className:"footer-social-link",href:I.FACEBOOK_URL,target:"_blank",rel:"noopener noreferrer"},g.default.createElement(_.default,{img:"facebook-original",size:14}),r.t("footer.facebook")))))},r.renderLabelSection=function(){return g.default.createElement("div",{className:"footer-labels"},g.default.createElement("a",{href:"http://www.rtalabel.org/",className:"footer-label",target:"_blank",rel:"nofollow"},g.default.createElement("div",{className:"rta-label"})),g.default.createElement("a",{href:"http://www.safelabeling.org/",className:"footer-label",target:"_blank",rel:"nofollow"},g.default.createElement("div",{className:"safe-label"})),g.default.createElement("a",{href:"http://www.asacp.org/index.php?content=validate",className:"footer-label",target:"_blank",rel:"nofollow"},g.default.createElement("div",{className:"asacp-label"})))},r.renderTakeTour=function(){var e=r.props.links;return g.default.createElement("div",{className:"columns footer-nav"},g.default.createElement("div",{className:"column"},g.default.createElement(v.Link,{to:e.tour,target:"_blank",className:"btn btn-small btn-take-tour"},r.t("footer.takeTour"))))},r.renderNavList=function(){return g.default.createElement("div",{className:"columns footer-nav"},r.renderHelpSection(),r.renderSecuritySection(),r.renderWorkSection(),r.renderFollowSection())},i=n,o(r,i)}return i(t,e),d(t,[{key:"render",value:function(){var e=this.props.hostRoot,t=(0,c.default)(e.replace(/(.+)\.(.+)/,"$1")),n=e.split(/(\w+\.?\w+)\/?$/g)[1]||e;return g.default.createElement("footer",{"data-component-name":"Footer"},g.default.createElement("div",{className:"container"},g.default.createElement("div",{className:"columns footer-top"},g.default.createElement("div",{className:"footer-left column span-4 xs-12 s-12 m-4"},g.default.createElement("div",{className:"footer-logo"},g.default.createElement(v.NavLink,{className:"logo",to:"/"}),g.default.createElement("div",{className:"i18n"},g.default.createElement(C.default,null))),this.renderNavList(),this.renderTakeTour(),g.default.createElement("div",{className:"footer-description"},g.default.createElement("p",null,this.t("footer.welcomeToSiteBlock",{siteName:t})),g.default.createElement("p",null,this.t("footer.whatIsSiteBlock",{siteName:t})),g.default.createElement("p",null,this.t("footer.allModelsAdults"))),this.renderLabelSection()),g.default.createElement("div",{className:"footer-right column span-8 xs-12 s-12 m-8"},this.renderNavList(),this.renderTakeTour())),g.default.createElement("div",{className:"columns footer-additionally"},g.default.createElement("div",{className:"column span-4 xs-12 s-12 m-4 footer-labels-wrapper"},this.renderLabelSection()),g.default.createElement("div",{className:"column span-8 xs-12 s-12 m-12"},g.default.createElement("div",{className:"footer-statement-wrapper"},g.default.createElement("div",{className:"footer-statement"},g.default.createElement(v.Link,{className:"footer-compliance",to:"/2257"},this.t("footer.complianceStatement")),g.default.createElement(N.default,null)),g.default.createElement(_.default,{img:"agreement",size:32})))),g.default.createElement("div",{className:"columns"},g.default.createElement("div",{className:"column span-12"},g.default.createElement("div",{className:"columns footer-bottom"},g.default.createElement("div",{className:"column span-6"},"© ",(new Date).getFullYear()," ",n," "),g.default.createElement("div",{className:"column span-6"},g.default.createElement("div",{className:"footer-address"},g.default.createElement(O.default,{text:"Technius Ltd. 18",display:"inline-block"}),g.default.createElement(O.default,{text:"Theophilou, 21, CY-3075",display:"inline-block"}),g.default.createElement(O.default,{text:"Limassol, Cyprus",display:"inline-block"}))))))),g.default.createElement(T.default,null))}}]),t}(y.default);R.propTypes={currentUser:p.default.object,isLoggedIn:p.default.bool,links:p.default.object,hostRoot:p.default.string,whiteLabel:p.default.object,whiteLabelId:p.default.string};var M=function(e){var t=e.auth,n=e.config;return{currentUser:t.currentUser,hostRoot:n.data.hostRoot,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,links:n.data.links,whiteLabel:n.data.whiteLabel,whiteLabelId:n.whiteLabelId}};t.default=(0,h.connect)(M)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=(r(l),n(0)),c=r(u),d=n(24),f=n(3),p=r(f),m=n(8),g=r(m),h=n(106),v=r(h),E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.closeHandler=function(){v.default.set("cookiesReminder",(new Date).toISOString()),r.setState({wasShownBefore:!0})},i=n,o(r,i)}return i(t,e),s(t,[{key:"getNextState",value:function(e,t){return{wasShownBefore:Boolean("undefined"==typeof window||v.default.get("cookiesReminder"))}}},{key:"render",value:function(){return this.state.wasShownBefore?null:c.default.createElement("div",{className:"cookies-reminder"},this.t("cookiesReminder.message")," ",c.default.createElement(d.Link,{className:"learn-more",to:"/privacy"},this.t("cookiesReminder.learnMore")),c.default.createElement("div",{className:"close-button",onClick:this.closeHandler},c.default.createElement(g.default,{img:"close"})))}}]),t}(p.default);t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(11),c=r(u),d=n(490),f=r(d),p=n(6),m=r(p),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(1),E=r(v),y=n(0),b=r(y),_=n(2),S=n(4),O=n(9),P=n(79),T=n(3),A=r(T),C=n(8),I=r(C),w=n(5),N=n(7),R=n(21),M=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:R.hasInterfaceBlockChanged,action:function(e){return r.interfaceBlockChangeHandler(e)}}],r.openDropdownHandler=function(e){e.preventDefault(),e.stopPropagation(),r.state.isOpen?r.props.releaseInterface():r.props.blockInterface(e.target)},r.interfaceBlockChangeHandler=function(e){var t=e.isInterfaceBlocked,n=e.currentBlockingComponent;r.setState({isOpen:t&&r.rootRef&&r.rootRef.contains(n)})},r.localeChangeHandler=function(e){var t=e.nextLocale,n=e.nextSubDomain,a=r.props.hostRoot;r.props.changeLocale({nextLocale:t,nextSubDomain:n,hostRoot:a})},r.onChangeLanguageEventHandler=function(e,t){t.preventDefault(),t.stopPropagation();var n=(0,m.default)(r.props.languages,e),a=n.subDomain;r.localeChangeHandler({nextLocale:e,nextSubDomain:a})},r.onSelectLanguageEventHandler=function(e){var t=e.target.value;r.onChangeLanguageEventHandler(t,e)},i=n,o(r,i)}return i(t,e),h(t,[{key:"getDefaultState",value:function(){return{isOpen:this.props.isOpen}}},{key:"renderMobileDropDown",value:function(){var e=this.props,t=e.languages,n=e.currentLanguage,r=t[n].locale;return w.BROWSER_CAPABILITIES.desktop?null:b.default.createElement("select",{id:"language_dropdown",className:"language-mobile-list",onChange:this.onSelectLanguageEventHandler},(0,c.default)(t,function(e,t){return b.default.createElement("option",{key:t,selected:t===r,value:t},e.title)}))}},{key:"renderDropDown",value:function(){var e=this,t=this.props,n=t.languages,r=t.currentLanguage;return this.state.isOpen&&w.BROWSER_CAPABILITIES.desktop?b.default.createElement("div",{className:"language-list"},(0,c.default)(n,function(t,a){var o="en"!==r?location.hostname.split(n[r].subDomain+".").join(""):location.hostname,i=t.subDomain?t.subDomain+".":"";return b.default.createElement("div",{className:e.c("language-item",{selected:a===n[r].locale}),key:a},b.default.createElement("a",{href:"http://"+i+(o+location.pathname),onClick:(0,l.default)(e.onChangeLanguageEventHandler,a)},t.title,e.renderIf(a===n[r].locale,b.default.createElement(I.default,{img:"check-1",size:13}))))})):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.languages,r=t.currentLanguage,a=this.state.isOpen;return b.default.createElement("div",{className:"language-dropdown",ref:function(t){e.rootRef=t},"data-component-name":"LanguageMenuDropdown"},b.default.createElement("label",{htmlFor:"language_dropdown",onClick:w.BROWSER_CAPABILITIES.desktop?this.openDropdownHandler:null,className:this.c("trigger",{active:a})},b.default.createElement(I.default,{img:"i18n",size:14}),n[r].title,b.default.createElement("span",{className:"selectbox-arrow"},b.default.createElement(I.default,{img:"selectbox",size:10})),this.renderMobileDropDown()),this.renderDropDown())}}]),t}(A.default),L={blockInterface:O.blockInterface,changeLocale:P.changeLocale,releaseInterface:O.releaseInterface};M.propTypes=g({currentLanguage:E.default.string.isRequired,currentBlockingComponent:E.default.object,currentUser:E.default.object,hostRoot:E.default.string,isInterfaceBlocked:E.default.bool.isRequired,isLoggedIn:E.default.bool.isRequired,languages:E.default.object.isRequired},(0,N.getActionPropTypes)(L)),M.defaultProps={isOpen:!1};var k=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.config.data,i=o.i18n,s=i.current,l=i.languages,u=o.hostRoot,c=e.ui,d=c.currentBlockingComponent,p=c.isInterfaceBlocked;return{currentBlockingComponent:d,currentUser:n,currentLanguage:s,hostRoot:u,languages:(0,f.default)(l,"locale"),isInterfaceBlocked:p,isLoggedIn:r&&!a}},D=function(e){return(0,S.bindActionCreators)(L,e)};t.default=(0,_.connect)(k,D)(M)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),l=r(s),u=n(187),c=r(u),d=n(36),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(0),h=(r(g),n(2)),v=n(4),E=n(3),y=r(E),b=n(9),_=n(5),S=n(67),O=n(297),P=r(O),T=n(7),A=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.resizeEventHandler=function(){var e=window,t=e.innerWidth,n=e.innerHeight;r.props.updateWindowDimensions(t,n),_.BROWSER_CAPABILITIES.android&&document.activeElement&&"INPUT"===document.activeElement.tagName&&(0,c.default)(function(){return(0,S.scrollIntoView)(document.activeElement)})},r.orientationChangeEventHandler=function(){if("undefined"!=typeof window){var e=window.matchMedia("(orientation: portrait)").matches;r.props.updateWindowOrientation(e?"portrait":"landscape")}},r.focusEventHandler=function(){r.props.updateWindowFocus(!0)},r.blurEventHandler=function(){r.props.updateWindowFocus(!1)},i=n,o(r,i)}return i(t,e),m(t,[{key:"componentDidMount",value:function(){this.resizeThrottledEventHandler=(0,l.default)(this.resizeEventHandler,_.DEFAULT_RESIZE_EVENT_THROTTLE_WAIT),window.addEventListener("resize",this.resizeThrottledEventHandler),this.orientationChangeThrottledEventHadler=(0,f.default)(this.orientationChangeEventHandler,_.DEFAULT_SCROLL_EVENT_DEBOUNCE_WAIT),window.addEventListener("orientationchange",this.orientationChangeThrottledEventHadler),window.addEventListener("focus",this.focusEventHandler),window.addEventListener("blur",this.blurEventHandler),_.BROWSER_CAPABILITIES.ie?P.default.startInterval("documentVisibility",1e3,this.props.updateDocumentVisibility):this.registerEventListener(document,"visibilitychange",this.props.updateDocumentVisibility),this.orientationChangeEventHandler(),this.resizeEventHandler()}},{key:"componentWillUnmount",value:function(){this.resizeThrottledEventHandler.cancel(),window.removeEventListener("resize",this.resizeThrottledEventHandler),this.orientationChangeThrottledEventHadler.cancel(),window.removeEventListener("orientationchange",this.orientationChangeThrottledEventHadler),_.BROWSER_CAPABILITIES.ie&&P.default.stopInterval("documentVisibility")}},{key:"render",value:function(){return null}}]),t}(y.default),C={updateDocumentVisibility:b.updateDocumentVisibility,updateWindowDimensions:b.updateWindowDimensions,updateWindowFocus:b.updateWindowFocus,updateWindowOrientation:b.updateWindowOrientation};A.propTypes=p({},(0,T.getActionPropTypes)(C));var I=function(e){return(0,v.bindActionCreators)(C,e)};t.default=(0,h.connect)(null,I)(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(18),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(3),y=r(E),b=n(596),_=r(b),S=n(1137),O=r(S),P=n(1138),T=r(P),A=n(1139),C=r(A),I=n(1140),w=r(I),N=n(1141),R=r(N),M=n(1142),L=r(M),k=n(1143),D=r(k),U=n(5),j=n(83),F=r(j),B=n(1150),H=r(B),V=n(1151),G=r(V),x=n(1152),W=r(x),Y=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.scrollListener=function(){var e=r,t=e.headerNotificationContentRef,n=F.default.get()>U.HEADER_TOP_HEIGHT,a=n&&t?t.offsetHeight:null;r.setStateIfModified({isFixed:n,height:a})},r.renderNotification=function(e){var t=e.id,n=e.message,r=e.type;return"paymentsSettings"===r?h.default.createElement(H.default,u({},e.params,{key:t})):h.default.createElement(_.default,{id:t,key:t,type:r},n)},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.registerEventListener(window,"scroll",(0,l.default)(this.scrollListener,U.DEFAULT_SCROLL_EVENT_THROTTLE_WAIT)),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isFixed,r=t.height,a=this.props.notifications;return h.default.createElement("div",{style:{height:r},className:"header-notifications-wrapper","data-component-name":"HeaderNotifications"},h.default.createElement(D.default,{className:this.c("header-notifications",{fixed:n})},h.default.createElement("div",{ref:function(t){e.headerNotificationContentRef=t}},h.default.createElement(T.default,null),h.default.createElement(C.default,null),h.default.createElement(W.default,null),h.default.createElement(w.default,null),h.default.createElement(R.default,null),h.default.createElement(L.default,null),h.default.createElement(O.default,null),h.default.createElement(G.default,null),a.valueSeq().map(this.renderNotification))))}}]),t}(y.default);Y.propTypes={currentUser:m.default.object,isLoggedIn:m.default.bool,notifications:m.default.instanceOf(f.OrderedMap)};var K=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.headerNotifications;return{currentUser:n,isLoggedIn:r&&!a,notifications:o.collection}};t.default=(0,v.connect)(K)(Y)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(28),h=n(3),v=r(h),E=n(10),y=r(E),b=n(8),_=r(b),S=n(127),O=n(7),P=n(235),T=r(P),A=n(198),C=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.closeClickHandler=function(){r.props.hide({type:S.PERMANENT_NOTIFICATIONS.PUSH_NOTIFICATION})},r.turnOnClickHandler=function(){T.default.requestPermission().then(r.closeClickHandler).catch(r.closeClickHandler)},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){if(!this.props.isVisible)return null;var e=this.c("header-notification","header-notification-opened","header-notification-push");return f.default.createElement("div",{className:e,"data-component-name":"PushNotification"},f.default.createElement("span",{className:"header-notification-body"},f.default.createElement(_.default,{img:"notifications",size:18}),f.default.createElement("span",{className:"header-notification-title"},f.default.createElement("span",null,this.t("notifications.push.title")),f.default.createElement(y.default,{style:"signup",onClick:this.turnOnClickHandler},this.t("notifications.push.button")))),f.default.createElement("div",{className:"close-button",onClick:this.closeClickHandler},f.default.createElement(_.default,{img:"close-2",size:10})))}}]),t}(v.default),I={hide:g.hide};C.propTypes=s({currentUser:c.default.object.isRequired,isLoggedIn:c.default.bool.isRequired},(0,O.getActionPropTypes)(I));var w=function(e){var t=e.auth,n=t.isLoggedIn,r=t.isLoggingOut;return{currentUser:t.currentUser,isLoggedIn:n&&!r,isVisible:(0,A.getIsNotificationVisible)(e,S.PERMANENT_NOTIFICATIONS.PUSH_NOTIFICATION)}},N=function(e){return(0,m.bindActionCreators)(I,e)};t.default=(0,p.connect)(w,N)(C)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(3),m=r(p),g=n(17),h=r(g),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){if(!this.props.showFraudAlert)return null;var e=this.c("header-notification","header-notification-opened","header-notification-error");return d.default.createElement("div",{className:e,"data-component-name":"BlockedHeaderNotification"},d.default.createElement("span",{className:"header-notification-body"},d.default.createElement(h.default,{messageId:"notifications.blocked",parameters:{},elements:{email:d.default.createElement("a",{href:"mailto:help@stripchat.com"})}})))}}]),t}(m.default);v.propTypes={showFraudAlert:u.default.bool};var E=function(e){return{showFraudAlert:e.config.data.showFraudAlert}};t.default=(0,f.connect)(E)(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(48),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(28),E=n(3),y=r(E),b=n(17),_=r(b),S=n(127),O=n(8),P=r(O),T=n(7),A=n(198),C=n(12),I=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.closeClickHandler=function(){r.props.hide({type:S.PERMANENT_NOTIFICATIONS.BROWSER_RECOMMENDATION})},r.getBrowserIcon=function(e){var t=(0,l.default)(C.SUPPORTED_BROWSERS,{icon:e});return m.default.createElement("a",{className:"icon-wrapper",href:t.link,target:"_blank"},m.default.createElement(P.default,{img:t.icon,size:20}),m.default.createElement("span",{className:"browser-name"},t.name))},i=n,o(r,i)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.isLoggedIn,r=e.currentUser;if(!t)return null;var a=n&&r.isModel?"recommendationBrowserForBroadcast":"recommendationBrowserForPlaying",o=this.c("header-notification","header-notification-opened","header-notification-recommendation");return m.default.createElement("div",{className:o,"data-component-name":"BrowserRecommendationNotification"},m.default.createElement("span",{className:"header-notification-body"},m.default.createElement(P.default,{img:"exclamation",size:18}),m.default.createElement(_.default,{className:"header-notification-browsers",messageId:"notifications."+a,elements:{chrome:this.getBrowserIcon("chrome"),firefox:this.getBrowserIcon("firefox")}})),m.default.createElement("div",{className:"close-button",onClick:this.closeClickHandler},m.default.createElement(P.default,{img:"close-5"})))}}]),t}(y.default),w={hide:v.hide};I.propTypes=u({currentUser:f.default.shape({isModel:f.default.bool}),isLoggedIn:f.default.bool},(0,T.getActionPropTypes)(w));var N=function(e){var t=e.auth;return{currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isVisible:(0,A.getIsNotificationVisible)(e,S.PERMANENT_NOTIFICATIONS.BROWSER_RECOMMENDATION)}},R=function(e){return(0,h.bindActionCreators)(w,e)};t.default=(0,g.connect)(N,R)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(31),g=n(4),h=n(28),v=n(127),E=n(3),y=r(E),b=n(8),_=r(b),S=n(7),O=n(198),P=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(){(0,r.props.routerPush)("/mobile"),r.closeClickHandler()},r.closeClickHandler=function(){r.props.hide({type:v.PERMANENT_NOTIFICATIONS.MOBILE_APP_NEW_FEATURES})},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){if(!this.state.isVisible)return null;var e=this.c("header-notification","header-notification-opened","header-notification-warning");return f.default.createElement("div",{className:e,"data-component-name":"MobileAppNewFeaturesNotification"},f.default.createElement("div",{className:"header-notification-body"},f.default.createElement("div",{onClick:this.clickHandler,className:"payment-methods-link"},f.default.createElement("span",null," Got an Android Phone? Try broadcasting in ",f.default.createElement("span",{className:"payment-methods-title"},"our app"),"! Fantastic quality, chat feature and private messenger built in."))),f.default.createElement("div",{className:"close-button",onClick:this.closeClickHandler},f.default.createElement(_.default,{img:"close"})))}}]),t}(y.default),T={hide:h.hide,routerPush:m.push};P.propTypes=s({currentUser:c.default.shape({isModel:c.default.bool,isStudio:c.default.bool}),isLoggedIn:c.default.bool},(0,S.getActionPropTypes)(T));var A=function(e){var t=e.auth;return{currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isVisible:(0,O.getIsNotificationVisible)(e,v.PERMANENT_NOTIFICATIONS.MOBILE_APP_NEW_FEATURES)}},C=function(e){return(0,g.bindActionCreators)(T,e)};t.default=(0,p.connect)(A,C)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=r(s),u=n(6),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(28),b=n(9),_=n(3),S=r(_),O=n(8),P=r(O),T=n(5),A=n(127),C=n(7),I=n(198),w={de:{de:h.default.createElement("span",null,"Gute Nachrichten! Jetzt kann man token via SOFORT und Paysafecard kaufen. ",h.default.createElement("span",{className:"payment-methods-title"},"Klick hier.")),at:h.default.createElement("span",null,"Gute Nachrichten! Jetzt kann man token via Eps-Überweisung und SOFORT kaufen. ",h.default.createElement("span",{className:"payment-methods-title"},"Klick hier."))},ru:{ru:h.default.createElement("span",null,"Хорошие новости! Появилась возможность ",h.default.createElement("span",{className:"payment-methods-title"},"покупать токены")," через QIWI кошелек!"),ua:h.default.createElement("span",null,"Хорошие новости! Появилась возможность ",h.default.createElement("span",{className:"payment-methods-title"},"покупать токены")," через QIWI кошелек!"),kz:h.default.createElement("span",null,"Хорошие новости! Появилась возможность ",h.default.createElement("span",{className:"payment-methods-title"},"покупать токены")," через QIWI кошелек!")}},N=h.default.createElement("span",null,"Now you can buy tokens via PayPal. ",h.default.createElement("span",{className:"payment-methods-title"}," Check it out!")),R=["ad","ae","ag","ai","al","am","an","ao","ar","at","aw","ba","bb","be","bf","bh","bi","bj","bm","bn","bo","br","bs","bt","bz","ca","cd","cg","ch","ci","ck","cl","cm","co","cr","cv","cy","cz","dj","dk","dm","do","dz","ec","er","es","et","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gi","gl","gm","gn","gp","gr","gt","gw","hn","hr","hu","ie","il","is","it","jm","jo","ke","kg","kh","ki","km","kn","kw","ky","kz","la","lc","li","ls","lu","lv","ma","mc","md","me","mg","mh","mk","ml","mn","mq","mr","ms","mu","mv","mw","mx","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pl","pm","pn","pt","pw","py","qa","re","ro","rs","rw","sb","sc","se","sh","si","sj","sk","sl","sm","sn","so","sr","st","sv","sz","tc","td","tg","tj","tm","tn","to","tr","tt","tv","tz","us","uy","va","vc","ve","vg","vu","wf","ws","ye","yt","zm","zw"],M=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.buyTokensClickHandler=function(){r.props.emitButtonEvent(T.APP_BUTTONS.ADVERTISEMENT_PAYMENT_METHODS),r.closeClickHandler()},r.closeClickHandler=function(){r.props.hide({type:A.PERMANENT_NOTIFICATIONS.PAYMENT_METHODS})},i=n,o(r,i)}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.country,n=e.currentLocale,r=e.isVisible,a=(0,c.default)(w,n+"."+t),o=(0,l.default)(R,t)?N:null,i=a||o;if(!r||!i)return null;var s=this.c("header-notification","header-notification-opened","header-notification-success");return h.default.createElement("div",{className:s,"data-component-name":"PaymentMethodsHeaderNotification"},h.default.createElement("span",{className:"header-notification-body"},h.default.createElement("span",{onClick:this.buyTokensClickHandler,className:"payment-methods-link"},i)),h.default.createElement("div",{className:"close-button",onClick:this.closeClickHandler},h.default.createElement(P.default,{img:"close"})))}}]),t}(S.default),L={emitButtonEvent:b.emitButtonEvent,hide:y.hide};M.propTypes=d({country:m.default.string.isRequired,currentLocale:m.default.string.isRequired,isLoggedIn:m.default.bool.isRequired,userProfile:m.default.object},(0,C.getActionPropTypes)(L));var k=function(e){var t=e.auth,n=t.isLoggedIn,r=t.isLoggingOut,a=e.config.data,o=a.country,i=a.i18n.current,s=e.profile.user;return{country:o,currentLocale:i,isLoggedIn:n&&!r,userProfile:s,isVisible:(0,I.getIsNotificationVisible)(e,A.PERMANENT_NOTIFICATIONS.PAYMENT_METHODS)}},D=function(e){return(0,E.bindActionCreators)(L,e)};t.default=(0,v.connect)(k,D)(M)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(0),l=r(s),u=n(2),c=n(4),d=n(28),f=n(9),p=n(8),m=r(p),g=n(5),h=n(127),v=n(7),E=n(198),y=function(e,t){var n=t.i18n.trans,r=e.isVisible,a=function(){e.hide({type:h.PERMANENT_NOTIFICATIONS.PAYMENT_METHOD_PRZELEWY})},o=function(){e.emitButtonEvent(g.APP_BUTTONS.ADVERTISEMENT_PAYMENT_METHOD_PRZELEWY),a()};return r?l.default.createElement("div",{className:"header-notification header-notification-recommendation","data-component-name":"Przelewy24HeaderNotification"},l.default.createElement("span",{className:"header-notification-body przelewy24",onClick:o},l.default.createElement("span",{className:"przelewy24-wrap"},l.default.createElement("span",{className:"przelewy24-icon"},l.default.createElement(m.default,{img:"notifications",size:18})),l.default.createElement("span",{className:"przelewy24-text"},n("header.przelewyTwentyFour"))),l.default.createElement(m.default,{img:"przelewy24"})),l.default.createElement("div",{className:"close-button",onClick:a},l.default.createElement(m.default,{img:"close-5"}))):null},b={emitButtonEvent:f.emitButtonEvent,hide:d.hide};y.propTypes=a({},(0,v.getActionPropTypes)(b)),y.contextTypes={i18n:i.default.object};var _=function(e){return{isVisible:(0,E.getIsNotificationVisible)(e,h.PERMANENT_NOTIFICATIONS.PAYMENT_METHOD_PRZELEWY)}},S=function(e){return(0,c.bindActionCreators)(b,e)};t.default=(0,u.connect)(_,S)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),s=r(i),l=n(0),u=r(l),c=n(379),d=n(5),f=function(e){var t=e.children,n=a(e,["children"]);return u.default.createElement(c.CSSTransition,o({},n,{classNames:"slide-transition","data-component-name":"SlideTransition"}),t)};f.propTypes={children:s.default.element.isRequired,timeout:s.default.number},f.defaultProps={timeout:d.TRANSITION_SLIDE_ANIMATION_DELAY},t.default=f},,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(85),u=r(l),c=n(14),d=r(c),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(3),b=r(y),_=n(10),S=r(_),O=n(596),P=r(O),T=n(83),A=r(T),C=n(227),I=n(12),w=function(e){function t(){var e,n,r,s,l;o(this,t);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return r=s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),s.statusButtons=(n={},a(n,I.PAYMENT_SETTINGS_NOTIFICATION_TYPES.PENDING_MODIFIED,["cancel","resend"]),a(n,I.PAYMENT_SETTINGS_NOTIFICATION_TYPES.PENDING_NEW,["cancel","resend"]),a(n,I.PAYMENT_SETTINGS_NOTIFICATION_TYPES.PENDING_FIRSTCHOICE_PAY_SIGNUP,["cancel"]),a(n,I.PAYMENT_SETTINGS_NOTIFICATION_TYPES.PENDING_FIRSTCHOICE_PAY_APPROVAL,["cancel"]),n),s.cancelHandler=function(){A.default.reset(),s.props.clearPaymentsSettings()},s.resendHandler=function(){return s.props.savePaymentsSettings(s.props.optionsPending)},l=r,i(s,l)}return s(t,e),f(t,[{key:"getIsButtonVisible",value:function(e){var t=this.props.type,n=this.statusButtons[t]||[];return(0,d.default)(n,e)}},{key:"render",value:function(){var e=[];return this.getIsButtonVisible("cancel")&&e.push(h.default.createElement(S.default,{key:"cancel",onClick:this.cancelHandler,size:"small"},this.t("button.cancel"))),this.getIsButtonVisible("resend")&&e.push(h.default.createElement(S.default,{key:"resend",onClick:this.resendHandler,size:"small"},this.t("button.resendEmail"))),h.default.createElement(P.default,{isPermanent:!0,type:"paymentsSettings","data-component-name":"PaymentsSettingsNotification"},h.default.createElement("div",{className:"notification-text"},this.t("paymentsSettings.notification."+this.props.type)),this.renderIf(e.length,function(){return h.default.createElement("div",{className:"notification-buttons"},e)}))}}]),t}(b.default);w.propTypes={type:m.default.oneOf((0,u.default)(I.PAYMENT_SETTINGS_NOTIFICATION_TYPES))};var N=function(e){return{optionsPending:e.paymentsSettings.optionsPending}},R=function(e){return(0,E.bindActionCreators)({savePaymentsSettings:C.save,clearPaymentsSettings:C.clear},e)};t.default=(0,v.connect)(N,R)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(9),E=n(3),y=r(E),b=n(8),_=r(b),S=n(5),O=n(56),P=r(O),T=n(7),A=["nl"],C=function(e){var t=e.currentUser,n=e.isLoggedIn,r=e.country,a=e.isCampaignActive,o=!n||n&&!t.isModel&&!t.isStudio,i=(0,l.default)(A,r),s=P.default.has("tryIdealNotificationHidden");return a&&o&&i&&!s},I=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:["isLoggedIn"],action:function(e){r.setState({isVisible:C(e)})}}],r.buyTokensClickHandler=function(){r.props.emitButtonEvent(S.APP_BUTTONS.ADVERTISEMENT_IDEAL_PAYMENT),r.setState({isVisible:!1})},r.closeClickHandler=function(){P.default.set("tryIdealNotificationHidden",!0),r.setState({isVisible:!1})},i=n,o(r,i)}return i(t,e),c(t,[{key:"getDefaultState",value:function(){return{isVisible:C(this.props)}}},{key:"render",value:function(){if(!this.state.isVisible)return null;var e=this.c("header-notification","header-notification-opened","header-notification-success");return m.default.createElement("div",{className:e,"data-component-name":"TryIdealNotification"},m.default.createElement("span",{className:"header-notification-body"},m.default.createElement("span",{onClick:this.buyTokensClickHandler,className:"payment-methods-link"},m.default.createElement("span",null," Goed nieuws! Je kunt nu je tegoed opwaarderen met iDeal! ",m.default.createElement("span",{className:"payment-methods-title"},"Probeer het nu!")))),m.default.createElement("div",{className:"close-button",onClick:this.closeClickHandler},m.default.createElement(_.default,{img:"close"})))}}]),t}(y.default),w={emitButtonEvent:v.emitButtonEvent};I.propTypes=u({currentUser:f.default.shape({isModel:f.default.bool,isStudio:f.default.bool}),country:f.default.string,isLoggedIn:f.default.bool},(0,T.getActionPropTypes)(w));var N=function(e){var t=e.auth,n=e.config;return{country:n.data.country,currentUser:t.currentUser,isCampaignActive:n.data.features.buyTokensIdealAdv,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}},R=function(e){return(0,h.bindActionCreators)(w,e)};t.default=(0,g.connect)(N,R)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(28),h=n(9),v=n(3),E=r(v),y=n(8),b=r(y),_=n(5),S=n(127),O=n(7),P=n(198),T=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.buyTokensClickHandler=function(){r.props.emitButtonEvent(_.APP_BUTTONS.ADVERTISEMENT_GIFT_CARDS),r.closeClickHandler()},r.closeClickHandler=function(){r.props.hide({type:S.PERMANENT_NOTIFICATIONS.GIFT_CARD})},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){if(!this.props.isVisible)return null;var e=this.c("header-notification","header-notification-opened","header-notification-warning");return f.default.createElement("div",{className:e,"data-component-name":"GiftCardsNotification"},f.default.createElement("span",{className:"header-notification-body"},f.default.createElement("span",{onClick:this.buyTokensClickHandler,className:"payment-methods-link"},f.default.createElement("span",null," Great News! Now buy tokens with ",f.default.createElement("span",{className:"payment-methods-title"},"Gift Cards (Walmart, Starbucks, 100+ More!)")))),f.default.createElement("div",{className:"close-button",onClick:this.closeClickHandler},f.default.createElement(b.default,{img:"close"})))}}]),t}(E.default),A={emitButtonEvent:h.emitButtonEvent,hide:g.hide};T.propTypes=s({currentUser:c.default.shape({isModel:c.default.bool,isStudio:c.default.bool}),isLoggedIn:c.default.bool},(0,O.getActionPropTypes)(A));var C=function(e){var t=e.auth;return{currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isVisible:(0,P.getIsNotificationVisible)(e,S.PERMANENT_NOTIFICATIONS.GIFT_CARD)}},I=function(e){return(0,m.bindActionCreators)(A,e)};t.default=(0,p.connect)(C,I)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(24),y=n(87),b=n(17),_=r(b),S=n(3),O=r(S),P=n(1154),T=r(P),A=n(8),C=r(A),I=n(5),w=n(83),N=r(w),R=n(7),M=n(1162),L=r(M),k=n(118),D=n(38),U=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.scrollListener=function(){var e=N.default.get(),t=r.state.isHidden;e>I.HEADER_TOP_HEIGHT&&!t?r.setState({isHidden:!0}):e<=I.HEADER_TOP_HEIGHT&&t&&r.setState({isHidden:!1})},r.indexPageLinkClickHandler=function(){r.props.resetModelSortType(),r.props.changeTagsPreference("F")},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.isAutoHideEnabled&&this.registerEventListener(window,"scroll",(0,l.default)(this.scrollListener,I.DEFAULT_SCROLL_EVENT_DEBOUNCE_WAIT)),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){var e=this,t=this.state.isHidden,n=this.props,r=n.currentUser,a=n.isLoggedIn,o=n.liveCount,i=n.userProfile,s=o>0,l=a&&!r.isModel&&!r.isStudio;return g.default.createElement("div",{className:this.c("header-top",{hidden:t}),"data-component-name":"HeaderTop"},g.default.createElement("div",{className:"container"},g.default.createElement("nav",{className:"nav-left"},g.default.createElement("div",{className:"logo"},g.default.createElement(E.Link,{to:"/",onClick:this.indexPageLinkClickHandler})),this.renderIf(s,function(){return g.default.createElement("div",{className:"nav-link live-models-count media-up-to-m-hidden"},g.default.createElement(E.Link,{to:"/",onClick:e.indexPageLinkClickHandler},g.default.createElement(C.default,{img:"dot"}),g.default.createElement("span",{className:"media-up-to-s-hidden"},g.default.createElement(_.default,{messageId:"header.liveModels",parameters:{liveModelsCount:o},elements:{accent:g.default.createElement("span",{className:"accent"})}}))))}),g.default.createElement("div",{className:"nav-link media-up-to-s-hidden"},g.default.createElement(E.NavLink,{to:"/top"},g.default.createElement(C.default,{img:"best-models"}),g.default.createElement("span",{className:"media-up-to-m-hidden"},this.t("header.bestModels"))))),g.default.createElement("nav",{className:"nav-right"},this.renderIf(a,function(){return g.default.createElement(T.default,{type:"personalNotifications"})}),this.renderIf(a&&r.isStudio,function(){return g.default.createElement("div",{className:"nav-button"},g.default.createElement(E.NavLink,{activeClassName:"disabled",className:"btn btn-apply",to:"/studio",exact:!0},e.t("header.studioModels")))}),this.renderIf(l,function(){return g.default.createElement("div",{className:"nav-link media-up-to-m-hidden"},g.default.createElement(E.NavLink,{to:"/favorites"},g.default.createElement(C.default,{img:"favorited"})))}),g.default.createElement("div",{className:"nav-button media-up-to-m-hidden"},g.default.createElement(L.default,null)),this.renderIf(a&&i,g.default.createElement(T.default,{className:"media-up-to-s-hidden",type:"tokensMenu"})),g.default.createElement(T.default,{type:"userMenu"}))))}}]),t}(O.default),j={changeTagsPreference:y.changeTagsPreference,resetModelSortType:k.resetModelSortType};U.propTypes=u({currentUser:p.default.object,isLoggedIn:p.default.bool,liveCount:p.default.number,userProfile:p.default.object},(0,R.getActionPropTypes)(j));var F=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.modelsOnline.liveCount;return{currentUser:n,isLoggedIn:r&&!a,liveCount:o,userProfile:(0,D.getCurrentUserProfile)(e)}},B=function(e){return(0,v.bindActionCreators)(j,e)};t.default=(0,E.withRouter)((0,h.connect)(F,B)(U))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(3),v=r(h),E=n(21),y=n(1155),b=r(y),_=n(1159),S=r(_),O=n(1161),P=r(O),T=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:E.hasInterfaceBlockChanged,action:function(e){return r.interfaceBlockChangeHandler(e)}}],r.interfaceBlockChangeHandler=function(e){var t=e.isInterfaceBlocked,n=e.currentBlockingComponent;r.setState({isDropdownOpen:t&&r.dropdownRenderRootRef&&r.dropdownRenderRootRef.contains(n)})},r.hideDropdown=function(){r.props.releaseInterface()},r.keepDropdownOpen=function(e){e.stopPropagation()},r.dropdownLinkClickHandler=function(e){e.preventDefault(),r.state.isDropdownOpen?r.props.releaseInterface():r.props.blockInterface(e.target)},r.dropdownRootRefHandler=function(e){r.dropdownRenderRootRef=e},i=n,o(r,i)}return i(t,e),l(t,[{key:"getDefaultState",value:function(){return{isDropdownOpen:this.props.isDropdownOpen}}},{key:"render",value:function(){var e=this.state.isDropdownOpen,t=this.props,n=t.type,r=t.className,a=t.componentClassName,o=this.c("header-dropdown",r,a,{active:e}),i={className:o,dropdownLinkClickHandler:this.dropdownLinkClickHandler,dropdownRootRefHandler:this.dropdownRootRefHandler,isDropdownOpen:e,keepDropdownOpen:this.keepDropdownOpen};return"userMenu"===n?f.default.createElement(b.default,s({},i,{"data-component-name":"HeaderDropdown"})):"personalNotifications"===n?f.default.createElement(S.default,s({},i,{"data-component-name":"HeaderDropdown"})):"tokensMenu"===n?f.default.createElement(P.default,s({},i,{"data-component-name":"HeaderDropdown"})):null}}]),t}(v.default);T.propTypes={className:c.default.string,componentClassName:c.default.string,isDropdownOpen:c.default.bool,blockInterface:c.default.func.isRequired,releaseInterface:c.default.func.isRequired},T.defaultProps={isDropdownOpen:!1};var A=function(e){var t=e.ui;return{currentBlockingComponent:t.currentBlockingComponent,isInterfaceBlocked:t.isInterfaceBlocked,windowWidth:t.windowWidth,windowHeight:t.windowHeight}},C=function(e){return(0,m.bindActionCreators)({blockInterface:g.blockInterface,releaseInterface:g.releaseInterface},e)};t.default=(0,p.connect)(A,C)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderUserMenu=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(24),g=n(4),h=n(9),v=n(8),E=r(v),y=n(236),b=r(y),_=n(237),S=r(_),O=n(3),P=r(O),T=n(73),A=r(T),C=n(380),I=r(C),w=n(51),N=n(5),R=n(7),M=n(68),L=n(43),k=n(600),D=r(k),U=n(1157),j=r(U),F=n(602),B=r(F),H=n(89),V=r(H),G=n(234),x=n(38),W=t.HeaderUserMenu=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.buyTokensClickHandler=function(){r.hideDropdown(),r.props.showModal(N.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:N.APP_BUTTONS.MOBILE_HEADER_MENU_BUY_TOKENS})},r.hideDropdown=function(){return r.props.releaseInterface()},r.onCreateNewAccountMobileClick=function(){r.hideDropdown()},r.onLoginMobileClick=function(){r.hideDropdown()},r.toggleInvisibleMode=function(e){var t=r.props,n=t.currentUser,a=t.isInvisible,o=t.keepDropdownOpen,i=t.showModal,s=t.updateProfile,l=n.isGold,u=n.isAdmin,c=n.isSupport;l||u||c?(s({isInvisible:!a},L.UPDATE_TYPES.INVISIBLE_MODE,{notifications:{success:null,error:null}}),o(e)):i(N.MODAL_TYPES.INVISIBLE_MODE)},r.renderInvisibleModeSwitch=function(){var e=r.props,t=e.currentUser,n=e.isInvisible,a=t.isModel,o=t.isStudio;return a||o?null:f.default.createElement("li",{className:"invisible-mode-switch",onClick:r.toggleInvisibleMode},f.default.createElement("div",null,f.default.createElement(E.default,{img:"invisible"}),r.t("userMenu.invisibleMode")),f.default.createElement(I.default,{isChecked:n}))},r.renderMobileDropDown=function(){if(!r.props.isDropdownOpen)return null;var e=r.props,t=e.currentUser,n=e.isEmailVerified,a=e.isLoggedIn,o=e.isPageAllowedToStartBroadcast,i=e.keepDropdownOpen,s=e.messagesCount,l=e.userProfile;if(!a||!l)return f.default.createElement("div",{className:"header-dropdown-content-wrapper media-after-l-hidden"},f.default.createElement("ul",{className:"header-dropdown-content"},f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/top"},f.default.createElement(E.default,{img:"best-models"}),r.t("header.bestModels"))),f.default.createElement("li",{className:"list-item-wrapper",onClick:i},f.default.createElement(B.default,{className:"btn btn-block btn-medium btn-signup",onClick:r.onCreateNewAccountMobileClick,triggerSource:w.AUTH_TRIGGER_SOURCES.MOBILE_DROPDOWN},r.t("login.joinNow")),f.default.createElement(D.default,{className:"btn btn-block btn-medium btn-outline",onClick:r.onLoginMobileClick,triggerSource:w.AUTH_TRIGGER_SOURCES.MOBILE_DROPDOWN},r.t("login.logIn")))));var u=t.isGold,c=t.isGreen,d=t.isModel,p=t.isStudio,g=t.isTranslator,h=t.isI18nImages,v=t.isI18nAdmin,y=t.studioId,_=t.tokensPaid,O=u||c||d||_>0;return f.default.createElement("div",{className:"header-dropdown-content-wrapper media-after-l-hidden"},f.default.createElement(A.default,null,f.default.createElement("ul",{className:"header-dropdown-content"},r.renderIf(!d&&!p,function(){return f.default.createElement("li",{className:"tokens media-after-m-hidden",onClick:i},f.default.createElement("div",{className:"tokens-label"},f.default.createElement(E.default,{img:"tokens-1"}),r.t("buyTokens.tokens",{tokens:l.tokens})),f.default.createElement("div",{className:"tokens-btn"},f.default.createElement("button",{className:"btn btn-signup",onClick:r.buyTokensClickHandler},r.t("button.buy"))))}),r.renderIf(O,function(){return f.default.createElement("li",{className:"media-after-m-hidden"},f.default.createElement(m.Link,{to:"/tokens-history"},f.default.createElement(E.default,{img:"payment-history-1"}),r.t("tokensHistory.tokensHistory")))}),r.renderIf(p,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/studio-earnings"},f.default.createElement(E.default,{img:"payment-history-1"}),r.t("tokensHistory.studioEarnings")))}),r.renderIf(d&&!y||p,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/payments-settings"},f.default.createElement(b.default,{shouldAnalyzePaymentSettings:!0,user:l,type:"alert-small"},"!"),f.default.createElement(E.default,{img:"payment-settings"}),r.t("userMenu.paymentsSettings")))}),r.renderIf(d||p,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/payments-history"},f.default.createElement(E.default,{img:"payment-history"}),r.t("userMenu.paymentsHistory")))}),f.default.createElement("li",{className:"media-after-m-hidden"},f.default.createElement(m.Link,{to:"/top"},f.default.createElement(E.default,{img:"best-models"}),r.t("header.bestModels"))),r.renderIf(r.isFavoritesLinkVisible,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/favorites"},f.default.createElement(E.default,{img:"favorited"}),r.t("header.myFavorites")))}),f.default.createElement("li",null,f.default.createElement(S.default,{user:l},f.default.createElement(E.default,{img:"user-profile"}),r.t("userMenu.myProfile"))),f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/messages"},f.default.createElement(E.default,{img:"message"}),r.t("userMenu.myMessages"),f.default.createElement("span",{className:"messages-count"},s>0?s:""))),r.renderInvisibleModeSwitch(),f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/friends"},f.default.createElement(E.default,{img:"users"}),r.t("userMenu.myFriends"))),r.renderIf(d,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/model/knights"},f.default.createElement(E.default,{img:"knight-1"}),r.t("userMenu.myKnights")))}),f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/followings"},f.default.createElement(E.default,{img:"exclamation-shape"}),r.t("userMenu.mySubscriptions"))),f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/settings"},f.default.createElement(E.default,{img:"settings"}),r.renderIf(!n,f.default.createElement(b.default,{type:"alert-small"},"!")),r.t("userMenu.settingsAndPrivacy"))),r.renderIf(o,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/start-broadcasting"},f.default.createElement(E.default,{img:"broadcast"}),r.t("userMenu.startBroadcasting")))}),r.renderIf(d,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/model/documents"},f.default.createElement(E.default,{img:"documents"}),r.t("userMenu.documents")))}),r.renderIf(d,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/model/bans"},f.default.createElement(E.default,{img:"ban"}),r.t("userMenu.bannedUsers")))}),r.renderIf(g||h||v,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/i18n"},f.default.createElement(E.default,{img:"i18n"}),r.t("userMenu.translations")))}),f.default.createElement("li",{className:"header-user-dropdown-item-logout"},f.default.createElement(j.default,null,f.default.createElement(E.default,{img:"turn-off"}),r.t("userMenu.logout"))))))},r.renderDesktopDropDown=function(){var e=r.props,t=e.currentUser,n=e.isEmailVerified,a=e.isLoggedIn,o=e.isAvatarVisible,i=e.messagesCount,s=e.userProfile;if(!a)return null;var l=s.avatarUrlThumb,u=t.isModel,c=t.isTranslator,d=t.isI18nImages,p=t.isI18nAdmin;return f.default.createElement("div",{className:"header-dropdown-content-wrapper media-up-to-m-hidden"},f.default.createElement(A.default,null,f.default.createElement("ul",{className:"header-dropdown-content"},r.renderIf(o,function(){return f.default.createElement("li",{className:"avatar-wrapper"},f.default.createElement("div",{className:"avatar-wrapper-background",style:{backgroundImage:"url("+l+")"}}),f.default.createElement(V.default,{user:s,size:160}))}),f.default.createElement("li",null,f.default.createElement(S.default,{user:s},f.default.createElement(E.default,{img:"user-profile"}),r.t("userMenu.myProfile"))),f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/messages"},f.default.createElement(E.default,{img:"message"}),r.t("userMenu.myMessages"),f.default.createElement("span",{className:"messages-count"},i>0?i:""))),r.renderInvisibleModeSwitch(),f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/friends"},f.default.createElement(E.default,{img:"users"}),r.t("userMenu.myFriends"))),r.renderIf(u,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/model/knights"},f.default.createElement(E.default,{img:"knight-1"}),r.t("userMenu.myKnights")))}),f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/followings"},f.default.createElement(E.default,{img:"exclamation-shape"}),r.t("userMenu.mySubscriptions"))),r.renderIf(r.isFavoritesLinkVisible,function(){return f.default.createElement("li",{className:"media-after-l-hidden"},f.default.createElement(m.Link,{to:"/favorites"},f.default.createElement(E.default,{img:"favorited"}),r.t("header.myFavorites")))}),f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/settings"},f.default.createElement(E.default,{img:"settings"}),r.renderIf(!n,f.default.createElement(b.default,{type:"alert-small"},"!")),r.t("userMenu.settingsAndPrivacy"))),r.renderIf(u,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/model/documents"},f.default.createElement(E.default,{img:"documents"}),r.t("userMenu.documents")))}),r.renderIf(u,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/model/bans"},f.default.createElement(E.default,{img:"ban"}),r.t("userMenu.bannedUsers")))}),r.renderIf(c||d||p,function(){return f.default.createElement("li",null,f.default.createElement(m.Link,{to:"/i18n"},f.default.createElement(E.default,{img:"i18n"}),r.t("userMenu.translations")))}),f.default.createElement("li",{className:"header-user-dropdown-item-logout"},f.default.createElement(j.default,null,f.default.createElement(E.default,{img:"turn-off"}),r.t("userMenu.logout"))))))},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderMobileNavLink",value:function(){var e=this.props,t=e.dropdownLinkClickHandler,n=e.isDropdownOpen,r=e.isEmailVerified,a=e.userProfile;return f.default.createElement("a",{className:this.c("dropdown-link mobile-nav-link media-after-m-hidden",{active:n}),href:"#",onClick:t},f.default.createElement("span",null,f.default.createElement(b.default,{shouldAnalyzePaymentSettings:!0,user:a,type:"alert-small"},"!"),f.default.createElement(E.default,{img:"menu"}),this.renderIf(!r,f.default.createElement(b.default,{type:"alert-medium"},"!"))))}},{key:"renderDesktopNavLink",value:function(){var e=this.props,t=e.currentUser,n=e.dropdownLinkClickHandler,r=e.isDropdownOpen,a=e.isEmailVerified,o=e.isInvisible;if(!e.isLoggedIn)return null;return f.default.createElement("a",{className:this.c("dropdown-link media-up-to-s-hidden","hidden-ipad-portrait",{active:r}),href:"#",onClick:n},this.renderIf(o,f.default.createElement("div",{className:"invisible-wrapper"},f.default.createElement(E.default,{img:"invisible"})),f.default.createElement(V.default,{user:t,size:30})),this.renderIf(!a,f.default.createElement(b.default,{type:"alert-medium"},"!")),t.username,f.default.createElement("span",{className:"dropdown-arrow"},f.default.createElement(E.default,{img:"selectbox"})))}},{key:"renderJoinButton",value:function(){var e=this.props,t=e.isLoggedIn,n=e.isOnSignupRoute;return t||n?null:f.default.createElement(B.default,{className:"btn btn-signup media-up-to-s-hidden",triggerSource:w.AUTH_TRIGGER_SOURCES.HEADER},this.t("login.joinNow"))}},{key:"renderLoginButton",value:function(){var e=this.props,t=e.isLoggedIn,n=e.isOnLoginRoute;return t||n?null:f.default.createElement(D.default,{className:"btn btn-outline media-up-to-s-hidden",triggerSource:w.AUTH_TRIGGER_SOURCES.HEADER},this.t("login.logIn"))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.isDropdownOpen,r=e.dropdownRootRefHandler;return f.default.createElement("div",{className:this.c("header-user-menu","header-dropdown",t),ref:r,"data-component-name":"HeaderUserMenu"},this.renderDesktopNavLink(),this.renderMobileNavLink(),this.renderJoinButton(),this.renderLoginButton(),this.renderIf(n,this.renderDesktopDropDown),this.renderIf(n,this.renderMobileDropDown))}},{key:"isFavoritesLinkVisible",get:function(){var e=this.props,t=e.currentUser;return e.isLoggedIn&&!t.isModel&&!t.isStudio}}]),t}(P.default),Y={releaseInterface:h.releaseInterface,showModal:h.showModal,updateProfile:L.updateProfile};W.propTypes=s({className:c.default.string,currentUser:c.default.object,dropdownLinkClickHandler:c.default.func.isRequired,dropdownRootRefHandler:c.default.func.isRequired,isAvatarVisible:c.default.bool,isDropdownOpen:c.default.bool.isRequired,isLoggedIn:c.default.bool,keepDropdownOpen:c.default.func.isRequired,userProfile:c.default.object},(0,R.getActionPropTypes)(Y)),W.defaultProps={isAvatarVisible:!1};var K=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.profile.user,s=e.routing;return{currentUser:r,isEmailVerified:(0,x.getIsEmailVerified)(e),isInvisible:(0,x.getIsInvisible)(e),isLoggedIn:a&&!o,isOnLoginRoute:(0,M.getIsOnLoginRoute)(e),isOnSignupRoute:(0,M.getIsOnSignupRoute)(e),isPageAllowedToStartBroadcast:(0,M.getIsPageAllowedToStartBroadcast)(e,t),messagesCount:(0,G.getPrivateMessagesCount)(e),userProfile:i,routing:s}},q=function(e){return(0,g.bindActionCreators)(Y,e)};t.default=(0,m.withRouter)((0,p.connect)(K,q)(W))},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LogoutLink=void 0;var a=n(1),o=r(a),i=n(0),s=r(i),l=n(2),u=n(4),c=n(34),d=t.LogoutLink=function(e){var t=e.children,n=e.performLogout,r=function(e){e.preventDefault(),n()};return s.default.createElement("a",{href:"#logout",onClick:r,"data-component-name":"LogoutLink"},t)};d.propTypes={children:o.default.node,performLogout:o.default.func.isRequired};var f=function(e){return(0,u.bindActionCreators)({performLogout:c.logout},e)};t.default=(0,l.connect)(null,f)(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),u=r(l),c=n(8),d=r(c),f=n(1),p=r(f),m=n(0),g=r(m),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.status;return g.default.createElement("span",{className:"user-status-icon "+n,title:this.t("userStatus."+n),"data-component-name":"UserStatusIcon"},g.default.createElement(d.default,{img:"dot",size:t}))}}]),t}(u.default);h.propTypes={size:p.default.number,status:p.default.oneOf(["offline","online"])},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(145),l=r(s),u=n(26),c=r(u),d=n(6),f=r(d),p=n(171),m=r(p),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(1),E=r(v),y=n(0),b=r(y),_=n(2),S=n(4),O=n(3),P=r(O),T=n(8),A=r(T),C=n(73),I=r(C),w=n(7),N=n(68),R=n(150),M=n(1160),L=r(M),k=n(27),D=n(234),U=9e5,j=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.notificationDropdownLinkClickHandler=function(e){r.props.readAllNotifications(),r.props.dropdownLinkClickHandler(e)},r.newNotificationSocketEventHandler=function(e){var t=e.notification,n=e.user,a=r.props.viewCamPageBranch,o=(0,f.default)(a,"match.params.username"),i=n&&n.username===o;t.type===k.PERSONAL_NOTIFICATION_TYPES.MODEL_ONLINE&&i?r.props.deleteNotifications([t.id]):(r.props.addNotification(e),r.showAnimation(),t.type===k.PERSONAL_NOTIFICATION_TYPES.MODEL_ONLINE&&r.removeModelOnlineNotification(t.id))},r.removeModelOnlineNotification=function(e){return(0,m.default)(r.props.deleteNotifications,U,[e])},r.hideAnimation=function(){r.setState({shouldAnimate:!1})},r.renderDropDown=function(){var e=r.props,t=e.keepDropdownOpen,n=e.messages,a=void 0;return 0===n.length?null:b.default.createElement("div",{className:"header-dropdown-content-wrapper"},b.default.createElement(I.default,null,b.default.createElement("ul",{className:"header-dropdown-content"},n.map(function(e){var n=e.message,r=e.count;return a=(0,c.default)(n)?(0,l.default)(n):n,b.default.createElement("li",{key:a.id},b.default.createElement(L.default,{notification:a,countNotificationOfGroup:r,keepDropdownOpen:t}))}))))},r.renderDropDownLink=function(){var e=r.props,t=e.hasNewNotification,n=e.notificationsCount,a=e.unreadCount,o=e.isDropdownOpen;if(!n)return null;var i=r.state.shouldAnimate&&t;return b.default.createElement("a",{className:r.c("dropdown-link",{active:o,"has-new-notifications":i,"has-unread-notifications":a}),href:"#",onAnimationEnd:r.hideAnimation,onClick:r.notificationDropdownLinkClickHandler},b.default.createElement(A.default,{img:"notifications"}),b.default.createElement("span",{className:"dropdown-notification-count"},a))},i=n,o(r,i)}return i(t,e),h(t,[{key:"getSocketEventBindings",value:function(e,t){var n=this,r=e.currentUser;return e.isLoggedIn?[{subscriptionKey:"newNotification:"+r.id,callback:this.newNotificationSocketEventHandler},{subscriptionKey:"notificationDeleted:"+r.id,callback:function(e){var t=e.notificationId;return n.props.removeNotification(t)}}]:[]}},{key:"shouldSocketResubscribe",value:function(e,t){return(0,f.default)(this.props.currentUser,"id")!==(0,f.default)(e.currentUser,"id")}},{key:"showAnimation",value:function(){this.setState({shouldAnimate:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.dropdownRootRefHandler,r=e.isDropdownOpen;return b.default.createElement("div",{className:this.c(t,"personal-notifications-dropdown"),ref:n,"data-component-name":"PersonalNotificationsDropdown"},this.renderDropDownLink(),this.renderIf(r,this.renderDropDown))}}]),t}(P.default),F={addNotification:R.addNotification,deleteNotifications:R.deleteNotifications,removeNotification:R.removeNotification,readAllNotifications:R.readAllNotifications};j.propTypes=g({className:E.default.string,currentUser:E.default.object,hasNewNotification:E.default.bool.isRequired,isDropdownOpen:E.default.bool.isRequired,dropdownLinkClickHandler:E.default.func.isRequired,dropdownRootRefHandler:E.default.func.isRequired,isLoggedIn:E.default.bool.isRequired,keepDropdownOpen:E.default.func.isRequired,messages:E.default.arrayOf(E.default.object),notificationsCount:E.default.number.isRequired,unreadCount:E.default.number.isRequired},(0,w.getActionPropTypes)(F)),j.defaultProps={isDropdownOpen:!1};var B=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=(0,D.getMessagesData)(e),i=o.messages,s=o.notificationsCount,l=(0,D.getUnreadCount)(e);return{currentUser:n,hasNewNotification:l>0,isLoggedIn:r&&!a,messages:i,notificationsCount:s,unreadCount:l,viewCamPageBranch:(0,N.getViewCamPageBranch)(e)}},H=function(e){return(0,S.bindActionCreators)(F,e)};t.default=(0,_.connect)(B,H)(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(24),m=n(31),g=n(2),h=n(4),v=n(9),E=n(16),y=n(7),b=n(3),_=r(b),S=n(17),O=r(S),P=n(236),T=r(P),A=n(8),C=r(A),I=n(237),w=r(I),N=n(5),R=n(45),M=n(117),L=n(150),k=n(89),D=r(k),U=n(27),j=n(234),F=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.hideDropdown=function(){r.props.releaseInterface()},r.deleteNotificationsFromSender=function(e){e.preventDefault();var t=r.props,n=t.sender;(0,t.deleteNotificationsFromSender)(n.id)},r.dismissButtonClickHandler=function(e){e.preventDefault();var t=r.props,n=t.deleteNotifications,a=t.notification;a&&n([a.id])},r.goldSubscriptionClickHandler=function(e){var t=r.props.notification;e.preventDefault(),r.props.emitButtonEvent(N.APP_BUTTONS.PERSONAL_NOTIFICATIONS_GOLD_OVER,{notification:t})},r.acceptFriendshipButtonClickHandler=function(e){e.preventDefault();var t=r.props.sender;t&&r.props.addFriends(t.id)},r.declineFriendshipButtonClickHandler=function(e){e.preventDefault();var t=r.props.sender;t&&r.props.removeFriends([t.id])},r.watchLiveButtonClickHandler=function(){var e=r.props,t=e.deleteNotifications,n=e.notification,a=e.routerPush,o=e.viewCamUrl;n&&t([n.id]),a(o)},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderSenderAvatarLink",value:function(){var e=this.props.sender;return f.default.createElement(w.default,{user:e,onClick:this.hideDropdown},f.default.createElement(D.default,{user:e,size:50}))}},{key:"renderFriendshipAcceptNotification",value:function(){var e=this.props,t=e.keepDropdownOpen,n=e.sender;return f.default.createElement("div",{className:"personal-notification",onClick:t},f.default.createElement("div",{className:"header"},this.renderSenderAvatarLink(),f.default.createElement("span",{className:"message"},this.t("notifications.userAcceptedFriendshipRequest",{username:n.username}))),f.default.createElement("div",{className:"controls"},f.default.createElement("button",{className:"btn btn-small btn-apply",onClick:this.dismissButtonClickHandler},this.t("button.ok"))))}},{key:"renderModelOnlineMessage",value:function(){var e=this.props.sender;return f.default.createElement("div",{className:"personal-notification"},f.default.createElement("div",{className:"header"},this.renderSenderAvatarLink(),f.default.createElement("span",{className:"message"},this.t("notifications.modelOnline",{username:e.username}))),f.default.createElement("div",{className:"controls"},f.default.createElement("button",{className:"btn btn-small btn-default",onClick:this.dismissButtonClickHandler},this.t("button.ok")),f.default.createElement("button",{className:"btn btn-small btn-apply",onClick:this.watchLiveButtonClickHandler},this.t("button.watchLive"))))}},{key:"renderKnightMessage",value:function(){var e=this.props,t=e.keepDropdownOpen,n=e.sender;return f.default.createElement("div",{className:"personal-notification",onClick:t},f.default.createElement("div",{className:"header"},this.renderSenderAvatarLink(),f.default.createElement("span",{className:"message"},this.t("notifications.userKnightedYou",{username:n.username}))),f.default.createElement("div",{className:"controls"},f.default.createElement("button",{className:"btn btn-small btn-apply",onClick:this.dismissButtonClickHandler},this.t("button.ok"))))}},{key:"renderGoldSubscription",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.keepDropdownOpen,a=t.record;return f.default.createElement("div",{className:"personal-notification",onClick:r},f.default.createElement("div",{className:"header"},f.default.createElement("div",null,function(e){return e.type===U.PERSONAL_NOTIFICATION_TYPES.GOLD_SUBSCRIPTION_RENEW?f.default.createElement(C.default,{img:"user-gold",size:45}):f.default.createElement(C.default,{img:"unsubscribe",size:45})}(a)),f.default.createElement("span",{className:"message"},this.t("notifications.goldMembership."+a.type))),f.default.createElement("div",{className:"controls"},function(t,n){return t.type!==U.PERSONAL_NOTIFICATION_TYPES.GOLD_SUBSCRIPTION_OVER||n.isGold?f.default.createElement("button",{className:"btn btn-small btn-apply",onClick:e.dismissButtonClickHandler},e.t("button.ok")):f.default.createElement("button",{className:"btn btn-small btn-primary",onClick:e.goldSubscriptionClickHandler},e.t("button.makeMeGold"))}(a,n)))}},{key:"renderPrivateMessage",value:function(){var e=this.props,t=e.countNotificationOfGroup,n=e.keepDropdownOpen,r=e.record,a=e.sender;return f.default.createElement("div",{className:"personal-notification",onClick:n},f.default.createElement("div",{className:"header"},this.renderSenderAvatarLink(),f.default.createElement("span",{className:"message"},this.t("notifications.userSentYouMessage",{username:a.username}))),f.default.createElement("div",{className:"content message"},r.body,this.renderIf(t>1,function(){return f.default.createElement(T.default,{className:"personal-notification-count"},t)})),f.default.createElement("div",{className:"controls"},f.default.createElement("button",{className:"btn btn-small btn-default",onClick:this.deleteNotificationsFromSender},this.t("button.ok")),f.default.createElement(p.Link,{className:"btn btn-small btn-apply",onClick:this.hideDropdown,to:"/messages/"+a.username},this.t("button.reply"))))}},{key:"renderFriendshipInviteNotification",value:function(){var e=this,t=this.props.sender,n=t.country,r=t.gender,a=t.keepDropdownOpen,o=t.username;return f.default.createElement("div",{className:"personal-notification",onClick:a},f.default.createElement("div",{className:"header"},this.renderSenderAvatarLink(),f.default.createElement("span",{className:"message"},this.t("notifications.userInvitedYouToFriends",{username:o}))),this.renderIf(r||n,function(){return f.default.createElement("div",{className:"content friendship"},e.renderIf(r,e.t("gender."+r)),e.renderIf(r&&n,f.default.createElement("span",null," · ")),e.renderIf(n,e.t("country."+n)))}),f.default.createElement("div",{className:"controls"},f.default.createElement("button",{className:"btn btn-small btn-default",onClick:this.declineFriendshipButtonClickHandler},this.t("button.decline")),f.default.createElement("button",{className:"btn btn-small btn-apply",onClick:this.acceptFriendshipButtonClickHandler},this.t("button.accept"))))}},{key:"renderOfflineTip",value:function(){var e=this.props,t=e.record,n=e.keepDropdownOpen,r=e.sender;return f.default.createElement("div",{className:"personal-notification",onClick:n},f.default.createElement("div",{className:"header"},this.renderSenderAvatarLink(),f.default.createElement("span",{className:"message"},f.default.createElement(O.default,{choiceParameter:"tokensCount",messageId:"notifications.userSentYouOfflineTips",parameters:{username:r.username,tokensCount:t.details.amount}}))),this.renderIf(t.body,function(){return f.default.createElement("div",{className:"content message"},t.body)}),f.default.createElement("div",{className:"controls"},f.default.createElement("button",{className:"btn btn-small btn-default",onClick:this.deleteNotificationsFromSender},this.t("button.ok")),f.default.createElement(p.Link,{className:"btn btn-small btn-apply",onClick:this.hideDropdown,to:"/messages/"+r.username},this.t("button.reply"))))}},{key:"renderUnlockTip",value:function(){var e=this.props,t=e.currentUser,n=e.keepDropdownOpen,r=e.sender,a=r.id===t.id,o=a?"userUnlockTips":"userSentYouUnlockTips";return f.default.createElement("div",{className:"personal-notification",onClick:n},f.default.createElement("div",{className:"header"},this.renderSenderAvatarLink(),f.default.createElement("span",{className:"message"},f.default.createElement(O.default,{choiceParameter:"tokensCount",messageId:"notifications."+o,parameters:{username:r.username}}))),f.default.createElement("div",{className:"controls"},f.default.createElement("button",{className:"btn btn-small btn-default",onClick:this.deleteNotificationsFromSender},this.t("button.ok")),f.default.createElement(p.Link,{className:"btn btn-small btn-apply",onClick:this.hideDropdown,to:"/messages/"+r.username},this.t("button.reply"))))}},{key:"renderModerationReject",value:function(e){return f.default.createElement("div",{className:"personal-notification"},f.default.createElement("div",{className:"header"},f.default.createElement("div",null,f.default.createElement(C.default,{img:"error",size:45})),f.default.createElement("span",{className:"message"},e)),f.default.createElement("div",{className:"controls"},f.default.createElement("button",{className:"btn btn-small btn-apply",onClick:this.dismissButtonClickHandler},this.t("button.ok"))))}},{key:"render",value:function(){var e=this.props,t=e.notification,n=e.record,r=e.sender;if(!n||!r)return null;switch(t.type){case U.PERSONAL_NOTIFICATION_TYPES.PRIVATE_MESSAGE:return this.renderPrivateMessage();case U.PERSONAL_NOTIFICATION_TYPES.FRIENDSHIP_ACCEPTED:return this.renderFriendshipAcceptNotification();case U.PERSONAL_NOTIFICATION_TYPES.FRIENDSHIP_INVITED:return this.renderFriendshipInviteNotification();case U.PERSONAL_NOTIFICATION_TYPES.KNIGHT:return this.renderKnightMessage();case U.PERSONAL_NOTIFICATION_TYPES.MODEL_ONLINE:return this.renderModelOnlineMessage();case U.PERSONAL_NOTIFICATION_TYPES.OFFLINE_TIP:return this.renderOfflineTip();case U.PERSONAL_NOTIFICATION_TYPES.UNLOCK_TIP:return this.renderUnlockTip();case U.PERSONAL_NOTIFICATION_TYPES.USER_PHOTO_DECLINED:return this.renderModerationReject(this.t("notifications.photoDeclined"));case U.PERSONAL_NOTIFICATION_TYPES.GOLD_SUBSCRIPTION_CANCEL:case U.PERSONAL_NOTIFICATION_TYPES.GOLD_SUBSCRIPTION_OVER:case U.PERSONAL_NOTIFICATION_TYPES.GOLD_SUBSCRIPTION_RENEW:return this.renderGoldSubscription();case U.PERSONAL_NOTIFICATION_TYPES.VIDEO_DECLINED:var a=this.props.record.payload.title;return this.renderModerationReject(this.t("videos.messages.videoRejected",{title:a}));default:return null}}}]),t}(_.default),B={addFriends:M.add,deleteNotifications:L.deleteNotifications,deleteNotificationsFromSender:L.deleteNotificationsFromSender,emitButtonEvent:v.emitButtonEvent,releaseInterface:v.releaseInterface,removeFriends:M.remove,routerPush:m.push};F.propTypes=s({countNotificationOfGroup:c.default.number.isRequired,currentUser:c.default.object,notification:c.default.object.isRequired,record:c.default.object,sender:c.default.object,viewCamUrl:c.default.string},(0,y.getActionPropTypes)(B));var H=function(e,t){var n=e.auth.currentUser,r=e.myFriends,a=e.privateMessages,o=(0,j.getNotificationData)(e,t),i=o.record,s=o.sender,l=t.notification.recordId;return{currentUser:n,record:i,sender:s,privateMessages:a,friendship:(0,E.findById)(r.collection,l),viewCamUrl:s?(0,R.getViewCamUrl)(e,s.username):""}},V=function(e){return(0,h.bindActionCreators)(B,e)};t.default=(0,g.connect)(H,V)(F)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(24),m=n(2),g=n(4),h=n(9),v=n(5),E=n(3),y=r(E),b=n(236),_=r(b),S=n(10),O=r(S),P=n(17),T=r(P),A=n(8),C=r(A),I=n(73),w=r(I),N=n(7),R=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.buyTokensClickHandler=function(){r.props.emitButtonEvent(v.APP_BUTTONS.HEADER_TOKENS_MENU_BTN)},r.plusButtonClickHandler=function(e){e.stopPropagation(),r.props.emitButtonEvent(v.APP_BUTTONS.HEADER_TOKENS_MENU_ICON)},r.renderDropDown=function(){var e=r.props.userProfile,t=e.isGold,n=e.isGreen,a=e.isModel,o=e.isStudio,i=e.studioId,s=e.tokensPaid,l=t||n||a||s>0;return f.default.createElement("div",{className:"header-dropdown-content-wrapper"},f.default.createElement(w.default,null,f.default.createElement("ul",{className:"header-dropdown-content"},r.renderIf(!a&&!o,function(){return f.default.createElement("li",{className:"list-item-wrapper"},f.default.createElement(O.default,{style:"apply-alter",display:"block",onClick:r.buyTokensClickHandler},r.t("buyTokens.buyTokens")))}),r.renderIf(l,function(){return f.default.createElement("li",null,f.default.createElement(p.Link,{to:"/tokens-history"},f.default.createElement(C.default,{img:"payment-history"}),r.t("tokensHistory.tokensHistory")))}),r.renderIf(o,function(){return f.default.createElement("li",null,f.default.createElement(p.Link,{to:"/studio-earnings"},f.default.createElement(C.default,{img:"tokens-1"}),r.t("tokensHistory.studioEarnings")))}),r.renderIf(a&&!i||o,function(){return f.default.createElement("li",null,f.default.createElement(p.Link,{to:"/payments-settings"},f.default.createElement(_.default,{shouldAnalyzePaymentSettings:!0,user:e,type:"alert-small"},"!"),f.default.createElement(C.default,{img:"payment-settings"}),r.t("userMenu.paymentsSettings")))}),r.renderIf(a&&!i||o,function(){return f.default.createElement("li",null,f.default.createElement(p.Link,{to:"/payments-history"},f.default.createElement(C.default,{img:"payment-history-1"}),r.t("userMenu.paymentsHistory")))}))))},r.renderDropDownLink=function(){var e=r.props,t=e.dropdownLinkClickHandler,n=e.isDropdownOpen,a=e.userProfile,o=a.tokens;return f.default.createElement("a",{className:r.c("dropdown-link",{active:n}),onClick:t},f.default.createElement(_.default,{shouldAnalyzePaymentSettings:!0,user:a,type:"alert-medium"},"!"),f.default.createElement(C.default,{img:"tokens-1"}),r.renderIf(r.isTokensValueVisible,function(){return f.default.createElement(T.default,{choiceParameter:"tokens",elements:{tokensAmount:f.default.createElement("span",{className:"tokens-amount"}),abbreviation:f.default.createElement("span",{className:"tokens-abbreviation"})},messageId:"buyTokens.tokensInHeader",parameters:{tokens:o}})}),f.default.createElement("span",{className:"dropdown-arrow"},f.default.createElement(C.default,{img:"selectbox"})),r.renderIf(r.isBuyTokensIconVisible,function(){return f.default.createElement("span",{className:"add-icon-wrapper",onClick:r.plusButtonClickHandler},f.default.createElement(C.default,{img:"add"}))}))},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.dropdownRootRefHandler,r=e.isDropdownOpen;return f.default.createElement("div",{className:this.c(t,"tokens-menu"),ref:n,"data-component-name":"TokensMenu"},this.renderDropDownLink(),this.renderIf(r,this.renderDropDown))}},{key:"isTokensValueVisible",get:function(){return!this.props.currentUser.isStudio}},{key:"isBuyTokensIconVisible",get:function(){var e=this.props.currentUser,t=e.isRegular,n=e.isGold,r=e.isGreen;return t||n||r}}]),t}(y.default),M={emitButtonEvent:h.emitButtonEvent,showModal:h.showModal};R.propTypes=s({className:c.default.string,dropdownLinkClickHandler:c.default.func.isRequired,dropdownRootRefHandler:c.default.func.isRequired,isDropdownOpen:c.default.bool.isRequired,keepDropdownOpen:c.default.func.isRequired,userProfile:c.default.object.isRequired},(0,N.getActionPropTypes)(M)),R.defaultProps={componentClassName:"tokens-menu"};var L=function(e){return(0,g.bindActionCreators)(M,e)},k=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.profile.user;return{currentUser:n,isLoggedIn:r&&!a,userProfile:o}};t.default=(0,m.connect)(k,L)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(24),m=n(4),g=n(3),h=r(g),v=n(10),E=r(v),y=n(8),b=r(y),_=n(68),S=n(5),O=n(9),P=n(81),T=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.stopBroadcastingClickHandler=function(){r.props.stopCam("stopBroadcasting button click handler")},r.checkIfEmailConfirmed=function(e){var t=r.props,n=t.showModal;t.currentUser.isEmailVerified||(e.preventDefault(),n(S.MODAL_TYPES.CONFIRM_EMAIL,{description:r.t("startBroadcasting.confirmEmailWarning")}))},r.renderStartBroadcastingButton=function(){return d.default.createElement(E.default,{style:"apply",to:"/start-broadcasting",type:"link",onClick:r.checkIfEmailConfirmed},d.default.createElement(b.default,{img:"play-2",size:14}),d.default.createElement("span",null,r.t("header.startBroadcasting")))},r.renderStopBroadcastingButton=function(){return d.default.createElement(E.default,{onClick:r.stopBroadcastingClickHandler,style:"end-broadcasting"},d.default.createElement(b.default,{img:"stop",size:13}),d.default.createElement("span",null,r.t("header.endBroadcasting")))},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.isBroadcasting,n=e.isLoggedIn,r=e.isPageAllowedToStartBroadcast;return n?t?this.renderStopBroadcastingButton():r?this.renderStartBroadcastingButton():null:null}}]),t}(h.default);T.propTypes={currentUser:u.default.object,isBroadcasting:u.default.bool,isLoggedIn:u.default.bool,stopCam:u.default.func.isRequired};var A=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut;return{currentUser:r,isBroadcasting:e.broadcast.isCamActive,isLoggedIn:a&&!o,isPageAllowedToStartBroadcast:(0,_.getIsPageAllowedToStartBroadcast)(e,t)}},C=function(e){return(0,m.bindActionCreators)({stopCam:P.stopCam,showModal:O.showModal},e)};t.default=(0,p.withRouter)((0,f.connect)(A,C)(T))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderFavoritesBanner=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(3),v=r(h),E=n(10),y=r(E),b=n(8),_=r(b),S=n(5),O=n(7),P=n(108),T=n(97),A=t.HeaderFavoritesBanner=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(){r.props.showModal(S.MODAL_TYPES.AUTH,{action:{isDefaultBanner:!0,shouldBypassActionPrefix:!0,type:"createFreeAccount"},component:"SignUp",className:"auth-modal-signup",triggerSource:S.APP_BUTTONS.SAVE_SETTINGS_BANNER})},r.closeClickHandler=function(){r.props.hideBanner()},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.isVisible;return f.default.createElement("div",{className:"header-favorites-banner-wrapper","data-component-name":"HeaderFavoritesBanner"},this.renderIf(e,f.default.createElement("div",{className:"header-favorites-banner"},f.default.createElement("div",{className:"header-favorites-banner-icon"},f.default.createElement(_.default,{img:"wrong"})),f.default.createElement("div",{className:"header-favorites-banner-body"},f.default.createElement("div",{className:"header-favorites-banner-body--wrapper"},f.default.createElement("div",{className:"header-favorites-banner-title"},this.t("headerFavoritesBanner.title")),f.default.createElement("div",{className:"header-favorites-banner-description"},this.t("headerFavoritesBanner.description"))),f.default.createElement("div",{className:"header-favorites-banner-button"},f.default.createElement(y.default,{style:"default-outline",onClick:this.clickHandler},this.t("headerFavoritesBanner.button")))),f.default.createElement("div",{className:"header-favorites-banner-close",onClick:this.closeClickHandler},f.default.createElement(_.default,{img:"close-5"})))))}}]),t}(v.default),C={hideBanner:P.hideBanner,showModal:g.showModal};A.propTypes=s({isVisible:c.default.bool},(0,O.getActionPropTypes)(C));var I=function(e){return{currentUser:e.auth.currentUser,isVisible:(0,T.getIsBannerVisible)(e)}},w=function(e){return(0,m.bindActionCreators)(C,e)};t.default=(0,p.connect)(I,w)(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(0),d=r(c),f=n(2),p=n(31),m=n(4),g=n(3),h=r(g),v=n(5),E=n(106),y=r(E),b=n(7),_=n(68),S=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.hideBanner=function(e){e.preventDefault(),e.stopPropagation(),y.default.set("isAndroidMobileAppBannerHidden","1"),r.setState({isAndroidMobileAppBannerHidden:!0})},r.goToMobilePage=function(e){e.preventDefault(),e.stopPropagation(),r.props.routerPush("/mobile")},i=n,o(r,i)}return i(t,e),l(t,[{key:"getDefaultState",value:function(){return s({},u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{isAndroidMobileAppBannerHidden:"1"===y.default.get("isAndroidMobileAppBannerHidden")})}},{key:"render",value:function(){var e=this.state.isAndroidMobileAppBannerHidden,t=this.props,n=t.currentUser,r=t.isLoggedIn,a=t.isOnMobilePage,o=v.BROWSER_CAPABILITIES.android&&!v.BROWSER_CAPABILITIES.windowsPhone,i=r&&n.isModel;return e||!o||a||!i?null:d.default.createElement("div",{className:"header-mobile-app-banner","data-component-name":"HeaderMobileAppBanner"},d.default.createElement("div",{className:"close-button",onClick:this.hideBanner},"x"),d.default.createElement("div",{className:"info",onClick:this.goToMobilePage},d.default.createElement("div",{className:"description"},this.t("mobileApp.mobileAppShortDescription")),d.default.createElement("div",{className:"install-title"},this.t("mobileApp.install"))))}}]),t}(h.default),O={routerPush:p.push};S.propTypes=s({},(0,b.getActionPropTypes)(O));var P=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut;return{currentUser:n,isLoggedIn:r&&!a,isOnMobilePage:(0,_.getIsOnMobilePage)(e)}},T=function(e){return(0,m.bindActionCreators)(O,e)};t.default=(0,f.connect)(P,T)(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(137),h=r(g),v=n(2),E=n(4),y=n(3),b=r(y),_=n(1166),S=r(_),O=n(1167),P=r(O),T=n(1168),A=r(T),C=n(5),I=n(7),w=n(1169),N=r(w),R=n(1170),M=r(R),L=n(1171),k=r(L),D=n(1175),U=r(D),j=n(1177),F=r(j),B=n(1178),H=r(B),V=n(1179),G=r(V),x=n(1186),W=r(x),Y=n(1187),K=r(Y),q=n(1188),z=r(q),X=n(1190),Z=r(X),Q=n(1191),J=r(Q),$=n(1198),ee=r($),te=n(1199),ne=r(te),re=n(1200),ae=r(re),oe=n(1201),ie=r(oe),se=n(1202),le=r(se),ue=n(1203),ce=r(ue),de=n(1204),fe=r(de),pe=n(1207),me=r(pe),ge=n(60),he=n(41),ve=n(38),Ee=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.propsUpdateToActionsMap=[{update:he.currentUserHasChanged,action:function(e){e.currentModalName!==C.MODAL_TYPES.PURCHASE_TOKENS&&n.modalProceedHandler()}}],n.modalCloseHandler=function(){n.props.closeModal()},n.modalProceedHandler=function(){n.props.processModal()},n.BodyDom="undefined"!=typeof document&&document.getElementById("body"),n}return i(t,e),c(t,[{key:"renderModal",value:function(){var e=null,t=this.props,n=t.currentModalName,r=t.currentModalParams,a=t.startWizard,o=t.userProfile,i=(0,l.default)(o,"tokens",0),s=u({onClose:this.modalCloseHandler,onProceed:this.modalProceedHandler,currentUser:o,actions:{startModalWizard:a}},r);switch(n){case C.MODAL_TYPES.AUTH:e=m.default.createElement(G.default,u({},s,s.authParams));break;case C.MODAL_TYPES.ADD_TO_FAVORITES_LIMIT:e=m.default.createElement(F.default,s);break;case C.MODAL_TYPES.ADD_TO_FAVORITES:e=m.default.createElement(H.default,s);break;case C.MODAL_TYPES.DELETE_ACCOUNT:e=m.default.createElement(z.default,s);break;case C.MODAL_TYPES.CONFIRM_EMAIL:e=m.default.createElement(N.default,s);break;case C.MODAL_TYPES.EDIT_ALBUM:e=m.default.createElement(Z.default,s);break;case C.MODAL_TYPES.FEATURE_ANNOUNCEMENT:e=m.default.createElement(ee.default,s);break;case C.MODAL_TYPES.EDIT_VIDEO:e=m.default.createElement(J.default,s);break;case C.MODAL_TYPES.MODEL_WARNING:e=m.default.createElement(M.default,s);break;case C.MODAL_TYPES.PURCHASE_TOKENS:e=m.default.createElement(me.default,u({onProceed:this.modalProceedHandler},s));break;case C.MODAL_TYPES.START_PRIVATE:e=m.default.createElement(U.default,s);break;case C.MODAL_TYPES.SEND_TIP:e=m.default.createElement(k.default,u({availableTokens:i},s));break;case C.MODAL_TYPES.SEND_OFFLINE_TIP:e=m.default.createElement(ae.default,u({availableTokens:i},s));break;case C.MODAL_TYPES.TECHNICAL_PROBLEM:e=m.default.createElement(ie.default,u({onClose:this.modalCloseHandler},r));break;case C.MODAL_TYPES.TOKENS_GIVEAWAY:e=m.default.createElement(le.default,s);break;case C.MODAL_TYPES.BAN_CONFIRMATION:e=m.default.createElement(W.default,s);break;case C.MODAL_TYPES.VISITORS_AGREEMENT:e=m.default.createElement(A.default,s);break;case C.MODAL_TYPES.INVISIBLE_MODE:e=m.default.createElement(ne.default,s);break;case C.MODAL_TYPES.USER_LEVELS:e=m.default.createElement(ce.default,s);break;case C.MODAL_TYPES.NEW_LOGO:e=m.default.createElement(S.default,s);break;case C.MODAL_TYPES.NEW_YEAR_PROMO:e=m.default.createElement(P.default,s);break;case C.MODAL_TYPES.WATCH_VIDEO:e=m.default.createElement(fe.default,s);break;case C.MODAL_TYPES.CHRISTMAS_PROMO_2017:e=m.default.createElement(K.default,s)}return e}},{key:"render",value:function(){return this.BodyDom&&h.default.createPortal(this.renderModal(),this.BodyDom)}}]),t}(b.default),ye={closeModal:ge.closeModal,processModal:ge.processModal,startWizard:ge.startWizard};Ee.propTypes=u({currentUser:f.default.object,currentModalName:f.default.string,currentModalParams:f.default.object,isLoggedIn:f.default.bool,userProfile:f.default.object},(0,I.getActionPropTypes)(ye));var be=function(e){var t=e.auth,n=t.isLoggedIn,r=t.currentUser,a=e.ui;return{currentModalName:a.currentModalName,currentModalParams:a.currentModalParams,currentUser:r,isLoggedIn:n,userProfile:(0,ve.getCurrentUserProfile)(e)}},_e=function(e){return(0,E.bindActionCreators)(ye,e)};t.default=(0,v.connect)(be,_e)(Ee)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),d=n(2),f=n(4),p=n(221),m=r(p),g=n(9),h=n(53),v=r(h),E=n(10),y=r(E),b=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onClickEventHandler=function(){r.props.hideModal()},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderTitle",value:function(){return c.default.createElement("span",null,this.t(m.default.title))}},{key:"renderContent",value:function(){return c.default.createElement("div",{className:"modal-body"},c.default.createElement("div",{className:"new-logo-modal-logo-wrapper"},c.default.createElement("div",{className:"new-logo-modal-logo"})),c.default.createElement("div",{className:"new-logo-modal-description"},c.default.createElement("div",{className:"new-logo-modal-description-title"},this.t("newLogoModal.title")),c.default.createElement("div",{className:"new-logo-modal-description-text"},c.default.createElement("div",null,this.t("newLogoModal.description.poppingUpInMorePlace")),c.default.createElement("div",null,this.t("newLogoModal.description.hopeYouLike"))),c.default.createElement(y.default,{style:"apply",size:"medium",onClick:this.onClickEventHandler},this.t("button.ok"))))}}]),t}(v.default);b.defaultProps=s({},v.default.defaultProps,{titlePosition:"outside",isCloseBtnShown:!0,isWrapperCloseDisabled:!1,className:"new-logo-modal"});var _=function(e){return(0,f.bindActionCreators)({hideModal:g.hideModal},e)};t.default=(0,d.connect)(null,_)(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NewYearModal=void 0;var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(53),v=r(h),E=n(10),y=r(E),b=n(17),_=r(b),S=n(7),O=n(52),P=t.NewYearModal=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onClickEventHandler=function(){r.props.hideModal(),r.props.showNewYearPackage("popup")},i=n,o(r,i)}return i(t,e),c(t,[{key:"renderContent",value:function(){var e=this.props.isGold;return f.default.createElement("div",{className:"modal-body","data-component-name":"NewYearModal"},f.default.createElement("div",{className:"new-year-modal-logo-wrapper"},f.default.createElement("div",{className:"new-year-modal-logo"})),f.default.createElement("div",{className:"new-year-modal-description"},f.default.createElement("div",{className:"new-year-modal-description-title"},this.t("newYearModal.title")),f.default.createElement("div",{className:"new-year-modal-description-text"},f.default.createElement(_.default,{messageId:e?"newYearModal.description_gold":"newYearModal.description",elements:{strong:f.default.createElement("strong",null),br:f.default.createElement("br",null),nowrap:f.default.createElement("span",{className:"nowrap"})}})),f.default.createElement(y.default,{style:"accept",size:"large",onClick:this.onClickEventHandler},this.t("button.getThisDeal"))))}}]),t}(v.default),T={hideModal:g.hideModal,showNewYearPackage:O.showNewYearPackage};P.propTypes=u({},(0,S.getActionPropTypes)(T)),P.defaultProps=u({},v.default.defaultProps,{titlePosition:"outside",isCloseBtnShown:!0,isWrapperCloseDisabled:!0,className:"new-year-modal"});var A=function(e){var t=e.auth,n=t.isLoggedIn,r=t.currentUser;return{isLoggedIn:n,isGold:(0,l.default)(r,"isGold")}},C=function(e){return(0,m.bindActionCreators)(T,e)};t.default=(0,p.connect)(A,C)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(24),g=n(4),h=n(9),v=n(53),E=r(v),y=n(10),b=r(y),_=n(5),S=n(8),O=r(S),P=n(17),T=r(P),A=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={conditionsOpened:!1},r.showAllConditions=function(){r.setState({conditionsOpened:!0})},r.acceptAgreementButtonClickHandler=function(){r.props.emitButtonEvent(_.APP_BUTTONS.ACCEPT_VISITOR_AGREEMENT_BUTTON)},i=n,o(r,i)}return i(t,e),l(t,[{key:"declineAgreementButtonClickHandler",value:function(){window.location.href="http://google.com"}},{key:"renderContent",value:function(){return f.default.createElement("div",{className:"modal-body full","data-component-name":"VisitorsAgreementModal"},f.default.createElement("div",null,f.default.createElement("div",{className:"warning-block text-center"},f.default.createElement(O.default,{img:"age-restriction",size:100}),f.default.createElement("div",{className:"warning-title"},this.t("warning")))),f.default.createElement("div",{className:this.c("conditions",{"conditions-opened":this.state.conditionsOpened})},f.default.createElement("p",null,f.default.createElement(T.default,{elements:{strong:f.default.createElement("strong",null)},messageId:"visitorsAgreement.ageWarningText"})),f.default.createElement("p",null,f.default.createElement(T.default,{elements:{link:f.default.createElement(m.Link,{to:"/privacy"})},messageId:"visitorsAgreement.cookiesWarningText"})),f.default.createElement("p",null,this.t("visitorsAgreement.allModelsAdults")),this.renderIf(!this.state.conditionsOpened,f.default.createElement("div",{className:"show-all-conditions-text-toggler",onClick:this.showAllConditions},this.t("visitorsAgreement.showAll")))),f.default.createElement("div",{className:"terms-block text-center"},f.default.createElement(T.default,{elements:{link:f.default.createElement(m.Link,{to:"/terms"})},messageId:"visitorsAgreement.agreementTerms"})),f.default.createElement("div",{className:"buttons-block text-center"},f.default.createElement("div",null,f.default.createElement(b.default,{autoFocus:!0,onClick:this.acceptAgreementButtonClickHandler,style:"apply-alter",size:"large",className:"btn-visitors-agreement-accept"},this.t("visitorsAgreement.acceptButtonText"))),f.default.createElement("div",null,f.default.createElement(b.default,{onClick:this.declineAgreementButtonClickHandler,style:"default",size:"small",className:"btn-visitors-agreement-decline"},this.t("visitorsAgreement.declineButtonText")))),f.default.createElement("div",{className:"label-link-block"},f.default.createElement("a",{href:"http://www.rtalabel.org/",className:"label-link",target:"_blank",rel:"nofollow"},f.default.createElement("div",{className:"rta-logo"})),f.default.createElement("a",{href:"http://www.asacp.org/index.php?content=validate",className:"footer-label",target:"_blank",rel:"nofollow"},f.default.createElement("div",{className:"asacp-label"})),f.default.createElement("a",{href:"http://www.safelabeling.org/",className:"label-link",target:"_blank",rel:"nofollow"},f.default.createElement("div",{className:"safe-labeling"}))))}}]),t}(E.default),C={emitButtonEvent:h.emitButtonEvent};A.propTypes=s({},A.propTypes,{onProceed:c.default.func.isRequired}),A.defaultProps=s({},E.default.defaultProps,{className:"visitors-agreement-modal",isCloseBtnShown:!1,isWrapperCloseDisabled:!0,onProceed:c.default.func.isRequired,titlePosition:"none"});var I=function(e){return(0,g.bindActionCreators)(C,e)},w=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,p.connect)(w,I)(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(24),g=n(31),h=n(4),v=n(53),E=r(v),y=n(10),b=r(y),_=n(8),S=r(_),O=n(9),P=n(7),T=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onClickEventHandler=function(){"/settings"===r.props.location.pathname?r.props.hideModal():r.props.routerPush("/settings")},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderTitle",value:function(){return f.default.createElement("span",null,this.t("confirmEmail.title"))}},{key:"renderContent",value:function(){var e=this.props.description;return f.default.createElement("div",{className:"modal-body","data-component-name":"ConfirmEmailModal"},f.default.createElement(S.default,{img:"mail",size:80}),f.default.createElement("div",{className:"description"},e),f.default.createElement(b.default,{size:"medium",onClick:this.onClickEventHandler},this.t("confirmEmail.goToSettings")))}}]),t}(E.default),A={hideModal:O.hideModal,routerPush:g.push};T.propTypes=s({className:c.default.string,description:c.default.string.isRequired,isCloseBtnShown:c.default.bool,isWrapperCloseDisabled:c.default.bool,titlePosition:c.default.string},(0,P.getActionPropTypes)(A)),T.defaultProps=s({},E.default.defaultProps,{titlePosition:"outside",isCloseBtnShown:!0,isWrapperCloseDisabled:!1,className:"confirm-email-modal"});var C=function(e){return(0,h.bindActionCreators)(A,e)};t.default=(0,m.withRouter)((0,p.connect)(null,C)(T))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(24),h=n(4),v=n(53),E=r(v),y=n(10),b=r(y),_=n(17),S=r(_),O=n(8),P=r(O),T=n(40),A=r(T),C=n(7),I=n(81),w=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onClickEventHandler=function(){var e=r.props;(0,e.acceptWarning)(e.warningId),r.setState({isWarningAccepted:!1})},r.changeCheckboxValue=function(e){r.setState({isWarningAccepted:e.target.checked})},i=n,o(r,i)}return i(t,e),l(t,[{key:"getDefaultState",value:function(){return s({},u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{isWarningAccepted:!1})}},{key:"renderTitle",value:function(){return p.default.createElement("span",null,this.t("modelWarningModal.title"))}},{key:"renderContent",value:function(){var e=this.props,t=e.moderatorUsername,n=e.reason,r=this.state.isWarningAccepted;return p.default.createElement("div",{className:"modal-body","data-component-name":"ModelWarningModal"},p.default.createElement(P.default,{img:"wrong",size:80}),p.default.createElement("div",{className:"description"},this.t("modelWarningModal.description")),p.default.createElement("div",null,p.default.createElement(S.default,{messageId:"modelWarningModal.reason",elements:{reasonWrapper:p.default.createElement("span",{className:"reason-wrapper"})},parameters:{reason:n}})),p.default.createElement("div",{className:"accept-wrapper"},p.default.createElement(A.default,{checked:r,id:"accept_warning_checkbox",type:"checkbox",onChange:this.changeCheckboxValue}),p.default.createElement("label",{htmlFor:"accept_warning_checkbox"},this.t("modelWarningModal.agreeAndAccept"))),p.default.createElement("div",null,p.default.createElement(b.default,{size:"medium",style:"apply",onClick:this.onClickEventHandler,disabled:!r},this.t("button.close"))),p.default.createElement("div",null,p.default.createElement(g.Link,{className:"contact-admin",target:"_blank",to:"/messages/"+t},this.t("modelWarningModal.contactAdmin"))))}}]),t}(E.default),N={acceptWarning:I.acceptWarning};w.propTypes=s({className:d.default.string,isCloseBtnShown:d.default.bool,isWrapperCloseDisabled:d.default.bool,moderatorUsername:d.default.string,reason:d.default.string,titlePosition:d.default.string,warningId:d.default.number},(0,C.getActionPropTypes)(N)),w.defaultProps=s({},E.default.defaultProps,{titlePosition:"outside",isCloseBtnShown:!1,isWrapperCloseDisabled:!0,className:"model-warning-modal"});var R=function(e){return(0,h.bindActionCreators)(N,e)};t.default=(0,m.connect)(null,R)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(14),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(4),b=n(9),_=n(53),S=r(_),O=n(17),P=r(O),T=n(92),A=r(T),C=n(40),I=r(C),w=n(39),N=r(w),R=n(5),M=n(7),L=n(42),k=n(12),D=[20,50,100,200],U=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.dropdownOptions=[{value:"public",label:r.t("sendTip.visibleForAll")},{value:"private",label:r.t("sendTip.visibleForModel")}],r.changeTipAmountHandler=function(e){var t=parseInt(e.target.value,10)||0;r.setPredefinedTipAmount(t)},r.setPredefinedTipAmount=function(e){r.props.saveTipAmount(e),r.setState({amount:e,isCustomSelected:!1})},r.changeCustomAmountHandler=function(e){var t=r.props.availableTokens,n=parseInt(e.target.value,10)||0,a=!0;n>t&&(a=!1),r.props.saveTipAmount(n),r.setState({customAmount:n,hasEnoughTokens:a})},r.selectCustomAmountHandler=function(e){var t=e.target,n=t.id,a=r.props.availableTokens,o=r.state.customAmount;r.setState({amount:0,isCustomSelected:!0,hasEnoughTokens:a>=o},function(){"customTokens"!==n&&r.setFocusOnCustomAmountInput()})},r.changeCommentHandler=function(e){var t=e.target.value;r.setState({message:t.length>k.TIP_COMMENT_LENGTH?t.substr(0,k.TIP_COMMENT_LENGTH):t})},r.changeCommentTypeHandler=function(e){r.setState({isPrivate:"private"===e.value})},r.triggerCommentHandler=function(e){r.setState({commentEnabled:Boolean(e.target.checked)},function(){r.commentRef.focus()})},r.modalKeyDownHandler=function(e){e.keyCode===R.KEY_CODES.enter&&r.sendTipHandler(e)},r.sendTipHandler=function(e){e.stopPropagation();var t=r.state,n=t.amount,a=t.customAmount,o=t.isCustomSelected,i=t.message,s=t.isPrivate,l=r.props.user,u=o?a:n;r.props.emitButtonEvent(R.APP_BUTTONS.SEND_ONLINE_TIP_MODAL_SEND,{isPrivate:s,message:i,modelId:l.id,tipsAmount:u})},r.disabledCommentsClickHandler=function(){r.setState({commentEnabled:!0},function(){var e=r,t=e.commentRef;t&&t.focus()})},r.renderOption=function(e){var t=r.state,n=t.amount,a=t.isCustomSelected,o=r.props.availableTokens,i=o>=e,s=!a&&n===e&&i,u=r.t("sendTip.tipModelTokens",{tokens:"<strong>"+e+"</strong>"});return v.default.createElement("div",{className:r.c("radio-wrapper",{disabled:!i}),onClick:(0,l.default)(r.setPredefinedTipAmount,e),key:e},v.default.createElement("div",{className:"radio-container"},v.default.createElement(I.default,{size:"medium",type:"radio",id:"send_tip_radio_"+e,name:"sendTip",checked:s,value:e,onChange:r.changeTipAmountHandler,ref:function(e){r.checkedRadioInputRef=s?e:void 0}}),v.default.createElement("label",{htmlFor:"send_tip_radio_"+e},v.default.createElement("strong",null,e)," ",r.t("sendTip.tokens"))),v.default.createElement("div",{className:r.c("description media-up-to-s-hidden",{checked:s})},v.default.createElement("div",{dangerouslySetInnerHTML:{__html:u}})))},i=n,o(r,i)}return i(t,e),f(t,[{key:"getDefaultState",value:function(){var e=this.props,n=e.tipAmount,r=e.tokenPackages,a=!(0,c.default)(r,n);return d({},p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{amount:n,commentEnabled:"",customAmount:a?n:0,hasEnoughTokens:!0,isCustomSelected:a,isPrivate:!1})}},{key:"componentDidMount",value:function(){if(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.state.isCustomSelected)this.setFocusOnCustomAmountInput();else{var e=this.checkedRadioInputRef;e&&e.focus()}this.registerEventListener(document,"keydown",this.modalKeyDownHandler)}},{key:"setFocusOnCustomAmountInput",value:function(){this.customTokensRef.focus(!0)}},{key:"renderTitle",value:function(){var e=this.props.user.login;return v.default.createElement(P.default,{elements:{strong:v.default.createElement("strong",null)},messageId:"sendTip.tipModalTitle",parameters:{username:e}})}},{key:"renderContent",value:function(){var e=this,t=this.state,n=t.amount,r=t.commentEnabled,a=t.customAmount,o=t.hasEnoughTokens,i=t.isCustomSelected,s=t.isPrivate,l=this.props.tokenPackages;return v.default.createElement("div",{className:"modal-body","data-component-name":"SendTipModal"},v.default.createElement("div",{className:"title"},this.t("sendTip.howManyTokensWouldYouLikeToTip")),l.map(this.renderOption),v.default.createElement("div",{className:"radio-wrapper",onClick:this.selectCustomAmountHandler},v.default.createElement("div",{className:"radio-container"},v.default.createElement(I.default,{type:"radio",size:"medium",id:"send_tip_radio_custom",name:"sendTip",checked:i,value:0,onChange:this.selectCustomAmountHandler}),v.default.createElement("label",{htmlFor:"send_tip_radio_custom"},this.t("sendTip.customAmount"))),v.default.createElement("div",{className:"description"},v.default.createElement(I.default,{className:"input-tokens",id:"customTokens",ref:function(t){e.customTokensRef=t},onFocus:this.selectCustomAmountHandler,onChange:this.changeCustomAmountHandler,value:a||""})),this.renderIf(!o,function(){return v.default.createElement(N.default,{className:"error",placement:"top",targetId:"customTokens",isForceVisible:!0,isMobileRelative:!1},e.t("sendTip.notEnoughTokens"))})),v.default.createElement("div",{className:"comments-wrapper media-up-to-s-hidden"},v.default.createElement("div",{className:"trigger"},v.default.createElement(I.default,{checked:r,id:"send_tip_checkbox",type:"checkbox",onChange:this.triggerCommentHandler}),v.default.createElement("label",{htmlFor:"send_tip_checkbox"},this.t("sendTip.comment"))),v.default.createElement("div",{className:this.c("comments",{disabled:!r}),onClick:r?null:this.disabledCommentsClickHandler},v.default.createElement(I.default,{className:"input-comment",disabled:!r,placeholder:this.t("sendTip.tokensComment"),ref:function(t){e.commentRef=t},onChange:this.changeCommentHandler,maxLength:k.TIP_COMMENT_LENGTH}),v.default.createElement(A.default,{isDisabled:!r,onSelect:this.changeCommentTypeHandler,options:this.dropdownOptions,value:this.dropdownOptions[s?1:0].value}),v.default.createElement("div",{className:"clearfix"}))),v.default.createElement("div",{className:"controls"},v.default.createElement("button",{className:"btn btn-apply-alter btn-large",disabled:!(n||a)||!o,onClick:this.sendTipHandler},this.t("button.sendTip"))))}}]),t}(S.default),j={emitButtonEvent:b.emitButtonEvent,saveTipAmount:b.saveTipAmount,sendTip:L.sendTip};U.propTypes=d({},U.propTypes,{availableTokens:g.default.number.isRequired,tipAmount:g.default.number,tokenPackages:g.default.array,user:g.default.object.isRequired},(0,M.getActionPropTypes)(j)),U.defaultProps=d({},U.defaultProps,{className:"send-tip-modal",titlePosition:"outside",tokenPackages:D});var F=function(e){return(0,y.bindActionCreators)(j,e)},B=function(e){return{tipAmount:e.ui.tipAmount}};t.default=(0,E.connect)(B,F)(U)},function(e,t,n){"use strict";var r=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.exports=function(e){for(var t=e,n=0;n<r.length;n+=1)t=t.replace(r[n].letters,r[n].base);return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),r.props.onSelect(r.props.option,e)},r.handleMouseEnter=function(e){r.focusHandler(e)},r.handleMouseMove=function(e){r.focusHandler(e)},r.focusHandler=function(e){r.props.focused||r.props.onFocus(r.props.option,e)},r.touchEventHandler=function(e){var t=e.type;"touchstart"===t?r.isTouchMoved=!1:"touchmove"===t?r.isTouchMoved=!0:"touchend"!==t||r.isTouchMoved||r.handleMouseDown(e)},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.option,n=this.c(this.props.className,t.className);return this.renderIf(t.disabled,function(){return d.default.createElement("div",{className:n},e.props.children)},function(){return d.default.createElement("div",{className:n,onMouseDown:e.handleMouseDown,onMouseEnter:e.handleMouseEnter,onMouseMove:e.handleMouseMove,onTouchStart:e.touchEventHandler,onTouchMove:e.touchEventHandler,onTouchEnd:e.touchEventHandler,style:t.style,title:t.title},e.props.children)})}}]),t}(p.default);m.propTypes={className:u.default.string,onSelect:u.default.func,onFocus:u.default.func,option:u.default.object.isRequired},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(24),p=n(3),m=r(p),g=n(8),h=r(g),v=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.labelMouseDownHandler=function(e){"mousedown"===e.type&&0!==e.button||r.props.onClick&&(e.stopPropagation(),r.props.onClick(r.props.option,e))},r.removeMouseDownHandler=function(e){"mousedown"===e.type&&0!==e.button||(e.preventDefault(),e.stopPropagation(),r.props.onRemove(r.props.option))},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.isDisabled,a=t.onClick,o=t.onRemove;return d.default.createElement("div",{className:"select-value","data-component-name":"SelectValue"},this.renderIf(a,function(){return d.default.createElement(f.Link,{className:"select-value-label",onMouseDown:e.labelMouseDownHandler,onTouchEnd:e.labelMouseDownHandler},n)},function(){return d.default.createElement("span",{className:"select-value-label"},n)}),this.renderIf(!r&&o,function(){return d.default.createElement("span",{className:"select-value-icon",onMouseDown:e.removeMouseDownHandler,onTouchEnd:e.removeMouseDownHandler},d.default.createElement(h.default,{img:"close-4",size:15}))}))}}]),t}(m.default);v.propTypes={isDisabled:u.default.bool,onClick:u.default.func,onRemove:u.default.func,option:u.default.any.isRequired},v.defaultProps={isDisabled:!1},t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(20),f=r(d),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(9),b=n(53),_=r(b),S=n(8),O=r(S),P=n(10),T=r(P),A=n(39),C=r(A),I=n(22),w=r(I),N=n(17),R=r(N),M=n(5),L=n(7),k=n(42),D=n(603),U=r(D),j=n(71),F=1e4,B=null,H=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={isConnectionPending:!1},r.propsUpdateToActionsMap=[{update:["model.id"],action:function(e){var t=e.isCam2camEnabled,n=e.isPrivateEnabled,a=e.isSpy;n||t||a||r.props.onClose()}},{update:["isSocketReady"],action:function(e){e.isSocketReady?(B&&(clearTimeout(B),B=null),r.setState({isConnectionPending:!1})):(r.setState({isConnectionPending:!0}),B=setTimeout(function(){return r.showConnectionErrorModal(),f.default.reject(new Error("Private show is unavailable at the moment, due to a technical problem."))},F))}}],r.showConnectionErrorModal=function(){r.props.showModal(M.MODAL_TYPES.TECHNICAL_PROBLEM,{i18nTranslate:{title:"viewCam.technicalProblem.title",description:"viewCam.technicalProblem.description",button:"viewCam.technicalProblem.button",action:"viewCam.technicalProblem.action"}})},r.buttonP2PClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(M.APP_BUTTONS.START_PRIVATE_MODAL_P2P,{minProp:"p2pMinimum",modelId:e.id,privateType:"p2p"})},r.buttonPrivateClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(M.APP_BUTTONS.START_PRIVATE_MODAL_PRIVATE,{minProp:"privateMinimum",modelId:e.id,privateType:"private"})},r.buttonSpyClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(M.APP_BUTTONS.START_PRIVATE_MODAL_SPY,{minProp:"spyMinimum",modelId:e.id,privateType:"spy"})},r.renderPrivateControls=function(){var e=r.props,t=e.isCam2camEnabled,n=e.isPrivateEnabled,a=e.model,o="<strong>"+a.username+"</strong>";return h.default.createElement("div",{className:"modes"},r.renderIf(n,function(){return h.default.createElement("div",{className:"mode-wrapper"},h.default.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:r.t("viewCam.confirmation.description.private",{model:o})}}),r.renderSpyingPolicy(),h.default.createElement("div",{className:"controls"},h.default.createElement(T.default,{display:"block",size:"medium",style:"primary",onClick:r.buttonPrivateClickHandler},r.t("button.private")),h.default.createElement("div",{className:"price"},r.t("viewCam.tokensPerMinute",{tokens:a.privateRate}))))}),r.renderIf(t,function(){return h.default.createElement("div",{className:"mode-wrapper"},h.default.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:r.t("viewCam.confirmation.description.cam2cam",{model:o})}}),h.default.createElement("div",{className:"controls"},h.default.createElement(T.default,{display:"block",size:"medium",style:"primary",onClick:r.buttonP2PClickHandler},r.t("button.startCam2Cam")),h.default.createElement("div",{className:"price"},r.t("viewCam.tokensPerMinute",{tokens:a.p2pRate}))))}))},r.renderSpyControls=function(){var e=r.props.model,t="<strong>"+e.username+"</strong>";return h.default.createElement("div",{className:"modes"},h.default.createElement("div",{className:"mode-wrapper"},h.default.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:r.t("viewCam.confirmation.description.spy",{model:t})}}),h.default.createElement("div",{className:"controls"},h.default.createElement(T.default,{display:"block",size:"medium",style:"primary",onClick:r.buttonSpyClickHandler},r.t("button.spyNow")),h.default.createElement("div",{className:"price"},r.t("viewCam.tokensPerMinute",{tokens:e.spyRate})))))},i=n,o(r,i)}return i(t,e),c(t,[{key:"renderSpyingPolicy",value:function(){return this.props.model.doSpy?null:h.default.createElement("div",{className:"spying-policy-wrapper"},h.default.createElement(O.default,{img:"spy-off",size:18}),h.default.createElement("span",{className:"spying-policy-description"},this.t("viewCam.confirmation.spying.title"),h.default.createElement("span",{className:"spying-policy-active"},this.t("viewCam.confirmation.spying.off"))),h.default.createElement("span",null,h.default.createElement("span",{className:"spying-policy-help",id:"spying_help"},"?"),h.default.createElement(C.default,{className:"spying-policy-tooltip",placement:"top",isMobileRelative:!1,targetId:"spying_help"},this.t("viewCam.confirmation.spying.spyOff"))))}},{key:"renderAnnex",value:function(){return h.default.createElement("div",{className:"annex"},this.t("viewCam.confirmation.annex."+(this.isSpy?"spy":"private")))}},{key:"renderContent",value:function(){var e=this,t=this.props,n=t.isCam2camEnabled,r=t.isPrivateEnabled,a=t.isSpy,o=t.model,i=this.state.isConnectionPending;return h.default.createElement("div",{className:this.c("modal-body",{full:n&&r&&!a}),"data-component-name":"StartPrivateModal"},h.default.createElement("div",{className:"start-private-modal-header"},h.default.createElement(R.default,{elements:{strong:h.default.createElement("strong",null)},messageId:a?"viewCam.confirmation.title.spy":"viewCam.confirmation.title.private",parameters:{model:(0,l.default)(o,"username",null)}}),this.renderIf(!a,h.default.createElement(O.default,{img:"lock"}))),this.renderIf(!a,h.default.createElement(U.default,{rating:(0,l.default)(o,"ratingPrivate",null),votersCount:(0,l.default)(o,"ratingPrivateUsers",null)})),this.renderIf(!o||i,h.default.createElement("div",{className:"loader-wrapper"},h.default.createElement(w.default,null)),function(){return e.renderIf(a,e.renderSpyControls,e.renderPrivateControls)}),this.renderAnnex())}}]),t}(_.default),V={emitButtonEvent:y.emitButtonEvent,proposePrivate:k.proposePrivate,showModal:y.showModal};H.propTypes=u({},_.default.propTypes,{isCam2camEnabled:m.default.bool,isPrivateEnabled:m.default.bool,isSpy:m.default.bool,model:m.default.shape({id:m.default.number,username:m.default.string})},(0,L.getActionPropTypes)(V)),H.defaultProps=u({},_.default.defaultProps,{className:"start-private-modal",titlePosition:"outside"});var G=function(e){return{model:e.viewCam.model,isSocketReady:e.appSettings.data.isSocketReady,isCam2camEnabled:(0,j.getIsCam2camEnabled)(e),isPrivateEnabled:(0,j.getIsPrivateEnabled)(e)}},x=function(e){return(0,E.bindActionCreators)(V,e)};t.default=(0,v.connect)(G,x)(H)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),s=n(0),l=r(s),u=n(39),c=r(u),d=n(8),f=r(d),p=function(e,t){var n=e.rating,r=e.starsCount,o=void 0===r?5:r,i=t.i18n.trans,s="private-rating-stars-group-"+n+"-"+Math.random().toString(16).slice(2)+"-"+Date.now(),u=[].concat(a(new Array(o).keys()));return l.default.createElement("span",{id:s,"data-component-name":"StarsGroup"},u.map(function(e,t){var r=t+1,a=n>=r-.5&&n<r,o=r<=n,i=void 0;return i=a?l.default.createElement(f.default,{img:"star-half",className:"star-half"}):o?l.default.createElement(f.default,{img:"star",className:"star-full"}):l.default.createElement(f.default,{img:"star",className:"star-empty"}),l.default.createElement("span",{key:t,"data-component-name":"StarsGroup"},i)}),l.default.createElement(c.default,{placement:"top",targetId:s},i("viewCam.privateRating.tooltipLabel")))};p.propTypes={rating:i.default.number.isRequired,starsCount:i.default.number},p.defaultProps={starsCount:5},p.contextTypes={i18n:i.default.object},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AddToFavoritesLimitModal=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),d=n(2),f=n(4),p=n(9),m=n(53),g=r(m),h=n(10),v=r(h),E=n(8),y=r(E),b=n(5),_=n(7),S=t.AddToFavoritesLimitModal=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(){r.props.showModal(b.MODAL_TYPES.AUTH,{action:{isDefaultBanner:!0,shouldBypassActionPrefix:!0,type:"createFreeAccount"},component:"SignUp",className:"auth-modal-signup",triggerSource:b.APP_BUTTONS.FAVORITES_LIMIT_REACHED})},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderContent",value:function(){return c.default.createElement("div",{className:"modal-body","data-component-name":"AddToFavoritesLimitModal"},c.default.createElement(y.default,{img:"blocked",size:80}),c.default.createElement("div",{className:"add-to-favorites-limit-modal-title"},this.t("addToFavoritesLimitModal.title")),c.default.createElement("div",{className:"add-to-favorites-limit-modal-description"},this.t("addToFavoritesLimitModal.description")),c.default.createElement(v.default,{style:"default-filled",onClick:this.clickHandler},this.t("addToFavoritesLimitModal.button")))}}]),t}(g.default),O={showModal:p.showModal};S.propTypes=s({},(0,_.getActionPropTypes)(O)),S.defaultProps=s({},g.default.defaultProps,{titlePosition:"outside",isCloseBtnShown:!0,isWrapperCloseDisabled:!0,className:"add-to-favorites-limit-modal"});var P=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}},T=function(e){return(0,f.bindActionCreators)(O,e)};t.default=(0,d.connect)(P,T)(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AddToFavoritesModal=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),d=n(2),f=n(4),p=n(9),m=n(53),g=r(m),h=n(10),v=r(h),E=n(17),y=r(E),b=n(5),_=n(59),S=r(_),O=n(7),P=n(63),T=r(P),A=n(21),C=n(42),I=t.AddToFavoritesModal=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.freeAccountClickHandler=function(){(0,r.props.createAddToFavoriteModal)({triggerSource:b.APP_BUTTONS.ADD_TO_FAVORITES_MODAL_ADD}),S.default.action({category:"addToFavoritesModal",action:"addToFavoritesClick"})},r.notNowClickHandler=function(){(0,r.props.hideModal)(),T.default.set("wasAddToFavoritesModalShown",!0)},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderTitle",value:function(){return c.default.createElement("span",null,c.default.createElement(y.default,{elements:{strong:c.default.createElement("strong",null)},messageId:"addToFavoritesModal.heading",parameters:{modelName:this.props.model.username}}))}},{key:"renderContent",value:function(){var e=this.props,t=e.getStaticUrl,n=e.whiteLabelId;return c.default.createElement("div",{className:"modal-body full","data-component-name":"AddToFavoritesModal"},c.default.createElement("div",{className:"modal-logo"},c.default.createElement("img",{src:t("users/components/ui/AddToFavoritesModal/add-to-favorites.svg"),alt:""})),c.default.createElement("div",{className:"modal-title"},this.t("addToFavoritesModal.title")),c.default.createElement("div",{className:"modal-description"},this.t("addToFavoritesModal.description")),c.default.createElement("div",{className:"modal-controls"},c.default.createElement(v.default,{style:n?"signup":"apply-alter",size:"medium",onClick:this.freeAccountClickHandler,tabIndex:-1},this.t("addToFavoritesModal.buttonTitle")),c.default.createElement("div",{className:"spacer-small"}),c.default.createElement("a",{tabIndex:0,onClick:this.notNowClickHandler},this.t("addToFavoritesModal.notNow"))))}}]),t}(g.default),w={createAddToFavoriteModal:C.createAddToFavoriteModal,hideModal:p.hideModal};I.propTypes=s({},(0,O.getActionPropTypes)(w)),I.defaultProps=s({},g.default.defaultProps,{className:"add-to-favorites-modal",titlePosition:"outside"});var N=function(e){return{whiteLabelId:e.config.whiteLabelId,getStaticUrl:function(t){return(0,A.getStaticUrl)(e,t)}}},R=function(e){return(0,f.bindActionCreators)(w,e)};t.default=(0,d.connect)(N,R)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AuthModal=void 0;var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(53),E=r(v),y=n(54),b=n(1180),_=r(b),S=n(604),O=r(S),P=n(606),T=r(P),A=n(382),C=r(A),I=t.AuthModal=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"getNextState",value:function(e,n){var r=e.whiteLabelId?"WhiteLabel":e.component;return u({},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n),{isWrapperCloseDisabled:this.getIsWrapperCloseDisabled(r,!1),component:r,titlePosition:this.getTitlePosition(r,"none")})}},{key:"getTitlePosition",value:function(e,t){var n={WhiteLabel:"outside"};return(0,l.default)(n,e,t)}},{key:"getIsWrapperCloseDisabled",value:function(e,t){var n={Login:function(){return!0},SignUp:function(){return!0},default:function(){return t}};return(0,l.default)(n,e,n.default)()}},{key:"renderLoginComponent",value:function(){var e=this.props,t=e.action,n=e.className,r=e.email,a=e.onClose,o=e.onProceed,i=e.showRecaptchaForced,s=e.triggerSource;return g.default.createElement(T.default,{action:t,className:n,email:r,isModal:!0,onAutoFocus:this.onAutoFocus,onClose:a,onProceed:o,triggerSource:s,showRecaptchaForced:i})}},{key:"renderSignUpComponent",value:function(){var e=this.props,t=e.action,n=e.className,r=e.email,a=e.isCloseBtnShown,o=e.onClose,i=e.onProceed,s=e.showRecaptchaForced,l=e.triggerSource,u=e.type;return g.default.createElement(C.default,{action:t,canClose:a,className:n,email:r,isModal:!0,onAutoFocus:this.onAutoFocus,onClose:o,onProceed:i,showRecaptchaForced:s,triggerSource:l,type:u})}},{key:"renderForgotPasswordComponent",value:function(){return g.default.createElement(O.default,{isModal:!0,onAutoFocus:this.onAutoFocus,onClose:this.props.onClose,onSuccess:this.closeHandler})}},{key:"renderWhiteLabelComponent",value:function(){var e=this.props.config.whiteLabel,t=this.props,n=t.action,r=t.triggerSource;return g.default.createElement(_.default,{action:n,whiteLabel:e,triggerSource:r})}},{key:"renderContent",value:function(){var e=this.state.component,t=this["render"+e+"Component"];if(!t)throw new y.ApplicationError("Failed to render component: "+e);return t.call(this)}}]),t}(E.default);I.propTypes={action:p.default.object,className:p.default.string,component:p.default.string,email:p.default.string,onClose:p.default.func,onProceed:p.default.func,showRecaptchaForced:p.default.bool,triggerSource:p.default.string.isRequired,type:p.default.string,whiteLabelId:p.default.string};var w=function(e){var t=e.config;return{config:t.data,whiteLabelId:t.whiteLabelId}};t.default=(0,h.connect)(w)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AuthWhiteLabel=void 0;var s=n(78),l=r(s),u=n(6),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(140),m=r(p),g=n(1),h=r(g),v=n(0),E=r(v),y=n(24),b=n(2),_=n(3),S=r(_),O=n(10),P=r(O),T=n(17),A=r(T),C=n(59),I=r(C),w=n(129),N=n(68),R=n(89),M=r(R),L=t.AuthWhiteLabel=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.getXHLUrls=function(){var e=r.props,t=e.action,n=e.whiteLabel,a=e.location,o=e.modelName,i=e.triggerSource,s=(0,c.default)(t,"onEnterAction",{}),l=(0,c.default)(t,"href",""+n.url.xhlUrl+(0,c.default)(a,"pathname","")),u=I.default.buildAmplitudeBackendDTO({modelName:o,source:i}),f=d({},(0,w.getParams)(a,!0),s,u),p=""+encodeURIComponent(l+"?"+decodeURIComponent(m.default.stringify(f)));return{signupTo:n.url.signup+"?url="+p,loginTo:n.url.login+"?url="+p}},i=n,o(r,i)}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props.action,t=e.type,n=e.user,r=e.shouldBypassActionPrefix,a=e.i18nParams,o=void 0===a?{}:a,i=this.getXHLUrls(),s=i.loginTo,u=i.signupTo,c=E.default.createElement(A.default,{choiceParameter:o.choiceParameter,elements:d({br:E.default.createElement("br",null),model:n?E.default.createElement("strong",null,n.username):null},(0,l.default)(o.elements,function(e){return E.default.createElement("span",null,e)})),parameters:o.parameters,messageId:"signUp.banner.inviteAction."+t}),f=E.default.createElement(P.default,{href:u,size:"medium",style:"signup",type:"anchor"},this.t("button.joinNow")),p=E.default.createElement(P.default,{href:s,size:"medium",type:"anchor"},this.t("button.login"));return E.default.createElement("div",{className:"auth-white-label-content modal-body","data-component-name":"AuthWhiteLabel"},E.default.createElement("div",{className:"intro"},n?E.default.createElement(M.default,{user:n,size:110}):null,E.default.createElement("div",{className:"text"},this.renderIf(r,c,E.default.createElement(A.default,{elements:{action:c,br:E.default.createElement("br",null)},messageId:"signUp.banner.invite"})))),E.default.createElement("div",{className:"actions"},E.default.createElement(A.default,{elements:{signUp:f,login:p},messageId:"signUp.banner.controls.loginOrSignUp"})))}}]),t}(S.default);L.propTypes={action:h.default.object.isRequired,whiteLabel:h.default.object.isRequired,triggerSource:h.default.string.isRequired};var k=function(e){return{modelName:(0,N.getModelPageUsername)(e)}};t.default=(0,y.withRouter)((0,b.connect)(k)(L))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(27),m=n(3),g=r(m),h=n(1182),v=n(1183),E=r(v),y=n(1184),b=r(y),_=n(1185),S=r(_),O=function(e,t){return"island-banner signup-banner signup-banner-"+(t?"action":e.type)},P=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.action,n=e.onGoToLogin,r=e.onGoToSignUp,a=e.type,o=(!a||"user"===a)&&t&&!t.isDefaultBanner,i=O(this.props,o);return d.default.createElement("div",{className:i,"data-component-name":"Banner"},this.renderIf(o&&t.backgroundImage,function(){return d.default.createElement("div",{className:"island-banner-background",style:{backgroundImage:"url("+t.backgroundImage+")"}})}),o?d.default.createElement(E.default,{action:t}):d.default.createElement(S.default,{type:a}),d.default.createElement(b.default,{type:a,onGoToLogin:n,onGoToSignUp:r}),d.default.createElement("div",{className:"signup-gradient"}))}}]),t}(g.default);P.propTypes={onGoToLogin:u.default.func.isRequired,onGoToSignUp:u.default.func,type:u.default.oneOf([p.SIGNUP_USER_ROLES.USER,p.SIGNUP_USER_ROLES.MODEL,p.SIGNUP_USER_ROLES.STUDIO]).isRequired,action:u.default.shape({backgroundImage:u.default.string,user:u.default.object,type:u.default.string})};var T=function(e){return{newSignupBackgroundABTestValue:(0,h.getAbTestGroupData)(e,"defaultUserSignUpNewBackgroundImage")}};t.default=(0,f.connect)(T)(P)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getAbTestGroupData=function(e,t){return e.abTesting.abTestingData[t]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.INVITE_ACTIONS_TOOLTIP=void 0;var s=n(78),l=r(s),u=n(14),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(3),E=r(v),y=n(17),b=r(y),_=n(39),S=r(_),O=n(89),P=r(O),T=t.INVITE_ACTIONS_TOOLTIP=["sendTip","startPrivate","startSpy"],A=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.renderHelpTooltip=function(){var e=r.props.action.type;return(0,c.default)(T,e)?h.default.createElement("a",{className:"signup-banner-invite-tooltip",id:"signup_banner_tooltip"},r.t("signUp.banner.tooltip."+e+".title"),h.default.createElement(S.default,{placement:"top",targetId:"signup_banner_tooltip"},r.t("signUp.banner.tooltip."+e+".description"))):null},i=n,o(r,i)}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props.action,t=e.shouldBypassActionPrefix,n=e.type,r=e.user,a=e.i18nParams,o=void 0===a?{}:a,i=h.default.createElement(b.default,{choiceParameter:o.choiceParameter,elements:d({br:h.default.createElement("br",null),model:r?h.default.createElement("strong",null,r.username):null},(0,l.default)(o.elements,function(e){return h.default.createElement("span",null,e)})),parameters:o.parameters,messageId:"signUp.banner.inviteAction."+n});return h.default.createElement("div",{className:"signup-banner-invite","data-component-name":"BannerInvite"},this.renderHelpTooltip(),r?h.default.createElement(P.default,{user:r,size:150}):null,h.default.createElement("div",{className:"signup-banner-invite-text"},this.renderIf(t,i,h.default.createElement(b.default,{elements:{action:i,br:h.default.createElement("br",null)},messageId:"signUp.banner.invite"}))))}}]),t}(E.default);A.propTypes={action:m.default.shape({shouldBypassActionPrefix:m.default.bool,type:m.default.string,user:m.default.object}).isRequired},t.default=A},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var l,u=n(107),c=r(u),d=n(14),f=r(d),p=n(6),m=r(p),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),E=n(0),y=r(E),b=n(2),_=n(3),S=r(_),O=n(10),P=r(O),T=n(27),A=(l={},s(l,T.SIGNUP_USER_ROLES.MODEL,"https://wiki.stripchat.com/Models/Studios_FAQ#Models"),s(l,T.SIGNUP_USER_ROLES.STUDIO,"https://wiki.stripchat.com/Models/Studios_FAQ#Studios"),l),C=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.goToLoginHandler=function(e){r.props.onGoToLogin&&r.props.onGoToLogin(e)},r.goToSignUp=function(e,t){r.props.onGoToSignUp&&r.props.onGoToSignUp(e,t)},r.goToSignUpAsModelHandler=function(e){r.goToSignUp(T.SIGNUP_USER_ROLES.MODEL,e)},r.goToSignUpAsStudioHandler=function(e){r.goToSignUp(T.SIGNUP_USER_ROLES.STUDIO,e)},i=n,o(r,i)}return i(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.routing,r=(0,m.default)(n.location,"state.returnRoute"),a=A[t],o=r?{returnRoute:r}:null,i=(0,f.default)([T.SIGNUP_USER_ROLES.USER,T.SIGNUP_USER_ROLES.MODEL],t),l=void 0;if(i){var u;l=(u={},s(u,T.SIGNUP_USER_ROLES.USER,T.SIGNUP_USER_ROLES.MODEL),s(u,T.SIGNUP_USER_ROLES.MODEL,T.SIGNUP_USER_ROLES.STUDIO),u)[t]}return y.default.createElement("div",{className:"signup-banner-suggestion","data-component-name":"BannerSuggestion"},this.renderIf(a,y.default.createElement("a",{className:"faq-link",href:a,target:"_blank"},this.t("signUp.banner."+t+"Faq"))),y.default.createElement("div",{className:"login-suggestion-wrapper"},y.default.createElement("div",{className:"login-suggestion"},y.default.createElement("span",{className:"login-suggestion-text"},this.t("signUp.banner.alreadyAMember")),y.default.createElement(P.default,{onClick:this.goToLoginHandler,style:"auth-banner",to:{pathname:"/login",state:o},type:"link"},this.t("signUp.banner.logInHere"))),i?y.default.createElement("div",{className:"signup-suggestion"},y.default.createElement(P.default,{onClick:this["goToSignUpAs"+(0,c.default)(l)+"Handler"],style:"auth-banner",to:{pathname:"/signup/"+l,state:o},type:"link"},this.t("signUp.banner.signUpAs."+l))):null))}}]),t}(S.default);C.propTypes={onGoToLogin:v.default.func,onGoToSignUp:v.default.func,type:v.default.oneOf([T.SIGNUP_USER_ROLES.USER,T.SIGNUP_USER_ROLES.MODEL,T.SIGNUP_USER_ROLES.STUDIO]).isRequired};var I=function(e){return{routing:e.routing}};t.default=(0,b.connect)(I)(C)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(27),g=n(3),h=r(g),v=n(8),E=r(v),y=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.renderBannerListItem=function(e,t){var n=e.icon,r=e.text;return p.default.createElement("li",{className:"signup-banner-list-item",key:t},p.default.createElement(E.default,{img:n}),p.default.createElement("span",{className:"signup-banner-list-text"},r))},i=n,o(r,i)}return i(t,e),u(t,[{key:"render",value:function(){var e=this[this.props.type+"BannerListItems"];return p.default.createElement("ul",{className:"signup-banner-list","data-component-name":"BannerList"},p.default.createElement("span",{className:"signup-banner-list-title"},this.t("signUp.banner.list.title")),(0,l.default)(e,this.renderBannerListItem))}},{key:"userBannerListItems",get:function(){var e="signUp.banner.list.user";return[{icon:"dialogue",text:this.t(e+".chatWithModels")},{icon:"fullscreen-on",text:this.t(e+".accessToFullscreen")},{icon:"favorited",text:this.t(e+".saveFavoriteModels")},{icon:"add-friend",text:this.t(e+".makeFriends")},{icon:"crown",text:this.t(e+".awardModels")}]}},{key:"modelBannerListItems",get:function(){var e="signUp.banner.list.modelOrStudio";return[{icon:"purse",text:this.t(e+".revenue")},{icon:"rocket",text:this.t(e+".boost")},{icon:"award-2",text:this.t(e+".contests")},{icon:"chargeback",text:this.t(e+".chargeback")},{icon:"ban",text:this.t(e+".ban")}]}},{key:"studioBannerListItems",get:function(){var e="signUp.banner.list.modelOrStudio";return[{icon:"purse",text:this.t(e+".revenue")},{icon:"rocket",text:this.t(e+".boost")},{icon:"chargeback",text:this.t(e+".chargeback")},{icon:"features",text:this.t(e+".features")},{icon:"user-support",text:this.t(e+".support")}]}}]),t}(h.default);y.propTypes={type:d.default.oneOf([m.SIGNUP_USER_ROLES.USER,m.SIGNUP_USER_ROLES.MODEL,m.SIGNUP_USER_ROLES.STUDIO]).isRequired},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BanConfirmationModal=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(4),m=n(3),g=r(m),h=n(301),v=r(h),E=n(130),y=t.BanConfirmationModal=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.banClickHandler=function(){var e=r.props,t=e.ban,n=e.modelId,a=e.onClose;t(n,e.user.id,!0),a()},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.user,r=t.isModel?"bans.confirmationModel":"bans.confirmationKnight",a=this.t(r,{username:"<strong>"+n.username+"</strong>"});return d.default.createElement(v.default,{onCancel:this.props.onClose,onConfirm:this.banClickHandler,"data-component-name":"BanConfirmationModal"},d.default.createElement("p",{dangerouslySetInnerHTML:{__html:a}}))}}]),t}(g.default);y.propTypes={ban:u.default.func.isRequired,currentUser:u.default.shape({isModel:u.default.bool.isRequired}),modelId:u.default.number.isRequired,onClose:u.default.func.isRequired,user:u.default.object.isRequired};var b=function(e){return(0,p.bindActionCreators)({ban:E.ban},e)};t.default=(0,f.connect)(null,b)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChristmasPromoModal=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),d=n(2),f=n(4),p=n(53),m=r(p),g=n(10),h=r(g),v=n(17),E=r(v),y=n(52),b=t.ChristmasPromoModal=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onClickEventHandler=function(){r.props.showChristmas2017Package({triggerSource:r.props.triggerSource})},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderContent",value:function(){return c.default.createElement("div",{className:"modal-body"},c.default.createElement("div",{className:"christmas-promo-modal-wrapper"},c.default.createElement("div",{className:"christmas-promo-modal-picture-wrapper"}),c.default.createElement("div",{className:"christmas-promo-modal-description"},c.default.createElement("div",{className:"christmas-promo-modal-description-title"},this.t("christmasPromo2017.title")),c.default.createElement("div",{className:"christmas-promo-modal-description-text"},c.default.createElement(E.default,{elements:{br:c.default.createElement("br",null),strong:c.default.createElement("strong",null)},messageId:"christmasPromo2017.description"})),c.default.createElement(h.default,{className:"action-button",style:"apply",size:"medium",onClick:this.onClickEventHandler},this.t("christmasPromo2017.buttonTitle")))))}}]),t}(m.default),_={showChristmas2017Package:y.showChristmas2017Package};b.defaultProps=s({},m.default.defaultProps,{titlePosition:"outside",isCloseBtnShown:!0,isWrapperCloseDisabled:!1,className:"christmas-promo-modal"});var S=function(e){var t=e.auth;return{isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}},O=function(e){return(0,f.bindActionCreators)(_,e)};t.default=(0,d.connect)(S,O)(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(53),v=r(h),E=n(10),y=r(E),b=n(383),_=r(b),S=n(5),O=n(43),P=O.UPDATE_TYPES.DELETE,T=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.confirmationChangeHandler=function(e){r.setState({isConfirmed:e.target.checked})},r.deleteMyAccountHandler=function(e){e.preventDefault();var t=r.reasonRef.getWrappedInstance().value;r.props.deleteUser({reason:t})},i=n,o(r,i)}return i(t,e),l(t,[{key:"getDefaultState",value:function(){return s({},u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{isConfirmed:!1})}},{key:"componentDidMount",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.updatePrepare(P)}},{key:"renderTitle",value:function(){return this.t("deleteMyAccount.title")}},{key:"renderContent",value:function(){var e=this,t=this.state.isConfirmed;return p.default.createElement("div",{className:"modal-body","data-component-name":"DeleteMyAccountModal"},p.default.createElement("form",{onSubmit:this.deleteMyAccountHandler},p.default.createElement("div",{className:"delete-my-account-field-reason"},p.default.createElement("label",{className:"delete-my-account-label",htmlFor:"delete_my_account_reason"},this.t("deleteMyAccount.labels.reason"),":"),p.default.createElement(_.default,{className:"textarea",autoCapitalize:"none",maxLength:S.DEFAULT_MAX_TEXTAREA_LENGTH,autoFocus:!0,rows:3,id:"delete_my_account_reason",ref:function(t){e.reasonRef=t}})),p.default.createElement("div",{className:"form-footer"},p.default.createElement("div",{className:"delete-my-account-field-confirmation"},p.default.createElement("input",{type:"checkbox",id:"delete_my_account_confirmation_input",className:"checkbox",onChange:this.confirmationChangeHandler}),p.default.createElement("label",{htmlFor:"delete_my_account_confirmation_input"},this.t("deleteMyAccount.labels.confirmation"))),p.default.createElement("div",{className:"controls"},p.default.createElement(y.default,{onClick:this.closeHandler,size:"medium",style:"apply-alter"},this.t("deleteMyAccount.cancel")),p.default.createElement("input",{type:"submit",className:"btn btn-medium btn-delete",disabled:!t,value:this.t("deleteMyAccount.delete")})))))}}]),t}(v.default);T.defaultProps=s({},T.defaultProps,{className:"delete-my-account-modal",titlePosition:"outside"}),T.propTypes=s({},T.propTypes,{deleteUser:d.default.func.isRequired,updatePrepare:d.default.func.isRequired});var A=function(e){return(0,g.bindActionCreators)({deleteUser:O.deleteUser,updatePrepare:O.updatePrepare},e)};t.default=(0,m.connect)(null,A)(T)},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&s[n])return s[n];var r=window.getComputedStyle(e),a=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),l=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),u=i.map(function(e){return e+":"+r.getPropertyValue(e)}).join(";"),c={sizingStyle:u,paddingSize:o,borderSize:l,boxSizing:a};return t&&n&&(s[n]=c),c}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l||(l=document.createElement("textarea"),document.body.appendChild(l));var i=r(e,t),s=i.paddingSize,u=i.borderSize,c=i.boxSizing,d=i.sizingStyle;l.setAttribute("style",d+";"+o),l.value=e.value||e.placeholder||"";var f=-1/0,p=1/0,m=l.scrollHeight;if("border-box"===c?m+=u:"content-box"===c&&(m-=s),null!==n||null!==a){l.value="";var g=l.scrollHeight-s;null!==n&&(f=g*n,"border-box"===c&&(f=f+s+u),m=Math.max(f,m)),null!==a&&(p=g*a,"border-box"===c&&(p=p+s+u),m=Math.min(p,m))}return{height:m,minHeight:f,maxHeight:p}}Object.defineProperty(t,"__esModule",{value:!0});var o="\n  min-height:none !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",i=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","padding-left","padding-right","border-width","box-sizing"],s={},l=void 0;t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditAlbumModal=void 0;var s=n(85),l=r(s),u=n(76),c=r(u),d=n(13),f=r(d),p=n(6),m=r(p),g=n(172),h=r(g),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},b=n(1),_=r(b),S=n(0),O=r(S),P=n(2),T=n(4),A=n(53),C=r(A),I=n(10),w=r(I),N=n(17),R=r(N),M=n(58),L=r(M),k=n(152),D=r(k),U=n(40),j=r(U),F=n(92),B=r(F),H=n(7),V=n(82),G=n(230),x=n(231),W=n(27),Y=n(165),K=V.validators.isAlbumCostValidator,q=V.validators.isRequiredValidator,z={COST:"cost",NAME:"name"},X=t.EditAlbumModal=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.albumNameInputRef=null,r.getFormFields=function(){var e=r,t=e.albumNameInputRef,n=e.albumCostInputRef,a=r.props.isCostOptionAvailable,o=r.state.albumData,i=o.accessMode===x.ALBUMS_ACCESS_MODES.PAID,s=Number((0,c.default)((0,m.default)(n,"value",0))),l=!s||s!==o.cost,u=a&&i&&l;return v({name:{value:(0,c.default)(t.value),validators:[q]}},u?{cost:{value:s,validators:[K]}}:{})},r.getFormFieldError=function(e){return(0,m.default)(r.state.formFieldErrors,e)},r.getFormFieldBackendError=function(e){return(0,m.default)(r.props.error,"details."+e)},r.hasFieldError=function(e){return Boolean(r.getFormFieldError(e)||r.getFormFieldBackendError(e))},r.formSubmitHandler=function(e){var t=r.state,n=t.albumData,a=t.hasChanges,o=t.isNew,i=r.context.store.getState,s=(0,V.validateFields)(r.getFormFields(),i());if(e.preventDefault(),(0,f.default)(s)){var l=Promise.resolve();o?l=r.props.create(n):a&&(l=r.props.update(n)),l.then(function(){return r.props.onClose()})}else r.setState({formFieldErrors:s})},r.nameInputChangeHandler=function(e){r.setState({albumData:v({},r.state.albumData,{name:e.target.value}),formFieldErrors:v({},r.state.formFieldErrors,{name:null}),hasChanges:!0})},r.costInputChangeHandler=function(e){var t=e.target.value;t&&!(0,V.isValidCost)(t,W.MIN_ALBUM_COST,W.MAX_ALBUM_COST)||(r.props.error&&r.props.resetError(),r.setState({albumData:v({},r.state.albumData,{cost:t}),formFieldErrors:v({},r.state.formFieldErrors,{cost:null}),hasChanges:!0}))},r.accessModeSelectHandler=function(e){r.setState({albumData:v({},r.state.albumData,{accessMode:e.value}),formFieldErrors:{},hasChanges:!0},function(){e.value===x.ALBUMS_ACCESS_MODES.PAID&&r.albumCostInputRef.focus()})},r.renderError=function(e,t){var n=r.getFormFieldError(e),a=r.getFormFieldBackendError(e),o=r.props.error;return n||a?(n&&(o={message:n}),O.default.createElement(L.default,{error:o,fieldName:e,targetId:t})):null},i=n,o(r,i)}return i(t,e),E(t,[{key:"componentDidMount",value:function(){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.albumNameInputRef.focus()}},{key:"componentWillUnmount",value:function(){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.props.editAlbumUnmount()}},{key:"getDefaultState",value:function(){var e=this.props.album,n=e?(0,h.default)(e):{accessMode:x.ALBUMS_ACCESS_MODES.FREE,cost:"",name:""};return v({},y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{albumData:v({},n,{cost:n.cost?n.cost:""}),hasChanges:!1,isNew:!e,formFieldErrors:{}})}},{key:"renderTitle",value:function(){var e=this.state.isNew,t=this.props.album;return e?O.default.createElement(R.default,{messageId:"gallery.albums.createNew"}):O.default.createElement(R.default,{messageId:"gallery.albums.editAlbum",elements:{albumName:O.default.createElement("span",null,t.name)}})}},{key:"renderContent",value:function(){var e=this,t=this.state,n=t.albumData,r=t.isNew,a=this.props,o=a.isCostOptionAvailable,i=a.isUpdating,s=n.accessMode!==x.ALBUMS_ACCESS_MODES.PAID,u=(0,l.default)(x.ALBUMS_ACCESS_MODES).filter(function(e){return e!==x.ALBUMS_ACCESS_MODES.PAID||o}).map(function(t){return{value:t,label:e.t("gallery.albums.accessModes."+t)}});return O.default.createElement("form",{className:"modal-body",onSubmit:this.formSubmitHandler,"data-component-name":"EditAlbumModal"},O.default.createElement("div",{className:"form-row"},O.default.createElement("label",{className:"form-label",htmlFor:"albumName"},this.t("gallery.albums.name")),O.default.createElement("div",{className:"form-input-group"},O.default.createElement(j.default,{className:this.c("form-input",{error:this.hasFieldError(z.NAME)}),id:"albumName",ref:function(t){e.albumNameInputRef=t},value:n.name,maxLength:"100",onChange:this.nameInputChangeHandler}),this.renderError(z.NAME,"albumName"))),O.default.createElement("div",{className:"form-row"},O.default.createElement("label",{className:"form-label",htmlFor:"albumAccessMode"},this.t("gallery.albums.accessMode")),O.default.createElement("div",{className:"form-select-group"},O.default.createElement(B.default,{className:"form-select",id:"albumAccessMode",onSelect:this.accessModeSelectHandler,options:u,value:n.accessMode}))),this.renderIf(o,function(){return O.default.createElement("div",{className:"form-row"},O.default.createElement("label",{className:"form-label",htmlFor:"albumCost"},O.default.createElement("span",{className:e.c("cost-label",{disabled:s})},e.t("gallery.albums.cost")),O.default.createElement(D.default,null,O.default.createElement(R.default,{messageId:"gallery.albums.costHelpText",elements:{costLabel:O.default.createElement("span",{className:"cost-label"})},parameters:{minCost:W.MIN_ALBUM_COST,maxCost:W.NEW_MAX_ALBUM_COST}}))),O.default.createElement("div",{className:"form-input-group"},O.default.createElement(j.default,{className:e.c("form-input",{error:e.hasFieldError(z.COST)}),disabled:s,id:"albumCost",onChange:e.costInputChangeHandler,ref:function(t){e.albumCostInputRef=t},value:n.cost}),e.renderError(z.COST,"albumCost")))}),O.default.createElement("div",{className:"form-buttons-row"},O.default.createElement(w.default,{className:"btn btn-apply btn-large",type:"submit",disabled:i},this.t(r?"gallery.albums.createAlbum":"saveChanges"))))}}]),t}(C.default),Z={create:G.create,editAlbumUnmount:G.editAlbumUnmount,resetError:G.resetError,update:G.update};X.propTypes=v({},C.default.propTypes,{albumId:_.default.number,album:_.default.object,error:_.default.object,isCostOptionAvailable:_.default.bool.isRequired,isUpdating:_.default.bool.isRequired},(0,H.getActionPropTypes)(Z)),X.defaultProps=v({},C.default.defaultProps,{className:"create-album-modal",titlePosition:"outside"});var Q=function(e,t){var n=t.albumId,r=e.myAlbums,a=r.error,o=r.isUpdating,i=e.profile.user;return{album:(0,Y.getAlbumById)(e,{albumId:n}),error:a,isCostOptionAvailable:(0,m.default)(i,"isApprovedModel",!1),isUpdating:o}},J=function(e){return(0,T.bindActionCreators)(Z,e)};t.default=(0,P.connect)(Q,J)(X)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditVideoModal=void 0;var s=n(76),l=r(s),u=n(1192),c=r(u),d=n(35),f=r(d),p=n(1195),m=r(p),g=n(1196),h=r(g),v=n(13),E=r(v),y=n(6),b=r(y),_=n(47),S=r(_),O=n(172),P=r(O),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},I=n(1),w=r(I),N=n(0),R=r(N),M=n(2),L=n(4),k=n(53),D=r(k),U=n(10),j=r(U),F=n(17),B=r(F),H=n(58),V=r(H),G=n(152),x=r(G),W=n(8),Y=r(W),K=n(40),q=r(K),z=n(1197),X=r(z),Z=n(73),Q=r(Z),J=n(92),$=r(J),ee=n(67),te=n(284),ne=n(7),re=n(188),ae=n(82),oe=n(5),ie=n(233),se=n(191),le=n(166),ue=ae.validators.isRequiredValidator,ce=function(e){return{accessMode:se.VIDEO_ACCESS_MODES.FREE,title:(0,te.omitFileExtension)(e.name).slice(0,se.TITLE_MAX_LENGTH),coverUrls:[]}},de={COST:"cost",TITLE:"title"},fe={ACCESS:"access",COST:"cost",TITLE:"videoTitle"},pe=40,me=180,ge=[se.VIDEO_ACCESS_MODES.FREE,se.VIDEO_ACCESS_MODES.VERIFIED_USERS,se.VIDEO_ACCESS_MODES.FRIENDS,se.VIDEO_ACCESS_MODES.PAID],he=(0,c.default)(4),ve=t.EditVideoModal=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.scrollableCoverPreviewsContainerRef=null,r.coverPreviewContainers={},r.costInputRef=null,r.titleInputRef=null,r.uploadAbortFn=null,r.propsUpdateToActionsMap=[{update:function(e,t){return e.editingVideoId!==t.editingVideoId},action:function(){99===r.state.uploadedPercent&&r.setState({uploadedPercent:100})}},{update:function(e,t){return e.updateError!==t.updateError},action:function(e){var t=e.updateError;t&&r.setState({backendErrors:t.details})}},{update:function(e,t){return e.video!==t.video},action:function(e){var t=e.video,n=r.state,a=n.hasDoneProcessingWhileEdit,o=n.videoData;r.setState({videoData:T({},t,{title:r.state.videoData.title,cost:r.getVideoCostToRender(o),coverUrl:o.coverUrl||t.coverUrl,accessMode:o.accessMode}),hasDoneProcessingWhileEdit:!a&&(0,le.hasVideoProcessedSuccessfully)({video:o},{video:t})})}},{update:le.hasUploadErrorOccurred,action:function(){return r.setState({isCloseBtnShown:!0})}},{update:le.hasVideoProcessingFailed,action:function(e){(0,e.setEditingVideoProcessingFailed)(!0),r.setState({isCloseBtnShown:!0})}}],r.getVideoCostToRender=function(e){var t=e.cost;return t>0?t:""},r.getFormFields=function(){return{title:{value:(0,l.default)(r.titleInputRef.value),validators:[ue]}}},r.getFormFieldError=function(e){return(0,b.default)(r.state.formFieldErrors,e)},r.getFormFieldBackendError=function(e){return(0,b.default)(r.state.backendErrors,e)},r.getHasFieldError=function(e){return Boolean(r.getFormFieldError(e)||r.getFormFieldBackendError(e))},r.getPreparedVideo=function(){var e=r.state.videoData;return T({},e,{cost:se.VIDEO_ACCESS_MODES.PAID===e.accessMode?Number(e.cost):0,title:(0,l.default)(e.title)})},r.scrollToCover=function(e){(0,ee.scrollTo)({scrollableContainer:r.scrollableCoverPreviewsContainerRef,target:e,leftOffset:pe,rightOffset:pe,axis:"x"})},r.setVideoDataProperties=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.default,n=r.state,a=n.backendErrors,o=n.formFieldErrors,i=n.videoData,s=function(){return null};r.setState({videoData:T({},i,e),formFieldErrors:(0,m.default)(T({},o),e,s),backendErrors:(0,m.default)(T({},a),e,s)},t)},r.tryRemoveVideo=function(){var e=r.props.video,t=(0,b.default)(e,"id");t&&r.props.remove(t)},r.coverPreviewsContainerRefHandler=function(e){r.scrollableCoverPreviewsContainerRef=e},r.coverPreviewContainerRefHandler=function(e){e&&(r.coverPreviewContainers[e.dataset.coverName]=e)},r.titleChangeHandler=function(e){r.setVideoDataProperties({title:e.target.value})},r.costChangeHandler=function(e){var t=e.target.value;t&&!(0,ae.isValidCost)(t,se.VIDEO_COST_RANGES.MIN,se.VIDEO_COST_RANGES.MAX)||r.setVideoDataProperties({cost:t})},r.accessModeSelectHandler=function(e){var t=e.value,n=se.VIDEO_ACCESS_MODES.PAID===t,a={accessMode:t};n&&(a.cost=me),r.setVideoDataProperties(a,function(){n&&r.costInputRef.focus(!0)})},r.coverClickHandler=function(e){var t=e.currentTarget.dataset.coverIndex,n=r.state.videoData;r.scrollToCover(e.currentTarget),r.setState({videoData:T({},n,{cover:n.covers[t],coverUrl:n.coverUrls[t]})})},r.cancelClickHandler=function(){var e=r.props.isNew;r.uploadAbortFn&&r.uploadAbortFn(),e&&r.tryRemoveVideo(),r.props.onClose()},r.tryAgainClickHandler=function(){r.props.resetErrors(),r.props.setEditingVideoProcessingFailed(!1),r.tryRemoveVideo(),r.props.onClose()},r.formSubmitHandler=function(e){e.preventDefault();var t=r.context.store.getState,n=r.props,a=n.editingVideoId,o=n.isNew,i=n.video,s=r.state.hasDoneProcessingWhileEdit;if(a){var l=(0,ae.validateFields)(r.getFormFields(),t());if(!(0,E.default)(l))return void r.setState({formFieldErrors:l});var u=r.getPreparedVideo();o||!(0,h.default)(i,u,function(e,t){return e.title===t.title&&e.coverUrl===t.coverUrl&&e.accessMode===t.accessMode&&e.cost===(t.cost||0)})?r.props.update(u,s||o).then(function(){return r.props.onClose()}):r.props.onClose()}},r.uploadProgressHandler=function(e){var t=e.total,n=e.loaded,a=r.props.editingVideoId,o=Math.ceil(n/t*100);a||100!==o||(o-=1),r.setState({uploadedPercent:o})},r.uploadSuccessHandler=function(){r.setState({isUploadCompleted:!0})},r.renderError=function(e,t){var n=r.getFormFieldError(e),a=r.getFormFieldBackendError(e),o=r.props.updateError;return n||a?(n&&(o={message:n}),R.default.createElement(V.default,{error:o,fieldName:e,targetId:t})):null},r.renderCoverPreviews=function(){var e=r.state.videoData;return e.coverUrls.map(function(t,n){var a=e.coverUrl===t;return R.default.createElement("div",{key:t,className:r.c("cover-preview-container",{selected:a}),"data-cover-index":n,"data-cover-name":e.covers[n],onClick:r.coverClickHandler,ref:r.coverPreviewContainerRefHandler},R.default.createElement("div",{className:"cover-preview-container-inner",style:{backgroundImage:"url("+t+")"}}),r.renderIf(a,R.default.createElement(Y.default,{img:"circle-check",size:40})))})},r.renderCoverPlaceholders=function(){return he.map(function(e){return R.default.createElement("div",{key:e,className:"cover-preview-container empty"},R.default.createElement("div",{className:"cover-preview-container-inner"},R.default.createElement(Y.default,{img:"movie",size:24})))})},r.renderAvailableCovers=function(){var e=r.state.videoData;return R.default.createElement("div",{className:"form-row"},R.default.createElement("label",{className:"form-label"},r.t("labels.cover")+":"),R.default.createElement("div",{className:"form-input-group"},R.default.createElement(Q.default,{containerRef:r.coverPreviewsContainerRefHandler},R.default.createElement("div",{className:"cover-previews-container"},r.renderIf(e.coverUrls.length>0,r.renderCoverPreviews,r.renderCoverPlaceholders)))))},r.renderSuccessMessage=function(){return R.default.createElement("span",{className:"progress-bar-progress-message"},R.default.createElement(Y.default,{img:"check",size:14}),R.default.createElement("span",null,r.t("videos.videoPublished")))},r.renderUploadProgress=function(){var e=r.props.isNew,t=r.state,n=t.hasDoneProcessingWhileEdit,a=t.isUploadCompleted,o=t.uploadedPercent,i=t.videoData,s=i.status===se.VIDEO_STATUSES.PROCESSING;if(!e&&!s&&!n)return null;var l=(0,b.default)(r.props,"file.name"),u=oe.BROWSER_CAPABILITIES.edge?r.t("videos.uploadingStatus"):r.t("videos.uploadingProgress",{percent:o}),c=s?r.t("videos.processingProgress"):u,d=s||n||oe.BROWSER_CAPABILITIES.edge?100:o;return R.default.createElement("div",{className:"upload-status-box"},r.renderIf(l,R.default.createElement("div",{className:"upload-status-file-name"},l)),R.default.createElement(X.default,{done:d,isCompleted:n||!s&&a&&100===o,successMessage:r.renderSuccessMessage(),progressMessage:c}))},r.renderErrorMessageContent=function(){var e=r.props,t=e.hasEditingVideoProcessingFailed,n=e.preUploadError,a=e.uploadError,o=void 0;return t&&(o=r.t("videos.messages.processingFailedWhileEdit")),n&&(o=(0,b.default)(n,"message")),a&&(o=r.t("videos.messages.uploadFailed")),R.default.createElement("div",{className:"modal-body"},R.default.createElement("div",{className:"uploading-error-content"},R.default.createElement(Y.default,{img:"error",size:100}),R.default.createElement("span",{className:"error-header"},r.t("videos.messages.somethingWrong")),R.default.createElement("span",{className:"error-description"},o),R.default.createElement(j.default,{className:"try-again-button",size:"large",style:"auth-banner",onClick:r.tryAgainClickHandler},r.t("tryAgain"))))},r.renderChosenCover=function(){var e=r.state.videoData.coverUrl;return e?R.default.createElement("div",{className:"chosen-cover-container"},R.default.createElement("img",{className:"chosen-cover",src:e})):R.default.createElement("div",{className:"chosen-cover-container empty"},R.default.createElement(Y.default,{img:"movie",size:50}))},i=n,o(r,i)}return i(t,e),A(t,[{key:"componentDidMount",value:function(){var e=this;C(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);var n=this.props,r=n.file,a=n.isNew,o=n.preUploadError,i=n.uploadUrl;if(r&&!o&&this.props.upload({uploadUrl:i,file:r,uploadProgressHandler:this.uploadProgressHandler,uploadSuccessHandler:this.uploadSuccessHandler,xhrAbortProvider:function(t){e.uploadAbortFn=t},freshFormDataProvider:function(){var t=e.getPreparedVideo(),n=t.accessMode,r=t.cost;return T({},t,{cost:se.VIDEO_ACCESS_MODES.PAID===n?r||me:r})}}),!a){var s=this.state.videoData;this.scrollToCover(this.coverPreviewContainers[s.cover])}}},{key:"componentWillUnmount",value:function(){C(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.props.setEditingId(null)}},{key:"getDefaultState",value:function(){var e=this.props,n=e.video,r=e.file,a=n?(0,P.default)(n):ce(r);return T({},C(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{backendErrors:{},formFieldErrors:{},isUploadCompleted:!1,uploadedPercent:0,videoData:T({},a,{cost:this.getVideoCostToRender(a)})})}},{key:"renderTitle",value:function(){var e=this.props,t=e.isNew,n=e.preUploadError,r=e.uploadError,a=e.video;return n||r?R.default.createElement(B.default,{messageId:"videos.uploadFailed"}):t?R.default.createElement(B.default,{messageId:"videos.uploadNew"}):(0,re.insertInvisibleWordBreaks)(this.t("videos.edit",{title:a.title}),15,"modal-header-custom-inners")}},{key:"renderContent",value:function(){var e=this,t=this.props,n=t.editingVideoId,r=t.hasEditingVideoProcessingFailed,a=t.isCostOptionAvailable,o=t.isNew,i=t.isUpdating,s=t.preUploadError,l=t.uploadError,u=this.state.videoData,c=o&&(s||l);if(r||c)return this.renderErrorMessageContent();var d=u.accessMode!==se.VIDEO_ACCESS_MODES.PAID,f=(0,S.default)(ge,function(e){return e!==se.VIDEO_ACCESS_MODES.PAID||a}).map(function(t){return{value:t,label:e.t("contentAccessModes.selectLabels."+t)}});return R.default.createElement("div",{"data-component-name":"EditVideoModal"},R.default.createElement("form",{className:this.c("modal-body",{"new-video":o}),onSubmit:this.formSubmitHandler},R.default.createElement("div",{className:"form-columns"},R.default.createElement("div",{className:"chosen-cover-column"},this.renderChosenCover()),R.default.createElement("div",{className:"form-fields-column"},this.renderUploadProgress(),this.renderAvailableCovers(),R.default.createElement("div",{className:"form-row"},R.default.createElement("label",{className:"form-label",htmlFor:fe.TITLE},this.t("labels.title")+":"),R.default.createElement("div",{className:"form-input-group"},R.default.createElement(q.default,{className:this.c({error:this.getHasFieldError(de.TITLE)}),id:fe.TITLE,display:"block",type:"text",value:u.title,ref:function(t){e.titleInputRef=t},onChange:this.titleChangeHandler,maxLength:se.TITLE_MAX_LENGTH}),this.renderError(de.TITLE,fe.TITLE))),R.default.createElement("div",{className:"form-row"},R.default.createElement("label",{className:"form-label",htmlFor:fe.ACCESS},this.t("labels.access")+":"),R.default.createElement("div",{className:"form-input-group"},R.default.createElement($.default,{className:"form-select",id:fe.ACCESS,onSelect:this.accessModeSelectHandler,options:f,value:u.accessMode}))),this.renderIf(a,function(){return R.default.createElement("div",{className:"form-row"},R.default.createElement("label",{className:"form-label",htmlFor:fe.COST},R.default.createElement("span",{className:e.c("cost-label",{disabled:d})},e.t("labels.tokensToAccess")+":"),R.default.createElement(x.default,null,R.default.createElement(B.default,{messageId:"gallery.albums.costHelpText",elements:{costLabel:R.default.createElement("span",{className:"cost-label"})},parameters:{minCost:se.VIDEO_COST_RANGES.MIN,maxCost:se.VIDEO_COST_RANGES.MAX}}))),R.default.createElement("div",{className:"form-input-group"},R.default.createElement(q.default,{className:e.c("form-input",{error:e.getHasFieldError(de.COST)}),disabled:d,id:fe.COST,onChange:e.costChangeHandler,ref:function(t){e.costInputRef=t},value:u.cost}),e.renderError(de.COST,fe.COST)))}))),R.default.createElement("div",{className:"form-controls-divider-orient"},R.default.createElement("div",{className:"form-controls-divider"})),R.default.createElement("div",{className:"form-controls-row"},this.renderIf(o,R.default.createElement(j.default,{onClick:this.cancelClickHandler},this.t("button.abort"))),R.default.createElement(j.default,{type:"submit",style:"apply",disabled:!n||i},o?this.t("button.ok"):this.t("button.save")))),R.default.createElement("div",{className:"additional-info-message"},R.default.createElement("span",null,this.t("videos.publishMethodMessage"))))}}]),t}(D.default),Ee={remove:ie.remove,resetErrors:ie.resetErrors,setEditingId:ie.setEditingId,setEditingVideoProcessingFailed:ie.setEditingVideoProcessingFailed,update:ie.update,upload:ie.upload};ve.propTypes=T({},D.default.propTypes,{editingVideoId:w.default.number,isCostOptionAvailable:w.default.bool.isRequired,isUpdating:w.default.bool.isRequired,file:w.default.shape({name:w.default.string,size:w.default.number}),updateError:w.default.object,uploadError:w.default.object,uploadUrl:w.default.string,video:w.default.object},(0,ne.getActionPropTypes)(Ee)),ve.defaultProps=T({},D.default.defaultProps,{className:"edit-video-modal",titlePosition:"outside"});var ye=function(e){var t=e.myVideos,n=t.editingVideoId,r=t.hasEditingVideoProcessingFailed,a=t.isUpdating,o=t.preUploadError,i=t.updateError,s=t.uploadError,l=e.profile.user;return{editingVideoId:n,hasEditingVideoProcessingFailed:r,isCostOptionAvailable:(0,b.default)(l,"isApprovedModel",!1),isUpdating:a,preUploadError:o,updateError:i,uploadError:s,video:(0,le.getEditingVideoData)(e)}},be=function(e){return(0,L.bindActionCreators)(Ee,e)};t.default=(0,M.connect)(ye,be)(ve)},,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(67),u=function(e){var t=e.done,n=e.isCompleted,r=e.progressMessage,a=e.successMessage;return s.default.createElement("div",{className:(0,l.classNames)("progress-bar",{completed:n}),"data-component-name":"ProgressBar"},s.default.createElement("div",{className:"progress-bar-progress",style:{flex:"0 1 "+t+"%"}},s.default.createElement("div",{className:"progress-bar-text-wrapper"},n?a:r)))};u.propTypes={done:o.default.number,isCompleted:o.default.bool,progressMessage:o.default.string,successMessage:o.default.oneOfType([o.default.string,o.default.element])},u.defaultProps={done:0,isCompleted:!1,progressMessage:"",successMessage:""},t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureAnnouncementModal=void 0;var s=n(85),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),d=r(c),f=n(1),p=r(f),m=n(3),g=r(m),h=n(10),v=r(h),E=n(199),y=r(E),b=n(17),_=r(b),S=n(5),O=t.FeatureAnnouncementModal=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"renderSteps",value:function(){return this.props.sectionsKeys.map(function(e,t){var n=e.header,r=e.body;return d.default.createElement("div",{className:"step-row",key:n},d.default.createElement("div",{className:"step-number"},t+1),d.default.createElement("div",{className:"step-description-wrapper"},d.default.createElement("div",{className:"step-title"},d.default.createElement(_.default,{messageId:n})),d.default.createElement("div",{className:"step-description"},d.default.createElement(_.default,{elements:{strong:d.default.createElement("strong",null)},messageId:r}))))})}},{key:"render",value:function(){var e=this.props,t=e.bodyHeaderKey,n=e.imageUrl,r=e.modalCloseHandler,a=e.tryNowClickHandler;return d.default.createElement(y.default,{className:"feature-announcement-modal",onClose:r,titlePosition:"outside","data-component-name":"FeatureAnnouncementModal"},d.default.createElement("div",{className:"modal-body"},d.default.createElement("div",{className:"picture-wrapper",style:{backgroundImage:"url("+n+")"}}),d.default.createElement("div",{className:"description"},d.default.createElement("div",{className:"title"},d.default.createElement(_.default,{messageId:t})),d.default.createElement("div",{className:"steps"},this.renderSteps()),d.default.createElement(v.default,{className:"signup",style:"apply-alter",size:"large",onClick:a},this.t("button.tryNow")))))}}]),t}(g.default);O.propTypes={bodyHeaderKey:p.default.string.isRequired,imageUrl:p.default.string.isRequired,modalCloseHandler:p.default.func.isRequired,persistenceKey:p.default.oneOf((0,l.default)(S.MODAL_PERSISTENCE_KEYS)),sectionsKeys:p.default.arrayOf(p.default.shape({header:p.default.string,body:p.default.string})).isRequired,tryNowClickHandler:p.default.func.isRequired},t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.InvisibleModeModal=t.ADVANTAGE_LIST=void 0;var s=n(11),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(53),v=r(h),E=n(10),y=r(E),b=n(8),_=r(b),S=n(5),O=n(7),P=t.ADVANTAGE_LIST=[{title:"goldStatus",description:"goldStatusDescription",icon:"gold"},{title:"specialsOffers",icon:"speaker-in-circle"},{title:"emoticons",icon:"emoticons"},{title:"messageAbility",icon:"message-ability"}],T=t.InvisibleModeModal=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.buyTokensClickHandler=function(){r.props.emitButtonEvent(S.APP_BUTTONS.INVISIBLE_MODE_MODAL_SUBSCRIBE)},r.renderAdvantageItem=function(e){var t=e.title,n=e.description,a=e.icon;return f.default.createElement("div",{className:"advantage-item",key:a},f.default.createElement(_.default,{img:a,size:24}),f.default.createElement("div",{className:"advantage-description"},r.t("invisibleMode."+t),r.renderIf(n,f.default.createElement("div",{className:"advantage-description-details"},r.t("invisibleMode."+n)))),f.default.createElement("div",{className:"advantage-item-separation"}))},i=n,o(r,i)}return i(t,e),c(t,[{key:"renderContent",value:function(){return f.default.createElement("div",{className:"modal-body","data-component-name":"InvisibleModeModal"},f.default.createElement("h1",{className:"invisible-mode-header"},this.t("invisibleMode.title")),f.default.createElement(_.default,{img:"invisible",size:100}),f.default.createElement("div",{className:"invisible-mode-description"},f.default.createElement("div",null,this.t("invisibleMode.description")),f.default.createElement("div",null,this.t("invisibleMode.descriptionLimit"))),f.default.createElement("div",{className:"invisible-mode-description"},this.t("invisibleMode.receive")),f.default.createElement("div",{className:"invisible-mode-advantage"},(0,l.default)(P,this.renderAdvantageItem)),f.default.createElement(y.default,{style:"primary",onClick:this.buyTokensClickHandler,size:"large"},this.t("invisibleMode.makeMeGold")))}}]),t}(v.default),A={emitButtonEvent:g.emitButtonEvent};T.propTypes=u({},(0,O.getActionPropTypes)(A)),T.defaultProps=u({},v.default.defaultProps,{titlePosition:"outside",isCloseBtnShown:!0,isWrapperCloseDisabled:!1,className:"invisible-mode-modal"});var C=function(e){return(0,m.bindActionCreators)(A,e)};t.default=(0,p.connect)(null,C)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(14),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(4),b=n(9),_=n(53),S=r(_),O=n(17),P=r(O),T=n(40),A=r(T),C=n(39),I=r(C),w=n(5),N=n(7),R=n(42),M=n(12),L=[20,50,100,200],k=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.changeTipAmountHandler=function(e){var t=parseInt(e.target.value,10)||0;r.setPredefinedTipAmount(t)},r.setPredefinedTipAmount=function(e){r.props.saveTipAmount(e),r.setState({amount:e,isCustomSelected:!1})},r.changeCustomAmountHandler=function(e){var t=r.props.availableTokens,n=parseInt(e.target.value,10)||0,a=!0;n>t&&(a=!1),r.props.saveTipAmount(n),r.setState({customAmount:n,hasEnoughTokens:a})},r.selectCustomAmountHandler=function(e){var t=e.target,n=t.id,a=r.props.availableTokens,o=r.state.customAmount;r.setState({amount:0,isCustomSelected:!0,hasEnoughTokens:a>=o},function(){"customTokens"!==n&&r.setFocusOnCustomAmountInput()})},r.changeCommentHandler=function(e){var t=e.target.value;r.setState({message:t.length>M.TIP_COMMENT_LENGTH?t.substr(0,M.TIP_COMMENT_LENGTH):t})},r.triggerCommentHandler=function(e){r.setState({commentEnabled:Boolean(e.target.checked)},function(){r.commentRef.focus()})},r.modalKeyDownHandler=function(e){e.keyCode===w.KEY_CODES.enter&&r.sendTipHandler(e)},r.sendTipHandler=function(e){e.stopPropagation();var t=r.state,n=t.amount,a=t.customAmount,o=t.isCustomSelected,i=t.commentEnabled,s=r.props.user,l=o?a:n,u=i?r.state.message:"";r.props.emitButtonEvent(w.APP_BUTTONS.SEND_OFFLINE_TIP_MODAL_SEND,{message:u,modelId:s.id,tipsAmount:l})},r.disabledCommentsClickHandler=function(){r.setState({commentEnabled:!0},function(){var e=r,t=e.commentRef;t&&t.focus()})},r.renderOption=function(e){var t=r.state,n=t.amount,a=t.isCustomSelected,o=r.props.availableTokens,i=o>=e,s=!a&&n===e&&i,u=r.t("sendTip.tipModelTokens",{tokens:"<strong>"+e+"</strong>"});return v.default.createElement("div",{className:r.c("radio-wrapper",{disabled:!i}),onClick:(0,l.default)(r.setPredefinedTipAmount,e),key:e},v.default.createElement("div",{className:"radio-container"},v.default.createElement(A.default,{size:"medium",type:"radio",id:"send_tip_radio_"+e,name:"sendTip",checked:s,value:e,onChange:r.changeTipAmountHandler,ref:function(e){r.checkedRadioInputRef=s?e:void 0}}),v.default.createElement("label",{htmlFor:"send_tip_radio_"+e},v.default.createElement("strong",null,e)," ",r.t("sendTip.tokens"))),v.default.createElement("div",{className:r.c("description media-up-to-s-hidden",{checked:s})},v.default.createElement("div",{dangerouslySetInnerHTML:{__html:u}})))},i=n,o(r,i)}return i(t,e),f(t,[{key:"getDefaultState",value:function(){var e=this.props.tipAmount,n=!(0,c.default)(this.props.tokenPackages,e);return d({},p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{amount:e,customAmount:n?e:0,hasEnoughTokens:!0,isCustomSelected:n,isPrivate:!1})}},{key:"getNextState",value:function(e,n){return d({},p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n),{message:e.message,commentEnabled:e.message&&e.message.length>0})}},{key:"componentDidMount",value:function(){if(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.state.isCustomSelected)this.setFocusOnCustomAmountInput();else{var e=this.checkedRadioInputRef;e&&e.focus()}this.registerEventListener(document,"keydown",this.modalKeyDownHandler)}},{key:"setFocusOnCustomAmountInput",value:function(){this.customTokensRef.focus(!0)}},{key:"renderTitle",value:function(){var e=this.props.user.login;return v.default.createElement(P.default,{elements:{strong:v.default.createElement("strong",null)},messageId:"sendTip.tipModalTitle",parameters:{username:e}})}},{key:"renderContent",value:function(){var e=this,t=this.state,n=t.amount,r=t.message,a=t.commentEnabled,o=t.customAmount,i=t.hasEnoughTokens,s=t.isCustomSelected,l=this.props.tokenPackages;return v.default.createElement("div",{className:"modal-body","data-component-name":"SendOfflineTipModal"},v.default.createElement("div",{className:"title"},this.t("sendTip.howManyTokensWouldYouLikeToTip")),l.map(this.renderOption),v.default.createElement("div",{className:"radio-wrapper",onClick:this.selectCustomAmountHandler},v.default.createElement("div",{className:"radio-container"},v.default.createElement(A.default,{type:"radio",size:"medium",id:"send_tip_radio_custom",name:"sendTip",checked:s,value:0,onChange:this.selectCustomAmountHandler}),v.default.createElement("label",{htmlFor:"send_tip_radio_custom"},this.t("sendTip.customAmount"))),v.default.createElement("div",{className:"description"},v.default.createElement(A.default,{className:"input-tokens",id:"customTokens",ref:function(t){e.customTokensRef=t},onFocus:this.selectCustomAmountHandler,onChange:this.changeCustomAmountHandler,value:o||""})),this.renderIf(!i,function(){return v.default.createElement(I.default,{className:"error",placement:"top",targetId:"customTokens",isForceVisible:!0,isMobileRelative:!1},e.t("sendTip.notEnoughTokens"))})),v.default.createElement("div",{className:"comments-wrapper media-up-to-s-hidden"},v.default.createElement("div",{className:"trigger"},v.default.createElement(A.default,{checked:a,id:"send_tip_checkbox",type:"checkbox",onChange:this.triggerCommentHandler}),v.default.createElement("label",{htmlFor:"send_tip_checkbox"},this.t("sendTip.comment"))),v.default.createElement("div",{className:this.c("comments",{disabled:!a}),onClick:a?null:this.disabledCommentsClickHandler},v.default.createElement(A.default,{className:"input-comment",disabled:!a,placeholder:this.t("sendTip.tokensComment"),ref:function(t){e.commentRef=t},value:r,onChange:this.changeCommentHandler,maxLength:M.TIP_COMMENT_LENGTH}),v.default.createElement("div",{className:"clearfix"}))),v.default.createElement("div",{className:"controls"},v.default.createElement("button",{className:"btn btn-apply-alter btn-large",disabled:!(n||o)||!i,onClick:this.sendTipHandler},this.t("button.sendTip"))))}}]),t}(S.default),D={emitButtonEvent:b.emitButtonEvent,saveTipAmount:b.saveTipAmount,sendOfflineTip:R.sendOfflineTip};k.propTypes=d({},S.default.propTypes,{availableTokens:g.default.number.isRequired,tipAmount:g.default.number,tokenPackages:g.default.array,user:g.default.object.isRequired},(0,N.getActionPropTypes)(D)),k.defaultProps=d({},S.default.defaultProps,{className:"send-offline-tip-modal",titlePosition:"outside",tokenPackages:L});var U=function(e){return(0,y.bindActionCreators)(D,e)},j=function(e){return{tipAmount:e.ui.tipAmount}};t.default=(0,E.connect)(j,U)(k)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),d=n(2),f=n(53),p=r(f),m=n(10),g=r(m),h=n(8),v=r(h),E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onClickEventHandler=function(){window.location.reload()},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderTitle",value:function(){var e=this.props.i18nTranslate;return c.default.createElement("span",null,this.t(e.title))}},{key:"renderContent",value:function(){var e=this.props.i18nTranslate;return c.default.createElement("div",{className:"modal-body"},c.default.createElement(v.default,{img:"error",size:80}),c.default.createElement("div",{className:"technical-problem-description"},c.default.createElement("div",null,this.t(e.description)),c.default.createElement("div",null,this.t(e.action))),c.default.createElement(g.default,{style:"apply-alter",size:"medium",onClick:this.onClickEventHandler},this.t(e.button)))}}]),t}(p.default);E.defaultProps=s({},p.default.defaultProps,{titlePosition:"outside",isCloseBtnShown:!0,isWrapperCloseDisabled:!0,className:"technical-problem-modal"});var y=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,d.connect)(y)(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(53),v=r(h),E=n(10),y=r(E),b=n(17),_=r(b),S=n(5),O=n(7),P=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.signUpClickHandler=function(){var e=r.props.triggerSource;r.props.emitButtonEvent(S.APP_BUTTONS.GIVEAWAY_MODAL_REGISTER,{triggerSource:e})},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderContent",value:function(){return f.default.createElement("div",{className:"modal-body","data-component-name":"TokensGiveawayModal"},f.default.createElement("div",{className:"picture-wrapper"}),f.default.createElement("div",{className:"description"},f.default.createElement("div",{className:"title"},this.t("tokensGiveawayModal.title")),f.default.createElement("div",{className:"steps"},f.default.createElement("div",{className:"step-row"},f.default.createElement("div",{className:"step-number"},"1"),f.default.createElement("div",{className:"step-description-wrapper"},f.default.createElement("div",{className:"step-title"},this.t("tokensGiveawayModal.steps.createAccount.title")),f.default.createElement("div",{className:"step-description"},this.t("tokensGiveawayModal.steps.createAccount.description")))),f.default.createElement("div",{className:"step-row"},f.default.createElement("div",{className:"step-number"},"2"),f.default.createElement("div",{className:"step-description-wrapper"},f.default.createElement("div",{className:"step-title"},this.t("tokensGiveawayModal.steps.joinModelsRoom.title")),f.default.createElement("div",{className:"step-description"},f.default.createElement(_.default,{elements:{strong:f.default.createElement("strong",null)},messageId:"tokensGiveawayModal.steps.joinModelsRoom.description"})))),f.default.createElement("div",{className:"step-row"},f.default.createElement("div",{className:"step-number"},"3"),f.default.createElement("div",{className:"step-description-wrapper"},f.default.createElement("div",{className:"step-title"},this.t("tokensGiveawayModal.steps.win.title")),f.default.createElement("div",{className:"step-description"},f.default.createElement(_.default,{elements:{strong:f.default.createElement("strong",null)},messageId:"tokensGiveawayModal.steps.win.description"}))))),f.default.createElement(y.default,{className:"signup",style:"apply-alter",size:"large",onClick:this.signUpClickHandler},this.t("tokensGiveawayModal.signUpButtonText"))))}}]),t}(v.default),T={emitButtonEvent:g.emitButtonEvent};P.propTypes=s({triggerSource:c.default.string},(0,O.getActionPropTypes)(T)),P.defaultProps=s({},v.default.defaultProps,{className:"tokens-giveaway-modal",titlePosition:"outside"});var A=function(e){return(0,m.bindActionCreators)(T,e)};t.default=(0,p.connect)(null,A)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(31),v=n(4),E=n(9),y=n(53),b=r(y),_=n(152),S=r(_),O=n(8),P=r(O),T=n(39),A=r(T),C=n(5),I=n(7),w=n(27),N=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.subscribeClickHandler=function(){r.props.emitButtonEvent(C.APP_BUTTONS.USER_LEVELS_MODAL_MAKE_ME_GOLD)},r.renewClickHandler=function(){r.props.emitButtonEvent(C.APP_BUTTONS.USER_LEVELS_MODAL_RENEW)},r.cancelSubscribeHandler=function(){r.props.routerPush("/gold-membership/unsubscribe")},r.readMoreClickHandler=function(e){e.stopPropagation()},r.renderHelpIcon=function(e){return"invisibleMode"!==e?null:m.default.createElement(S.default,{className:"features-help-wrapper"},m.default.createElement("span",{className:"features-help-header"},r.t("userLevels.features.invisibleMode")),m.default.createElement("span",{className:"features-help-description"},r.t("userLevels.featuresDescription.invisibleMode")))},i=n,o(r,i)}return i(t,e),c(t,[{key:"getUserLevel",value:function(){var e=this.props.currentUser;return e?e.isGoldPermanent?"goldPermanent":e.isGoldSubscriber?w.USER_LEVELS.GOLD:e.isGreen?w.USER_LEVELS.GREEN:e.isRegular?w.USER_LEVELS.REGULAR:null:"guest"}},{key:"renderFeatures",value:function(e){var t=this;if(!(0,l.default)(w.USER_LEVELS,e))throw new Error("Unavailable user level given: "+e);return w.FEATURES_LIST.map(function(n,r){var a="user-levels-"+n+"-"+e,o=w.USER_FEATURES[e][r],i=void 0;switch(o){case w.LEVELS_OF_AVAILABILITY.FULL:i=t.t("userLevels.fullAccess");break;case w.LEVELS_OF_AVAILABILITY.NOT_AVAILABLE:i=t.t("userLevels.notAvailable");break;case w.LEVELS_OF_AVAILABILITY.PARTIAL:i=t.t("userLevels.limitedAccess");break;default:throw new Error("Unknown user feature availability given: "+o)}var s=(0,l.default)([w.LEVELS_OF_AVAILABILITY.FULL,w.LEVELS_OF_AVAILABILITY.PARTIAL],o);return m.default.createElement("div",{className:"features-item",key:a+"-"+r},m.default.createElement("div",{className:"feature-label-wrapper"},m.default.createElement("div",{className:"feature-label","data-label":t.t("userLevels.features."+n)}),t.renderHelpIcon(n)),m.default.createElement("div",{className:"icon-wrapper",id:a},t.renderIf(s,m.default.createElement(P.default,{img:o===w.LEVELS_OF_AVAILABILITY.FULL?"check-1":"check-2",className:t.c({"not-full":o===w.LEVELS_OF_AVAILABILITY.PARTIAL})}),m.default.createElement(P.default,{img:"close-5"})),m.default.createElement(A.default,{isMobileRelative:!1,placement:"top",targetId:a},i)))})}},{key:"renderGoldButton",value:function(){var e=this.props.currentUser,t=this.hasGoldMembership;if(e&&(e.isGoldPermanent||e.isModel||e.isStudio))return null;if(t)return m.default.createElement("div",{className:"action-button-wrapper unsubscribe"},m.default.createElement("span",{onClick:this.cancelSubscribeHandler},this.t("userLevels.cancelMembership")));var n=e&&e.isGoldSubscriber&&!e.isRebillEnabled;return n&&!e.mayRenewRebill?null:m.default.createElement("div",{className:"action-button-wrapper subscribe"},m.default.createElement("span",{onClick:n?this.renewClickHandler:this.subscribeClickHandler},this.t(n?"userLevels.renew":"userLevels.makeMeGold")))}},{key:"renderUserLevel",value:function(){var e=this.props,t=e.faqLabel,n=e.userLevelsWikiUrl,r=this.getUserLevel();return r?m.default.createElement("div",{className:"description"},this.t("userLevels.description"),m.default.createElement("span",{className:"user-status-name"},m.default.createElement("div",{className:this.c("user-status",r)},this.t("userLevels.status."+r)),m.default.createElement(S.default,{className:"user-status-info"},this.t("userLevels.statusHelp",{label:t}),m.default.createElement("div",{className:"readMore",onTouchStart:this.readMoreClickHandler},m.default.createElement("a",{href:n,target:"_blank"},this.t("userLevels.readMore")))))):null}},{key:"renderContent",value:function(){var e=this,t=this.props,n=t.faqLabel,r=t.userLevelsWikiUrl;return m.default.createElement("div",{className:"modal-body full","data-component-name":"UserLevelsModal"},m.default.createElement("h2",{className:"title"},this.t("userLevels.title")),this.renderUserLevel(),m.default.createElement("div",{className:"wrapper"},m.default.createElement("div",{className:"column-wrapper"},m.default.createElement("div",{className:"column"},m.default.createElement("div",{className:"info"}),m.default.createElement("div",{className:"features"},w.FEATURES_LIST.map(function(t){return m.default.createElement("div",{className:"features-item",key:t},e.renderHelpIcon(t),e.t("userLevels.features."+t))})))),m.default.createElement("div",{className:"column-wrapper"},m.default.createElement("div",{className:"column"},m.default.createElement("div",{className:"info"},m.default.createElement("div",{className:"icon-wrapper"},m.default.createElement(P.default,{img:"user-guest"})),m.default.createElement("div",{className:"type"},this.t("userLevels.guests")),m.default.createElement("div",{className:"sub"},this.t("userLevels.anonymous"))),m.default.createElement("div",{className:"features"},this.renderFeatures(w.USER_LEVELS.GUEST)))),m.default.createElement("div",{className:"column-wrapper"},m.default.createElement("div",{className:"column"},m.default.createElement("div",{className:"info"},m.default.createElement("div",{className:"icon-wrapper"},m.default.createElement(P.default,{img:"user-regular"})),m.default.createElement("div",{className:"type"},this.t("userLevels.regulars")),m.default.createElement("div",{className:"sub"},this.t("userLevels.registered"),m.default.createElement(S.default,null,this.t("userLevels.regularsTypes",{site:n}),m.default.createElement("div",{className:"readMore",onTouchStart:this.readMoreClickHandler},m.default.createElement("a",{href:r,target:"_blank"},this.t("userLevels.readMore")))))),m.default.createElement("div",{className:"features"},this.renderFeatures(w.USER_LEVELS.REGULAR)))),m.default.createElement("div",{className:"column-wrapper"},m.default.createElement("div",{className:"column"},m.default.createElement("div",{className:"info"},m.default.createElement("div",{className:"icon-wrapper"},m.default.createElement(P.default,{img:"user-green"})),m.default.createElement("div",{className:"type"},this.t("userLevels.greens")),m.default.createElement("div",{className:"sub"},this.t("userLevels.registeredWithTokens"))),m.default.createElement("div",{className:"features"},this.renderFeatures(w.USER_LEVELS.GREEN)))),m.default.createElement("div",{className:"column-wrapper"},m.default.createElement("div",{className:"column"},m.default.createElement("div",{className:"info"},m.default.createElement("div",{className:"icon-wrapper"},m.default.createElement(P.default,{img:"user-gold"})),m.default.createElement("div",{className:"type"},this.t("userLevels.golds")),m.default.createElement("div",{className:"sub"},this.t("userLevels.subscribedToGoldMembership"))),m.default.createElement("div",{className:"features"},this.renderFeatures(w.USER_LEVELS.GOLD)),this.renderGoldButton(),m.default.createElement("div",{className:"column-border"})))))}},{key:"hasGoldMembership",get:function(){var e=this.props.currentUser;if(!e)return!1;var t=e.isGoldSubscriber,n=e.isRebillEnabled;return t&&n}}]),t}(b.default),R={emitButtonEvent:E.emitButtonEvent,routerPush:h.push};N.propTypes=u({},b.default.propTypes,{currentUser:f.default.shape({isGold:f.default.bool,isRebillEnabled:f.default.bool}),userLevelsWikiUrl:f.default.string.isRequired},(0,I.getActionPropTypes)(R)),N.defaultProps=u({},b.default.defaultProps,{className:"user-levels-modal",titlePosition:"outside"});var M=function(e){return(0,v.bindActionCreators)(R,e)},L=function(e){var t=e.config;return{userLevelsWikiUrl:t.data.links.levels,faqLabel:t.whiteLabelId?"xHamsterLive":"Stripchat"}};t.default=(0,g.connect)(L,M)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(85),l=r(s),u=n(35),c=r(u),d=n(145),f=r(d),p=n(6),m=r(p),g=n(116),h=r(g),v=n(273),E=r(v),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=n(1),S=r(_),O=n(0),P=r(O),T=n(2),A=n(4),C=n(9),I=n(53),w=r(I),N=n(8),R=r(N),M=n(7),L=n(190),k=n(1205),D=r(k),U=n(609),j=r(U),F=n(191),B=n(100),H=n(38),V=n(166),G=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:function(e,t){return e.videoId!==t.videoId},action:function(e){var t=e.videoId;r.selectVideo(t)}},{update:function(e,t){return!1===e.isEmailVerified&&!0===t.isEmailVerified},action:function(e){var t=e.videoToWatch;F.VIDEO_ACCESS_MODES.VERIFIED_USERS===t.accessMode&&r.selectVideo(t.id)}},{update:B.hasJustBecomeFriends,action:function(e){var t=e.videoToWatch;F.VIDEO_ACCESS_MODES.FRIENDS===t.accessMode&&r.selectVideo(t.id)}}],r.updatePosition=c.default,r.selectVideo=function(e){var t=r.props,n=t.isOwnProfile,a=t.user;r.props.selectVideo(a,e,n)},r.thumbClickHandler=function(e){e.stopPropagation();var t=e.currentTarget.dataset,n=t.videoId;t.hasFailedProcessing||r.selectVideo(Number(n))},r.nextVideoClickHandler=function(){var e=r.props,t=e.videos,n=e.videoToWatch,a=(0,E.default)(t,function(e){return e.id===n.id}),o=t[a+1],i=o?o.id:(0,h.default)(t).id;r.selectVideo(i)},r.prevVideoClickHandler=function(){var e=r.props,t=e.videos,n=e.videoToWatch,a=(0,E.default)(t,function(e){return e.id===n.id}),o=t[a-1],i=o?o.id:(0,f.default)(t).id;r.selectVideo(i)},i=n,o(r,i)}return i(t,e),b(t,[{key:"renderTitle",value:function(){var e=this.props.videoToWatch;return e?e.title:null}},{key:"renderFooterContent",value:function(){var e=this.props,t=e.isOwnProfile,n=e.user,r=e.videos,a=e.videoToWatch;return P.default.createElement("div",{className:"videos-list-container"},P.default.createElement(j.default,{isOwnProfile:t,selectedVideoId:a.id,shouldPreventUploader:!0,smartXScrolling:!0,user:n,videos:r,thumbClickHandler:this.thumbClickHandler}))}},{key:"renderUnderVideoContent",value:function(){var e=this.props.videoToWatch;return e?P.default.createElement("div",{className:"under-video-content"},P.default.createElement("div",{className:"under-video-content-right"},P.default.createElement(R.default,{img:"spy-on",size:18}),P.default.createElement("span",null,this.t("videos.viewsCount",{count:e.viewsCount})))):null}},{key:"renderContent",value:function(){var e=this.props,t=e.user,n=e.videoToWatch,r=e.videos,a=r.length>1||n&&n.id!==(0,m.default)(r,"[0].id");return P.default.createElement("div",{className:"watch-video-modal-content","data-component-name":"WatchVideoModal"},P.default.createElement("div",{className:"video-container"},this.renderIf(a,P.default.createElement("span",{className:"video-container-nav-prev",onClick:this.prevVideoClickHandler},P.default.createElement(R.default,{img:"prev-small",size:30}))),P.default.createElement(D.default,{user:t}),this.renderIf(a,P.default.createElement("span",{className:"video-container-nav-next",onClick:this.nextVideoClickHandler},P.default.createElement(R.default,{img:"next-small",size:30})))),this.renderUnderVideoContent())}}]),t}(w.default),x={emitButtonEvent:C.emitButtonEvent,selectVideo:L.selectVideo};G.propTypes=y({},w.default.propTypes,{isOwnProfile:S.default.bool.isRequired,failedAccessMode:S.default.oneOf((0,l.default)(F.VIDEO_ACCESS_MODES)),user:S.default.object.isRequired,videoId:S.default.number.isRequired,videos:S.default.array.isRequired},(0,M.getActionPropTypes)(x)),G.defaultProps=y({},w.default.defaultProps,{className:"watch-video-modal",titlePosition:"outside",closePosition:"top"});var W=(0,V.createFilterableVideosSelector)(function(e){var t=e.status;return!t||t===F.VIDEO_STATUSES.READY}),Y=function(e,t){var n=e.auth.currentUser,r=e.userVideos.videoToWatch,a=r||(0,V.getVideoByIdConsideringOwner)(e,t);return{currentUser:n,failedAccessMode:(0,V.getFailedAccessModeSelector)(e,t),isEmailVerified:(0,H.getIsEmailVerified)(e),isMyFriend:(0,B.getIsMyFriend)(e,t.user.id),videoToWatch:a,videos:W(e,t)}},K=function(e){return(0,A.bindActionCreators)(x,e)};t.default=(0,T.connect)(Y,K)(G)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),u=r(l),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(9),y=n(3),b=r(y),_=n(10),S=r(_),O=n(17),P=r(O),T=n(8),A=r(T),C=n(5),I=n(7),w=n(188),N=n(384),R=r(N),M=n(191),L=n(166),k=M.VIDEO_ACCESS_MODES.FRIENDS,D=M.VIDEO_ACCESS_MODES.PAID,U=M.VIDEO_ACCESS_MODES.VERIFIED_USERS,j=function(e,t){return!0===e.isLostVideo&&!1===t.isLostVideo},F=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={shouldPreventAutoplay:!1},r.propsUpdateToActionsMap=[{update:["video","isLostVideo"],action:function(e){return r.setState({shouldPreventAutoplay:j(r.props,e)})}}],r.getAccessClickHandler=function(){var e=r.props,t=e.user,n=e.video;r.props.emitButtonEvent(C.APP_BUTTONS.VIDEO_GET_ACCESS,{user:t,video:n})},r.goToSettingsClickHandler=function(){r.props.emitButtonEvent(C.APP_BUTTONS.VIDEO_GO_SETTINGS)},r.signUpClickHandler=function(){var e=r.props.user;r.props.emitButtonEvent(C.APP_BUTTONS.VIDEO_SIGNUP,{user:e})},a=n,i(r,a)}return s(t,e),d(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.video,n=this.props.video;if(!n||!t)return!0;if(j(this.props,e))return!0;var r=Boolean(n.videoUrl),a=t.id===this.lastAccessedVideoId,o=t.id===n.id;return!r&&!a||!o}},{key:"componentDidUpdate",value:function(){var e=this.props.video;this.lastAccessedVideoId=(0,u.default)(e,"videoUrl")?e.id:null}},{key:"getIsVideoAvailable",value:function(){var e=this.props,t=e.video,n=e.isLostVideo;return Boolean(t&&t.videoUrl&&!n)}},{key:"renderVideoUnavailability",value:function(){var e=this.props,t=e.currentUser,n=e.isLostVideo,r=e.user,o=e.video,i=o.accessMode,s=o.cost,l=o.title,u="videos.accessDenied",d=void 0,f=void 0,p=void 0,m=void 0,h=void 0;if(n)d={img:"trash-in-circle"},f=g.default.createElement(P.default,{messageId:"videos.videoWasDeleted",parameters:{title:l}});else switch(i){case D:var v=!t||!t.isStudio&&!t.isModel,E=v?D:"paidNonViewer";d={img:v?"lock-in-circle":"error"},f=g.default.createElement(P.default,{messageId:u+"."+E+".heading",choiceParameter:"cost",parameters:{cost:s},elements:{amount:g.default.createElement("strong",null,s)}}),p=g.default.createElement(P.default,{messageId:u+"."+E+".body",elements:{title:g.default.createElement("strong",null,(0,w.insertInvisibleWordBreaks)(l))}}),v&&(m={style:"apply-alter",onClick:this.getAccessClickHandler,text:this.t("button.getAccess")});break;case U:var y=t?U:"verifiedUnregistered";d={img:t?"mail-filled":"user-verified-in-circle"},f=t?null:g.default.createElement(P.default,{messageId:u+"."+y+".heading"}),p=g.default.createElement(P.default,{messageId:u+"."+y+".body"}),m={onClick:t?this.goToSettingsClickHandler:this.signUpClickHandler,style:"auth-banner",text:this.t(t?"button.goToSettings":"button.signUp")};break;case k:d={img:"users-in-circle"},f=g.default.createElement(P.default,{messageId:u+"."+i+".heading"}),p=g.default.createElement(P.default,{messageId:u+"."+i+".body",elements:{userName:g.default.createElement("strong",null,r.username)}}),h=g.default.createElement(R.default,{uniqueName:C.APP_BUTTONS.VIDEO_FRIENDSHIP,shouldHideRemovalState:!0,size:"medium",style:"auth-banner",user:r})}return g.default.createElement("div",{className:"access-denied-wrapper"},g.default.createElement("div",{className:"access-denied-cover",style:{backgroundImage:"url("+o.microCoverUrl+")"}}),g.default.createElement("div",{className:"access-denied-content"},this.renderIf(d,g.default.createElement(A.default,c({className:"access-denied-icon",size:100},d))),this.renderIf(f,g.default.createElement("div",{className:"access-denied-heading"},f)),this.renderIf(p,g.default.createElement("div",{className:"access-denied-body"},p)),g.default.createElement("div",{className:"access-denied-btn-row"},this.renderIf(m,function(){var e=m,t=e.text,n=a(e,["text"]);return g.default.createElement(S.default,c({size:"medium"},n),t)}),this.renderIf(h,h))))}},{key:"render",value:function(){var e=this.props.video,t=this.state.shouldPreventAutoplay;return e?this.getIsVideoAvailable()?g.default.createElement("video",{src:e.videoUrl,controls:!0,autoPlay:!t,"data-component-name":"StripVideoPlayer"}):this.renderVideoUnavailability():null}}]),t}(b.default),B={emitButtonEvent:E.emitButtonEvent};F.propTypes=c({currentUser:p.default.object,isLostVideo:p.default.bool.isRequired,user:p.default.object.isRequired,video:p.default.object},(0,I.getActionPropTypes)(B));var H=function(e){return{currentUser:e.auth.currentUser,video:e.userVideos.videoToWatch,isLostVideo:(0,L.getHasLostVideoToWatch)(e)}},V=function(e){return(0,v.bindActionCreators)(B,e)};t.default=(0,h.connect)(H,V)(F)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(35),s=r(i),l=n(15),u=r(l),c=n(1),d=r(c),f=n(0),p=r(f),m=n(10),g=r(m),h=n(17),v=r(h),E=n(8),y=r(E),b=n(67),_=n(191),S=n(166),O=(o={},a(o,_.VIDEO_ACCESS_MODES.FRIENDS,"users"),a(o,_.VIDEO_ACCESS_MODES.VERIFIED_USERS,"user-verified"),a(o,_.VIDEO_ACCESS_MODES.PAID,"lock-1"),o),P=function(e){var t=u.default.duration(e,"seconds"),n=u.default.utc(t.asMilliseconds()).format("H:mm:ss"),r=n.split(":");return 0===Number(r[0])?(r.shift(),r.join(":")):n},T=function(){return p.default.createElement("div",{className:"deleted-video-overlay"},p.default.createElement(y.default,{img:"trash",size:26}),p.default.createElement(v.default,{className:"deleted-video-overlay-text",messageId:"deleted"}))},A=function(e,t,n,r){return p.default.createElement("div",{className:"video-controls"},(0,b.renderIf)(!r,p.default.createElement("div",{className:"video-controls-icon-wrapper",onClick:t,"data-video-id":e},p.default.createElement(y.default,{img:"settings",size:14}))),p.default.createElement("div",{className:"video-controls-icon-wrapper",onClick:n,"data-video-id":e},p.default.createElement(y.default,{img:"close-5",size:12})))},C=function(e,t){return p.default.createElement(g.default,{style:"pale",display:"block",onClick:t,"data-video-id":e},p.default.createElement(y.default,{img:"recovery"}),p.default.createElement(v.default,{messageId:"videos.restore"}))},I=function(e,t){return p.default.createElement(g.default,{display:"block",style:"pale",onClick:t,"data-video-id":e},p.default.createElement(v.default,{messageId:"tryAgain"}))},w=function(){return p.default.createElement("div",{className:"processing-overlay"},p.default.createElement(y.default,{img:"limit",size:36}),p.default.createElement(v.default,{className:"processing-overlay-text",messageId:"videos.processingStatus"}))},N=function(){return p.default.createElement("div",{className:"failed-overlay"},p.default.createElement(y.default,{img:"error",size:36}),p.default.createElement(v.default,{className:"failed-overlay-text",messageId:"videos.processingFailed"}))},R=function(e){return p.default.createElement("div",{className:"videos-list-item"},p.default.createElement("div",{className:"video-uploader",onClick:e},p.default.createElement("div",{className:"video-uploader-content"},p.default.createElement(y.default,{size:28,img:"plus-unframed"}),p.default.createElement(v.default,{messageId:"videos.uploadVideo",className:"video-uploader-text"}))))},M=function(e,t,n,r){var a="contentAccessModes.viewerThumbLabels",o=e.accessMode,i=e.cost,s=void 0,l=void 0;switch(r){case _.VIDEO_ACCESS_MODES.PAID:s=p.default.createElement(y.default,{size:16,img:t}),l=p.default.createElement(v.default,{messageId:a+"."+r,parameters:{cost:i},elements:{accent:p.default.createElement("span",{className:"cost-accent"})}});break;case _.VIDEO_ACCESS_MODES.VERIFIED_USERS:var u=n?"mail-filled":t,c=n?r:"registered";s=p.default.createElement(y.default,{size:40,img:u}),l=p.default.createElement(v.default,{messageId:a+"."+c});break;case _.VIDEO_ACCESS_MODES.FRIENDS:s=p.default.createElement(y.default,{size:40,img:t}),l=p.default.createElement(v.default,{messageId:a+"."+r})}return s||l?p.default.createElement("div",{className:(0,b.classNames)(["video-access-viewer",o])},p.default.createElement("div",{className:"video-access-viewer-inner"},s,p.default.createElement("span",{className:"video-access-viewer-text"},l))):null},L=function(e,t,n,r){var a=e.accessMode,o=e.cost,i=O[a];return t&&a!==_.VIDEO_ACCESS_MODES.FREE?p.default.createElement("div",{className:"video-access-own"},p.default.createElement(y.default,{img:i,size:14}),p.default.createElement(v.default,{className:"video-access-own-text",messageId:"contentAccessModes.ownerThumbLabels."+a,elements:{cost:p.default.createElement("strong",null,o)},choiceParameter:"cost",parameters:{cost:o}})):M(e,i,n,(0,S.getFailedAccessMode)(e,n,r))},k=function(e){var t=e.currentUser,n=e.isDeleted,r=e.isEditMode,a=e.isLost,o=e.isMyFriend,i=e.isOwnProfile,s=e.isPlaying,l=e.isUploader,u=e.selectedVideoId,c=e.video,d=e.deleteClickHandler,f=e.recoveryClickHandler,m=e.settingsClickHandler,g=e.thumbClickHandler,h=e.thumbMouseEnterHandler,v=e.thumbMouseLeaveHandler,E=e.tryAgainClickHandler,S=e.uploaderClickHandler,O=e.listItemRefHandler,M=e.videoRefHandler;if(l)return R(S);var k=c.coverUrl,D=c.duration,U=c.id,j=c.status,F=c.title,B=c.trailerUrl,H=c.viewsCount,V=j===_.VIDEO_STATUSES.PROCESSING,G=j===_.VIDEO_STATUSES.ERROR,x=u===U;return p.default.createElement("div",{className:(0,b.classNames)("videos-list-item",{deleted:n||a,error:G,selected:x}),"data-video-id":U,ref:O,"data-component-name":"VideosListItem"},p.default.createElement("div",{className:"videos-list-item-expander"},p.default.createElement("div",{className:"videos-list-item-inner"},p.default.createElement("div",{className:"video-thumb",onMouseEnter:h,onMouseLeave:v,onClick:g,"data-video-id":U,"data-is-processing":V||null,"data-has-failed-processing":G||null,"data-is-lost":a||null},p.default.createElement("div",{className:"content-wrapper"},p.default.createElement("video",{className:"trailer",style:{display:s?null:"none"},src:B,ref:M,muted:"muted",loop:"loop","data-video-id":U}),(0,b.renderIf)(k,p.default.createElement("img",{style:{display:s?"none":null},src:k,className:"cover"}))),L(c,i,t,o),(0,b.renderIf)(V,w),(0,b.renderIf)(G,N),(0,b.renderIf)(r,n||a?T():A(U,m,d,G),a&&T),p.default.createElement("span",{className:"video-duration"},P(D))),p.default.createElement("div",{className:"video-under-thumb"},(0,b.renderIf)(G&&!r,function(){return I(U,E)}),(0,b.renderIf)(n,function(){return C(U,f)}),(0,b.renderIf)(!n&&!G,p.default.createElement("div",{className:"video-title"},p.default.createElement("span",{className:"video-title-text",title:F},F))),(0,b.renderIf)(!n&&!G,p.default.createElement("div",{className:"video-stats"},p.default.createElement(y.default,{img:"spy-on",size:14}),p.default.createElement("span",null,H)))))))};k.propTypes={video:d.default.object,currentUser:d.default.object,selectedVideoId:d.default.number,isDeleted:d.default.bool,isEditMode:d.default.bool,isLost:d.default.bool,isMyFriend:d.default.bool,isOwnProfile:d.default.bool,isUploader:d.default.bool,isPlaying:d.default.bool,deleteClickHandler:d.default.func,recoveryClickHandler:d.default.func,settingsClickHandler:d.default.func,thumbClickHandler:d.default.func,thumbMouseEnterHandler:d.default.func,thumbMouseLeaveHandler:d.default.func,tryAgainClickHandler:d.default.func,uploaderClickHandler:d.default.func,listItemRefHandler:d.default.func,videoRefHandler:d.default.func},k.defaultProps={isDeleted:!1,isEditMode:!1,isLost:!1,isMyFriend:!1,isOwnProfile:!1,isPlaying:!1,isUploader:!1,thumbClickHandler:s.default,thumbMouseEnterHandler:s.default,thumbMouseLeaveHandler:s.default,tryAgainClickHandler:s.default,videoRefHandler:s.default},t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(0),p=r(f),m=n(1),g=r(m),h=n(2),v=n(4),E=n(53),y=r(E),b=n(22),_=r(b),S=n(1208),O=r(S),P=n(7),T=n(52),A=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.iframeMessageHandler=function(e){r.props.handleIframeBillingMessage(e.data)},r.renderPurchasing=function(){var e=r.props,t=e.options,n=e.triggerSource,a=e.user,o={triggerSource:n,modelId:(0,l.default)(a,"id")};return t&&t.methods?p.default.createElement(O.default,{triggerData:o}):null},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentWillMount",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this),this.registerEventListener(window,"message",this.iframeMessageHandler),this.props.loadPurchaseOptions()}},{key:"componentDidMount",value:function(){var e=this.props;(0,e.togglePurchaseModalOpenState)(!0,e.triggerSource),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.props.resetPurchase(),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"renderTitle",value:function(){return this.t("buyTokens.buyTokens")}},{key:"renderContent",value:function(){var e=this.props.isLoading;return p.default.createElement("div",{className:"modal-body-wrapper","data-component-name":"PurchaseTokensModal"},p.default.createElement("div",{className:"modal-body purchase-tokens-modal"},this.renderIf(e,p.default.createElement(_.default,{isCentered:!0}),this.renderPurchasing)))}}]),t}(y.default),C={handleIframeBillingMessage:T.handleIframeBillingMessage,loadPurchaseOptions:T.loadPurchaseOptions,resetPurchase:T.resetPurchase,togglePurchaseModalOpenState:T.togglePurchaseModalOpenState};A.propTypes=u({},y.default.propTypes,{isLoading:g.default.bool.isRequired,options:g.default.oneOfType([g.default.arrayOf(g.default.object),g.default.shape({methods:g.default.object})]),triggerSource:g.default.string,user:g.default.shape({id:g.default.number})},(0,P.getActionPropTypes)(C)),A.defaultProps=u({},y.default.defaultProps,{className:"buy-tokens-modal",isWrapperCloseDisabled:!0,titlePosition:"outside"});var I=function(e){return(0,v.bindActionCreators)(C,e)},w=function(e){var t=e.tokens;return{isLoading:t.isLoading,options:t.options}};t.default=(0,h.connect)(w,I)(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),u=n(4),c=n(1),d=r(c),f=n(0),p=r(f),m=n(3),g=r(m),h=n(52),v=n(88),E=n(1209),y=r(E),b=n(1215),_=r(b),S=n(1216),O=r(S),P=n(1218),T=r(P),A=n(1219),C=r(A),I=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.renderStep=function(){var e=r.props,t=e.currentWizardStep,n=e.triggerData;switch(t){case v.WIZARD_STEPS.TOKENS_PACKAGES:return p.default.createElement(y.default,{triggerData:n});case v.WIZARD_STEPS.AUTH:return p.default.createElement(O.default,{triggerData:n});case v.WIZARD_STEPS.BILLING:return p.default.createElement(T.default,null);case v.WIZARD_STEPS.SUCCESS:return p.default.createElement(_.default,null);case v.WIZARD_STEPS.ERROR:return p.default.createElement(C.default,null);default:return null}},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"tokens-wizard-root","data-component-name":"TokensWizard"},this.renderStep())}}]),t}(g.default),w={goToWizardStep:h.goToWizardStep};I.propTypes={triggerData:d.default.shape({triggerSource:d.default.string,modelId:d.default.number})},I.defaultProps={shouldRenderGiftCardLayout:!1};var N=function(e){return{currentWizardStep:e.tokens.currentWizardStep}},R=function(e){return(0,u.bindActionCreators)(w,e)};t.default=(0,l.connect)(N,R)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(3),y=r(E),b=n(10),_=r(b),S=n(595),O=r(S),P=n(7),T=n(21),A=n(52),C=n(1210),I=r(C),w=n(1211),N=r(w),R=n(1213),M=r(R),L=n(1214),k=r(L),D=n(612),U=r(D),j=n(88),F=n(148),B=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.continueButtonId="continue_button_id",r.continueClickHandler=function(){r.props.goToWizardStep(j.WIZARD_STEPS.AUTH)},r.renderTokens=function(){var e=r.props,t=e.billings,n=e.chosenBilling,a=e.chosenMethod,o=e.chosenPackage,i=e.getIsMobileLayout,s=e.hasPromoExpired,l=e.initiatedPromoName,u=e.isChristmasPromoActive,c=e.isChristmasPromoEnabled,d=e.isNewYearPromoActive,f=e.methods,p=e.mobileStep,m=e.triggerData,h=e.visiblePackages,v="giftcard"===a.name,E=v&&(p===j.MOBILE_STEPS.PACKAGE&&i||!i),y="christmas2017"===l&&!u,b="newYear2018"===l&&!d;return g.default.createElement("div",{className:"buy-tokens"},r.renderIf(s,function(){return g.default.createElement("div",{className:"notification"},r.t("buyTokens.hasPromoExpired"))}),r.renderIf(y,function(){return g.default.createElement("div",{className:"notification"},r.t("buyTokens."+(c?"hasChristmasPromoExpired":"hasPromoExpired")))}),r.renderIf(b,function(){return g.default.createElement("div",{className:"notification"},r.t("buyTokens.hasPromoExpired"))}),g.default.createElement(k.default,{triggerData:m}),g.default.createElement("div",{className:"wrapper"},g.default.createElement("div",{className:"row"},g.default.createElement("div",{className:"column"},g.default.createElement(I.default,{methods:f,chosenMethod:a})),g.default.createElement("div",{className:"column"},g.default.createElement(N.default,{chosenBilling:n,chosenPackage:o,visiblePackages:h,shouldRenderGiftCardLayout:E}),g.default.createElement(M.default,{billings:t,chosenBilling:n,chosenMethod:a,shouldRenderGiftCardLayout:E})))),g.default.createElement("div",{className:"controls"},g.default.createElement(_.default,{id:r.continueButtonId,onClick:r.continueClickHandler,size:"large"},r.t("button.continue"))),g.default.createElement(U.default,{chosenPackage:o}),g.default.createElement("div",{className:"note note-sales-agents"},g.default.createElement(O.default,null)))},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.isLoggedIn&&this.props.sendStats("show")}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.billings,n=e.getIsMobileLayout,r=e.purchaseError,a=e.mobileStep,o=1===t.length;(a===j.MOBILE_STEPS.SUBMIT||a===j.MOBILE_STEPS.BILLING&&o)&&n&&!r&&this.continueClickHandler()}},{key:"render",value:function(){var e=this.props.mobileStep;return g.default.createElement("div",{className:this.c("buy-tokens-options","mobile-step-"+e),"data-component-name":"TokensDigestFlow"},this.renderTokens())}}]),t}(y.default),H={confirmPurchase:A.confirmPurchase,goToWizardStep:A.goToWizardStep,resetPurchase:A.resetPurchase,sendStats:A.sendStats};B.propTypes=u({isLoggedIn:p.default.bool,triggerData:p.default.shape({triggerSource:p.default.string,modelId:p.default.number})},(0,P.getActionPropTypes)(H));var V=function(e){var t=e.auth,n=t.isLoggedIn,r=t.isLoggingOut,a=e.tokens,o=a.hasPromoExpired,i=a.hasPurchaseFailed,s=a.initiatedPromoName,u=a.mobileStep,c=a.purchaseError,d=(0,F.getIsPromoCampaignActive)(e,"christmas2017"),f=(0,l.default)(e,"config.data.features.christmas2017"),p=(0,F.getIsPromoCampaignActive)(e,"newYear2018:goldUsers")||(0,F.getIsPromoCampaignActive)(e,"newYear2018:nonGoldUsers");return{billings:(0,F.getSortedBillings)(e),chosenBilling:(0,F.getChosenBilling)(e),chosenMethod:(0,F.getChosenMethod)(e),chosenPackage:(0,F.getChosenPackage)(e),getIsMobileLayout:(0,T.getIsLayoutUpToM)(e),hasPromoExpired:o,hasPurchaseFailed:i,initiatedPromoName:s,isChristmasPromoActive:d,isChristmasPromoEnabled:f,isNewYearPromoActive:p,isLoggedIn:n&&!r,methods:(0,F.getSortedMethods)(e),mobileStep:u,purchaseError:c,visiblePackages:(0,F.getVisiblePackages)(e)}},G=function(e){return(0,v.bindActionCreators)(H,e)};t.default=(0,h.connect)(V,G)(B)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),l=r(s),u=n(11),c=r(u),d=n(6),f=r(d),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(0),g=r(m),h=n(2),v=n(4),E=n(3),y=r(E),b=n(17),_=r(b),S=n(152),O=r(S),P=n(40),T=r(P),A=n(52),C=n(610),I=r(C),w=n(88),N=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.methodClickHandler=function(e){var t=e.currentTarget.dataset.methodName;r.props.selectOption({optionType:"method",newValue:t,mobileStep:w.MOBILE_STEPS.PACKAGE})},r.renderMethodInfo=function(e){return"card"===e?g.default.createElement("div",{className:"option-info"},g.default.createElement(I.default,{name:"visa"}),g.default.createElement(I.default,{name:"mastercard"}),g.default.createElement(I.default,{name:"discover"}),g.default.createElement(I.default,{name:"diners"}),g.default.createElement(I.default,{name:"jcb"}),g.default.createElement(I.default,{name:"maestro"})):g.default.createElement("div",{className:"option-info"},g.default.createElement(I.default,{name:e.toLowerCase().replace(".","-")}))},r.renderMethodName=function(e){return(0,f.default)(w.METHOD_NAMES,e)||g.default.createElement(_.default,{messageId:"buyTokens.methods."+e,elements:{description:g.default.createElement("span",{className:"option-title-description"})}})},r.renderMethod=function(e){var t=r.props.chosenMethod,n=e.name,a=e.isDisabled,o=t.name===n,i="method_radio_"+n;return g.default.createElement("li",{className:r.c({selected:o,disabled:a}),key:n,onClick:a?null:r.methodClickHandler,"data-method-name":n},g.default.createElement("div",{className:"option-input"},g.default.createElement(T.default,{checked:o,disabled:a,id:i,onChange:l.default,type:"radio"}),g.default.createElement("label",{htmlFor:i},r.renderMethodName(n)),r.renderIf(a,g.default.createElement(O.default,{className:"method-disabled-tooltip",messageId:"buyTokens.methodsDisabled."+n}))),r.renderMethodInfo(n))},i=n,o(r,i)}return i(t,e),p(t,[{key:"render",value:function(){var e=this.props.methods;return g.default.createElement("div",{className:"method-list"},g.default.createElement("h4",null,this.t("buyTokens.paymentMethod")),g.default.createElement("ul",null,(0,c.default)(e,this.renderMethod)))}}]),t}(y.default),R=function(e){return(0,v.bindActionCreators)({selectOption:A.selectOption},e)};t.default=(0,h.connect)(null,R)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),l=r(s),u=n(11),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),p=n(4),m=n(1),g=r(m),h=n(0),v=r(h),E=n(3),y=r(E),b=n(236),_=r(b),S=n(152),O=r(S),P=n(17),T=r(P),A=n(1212),C=r(A),I=n(40),w=r(I),N=n(39),R=r(N),M=n(52),L=n(611),k=r(L),D=n(88),U=n(148),j=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.getPackageKeys=function(e){var t=e.purchaseType,n=e.tokensSum,r=e.promoCampaign,a=""+t+n+r;return{code:a,inputId:"package_radio_"+a}},r.packageClickHandler=function(e){var t=e.currentTarget.dataset,n=t.purchaseType,a=t.tokensSum,o=t.order,i=t.promoName;r.props.selectOption({optionType:"package",newValue:{tokensSum:a?Number(a):null,purchaseType:n,promoName:i,order:o},mobileStep:D.MOBILE_STEPS.BILLING})},r.additionalPackagesTogglerClickHandler=function(){r.props.toggleAdditionalPackagesShowing()},r.renderPackage=function(e){var t=r.props.shouldRenderGiftCardLayout,n=e.purchaseType,a=e.isPromo,o=e.promoCampaign,i=a&&("newYear2018:goldUsers"===o||"newYear2018:nonGoldUsers"===o),s=a&&"christmas2017"===o;if(n===D.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION&&a)return r.renderBlackFriday(e);if(s){var l={promoName:"christmas2017",helpTooltipText:r.t("buyTokens.christmasPromoHelpText")};return r.renderPromo(e,l)}return i?r.renderNewYear(e):t?r.renderGiftCard(e):n===D.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION?r.renderSubscription(e):n===D.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION_ONE_MONTH?r.renderSubscriptionOneMonth(e):n===D.PACKAGE_PURCHASE_TYPES.CARD_VERIFICATION?r.renderCardVerification(e):r.renderSimplePackage(e)},i=n,o(r,i)}return i(t,e),d(t,[{key:"renderToggler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"for-desktop",t=this.props,n=t.isAdditionalPackagesShown;return t.shouldShowAdditionalPackagesToggler?v.default.createElement("div",{className:this.c("show-additional-packages-toggler",e),onClick:this.additionalPackagesTogglerClickHandler},n?this.t("buyTokens.showLessPackages"):this.t("buyTokens.moreTokenPackages")):null}},{key:"renderHeading",value:function(){var e=this.props.shouldRenderGiftCardLayout;return v.default.createElement("h4",null,this.t("buyTokens."+(e?"giftCards.anyGiftCard":"tokenPackage")),this.renderToggler())}},{key:"renderPrice",value:function(e){var t=e.currencyCode,n=e.isApproximated,r=e.currencySumPrecision,a=e.currencySum,o=n?"priceAlmostEqual":"price";return this.t("buyTokens."+o+"."+t,{currency:t,price:Number(a).toFixed(r)},null,"buyTokens."+o+".default")}},{key:"renderGiftCard",value:function(e){var t=this.getPackageKeys(e),n=t.code,r=t.inputId;return v.default.createElement("li",{key:n,className:"selected",onClick:this.packageClickHandler},v.default.createElement("div",null,v.default.createElement(w.default,{checked:!0,id:r,onChange:l.default,type:"radio"}),v.default.createElement("label",{htmlFor:r},this.t("buyTokens.giftCards.title")),v.default.createElement("div",{className:"gift-cards-description"},this.t("buyTokens.giftCards.description"))))}},{key:"renderSubscription",value:function(e){var t=this.props.chosenPackage,n=e.order,r=e.purchaseType,a=e.tokensSum,o=this.getPackageKeys(e),i=o.code,s=o.inputId,u=t.purchaseType===D.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION;return v.default.createElement("li",{className:this.c({selected:u},"subscription"),key:i,onClick:this.packageClickHandler,"data-purchase-type":r,"data-tokens-sum":a,"data-order":n},v.default.createElement("div",{className:"option-input"},v.default.createElement(w.default,{checked:u,id:s,onChange:l.default,type:"radio"}),v.default.createElement("label",{htmlFor:s},this.t("buyTokens.subscriptionGolden"))),v.default.createElement("div",{className:"option-help"},v.default.createElement(_.default,{type:"question",id:"gold-membership-info"},"?"),v.default.createElement(C.default,{indentation:8,targetId:"gold-membership-info",placement:"bottom"})),v.default.createElement("div",{className:"option-info"},v.default.createElement("div",{className:"price"},this.t("buyTokens.perMonth",{price:this.renderPrice(e)}))))}},{key:"renderBlackFriday",value:function(e){var t=this.props.chosenPackage,n=e.order,r=e.purchaseType,a=e.tokensExtra,o=e.tokensSum,i=this.getPackageKeys(e),s=i.code,u=i.inputId,c=t.purchaseType===D.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION;return v.default.createElement("li",{className:this.c({selected:c},"black-friday"),key:s,onClick:this.packageClickHandler,"data-purchase-type":r,"data-tokens-sum":o,"data-order":n},v.default.createElement("div",{className:"option-input"},v.default.createElement(w.default,{checked:c,id:u,onChange:l.default,type:"radio"}),v.default.createElement("label",{htmlFor:u},this.t("buyTokens.subscriptionGolden"))),v.default.createElement("div",{className:"option-help"},v.default.createElement(O.default,{messageId:"Black Friday special offer (1 day only)"})),v.default.createElement("div",{className:"option-info"},v.default.createElement("div",{className:"price"},this.t("buyTokens.perMonth",{price:this.renderPrice(e)})),v.default.createElement("div",{className:"extra"},this.t("buyTokens.tokensExtraOnce",{tokensExtraOnce:a}))))}},{key:"renderNewYear",value:function(e){var t=this.props.chosenPackage,n=e.purchaseType,r=e.tokensExtra,a=e.tokensSum,o=e.order,i=this.getPackageKeys(e),s=i.code,u=i.inputId,c=t.order===o;return v.default.createElement("li",{className:this.c({selected:c},"new-year"),key:s,onClick:this.packageClickHandler,"data-purchase-type":n,"data-tokens-sum":a,"data-promo-name":"newYearPromo","data-order":o},v.default.createElement("div",{className:"option-input"},v.default.createElement(w.default,{checked:c,id:u,onChange:l.default,type:"radio"}),v.default.createElement("label",{htmlFor:u},v.default.createElement(T.default,{messageId:"buyTokens."+(r?"tokensPlus":"tokens"),parameters:{tokens:a,tokensExtra:r},elements:{tokensExtra:v.default.createElement("span",{className:"tokensExtra"})}}))),v.default.createElement("div",{className:"option-info"},v.default.createElement("div",{className:"price"},this.renderPrice(e)),v.default.createElement("div",{className:"extra"},this.t("buyTokens.newYearBonus"))))}},{key:"renderPromo",value:function(e,t){var n=this.props.chosenPackage,r=t.promoName,a=t.helpTooltipText,o=e.discount,i=e.order,s=e.purchaseType,u=e.tokensExtra,c=e.tokensSum,d=this.getPackageKeys(e),f=d.code,p=d.inputId,m=n.order===i,g=Math.round(100*o);return v.default.createElement("li",{className:this.c({selected:m},r),key:f+"-"+r,onClick:this.packageClickHandler,"data-purchase-type":s,"data-tokens-sum":c,"data-promo-name":r,"data-order":i},v.default.createElement("div",{className:"option-input"},v.default.createElement(w.default,{checked:m,id:p,onClick:l.default,onChange:l.default,type:"radio"}),v.default.createElement("label",{htmlFor:p},v.default.createElement(T.default,{messageId:"buyTokens."+(u?"tokensPlus":"tokens"),parameters:{tokens:c,tokensExtra:u},elements:{tokensExtra:v.default.createElement("span",{className:"tokensExtra"})}}))),this.renderIf(a,function(){return v.default.createElement("div",{className:"option-help"},v.default.createElement(O.default,{className:"badge badge-question",messageId:a}))}),v.default.createElement("div",{className:"option-info"},v.default.createElement("div",{className:"price"},this.renderPrice(e)),v.default.createElement("div",{className:"discount"},this.t("buyTokens.percentDiscount",{percent:g}))))}},{key:"renderSubscriptionOneMonth",value:function(e){var t=this.props.chosenPackage,n=e.order,r=e.purchaseType,a=e.tokensSum,o=this.getPackageKeys(e),i=o.code,s=o.inputId,u=t.purchaseType===D.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION_ONE_MONTH;return v.default.createElement("li",{className:this.c({selected:u},"subscription subscription-one-month"),key:i,onClick:this.packageClickHandler,"data-purchase-type":r,"data-tokens-sum":a,"data-order":n},v.default.createElement("div",{className:"option-input"},v.default.createElement(w.default,{checked:u,id:s,onChange:l.default,type:"radio"}),v.default.createElement("label",{htmlFor:s},this.t("buyTokens.subscriptionGolden"),v.default.createElement("div",{className:"option-input-sub"},this.t("buyTokens.oneMonth")))),v.default.createElement("div",{className:"option-help"},v.default.createElement(_.default,{type:"question",id:"gold-membership-one-month-info"},"?"),v.default.createElement(C.default,{indentation:8,targetId:"gold-membership-one-month-info",placement:"bottom"})),v.default.createElement("div",{className:"option-info"},v.default.createElement("div",{className:"price"},this.renderPrice(e))))}},{key:"renderCardVerification",value:function(e){var t=this.props.chosenPackage,n=e.currencyCode,r=e.purchaseType,a=e.tokensSum,o=this.getPackageKeys(e),i=o.code,s=o.inputId,u=t.purchaseType===D.PACKAGE_PURCHASE_TYPES.CARD_VERIFICATION,c=this.t("buyTokens.price."+n,{price:1});return v.default.createElement("li",{className:this.c({selected:u},"card-verification"),key:i,onClick:this.packageClickHandler,"data-purchase-type":r,"data-tokens-sum":a},v.default.createElement("div",{className:"option-input"},v.default.createElement(w.default,{checked:u,id:s,onChange:l.default,type:"radio"}),v.default.createElement("label",{htmlFor:s},this.t("buyTokens.creditCardVerificationPackage",{amount:D.CARD_VERIFICATION_BONUS}))),v.default.createElement("div",{className:"option-help"},v.default.createElement(_.default,{type:"question",id:"card-verification-info"},"?"),v.default.createElement(R.default,{targetId:"card-verification-info",placement:"bottom",isMobileRelative:!1},this.t("buyTokens.creditCardVerificationTooltip",{price:c}))),v.default.createElement("div",{className:"option-info"},v.default.createElement("div",{className:"price"},this.renderPrice(e))))}},{key:"renderSimplePackage",value:function(e){var t=this,n=this.props.chosenPackage,r=e.currencySum,a=e.currencySumFull,o=e.discount,i=e.isPromo,s=e.tokensExtra,u=e.tokensSum,c=e.purchaseType,d=e.order,f=r!==a,p=this.getPackageKeys(e),m=p.inputId,g=p.code,h=n.order===d,E=void 0;if(o){var y=Math.round(100*o);E=v.default.createElement("div",{className:"discount"},this.t("buyTokens.percentDiscount",{percent:y}))}return v.default.createElement("li",{className:this.c({selected:h,promo:i}),key:g,onClick:this.packageClickHandler,"data-tokens-sum":u,"data-purchase-type":c,"data-order":d},v.default.createElement("div",{className:"option-input"},v.default.createElement(w.default,{checked:h,id:m,onChange:l.default,type:"radio"}),v.default.createElement("label",{htmlFor:m},v.default.createElement(T.default,{messageId:"buyTokens."+(s?"tokensPlus":"tokens"),parameters:{tokens:u,tokensExtra:s},elements:{tokensExtra:v.default.createElement("span",{className:"tokensExtra"})}}))),v.default.createElement("div",{className:"option-info"},this.renderIf(f,function(){return v.default.createElement("div",{className:"price-full"},t.renderPrice(e))}),v.default.createElement("div",{className:"price"},this.renderPrice(e)),this.renderIf(Boolean(E),E)))}},{key:"renderBillingCurrencies",value:function(){var e=this.props.chosenBilling.name,t=D.ACCEPTED_BILLING_CURRENCIES[e],n=e.toLowerCase()===D.BILLING_NAMES.coingate.toLowerCase();return t?v.default.createElement("div",{className:"billing-currencies"},v.default.createElement(T.default,{messageId:n?"buyTokens.weAcceptOther":"buyTokens.weAccept",elements:{items:v.default.createElement("span",null,t.join(", "))}})):null}},{key:"render",value:function(){var e=this.props.visiblePackages;return v.default.createElement("div",{className:"package-list","data-component-name":"TokensPackagesList"},this.renderHeading(),v.default.createElement(k.default,{mobileStep:D.MOBILE_STEPS.METHOD}),this.renderBillingCurrencies(),v.default.createElement("ul",null,(0,c.default)(e,this.renderPackage)),this.renderToggler("for-mobile"))}}]),t}(y.default),F={selectOption:M.selectOption,toggleAdditionalPackagesShowing:M.toggleAdditionalPackagesShowing};j.propTypes={chosenBilling:g.default.shape({name:g.default.string}).isRequired,isAdditionalPackagesShown:g.default.bool.isRequired,visiblePackages:g.default.arrayOf(g.default.object).isRequired,shouldRenderGiftCardLayout:g.default.bool,shouldShowAdditionalPackagesToggler:g.default.bool.isRequired},j.defaultProps={shouldRenderGiftCardLayout:!1};var B=function(e){return{isAdditionalPackagesShown:e.tokens.isAdditionalPackagesShown,shouldShowAdditionalPackagesToggler:(0,U.getShouldShowAdditionalPackagesToggler)(e)}},H=function(e){return(0,p.bindActionCreators)(F,e)};t.default=(0,f.connect)(B,H)(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(0),l=r(s),u=n(39),c=r(u),d=["fullscreenMode","publicChat","privateMessagingWithModels","emoticonsInChat","invisibleMode","goldStatus","specialOffers"],f=function(e,t){var n=t.i18n.trans;return l.default.createElement(c.default,a({},e,{className:"gold-membership-tooltip",isMobileRelative:!1}),l.default.createElement("div",{className:"tooltip-title"},n("userLevels.titles.goldMembership")),d.map(function(e){return l.default.createElement("div",{className:"benefit",key:e},l.default.createElement("div",{className:"benefit-icon"},l.default.createElement("span",{className:"checkmark"})),l.default.createElement("div",{className:"benefit-title"},n("userLevels.features."+e)))}))};f.contextTypes={i18n:i.default.object},t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(385),l=r(s),u=n(35),c=r(u),d=n(11),f=r(d),p=n(6),m=r(p),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(0),v=r(h),E=n(2),y=n(4),b=n(3),_=r(b),S=n(17),O=r(S),P=n(8),T=r(P),A=n(40),C=r(A),I=n(39),w=r(I),N=n(52),R=n(611),M=r(R),L=n(610),k=r(L),D=n(88),U=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.billingClickHandler=function(e){var t=e.currentTarget.dataset.billingName;r.props.selectOption({optionType:"billing",newValue:t,mobileStep:D.MOBILE_STEPS.SUBMIT})},r.renderMethodName=function(e){return(0,m.default)(D.METHOD_NAMES,e)||r.t("buyTokens.methods."+e)},r.renderBillingName=function(e){return(0,m.default)(D.BILLING_NAMES,e)||r.t("buyTokens.billings."+e)},r.renderBilling=function(e){var t=r.props.chosenBilling,n=e.billedAs,a=e.name,o=a===t.name,i="billing_radio_"+a;return v.default.createElement("li",{className:r.c({selected:o}),key:a,onClick:r.billingClickHandler,"data-billing-name":a},v.default.createElement("div",{className:"option-input"},v.default.createElement(C.default,{checked:o,id:i,onChange:c.default,type:"radio"}),v.default.createElement("label",{htmlFor:i,className:"billing-label"},v.default.createElement("div",{className:"billing-name"},r.renderBillingName(a)),v.default.createElement("div",{className:"billing-billed-as"},v.default.createElement(O.default,{messageId:"buyTokens.billedAs",elements:{text:v.default.createElement("span",{className:"text"},n)}})))),v.default.createElement("div",{className:"option-info"},v.default.createElement(k.default,{name:"billing-"+a,className:"billing billing-"+a})))},r.renderGiftCardBillings=function(){return v.default.createElement("div",{className:"gift-cards-billing-info"},v.default.createElement(O.default,{messageId:"buyTokens.giftCards.billingInfo",elements:{link:v.default.createElement("a",{target:"_blank",href:"http://www.paygarden.com/faq/customers/"},"http://www.paygarden.com/faq/customers/")}}))},i=n,o(r,i)}return i(t,e),g(t,[{key:"renderInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",n="tokens_info_"+(0,l.default)(e);return v.default.createElement("div",{className:"info-container",id:n},v.default.createElement(T.default,{img:"faq",size:18}),v.default.createElement(w.default,{isMobileRelative:!1,placement:t,targetId:n},this.t(e)))}},{key:"renderSingleBillingList",value:function(){var e=this,t=this.props,n=t.chosenMethod,r=t.chosenBilling,a=n.name.toLowerCase()===D.METHOD_NAMES.sepa.toLowerCase(),o="cryptocoin"===n.name.toLowerCase(),i=n.name.toLowerCase()===r.name.toLowerCase()||r.isDirect;return v.default.createElement("div",{className:"billing-list billing-single"},this.renderIf(a,function(){return v.default.createElement("p",null,e.t("buyTokens.sepaInfo"))}),this.renderIf(!i,function(){return v.default.createElement("p",null,e.t(o?"buyTokens.cryptoBilling":"buyTokens.singleBilling",{billing:e.renderBillingName(r.name),method:e.renderMethodName(n.name)}))}),v.default.createElement("div",{className:"option-info"},v.default.createElement(k.default,{name:"billing-"+r.name,className:"billing billing-"+r.name})))}},{key:"renderDefaultBillingsList",value:function(){var e=this.props.billings;return v.default.createElement("div",{className:"billing-list"},v.default.createElement("h4",null,this.t("buyTokens.billing")),v.default.createElement(M.default,{mobileStep:D.MOBILE_STEPS.PACKAGE}),this.renderInfo("buyTokens.info.billing","top"),v.default.createElement("ul",null,(0,f.default)(e,this.renderBilling)))}},{key:"render",value:function(){var e=this.props,t=e.billings;return e.shouldRenderGiftCardLayout?this.renderGiftCardBillings():1===t.length?this.renderSingleBillingList():this.renderDefaultBillingsList()}}]),t}(_.default),j={selectOption:N.selectOption},F=function(e){return(0,y.bindActionCreators)(j,e)};t.default=(0,E.connect)(null,F)(U)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),i=n(1),s=r(i),l=n(0),u=r(l),c=n(2),d=n(67),f=n(51),p=n(5),m=n(17),g=r(m),h=n(89),v=r(h),E=n(44),y=function(e,t){var n=t.i18n,r=e.isLoggedIn,a=e.model,i=e.triggerData;if(r)return null;var s=void 0,l=void 0,c=!0,m="accent-red",h=(0,o.default)(a,"username","");switch((0,o.default)(i,"triggerSource")){case p.APP_BUTTONS.VIDEO_GET_ACCESS:l=n.trans("buyTokens.purchaseTokensReasons.notEnoughTokens"),s=n.trans("buyTokens.purchaseTokensReasons.buyVideoDescription");break;case f.AUTH_TRIGGER_SOURCES.CHAT_COMMAND_TIP:case p.APP_BUTTONS.VIEWCAM_SEND_ONLINE_TIP:case p.APP_BUTTONS.VIEWCAM_SEND_OFFLINE_TIP:l=n.trans("buyTokens.purchaseTokensReasons.notEnoughTokens"),s="buyTokens.purchaseTokensReasons.sendTipTitle";break;case p.APP_BUTTONS.VIEWCAM_START_PRIVATE:l=n.trans("buyTokens.purchaseTokensReasons.notEnoughTokens"),s="buyTokens.purchaseTokensReasons.startPrivateTitle";break;case p.APP_BUTTONS.VIEWCAM_START_SPY:l=n.trans("buyTokens.purchaseTokensReasons.notEnoughTokens"),s="buyTokens.purchaseTokensReasons.startSpyTitle";break;default:m="accent-green",l="buyTokens.purchaseTokensReasons.becomeGreenDescription",c=!1,s="buyTokens.purchaseTokensReasons.becomeGreenTitle"}return u.default.createElement("div",{className:"tokens-wizard-notice-block tokens-purchasing-reason","data-component-name":"TokensPurchasingReason"},(0,d.renderIf)(c&&a,function(){return u.default.createElement("div",{className:"tokens-purchasing-reason-user-avatar"},u.default.createElement(v.default,{user:a}))}),u.default.createElement("div",null,u.default.createElement("div",{className:"tokens-purchasing-reason-title"},u.default.createElement(g.default,{messageId:s,elements:{accent:u.default.createElement("span",{className:m})},parameters:{modelName:h}})),u.default.createElement("div",{className:"tokens-purchasing-reason-description"},n.trans(l))))};y.propTypes={isLoggedIn:s.default.bool,model:s.default.shape({id:s.default.number}),triggerData:s.default.shape({triggerSource:s.default.string,modelId:s.default.number})},y.contextTypes={i18n:s.default.object};var b=function(e,t){return{isLoggedIn:e.auth.isLoggedIn&&!e.auth.isLoggingOut,model:(0,E.getUserById)(e,(0,o.default)(t,"triggerData.modelId"))}};t.default=(0,c.connect)(b)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=n(4),d=n(1),f=r(d),p=n(0),m=r(p),g=n(9),h=n(3),v=r(h),E=n(8),y=r(E),b=n(10),_=r(b),S=n(7),O=n(88),P=n(148),T=n(60),A=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.goToSiteClickHandler=function(){r.props.endWizard(),r.props.hideModal()},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.chosenPackage.purchaseType,t=O.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION,n=O.PACKAGE_PURCHASE_TYPES.GOLD_SUBSCRIPTION_ONE_MONTH,r=e===t||e===n?"buyTokens.processed.descriptionSubscriber":"buyTokens.processed.descriptionRefill";return m.default.createElement("div",{className:"buy-tokens-processed","data-component-name":"TokensProcessed"},m.default.createElement(y.default,{img:"time-small",size:100}),m.default.createElement("h1",{className:"processed-title"},this.t("buyTokens.processed.title")),m.default.createElement("div",{className:"processed-description"},this.t(r)),m.default.createElement(_.default,{onClick:this.goToSiteClickHandler},this.t("button.ok")))}}]),t}(v.default),C={endWizard:T.endWizard,hideModal:g.hideModal};A.propTypes=s({chosenPackage:f.default.shape({purchaseType:f.default.string.isRequired})},(0,S.getActionPropTypes)(C));var I=function(e){return{chosenPackage:(0,P.getChosenPackage)(e)}},w=function(e){return(0,c.bindActionCreators)(C,e)};t.default=(0,u.connect)(I,w)(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(6),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(24),b=n(3),_=r(b),S=n(608),O=r(S),P=n(607),T=r(P),A=n(7),C=n(296),I=n(34),w=n(52),N=n(1217),R=r(N),M=n(612),L=r(M),k=n(148),D=n(88),U={LOGIN:"login",SIGNUP:"signup"},j=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:["isRecaptchaShown"],action:function(e){var t=e.isRecaptchaShown,n=document.querySelector("html");t?n.classList.remove("disable-scroll"):n.classList.add("disable-scroll")}}],r.selectAuthMode=function(e){r.setState({authMode:e})},r.renderForm=function(){var e=r.state.authMode,t=r.props.triggerData.triggerSource,n={onSuccess:function(){return r.props.goToWizardStep(D.WIZARD_STEPS.BILLING)}},a=void 0;switch(e){case U.SIGNUP:a=h.default.createElement(O.default,{action:n,submitButtonSize:"medium",submitButtonStyle:"apply",submitButtonText:r.t("buyTokens.tokensWizard.signupButtonText"),triggerSource:t});break;case U.LOGIN:a=h.default.createElement("div",null,h.default.createElement(T.default,{action:n,submitButtonSize:"medium",submitButtonStyle:"apply",submitButtonText:r.t("buyTokens.tokensWizard.loginButtonText"),triggerSource:t}),h.default.createElement("div",{className:"island-footer island-footer-centered forgot-password"},h.default.createElement(y.Link,{to:"/forgot-password",onClick:r.goToForgotPasswordHandler,className:"link forgot-password-link"},r.t("login.forgotPassword"))))}return h.default.createElement("div",{className:r.c("auth-form",{signup:e===U.SIGNUP,login:e===U.LOGIN})},a)},r.renderAuthToggler=function(){var e=r.state.authMode;return h.default.createElement("div",{className:"auth-mode-toggler-wrapper"},h.default.createElement("div",{className:r.c("auth-mode-signup",{selected:e===U.SIGNUP}),onClick:(0,l.default)(r.selectAuthMode,U.SIGNUP)},r.t("buyTokens.tokensWizard.signup")),h.default.createElement("div",{className:r.c("auth-mode-login",{selected:e===U.LOGIN}),onClick:(0,l.default)(r.selectAuthMode,U.LOGIN)},r.t("buyTokens.tokensWizard.login")))},i=n,o(r,i)}return i(t,e),f(t,[{key:"getDefaultState",value:function(){return{authMode:U.SIGNUP}}},{key:"render",value:function(){var e=this.props.chosenPackage;return h.default.createElement("div",{className:"tokens-wizard-auth","data-component-name":"TokensWizardAuth"},h.default.createElement("div",{className:"wrapper"},h.default.createElement(R.default,{chosenPackage:e}),this.renderAuthToggler(),this.renderForm(),h.default.createElement(L.default,{chosenPackage:e})))}}]),t}(_.default),F={goToWizardStep:w.goToWizardStep,performLogin:I.login,performSignUp:C.signUp};j.propTypes=d({chosenPackage:m.default.shape({purchaseType:m.default.string}),triggerData:m.default.shape({triggerSource:m.default.string,modelId:m.default.number})},(0,A.getActionPropTypes)(F));var B=function(e){var t=e.auth,n=e.config.data.showRecaptcha;return{chosenPackage:(0,k.getChosenPackage)(e),isRecaptchaShown:n||Boolean((0,c.default)(t,"loginError.details.recaptcha"))}},H=function(e){return(0,E.bindActionCreators)(F,e)};t.default=(0,v.connect)(B,H)(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(17),u=r(l),c=function(e,t){var n=t.i18n.trans,r=e.chosenPackage,a=r.currencyCode,o=r.currencySum,i=r.tokensSum;return s.default.createElement("div",{className:"tokens-wizard-notice-block tokens-wizard-chosen-package-wrapper","data-component-name":"TokensWizardChosenPackage"},s.default.createElement("div",{className:"title"},n("buyTokens.tokensWizard.youHaveChosen")),s.default.createElement("div",{className:"chosen-package"},s.default.createElement(u.default,{elements:{accent:s.default.createElement("span",{className:"accent"}),packageCost:s.default.createElement("span",null,n("buyTokens.price."+a,{price:o}))},messageId:"buyTokens.tokensWizard.chosenPackageLabel",parameters:{packageAmount:i}})),s.default.createElement("div",{className:"description"},n("buyTokens.tokensWizard.chosenPackageDescription")))};c.propTypes={chosenPackage:o.default.shape({currencyCode:o.default.string,currencySum:o.default.number})},c.contextTypes={i18n:o.default.object},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(2),u=n(22),c=r(u),d=function(e){var t=e.billingUrl;return e.isLoading?s.default.createElement(c.default,{isCentered:!0}):t?s.default.createElement("iframe",{className:"billing-iframe",src:t}):null};d.ProptTypes={billingUrl:o.default.string.isRequired,isLoading:o.default.bool.isRequired};var f=function(e){var t=e.tokens;return{billingUrl:t.billingUrl,isLoading:t.isLoading}};t.default=(0,l.connect)(f)(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),l=r(s),u=n(0),c=r(u),d=n(2),f=n(4),p=n(24),m=n(10),g=r(m),h=n(8),v=r(h),E=n(7),y=n(52),b=["options","billingUrl","preferredPackage","billingName","methodName","currentPackageTokens","currentPackageType"],_=function(e,t){var n=t.i18n,r=function(){e.resetPurchase(b)},a=function(){var t=e.purchaseError,r=(0,o.default)(t,"details.isOverflowLimit"),a=n.trans("buyTokens.tokensWizard.errorPage.title"),i=n.trans("buyTokens.tokensWizard.errorPage.description");return r?(a=n.trans("buyTokens.errors.overflowPurchaseLimit.title"),i=n.trans("buyTokens.errors.overflowPurchaseLimit.description")):t&&t.message&&(i=t.message),{title:a,description:i}}(),i=a.title,s=a.description;return c.default.createElement("div",{className:"tokens-wizard-error","data-component-name":"TokensWizardError"},c.default.createElement("div",{className:"icon-wrapper"},c.default.createElement(v.default,{img:"error",size:80})),c.default.createElement("div",{className:"title-wrapper"},i),c.default.createElement("div",{className:"description-wrapper"},s),c.default.createElement("div",{className:"button-wrapper"},c.default.createElement(g.default,{style:"nav",size:"medium",onClick:r},n.trans("buyTokens.tokensWizard.errorPage.tryAgain"))),c.default.createElement("div",{className:"link-wrapper"},c.default.createElement(p.Link,{to:"/support",target:"_blank"},n.trans("buyTokens.tokensWizard.errorPage.contactSupport"))))},S={resetPurchase:y.resetPurchase};_.propTypes=i({purchaseError:l.default.shape({details:l.default.shape(),message:l.default.string})},(0,E.getActionPropTypes)(S)),_.contextTypes={i18n:l.default.object};var O=function(e){return{purchaseError:e.tokens.purchaseError}},P=function(e){return(0,f.bindActionCreators)(S,e)};t.default=(0,d.connect)(O,P)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(379),v=n(4),E=n(370),y=n(3),b=r(y),_=n(1221),S=r(_),O=n(1222),P=r(O),T=n(613),A=r(T),C=n(297),I=r(C),w=n(1223),N=n(148),R={CardVerificationBonus:P.default},M=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:function(e,t){return!0===e.shouldShowCardDetailsPromo&&!1===t.shouldShowCardDetailsPromo},action:function(){return r.props.removeToast({id:"CardVerificationBonus"})}}],r.showInitialToasts=function(){r.props.shouldShowCardDetailsPromo&&I.default.startTimeout("toast:cardVerificationBonus",2e3,function(){return r.props.addToast({id:"CardVerificationBonus"})})},r.closeClickHandler=function(e){var t=e.currentTarget.dataset.toastId;r.props.removeToast({id:t})},a=n,i(r,a)}return s(t,e),u(t,[{key:"componentDidMount",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.showInitialToasts()}},{key:"render",value:function(){var e=this,t=this.props.toasts;return m.default.createElement(h.TransitionGroup,{className:"toast-notifications","data-component-name":"ToastNotifications"},t.map(function(t){var n=t.id,r=a(t,["id"]),o=R[n]||A.default;return m.default.createElement(S.default,{key:n,"data-component-name":"ToastNotifications"},m.default.createElement(o,l({closeClickHandler:e.closeClickHandler,id:n},r)))}))}}]),t}(b.default),L={addToast:E.addToast,removeToast:E.removeToast};M.propTypes={toasts:f.default.arrayOf(f.default.object).isRequired};var k=function(e){return{shouldShowCardDetailsPromo:(0,N.getShouldShowCardDetailsPromo)(e),toasts:(0,w.getToasts)(e)}},D=function(e){return(0,v.bindActionCreators)(L,e)};t.default=(0,g.connect)(k,D)(M)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(0),l=r(s),u=n(379),c=n(5),d=function(e){return l.default.createElement(u.CSSTransition,a({},e,{classNames:"fade-transition","data-component-name":"FadeTransition"}))};d.propTypes={children:i.default.element.isRequired,timeout:i.default.number},d.defaultProps={timeout:c.TRANSITION_FADE_DELAY},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),d=n(2),f=n(4),p=n(9),m=n(3),g=r(m),h=n(10),v=r(h),E=n(17),y=r(E),b=n(8),_=r(b),S=n(613),O=r(S),P=n(5),T=n(88),A=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.acceptClickHandler=function(){var e=r.props.id;r.props.emitButtonEvent(P.APP_BUTTONS.TOAST_CARD_VERIFICATION,{id:e})},r.getToastProps=function(){return{icon:c.default.createElement(_.default,{img:"tokens-1",size:23}),message:c.default.createElement("div",null,c.default.createElement(y.default,{messageId:"hotOffer"}),c.default.createElement("br",null),c.default.createElement(y.default,{messageId:"buyTokens.creditCardVerificationPromo",parameters:{amount:T.CARD_VERIFICATION_BONUS},elements:{strong:c.default.createElement("strong",null)}})),button:c.default.createElement(v.default,{style:"delete",onClick:r.acceptClickHandler},r.t("button.getNow"))}},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){return c.default.createElement(O.default,s({},this.props,this.getToastProps()))}}]),t}(g.default),C={emitButtonEvent:p.emitButtonEvent},I=function(e){return(0,f.bindActionCreators)(C,e)};t.default=(0,d.connect)(null,I)(A)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getToasts=void 0;var r=n(32),a=function(e){return e.toastNotifications.collection};t.getToasts=(0,r.createSelector)([a],function(e){return e.valueSeq().toArray()})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderEmailVerificationWarning=void 0;var a=n(1),o=r(a),i=n(0),s=r(i),l=n(2),u=n(24),c=n(17),d=r(c),f={"gmail.com":"https://gmail.com","hotmail.com":"http://hotmail.com","yahoo.com":"http://mail.yahoo.com","mail.ru":"https://mail.ru","web.de":"https://web.de/fm/","outlook.com":"http://outlook.com","rootfest.net":"http://rootfest.net","gmx.de":"http://gmx.de","aol.com":"http://mail.aol.com","hotmail.fr":"http://hotmail.fr","hotmail.co.uk":"http://hotmail.co.uk","live.com":"http://live.com","yahoo.de":"https://mail.yahoo.com/?.intl=de&.lang=de-DE","mail.com":"https://www.mail.com","yahoo.co.uk":"https://mail.yahoo.com/?.intl=uk&.lang=en-GB","yahoo.fr":"https://mail.yahoo.com/?.intl=fr&.lang=fr-FR","yandex.ru":"https://mail.yandex.ru","googlemail.com":"http://googlemail.com","hotmail.de":"http://hotmail.de","abv.bg":"https://www.abv.bg","icloud.com":"https://www.icloud.com/"},p=function(e){var t=e.split("@")[1];return f[t]},m=t.HeaderEmailVerificationWarning=function(e){var t=e.isLoggedIn,n=e.user;if(!t||n.isEmailVerified)return null;var r=p(n.email);return s.default.createElement("div",{className:"header-email-verification-warning","data-component-name":"HeaderEmailVerificationWarning"},s.default.createElement(d.default,{elements:{emailLink:r?s.default.createElement("a",{href:r,target:"_blank"}):s.default.createElement("span",null),settingsLink:s.default.createElement(u.Link,{to:"/settings"}),strong:s.default.createElement("strong",null)},parameters:{email:n.email},messageId:"headerEmailVerificationWarning"}))};m.propTypes={user:o.default.shape({isEmailVerified:o.default.bool,email:o.default.string}).isRequired,isLoggedIn:o.default.bool.isRequired};var g=function(e){var t=e.auth,n=t.isLoggedIn,r=t.isLoggingOut;return{user:e.profile.user,isLoggedIn:n&&!r}};t.default=(0,l.connect)(g)(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(386),d=r(c),f=n(388),p=r(f),m=n(23),g=r(m),h=n(1230),v=r(h),E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.liveTags",i=n,o(r,i)}return i(t,e),s(t,[{key:"renderReady",value:function(){return[u.default.createElement(d.default,null),u.default.createElement("div",{className:"page"},u.default.createElement("div",{className:"page-header"},u.default.createElement("h1",null,this.t(this.title))),u.default.createElement(p.default,null),u.default.createElement(v.default,null))]}}]),t}(g.default);t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(107),l=r(s),u=n(6),c=r(u),d=n(36),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},h=n(1),v=r(h),E=n(0),y=r(E),b=n(137),_=r(b),S=n(4),O=n(2),P=n(31),T=n(118),A=n(292),C=n(12),I=n(9),w=n(3),N=r(w),R=n(10),M=r(R),L=n(8),k=r(L),D=n(40),U=r(D),j=n(5),F=n(7),B=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.propsUpdateToActionsMap=[{update:["isLoggedIn"],action:function(e){e.searchString&&r.triggerSearch()}}],r.decodeSearchString=function(e){return decodeURIComponent(e||"")},r.triggerSearch=function(){var e=r.state.searchString,t=r.props.isEmbedded,n=e?encodeURIComponent(e):"";t?r.props.saveFilterParams({searchString:e}):r.props.routerReplace(n?"/search/"+n:"/")},r.blurHandler=function(){var e=r.state.searchString;r.getHasChanged()&&r.triggerSearch(),e||r.props.collapseSearchForm()},r.clearButtonClickHandler=function(e){r.searchDebounced.cancel(),e.preventDefault(),e.stopPropagation(),r.setState({searchString:""},function(){r.triggerSearch(),r.props.collapseSearchForm()})},r.changeHandler=function(e){e.stopPropagation();var t=e.target.value;r.setState({searchString:t}),r.searchDebounced()},r.keyDownHandler=function(e){var t=r.state.searchString;e.stopPropagation(),e.keyCode===j.KEY_CODES.enter&&r.searchDebounced.flush(),t||e.keyCode!==j.KEY_CODES.escape||r.props.collapseSearchForm()},r.documentMouseDownHandler=function(e){r.modelSearchRef&&!_.default.findDOMNode(r.modelSearchRef).contains(e.target)&&r.inputRef&&r.inputRef.blur()},r.clickHandler=function(e){e.stopPropagation(),r.props.shouldReleaseInterface&&r.props.releaseInterface()},r.toggleSearchForm=function(){return r.props.isExpandedSearchForm?r.props.collapseSearchForm():r.props.expandSearchForm()},r.renderExpandedForm=function(){return[y.default.createElement(M.default,{className:"open-button",onClick:r.toggleSearchForm,key:"modelSearchBtn"},y.default.createElement(k.default,{img:"search"})),y.default.createElement(U.default,{onBlur:r.blurHandler,onChange:r.changeHandler,onClick:r.clickHandler,onKeyDown:r.keyDownHandler,placeholder:(0,l.default)(r.t("searchModels")),value:r.state.searchString,ref:function(e){r.inputRef=e},key:"modelSearchInput"}),y.default.createElement(M.default,{className:"close-button",onClick:r.clearButtonClickHandler,key:"modelSearchCloseBtn"},y.default.createElement(k.default,{img:"close-3"}))]},r.renderCollapsedForm=function(){return y.default.createElement(M.default,{className:"open-button",onClick:r.toggleSearchForm},y.default.createElement(k.default,{img:"search"}))},r.searchDebounced=(0,f.default)(r.triggerSearch,C.TRIGGER_SEARCH_DELAY),r}return i(t,e),m(t,[{key:"componentDidMount",value:function(){g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.registerEventListener(document,"touchstart",this.documentMouseDownHandler)}},{key:"componentDidUpdate",value:function(){this.inputRef&&this.props.isExpandedSearchForm&&this.inputRef.focus()}},{key:"componentWillUnmount",value:function(){this.searchDebounced.cancel()}},{key:"getDefaultState",value:function(){var e=this.props.searchString;return{searchString:this.decodeSearchString(e)}}},{key:"getNextState",value:function(e,n){if(this.getHasFocus())return g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n);var r=(0,c.default)(e,"searchString");return{searchString:this.decodeSearchString(r)}}},{key:"getHasFocus",value:function(){return document.activeElement===_.default.findDOMNode(this.inputRef)}},{key:"getHasChanged",value:function(){return this.state.searchString!==this.props.searchString}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.isExpandedSearchForm;return y.default.createElement("div",{className:this.c("model-search",n,{"model-search_expanded":r}),ref:function(t){e.modelSearchRef=t},"data-component-name":"ModelSearch"},r?this.renderExpandedForm():this.renderCollapsedForm())}}]),t}(N.default),H={collapseSearchForm:T.collapseSearchForm,expandSearchForm:T.expandSearchForm,releaseInterface:I.releaseInterface,routerReplace:P.replace,saveFilterParams:T.saveFilterParams,searchModels:A.search};B.propTypes=p({className:v.default.string,isEmbedded:v.default.bool,isExpandedSearchForm:v.default.bool,searchString:v.default.string,shouldReleaseInterface:v.default.bool},(0,F.getActionPropTypes)(H));var V=function(e){var t=e.auth,n=e.modelFilter,r=n.isExpandedSearchForm,a=n.searchString;return{isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,searchString:a,isExpandedSearchForm:r}},G=function(e){return(0,S.bindActionCreators)(H,e)};t.default=(0,O.connect)(V,G)(B)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(3),h=r(g),v=n(73),E=r(v),y=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={activeMenuItemMargin:0,activeMenuItemOffsetLeft:0,activeMenuItemWidth:0},r.propsUpdateToActionsMap=[{update:["activeItemRef"],action:function(){r.updateActiveMenuItemProperties()}}],r.updateActiveMenuItemProperties=function(){var e=r.props.getActiveMenuItem();if(e){var t=window.getComputedStyle(e),n=parseFloat(t["margin-right"])+parseFloat(t["margin-left"]),a=e.offsetWidth,o=e.offsetLeft;r.setState({activeMenuItemMargin:n,activeMenuItemOffsetLeft:o,activeMenuItemWidth:a})}},r.scrollToActiveMenu=function(){if(r.props.getActiveMenuItem()&&r.navScrollableRef){var e=r.state,t=e.activeMenuItemMargin,n=e.activeMenuItemOffsetLeft,a=e.activeMenuItemWidth,o=r.navScrollableRef.clientWidth,i=a+t,s=(o-i)/2;r.navScrollableRef.scrollLeft=n-s}},r.navScrollableRefHandler=function(e){r.navScrollableRef=e},a=n,i(r,a)}return s(t,e),l(t,[{key:"componentDidRender",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this),this.scrollToActiveMenu()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return p.default.createElement(E.default,{containerRef:this.navScrollableRefHandler,"data-component-name":"NavbarScrollable"},p.default.createElement("nav",{className:this.c("nav-scrollable",a({},t,Boolean(t)))},n))}}]),t}(h.default);y.propTypes={activeMenuRef:d.default.node,className:d.default.string,getActiveMenuItem:d.default.func};var b=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight}};t.default=(0,m.connect)(b)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(30),u=r(l),c=n(13),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},g=n(1),h=r(g),v=n(0),E=r(v),y=n(2),b=n(4),_=n(9),S=n(21),O=n(3),P=r(O),T=n(8),A=r(T),C=function(e,t){return!(0,d.default)(e)&&e.children!==t.children},I=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.widthIndexMap=new Map,r.itemsWidthsMap=new Map,r.moreBtnTotalWidth=0,r.lastVisibleIndex=null,r.state={isOpen:!1},r.propsUpdateToActionsMap=[{update:S.layoutHasChanged,action:function(){r.updateLastVisibleIndex()}},{update:C,action:function(){r.itemsWidthsMap.clear(),r.widthIndexMap.clear()}},{update:S.hasInterfaceBlockChanged,action:function(e){return r.interfaceBlockChangeHandler(e)}}],r.updateLastVisibleIndex=function(){r.lastVisibleIndex=r.getLastVisibleItemIndex()},r.getLastVisibleItemIndex=function(){if(!r.rootRef)return 0;var e=r.rootRef.offsetWidth,t=e-r.moreBtnTotalWidth,n=0;return r.widthIndexMap.forEach(function(e,r){e<=t&&(n=r)}),n},r.getWidth=function(e,t){var n=r.itemsWidthsMap.has(t)?r.itemsWidthsMap.get(t):0;return e>0?n+r.widthIndexMap.get(e-1):n},r.updateItemMargins=function(e){if(!r.itemsWidthsMap.has(e)){var t=r.getElementTotalWidth(e);r.itemsWidthsMap.set(e,t)}},r.itemRefHandler=function(e,t){t&&(r.updateItemMargins(t),r.widthIndexMap.set(e,r.getWidth(e,t)))},r.openDropdownHandler=function(e){e.preventDefault(),e.stopPropagation(),r.state.isOpen?r.props.releaseInterface():r.props.blockInterface(e.target)},r.getElementTotalWidth=function(e){var t=window.getComputedStyle(e);return parseFloat(t["margin-right"])+parseFloat(t["margin-left"])+e.offsetWidth},r.getIsMoreItemsVisible=function(){return null!==r.lastVisibleIndex&&r.lastVisibleIndex!==r.props.children.length-1},r.getRestItems=function(){var e=r.props.children.slice(r.lastVisibleIndex+1);return E.default.Children.map(e,function(e){return E.default.cloneElement(e,f({},e.props,{className:r.c("more-button-item",a({},e.props.className,e.props.className))}))})},r.interfaceBlockChangeHandler=function(e){var t=e.isInterfaceBlocked,n=e.currentBlockingComponent;r.setState({isOpen:t&&r.rootRef&&r.rootRef.contains(n)})},r.moreBtnRefHandler=function(e){if(e){var t=r.getElementTotalWidth(e);r.moreBtnTotalWidth=e.offsetWidth+t}},r.renderRestItemsBlock=function(){return E.default.createElement("div",{className:"more-button-block-content"},r.getRestItems())},r.renderHiddenBlockItems=function(){var e=r.props.children;return E.default.createElement("div",{className:"navbar-hidden-elements-wrapper"},E.default.Children.map(e,function(e,t){return E.default.cloneElement(e,f({},e.props,{ref:(0,u.default)(r.itemRefHandler,t)}))}),E.default.createElement("div",{className:"navbar-more-button",ref:r.moreBtnRefHandler},r.t("button.more")))},r.renderVisibleItems=function(){return E.default.Children.map(r.props.children,function(e,t){return null!==r.lastVisibleIndex&&t>r.lastVisibleIndex?null:E.default.cloneElement(e)})},r.renderMoreBtn=function(){var e=r.state.isOpen,t=r.getIsMoreItemsVisible();return E.default.createElement("div",{className:r.c("navbar-more-button",{visible:t,hidden:!t,opened:e}),onClick:r.openDropdownHandler},r.t("button.more"),E.default.createElement("span",{className:"dropdown-arrow"},E.default.createElement(A.default,{img:"selectbox"})),r.renderIf(e,function(){return r.renderRestItemsBlock()}))},s=n,i(r,s)}return s(t,e),p(t,[{key:"componentDidMount",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.updateLastVisibleIndex()}},{key:"render",value:function(){var e=this,t=this.props.className;return E.default.createElement("nav",{className:this.c("navbar-dropdown",a({open:this.state.isOpen},t,Boolean(t))),ref:function(t){e.rootRef=t},"data-component-name":"NavbarDropdown"},this.renderHiddenBlockItems(),this.renderVisibleItems(),this.renderMoreBtn())}}]),t}(P.default),w={blockInterface:_.blockInterface,releaseInterface:_.releaseInterface};I.propTypes={className:h.default.string,currentBlockingComponent:h.default.object,isInterfaceBlocked:h.default.bool.isRequired};var N=function(e){var t=e.ui;return{currentBlockingComponent:t.currentBlockingComponent,isInterfaceBlocked:t.isInterfaceBlocked,windowHeight:t.windowHeight,windowWidth:t.windowWidth}},R=function(e){return(0,b.bindActionCreators)(w,e)};t.default=(0,y.connect)(N,R)(I)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsTouchDevice=void 0;var r=n(32),a=n(5),o=function(e){var t=e.ssr;return(void 0===t?{}:t).deviceType};t.getIsTouchDevice=(0,r.createSelector)([o],function(e){return["mobile","tablet","embedded","wearable"].includes(e)||a.BROWSER_CAPABILITIES.touch})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LiveTags=void 0;var l=n(119),u=r(l),c=n(374),d=r(c),f=n(46),p=r(f),m=n(11),g=r(m),h=n(280),v=r(h),E=n(6),y=r(E),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},O=n(1),P=r(O),T=n(0),A=r(T),C=n(2),I=n(4),w=n(87),N=n(387),R=r(N),M=n(45),L=n(9),k=n(3),D=r(k),U=n(1231),j=r(U),F=n(5),B=n(83),H=r(B),V=n(7),G=n(57),x={},W=null,Y=null,K=0,q=null,z=null,X=t.LiveTags=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={highlightedIndex:"all"},r.getTagLabel=function(e){return r.t("tags."+e)},r.scrollEventHandler=function(){var e=H.default.get(),t=(0,p.default)((0,d.default)((0,g.default)(Object.keys(x),function(e){return Number(e)}),"offset"),function(t,n){return e>=n?n:t},0);"all"!==r.state.highlightedIndex&&"all"!==x[t]||r.state.highlightedIndex===x[t]||r.props.releaseInterface(),r.setState({highlightedIndex:x[t]})},r.setOffsetForGroup=function(e,t){if(!q){var n=document.querySelector("header");q=n.offsetHeight}if(!z){var r=document.querySelector(".header-sub");z=r.offsetHeight}if(!W){var a=document.querySelector(".live-tags-index-container");W=a.offsetHeight}var o=t+q+z-W;"all"===e?x={0:"all"}:x[o]=e},a=n,i(r,a)}return s(t,e),_(t,[{key:"componentDidMount",value:function(){S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.loadModels(),this.scrollThrottledEventHandler=(0,u.default)(this.scrollEventHandler,F.DEFAULT_SCROLL_EVENT_THROTTLE_WAIT),this.registerEventListener(window,"scroll",this.scrollThrottledEventHandler)}},{key:"componentWillUnmount",value:function(){S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.scrollThrottledEventHandler.cancel(),this.removeRegisteredEventListener(window,"scroll",this.scrollThrottledEventHandler)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.state.highlightedIndex!==t.highlightedIndex||this.props.groupedTags!==e.groupedTags||this.props.liveTagDetails!==e.liveTagDetails;if("all"!==this.state.highlightedIndex){Y||(Y=document.querySelector(".header-notifications-wrapper"));var r=Y.offsetHeight;r!==K&&(K=r,n=!0)}else K=0;return n}},{key:"renderTagsList",value:function(e){var t=this,n=this.props.liveTagDetails;return(0,g.default)(e,function(e){return A.default.createElement(R.default,{className:"live-tags-link",label:t.getTagLabel(e),shouldReleaseInterface:!0,tag:e,key:"live-tags-link-"+e,count:(0,y.default)(n,e+".modelsLive")})})}},{key:"renderGroup",value:function(e){var t=this,n=this.props.groupedTags,r=n[e];return A.default.createElement("div",{className:"live-tags-group",key:"tagGroup_"+e,id:"letter_"+e.replace("#","symbols"),ref:function(n){return n&&t.setOffsetForGroup(e,n.offsetTop)}},A.default.createElement("div",{className:"live-tags-group-letter"},e),A.default.createElement("div",{className:"live-tags-group-list"},this.renderTagsList(r)))}},{key:"renderGroupAll",value:function(){var e=this.props.groupedTags,t=e.all;return A.default.createElement("div",{className:"live-tags-group",key:"tagGroup_all",id:"letter_all"},A.default.createElement("div",{className:"live-tags-group-list"},this.renderTagsList(t)))}},{key:"render",value:function(){var e=this,t=this.props,n=t.alphabet,r=t.indexes,o=this.state.highlightedIndex,i="all"!==o;return A.default.createElement("div",{"data-component-name":"LiveTags"},this.renderIf(n,function(){return A.default.createElement(j.default,{className:e.c({fixed:i,container:i}),alphabet:n,indexes:r,style:{top:i?K+"px":"inherit"},highlightedIndex:o,ref:function(t){return t&&e.setOffsetForGroup("all",0)}})}),A.default.createElement("div",{className:"live-tags__container"},A.default.createElement("div",{id:"letter_all",className:"live-tags-group"}),this.renderIf(n,function(){return(0,g.default)(["#"].concat(a(n)),function(t){return-1!==(0,v.default)(r,t)&&e.renderGroup(t)})},function(){return e.renderGroupAll()})))}}]),t}(D.default),Z={loadModels:w.load,releaseInterface:L.releaseInterface};X.propTypes=b({alphabet:P.default.arrayOf(P.default.string),groupedTags:P.default.objectOf(P.default.array),indexes:P.default.arrayOf(P.default.string),liveTagDetails:P.default.objectOf(P.default.object)},(0,V.getActionPropTypes)(Z));var Q=function(e){var t=(0,M.getAllTagsGroupedByAlphabet)(e),n=(0,M.getLiveTagDetails)(e),r=(0,G.getLocale)(e);return{alphabet:F.ALPHABET[r],currentLanguage:r,liveTagDetails:n,groupedTags:t,indexes:Object.keys(t)}},J=function(e){return(0,I.bindActionCreators)(Z,e)};t.default=(0,C.connect)(Q,J)(X)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LiveTagsIndex=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(388),m=r(p),g=n(3),h=r(g),v=n(73),E=r(v),y=n(83),b=r(y),_=150,S=null,O=t.LiveTagsIndex=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(e){if(e.preventDefault(),e.stopPropagation(),!S){var t=document.querySelector(".live-tags-index-container");S=t.offsetHeight}var n=document.querySelector(".header-notifications-wrapper"),r=n?n.offsetHeight:0,a=e.currentTarget;a=void 0===a?{}:a;var o=a.hash,i=void 0===o?"letter_all":o;b.default.to(i,{duration:_,offset:-S-r})},r.renderLetter=function(e){var t=r.props,n=t.indexes,a=t.highlightedIndex;return f.default.createElement("a",{className:r.c("live-tags-index-letter",{active:-1!==n.indexOf(e),highlighted:a===e}),key:"live-tags-link-"+e,onClick:r.clickHandler,href:"#letter_"+e.replace("#","symbols")},e)},a=n,i(r,a)}return s(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.alphabet,r=t.className,o=t.highlightedIndex,i=t.style;return f.default.createElement("div",{className:"live-tags-index-container",ref:function(t){e.liveTagsIndexRef=t},"data-component-name":"LiveTagsIndex"},f.default.createElement("div",{className:this.c("live-tags-index-wrapper",r),style:i},f.default.createElement(E.default,null,f.default.createElement("div",{className:"live-tags-index-navigation"},f.default.createElement("a",{className:this.c("live-tags-index-letter","active",{highlighted:"all"===o}),onClick:this.clickHandler,href:"#letter_all"},this.t("all")),["#"].concat(a(n)).map(this.renderLetter))),f.default.createElement(m.default,null)))}}]),t}(h.default);O.propTypes={alphabet:c.default.arrayOf(c.default.string),className:c.default.string,highlightedIndex:c.default.string,indexes:c.default.arrayOf(c.default.string),style:c.default.shape(c.default.any)},O.defaultProps={className:"",style:{}},t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(23),d=r(c),f=n(389),p=r(f),m=n(19),g=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.404",i=n,o(r,i)}return i(t,e),s(t,[{key:"renderReady",value:function(){return u.default.createElement("div",{className:"page not-found-page"},u.default.createElement(p.default,null))}}]),t}(d.default);g.checkAccess=(0,m.redirectOnCondition)(function(e,t,n){return"xh"===n().config.whiteLabelId&&document.referrer.match(/xhamster\.com/gi)},"/"),t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=(r(l),n(0)),c=r(u),d=n(23),f=r(d),p=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.billing",i=n,o(r,i)}return i(t,e),s(t,[{key:"renderReady",value:function(){return c.default.createElement("section",{className:"page limited-width"},c.default.createElement("div",{className:"page-header"},c.default.createElement("h1",null,"Billing Support")),c.default.createElement("div",{className:"page-content"},c.default.createElement("h3",null,"Epoch members:"),c.default.createElement("div",{className:"spacer"}),c.default.createElement("p",null,"Billing support:"," ",c.default.createElement("a",{href:"https://www.epoch.com/billing_support/find_purchase",target:"_blank",rel:"noopener noreferrer"},"https://www.epoch.com/billing_support",c.default.createElement("wbr",null),"/find_purchase")),c.default.createElement("p",null,"Email:"," ",c.default.createElement("a",{href:"mailto:billing@epoch.com"},"billing@epoch.com")),c.default.createElement("p",null,"Phone Toll Free: +1 800 893 8871"),c.default.createElement("p",null,"Phone Worldwide: +1 310 664 5810"),c.default.createElement("br",null),c.default.createElement("h3",null,"SegPay members:"),c.default.createElement("div",{className:"spacer"}),c.default.createElement("p",null,"Billing support:"," ",c.default.createElement("a",{href:"http://cs.segpay.com/",target:"_blank",rel:"noopener noreferrer"},"http://cs.segpay.com/")),c.default.createElement("p",null,"Email:"," ",c.default.createElement("a",{href:"mailto:help@segpay.com"},"help@segpay.com")),c.default.createElement("p",null,"Phones: +1-954-414-1610 and 1-888-376-0948"),c.default.createElement("br",null),c.default.createElement("h3",null,"CentroBill members:"),c.default.createElement("div",{className:"spacer"}),c.default.createElement("p",null,"Customer self service:"," ",c.default.createElement("a",{href:"http://centrobill.com/consumer/index.php",target:"_blank",rel:"noopener noreferrer"},"http://centrobill.com/consumer/index.php")),c.default.createElement("p",null,"Email:"," ",c.default.createElement("a",{href:"mailto:support@centrobill.com"},"support@centrobill.com")),c.default.createElement("p",null,"Phone support: +1-877-778-8382"),c.default.createElement("br",null),c.default.createElement("h3",null,"Commercegate members:"),c.default.createElement("div",{className:"spacer"}),c.default.createElement("p",null,"Client support:"," ",c.default.createElement("a",{href:"http://www.cgbilling.com/?lang=en",target:"_blank",rel:"noopener noreferrer"},"http://www.cgbilling.com/?lang=en")),c.default.createElement("p",null,"Contact email:"," ",c.default.createElement("a",{href:"mailto:support@commercegate.com"},"support@commercegate.com")),c.default.createElement("p",null,"Phone support USA (free): +1 877 369 5566"),c.default.createElement("p",null,"Phone support Europe (GMT+1): +34 931 761 050"),c.default.createElement("br",null),c.default.createElement("h3",null,"Webbiling members:"),c.default.createElement("div",{className:"spacer"}),c.default.createElement("p",null,"Contact email:"," ",c.default.createElement("a",{href:"mailto:usersupport@webbilling.com"},"usersupport@webbilling.com"))))}}]),t}(f.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CareersPage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(134),h=n(23),v=r(h),E=n(1235),y=r(E),b=n(21),_=n(7),S=n(200),O=g.STATIC_CONTENT_TYPES.CAREERS_FE,P=t.CareersPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.careers",i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.loadStaticContent([O])}},{key:"renderReady",value:function(){return f.default.createElement("section",{className:"page careers-page limited-width","data-component-name":"CareersPage"},f.default.createElement("div",{className:"page-header text-center"},f.default.createElement("h1",null,"Join the Stripchat Team and Live an Unforgettable Experience")),f.default.createElement("div",{className:"page-block-rounded"},f.default.createElement("img",{alt:"careers",src:this.props.getStaticUrl("common/components/pages/static/careers.jpg")}),f.default.createElement(y.default,{items:this.props.items})))}}]),t}(v.default);P.propTypes={getStaticUrl:c.default.func.isRequired,items:c.default.arrayOf(_.ReactSchemes.accordionItem),loadStaticContent:c.default.func};var T=function(e){return{getStaticUrl:function(t){return(0,b.getStaticUrl)(e,t)},items:[{title:"Front-End Developer",body:f.default.createElement("div",{dangerouslySetInnerHTML:{__html:(0,S.getStaticContent)(e,O)}})}]}},A=function(e){return(0,m.bindActionCreators)({loadStaticContent:g.load},e)};t.default=(0,p.connect)(T,A)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(1236),g=r(m),h=n(7),v=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(e){var t=r.state.openedIndex;r.setState({openedIndex:t===e?-1:e})},i=n,o(r,i)}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{openedIndex:this.props.defaultIndex}}},{key:"render",value:function(){var e=this,t=this.props.items,n=this.state.openedIndex;return d.default.createElement("div",{className:"accordion","data-component-name":"Accordion"},t.map(function(t,r){return d.default.createElement(g.default,{key:t.title,item:t,index:r,clickCallback:e.clickHandler,isOpened:r===n})}))}}]),t}(p.default);v.propTypes={defaultIndex:u.default.number,items:u.default.arrayOf(h.ReactSchemes.accordionItem)},v.defaultProps={defaultIndex:-1,items:[]},t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(128),o=r(a),i=n(1),s=r(i),l=n(0),u=r(l),c=n(8),d=r(c),f=n(7),p=function(e){var t=e.clickCallback,n=e.index,r=e.item,a=e.isOpened,i=function(e){e.preventDefault(),e.stopPropagation(),t&&(0,o.default)(n)&&t(n)};return u.default.createElement("div",{className:"accordion-item"+(a?" active":""),key:n,"data-component-name":"AccordionItem"},u.default.createElement("div",{className:"accordion-title",onClick:i},r.title,u.default.createElement("span",{className:"dropdown-arrow"},u.default.createElement(d.default,{img:"arrow-down"}))),a?u.default.createElement("div",{className:"accordion-body"},r.body):u.default.createElement("div",{className:"accordion-body empty"}))};p.propTypes={clickCallback:s.default.func,index:s.default.number,item:f.ReactSchemes.accordionItem,isOpened:s.default.bool},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChildProtectionPage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(134),h=n(23),v=r(h),E=n(378),y=r(E),b=n(200),_=t.ChildProtectionPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.2257",i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.loadStaticContent(g.STATIC_CONTENT_TYPES.CHILD_PROTECTION)}},{key:"renderReady",value:function(){return f.default.createElement("section",{className:"page limited-width","data-component-name":"ChildProtectionPage"},f.default.createElement("div",{className:"page-header"},f.default.createElement("h1",null,"18 U.S.C. 2257 Record-Keeping Requirements Compliance Statement")),f.default.createElement("div",{className:"page-content"},f.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}),f.default.createElement("p",null,f.default.createElement(y.default,{text:"Technius Ltd. 18 Theophilou, 21, CY-3075 Limassol, Cyprus"}),f.default.createElement("br",null),"Database Administrator - help@stripchat.com")))}}]),t}(v.default);_.propTypes={content:c.default.string,loadStaticContent:c.default.func};var S=function(e){return{content:(0,b.getStaticContent)(e,g.STATIC_CONTENT_TYPES.CHILD_PROTECTION)}},O=function(e){return(0,m.bindActionCreators)({loadStaticContent:g.load},e)};t.default=(0,p.connect)(S,O)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyrightPage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(134),h=n(23),v=r(h),E=n(238),y=r(E),b=n(200),_=t.CopyrightPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.copyrights",i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.loadStaticContent(g.STATIC_CONTENT_TYPES.COPYRIGHT)}},{key:"renderReady",value:function(){return f.default.createElement("section",{className:"page limited-width","data-component-name":"CopyrightPage"},f.default.createElement("div",{className:"page-header"},f.default.createElement("h1",null,"DMCA / Copyrights"),f.default.createElement("div",{className:"header-notes"},f.default.createElement("p",null,"Effective date: ",f.default.createElement(y.default,null)),f.default.createElement("p",null,"Last modified: ",f.default.createElement(y.default,{dateTime:new Date(2015,11,1)})))),f.default.createElement("div",{className:"page-content",dangerouslySetInnerHTML:{__html:this.props.content}}))}}]),t}(v.default);_.propTypes={content:c.default.string,loadStaticContent:c.default.func};var S=function(e){return{content:(0,b.getStaticContent)(e,g.STATIC_CONTENT_TYPES.COPYRIGHT)}},O=function(e){return(0,m.bindActionCreators)({loadStaticContent:g.load},e)};t.default=(0,p.connect)(S,O)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivacyPage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(134),h=n(23),v=r(h),E=n(238),y=r(E),b=n(200),_=t.PrivacyPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.privacy",i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.loadStaticContent(g.STATIC_CONTENT_TYPES.PRIVACY)}},{key:"renderReady",value:function(){return f.default.createElement("section",{className:"page limited-width","data-component-name":"PrivacyPage"},f.default.createElement("div",{className:"page-header"},f.default.createElement("h1",null,"Privacy Policy"),f.default.createElement("div",{className:"header-notes"},f.default.createElement("p",null,"Effective date: ",f.default.createElement(y.default,null)),f.default.createElement("p",null,"Last modified: ",f.default.createElement(y.default,{dateTime:new Date(2016,0,25)})))),f.default.createElement("div",{className:"page-content",dangerouslySetInnerHTML:{__html:this.props.content}}))}}]),t}(v.default);_.propTypes={content:c.default.string,loadStaticContent:c.default.func};var S=function(e){return{content:(0,b.getStaticContent)(e,g.STATIC_CONTENT_TYPES.PRIVACY)}},O=function(e){return(0,m.bindActionCreators)({loadStaticContent:g.load},e)};t.default=(0,p.connect)(S,O)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TermsPage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(134),h=n(23),v=r(h),E=n(378),y=r(E),b=n(238),_=r(b),S=n(200),O=t.TermsPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.terms",i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.loadStaticContent(g.STATIC_CONTENT_TYPES.TERMS)}},{key:"renderReady",value:function(){var e=this.props.content;return f.default.createElement("section",{className:"page limited-width","data-component-name":"TermsPage"},f.default.createElement("div",{className:"page-header"},f.default.createElement("h1",null,"Terms of Use"),f.default.createElement("div",{className:"header-notes"},f.default.createElement("p",null,"Effective date: ",f.default.createElement(_.default,null)),f.default.createElement("p",null,"Last modified: ",f.default.createElement(_.default,{dateTime:new Date(2018,1,6)})))),f.default.createElement("div",{className:"page-content"},f.default.createElement("p",null,"Please review these terms and conditions of use carefully before using",f.default.createElement(y.default,{text:"Technius Ltd.’s"}),"websites, including, without limitation, the following websites:"),f.default.createElement("p",null,"Stripchat.com"),f.default.createElement("p",null,"This document states the terms and conditions (“Terms”) upon which",f.default.createElement(y.default,{text:"Technius Ltd."})," (“we” or “us”) will provide service to you on its websites, including, without limitation, the above listed websites (the “Website”). These Terms constitute a contractual agreement between you and us. By visiting, accessing, using, and/or joining (collectively “using”) the Website, you express your understanding and acceptance of these Terms. As used in this document, the terms “you” or “your” refers to you, any entity you represent, your or its representatives, successors, assigns and affiliates, and any of your or their devices. If you do not agree to be bound by these Terms, navigate away from the Website and cease using it."),f.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})))}}]),t}(v.default);O.propTypes={content:c.default.string,loadStaticContent:c.default.func};var P=function(e){return{content:(0,S.getStaticContent)(e,g.STATIC_CONTENT_TYPES.TERMS)}},T=function(e){return(0,m.bindActionCreators)({loadStaticContent:g.load},e)};t.default=(0,p.connect)(P,T)(O)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BestModelsPage=void 0;var l=n(272),u=r(l),c=n(11),d=r(c),f=n(49),p=r(f),m=n(13),g=r(m),h=n(48),v=r(h),E=n(539),y=r(E),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=n(1),O=r(S),P=n(0),T=r(P),A=n(2),C=n(4),I=n(151),w=r(I),N=n(23),R=r(N),M=n(238),L=r(M),k=n(617),D=r(k),U=n(22),j=r(U),F=n(19),B=n(7),H=n(570),V=n(302),G=r(V),x=n(1246),W=r(x),Y=n(12),K=n(1248),q=function(e,t){var n=e.contestType,r=t.contestType,a=!(0,p.default)(n,r);return r&&a&&"rules"!==r.id},z=function(e){return(0,v.default)(Y.BEST_MODELS_CONTEST_TYPES,{id:e.match.params.type||Y.BEST_MODELS_DEFAULT_CONTEST_TYPE_ID})},X=t.BestModelsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:q,action:function(e){var t=e.contestType;(0,e.loadBestModels)(t.route)}}]),s=n,i(r,s)}return s(t,e),_(t,[{key:"renderMeta",value:function(){var e=this.props.match.params.type||Y.BEST_MODELS_DEFAULT_CONTEST_TYPE_ID,t="rules"===e?"rules":"default",n=(0,y.default)(e);return T.default.createElement(w.default,{title:this.twl("seo.title.topModels."+n),description:this.twl("seo.description.topModels."+t)})}},{key:"renderNav",value:function(){var e=this,t=this.props,n=t.isLoggedIn,r=t.currentUser,a=!n||n&&(r.isModel||r.isStudio),o=(0,u.default)(Y.BEST_MODELS_CONTEST_TYPES,function(e){return"rules"===e.id&&!a}).map(function(t){var n=t.id;return{isActive:function(e,t){return Boolean(e||n===Y.BEST_MODELS_DEFAULT_CONTEST_TYPE_ID&&"/top"===t.pathname)},label:e.t("bestModels.nav."+n),route:"/top/"+n}});return n||o.push({label:this.t("button.becomeAModel"),route:"/signup/model"}),T.default.createElement(D.default,{items:o})}},{key:"renderMonthlyTop",value:function(){var e=this,t=this.props,n=t.bestModels,r=t.isPending,a=t.loadError;return r?T.default.createElement("div",{className:"loader-container"},T.default.createElement(j.default,{isCentered:!0})):a?T.default.createElement("div",{className:"text-center"},a.message):(0,g.default)(n)?null:T.default.createElement("div",{className:"monthly-top model-list"},n.map(function(t,n){return T.default.createElement(G.default,{htmlIdPrefix:n,key:t.user.id,model:t.user},T.default.createElement("div",{className:"award-header"},n+1," ",e.t("bestModels.place")," - $",Math.round(t.prize/Y.TOKENS_RATIO_FOR_MODELS)))}))}},{key:"renderHourlyTop",value:function(){var e=this,t=this.props,n=t.hourlyTops,r=t.isPending,a=t.loadError;return r?T.default.createElement("div",{className:"loader-container"},T.default.createElement(j.default,{isCentered:!0})):a?T.default.createElement("div",{className:"text-center"},a.message):(0,g.default)(n)?null:T.default.createElement("div",{className:"hourly-top"},n.map(function(t){return T.default.createElement("div",{className:"hourly-top-row model-list",key:t.time},T.default.createElement("div",{className:"model-list-item"},T.default.createElement("div",{className:"award-header"},e.t("date")),T.default.createElement("div",{className:"award-date"},T.default.createElement(L.default,{dateTime:t.time,showTime:!0}))),t.winners.map(function(t,n){return T.default.createElement(G.default,{htmlIdPrefix:n,key:t.user.id,isStatusVisible:!0,model:t.user},T.default.createElement("div",{className:"award-header"},n+1," ",e.t("bestModels.place")," - $",Math.round(t.prize/Y.TOKENS_RATIO_FOR_MODELS)))}))}))}},{key:"renderTop",value:function(e){var t=this;return T.default.createElement("div",{className:"page model-list-container"},T.default.createElement("div",{className:"page-header"},T.default.createElement("h1",null,this.t("bestModels.nav."+e)),T.default.createElement("div",{className:"page-sub-header"},this.t("bestModels.ratingDescription."+e))),this.renderIf("recent"===e,function(){return t.renderHourlyTop()},function(){return t.renderMonthlyTop()}))}},{key:"renderReady",value:function(){var e=this,t=this.props.contestType.id;return T.default.createElement("div",{className:"best-models-page","data-component-name":"BestModelsPage"},this.renderNav(),this.renderIf("rules"===t,function(){return T.default.createElement(W.default,null)},function(){return e.renderTop(t)}))}}]),t}(R.default);X.checkAccess=(0,F.redirectOnCondition)(function(e,t,n){var r=z(e),a=r.id,o=n(),i=o.auth,s=i.isLoggedIn,l=i.currentUser,u=!s||s&&(l.isStudio||l.isModel);return"rules"===a&&!u},"/");var Z={loadBestModels:H.load};X.propTypes=b({match:O.default.shape({params:O.default.shape({type:O.default.oneOf((0,d.default)(Y.BEST_MODELS_CONTEST_TYPES,"id"))})}),bestModels:O.default.object,contestType:O.default.shape({id:O.default.string,route:O.default.string}),currentUser:O.default.object,hourlyTops:O.default.object,isPending:O.default.bool,isLoggedIn:O.default.bool,loadError:O.default.instanceOf(Error)},(0,B.getActionPropTypes)(Z));var Q=function(e,t){var n=e.auth,r=e.modelsTop,a=r.isPending,o=r.loadError;return{bestModels:(0,K.getBestModels)(e),contestType:z(t),currentUser:n.currentUser,hourlyTops:(0,K.getHourlyTops)(e),isPending:a,isLoggedIn:n.isLoggedIn&&!n.isLoggingOut,loadError:o}},J=function(e){return(0,C.bindActionCreators)(Z,e)};t.default=(0,A.connect)(Q,J)(X)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.regexp=/{[=]?((?:[^}]|[^}])+)}/g}return a(e,[{key:"parse",value:function(e,t){return e.replace(this.regexp,function(e,n){return t[n]||""})}}]),e}(),i=new o;t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=function(e){var t=e.username,n=e.searchString,r=void 0===n?"":n,a=encodeURIComponent(r.trim()).replace(/[*.()]/g,""),o=new RegExp("("+a+")","gi");return a&&-1!==encodeURIComponent(t).search(o)?s.default.createElement("span",{className:"model-name",dangerouslySetInnerHTML:{__html:t.replace(o,"<em>$1</em>")},"data-component-name":"ModelListItemUsername"}):s.default.createElement("span",{className:"model-name","data-component-name":"ModelListItemUsername"},t)};l.propTypes={username:o.default.string.isRequired,searchString:o.default.string},l.defaultProps={searchString:""},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(385),o=r(a),i=n(597),s=r(i),l=n(13),u=r(l),c=n(14),d=r(c),f=n(1),p=r(f),m=n(0),g=r(m),h=n(39),v=r(h),E=n(62),y=function(e){var t=e.htmlIdPrefix,n=e.model,r=n.id,a=n.ratingDebug,i=["indexPosition","indexRating","hasModelCountryBonus","normalizedHistoryRating","normalizedViewersRating","sortingHistory","historyRating","historyRatingListPosition"],l=["averageRating","defaultHistoryRating","historyRatingRatio","viewersRatingRatio","newModelRatio","bonusRatio"],c=!(0,u.default)(a.hasModelCountryBonus),f=!(0,u.default)(a.bonusList),p=!(0,u.default)(a.indexPositionExplanation),m=function(e){return e.map(function(e){var n="",i=a[e];switch(e){case"sortingHistory":n=g.default.createElement("span",{className:"arr"},a[e].map(function(e){return(0,E.roundFloat)(e)}).join(", ")),i="SH";break;case"historyRating":n="AVG(sortingHistory)",i=(0,E.roundFloat)(i);break;case"indexRating":n=a.normalizedHistoryRating+" * "+a.historyRatingRatio+" \n              + "+a.normalizedViewersRating+"  *  "+a.viewersRatingRatio,(c||f)&&(n="("+n+") * "+a.bonusRatio),n=g.default.createElement("div",null,g.default.createElement("div",null,"IndexRating"),g.default.createElement("div",null,n));break;case"averageRating":n="Average rating by all online models",i=(0,E.roundFloat)(i);break;case"defaultHistoryRating":n="Default value for Sorting History: Average Rating * New model Ratio",i=(0,E.roundFloat)(i);break;case"historyRatingRatio":n="History rating ratio";break;case"viewersRatingRatio":n="Viewers rating ratio";break;case"indexPosition":i=a.calculatedIndexPosition||a.indexPosition,n=g.default.createElement("div",null,g.default.createElement("div",null,"Position on index page"),g.default.createElement("div",null,"Original position: ",a.indexPosition),p?g.default.createElement("div",null,a.indexPositionExplanation.join(", ")):"");break;case"normalizedHistoryRating":n="Normalized history rating";break;case"normalizedViewersRating":n="Normalized viewers rating";break;case"hasModelCountryBonus":i=null,c&&(n=g.default.createElement("span",{className:"arr"},a[e].join(", ")),i="x"+a.bonusRatio);break;case"newModelRatio":n="New Model Ratio";break;case"bonusRatio":n=f?g.default.createElement("span",{className:"arr"},"Bonuses list: ",a.bonusList.join(", ")):"No bonuses";break;default:n=e}if(!i)return null;var u=t+"_debug_rating_item_"+r+"_"+(0,o.default)(e);return g.default.createElement("div",{className:"dr-item "+(0,s.default)(e),id:u,key:u,"data-component-name":"ModelListRatingDebug"},i,g.default.createElement(v.default,{placement:(0,d.default)(l,e)?"top":"bottom",targetId:u},n))})};return g.default.createElement("div",{"data-component-name":"ModelListRatingDebug"},g.default.createElement("div",{className:"debug-rating top"},g.default.createElement("div",{className:"dr-wrapper"},m(i))),g.default.createElement("div",{className:"debug-rating bottom"},g.default.createElement("div",{className:"dr-wrapper"},m(l))))};y.propTypes={htmlIdPrefix:p.default.oneOfType([p.default.string,p.default.number]).isRequired,model:p.default.object.isRequired},t.default=y},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BestModelsRules=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(2),d=n(1247),f=r(d),p=n(3),m=r(p),g=n(10),h=r(g),v=n(620),E=r(v),y=t.BestModelsRules=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.isLoggedIn;return u.default.createElement("div",{className:"page best-models-rules"},u.default.createElement("div",{className:"page-header"},u.default.createElement("h1",null,this.t("bestModels.rules.header"))),u.default.createElement("div",{className:"page-block hall"},u.default.createElement("div",null,u.default.createElement("h2",null,this.t("bestModels.rules.gotWebcam"))),u.default.createElement("div",null,u.default.createElement("h3",null,this.t("bestModels.rules.top20")),u.default.createElement("div",{className:"awards"},u.default.createElement(f.default,{fill:"#d0a363",place:"1",size:120},"$2000"),u.default.createElement(f.default,{fill:"#c3c3c3",place:"2",size:120},"$1000"),u.default.createElement(f.default,{fill:"#b78771",place:"3",size:120},"$500"),u.default.createElement(f.default,{fill:"#909090",place:"4",size:120},"$250"),u.default.createElement(f.default,{fill:"#909090",place:"5",size:120},"$250"),u.default.createElement(f.default,{fill:"#909090",place:"6 - 10",size:120},"$100"),u.default.createElement(f.default,{fill:"#909090",place:"11 - 20",size:120},"$50"))),u.default.createElement("div",null),u.default.createElement("div",null,u.default.createElement("h3",null,this.t("bestModels.rules.every3hours")),u.default.createElement("div",{className:"awards"},u.default.createElement(f.default,{fill:"#d0a363",place:"1",size:120},"$20"),u.default.createElement(f.default,{fill:"#c3c3c3",place:"2",size:120},"$10"),u.default.createElement(f.default,{fill:"#b78771",place:"3",size:120},"$5"),u.default.createElement(f.default,{fill:"#909090",place:"4",size:120},"$5"),u.default.createElement(f.default,{fill:"#909090",place:"5",size:120},"$5"))),u.default.createElement("div",null,u.default.createElement("h2",null,this.t("bestModels.rules.annex")))),u.default.createElement("div",{className:"spacer-large"}),u.default.createElement(E.default,{className:"page-block"}),this.renderIf(!e,u.default.createElement("div",{className:"become-model-block text-center"},u.default.createElement(h.default,{type:"link",style:"apply",size:"large",to:"/signup/model"},this.t("button.becomeAModel")))))}}]),t}(m.default),b=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,c.connect)(b)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(r(a),n(0)),i=r(o),s=n(8),l=r(s),u=function(e){var t=e.children,n=e.fill,r=e.place,a=e.size,o={display:"inline-block",position:"relative",textAlign:"center",width:a+"px"},s={bottom:0,left:0,position:"absolute",right:0,top:0},u={color:n,fontSize:a/2-6*r.length+"px",height:a+"px",lineHeight:a/1.5+"px"},c={color:n,fontSize:a/3+"px"};return i.default.createElement("span",{className:"award",style:o},i.default.createElement("div",{className:"award-background",style:s},i.default.createElement(l.default,{img:"award",size:a,fill:n,style:{margin:0}})),i.default.createElement("div",{className:"award-place",style:u},r),i.default.createElement("div",{className:"award-content",style:c},t))};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHourlyTops=t.getBestModels=void 0;var r=n(32),a=n(16),o=function(e){return e.appSettings.data.availableRoutes},i=function(e){return e.users.collection},s=function(e){return e.modelsTop.tops},l=function(e){return e.modelsTop.winnerIds},u=function(e){return e.modelsTop.prizes};t.getBestModels=(0,r.createSelector)([u,l,i,o],function(e,t,n,r){return t.map(function(t,o){var i=(0,a.findById)(n,t);return!i||i.isDeleted?null:{viewCamUrl:i&&r.indexOf("/"+i.username)>-1?"/cams/"+i.username:"/"+i.username,prize:e.get(String(o),""),user:i}}).filter(function(e){return e}).valueSeq()}),t.getHourlyTops=(0,r.createSelector)([u,s,i,o],function(e,t,n,r){return t.map(function(t){return{time:t.time,winners:t.winnerIds.map(function(t,o){var i=(0,a.findById)(n,t);if(!i||i.isDeleted)return null;var s=i&&r.indexOf("/"+i.username)>-1?"/cams/"+i.username:"/"+i.username;return{prize:e.get(String(o),""),viewCamUrl:s,user:i}}).filter(function(e){return e})}}).valueSeq()})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentsPage=void 0;var l=n(142),u=r(l),c=n(145),d=r(c),f=n(6),p=r(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),E=n(0),y=r(E),b=n(2),_=n(31),S=n(4),O=n(134),P=n(23),T=r(P),A=n(301),C=r(A),I=n(135),w=r(I),N=n(22),R=r(N),M=n(19),L=n(7),k=n(194),D=n(391),U=n(622),j=r(U),F=n(625),B=r(F),H=n(12),V=n(41),G=n(38),x=t.DocumentsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.documents",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:D.changedPersonList,action:function(e){var t=e.persons,n=e.routerPush,a=(0,d.default)(t);n(a?r.getPersonRoute(a.id):r.getNewPersonRoute())}},{update:D.savedSelectedPerson,action:function(){r.setState({isEditMode:!1})}},{update:V.currentUserHasChangedAndIsLoggedIn,action:function(e){var t=e.currentUser,n=e.loadStaticContent,r=e.loadDocumentsPageData;t.isModel&&(n(O.STATIC_CONTENT_TYPES.AGREEMENT),r(t.id))}}]),r.getNewPersonRoute=function(){return"/model/documents/add"},r.getPersonRoute=function(e){return"/model/documents/"+e},r.personListItemClickHandler=function(e){var t=(0,p.default)(e,"currentTarget.href");r.state.isEditMode&&(e.preventDefault(),r.setState({confirmationUrl:t}))},r.followUrlConfirmed=function(){var e=r.state.confirmationUrl;r.setState({confirmationUrl:null},function(){return r.props.routerPush(e)})},r.cancelConfirmationUrl=function(){r.setState({confirmationUrl:null})},r.onPersonChange=function(e){r.setState({isEditMode:e})},s=n,i(r,s)}return s(t,e),g(t,[{key:"getDefaultState",value:function(){return m({confirmationUrl:null,isAgreementPopupOpen:!1,isEditMode:!1},this.getNextState(this.props,this.context))}},{key:"getNextState",value:function(e,t){var n=e.isLoading,r=e.selectedPerson,a=e.personId;return{isDataFailed:!n&&!r&&a,isDataPending:n,selectedPerson:r}}},{key:"renderPending",value:function(){return y.default.createElement("div",{className:"documents-page"},y.default.createElement(w.default,{activeRoute:"/model/documents"}),y.default.createElement("div",{className:"page"},y.default.createElement("div",{className:"loader-container"},y.default.createElement(R.default,{isCentered:!0}))))}},{key:"renderReady",value:function(){var e=this,t=this.state,n=t.confirmationUrl,r=t.isPersonsLoading,a=t.selectedPerson,o=this.props,i=o.persons,s=o.personId,l=o.isLoading,c=o.isUpdatingPerson,d=o.user,f=!s||a&&a.statusCombined!==H.MODERATION_STATUSES.approved,p=r&&!i.length,g=!s&&(0,u.default)(i,{statusCombined:H.MODERATION_STATUSES.rejected}),h=(p?[]:i).map(function(t){return m({},t,{onClick:e.personListItemClickHandler})});return y.default.createElement("div",{className:"documents-page","data-component-name":"DocumentsPage"},y.default.createElement(w.default,{activeRoute:"/model/documents"}),y.default.createElement("div",{className:"page"},y.default.createElement("div",{className:"page-header"},y.default.createElement("h1",null,this.t("documentsPage.myDocumentsTitle"))),this.renderIf(i.length||r,function(){return y.default.createElement("div",{className:"documents-page-block"},y.default.createElement(B.default,{isPending:l||c,persons:h,plusItemProps:{onClick:e.personListItemClickHandler},selectedPersonId:s}))}),this.renderIf(g,y.default.createElement("div",{className:"documents-page-block error"},this.t("documentsPage.errors.hasRejectedPerson"))),this.renderIf(f,y.default.createElement(j.default,{isAgreement:!0,canAddNewPerson:!g,person:a,user:d,onPersonChange:this.onPersonChange}))),this.renderIf(n,function(){return y.default.createElement(C.default,{onConfirm:e.followUrlConfirmed,onCancel:e.cancelConfirmationUrl},y.default.createElement("p",null,e.t("documentsPage.confirmNewPersonDataLoss")))}))}}]),t}(T.default);x.checkAccess=M.redirectNotModelToLoginOrIndex;var W={loadStaticContent:O.load,loadDocumentsPageData:k.loadDocumentsPageData,routerPush:_.push};x.propTypes=m({currentUser:v.default.object,isLoggedIn:v.default.bool,isLoading:v.default.bool,isUpdatingPerson:v.default.bool,personId:v.default.number,persons:v.default.arrayOf(v.default.object),selectedPerson:v.default.object,user:v.default.object},(0,L.getActionPropTypes)(W));var Y=function(e,t){var n=e.auth,r=e.persons,a=r.isLoading,o=r.isUpdating,i=n.currentUser,s=n.isLoggedIn,l=n.isLoggingOut,u=s?i.id:0,c=parseInt(t.match.params.personId,10)||null,d=(0,D.getPersons)(e,{userId:u}),f=(0,D.getSelectedPerson)(e,{personId:c,userId:u});return{currentUser:i,isLoggedIn:s&&!l,isLoading:a,isUpdatingPerson:o,persons:d,personId:c,selectedPerson:f,user:(0,G.getCurrentUserProfile)(e)}},K=function(e){return(0,S.bindActionCreators)(W,e)};t.default=(0,b.connect)(Y,K)(x)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(124),c=r(u),d=n(11),f=r(d),p=n(267),m=r(p),g=n(115),h=r(g),v=n(49),E=r(v),y=n(13),b=r(y),_=n(14),S=r(_),O=n(139),P=r(O),T=n(84),A=r(T),C=n(6),I=r(C),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),R=n(1),M=r(R),L=n(0),k=r(L),D=n(2),U=n(572),j=n(3),F=r(j),B=n(58),H=r(B),V=n(40),G=r(V),x=n(22),W=r(x),Y=n(392),K=r(Y),q=n(92),z=r(q),X=n(110),Z=n(27),Q=function(e){function t(){var e,n,r,a;i(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.getActiveErrors=function(e){var t=["documents"].concat(o(e));return(0,S.default)(e,"country")&&t.push("region"),(0,m.default)((0,h.default)(r.props.errors,t),P.default)},r.dropdownSelectHandler=function(e,t){var n=t.value;r.changePerson(e,n)},r.inputChangeHandler=function(e,t){r.changePerson(e,t.target.value)},r.maskedInputChangeHandler=function(e,t){r.changePerson(e,t)},a=n,s(r,a)}return l(t,e),N(t,[{key:"getDefaultState",value:function(){return{fieldsModified:[]}}},{key:"getNextState",value:function(e,t){return(0,E.default)(this.props.errors,e.errors)?{}:{fieldsModified:[]}}},{key:"changePerson",value:function(e,t){var n=(0,c.default)([].concat(o(this.state.fieldsModified),[e])),r=w({},this.props.person,a({},e,t));"country"===e&&(n.push("region"),r.region=null),this.setState({fieldsModified:n}),this.props.onChange({person:r,isReady:(0,b.default)(this.getActiveErrors(n))})}},{key:"renderField",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.props,i=o.isReadOnly,s=o.person,l=this.getActiveErrors(this.state.fieldsModified),u=(0,I.default)(l,e,[]),c=u.length?{details:a({},e,u),message:null}:null,d="person_edit_input_"+e+"_"+this.uid,f=(0,I.default)(s,e),p={Select:function(){return k.default.createElement(z.default,w({className:n.c({error:c}),id:d,isDisabled:i,onSelect:n.dropdownSelectHandler.bind(n,e),value:f},t))},MaskedInput:function(){return k.default.createElement("div",null,k.default.createElement(K.default,w({className:n.c({error:c}),disabled:i,id:d,onChange:n.maskedInputChangeHandler.bind(n,e),value:f},t)))},input:function(){return k.default.createElement("div",null,k.default.createElement(G.default,w({className:n.c({error:c}),disabled:i,id:d,maxLength:100,onChange:n.inputChangeHandler.bind(n,e),value:f||""},t)))}};return k.default.createElement("div",{className:"field-row",key:e},k.default.createElement("div",{className:"field-label"},k.default.createElement("label",null,this.t("personEdit.fieldName."+e),":")),k.default.createElement("div",{className:"field-input"},p[r]?p[r]():p.input()),this.renderIf(c,function(){return k.default.createElement("div",{className:"field-tooltip"},k.default.createElement(H.default,{defaultMessage:null,error:c,fieldName:e,isOneLine:!0,targetId:d}))}))}},{key:"renderInformationForm",value:function(){var e=this,t=this.props.config.data,n=t.countries,r=t.regions,a=this.props,o=a.isReadOnly,i=a.person;return k.default.createElement("form",{className:this.c({"read-only":o})},this.renderField(U.PERSON_EDIT_FIELD_NAMES.FIRST_NAME,{autoComplete:"given-name"}),this.renderField(U.PERSON_EDIT_FIELD_NAMES.LAST_NAME,{autoComplete:"family-name"}),this.renderField(U.PERSON_EDIT_FIELD_NAMES.GENDER,{options:(0,f.default)(Z.USER_GENDER,function(t){return{value:t,label:e.t("gender."+t)}})},"Select"),this.renderField(U.PERSON_EDIT_FIELD_NAMES.BIRTH_DATE,{mask:X.DATE_MASK,value:(0,I.default)(i,"birthDate"),placeholder:X.RENDER_DATE_FORMAT,dateFormat:X.RENDER_DATE_FORMAT},"MaskedInput"),this.renderField(U.PERSON_EDIT_FIELD_NAMES.ID_NUMBER),this.renderField(U.PERSON_EDIT_FIELD_NAMES.ADDRESS,{autoComplete:"street-address"}),this.renderField(U.PERSON_EDIT_FIELD_NAMES.COUNTRY,{isSearchable:!0,options:n.map(function(t){var n=t.code;return{value:n,label:e.t("country."+n)}})},"Select"),this.renderIf(this.hasCountryWithRegions,function(){return e.renderField(U.PERSON_EDIT_FIELD_NAMES.REGION,{isSearchable:!0,options:r[(0,I.default)(i,"country")].map(function(e){return{value:e.code,label:e.title}})},"Select")}),this.renderField(U.PERSON_EDIT_FIELD_NAMES.CITY,{maxLength:50}),this.renderField(U.PERSON_EDIT_FIELD_NAMES.OTHER_NAMES))}},{key:"render",value:function(){var e=this.props,t=e.isPending,n=e.person;return k.default.createElement("div",{className:this.c("person-edit",{"is-pending":t}),"data-component-name":"PersonEdit"},k.default.createElement("h3",null,this.t("personEdit.personalInformation")),this.renderInformationForm(),(0,A.default)(n,"reason")?k.default.createElement("div",{className:"reason"},n.reason):null,t?k.default.createElement(W.default,{size:200,isCentered:!0}):null)}},{key:"hasCountryWithRegions",get:function(){var e=(0,I.default)(this.props.person,"country");return Boolean(e&&this.props.config.data.regions[e])}}]),t}(F.default);Q.propTypes={isPending:M.default.bool,isReadOnly:M.default.bool,errors:M.default.object,onChange:M.default.func,person:M.default.object};var J=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,D.connect)(J)(Q)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(33),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=n(15),f=r(d),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(134),y=n(3),b=r(y),_=n(10),S=r(_),O=n(199),P=r(O),T=n(40),A=r(T),C=n(73),I=r(C),w=n(200),N=function(e){var t=e.modelAgreement,n=e.person,r=e.user,a=c({birthDate:(0,f.default)(new Date(n.birthDate)).format("LL"),companyName:"Technius Ltd.",date:(0,f.default)(new Date).format("LL"),name:n.lastName+" "+n.firstName,otherNames:"—"},(0,l.default)(r,["email","username"]),(0,l.default)(n,["address","idNumber","otherNames"]));return t.replace(/%(\w+)%/g,function(e,t){return a[t]||e})},R=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.modalCloseHandler=function(){s.props.onClose()},s.checkboxChangeHandler=function(e){s.setState({isCheckboxChecked:e.target.checked})},s.submitClickHandler=function(e){e.preventDefault(),s.props.onSign(s.state.text)},s.agreementTextRef=null,s}return i(t,e),u(t,[{key:"getNextState",value:function(e,t){return{isCheckboxChecked:this.props.isSigned,text:e.person.agreeement||N(e)}}},{key:"render",value:function(){var e=this,t=this.props.isSigned,n=this.state,r=n.isCheckboxChecked,a=n.text;return h.default.createElement(P.default,{className:"model-agreement-popup",onClose:this.modalCloseHandler,title:this.t("documentsPage.agreement.modalTitle"),titlePosition:"outside","data-component-name":"AgreementPopup"},h.default.createElement(I.default,null,h.default.createElement("div",{className:"agreement-text",dangerouslySetInnerHTML:{__html:a}})),h.default.createElement("div",{className:"actions"},h.default.createElement("div",{className:"action-agree"},h.default.createElement(A.default,{checked:r,disabled:t,id:"model-agreement-popup-checkbox",onChange:this.checkboxChangeHandler,type:"checkbox"}),h.default.createElement("label",{htmlFor:"model-agreement-popup-checkbox"},this.t("documentsPage.agreement.agreeCheckboxCaption"))),this.renderIf(!t,function(){return h.default.createElement("div",{className:"action-sign"},h.default.createElement(S.default,{disabled:!r,onClick:e.submitClickHandler,style:"apply"},e.t("documentsPage.agreement.signButtonCaption")))})))}}]),t}(b.default);R.propTypes={isSigned:m.default.bool,modelAgreement:m.default.string,onClose:m.default.func.isRequired,onSign:m.default.func.isRequired,person:m.default.object.isRequired,user:m.default.object.isRequired};var M=function(e){var t=e.ui,n=t.windowWidth,r=t.windowHeight;return{modelAgreement:(0,w.getStaticContent)(e,E.STATIC_CONTENT_TYPES.AGREEMENT),windowWidth:n,windowHeight:r}};t.default=(0,v.connect)(M)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(3),g=r(m),h=n(624),v=r(h),E=n(12),y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.person,t=(0,l.default)(e,"statusCombined"),n=this.c("person-status-info",this.props.className,E.MODERATION_STATUS_CLASSES[t]),r=void 0;return r=t===E.MODERATION_STATUSES.approved?p.default.createElement("p",null,this.t("personStatusInfo.approved")):t===E.MODERATION_STATUSES.notReviewed?p.default.createElement("p",null,this.t("personStatusInfo.notReviewed")):p.default.createElement(v.default,null),p.default.createElement("div",{className:n,"data-component-name":"PersonStatusInfo"},r)}}]),t}(g.default);y.propTypes={className:d.default.string,person:d.default.object},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),l=r(s),u=n(14),c=r(u),d=n(6),f=r(d),p=n(116),m=r(p),g=n(171),h=r(g),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},y=n(1),b=r(y),_=n(0),S=r(_),O=n(2),P=n(5),T=n(3),A=r(T),C=n(22),I=r(C),w=n(83),N=r(w),R=n(21),M=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:R.layoutHasChanged,action:function(){r.scrollListener()}}],r.loadMoreIfNeeded=(0,l.default)(function(){!r.props.isLoading&&r.needMore&&r.props.onLoadMore()},100),r.scrollListener=function(){if(r.wrapperRef&&r.isActive){if(!r.isPaginationEnabled)return void r.loadMoreIfNeeded();var e=r.props,t=e.hasMore;e.currentPage===r.firstVisiblePage?r.loadMoreIfNeeded():r.isScrollAfterList?t&&(r.currentPage=r.props.pagesLoadedCount+1):r.currentPage=r.firstVisiblePage}},i=n,o(r,i)}return i(t,e),v(t,[{key:"componentDidMount",value:function(){this.registerEventListener(window,"scroll",(0,l.default)(this.scrollListener,P.DEFAULT_SCROLL_EVENT_DEBOUNCE_WAIT)),E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentDidRender",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];if((e=E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this)).call.apply(e,[this].concat(r)),this.isActive){this.isPaginationEnabled&&this.props.isScrollToCurrentPageEnabled&&this.isCurrentPageLoaded&&!this.isCurrentPageVisible&&this.scrollToCurrentPage(),(0,h.default)(this.loadMoreIfNeeded,0)}}},{key:"componentWillUnmount",value:function(){this.loadMoreIfNeeded.cancel(),E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"scrollToCurrentPage",value:function(){var e=1===this.props.currentPage&&this.isScrollBeforeList,t=!this.props.hasMore&&this.props.currentPage===this.props.pagesLoadedCount&&this.isScrollAfterList;if(!e&&!t){var n=N.default.get(),r=this.boundingClientRect.top,a=this.currentPageVerticalRange.top;N.default.set(n+r+a)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,a=t.hasMore,o=t.isLoading,i=t.stubClassName,s=a&&o,l=!S.default.Children.count(n)||s;return S.default.createElement("div",{ref:function(t){e.wrapperRef=t},className:r,"data-component-name":"InfiniteScroll"},n,this.renderIf(l,function(){return S.default.createElement("div",{className:i},e.renderIf(s,function(){return S.default.createElement(I.default,{isCentered:!0})}))}))}},{key:"isPaginationEnabled",get:function(){return this.props.onPageChange}},{key:"needMore",get:function(){return this.isPaginationEnabled&&!this.isCurrentPageLoaded||this.props.hasMore&&this.hasLimitReached}},{key:"hasLimitReached",get:function(){return!!this.boundingClientRect&&this.boundingClientRect.bottom<this.windowHeight+this.props.threshold}},{key:"isCurrentPageLoaded",get:function(){return this.props.currentPage<=this.props.pagesLoadedCount}},{key:"boundingClientRect",get:function(){return this.wrapperRef?this.wrapperRef.getBoundingClientRect():void 0}},{key:"currentPageVerticalRange",get:function(){var e=this.pageHeight,t=(this.props.currentPage-1)*e;return{bottom:t+e,top:t}}},{key:"pageHeight",get:function(){var e=this.boundingClientRect;return(e.bottom-e.top)*(this.props.itemsPerPage/this.props.itemsLoadedCount)}},{key:"windowHeight",get:function(){return(0,f.default)(window,"innerHeight")||(0,f.default)(document,"documentElement.clientHeight")||(0,f.default)(document,"body.clientHeight")||0}},{key:"isCurrentPageVisible",get:function(){return(0,c.default)(this.visiblePages,this.props.currentPage)}},{key:"visiblePages",get:function(){for(var e=this.pageHeight,t=-this.boundingClientRect.top,n=t+this.windowHeight,r=[],a=1;a<=this.props.pagesLoadedCount;a+=1){var o=(a-1)*e,i=o+e-5,s=o<t&&i>t,l=o<n&&i>n,u=o>t&&i<n;(l||s||u)&&r.push(a)}return r}},{key:"firstVisiblePage",get:function(){return(0,m.default)(this.visiblePages)}},{key:"currentPage",set:function(e){var t=this.props,n=t.currentPage,r=t.onPageChange;r&&e!==n&&r(e)}},{key:"isScrollBeforeList",get:function(){return this.boundingClientRect.top>0}},{key:"isScrollAfterList",get:function(){return this.boundingClientRect.bottom<0}},{key:"isActive",get:function(){return this.props.currentPage>1||this.props.pagesLoadedCount>1||this.props.hasMore}}]),t}(A.default);M.propTypes={className:b.default.string,currentPage:b.default.number,hasMore:b.default.bool,isLoading:b.default.bool,isScrollToCurrentPageEnabled:b.default.bool,itemsLoadedCount:b.default.number,itemsPerPage:b.default.number,onLoadMore:b.default.func.isRequired,onPageChange:b.default.func,pagesLoadedCount:b.default.number,stubClassName:b.default.string,threshold:b.default.number},M.defaultProps={pagesLoadedCount:1,threshold:500};var L=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight}};t.default=(0,O.connect)(L)(M)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MobileAppPage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(24),h=n(556),v=n(17),E=r(v),y=n(23),b=r(y),_=n(135),S=r(_),O=n(8),P=r(O),T=n(5),A=n(56),C=r(A),I=n(19),w=n(188),N=n(21),R=t.MobileAppPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.mobileApp",r.closeRequirementsNotification=function(){C.default.set("mobileAppPageRequirementNotificationShown",1),r.setState({requirementsNotificationShown:!0})},r.renderMobileAppRequirementsNotification=function(){return r.state.requirementsNotificationShown?null:f.default.createElement("div",{className:"page legacy-container-small mobile-app-page-requirements"},f.default.createElement("div",{className:"icon-wrapper"},f.default.createElement(P.default,{img:"exclamation",size:16})),f.default.createElement("div",{className:"text"},r.t("mobileAppPage.installationInstruction.requirementsNotification")),f.default.createElement("div",{className:"close-wrapper",onClick:r.closeRequirementsNotification},f.default.createElement(P.default,{img:"close-2",size:10})))},i=n,o(r,i)}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{requirementsNotificationShown:C.default.has("mobileAppPageRequirementNotificationShown")}}},{key:"componentDidMount",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.loadData()}},{key:"renderReady",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.getStaticUrl,a=t.hostRoot,o=t.qrCodeHash;if(!n||!n.isModel)return null;var i=T.BROWSER_CAPABILITIES.android,s="/mobile_auth/"+o,l="https://"+a+"/api/mobile/v1/qr/?draw=1";return f.default.createElement("div",{className:"mobile-app-page","data-component-name":"MobileAppPage"},f.default.createElement(S.default,{activeRoute:"/mobile"}),this.renderMobileAppRequirementsNotification(),f.default.createElement("div",{className:"page legacy-container-small"},f.default.createElement("div",{className:"page-header"},f.default.createElement("h1",null,this.t("mobileAppPage.title"))),f.default.createElement("div",{className:"mobile-app-page-block"},f.default.createElement("h3",null,this.t("mobileAppPage.installationInstruction.title")),f.default.createElement("div",{className:"steps"},f.default.createElement("div",{className:"step-item"},f.default.createElement("img",{src:r("cams/components/pages/MobileAppPage/images/mobile-step-1.png")}),f.default.createElement(E.default,{elements:{strong:f.default.createElement("strong",null)},messageId:"mobileAppPage.installationInstruction.steps.openSettings"})),f.default.createElement("div",{className:"step-item"},f.default.createElement("img",{src:r("cams/components/pages/MobileAppPage/images/mobile-step-2.png")}),f.default.createElement(E.default,{elements:{strong:f.default.createElement("strong",null)},messageId:"mobileAppPage.installationInstruction.steps.findSecurity"})),f.default.createElement("div",{className:"step-item"},f.default.createElement("img",{src:r("cams/components/pages/MobileAppPage/images/mobile-step-3.png")}),f.default.createElement(E.default,{elements:{strong:f.default.createElement("strong",null)},messageId:"mobileAppPage.installationInstruction.steps.findUnknownSources"})),this.renderIf(!i,function(){return f.default.createElement("div",{className:"step-item"},f.default.createElement("img",{src:r("cams/components/pages/MobileAppPage/images/mobile-step-4.png")}),f.default.createElement(E.default,{elements:{link:f.default.createElement(g.Link,{to:"/mobile"},(0,w.insertInvisibleWordBreaks)(T.BASE_URL+"/mobile"))},messageId:"mobileAppPage.installationInstruction.steps.openLinkAndLogin"}))}),f.default.createElement("div",{className:"step-item"},f.default.createElement("img",{src:r("cams/components/pages/MobileAppPage/images/mobile-step-5.png")}),f.default.createElement(E.default,{elements:{link:f.default.createElement("a",{href:"https://stripchat.com/app",target:"_blank"},(0,w.insertInvisibleWordBreaks)("stripchat.com/app"))},messageId:"mobileAppPage.installationInstruction.steps.downloadApp"})),this.renderIf(i,function(){return f.default.createElement("div",{className:"step-item"},f.default.createElement("img",{src:r("cams/components/pages/MobileAppPage/images/mobile-step-6.png")}),f.default.createElement(E.default,{elements:{link:f.default.createElement("a",{href:s}),strong:f.default.createElement("strong",null)},messageId:"mobileAppPage.installationInstruction.steps.tapToOpenApp"}))},function(){return f.default.createElement("div",{className:"step-item"},f.default.createElement("div",{className:"qr-wrapper"},f.default.createElement("img",{src:r("cams/components/pages/MobileAppPage/images/mobile-step-6qrback.png")}),f.default.createElement("img",{className:"qr-image",src:l,alt:e.t("mobileAppPage.qrCode")})),f.default.createElement(E.default,{elements:{strong:f.default.createElement("strong",null)},messageId:"mobileAppPage.installationInstruction.steps.scanQR"}))}),f.default.createElement("div",{className:"step-item"})))))}}]),t}(b.default);R.checkAccess=function(e,t,n){return T.BROWSER_CAPABILITIES.android||!T.BROWSER_CAPABILITIES.iOS&&!T.BROWSER_CAPABILITIES.windowsPhone?(0,I.redirectNotModelToLoginOrIndex)(e,t,n):(0,I.redirect)(e,t,"/")},R.propTypes={currentUser:c.default.shape({isModel:c.default.bool}),getStaticUrl:c.default.func.isRequired,hostRoot:c.default.string,isLoggedIn:c.default.bool.isRequired,isPending:c.default.bool.isRequired,qrCodeHash:c.default.string};var M=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.config.data.hostRoot,i=e.mobileApp,s=i.isPending,l=i.qrCodeHash;return{currentUser:n,getStaticUrl:function(t){return(0,N.getStaticUrl)(e,t)},hostRoot:o,isLoggedIn:r&&!a,isPending:s,qrCodeHash:l}},L=function(e){return(0,m.bindActionCreators)({loadData:h.loadData},e)};t.default=(0,p.connect)(M,L)(R)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FavoritesPage=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(23),h=r(g),v=n(19),E=n(108),y=n(1256),b=r(y),_=n(41),S=t.FavoritesPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.favorites",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:_.currentUserHasChangedAndIsLoggedIn,action:function(e){(0,e.loadFavorites)()}}]),s=n,i(r,s)}return s(t,e),l(t,[{key:"getNextState",value:function(e,t){return{isDataPending:e.isPending}}},{key:"renderReady",value:function(){var e=this.props.isPending;return f.default.createElement("div",{className:"page favorites-page model-list-container","data-component-name":"FavoritesPage"},f.default.createElement(b.default,{isEditable:!0,isPending:e}))}}]),t}(h.default);S.checkAccess=v.redirectGuestToLoginOrIndex,S.propTypes={currentUser:c.default.object,loadFavorites:c.default.func,isLoggedIn:c.default.bool,isPending:c.default.bool.isRequired};var O=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.favorites;return{currentUser:n,isLoggedIn:r&&!a,isPending:o.isPending}},P=function(e){return(0,m.bindActionCreators)({loadFavorites:E.load},e)};t.default=(0,p.connect)(O,P)(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(173),E=r(v),y=n(7),b=n(108),_=n(97),S=n(1257),O=r(S),P=n(37),T=n(44),A=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.loadMoreHandler=function(){var e=r.props,t=e.isPending,n=e.loadMoreUsers;t||n(r.props.favoriteIds)},r.editHandler=function(e){(0,l.default)(e)||r.props.removeFavorites(e)},i=n,o(r,i)}return i(t,e),c(t,[{key:"renderTitle",value:function(){return m.default.createElement("div",{className:this.c("favorites-title","page-header")},m.default.createElement("h1",null,this.t("myFavorites")))}},{key:"listItems",get:function(){return this.props.favorites.map(function(e){return m.default.createElement(O.default,{favorite:e.model,id:e.model.id,key:e.model.id})})}},{key:"hasMore",get:function(){return this.props.hasMore}},{key:"isLoadingMore",get:function(){return this.props.isUsersPending}},{key:"onLoadMore",get:function(){return this.loadMoreHandler}},{key:"additionalClassNames",get:function(){return this.c(this.props.className,"favorites")}},{key:"additionalInfiniteScrollProps",get:function(){return{stubClassName:"model-list-item-stub"}}}]),t}(E.default),C={loadMoreUsers:P.loadMore,removeFavorites:b.remove};A.propTypes=u({},A.propTypes,{favorites:f.default.array,hasMore:f.default.bool,isPending:f.default.bool.isRequired,isUsersPending:f.default.bool.isRequired},(0,y.getActionPropTypes)(C));var I=function(e){var t=e.users,n=e.ui,r=n.windowWidth,a=n.windowHeight,o=(0,_.getFavoriteIds)(e);return{favoriteIds:o,favorites:(0,_.getSortedFavorites)(e),hasMore:(0,T.getMissingUserIds)(e,o).length>0,isUsersPending:t.isPending,windowHeight:a,windowWidth:r}},w=function(e){return(0,h.bindActionCreators)(C,e)};t.default=(0,g.connect)(I,w)(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(10),g=r(m),h=n(8),v=r(h),E=n(302),y=r(E),b=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(){var e=r.props,t=e.favorite;(0,e.onDeleteClick)(t.id)},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.favorite,n=e.isDeleted,r=e.isEditMode,a=void 0;return r&&(a=n?d.default.createElement(g.default,{className:"btn-restore",onClick:this.clickHandler},this.t("button.restore")):d.default.createElement("span",{className:"remove-button",onClick:this.clickHandler},d.default.createElement(v.default,{img:"close-4"}))),d.default.createElement(y.default,{model:t,isFavoritedHeartHidden:!0,"data-component-name":"FavoritesListItem"},a)}}]),t}(p.default);b.propTypes={favorite:u.default.object,isDeleted:u.default.bool,isEditMode:u.default.bool,onDeleteClick:u.default.func},t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.IndexPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(83),E=r(v),y=n(118),b=n(131),_=n(386),S=r(_),O=n(1259),P=r(O),T=n(626),A=r(T),C=n(627),I=r(C),w=n(12),N=n(222),R=n(151),M=r(R),L=n(23),k=r(L),D=n(5),U=n(19),j=n(7),F=n(129),B=t.IndexPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:["tagAlias","searchString"],action:function(e){r.updateFilterParams(e)}}]),r.updateFilterParams=function(e){var t=e.tagAlias,n=e.searchString;r.props.saveFilterParams({tag:t,searchString:n}),r.props.saveActiveFilterParams()},s=n,i(r,s)}return s(t,e),u(t,[{key:"componentWillMount",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this),this.updateFilterParams(this.props),this.props.resetLimit()}},{key:"componentDidMount",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);var e=this.props,n=e.location,r=e.removeSubscriptionForMail,a=e.removeSubscriptionForPromo,o=e.route,i=(0,F.getParams)(n,!0),s=i.unsubscribeKey;if(s&&r(s),"/unsubscribe"===o.path){a(i.userId,n.search)}D.BROWSER_CAPABILITIES.android&&E.default.set(0)}},{key:"renderMeta",value:function(){var e=this.props.tag;return m.default.createElement(M.default,{title:this.twl("seo.title.tag."+e),description:this.twl("seo.description.tag."+e)})}},{key:"renderPageHeader",value:function(){var e=this.props,t=e.tag,n=e.searchString;return m.default.createElement("div",{className:"index-page-header-container"},m.default.createElement("div",{className:"index-page-header"},m.default.createElement("h1",null,n?this.t("seo.indexHeadings.searchResults"):this.t("seo.indexHeadings.tags."+(t||w.DEFAULT_PSEUDO_TAG))),m.default.createElement(P.default,null)))}},{key:"renderReady",value:function(){return m.default.createElement("div",{className:"index-page","data-component-name":"IndexPage"},m.default.createElement(S.default,null),m.default.createElement(A.default,null),m.default.createElement(I.default,{isLazyLoading:!0,hasFiltersColumn:!0},this.renderPageHeader()))}}]),t}(k.default);B.checkAccess=U.redirectModelsAndStudiosToIndexInsteadBuyTokensPage;var H={removeSubscriptionForMail:b.removeForMail,removeSubscriptionForPromo:b.removeForPromo,resetLimit:y.resetLimit,saveActiveFilterParams:y.saveActiveFilterParams,saveFilterParams:y.saveFilterParams};B.propTypes=l({currentUser:f.default.object,searchString:f.default.string,tag:f.default.string,tagAlias:f.default.string},(0,j.getActionPropTypes)(H));var V=function(e,t){var n=e.auth.currentUser,r=t.match.params.tagGroup?t.match.params.tagGroup+"/":"",a=r+(t.match.params.tag||t.route.tag||""),o=(0,N.getAllAliasesTags)(e)[a]||w.DEFAULT_PSEUDO_TAG;return{currentUser:n,searchString:t.match.params.searchString||"",tag:o,tagAlias:a}},G=function(e){return(0,h.bindActionCreators)(H,e)};t.default=(0,g.connect)(V,G)(B)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(11),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(9),b=n(3),_=r(b),S=n(8),O=r(S),P=n(5),T=n(7),A=n(21),C=n(118),I=n(12),w=n(45),N=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:A.hasInterfaceBlockChanged,action:function(e){return r.interfaceBlockChangeHandler(e)}}],r.openDropdownHandler=function(e){e.preventDefault(),e.stopPropagation(),r.state.isOpen?r.props.releaseInterface():r.props.blockInterface(e.target)},r.toggleMobileBlockShowing=function(){r.setState({isMobileBlockOpen:!r.state.isMobileBlockOpen})},r.interfaceBlockChangeHandler=function(e){var t=e.isInterfaceBlocked,n=e.currentBlockingComponent;r.setState({isOpen:t&&r.rootRef&&r.rootRef.contains(n)})},r.itemClickHandler=function(e){r.props.saveModelSortType(e)},r.nativeSelectOnChangeHandler=function(e){var t=e.target.value;r.props.saveModelSortType(t)},r.renderNativeSelect=function(){var e=r.props.currentSortingType;return P.BROWSER_CAPABILITIES.desktop?null:h.default.createElement("select",{className:"model-sorting-mobile-select",value:e,onChange:r.nativeSelectOnChangeHandler},(0,c.default)(I.ONLINE_MODELS_SORTING_TYPES_ORDERED,function(e){return h.default.createElement("option",{key:e,value:e},r.t("modelSorting.types."+e))}))},r.renderOpenedMobileBlock=function(){var e=r.state.isMobileBlockOpen;return h.default.createElement("div",{className:r.c("model-sorting-mobile-content",{"content-hidden":!e})},r.renderDropdown())},r.renderDropdown=function(){var e=r.state.isOpen,t=r.props.currentSortingType,n=r.t("modelSorting.types."+t);return h.default.createElement("div",{className:"model-sorting-dropdown-wrapper"},h.default.createElement("div",{className:"model-sorting-dropdown-label"},r.t("modelSorting.sortByLabel")),h.default.createElement("div",null,h.default.createElement("div",{onClick:P.BROWSER_CAPABILITIES.desktop?r.openDropdownHandler:null,className:r.c("model-sorting-dropdown-trigger",{active:e}),title:n},h.default.createElement("label",{className:"model-sorting-current-type"},n,r.renderNativeSelect()),h.default.createElement("span",{className:"selectbox-arrow"},h.default.createElement(O.default,{img:"selectbox",size:10}))),r.renderOpenedDropDown()))},r.renderMobileLayout=function(){var e=r.state.isMobileBlockOpen;return h.default.createElement("div",{className:"model-sorting-mobile-layout"},h.default.createElement("div",{className:r.c("model-sorting-trigger-mobile",{active:e}),onClick:r.toggleMobileBlockShowing},h.default.createElement(O.default,{img:"settings-sliders"})),r.renderOpenedMobileBlock())},r.renderDesktopLayout=function(){return h.default.createElement("div",{className:"model-sorting-desktop-layout"},r.renderDropdown())},i=n,o(r,i)}return i(t,e),f(t,[{key:"getDefaultState",value:function(){return{isOpen:!1,isMobileBlockOpen:!1}}},{key:"renderOpenedDropDown",value:function(){var e=this;return this.state.isOpen&&P.BROWSER_CAPABILITIES.desktop?h.default.createElement("div",{className:"model-sorting-dropdown-content"},(0,c.default)(I.ONLINE_MODELS_SORTING_TYPES_ORDERED,function(t){var n=e.props.currentSortingType===t;return h.default.createElement("div",{key:t,className:e.c("model-sorting-type-item",{active:n}),onClick:(0,l.default)(e.itemClickHandler,t)},e.renderIf(n,function(){return h.default.createElement(O.default,{img:"check-1"})}),e.t("modelSorting.types."+t))})):null}},{key:"render",value:function(){var e=this;return this.props.isComponentHidden?null:h.default.createElement("div",{className:"model-sorting-dropdown",ref:function(t){e.rootRef=t},"data-component-name":"ModelSortingDropdown"},this.renderDesktopLayout(),this.renderMobileLayout())}}]),t}(_.default),R={blockInterface:y.blockInterface,releaseInterface:y.releaseInterface,saveModelSortType:C.saveModelSortType};N.propTypes=d({currentBlockingComponent:m.default.object,currentSortingType:m.default.string,isInterfaceBlocked:m.default.bool.isRequired,isComponentHidden:m.default.bool},(0,T.getActionPropTypes)(R)),N.defaultProps={isOpen:!1};var M=function(e){var t=e.ui,n=t.currentBlockingComponent,r=t.isInterfaceBlocked,a=e.modelFilter.searchString,o=Boolean(a);return{currentBlockingComponent:n,currentSortingType:(0,w.getCurrentModelSortingType)(e),isInterfaceBlocked:r,isComponentHidden:o}},L=function(e){return(0,E.bindActionCreators)(R,e)};t.default=(0,v.connect)(M,L)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(18),v=n(4),E=n(3),y=r(E),b=n(8),_=r(b),S=n(7),O=n(118),P=n(87),T=n(302),A=r(T),C=n(1261),I=r(C),w=n(1262),N=r(w),R=n(97),M=n(45),L=n(60),k=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.modelListItemClickHandler=function(e){var t=e.currentTarget.dataset,n=t.snapshotTimestamp,a=t.modelId;r.props.onModelItemClicked(Number(a),n),r.props.saveActiveFilterParams()},r.getListItems=function(){var e=r.props,t=e.base64Previews,n=e.excludeIds,a=e.favoriteIds,o=e.isOnlineStatusVisible;return e.models.filter(function(e){return!(0,l.default)(n,e.id)}).valueSeq().map(function(e){return m.default.createElement(A.default,{base64Preview:t[e.id],clickHandler:r.modelListItemClickHandler,isStatusVisible:o,isInFavorites:a.indexOf(e.id)>-1,key:e.id,model:e})})},r.renderEmpty=function(){return r.props.searchMode?r.renderNoSearchResults():m.default.createElement("div",{className:"model-list empty"},m.default.createElement(_.default,{img:"user-guest-1"}),m.default.createElement("div",{className:"empty-list-title"},r.t("noModelsOnline")))},r.renderNoSearchResults=function(){return m.default.createElement("div",{className:"model-list no-results"},m.default.createElement(_.default,{img:"search-2",size:100}),m.default.createElement("p",{className:"no-search-results"},r.t("searchResultsIsEmpty")))},i=n,o(r,i)}return i(t,e),c(t,[{key:"renderListContainer",value:function(){var e=this.props,t=e.isPaginated,n=e.isLazyLoading,r=e.isPaginatedChildrenPerPageMode,a=this.getListItems();return t?m.default.createElement(N.default,{isPaginatedChildrenPerPageMode:r},a):n?m.default.createElement(I.default,null,a):0===a.size?this.renderEmpty():m.default.createElement("div",{className:"model-list"},a)}},{key:"render",value:function(){return this.renderListContainer()}}]),t}(y.default),D={onModelItemClicked:P.onModelItemClicked,saveActiveFilterParams:O.saveActiveFilterParams,startWizardWithActionOnEnter:L.startWizardWithActionOnEnter};k.propTypes=u({excludeIds:f.default.arrayOf(f.default.number),favoriteIds:f.default.arrayOf(f.default.number),isOnlineStatusVisible:f.default.bool,isPaginatedChildrenPerPageMode:f.default.bool,isPaginated:f.default.bool,searchMode:f.default.bool,models:f.default.instanceOf(h.Iterable).isRequired},(0,S.getActionPropTypes)(D)),k.defaultProps={isLazyLoading:!1,isOnlineStatusVisible:!0,isPaginated:!1,isPaginatedChildrenPerPageMode:!1};var U=function(e){var t=e.modelFilter,n=e.modelsOnline,r=t.searchString,a=t.tagAlias,o=t.tagKey;return{filteredCount:n.filteredCount,base64Previews:(0,M.getBase64Previews)(e),favoriteIds:(0,R.getAllFavoriteIds)(e),paginatedListMemoizationKey:r+"-"+a+"-"+o,searchMode:(0,M.getSearchFormStatus)(e)}},j=function(e){return(0,v.bindActionCreators)(D,e)};t.default=(0,g.connect)(U,j)(k)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),l=r(s),u=n(6),c=r(u),d=n(36),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},h=n(18),v=n(1),E=r(v),y=n(0),b=r(y),_=n(2),S=n(4),O=n(118),P=n(87),T=n(292),A=n(12),C=n(45),I=n(3),w=r(I),N=n(8),R=r(N),M=n(22),L=r(M),k=n(7),D=n(83),U=r(D),j=n(21),F=200,B=function(e){return"undefined"==typeof window?0:(0,j.getRowCount)()*e},H=function(e,t){if("undefined"==typeof window)return A.SSR_VISIBLE_MODELS_COUNT;var n=U.default.get(),r=Math.ceil((n+t)/(0,j.getViewportHeight)());return Math.ceil((r+4-1)/4)*(4*e)},V=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:["isPending"],action:function(e){e.isPending||r.clearOnlineModelsDebounced.cancel()}},{update:C.hasFilterParamsChanged,action:function(){r.clearOnlineModelsDebounced()}},{update:j.layoutHasChanged,action:function(){r.recalculateCapacity()}}],r.clearOnlineModelsDebounced=(0,f.default)(function(){r.props.clearOnlineModels()},A.DELAY_FOR_SHOWING_STAB_ITEMS),r.onScrollHandler=(0,l.default)(function(){var e=r.state,t=e.headerHeight,n=e.pageCapacity;r.performUpdateLimit(H(n,t))},F),r.getDOMRelatedValues=function(){var e=(0,c.default)(r.containerRef,"offsetTop",0);return{columnCount:(0,j.getColumnCount)(),headerHeight:e}},r.recalculateCapacity=function(){var e=r.getDOMRelatedValues(),t=e.columnCount,n=e.headerHeight,a=B(t);r.setState({columnCount:t,headerHeight:n,pageCapacity:a},function(){return r.performUpdateLimit(H(a,n))})},r.updateInitLimit=function(){var e=r.getDOMRelatedValues(),t=e.columnCount,n=e.headerHeight,a=B(t),o=H(a,n);r.props.saveApiFilterParams({limit:o,isInitLimit:!0})},r.performUpdateLimit=function(e){e>r.props.limit&&r.props.saveApiFilterParams({limit:e})},r.containerRefHandler=function(e){r.containerRef=e,r.setState(p({},r.getDOMRelatedValues()))},r.getFilteredChildren=function(){var e=r.props,t=e.isAllModelsLoaded,n=e.children;if(t)return n;var a=n.size,o=r.state.columnCount,i=a%o;return i>0?n.slice(0,-i):n},r.renderEmpty=function(){return b.default.createElement("div",{className:"model-list empty"},b.default.createElement(R.default,{img:"user-guest-1"}),b.default.createElement("div",{className:"empty-list-title"},r.t("noModelsOnline")))},i=n,o(r,i)}return i(t,e),m(t,[{key:"componentDidMount",value:function(){g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.registerEventListener(document,"scroll",this.onScrollHandler),this.recalculateCapacity(),this.updateInitLimit()}},{key:"componentWillUnmount",value:function(){g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.clearOnlineModelsDebounced.cancel()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isPending;return n||0!==t.size?b.default.createElement("div",{className:"model-list lazy-load-model-list",ref:this.containerRefHandler,"data-component-name":"LazyLoadModelList"},this.getFilteredChildren(),this.renderIf(n,function(){return b.default.createElement("div",{className:"loader-wrapper"},b.default.createElement("div",{className:"loader-wrapper-content model-list-item"},b.default.createElement("div",null,b.default.createElement(L.default,{isCentered:!0}))))})):this.renderEmpty()}}]),t}(w.default),G={clearOnlineModels:P.clearOnlineModels,loadModels:P.load,searchModels:T.search,saveApiFilterParams:O.saveApiFilterParams};V.propTypes=p({excludeIds:E.default.arrayOf(E.default.number),models:E.default.instanceOf(h.Iterable),searchString:E.default.string},(0,k.getActionPropTypes)(G)),V.defaultProps={excludeIds:[]};var x=function(e){var t=e.modelFilter,n=t.searchString,r=t.tagAlias,a=t.limit,o=e.modelsOnline,i=o.collection,s=o.filteredCount,l=o.isPending,u=o.isInitialLoad,c=e.ui,d=c.windowWidth,f=c.windowHeight;return{isAllModelsLoaded:!u&&!l&&i.size>=s,isPending:u||l,limit:a,searchString:n,tagAlias:r,windowHeight:f,windowWidth:d}},W=function(e){return(0,S.bindActionCreators)(G,e)};t.default=(0,_.connect)(x,W)(V)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(6),u=r(l),c=n(36),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},g=n(18),h=r(g),v=n(1),E=r(v),y=n(0),b=r(y),_=n(2),S=n(4),O=n(118),P=n(87),T=n(12),A=n(63),C=r(A),I=n(8),w=r(I),N=n(628),R=r(N),M=n(3),L=r(M),k=n(7),D=n(21),U=n(45),j=n(1264),F=r(j),B=function(){return 3*(0,D.getColumnCount)()},H=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.propsUpdateToActionsMap=[{update:["isModelsOnlinePending"],action:function(e){e.isModelsOnlinePending||(r.showStubItemsDebounced.cancel(),r.setState({isPaginationButtonsHidden:!1}))}},{update:U.hasFilterParamsChanged,action:function(){r.showStubItemsDebounced()}}],r.showStubItemsDebounced=(0,d.default)(function(){r.setState({isPaginationButtonsHidden:!0},r.props.showStubItems)},T.DELAY_FOR_SHOWING_STAB_ITEMS),r.getStubItems=function(){var e=B();return h.default.Seq([].concat(a([].concat(a(new Array(e))).map(function(e,t){return b.default.createElement(F.default,{key:t})}))))},r.updateInitLimit=function(){var e=(0,u.default)(C.default.get("modelListApiFilterParams"),"offset",0);r.props.saveApiFilterParams({limit:B(),offset:e,isInitLimit:!0})},r.getPaginatedFilterParams=function(e,t,n){return{limit:n,offset:e?(e-1)*n:0}},r.onPaginatedListPageChange=function(e,t,n){var a=r.getPaginatedFilterParams(e,t,n),o=a.limit,i=a.offset;r.props.isPaginatedChildrenPerPageMode&&(r.props.saveApiFilterParams({limit:o,offset:i}),r.showStubItemsDebounced())},r.renderEmpty=function(){return b.default.createElement("div",{className:"model-list empty"},b.default.createElement(w.default,{img:"user-guest-1"}),b.default.createElement("div",{className:"empty-list-title"},r.t("noModelsOnline")))},s=n,i(r,s)}return s(t,e),p(t,[{key:"getDefaultState",value:function(){return{isPaginationButtonsHidden:!1}}},{key:"componentDidMount",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.updateInitLimit()}},{key:"componentWillUnmount",value:function(){this.showStubItemsDebounced.cancel()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.filteredCount,r=e.isPaginatedChildrenPerPageMode,a=e.paginatedListMemoizationKey,o=e.shouldShowStubItems,i=o?this.getStubItems():t;if(0===i.size)return this.renderEmpty();var s=r?n:t.size;return b.default.createElement("div",{className:"paginated model-list","data-component-name":"PaginatedModelList"},b.default.createElement(R.default,{defaultPageSize:B(),isChildrenPerPageMode:r,itemsCount:s,onPageChange:this.onPaginatedListPageChange,rows:3,updateKey:a,hiddenButtons:this.state.isPaginationButtonsHidden},i))}}]),t}(L.default),V={saveApiFilterParams:O.saveApiFilterParams,showStubItems:P.showStubItems};H.propTypes=f({children:E.default.instanceOf(g.Iterable),filteredCount:E.default.number,isModelsOnlinePending:E.default.bool,paginatedListMemoizationKey:E.default.string,shouldShowStubItems:E.default.bool},(0,k.getActionPropTypes)(V));var G=function(e){var t=e.modelFilter,n=e.modelsOnline,r=n.filteredCount,a=n.isPending,o=n.shouldShowStubItems,i=t.searchString,s=t.tagAlias;return{filteredCount:r,isModelsOnlinePending:a,paginatedListMemoizationKey:i+"-"+s+"-"+t.tagKey,shouldShowStubItems:o,tagAlias:s,searchString:i}},x=function(e){return(0,S.bindActionCreators)(V,e)};t.default=(0,_.connect)(G,x)(H)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(3),m=r(p),g=n(629),h=r(g),v=n(21),E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.getPagesCount=function(){return Math.ceil(r.props.itemsCount/r.props.pageSize)},i=n,o(r,i)}return i(t,e),s(t,[{key:"renderMobileButtons",value:function(){var e=this.props,t=e.currentPage,n=e.hiddenButtons,r=e.pageChangeCallback,a=this.getPagesCount(),o=a,i=[];if(a<7){for(var s=1;s<=a;s+=1)i.push(d.default.createElement(h.default,{key:s,type:"page",active:t===s,onClick:r,pageNumber:s,isHidden:n}));return i}if(t<=3)for(var l=1;l<=3;l+=1)i.push(d.default.createElement(h.default,{key:l,type:"page",active:t===l,onClick:r,pageNumber:l,isHidden:n,isDisabled:t===l}));else i.push(d.default.createElement(h.default,{key:1,type:"page",active:1===t,onClick:r,pageNumber:1,isHidden:n,isDisabled:1===t}));if(t>=4){var u=Math.round((t-1)/2);i.push(d.default.createElement(h.default,{key:u,type:"ellipsis",onClick:r,pageNumber:u,isHidden:n}))}if(t>3&&t<=a-3&&i.push(d.default.createElement(h.default,{key:t,type:"page",active:!0,onClick:r,pageNumber:t,isHidden:n})),t<=a-3){var c=Math.floor(t+(a-t)/2);i.push(d.default.createElement(h.default,{key:c,type:"ellipsis",onClick:r,pageNumber:c,isHidden:n}))}if(t>a-3)for(var f=a-3+1;f<=a;f+=1)i.push(d.default.createElement(h.default,{key:f,type:"page",active:t===f,onClick:r,pageNumber:f,isHidden:n,isDisabled:t===f}));else i.push(d.default.createElement(h.default,{key:o,type:"page",active:t===o,onClick:r,pageNumber:o,isHidden:n,isDisabled:t===o}));return i}},{key:"renderButtons",value:function(){var e=this.props,t=e.currentPage,n=e.pageChangeCallback,r=e.hiddenButtons,a=this.getPagesCount(),o=a,i=[],s=t,l=s;if(a<10){for(var u=1;u<=a;u+=1)i.push(d.default.createElement(h.default,{key:u,type:"page",active:t===u,onClick:n,pageNumber:u,isHidden:r,isDisabled:t===u}));return i}if(t<4?s=4:t>a-4&&(s=a-4+1),i.push(d.default.createElement(h.default,{key:1,type:"page",active:1===t,onClick:n,pageNumber:1,isHidden:r,isDisabled:1===t})),t>4){var c=Math.round((s-1)/2);i.push(d.default.createElement(h.default,{key:c,type:2===c?"page":"ellipsis",onClick:n,pageNumber:c,isHidden:r}))}for(var f=Math.round(2),p=s-f;p<=s+f;p+=1)i.push(d.default.createElement(h.default,{key:p,type:"page",active:t===p,onClick:n,pageNumber:p,isHidden:r,isDisabled:t===p})),l=p;if(l<a-1){var m=Math.floor(l+(a-l)/2);i.push(d.default.createElement(h.default,{key:m,type:a-l==2?"page":"ellipsis",onClick:n,pageNumber:m,isHidden:r}))}return i.push(d.default.createElement(h.default,{key:o,type:"page",active:t===o,onClick:n,pageNumber:o,isHidden:r,isDisabled:t===o})),i}},{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.hiddenButtons,r=e.isLayoutUpToS,a=e.itemsCount,o=e.pageChangeCallback;return a<=e.pageSize?null:d.default.createElement("div",{className:"pagination","data-component-name":"Pagination"},d.default.createElement(h.default,{type:"prev",onClick:o,pageNumber:t-1,isHidden:1===t||n}),d.default.createElement("div",null,r?this.renderMobileButtons():this.renderButtons()),d.default.createElement(h.default,{type:"next",onClick:o,pageNumber:t+1,isHidden:t>=this.getPagesCount()||n}))}}]),t}(m.default);E.propTypes={currentPage:u.default.number.isRequired,hiddenButtons:u.default.bool.isRequired,itemsCount:u.default.number.isRequired,pageChangeCallback:u.default.func.isRequired,pageSize:u.default.number},E.defaultProps={pageSize:10};var y=function(e){return{isLayoutUpToS:(0,v.getIsLayoutUpToS)(e)}};t.default=(0,f.connect)(y)(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),i=n(22),s=r(i),l=function(){return o.default.createElement("div",{className:"model-list-item"},o.default.createElement("div",{className:"model-stub-thumb"},o.default.createElement("div",{className:"model-stub-thumb-content"}),o.default.createElement(s.default,{isCentered:!0,loaderType:"sector-circle",size:40})))};t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MyKnightsPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(18),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(23),E=r(v),y=n(135),b=r(y),_=n(19),S=n(7),O=n(162),P=n(393),T=r(P),A=n(163),C=n(41),I=t.MyKnightsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.knights",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:C.currentUserHasChangedAndIsLoggedIn,action:function(e){var t=e.currentUser;(0,e.loadKnights)(t.id)}}]),s=n,i(r,s)}return s(t,e),u(t,[{key:"renderReady",value:function(){var e=this.props,t=e.currentUser,n=e.isPending,r=e.knights;return t&&t.isModel?m.default.createElement("div",{className:"knights-page","data-component-name":"MyKnightsPage"},m.default.createElement(b.default,null),m.default.createElement("div",{className:"page page-without-header"},m.default.createElement(T.default,{className:"page-block",isOwnProfile:!0,isPending:n,knights:r}))):null}}]),t}(E.default);I.checkAccess=_.redirectNotModelToLoginOrIndex;var w={loadKnights:O.load};I.propTypes=l({currentUser:f.default.object,isLoggedIn:f.default.bool,isPending:f.default.bool,knights:f.default.instanceOf(c.Seq)},(0,S.getActionPropTypes)(w));var N=function(e){var t=e.auth,n=e.modelKnights,r=e.users;return{currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isPending:n.isPending||r.isPending,knights:(0,A.getMyKnights)(e)}},R=function(e){return(0,h.bindActionCreators)(w,e)};t.default=(0,g.connect)(N,R)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(33),l=r(s),u=n(14),c=r(u),d=n(144),f=r(d),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},g=n(1),h=r(g),v=n(0),E=r(v),y=n(2),b=n(24),_=n(4),S=n(162),O=n(12),P=n(9),T=n(3),A=r(T),C=n(8),I=r(C),w=n(39),N=r(w),R=n(237),M=r(R),L=n(5),k=n(163),D=n(89),U=r(D),j=n(120),F=r(j),B=n(164),H=n(91),V=n(44),G=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.btnTriggerKnights=function(){var e=r.props.user,t=r.props,n=t.addKnight,a=t.canAddKnights,o=t.isKnight,i=t.removeKnight;o?i(e.id):a&&n(e.id)},r.banButtonClickHandler=function(){r.props.showModal(L.MODAL_TYPES.BAN_CONFIRMATION,{user:r.props.user,modelId:r.props.modelId})},r.getTargetRect=function(){var e=r.props.targetId?document.getElementById(r.props.targetId):null,t=e.getBoundingClientRect(),n=(e.offsetHeight-t.height)/2,a=(e.offsetWidth-t.width)/2;return{top:t.top-n,left:t.left-a,height:e.offsetHeight,width:e.offsetWidth}},r.getUserTokensLabel=function(){var e=r.props,t=e.tokens,n=e.user;return n.isRegular?"":"nobody"===n.showTokensTo?r.t("userInfoPopup.hidden"):t?"≈ "+t:""},r.renderInfo=function(){var e=function(e,t,n){return e?E.default.createElement("p",null,E.default.createElement("span",{className:"info-popup-label"},r.t(t)),r.t(n)):null},t=r.props,n=t.isKing,a=t.isKnightIconVisible,o=t.user,i=t.goldPoints,s=o.city,u=o.country,c=o.gender,d=r.getUserTokensLabel();return E.default.createElement("div",{className:"info"},E.default.createElement("h5",null,E.default.createElement(F.default,{user:(0,l.default)(o,["id","username","isAdmin","isSupport","isGold","isExGreen","isGreen","isModel"]),isKnightIconVisible:a,isKing:n,size:14})),e(c,"userInfoPopup.iAm","gender."+c),e(u,"userInfoPopup.country","country."+u),e(s,"userInfoPopup.city",s),e(i,"userInfoPopup.goldPoints",i),e(d,"userInfoPopup.tokens",d))},r.renderControls=function(){var e=r.props,t=e.canAddKnights,n=e.canManageKnights,a=e.canBan,o=e.controls,i=e.isActionable,s=e.isKnight,l=e.user,u=l.isGold,d=l.username,f=(0,c.default)(o,"profile"),p=(0,c.default)(o,"sendMessage"),m=(0,c.default)(o,"addToKnight")&&(n&&u||s),g=t&&u||s,h=a&&i;return E.default.createElement("div",{className:"controls"},r.renderIf(f,function(){return E.default.createElement("div",{className:"user-info-popup-button"},E.default.createElement(M.default,{target:"_blank",title:r.t("userInfoPopup.profile"),user:l},E.default.createElement(I.default,{img:"user-info"})))}),r.renderIf(p,function(){return E.default.createElement("div",{className:"user-info-popup-button"},E.default.createElement(b.Link,{target:"_blank",title:r.t("userInfoPopup.sendMessage"),to:"/messages/"+d},E.default.createElement(I.default,{img:"private-message"})))}),r.renderIf(m,function(){return E.default.createElement("div",{className:r.c("user-info-popup-button knight",{disable:!g}),id:"knight_button"},E.default.createElement("a",{title:r.t(s?"userInfoPopup.removeKnight":"userInfoPopup.addKnight"),onClick:r.btnTriggerKnights},E.default.createElement(I.default,{img:s?"remove-knight":"add-knight"})),r.renderIf(!g,E.default.createElement(N.default,{className:"error",placement:"top",targetId:"knight_button"},r.t("userInfoPopup.limitExceededKnights",{limit:O.MODEL_KNIGHTS_LIMIT}))))}),r.renderIf(h,function(){return E.default.createElement("div",{className:"user-info-popup-button"},E.default.createElement("a",{title:r.t("userInfoPopup.ban"),onClick:r.banButtonClickHandler},E.default.createElement(I.default,{img:"ban"})))}))},i=n,o(r,i)}return i(t,e),p(t,[{key:"componentDidRender",value:function(e,n,r){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this,e,n,r);var a=this.position;this.popupRef.style.left=a.left,this.popupRef.style.top=a.top}},{key:"render",value:function(){var e=this,t=this.props.user;return E.default.createElement("div",{className:"user-info-popup",ref:function(t){e.popupRef=t},onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,"data-component-name":"UserInfoPopup"},E.default.createElement("div",{className:"avatar-info"},E.default.createElement("div",{className:"avatar-wrapper"},E.default.createElement(M.default,{target:"_blank",title:this.t("userInfoPopup.profile"),user:t},E.default.createElement(U.default,{user:t,size:150}))),this.renderInfo()),this.renderControls(),E.default.createElement("div",{className:"triangle"}))}},{key:"possiblePosition",get:function(){var e=this.popupRef;if(!e)return null;var t=this.props.defaultPosition,n=document.documentElement,r=n.clientWidth,a=n.clientHeight,o=e.offsetHeight,i=e.offsetWidth,s=this.getTargetRect(),l=[];e.classList.remove("bottom"),e.classList.remove("left"),e.classList.remove("right"),e.classList.remove("top"),s.left-i>0&&l.push("left"),s.left+i<r&&l.push("right"),s.top-o>0&&l.push("top"),s.top+o<a&&l.push("bottom");var u=!l.length||(0,c.default)(l,t)?t:(0,f.default)(l);return e.classList.add(u),u}},{key:"position",get:function(){var e=this.props.offset,t=this.popupRef,n=t.offsetHeight,r=t.offsetWidth,a=this.getTargetRect();switch(this.possiblePosition){case"bottom":return{left:a.left-r/2+"px",top:a.top+a.height+e+"px"};case"left":return{left:a.left-r-e+"px",top:a.top-n/2+a.height/2+"px"};case"top":return{left:a.left-r/2+"px",top:a.top-n-e+"px"};case"right":default:return{left:a.left+e+a.width+"px",top:a.top-n/2+a.height/2+"px"}}}}]),t}(A.default);G.propTypes={canAddKnights:h.default.bool,canManageKnights:h.default.bool,canBan:h.default.bool,controls:h.default.array,defaultPosition:h.default.oneOf(["top","right","bottom","left"]),isActionable:h.default.bool,isKing:h.default.bool,isKnightIconVisible:h.default.bool,isKnight:h.default.bool,isLoggedIn:h.default.bool,targetId:h.default.node,modelId:h.default.number.isRequired,offset:h.default.number,onMouseLeave:h.default.func,onMouseMove:h.default.func,tokens:h.default.number,user:h.default.object.isRequired,addKnight:h.default.func.isRequired,removeKnight:h.default.func.isRequired,showModal:h.default.func.isRequired},G.defaultProps={controls:["profile","sendMessage","addToKnight","banUser"],defaultPosition:"left",offset:10};var x=function(e,t){var n=t.modelId,r=t.user,a=e.auth,o=a.currentUser,i=a.isLoggedIn,s=a.isLoggingOut,l=(0,B.getHasBanned)(e,n,r.id),u=i&&o.id===n&&!l,c=(0,V.getUserTokens)(e,r.id),d=(0,V.getUserGoldPoints)(e,r.id);return{canAddKnights:(0,k.getCanAddKnight)(e,r.id),canManageKnights:u,canBan:(0,H.getCanBan)(e,n,r.id),currentUser:o,goldPoints:d,hasBanned:l,isActionable:i&&o.isModel,isLoggedIn:i&&!s,isKnight:(0,k.getIsKnightOfModel)(e,n,r.id),tokens:c,user:r}},W=function(e){return(0,_.bindActionCreators)({addKnight:S.add,removeKnight:S.remove,showModal:P.showModal},e)};t.default=(0,y.connect)(x,W)(G)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ModelBansPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(18),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(23),E=r(v),y=n(22),b=r(y),_=n(135),S=r(_),O=n(19),P=n(7),T=n(1268),A=r(T),C=n(130),I=n(41),w=n(164),N=t.ModelBansPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.bans",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:I.currentUserHasChangedAndIsLoggedIn,action:function(e){var t=e.currentUser;(0,e.loadBans)(t.id)}}]),s=n,i(r,s)}return s(t,e),u(t,[{key:"getSocketEventBindings",value:function(e,t){var n=e.currentUser;return e.isLoggedIn?[{subscriptionKey:"userBanned:"+n.id},{subscriptionKey:"userUnbanned:"+n.id}]:[]}},{key:"renderPending",value:function(){return m.default.createElement("div",{className:"bans-page"},m.default.createElement(S.default,null),m.default.createElement("div",{className:"page"},m.default.createElement(b.default,{isCentered:!0})))}},{key:"renderReady",value:function(){var e=this.props,t=e.bans,n=e.isLoggedIn,r=e.isPending;return n?m.default.createElement("div",{className:"bans-page","data-component-name":"ModelBansPage"},m.default.createElement(S.default,null),m.default.createElement("div",{className:"page page-without-header"},m.default.createElement(A.default,{bans:t,className:"page-block",isEditable:!0,isPending:r}))):null}}]),t}(E.default);N.checkAccess=O.redirectNotModelToLoginOrIndex;var R={loadBans:C.load};N.propTypes=l({bans:f.default.instanceOf(c.Seq),currentUser:f.default.object,isLoggedIn:f.default.bool,isPending:f.default.bool.isRequired},(0,P.getActionPropTypes)(R));var M=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.userBans;return{bans:(0,w.getMyBans)(e),currentUser:n,isLoggedIn:r&&!a,isPending:o.isPending}},L=function(e){return(0,h.bindActionCreators)(R,e)};t.default=(0,g.connect)(M,L)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(30),l=r(s),u=n(13),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(18),m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(31),b=n(4),_=n(3),S=r(_),O=n(8),P=r(O),T=n(173),A=r(T),C=n(7),I=n(130),w=n(37),N=n(394),R=r(N),M=n(164),L=n(44),k=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.loadMoreHandler=function(){var e=r.props,t=e.isPending,n=e.missingIds,a=e.loadMoreUsers;t||(0,c.default)(n)||a(n)},r.knightClickHandler=function(e,t){t.preventDefault(),t.stopPropagation(),r.props.routerPush("/user/"+e)},r.listEditHandler=function(e){(0,c.default)(e)||r.props.unBan(e)},r.renderBan=function(e){var t=e.id,n=e.banned,a=e.moderator,o=r.props.currentUser;return n&&a?v.default.createElement(R.default,{id:n.id,key:t,user:n},r.renderIf(Boolean(a)&&a.id!==o.id,function(){return v.default.createElement("div",{className:"banned-by-knight",onClick:(0,l.default)(r.knightClickHandler,a.username),title:r.t("bans.bannedBy",a)},v.default.createElement(P.default,{img:"knight"}))})):null},i=n,o(r,i)}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.bans,n=e.className,r=e.hasMoreBannedUsers,a=e.isUsersPending,o=e.isPending;return v.default.createElement(A.default,{isEditable:this.props.isEditable,isLoading:a,isPending:o,title:this.t("bans.bannedUsers"),className:this.c("banned-users",n),hasMore:r,onEdit:this.listEditHandler,onLoadMore:this.loadMoreHandler,"data-component-name":"BannedUsers"},t.map(this.renderBan))}}]),t}(S.default),D={loadMoreUsers:w.loadMore,routerPush:y.push,unBan:I.unBan};k.propTypes=d({bans:g.default.instanceOf(p.Seq),className:g.default.string,currentUser:g.default.object,hasMoreBannedUsers:g.default.bool,isEditable:g.default.bool,isPending:g.default.bool.isRequired,isUsersPending:g.default.bool.isRequired},(0,C.getActionPropTypes)(D));var U=function(e){var t=e.auth.currentUser,n=e.users,r=(0,M.getBannedUserIds)(e),a=(0,L.getMissingUserIds)(e,r);return{currentUser:t,hasMoreBannedUsers:a.length>0,isUsersPending:n.isPending,missingIds:a}},j=function(e){return(0,b.bindActionCreators)(D,e)};t.default=(0,E.connect)(U,j)(k)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ModelNewsPage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(23),d=r(c),f=n(19),p=n(395),m=r(p),g=t.ModelNewsPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.modelNews",i=n,o(r,i)}return i(t,e),s(t,[{key:"renderReady",value:function(){return u.default.createElement("div",{className:"legacy-container-small page model-news-page"},u.default.createElement("div",{className:"page-header"},u.default.createElement("h1",null,this.t("modelNews.title"))),u.default.createElement("div",{className:"model-news-page-island"},u.default.createElement(m.default,null)))}}]),t}(d.default);g.checkAccess=f.redirectNotModelOrStudioToLoginOrIndex,t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=r(l),c=n(1),d=r(c),f=n(0),p=r(f),m=n(3),g=r(m),h=n(238),v=r(h),E=function(e){var t=/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*)/gi;return e.replace(t,"<a href='$1' target='_blank'>$1</a>")},y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.modelNews;return p.default.createElement("ul",{className:"model-news-list","data-component-name":"ModelNewsList"},e.valueSeq().map(function(e){var t=new Date(e.publishedAt);return p.default.createElement("li",{className:"model-news-list-item",key:e.id,"data-component-name":"ModelNewsList"},p.default.createElement("header",{className:"model-news-list-header"},p.default.createElement("h4",{className:"model-news-list-title"},e.subject),p.default.createElement("span",{className:"model-news-list-date"},p.default.createElement(v.default,{dateTime:t}))),p.default.createElement("div",{className:"model-news-list-content",dangerouslySetInnerHTML:{__html:E(e.body)}}))}))}}]),t}(g.default);y.propTypes={modelNews:d.default.instanceOf(u.default.Map).isRequired},t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllNews=t.getLatestNews=t.getNews=void 0;var r=n(32),a=n(16),o=n(12),i=t.getNews=function(e){return e.modelNews.collection};t.getLatestNews=(0,r.createSelector)([i],function(e){return(0,a.find)(e,!0,"publishedAt",-o.LATEST_NEWS_LIMIT)}),t.getAllNews=(0,r.createSelector)([i],function(e){return(0,a.find)(e,!0,{itemKey:"publishedAt",order:"DESC"})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentsHistoryPage=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=n(18),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(23),y=r(E),b=n(22),_=r(b),S=n(5),O=n(110),P=n(19),T=n(571),A=n(1273),C=r(A),I=n(631),w=r(I),N=n(396),R=r(N),M=n(1274),L=n(41),k=[S.DATE_INTERVALS.THIS_YEAR,S.DATE_INTERVALS.LAST_MONTH],D=S.DATE_INTERVALS.THIS_YEAR,U=c({},O.getIntervalFor[D](),{intervalName:D}),j=t.PaymentsHistoryPage=function(e){function t(){var e,n,r,a;i(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.paymentsHistory",r.propsUpdateToActionsMap=[].concat(o(r.propsUpdateToActionsMap),[{update:L.currentUserHasChangedAndIsLoggedIn,action:function(){r.onUpdateInterval(U,!0)}}]),r.onUpdateInterval=function(e,t){var n=r.props.loadPaymentsHistory;r.setState({interval:e},function(){t&&n(e)})},a=n,s(r,a)}return l(t,e),u(t,[{key:"getDefaultState",value:function(){return{interval:U}}},{key:"renderReady",value:function(){var e=this.props,t=e.isPending,n=e.loadError,r=e.transactions,o=e.transactionsSum,i=this.state.interval,s=i.intervalName,l=void 0===s?"custom":s,u=a(i,["intervalName"]);return n?g.default.createElement("div",{className:"text-center","data-component-name":"PaymentsHistoryPage"},n.message):g.default.createElement("div",{className:"page container payments-history-page","data-component-name":"PaymentsHistoryPage"},g.default.createElement("div",{className:"page-header"},g.default.createElement("h1",null,this.t("paymentsHistory.title"))),g.default.createElement(w.default,null),g.default.createElement(R.default,{isPending:t,interval:u,onUpdate:this.onUpdateInterval,currentIntervalName:l,buttonIntervalNames:k}),this.renderIf(t,g.default.createElement("div",{className:"page text-center"},g.default.createElement("div",{className:"loader-container"},g.default.createElement(_.default,{isCentered:!0}))),g.default.createElement(C.default,{transactions:r,transactionsSum:o})))}}]),t}(y.default);j.checkAccess=P.redirectAllButNonStudioModelsAndStudiosToLoginOrIndex,j.propTypes={currentUser:p.default.object,loadError:p.default.instanceOf(Error),loadPaymentsHistory:p.default.func,isLoggedIn:p.default.bool,isPending:p.default.bool,transactions:p.default.instanceOf(d.Seq),transactionsSum:p.default.shape({tokens:p.default.number,usd:p.default.number})};var F=function(e){var t=e.auth,n=e.paymentsHistory;return{currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isPending:n.isPending,loadError:n.error,transactions:(0,M.getPaymentsHistory)(e),transactionsSum:(0,M.getPaymentsHistoryTotalSum)(e)}},B=function(e){return(0,v.bindActionCreators)({loadPaymentsHistory:T.load},e)};t.default=(0,h.connect)(F,B)(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=n(15),c=r(u),d=n(1),f=r(d),p=n(0),m=r(p),g=n(3),h=r(g),v=n(39),E=r(v),y=n(110),b=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"renderTableHeader",value:function(){return m.default.createElement("div",{className:"table-row table-header"},m.default.createElement("div",{className:"date"},this.t("paymentsHistory.table.header.date")),m.default.createElement("div",{className:"desc"},this.t("paymentsHistory.table.header.info")),m.default.createElement("div",{className:"sum"},this.t("paymentsHistory.table.header.sum")),m.default.createElement("div",{className:"status"},this.t("paymentsHistory.table.header.status")))}},{key:"renderTableFooter",value:function(){var e=this.props.transactionsSum,t=e.tokens,n=e.usd;return m.default.createElement("div",{className:"table-row table-footer"},m.default.createElement("div",null,this.t("paymentsHistory.table.footer.totalForPeriod")),m.default.createElement("div",null,t,m.default.createElement("span",{className:"amount"},"(",m.default.createElement("strong",null,"$",n),")")))}},{key:"renderTableRow",value:function(e){var t=e.id,n=e.type,r=e.date,a=e.amount,o=e.usdAmount,i=e.status,s=e.reason,l="status-"+t,u=r?(0,c.default)(r).format(y.HUMAN_DATE_FORMAT):"-";return m.default.createElement("div",{className:"table-row",key:t},m.default.createElement("div",{className:"date"},u),m.default.createElement("div",{className:"type"},this.t("paymentsHistory.types."+n)),m.default.createElement("div",{className:"sum"},a,m.default.createElement("span",{className:"amount"},"(",m.default.createElement("strong",null,"$",o),")")),m.default.createElement("div",{id:l,className:this.c("status",i)},this.t("paymentsHistory.statuses."+i)),this.renderIf("error"===i,function(){return m.default.createElement(E.default,{isMobileRelative:!1,placement:"left",targetId:l},s)}))}},{key:"render",value:function(){var e=this,t=this.props.transactions;return m.default.createElement("div",{className:"payments-history page-block","data-component-name":"PaymentsHistory"},this.renderIf(0===t.size,m.default.createElement("div",{className:"empty"},this.t("empty")),function(){return m.default.createElement("div",{className:"table"},e.renderTableHeader(),t.map(function(t){return e.renderTableRow(t)}),e.renderTableFooter())}))}}]),t}(h.default);b.propTypes={transactions:f.default.instanceOf(l.Seq),transactionsSum:f.default.shape({tokens:f.default.number,usd:f.default.number})},t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentsHistory=t.getPaymentsHistoryTotalSum=void 0;var r=n(32),a=n(16),o=function(e){return e.paymentsHistory.collection},i=function(e){return e.auth.currentUser};t.getPaymentsHistoryTotalSum=function(e){return e.paymentsHistory.transactionsSum},t.getPaymentsHistory=(0,r.createSelector)([i,o],function(e,t){return(0,a.findAll)(t).valueSeq()})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentsSettingsPage=void 0;var l=n(6),u=r(l),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(23),b=r(y),_=n(22),S=r(_),O=n(19),P=n(7),T=n(227),A=n(1276),C=r(A),I=n(41),w=function(e){return(0,u.default)(e,"route.routeParams.firstchoicePaySignup",!1)},N=t.PaymentsSettingsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.paymentsSettings",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:I.currentUserHasChangedAndIsLoggedIn,action:function(e){w(e)||e.loadPaymentsSettings()}}]),r.payoutSettingsCometEventHandler=function(e){var t=e.optionsConfirmed,n=e.optionsPending;r.props.updatePaymentsSettings({optionsConfirmed:t,optionsPending:n})},s=n,i(r,s)}return s(t,e),d(t,[{key:"componentWillMount",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this),w(this.props)&&this.props.setFirstchoicePayPending()}},{key:"getNextState",value:function(e,n){var r=!e.availableSettings,a=!e.availableSettings&&!e.isLoading;return c({},f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n),{isDataPending:r,isDataFailed:a})}},{key:"getSocketEventBindings",value:function(e,t){return e.isLoggedIn?[{subscriptionKey:"payoutSettings:"+e.currentUser.id,callback:this.payoutSettingsCometEventHandler}]:[]}},{key:"renderReady",value:function(){var e=this.props,t=e.isLoggedIn,n=e.availableSettings,r=e.isLoading,a=e.isSaving,o=e.loadError,i=e.optionsConfirmed,s=e.optionsPending;return t?r?h.default.createElement("div",{className:"page page-content","data-component-name":"PaymentsSettingsPage"},h.default.createElement("div",{className:"loader-container"},h.default.createElement(S.default,{isCentered:!0}))):o?h.default.createElement("div",{className:"text-center","data-component-name":"PaymentsSettingsPage"},o.message):h.default.createElement("div",{className:"page container payments-settings-page","data-component-name":"PaymentsSettingsPage"},h.default.createElement("div",{className:"page-header"},h.default.createElement("h1",null,this.t("paymentsSettings.title"))),h.default.createElement(C.default,{availableSettings:n,isSaving:a,optionsPending:s,optionsConfirmed:i})):null}}]),t}(b.default);N.checkAccess=O.redirectAllButNonStudioModelsAndStudiosToLoginOrIndex;var R={loadPaymentsSettings:T.load,setFirstchoicePayPending:T.setFirstchoicePayPending,updatePaymentsSettings:T.update};N.propTypes=c({availableSettings:m.default.object.isRequired,currentUser:m.default.object.isRequired,isLoggedIn:m.default.bool,isPending:m.default.bool,optionsConfirmed:m.default.object.isRequired,optionsPending:m.default.object.isRequired},(0,P.getActionPropTypes)(R));var M=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.paymentsSettings,i=o.availableSettings,s=o.error,l=o.isLoading,u=o.isSaving,c=o.optionsConfirmed,d=o.optionsPending;return{availableSettings:i,currentUser:n,error:s,isLoading:l,isLoggedIn:r&&!a,isSaving:u,optionsConfirmed:c,optionsPending:d}},L=function(e){return(0,E.bindActionCreators)(R,e)};t.default=(0,v.connect)(M,L)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(76),u=r(l),c=n(169),d=r(c),f=n(272),p=r(f),m=n(46),g=r(m),h=n(30),v=r(h),E=n(11),y=r(E),b=n(49),_=r(b),S=n(13),O=r(S),P=n(14),T=r(P),A=n(84),C=r(A),I=n(6),w=r(I),N=n(48),R=r(N),M=n(47),L=r(M),k=n(223),D=r(k),U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),F=n(1),B=r(F),H=n(0),V=r(H),G=n(2),x=n(4),W=n(10),Y=r(W),K=n(58),q=r(K),z=n(40),X=r(z),Z=n(92),Q=r(Z),J=n(3),$=r(J),ee=n(82),te=n(227),ne=n(12),re=ee.validators.isSwiftCompatibleValidator,ae=function(e){var t=e.optionsPending,n=e.optionsConfirmed;return(0,C.default)(t,"method")?t:n},oe=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.validationErrors={},r.methodSelectHandler=function(e){var t=e.value;if(t!==r.state.options.method){var n=void 0,a=r.props,o=a.optionsPending,i=a.optionsConfirmed,s=o.method?o:i;t===s.method&&(n=s.min);var l=U({},r.state.options,{method:t,min:n});r.setStateIfModified({erroneousFields:[],options:l})}},r.inputChangeHandler=function(e,t){var n=t.target,o=U({},r.state.options,a({},e,n.value));r.setStateIfModified({options:o})},r.selectHandler=function(e,t){var n=t.value,o=U({},r.state.options,a({},e,n));r.setStateIfModified({options:o})},r.prepareValidationableFields=function(){var e=r.state.options,t=r.settings.fields;return(0,g.default)(e,function(e,n,r){var a=(0,R.default)(t,{id:r});return"string"===(0,w.default)(a,"type")?(0,d.default)(e,r,{value:(0,u.default)(n),validators:[re]}):e},{})},r.saveClickHandler=function(e){e.preventDefault();var t=r.context.store.getState,n=r.emptyRequiredFields;r.validationErrors=(0,ee.validateFields)(r.prepareValidationableFields(),t()),r.setState({erroneousFields:n}),!n.length&&(0,O.default)(r.validationErrors)&&r.props.savePaymentsSettings(r.state.options)},r.redirectToFirstchoicePaySignup=function(){r.props.redirectToFirstchoicePaySignupUrl(r.state.options)},r.renderField=function(e){var t=e.id,n=e.type,a=r.state,o=a.erroneousFields,i=a.options,s=i[t],l=r.validationErrors[t],u=Boolean(l),c=(0,T.default)(o,t)||u,d=r.c({error:c}),f=null;switch(n){case"country":f=V.default.createElement(Q.default,{id:t,isSearchable:!0,onSelect:(0,v.default)(r.selectHandler,t),value:s,options:(0,y.default)(r.props.availableSettings.countries,function(e){var t=e.code;return{label:r.t("country."+t.toLowerCase()),value:t}}),className:d});break;case"email":f=V.default.createElement(X.default,{id:t,type:"email",onChange:(0,v.default)(r.inputChangeHandler,t),value:s,className:d});break;case"string":default:f=V.default.createElement(X.default,{id:t,type:"text",onChange:(0,v.default)(r.inputChangeHandler,t),value:s,className:d})}return V.default.createElement("div",{className:"settings-field",key:t},V.default.createElement("div",{className:"settings-label"},V.default.createElement("label",null,r.t("paymentsSettings.fields."+t))),V.default.createElement("div",{className:"settings-value"},f,r.renderIf(u,V.default.createElement(q.default,{error:{message:l},targetId:t}))))},s=n,i(r,s)}return s(t,e),j(t,[{key:"getDefaultState",value:function(){return U({},this.getNextState(this.props,this.context),{erroneousFields:[]})}},{key:"getNextState",value:function(e,t){var n=this.state.options;return{options:!n||n.method===ne.FIRSTCHOICE_PAY.METHOD||(0,_.default)(n,ae(this.props))?ae(e):n}}},{key:"renderMethodSelector",value:function(){var e=this.settings,t=this.state,n=t.erroneousFields,r=t.options,a=(0,y.default)(this.props.availableSettings.methods,function(e){return{value:e.name,label:e.title}}),o=e?(0,y.default)(e.min,function(e){return{value:""+e,label:"$"+e}}):[];return V.default.createElement("div",{className:"page-block"},V.default.createElement("h3",null,this.t("paymentsSettings.titleMethod")),V.default.createElement("form",{onSubmit:this.saveClickHandler},V.default.createElement("div",{className:"form-fields"},V.default.createElement("div",{className:"settings-field"},V.default.createElement("div",{className:"settings-label"},V.default.createElement("label",null,this.t("paymentsSettings.paymentMethod"))),V.default.createElement("div",{className:"settings-value"},V.default.createElement(Q.default,{onSelect:this.methodSelectHandler,value:(0,w.default)(this.state.options,"method"),options:a}))),V.default.createElement("div",{className:"settings-field"},V.default.createElement("div",{className:"settings-label"},V.default.createElement("label",null,this.t("paymentsSettings.min"))),V.default.createElement("div",{className:"settings-value"},V.default.createElement(Q.default,{className:this.c({error:(0,T.default)(n,"min")}),isDisabled:!o.length,onSelect:(0,v.default)(this.selectHandler,"min"),options:o,value:""+r.min}))))))}},{key:"renderForm",value:function(){return V.default.createElement("form",{onSubmit:this.saveClickHandler},V.default.createElement("div",{className:"form-fields"},(0,y.default)(this.visibleFields,this.renderField)),V.default.createElement("div",{className:"form-controls"},V.default.createElement(Y.default,{disabled:this.isSubmitDisabled,size:"large",style:"apply",type:"submit"},this.t("button.saveSettings"))))}},{key:"renderFirstchoicePay",value:function(){var e=this;if(!this.state.options.min)return null;var t=(0,w.default)(this.state.options,ne.FIRSTCHOICE_PAY.STATUS_PROP,ne.FIRSTCHOICE_PAY_STATUS.SIGNUP_READY);if(t===ne.FIRSTCHOICE_PAY_STATUS.SIGNUP_READY)return V.default.createElement("div",null,V.default.createElement(Y.default,{onClick:this.redirectToFirstchoicePaySignup,size:"large",style:"apply"},this.t("button.firstchoicePaySignup")));if(t===ne.FIRSTCHOICE_PAY_STATUS.SIGNUP_PENDING)return V.default.createElement("div",null,V.default.createElement("p",null,this.t("paymentsSettings.firstchoicePay.signupPending")));if(t===ne.FIRSTCHOICE_PAY_STATUS.SIGNUP_APPROVED){var n=!(0,_.default)(this.props.optionsPending,this.state.options);return V.default.createElement("form",{onSubmit:this.saveClickHandler},V.default.createElement("div",{className:"form-fields"},V.default.createElement("p",null,this.t("paymentsSettings.firstchoicePay.signupApproved"))),this.renderIf(n,function(){return V.default.createElement("div",{className:"form-controls"},V.default.createElement(Y.default,{disabled:e.isSubmitDisabled,size:"large",style:"apply",type:"submit"},e.t("button.saveSettings")))}))}return t===ne.FIRSTCHOICE_PAY_STATUS.SIGNUP_DECLINED?V.default.createElement("form",{onSubmit:this.saveClickHandler},V.default.createElement("div",{className:"form-fields"},V.default.createElement("p",null,this.t("paymentsSettings.firstchoicePay.signupDeclined"))),V.default.createElement("div",{className:"form-controls"},V.default.createElement(Y.default,{onClick:this.redirectToFirstchoicePaySignup,size:"large",style:"apply"},this.t("button.retry")))):null}},{key:"renderMethodFields",value:function(){if(!this.settings)return null;var e=this.state.options.method===ne.FIRSTCHOICE_PAY.METHOD?this.renderFirstchoicePay():this.renderForm();return e?V.default.createElement("div",{className:"page-block"},V.default.createElement("h3",null,this.t("paymentsSettings.titleDetails")),e):null}},{key:"render",value:function(){return V.default.createElement("div",{className:this.c("payments-settings",{pending:this.props.isSaving}),"data-component-name":"PaymentsSettings"},this.renderMethodSelector(),this.renderMethodFields())}},{key:"settings",get:function(){return(0,R.default)(this.props.availableSettings.methods,{name:this.state.options.method})}},{key:"visibleFields",get:function(){var e=this;return(0,L.default)(this.settings.fields,function(t){var n=t.hidden;return!(n&&n(e.state.options))})}},{key:"emptyRequiredFields",get:function(){var e=this;return(0,p.default)((0,D.default)((0,y.default)((0,L.default)(this.visibleFields,"required"),"id"),["min"]),function(t){return e.state.options[t]})}},{key:"isSubmitDisabled",get:function(){return(0,_.default)(this.state.options,this.props.optionsConfirmed)}}]),t}($.default);oe.propTypes={availableSettings:B.default.object.isRequired,isSaving:B.default.bool,optionsConfirmed:B.default.object.isRequired,optionsPending:B.default.object.isRequired,redirectToFirstchoicePaySignupUrl:B.default.func.isRequired,savePaymentsSettings:B.default.func.isRequired};var ie=function(e){return(0,x.bindActionCreators)({savePaymentsSettings:te.save,redirectToFirstchoicePaySignupUrl:te.redirectToFirstchoicePaySignupUrl},e)};t.default=(0,G.connect)(null,ie)(oe)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StartBroadcastingPage=void 0;var l=n(169),u=r(l),c=n(33),d=r(c),f=n(30),p=r(f),m=n(11),g=r(m),h=n(115),v=r(h),E=n(26),y=r(E),b=n(6),_=r(b),S=n(172),O=r(S),P=n(49),T=r(P),A=n(14),C=r(A),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),N=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},R=n(1),M=r(R),L=n(0),k=r(L),D=n(2),U=n(24),j=n(31),F=n(4),B=n(28),H=n(23),V=r(H),G=n(381),x=r(G),W=n(152),Y=r(W),K=n(10),q=r(K),z=n(8),X=r(z),Z=n(22),Q=r(Z),J=n(92),$=r(J),ee=n(58),te=r(ee),ne=n(5),re=n(19),ae=n(7),oe=n(81),ie=n(620),se=r(ie),le=n(395),ue=r(le),ce=n(603),de=r(ce),fe=n(12),pe=n(45),me=n(224),ge=n(43),he=n(41),ve=n(38),Ee=10,ye=t.StartBroadcastingPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.title="seo.title.startBroadcasting",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:he.currentUserHasChanged,action:function(e){var t=e.isLoggedIn,n=e.currentUser;r.setState({isDataPending:!t||t&&!n.isModel})}},{update:[me.hasStartBroadcastingUpdated],action:function(e){var t=e.user;r.proceedToBroadcast(t)}}]),r.imageUploadEventHandler=function(e){e.name===ne.TYPES_OF_IMAGE_SIZES.FULL&&r.setState({imageInProgress:!1},function(){var e=ge.UPDATE_TYPES.PREVIEW.toLowerCase(),t=r.t("notifications.updateProfileSuccess."+e);r.props.showSuccessNotification(t,"updateProfileFields")})},r.getStateUserModified=function(e){return(0,d.default)(e,["privateActivities","publicActivities","broadcastGender"])},r.uploadPreviewInputChangeHandler=function(e){e.preventDefault();var t=e.target.files[0],n=r.props.updateProfile;t&&(r.setState({imageInProgress:!0}),n({preview:t},ge.UPDATE_TYPES.PREVIEW,{isMultipart:!0,notifications:{success:null}}))},r.uploadPreviewPictureClickHandler=function(e){r.uploadPreviewInputRef.click(e)},r.uploadPreviewButtonClickHandler=function(e){r.uploadPreviewInputRef.click(e)},r.optionSelectHandler=function(e,t){var n=(0,O.default)(r.state.userModified),a=(0,y.default)(t)?(0,g.default)(t,"value"):(0,_.default)(t,"value",null);r.setState({userModified:(0,u.default)(n,e,a)})},r.activitiesSelectHandler=function(e,t){var n=(0,y.default)(t)&&t.length>Ee,a=(0,v.default)(r.state.activitiesErrors,e);n&&(a[e]=r.t("startBroadcasting.tagsLimitationError",{tagsCount:Ee})),r.setState({activitiesErrors:a}),a[e]||r.optionSelectHandler(e,t)},r.activitiesSelectBlurHandler=function(e){r.setState({activitiesErrors:(0,v.default)(r.state.activitiesErrors,e)})},r.startBroadcastingClickHandler=function(e){e.preventDefault();var t=r.props,n=t.isUpdatingUserPreview,a=t.isUpdatingUserStartBroadcasting,o=t.updateProfile,i=t.updateStartBroadcasting,s=t.user,l=t.userPreviewError,u=r.state.userModified,c=!(0,T.default)(u,r.getStateUserModified(s));Object.keys(r.state.activitiesErrors).length>0||l||n||a||(c?o(u,ge.UPDATE_TYPES.START_BROADCASTING,{notifications:{success:null}}).then(i):i())},r.getUserGender=function(){var e=r.props.user,t=r.state.userModified;if(t.broadcastGender)return t.broadcastGender;var n=t.gender||e.gender;return(0,C.default)(fe.BROADCAST_GENDER_OF_GROUP,n)?fe.BROADCASTING_GENDERS.GROUP:t.gender||e.gender},r.proceedToBroadcast=function(){r.props.routerPush(r.props.onSuccessRedirectUrl)},s=n,i(r,s)}return s(t,e),w(t,[{key:"componentDidMount",value:function(){(0,this.props.updatePrepareStartBroadcasting)(),N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"getDefaultState",value:function(){return I({userModified:this.getStateUserModified(this.props.user),activitiesErrors:{}},this.getNextState(this.props,this.context))}},{key:"getSocketEventBindings",value:function(e,t){return e.isLoggedIn?[{subscriptionKey:"image:upload:"+e.currentUser.id,callback:this.imageUploadEventHandler}]:[]}},{key:"renderMobileAppBanner",value:function(){return ne.BROWSER_CAPABILITIES.android||!ne.BROWSER_CAPABILITIES.iOS&&!ne.BROWSER_CAPABILITIES.windowsPhone?k.default.createElement("div",{className:"start-broadcasting-island mobile-app-banner"},k.default.createElement("div",{className:"mobile-app-info"},k.default.createElement("div",{className:"title"},this.t("mobileApp.stripchatApp")),k.default.createElement("div",{className:"description"},this.t("mobileApp.mobileAppDescription"))),k.default.createElement("div",{className:"install-btn-block"},k.default.createElement(U.Link,{to:"/mobile",className:"btn btn-apply btn-block"},this.t("mobileApp.install")))):null}},{key:"renderRules",value:function(){return k.default.createElement(se.default,{className:"start-broadcasting-island start-broadcasting-island-light"})}},{key:"renderUploadPreviewPicture",value:function(){var e=this,t=this.props,n=t.isUpdatingUserPreview,r=t.user,a=t.userPreviewError,o=this.state.imageInProgress,i=r.previewUrl,s=o||!i||a?null:{backgroundImage:"url("+i+")"},l="start_broadcasting_page_preview_"+this.uid;return k.default.createElement("div",{className:"start-broadcasting-island start-broadcasting-island-dark"},k.default.createElement("h3",{className:"start-broadcasting-island-title"},this.t("startBroadcasting.preview.title")),k.default.createElement("div",{className:"preview-content"},k.default.createElement("div",{className:"preview-description"},this.t("startBroadcasting.preview.description")),k.default.createElement("div",{className:"preview-pic-wrapper"},k.default.createElement("div",{className:this.c("preview-pic",{"preview-pic-error":a}),id:l,style:s,onClick:this.uploadPreviewPictureClickHandler},i?null:k.default.createElement(X.default,{img:"be-model",size:230,fill:"#3d3d3d"}),n?k.default.createElement(Q.default,{className:"preview-pic-loader",size:100}):null),this.renderIf(a,function(){return k.default.createElement(te.default,{error:a,fieldName:"preview",placement:"right",targetId:l})})),k.default.createElement("div",{className:"preview-controls"},k.default.createElement(q.default,{className:"preview-upload-btn",onClick:this.uploadPreviewButtonClickHandler},this.t("startBroadcasting.preview.uploadPhoto")),k.default.createElement("input",{className:"preview-upload-input",onChange:this.uploadPreviewInputChangeHandler,type:"file",ref:function(t){e.uploadPreviewInputRef=t}}))))}},{key:"renderActivitiesIsland",value:function(e){var t=this,n=this.props,r=n.availableSettings,a=n.isUpdatingUserStartBroadcasting,o=n.user,i=this.state,s=i.userModified,l=i.activitiesErrors;if(!r)return null;var u=(0,g.default)(r[e]||[],function(e){return{label:t.t("broadcast.activities."+e),value:e}});if(!u.length)return null;var c="tags_select_"+e+"_"+this.uid;return k.default.createElement("div",{className:"start-broadcasting-island start-broadcasting-island-dark"},k.default.createElement("h3",{className:"start-broadcasting-island-title"},this.t("startBroadcasting."+e+".title"),k.default.createElement("span",{className:"tags-limitation-warning"},this.t("startBroadcasting.tagsLimitationWarning",{tagsCount:Ee})),this.renderIf("privateActivities"===e,k.default.createElement(de.default,{rating:(0,_.default)(o,"ratingPrivate",null),votersCount:(0,_.default)(o,"ratingPrivateUsers",null)}))),this.renderIf(l[e],k.default.createElement(te.default,{error:{message:l[e]},targetId:c})),k.default.createElement($.default,{id:c,isClearable:!0,isMultiple:!0,isSearchable:u.length>5,disabled:a,onBlur:(0,p.default)(this.activitiesSelectBlurHandler,e),onSelect:(0,p.default)(this.activitiesSelectHandler,e),options:u,value:s[e]||o[e]}))}},{key:"renderGenderIsland",value:function(){var e=this,t=this.props,n=t.availableSettings,r=t.isUpdatingUserStartBroadcasting;if(!n)return null;var a=this.getUserGender(),o=(0,g.default)(n.broadcastGenders||[],function(t){return{label:e.t("startBroadcasting.genders."+t),value:t}});return o.length<=1?null:k.default.createElement("div",{className:"start-broadcasting-island start-broadcasting-island-dark"},k.default.createElement("h3",{className:"start-broadcasting-island-title"},this.t("startBroadcasting.genders.title")),k.default.createElement($.default,{disabled:r,onSelect:(0,p.default)(this.optionSelectHandler,"broadcastGender"),options:o,value:a}))}},{key:"renderReady",value:function(){var e=this.props,t=e.isUpdatingUserStartBroadcasting,n=e.user,r=n.ratingPosition,a=n.username;return k.default.createElement("div",{className:"legacy-container-small page start-broadcasting-page","data-component-name":"StartBroadcastingPage"},k.default.createElement("div",{className:"page-header"},k.default.createElement("h1",null,this.t("startBroadcasting.title")),this.renderIf(r,k.default.createElement("div",{className:"award-place-wrapper"},k.default.createElement("span",{className:"award-text-wrapper"},this.t("startBroadcasting.currentPlace"),k.default.createElement(Y.default,{messageId:"startBroadcasting.currentPlaceHelp"})),k.default.createElement(x.default,{username:a,place:r,size:40,topMedalHeight:42,isOtherPlaceVisible:!0,isTooltipVisible:!1})))),this.renderMobileAppBanner(),k.default.createElement(ue.default,{shouldShowLatestOnly:!0}),this.renderRules(),this.renderUploadPreviewPicture(),this.renderGenderIsland(),this.renderActivitiesIsland("publicActivities"),this.renderActivitiesIsland("privateActivities"),k.default.createElement("div",{className:"start-broadcasting-controls"},k.default.createElement(q.default,{disabled:t,onClick:this.startBroadcastingClickHandler,size:"large",style:"apply"},this.t("startBroadcasting.startBroadcastingBtn"))))}}]),t}(V.default);ye.checkAccess=re.redirectNotApprovedModelsToDocumentsPage;var be={routerPush:j.push,showSuccessNotification:B.success,updatePrepareStartBroadcasting:oe.updatePrepareStartBroadcasting,updateStartBroadcasting:oe.updateStartBroadcasting,updateProfile:ge.updateProfile};ye.propTypes=I({availableSettings:M.default.object,currentUser:M.default.object,isLoggedIn:M.default.bool,isUpdatingUserPreview:M.default.bool,isUpdatingUserStartBroadcasting:M.default.bool,isUpdateUserPreviewSucceeded:M.default.bool,isUpdateUserStartBroadcastingSucceeded:M.default.bool,userStartBroadcastingError:M.default.instanceOf(Error),userPreviewError:M.default.instanceOf(Error),onSuccessRedirectUrl:M.default.string},(0,ae.getActionPropTypes)(be));var _e=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.availableSettings.data,i=e.broadcast.isStartBroadcastingUpdate,s=ge.UPDATE_TYPES.PREVIEW,l=ge.UPDATE_TYPES.START_BROADCASTING;return{availableSettings:o,currentUser:n,isLoggedIn:r&&!a,isStartBroadcastingUpdate:i,isUpdatingUserPreview:(0,ve.getIsUpdating)(e,s),isUpdatingUserStartBroadcasting:(0,ve.getIsUpdating)(e,l),isUpdateUserPreviewSucceeded:(0,ve.getIsSucceeded)(e,s),isUpdateUserStartBroadcastingSucceeded:(0,ve.getIsSucceeded)(e,l),user:(0,ve.getCurrentUserProfile)(e),userStartBroadcastingError:(0,ve.getError)(e,l),userPreviewError:(0,ve.getError)(e,s),onSuccessRedirectUrl:r?(0,pe.getViewCamUrl)(e,n.username):"/login"}},Se=function(e){return(0,F.bindActionCreators)(be,e)};t.default=(0,D.connect)(_e,Se)(ye)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TokensHistoryPage=void 0;var l=n(6),u=r(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(18),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(110),b=n(62),_=n(5),S=n(23),O=r(S),P=n(8),T=r(P),A=n(39),C=r(A),I=n(19),w=n(7),N=n(574),R=n(1279),M=r(R),L=n(631),k=r(L),D=n(632),U=n(41),j=n(38),F=_.DATE_INTERVALS.LAST_24_HOURS,B=d({},y.getIntervalFor[F](),{intervalName:F}),H=t.TokensHistoryPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.tokensHistory",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:U.currentUserHasChangedAndIsLoggedIn,action:function(){r.intervalChangeHandler(B,!0)}}]),r.intervalChangeHandler=function(e,t){var n=r.props.loadTokensHistory;r.setState({interval:e},function(){t&&n(e)})},s=n,i(r,s)}return s(t,e),c(t,[{key:"getDefaultState",value:function(){return{interval:B}}},{key:"renderReady",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.isLoggedIn,a=t.isPending,o=t.loadError,i=t.totalEarnings,s=t.tokensHistory,l=t.user,c=t.promoCampaigns;if(!r)return null;var d=this.state.interval,f=n.isGold,p=n.isGreen,m=n.isModel,g=n.isStudio,v=f||p,E=(0,u.default)(l,"goldPoints",0);return h.default.createElement("div",{className:"page container tokens-history-page","data-component-name":"TokensHistoryPage"},h.default.createElement("div",{className:"page-header"},h.default.createElement("h1",null,this.t(v?"tokensHistory.title":"tokensHistory.modelTitle")),this.renderIf(v,function(){return h.default.createElement("div",{className:"header-info"},h.default.createElement("div",{className:"header-info-gold-points",id:"header_info_gold_points"},h.default.createElement(T.default,{img:"question",size:16})),h.default.createElement(C.default,{placement:"bottom",targetId:"header_info_gold_points",isMobileRelative:!1},e.t("tokensHistory.goldPointTooltip")),h.default.createElement("span",{className:"header-info-label"},e.t("tokensHistory.header.info.user"),":"),h.default.createElement("span",{className:"header-info-value"},E))}),this.renderIf(s.size>0&&(m||g),function(){return h.default.createElement("div",{className:"header-info"},h.default.createElement("span",{className:"total-for-period-label"},e.t("tokensHistory.header.info.model"),":"),h.default.createElement("span",{className:"total-for-period-value"},h.default.createElement("span",{className:"tokens"},i.inTokens),h.default.createElement("span",{className:"amount"},"($",(0,b.moneyFormat)(i.inUsd),")")))})),this.renderIf(m||g,function(){return h.default.createElement(k.default,null)}),h.default.createElement(M.default,{isPending:a,promoCampaigns:c,tokensHistory:s,total:i,loadError:o,interval:d,onIntervalChange:this.intervalChangeHandler}))}}]),t}(O.default);H.checkAccess=I.redirectNonPayingRegularUsersToIndex;var V={loadTokensHistory:N.load};H.propTypes=d({currentUser:m.default.object,isLoggedIn:m.default.bool,isPending:m.default.bool,loadError:m.default.instanceOf(Error),totalEarnings:m.default.shape({inTokens:m.default.number.isRequired,inUsd:m.default.number.isRequired}),promoCampaigns:m.default.object,tokensHistory:m.default.instanceOf(f.Seq),user:m.default.object},(0,w.getActionPropTypes)(V));var G=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.config.data.features.promoCampaigns,i=void 0===o?{}:o,s=e.tokensHistory,l=s.error,u=s.isPending,c=s.totalEarnings;return{currentUser:n,isLoggedIn:r&&!a,isPending:u,loadError:l,totalEarnings:c,promoCampaigns:i,tokensHistory:(0,D.getTokensHistory)(e),user:(0,j.getCurrentUserProfile)(e)}},x=function(e){return(0,E.bindActionCreators)(V,e)};t.default=(0,v.connect)(G,x)(H)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),c=n(1),d=r(c),f=n(0),p=r(f),m=n(5),g=n(3),h=r(g),v=n(396),E=r(v),y=n(1280),b=r(y),_=["date","username","type","tokens"],S=[m.DATE_INTERVALS.LAST_24_HOURS,m.DATE_INTERVALS.THIS_WEEK,m.DATE_INTERVALS.THIS_MONTH,m.DATE_INTERVALS.LAST_MONTH],O=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onUpdateInterval=function(e,t){r.props.onIntervalChange(e,t)},a=n,i(r,a)}return s(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.isPending,n=e.loadError,r=e.promoCampaigns,o=e.tokensHistory,i=e.total,s=e.interval,l=s.intervalName,u=void 0===l?"custom":l,c=a(s,["intervalName"]);return p.default.createElement("div",{"data-component-name":"TokensHistory"},p.default.createElement(E.default,{isPending:t,interval:c,onUpdate:this.onUpdateInterval,currentIntervalName:u,buttonIntervalNames:S}),p.default.createElement(b.default,{columns:_,promoCampaigns:r,tokensHistory:o,total:i,isPending:t,loadError:n}))}}]),t}(h.default);O.propTypes={onIntervalChange:d.default.func.isRequired,interval:d.default.shape({from:d.default.string,until:d.default.string,intervalName:d.default.string}).isRequired,isPending:d.default.bool.isRequired,promoCampaigns:d.default.object,tokensHistory:d.default.instanceOf(u.Seq).isRequired,total:d.default.shape({inTokens:d.default.number.isRequired,inUsd:d.default.number.isRequired}),loadError:d.default.object},t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(18),d=n(1),f=r(d),p=n(0),m=r(p),g=n(3),h=r(g),v=n(22),E=r(v),y=n(1281),b=r(y),_=n(1283),S=r(_),O=n(1285),P=r(O),T=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.columns,n=e.promoCampaigns,r=e.tokensHistory,a=e.total,o=e.isPending,i=e.loadError;return m.default.createElement("div",{className:this.c("tokens-history-table-wrapper",{"is-loading":o}),"data-component-name":"TokensHistoryTable"},o?m.default.createElement(E.default,{size:90}):null,m.default.createElement("table",{className:"tokens-history-table"},this.renderIf(!(0,l.default)(r),m.default.createElement(b.default,{columns:t})),m.default.createElement(S.default,{columns:t,isPending:o,loadError:i,promoCampaigns:n,tokensHistory:r}),m.default.createElement(P.default,{loadError:i,tokensHistory:r,total:a})))}}]),t}(h.default);T.propTypes={columns:f.default.arrayOf(f.default.string).isRequired,promoCampaigns:f.default.object,tokensHistory:f.default.instanceOf(c.Seq).isRequired,total:f.default.shape({inTokens:f.default.number.isRequired,inUsd:f.default.number.isRequired}),isPending:f.default.bool.isRequired,loadError:f.default.object},t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(1282),g=r(m),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.columns;return d.default.createElement("thead",{"data-component-name":"TokensHistoryTableHead"},d.default.createElement("tr",null,e.map(function(e,t){return d.default.createElement(g.default,{key:t,column:e})})))}}]),t}(p.default);h.propTypes={columns:u.default.arrayOf(u.default.string).isRequired},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return d.default.createElement("th",{"data-component-name":"TokensHistoryCellHead"},d.default.createElement("span",null,this.t("tokensHistory.table.header."+this.props.column)))}}]),t}(p.default);m.propTypes={column:u.default.string.isRequired},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(18),d=n(1),f=r(d),p=n(0),m=r(p),g=n(3),h=r(g),v=n(1284),E=r(v),y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"renderError",value:function(){var e=this.props,t=e.loadError,n=e.columns;return m.default.createElement("tr",null,m.default.createElement("td",{className:"tokens-history-error",colSpan:n.length},t.message))}},{key:"renderEmpty",value:function(){var e=this.props.columns;return m.default.createElement("tr",null,m.default.createElement("td",{className:"tokens-history-empty",colSpan:e.length},this.t("empty")))}},{key:"renderContent",value:function(){var e=this.props,t=e.tokensHistory,n=e.columns,r=e.promoCampaigns;return t.map(function(e,t){return m.default.createElement("tr",{key:t},n.map(function(t,n){return m.default.createElement(E.default,{key:n,value:e[t],column:t,item:e,promoCampaigns:r})}))})}},{key:"render",value:function(){var e=this.props,t=e.tokensHistory,n=e.loadError,r=e.isPending,a=void 0;return a=n?this.renderError():!r&&(0,l.default)(t)?this.renderEmpty():this.renderContent(),m.default.createElement("tbody",{"data-component-name":"TokensHistoryTableBody"},a)}}]),t}(h.default);y.propTypes={columns:f.default.arrayOf(f.default.string).isRequired,promoCampaigns:f.default.object,tokensHistory:f.default.instanceOf(c.Seq).isRequired,isPending:f.default.bool.isRequired,loadError:f.default.object},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(107),l=r(s),u=n(128),c=r(u),d=n(69),f=r(d),p=n(6),m=r(p),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),E=n(0),y=r(E),b=n(15),_=r(b),S=n(24),O=n(110),P=n(3),T=r(P),A=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),g(t,[{key:"renderTokensCellContent",value:function(){var e=this.props.value,t=null;return(0,c.default)(e)&&0!==e&&(t=e>0?"tokens-history-tokens-plus":"tokens-history-tokens-minus"),y.default.createElement("td",null,y.default.createElement("span",{className:t},e>0?"+"+e:Math.abs(e)))}},{key:"renderUsernameCellContent",value:function(){var e=this,t=this.props,n=t.value,r=t.item;return y.default.createElement("td",null,y.default.createElement("span",null,this.renderIf(0===r.userId,function(){return n},function(){return y.default.createElement(S.Link,{title:e.t("button.modelsProfile"),to:"/model/"+n},n)})))}},{key:"renderDateCellContent",value:function(){return y.default.createElement("td",null,y.default.createElement("span",null,(0,_.default)(this.props.value).format(O.HUMAN_DATE_FORMAT)))}},{key:"renderDefaultCellContent",value:function(){return y.default.createElement("td",null,y.default.createElement("span",null,this.props.value))}},{key:"renderTypeCellContent",value:function(){var e=this.props,t=e.value,n=e.item,r=e.promoCampaigns,a=(0,m.default)(n,"extra.promoCampaign",""),o=r[a]||a,i=a?"tokensHistory.promoCampaign."+o:"tokensHistory.type."+t,s=this.t(i);return y.default.createElement("td",null,y.default.createElement("span",null,s===i?t:s))}},{key:"render",value:function(){var e=this.props.column,t="render"+(0,l.default)(e)+"CellContent";return(0,f.default)(this[t])?this[t]():this.renderDefaultCellContent()}}]),t}(T.default);A.propTypes={column:v.default.string.isRequired,item:v.default.object.isRequired,value:v.default.any.isRequired,promoCampaigns:v.default.object},t.default=A},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(3),g=r(m),h=n(62),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.loadError,r=e.tokensHistory,a=e.total;return Boolean(n)||!t.isModel||0===r.length?null:f.default.createElement("tfoot",{"data-component-name":"TokensHistoryFooter"},f.default.createElement("tr",null,f.default.createElement("td",{colSpan:"3"},f.default.createElement("span",{className:"total-for-period-label"},this.t("tokensHistory.footer.totalForPeriod"),":")),f.default.createElement("td",null,f.default.createElement("span",{className:"total-for-period-value"},f.default.createElement("span",{className:"tokens"},a.inTokens),f.default.createElement("span",{className:"amount"},"($",(0,h.moneyFormat)(a.inUsd),")")))))}}]),t}(g.default);v.propTypes={loadError:c.default.object,tokensHistory:c.default.instanceOf(l.Seq).isRequired,total:c.default.shape({inTokens:c.default.number.isRequired,inUsd:c.default.number.isRequired})},v.defaultProps={tokensHistory:(0,l.Seq)(),total:{inTokens:0,inUsd:0}};var E=function(e){var t=e.auth;return{auth:t,config:e.config,i18n:e.i18n,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,p.connect)(E)(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudioEarningsPage=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(23),v=r(h),E=n(62),y=n(19),b=n(7),_=n(573),S=n(1287),O=r(S),P=n(632),T=t.StudioEarningsPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.studioEarnings",i=n,o(r,i)}return i(t,e),l(t,[{key:"renderReady",value:function(){var e=this,t=this.props,n=t.isPending,r=t.studioEarnings,a=t.loadError,o=t.loadStudioEarnings,i=t.total;return p.default.createElement("div",{className:"page container studio-earnings-page","data-component-name":"StudioEarningsPage"},p.default.createElement("div",{className:"page-header"},p.default.createElement("h1",null,this.t("seo.title.studioEarnings")),this.renderIf(r.size>0,function(){return p.default.createElement("div",{className:"header-info"},p.default.createElement("span",{className:"total-for-period-label"},e.t("studioEarnings.earnings"),":"),p.default.createElement("span",{className:"total-for-period-value"},p.default.createElement("span",{className:"tokens"},i.total),p.default.createElement("span",{className:"amount"},"($",(0,E.moneyFormat)(i.usdTotal),")")))})),p.default.createElement(O.default,{isPending:n,earnings:r,loadError:a,loadStudioEarnings:o,total:i}))}}]),t}(v.default);T.checkAccess=y.redirectNotStudioToLoginOrIndex;var A={loadStudioEarnings:_.load};T.propTypes=s({isPending:d.default.bool,loadError:d.default.instanceOf(Error),studioEarnings:d.default.instanceOf(u.Seq).isRequired,total:d.default.instanceOf(Object).isRequired},(0,b.getActionPropTypes)(A));var C=function(e){var t=e.studioEarnings;return{studioEarnings:(0,P.getStudioEarnings)(e),isPending:t.isPending,loadError:t.error,total:(0,P.getStudioEarningsTotal)(e)}},I=function(e){return(0,g.bindActionCreators)(A,e)};t.default=(0,m.connect)(C,I)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=n(18),f=n(1),p=r(f),m=n(0),g=r(m),h=n(110),v=n(5),E=n(3),y=r(E),b=n(396),_=r(b),S=n(1288),O=r(S),P=v.DATE_INTERVALS.LAST_24_HOURS,T=c({},h.getIntervalFor[P](),{intervalName:P}),A=[v.DATE_INTERVALS.LAST_24_HOURS,v.DATE_INTERVALS.THIS_WEEK,v.DATE_INTERVALS.THIS_MONTH,v.DATE_INTERVALS.LAST_MONTH],C=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onUpdateInterval=function(e,t){var n=r.props.loadStudioEarnings;r.setState({interval:e},function(){t&&n(e)})},a=n,i(r,a)}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.onUpdateInterval(T,!0),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"getDefaultState",value:function(e,n){var r=T;return c({},u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n),{interval:r})}},{key:"render",value:function(){var e=this.props,t=e.isPending,n=e.earnings,r=e.loadError,o=e.total,i=this.state.interval,s=i.intervalName,l=void 0===s?"custom":s,u=a(i,["intervalName"]);return g.default.createElement("div",{className:"studio-earnings","data-component-name":"StudioEarnings"},g.default.createElement(_.default,{isPending:t,interval:u,onUpdate:this.onUpdateInterval,currentIntervalName:l,buttonIntervalNames:A}),g.default.createElement(O.default,{earnings:n,isPending:t,loadError:r,total:o}))}}]),t}(y.default);C.propTypes={earnings:p.default.instanceOf(d.Seq).isRequired,isPending:p.default.bool.isRequired,loadError:p.default.object,loadStudioEarnings:p.default.func.isRequired,total:p.default.shape({total:p.default.number,usdTotal:p.default.number})},C.defaultProps={earnings:[]},t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(33),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(18),d=n(1),f=r(d),p=n(0),m=r(p),g=n(3),h=r(g),v=n(22),E=r(v),y=n(62),b=n(24),_=["model","tip","offlineTip","pmUnlockTip","album","private","spy","p2p","contest","videoUnlock","total"],S=["tip","offlineTip","pmUnlockTip","album","private","spy","p2p","contest","videoUnlock","total"],O={model:function(e){return m.default.createElement(b.Link,{to:"/studio/models/"+e.username,className:"studio-earnings-username"},e.username)},total:function(e){return m.default.createElement("span",{className:"studio-earnings-total"},e.total)}},P={total:function(e){return m.default.createElement("span",{className:"total"},m.default.createElement("span",{className:"tokens"},e.total),m.default.createElement("span",{className:"amount"},"($",(0,y.moneyFormat)(e.usdTotal),")"))}},T=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"renderError",value:function(){var e=this.props.loadError;return m.default.createElement("tbody",null,m.default.createElement("tr",null,m.default.createElement("td",{className:"table-error",colSpan:_.length+1},e.message)))}},{key:"renderEmpty",value:function(){return m.default.createElement("tbody",null,m.default.createElement("tr",null,m.default.createElement("td",{className:"table-empty",colSpan:_.length+1},this.t("empty"))))}},{key:"renderContent",value:function(){var e=this.props,t=e.earnings,n=e.loadError,r=e.isPending;return n?this.renderError():r||0!==t.size?m.default.createElement("tbody",{"data-component-name":"StudioEarningsTable"},t.map(function(e,t){return m.default.createElement("tr",{key:t},m.default.createElement("td",null,t+1),_.map(function(t,n){return m.default.createElement("td",{key:n},O[t]?O[t](e):e[t])}))})):this.renderEmpty()}},{key:"renderFooter",value:function(){var e=this.props,t=e.earnings,n=e.total;if(0===t.size)return null;var r=Object.keys((0,l.default)(n,S));return m.default.createElement("tfoot",null,m.default.createElement("tr",null,m.default.createElement("td",{colSpan:"2"},this.t("studioEarnings.table.footer.totalForPeriod")),r.map(function(e,t){return m.default.createElement("td",{key:t},P[e]?P[e](n):n[e])})))}},{key:"renderHeader",value:function(){var e=this;return m.default.createElement("thead",null,m.default.createElement("tr",null,m.default.createElement("th",null,"№"),_.map(function(t){return m.default.createElement("th",{key:t},e.t("studioEarnings.table.header."+t))})))}},{key:"render",value:function(){var e=this.props.isPending;return m.default.createElement("div",{className:this.c("table-wrapper",{"is-loading":e}),"data-component-name":"StudioEarningsTable"},e?m.default.createElement(E.default,{size:90}):null,m.default.createElement("table",{className:"table"},this.renderHeader(),this.renderContent(),this.renderFooter()))}}]),t}(h.default);T.propTypes={earnings:f.default.instanceOf(c.Seq).isRequired,isPending:f.default.bool.isRequired,loadError:f.default.object,total:f.default.shape({total:f.default.number,usdTotal:f.default.number})},t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmPaymentsSettingsPage=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(4),m=n(23),g=r(m),h=n(22),v=r(h),E=n(8),y=r(E),b=n(19),_=n(227),S=t.ConfirmPaymentsSettingsPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.confirmPaymentsSettings",r.propsUpdateToActionsMap=[{update:["isSocketReady"],action:function(e){var t=e.isSocketReady,n=e.confirmSettings,r=e.match.params,a=r.confirmationKey,o=r.userId;t&&n(o,a)}}],i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isConfirming,r=t.error,a=t.isSuccessfullyConfirmed;return d.default.createElement("div",{className:"page confirm-payments-settings-page","data-component-name":"ConfirmPaymentsSettingsPage"},d.default.createElement("div",{className:"page-block"},this.renderIf(n,function(){return d.default.createElement(v.default,{isCenterd:!0,size:24})}),this.renderIf(r,function(){return d.default.createElement("div",{className:"error"},e.t("confirmPaymentsSettings.error"))}),this.renderIf(a,function(){return d.default.createElement("div",{className:"success"},d.default.createElement(y.default,{img:"check",fill:"#93bb3b"})," ",e.t("confirmPaymentsSettings.success"))})))}}]),t}(g.default);S.checkAccess=b.redirectNotModelOrStudioToLoginOrIndex,S.propTypes={confirmSettings:u.default.func.isRequired,isConfirming:u.default.bool,isSuccessfullyConfirmed:u.default.bool,match:u.default.shape({params:u.default.shape({confirmationKey:u.default.string.isRequired,userId:u.default.string.isRequired}).isRequired}).isRequired};var O=function(e){var t=e.paymentsSettings,n=t.error,r=t.isConfirming,a=t.isSuccessfullyConfirmed;return{error:n,isConfirming:r,isSocketReady:e.appSettings.data.isSocketReady,isSuccessfullyConfirmed:a}},P=function(e){return(0,p.bindActionCreators)({confirmSettings:_.confirm},e)};t.default=(0,f.connect)(O,P)(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UserKnightsPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(18),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(23),y=r(E),b=n(19),_=n(393),S=r(_),O=n(163),P=n(37),T=n(41),A=n(44),C=t.UserKnightsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.knights",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:[T.currentUserHasChanged,T.propsParamsUsernameHasChanged],action:function(e){(0,e.loadUser)({username:e.match.params.username},[P.REQUEST_TYPES.KNIGHTS])}}]),s=n,i(r,s)}return s(t,e),u(t,[{key:"getNextState",value:function(e,n){return l({},c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n),{isDataPending:!e.user,isDataFailed:e.isUserNotFound})}},{key:"renderReady",value:function(){var e=this.props,t=e.isLoadingUsers,n=e.user,r=e.modelKnights;return g.default.createElement("div",{className:"page page-without-header knights-page","data-component-name":"UserKnightsPage"},g.default.createElement(S.default,{className:"page-block",knights:r,isPending:t,user:n}))}}]),t}(y.default);C.checkAccess=b.redirectToMyKnightsPage,C.propTypes={currentUser:p.default.object,loadUser:p.default.func,modelKnights:p.default.instanceOf(d.Seq),match:p.default.shape({params:p.default.shape({username:p.default.string.isRequired})}),isLoadingUsers:p.default.bool,isLoggedIn:p.default.bool,isUserNotFound:p.default.bool,user:p.default.object};var I=(0,A.createUsernameSelector)(),w=(0,O.createModelKnightsSelector)("match.params.username"),N=function(e,t){var n=e.auth,r=e.modelKnights,a=e.users,o=I(e,t);return{currentUser:n.currentUser,isLoadingUsers:a.isPending||r.isPending,isLoggedIn:n.isLoggedIn&&!n.isLoggingOut,isUserNotFound:(0,A.getIsNotFound)(e,t.match.params.username),modelKnights:o?w(e,t):null,user:o}},R=function(e){return(0,v.bindActionCreators)({loadUser:P.loadOne},e)};t.default=(0,h.connect)(N,R)(C)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudioPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(395),E=r(v),y=n(624),b=r(y),_=n(281),S=n(195),O=n(23),P=r(O),T=n(173),A=r(T),C=n(201),I=r(C),w=n(8),N=r(w),R=n(19),M=n(7),L=n(37),k=n(89),D=r(k),U=n(41),j=n(44),F=t.StudioPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.studio",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:U.currentUserHasChangedAndIsLoggedIn,action:function(e){var t=e.currentUser,n=e.loadModels;t.isStudio&&n()}}]),r.loadMoreHandler=function(){var e=r.props,t=e.isUsersPending,n=e.loadMoreUsers,a=e.modelIds;t||n(a)},r.getStudioModelRoute=function(e){return"/studio/models/"+e},r.getStudioNewModelRoute=function(){return"/studio/model-add"},r.listEditHandler=function(e){if(e.length){(0,r.props.removeModels)(e)}},r.renderModelItem=function(e){return m.default.createElement(I.default,{caption:e.username,id:e.id,key:e.id,linkTo:r.getStudioModelRoute(e.username)},m.default.createElement(D.default,{className:"item-image",user:e}))},r.renderModelAddItem=function(){return m.default.createElement(I.default,{caption:r.t("button.addModel"),isEmpty:!0,key:"add",linkTo:r.getStudioNewModelRoute()},m.default.createElement("span",{className:"item-image"},m.default.createElement(N.default,{img:"plus",size:44})))},s=n,i(r,s)}return s(t,e),u(t,[{key:"getDefaultState",value:function(){return l({},c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{isDataPending:!0})}},{key:"getNextState",value:function(e,t){return{isDataPending:e.isLoading}}},{key:"renderReady",value:function(){var e=this.props,t=e.hasMore,n=e.isUsersPending,r=e.studioModels;return m.default.createElement("div",{className:"page studio-page","data-component-name":"StudioPage"},m.default.createElement("div",{className:"page-header"},m.default.createElement("h1",null,this.t("studio.myModelsTitle"))),m.default.createElement(E.default,{shouldShowLatestOnly:!0}),m.default.createElement(b.default,null),m.default.createElement(A.default,{className:"studio-model-list model-list",isEditable:!0,isLoading:n,onEdit:this.listEditHandler,title:this.t("studio.myModelsTitle"),onLoadMore:this.loadMoreHandler,hasMore:t,infiniteScroll:{stubClassName:"model-list-item-stub"}},[this.renderModelAddItem()].concat(a(r.map(this.renderModelItem)))))}}]),t}(P.default);F.checkAccess=R.redirectNotStudioToLoginOrIndex;var B={loadModels:S.load,loadMoreUsers:L.loadMore,removeModels:S.remove};F.propTypes=l({currentUser:f.default.object,isLoading:f.default.bool,isLoggedIn:f.default.bool,studioModels:f.default.arrayOf(f.default.object),modelIds:f.default.arrayOf(f.default.number)},(0,M.getActionPropTypes)(B));var H=function(e){var t=e.auth,n=e.users,r=e.studioModels,a=r.isLoaded,o=r.isLoading,i=r.modelIds,s=(0,_.getStudioModels)(e);return{currentUser:t.currentUser,hasMore:(0,j.getMissingUserIds)(e,i).length>0,isLoading:o,isLoaded:a,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isUsersPending:n.isPending,modelIds:i,studioModels:s}},V=function(e){return(0,h.bindActionCreators)(B,e)};t.default=(0,g.connect)(H,V)(F)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudioModelPage=void 0;var l=n(142),u=r(l),c=n(145),d=r(c),f=n(6),p=r(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},v=n(1),E=r(v),y=n(0),b=r(y),_=n(2),S=n(31),O=n(4),P=n(23),T=r(P),A=n(301),C=r(A),I=n(19),w=n(7),N=n(195),R=n(194),M=n(622),L=r(M),k=n(625),D=r(k),U=n(1293),j=r(U),F=n(12),B=n(391),H=n(281),V=n(41),G=t.StudioModelPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.studioModels",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:B.changedPersonList,action:function(e){var t=e.persons,n=e.routerPush,a=e.selectedModel,o=(0,d.default)(t);n(o?r.getStudioModelPersonRoute(a.username,o.id):r.getStudioModelNewPersonRoute(a.username))}},{update:B.savedSelectedPerson,action:function(){r.setState({isEditMode:!1})}},{update:V.currentUserHasChangedAndIsLoggedIn,action:function(e){var t=e.currentUser,n=e.loadModelPageData,r=e.modelUsername;t.isStudio&&n({username:r})}}]),r.getStudioModelNewPersonRoute=function(e){return"/studio/models/"+e+"/add"},r.getStudioModelPersonRoute=function(e,t){return"/studio/models/"+e+"/"+t},r.personListEditHandler=function(e){if(e.length){var t=r.props;(0,t.deletePersons)(t.selectedModel.id,e)}},r.personListItemClickHandler=function(e){var t=(0,p.default)(e,"currentTarget.href");r.state.isEditMode&&!(0,p.default)(r.state.selectedPerson,"id")&&(e.preventDefault(),r.setState({confirmationUrl:t}))},r.followUrlConfirmed=function(){var e=r.state.confirmationUrl;r.setState({confirmationUrl:null},function(){return r.props.routerPush(e)})},r.cancelConfirmationUrl=function(){r.setState({confirmationUrl:null})},r.onPersonChange=function(e){r.setState({isEditMode:e})},s=n,i(r,s)}return s(t,e),g(t,[{key:"componentDidMount",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);var e=this.props;(0,e.loadModelPageData)({username:e.modelUsername})}},{key:"getDefaultState",value:function(){return m({confirmationUrl:null,isEditMode:!1},this.getNextState(this.props,this.context))}},{key:"getNextState",value:function(e,t){var n=e.isLoading,r=e.selectedModel;return{isDataFailed:!n&&!r,isDataPending:n}}},{key:"renderReady",value:function(){var e=this,t=this.props,n=t.persons,r=t.personId,a=t.selectedPerson,o=t.selectedModel,i=t.modelUsername,s=t.isLoading,l=t.isUpdating,c=this.state.confirmationUrl,d=i?this.t("studio.personList.titleUsername",{username:i}):this.t("studio.personList.titleNewModel"),f=o&&a&&a.statusCombined!==F.MODERATION_STATUSES.approved,p=s||l,g=!r&&(0,u.default)(n,{statusCombined:F.MODERATION_STATUSES.rejected}),h={linkTo:this.getStudioModelNewPersonRoute(i)},v=(p?[]:n).map(function(t){return m({},t,{linkTo:e.getStudioModelPersonRoute(i,t.id),onClick:e.personListItemClickHandler})});return b.default.createElement("div",{className:"page studio-model-page","data-component-name":"StudioModelPage"},b.default.createElement("div",{className:"page-header"},b.default.createElement("h1",null,i||this.t("studio.newModel"))),this.renderIf(o,b.default.createElement(j.default,{user:o})),this.renderIf(n.length,function(){return b.default.createElement("div",{className:"studio-page-block"},b.default.createElement(D.default,{isPending:p,onEdit:e.personListEditHandler,persons:v,plusItemProps:h,selectedPersonId:a?a.id:null,title:d}))}),this.renderIf(g,b.default.createElement("div",{className:"studio-page-block error"},this.t("studio.errors.hasRejectedPerson"))),this.renderIf(f,b.default.createElement(L.default,{agreement:"STUDIO MODEL",canAddNewPerson:!g,person:a,user:o,onPersonChange:this.onPersonChange})),this.renderIf(c,function(){return b.default.createElement(C.default,{onConfirm:e.followUrlConfirmed,onCancel:e.cancelConfirmationUrl},b.default.createElement("p",null,e.t("documentsPage.confirmNewPersonDataLoss")))}))}}]),t}(T.default);G.checkAccess=I.redirectNotStudioToLoginOrIndex;var x={deletePersons:R.deletePersons,loadModelPageData:N.loadModelPageData,routerPush:S.push};G.propTypes=m({currentUser:E.default.object,isLoggedIn:E.default.bool,isLoading:E.default.bool,isUpdating:E.default.bool,isUpdatingPerson:E.default.bool,persons:E.default.arrayOf(E.default.object),modelUsername:E.default.string,selectedModel:E.default.object,personId:E.default.number,selectedPerson:E.default.object},(0,w.getActionPropTypes)(x));var W=function(e,t){var n=e.auth,r=e.studioModels,a=r.isLoading,o=r.isUpdating,i=r.isModelPageDataLoading,s=e.persons.isUpdating,l=n.currentUser,u=t.match.params,c=u.modelUsername,d=u.personId,f=parseInt(d,10)||null,m=(0,H.getSelectedModel)(e,t),g=(0,B.getPersons)(e,{userId:(0,p.default)(m,"id")}),h=(0,B.getSelectedPerson)(e,{personId:f,userId:(0,p.default)(m,"id")});return{currentUser:l,isLoggedIn:n.isLoggedIn&&!n.isLoggingOut,isLoading:a||i,isUpdating:o,isUpdatingPerson:s,persons:g,modelUsername:c,selectedModel:m,personId:f,selectedPerson:h}},Y=function(e){return(0,O.bindActionCreators)(x,e)};t.default=(0,_.connect)(W,Y)(G)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudioModelEdit=void 0;var s=n(6),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(3),v=r(h),E=n(195),y=n(1294),b=r(y),_=n(1295),S=r(_),O=t.StudioModelEdit=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.isUpdating,r=e.error;return t?p.default.createElement("div",{className:this.c("studio-model-edit",this.props.className),"data-component-name":"StudioModelEdit"},p.default.createElement(b.default,{className:"studio-model-edit-block",error:(0,l.default)(r,"details.email")?r:null,updateModel:this.props.updateModel,isPending:n,user:t}),p.default.createElement(S.default,{className:"studio-model-edit-block",error:(0,l.default)(r,"details.password")?r:null,isPending:n,updateModel:this.props.updateModel,user:t})):null}}]),t}(v.default);O.propTypes={user:d.default.object.isRequired,isUpdating:d.default.bool,error:d.default.object,updateModel:d.default.func.isRequired};var P=function(e){var t=e.studioModels,n=t.isUpdating;return{error:t.error,isUpdating:n}},T=function(e){return(0,g.bindActionCreators)({updateModel:E.update},e)};t.default=(0,m.connect)(P,T)(O)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudioModelChangeEmail=void 0;var s=n(33),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(3),h=r(g),v=n(10),E=r(v),y=n(58),b=r(y),_=n(40),S=r(_),O=n(5),P=t.StudioModelChangeEmail=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:["user.email"],action:function(){r.setState({hasChanges:!1,isEditMode:!1})}}],r.changeButtonClickHandler=function(){r.setState({isEditMode:!0})},r.cancelButtonClickHandler=function(){r.setState({isEditMode:!1})},r.saveButtonClickHandler=function(){(0,r.props.updateModel)(r.state.userModified,{notifications:{success:r.t("studio.modelEdit.email.successNotification")}})},r.inputChangeHandler=function(e){var t=r.props.user,n=r.state.userModified;r.setState({hasChanges:t.email!==e.target.value,userModified:u({},n,{email:e.target.value})})},r.keyDownHandler=function(e){e.keyCode===O.KEY_CODES.enter&&r.state.hasChanges&&r.saveButtonClickHandler()},r.renderEdit=function(){var e=r.props.error,t=r.state,n=t.userModified,a=t.hasChanges,o="studio_model_change_email_input_id_"+r.uid;return m.default.createElement("div",{className:"edit-wrapper"},m.default.createElement("div",{className:"field"},m.default.createElement("label",{className:"settings-label",htmlFor:o},r.t("studio.user.email")),m.default.createElement(S.default,{autoFocus:!0,className:r.c({error:e}),id:o,maxLength:O.DEFAULT_MAX_INPUT_LENGTH,onChange:r.inputChangeHandler,onKeyDown:r.keyDownHandler,type:"email",value:n.email}),r.renderIf(e,function(){return m.default.createElement(b.default,{error:e,fieldName:"email",placement:"right",targetId:o})})),m.default.createElement("div",{className:"actions"},m.default.createElement(E.default,{disabled:!a,onClick:r.saveButtonClickHandler,size:"large",style:"apply"},r.t("settings.save")),m.default.createElement(E.default,{onClick:r.cancelButtonClickHandler,size:"large"},r.t("settings.cancel"))))},i=n,o(r,i)}return i(t,e),c(t,[{key:"getDefaultState",value:function(){var e=this.props.user;return{hasChanges:!1,isEditMode:!1,userModified:u({},(0,l.default)(e,["id","email"]))}}},{key:"render",value:function(){var e=this,t=this.state.isEditMode,n=this.c("studio-model-change-email",this.props.className,{"is-pending":this.props.isPending,"is-edit-mode":t});return m.default.createElement("div",{className:n,"data-component-name":"StudioModelChangeEmail"},m.default.createElement("div",{className:"header"},m.default.createElement("h3",null,this.t("studio.modelEdit.email.title")),m.default.createElement("p",null,this.props.user.email)),m.default.createElement("div",{className:"content"},this.renderIf(t,this.renderEdit,function(){return m.default.createElement("div",{className:"actions"},m.default.createElement(E.default,{onClick:e.changeButtonClickHandler,size:"large"},e.t("button.changeEmail")))})))}}]),t}(h.default);P.propTypes={error:f.default.object,isPending:f.default.bool,user:f.default.object.isRequired,updateModel:f.default.func.isRequired},t.default=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudioModelChangePassword=void 0;var s=n(33),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(3),h=r(g),v=n(10),E=r(v),y=n(58),b=r(y),_=n(40),S=r(_),O=n(5),P=t.StudioModelChangePassword=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,c=Array(s),d=0;d<s;d++)c[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.propsUpdateToActionsMap=[{update:["isPending","error"],action:function(e){var t=e.isPending,n=e.error,a=e.user;t||n||r.setState({hasChanges:!1,isEditMode:!1,userModified:u({},(0,l.default)(a,["id"]))})}}],r.changeButtonClickHandler=function(){r.setState({isEditMode:!0})},r.cancelButtonClickHandler=function(){r.setState({isEditMode:!1})},r.saveButtonClickHandler=function(){(0,r.props.updateModel)(r.state.userModified,{notifications:{success:r.t("studio.modelEdit.password.successNotification")}})},r.inputChangeHandler=function(e){var t=r.state.userModified;r.setState({hasChanges:!0,userModified:u({},t,{password:e.target.value})})},r.keyDownHandler=function(e){e.keyCode===O.KEY_CODES.enter&&r.state.hasChanges&&r.saveButtonClickHandler()},r.renderEdit=function(){var e=r.props.error,t=r.state,n=t.userModified,a=t.hasChanges,o="studio_model_change_password_input_id_"+r.uid;return m.default.createElement("div",{className:"edit-wrapper"},m.default.createElement("div",{className:"field"},m.default.createElement("label",{className:"settings-label",htmlFor:o},r.t("studio.user.newPassword")),m.default.createElement(S.default,{autoFocus:!0,className:r.c({error:e}),id:o,maxLength:O.DEFAULT_MAX_INPUT_LENGTH,onChange:r.inputChangeHandler,onKeyDown:r.keyDownHandler,type:"password",value:n.password}),r.renderIf(e,function(){return m.default.createElement(b.default,{error:e,fieldName:"password",placement:"right",targetId:o})})),m.default.createElement("div",{className:"actions"},m.default.createElement(E.default,{disabled:!a,onClick:r.saveButtonClickHandler,size:"large",style:"apply"},r.t("settings.save")),m.default.createElement(E.default,{onClick:r.cancelButtonClickHandler,size:"large"},r.t("settings.cancel"))))},i=n,o(r,i)}return i(t,e),c(t,[{key:"getDefaultState",value:function(){var e=this.props.user;return{hasChanges:!1,isEditMode:!1,userModified:u({},(0,l.default)(e,["id"]))}}},{key:"render",value:function(){var e=this,t=this.state.isEditMode,n=this.c("studio-model-change-password",this.props.className,{"is-pending":this.props.isPending,"is-edit-mode":t});return m.default.createElement("div",{className:n,"data-component-name":"StudioModelChangePassword"},m.default.createElement("div",{className:"header"},m.default.createElement("h3",null,this.t("studio.modelEdit.password.title"))),m.default.createElement("div",{className:"content"},this.renderIf(t,this.renderEdit,function(){return m.default.createElement("div",{className:"actions"},m.default.createElement(E.default,{onClick:e.changeButtonClickHandler,size:"large"},e.t("button.changePassword")))})))}}]),t}(h.default);P.propTypes={error:f.default.object,isPending:f.default.bool,user:f.default.object,updateModel:f.default.func.isRequired},t.default=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudioModelAddPage=void 0;var u=n(30),c=r(u),d=n(13),f=r(d),p=n(49),m=r(p),g=n(6),h=r(g),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(1),b=r(y),_=n(0),S=r(_),O=n(2),P=n(31),T=n(4),A=n(23),C=r(A),I=n(10),w=r(I),N=n(58),R=r(N),M=n(40),L=r(M),k=n(5),D=n(19),U=n(7),j=n(195),F=n(281),B={login:"",email:"",password:""},H=t.StudioModelAddPage=function(e){function t(){var e,n,r,l;i(this,t);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.title="seo.title.studioModelAdd",r.propsUpdateToActionsMap=[].concat(o(r.propsUpdateToActionsMap),[{update:F.changedModelList,action:function(e){var t=e.model,n=e.routerPush;t&&n(r.getStudioModelNewPersonRoute(t.username))}}]),r.getStudioModelNewPersonRoute=function(e){return"/studio/models/"+e+"/add"},r.keyDownHandler=function(e){e.keyCode===k.KEY_CODES.enter&&r.isSubmitEnabled&&r.submit()},r.submit=function(){var e=r.props.createModel;r.setState({isChanged:!1}),e(r.state.user)},r.inputChangeHandler=function(e,t){var n=v({},r.state.user,a({},e,t.target.value));(0,m.default)(n,r.state.user)||r.setState({isChanged:!0,user:n})},l=n,s(r,l)}return l(t,e),E(t,[{key:"getDefaultState",value:function(){return v({isChanged:!1,user:v({},B)},this.getNextState(this.props,this.context))}},{key:"renderField",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.state.user,r=this.props.error,a=(0,h.default)(r,"details."+e,[]),o="studio_models_add_page_"+e+"_"+this.uid;return S.default.createElement("span",{className:"field"},S.default.createElement("label",null,this.t("studio.user."+e),":"),S.default.createElement(L.default,v({id:o,onChange:(0,c.default)(this.inputChangeHandler,e),onKeyDown:this.keyDownHandler,value:n[e]},t)),this.renderIf(!(0,f.default)(a),function(){return S.default.createElement("div",{className:"field-tooltip"},S.default.createElement(R.default,{error:{message:a.join(".\n")},placement:"bottom",targetId:o}))}))}},{key:"renderReady",value:function(){return S.default.createElement("div",{className:"page studio-model-add-page","data-component-name":"StudioModelAddPage"},S.default.createElement("div",{className:"page-header"},S.default.createElement("h1",null,this.t("studio.newModel"))),S.default.createElement("div",{className:this.c("studio-model-add",{"is-pending":this.props.isCreating})},S.default.createElement("div",{className:"studio-model-add-form"},this.renderField("login",{autoFocus:!0}),this.renderField("email"),this.renderField("password",{type:"password"})),S.default.createElement("div",{className:"studio-model-add-submit"},S.default.createElement(w.default,{disabled:!this.isSubmitEnabled,onClick:this.submit,style:"apply"},this.t("button.addModel")))))}},{key:"isSubmitEnabled",get:function(){var e=this,t=["login","email","password"];return this.state.isChanged&&t.every(function(t){return e.state.user[t]})}}]),t}(C.default);H.checkAccess=D.redirectNotStudioToLoginOrIndex;var V={createModel:j.create,routerPush:P.push};H.propTypes=v({model:b.default.object,isCreating:b.default.bool,isCreated:b.default.bool,error:b.default.object},(0,U.getActionPropTypes)(V));var G=function(e){var t=e.studioModels,n=t.isCreating,r=t.isCreated,a=t.error;return{model:(0,F.getNewModel)(e),isCreating:n,isCreated:r,error:a}},x=function(e){return(0,T.bindActionCreators)(V,e)};t.default=(0,O.connect)(G,x)(H)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionsPage=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(23),h=r(g),v=n(135),E=r(v),y=n(19),b=n(131),_=n(1298),S=r(_),O=n(41),P=t.SubscriptionsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.subscriptions",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:O.currentUserHasChangedAndIsLoggedIn,action:function(e){(0,e.loadSubscriptions)()}}]),s=n,i(r,s)}return s(t,e),l(t,[{key:"renderReady",value:function(){var e=this.props,t=e.isLoggedIn,n=e.isPending;return t?f.default.createElement("div",{className:"subscriptions-page","data-component-name":"SubscriptionsPage"},f.default.createElement(E.default,null),f.default.createElement("div",{className:"page model-list-container"},f.default.createElement(S.default,{isEditable:!0,isPending:n}))):null}}]),t}(h.default);P.checkAccess=y.redirectGuestToLoginOrIndex,P.propTypes={currentUser:c.default.object,loadSubscriptions:c.default.func,isLoggedIn:c.default.bool,isPending:c.default.bool.isRequired};var T=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.subscriptions;return{currentUser:n,isLoggedIn:r&&!a,isPending:o.isPending}},A=function(e){return(0,m.bindActionCreators)({loadSubscriptions:b.load},e)};t.default=(0,p.connect)(T,A)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),l=r(s),u=n(13),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(173),b=r(y),_=n(7),S=n(131),O=n(1299),P=r(O),T=n(1300),A=n(37),C=n(44),I=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.loadMoreHandler=function(){var e=r.props,t=e.isPending,n=e.loadMoreUsers;t||n(r.props.subscriptionIds)},r.editHandler=function(e){(0,c.default)(e)||r.props.removeSubscriptions(e,"myFollowingsPage")},i=n,o(r,i)}return i(t,e),f(t,[{key:"renderTitle",value:function(){return h.default.createElement("div",{className:"page-header"},h.default.createElement("h1",null,this.t("mySubscriptions")))}},{key:"listItems",get:function(){return(0,l.default)(this.props.subscriptions,function(e){return h.default.createElement(P.default,{id:e.model.id,key:e.model.id,subscription:e.model})})}},{key:"hasMore",get:function(){return this.props.hasMore}},{key:"isLoadingMore",get:function(){return this.props.isUsersPending}},{key:"onLoadMore",get:function(){return this.loadMoreHandler}},{key:"additionalClassNames",get:function(){return this.c("page-block","subscriptions")}},{key:"additionalInfiniteScrollProps",get:function(){return{stubClassName:"model-list-item-stub"}}}]),t}(b.default),w={loadMoreUsers:A.loadMore,removeSubscriptions:S.remove};I.propTypes=d({},I.propTypes,{hasMore:m.default.bool,isPending:m.default.bool.isRequired,isUsersPending:m.default.bool.isRequired,subscriptionIds:m.default.arrayOf(m.default.number),subscriptions:m.default.array},(0,_.getActionPropTypes)(w));var N=function(e){var t=e.users,n=e.ui,r=n.windowWidth,a=n.windowHeight,o=(0,T.getSubscriptionIds)(e);return{subscriptions:(0,T.getSortedSubscriptions)(e),hasMore:(0,C.getMissingUserIds)(e,o).length>0,isUsersPending:t.isPending,subscriptionIds:o,windowHeight:a,windowWidth:r}},R=function(e){return(0,E.bindActionCreators)(w,e)};t.default=(0,v.connect)(N,R)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(10),g=r(m),h=n(8),v=r(h),E=n(302),y=r(E),b=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(){var e=r.props,t=e.subscription;(0,e.onDeleteClick)(t.id)},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.subscription,n=e.isDeleted,r=e.isEditMode,a=void 0;return r&&(a=n?d.default.createElement(g.default,{className:"btn-restore",onClick:this.clickHandler},this.t("button.restore")):d.default.createElement("span",{className:"remove-button",onClick:this.clickHandler},d.default.createElement(v.default,{img:"close-4"}))),d.default.createElement(y.default,{model:t,"data-component-name":"SubscriptionListItem"},a)}}]),t}(p.default);b.propTypes={subscription:u.default.object,isDeleted:u.default.bool,isEditMode:u.default.bool,onDeleteClick:u.default.func},t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSortedSubscriptions=t.getSubscriptionIds=void 0;var a=n(146),o=r(a),i=n(11),s=r(i),l=n(80),u=r(l),c=n(32),d=n(16),f=function(e){return e.appSettings.data.availableRoutes},p=function(e){return e.modelsOnline.collection},m=function(e){return e.users.collection},g=function(e){return e.subscriptions.collection},h=t.getSubscriptionIds=(0,c.createSelector)([g],function(e){return(0,s.default)(e.toArray(),"modelId")});t.getSortedSubscriptions=(0,c.createSelector)([h,p,m,f],function(e,t,n,r){return(0,o.default)((0,u.default)((0,s.default)(e,function(e){var a=(0,d.findById)(t,e),o=a||(0,d.findById)(n,e);return!o||o.isDeleted?null:{viewCamUrl:r.indexOf("/"+o.username)>-1?"/cams/"+o.username:"/"+o.username,isLive:o.isLive,model:o}})),"isLive","desc")})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ViewCamPage=void 0;var l=n(85),u=r(l),c=n(6),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(20),g=n(1),h=r(g),v=n(0),E=r(v),y=n(2),b=n(31),_=n(4),S=n(28),O=n(9),P=n(5),T=n(151),A=r(T),C=n(23),I=r(C),w=n(10),N=r(w),R=n(17),M=r(R),L=n(8),k=r(L),D=n(19),U=n(7),j=n(83),F=r(j),B=n(282),H=n(42),V=n(1302),G=r(V),x=n(1303),W=r(x),Y=n(1318),K=r(Y),q=n(386),z=r(q),X=n(626),Z=r(X),Q=n(627),J=r(Q),$=n(1344),ee=r($),te=n(1355),ne=r(te),re=n(1356),ae=r(re),oe=n(12),ie=n(45),se=n(71),le=n(37),ue=n(643),ce=r(ue),de=n(41),fe=n(91),pe=n(44),me=500,ge=t.ViewCamPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.routerWillLeave=function(e){var t=r.props,n=t.location,a=t.isBroadcasting,o=t.isInPrivate,i=n.pathname!==e.pathname,s=i&&n.pathname.toLowerCase()===e.pathname.toLowerCase();return"undefined"==typeof window||!a&&!o||(i&&window.open(e.pathname),s)},r.redirectIfAnotherUserRole=function(e,t){var n=e.match.params.username,r=e.model,a=e.routerReplace,o=(0,B.getIsValidRoute)(t.store.getState(),"/"+n),i=Boolean(r)&&r.isModel,s=Boolean(r)&&r.isStudio,l=Boolean(r)&&!i&&!s;return i&&o?(a("/cams/"+r.username),!0):i?(a("/"+r.username),!0):s?(a("/studio/"+r.username),!0):!!l&&(a("/user/"+r.username),!0)},r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:["viewCamProfileShowToken","isProfileVisible"],action:function(e){var t=e.isProfileVisible,n=r,a=n.profileRef;if(t&&a){var o=a.getBoundingClientRect(),i=o.top;F.default.set(i,me)}else F.default.reset()}},{update:[de.currentUserHasBecomeGreen],action:function(e){var t=e.routerReplace;e.unblockModelId===e.model.id&&t("/")}},{update:[de.currentUserRolesHasChanged],action:function(e){var t=e.isProfileVisible,n=e.model,r=e.loadModelProfile;t&&r(n)}},{update:["username"],action:function(e){var t=e.username;r.props.udpateViewcamModelUsername(t)}},{update:[de.propsParamsUsernameHasChanged,de.currentUserHasChanged],action:function(e){var t=e.hideNotification,n=e.initViewCam,a=e.isNotActiveModel,o=e.isOwnCamPage,i=e.loadUser,s=e.toggleProfileVisibility,l=e.match.params.username;s(!1),t({key:"subscription"}),F.default.reset();var u=(0,m.resolve)();a?u=i({username:l}):o||(u=n(l)),u.then(function(){return r.redirectIfAnotherUserRole(r.props,r.context),null})}},{update:["isOwnCamPage"],action:function(e){var t=e.currentUser,n=e.isOwnCamPage,o=e.prefetchSounds,i=e.showModal;if(n){if(!t.isEmailVerified)return void i(P.MODAL_TYPES.CONFIRM_EMAIL,{description:r.t("startBroadcasting.confirmEmailWarning"),isCloseBtnShown:!1,isWrapperCloseDisabled:!0});o([].concat(a((0,u.default)(oe.TIP_SOUND_FILENAMES)),a((0,u.default)(oe.PRIVATE_MODE_SOUND_FILENAMES))))}}}]),r.showProfileClickHandler=function(e){var t=r.props,n=t.currentUser,a=t.isLoggedIn,o=t.loadModelProfile,i=t.model;a&&i.id===n.id||(e.preventDefault(),o(i))},r.startPurchaseTokensModal=function(){var e=r.props.model.id;r.props.prepareBuyTokens(e)},r.hideProfileClickHandler=function(e){e.preventDefault(),r.props.toggleProfileVisibility(!1)},r.renderBlankViewCamBox=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return E.default.createElement("div",{className:"main"},e,E.default.createElement("div",{className:"video"},E.default.createElement(ne.default,null)))},r.renderViewCamPage=function(){var e=r.props,t=e.isOwnCamPage,n=e.model;return E.default.createElement("div",{className:"page view-cam-page"},E.default.createElement(ae.default,{model:n,onAvatarClick:r.showProfileClickHandler}),E.default.createElement("div",{className:r.c("main",{broadcast:t})},E.default.createElement("div",{className:"video"},r.renderIf(t,function(){return E.default.createElement(W.default,null)},function(){return E.default.createElement(ee.default,{model:n})})),E.default.createElement("div",{className:"chat"},E.default.createElement(K.default,{chatOwner:n})),r.renderIf(t,function(){return E.default.createElement(G.default,null)})))},r.renderBannedByKnight=function(){var e=r.props,t=e.model,n=e.banExpired,a=e.currentUser,o=a.isRegular;return E.default.createElement("div",{className:"banned-by-knight"},E.default.createElement(k.default,{img:"account-blocked",size:100}),E.default.createElement("div",{className:"banned-by-knight-title"},r.t("camChat.youAreBannedByModelKnight.title",{username:t.username})),r.renderIf(o,E.default.createElement("div",{className:"banned-by-knight-description"},E.default.createElement(M.default,{messageId:"camChat.youAreBannedByModelKnight.description",elements:{strong:E.default.createElement("strong",null)}}))),E.default.createElement("div",{className:"banned-by-knight-description"},E.default.createElement(M.default,{messageId:"camChat.youAreBannedByModelKnight.unbanned",elements:{strong:E.default.createElement("strong",null)},parameters:{banExpired:n},choiceParameter:"banExpired"})),r.renderIf(o,E.default.createElement(N.default,{style:"apply-alter",onClick:r.startPurchaseTokensModal},r.t("camChat.youAreBannedByModelKnight.button"))))},r.renderBannedCamPage=function(){var e=r.props,t=e.isBannedByKnight,n=e.isGeoBanned,a=e.model,o=void 0;return o=n?E.default.createElement("p",null,r.t("camChat.yourCountryIsBlockedByModel")):t?r.renderBannedByKnight():E.default.createElement("p",null,r.t("camChat.youAreBannedByUser",{username:a.username})),E.default.createElement("div",{className:"page view-cam-page banned"},E.default.createElement(ae.default,{model:a,onAvatarClick:r.showProfileClickHandler}),r.renderBlankViewCamBox(o))},s=n,i(r,s)}return s(t,e),p(t,[{key:"getNextState",value:function(e,t){return{isDataFailed:e.isNotActiveModel}}},{key:"renderMeta",value:function(){var e=this.props,t=e.isOwnCamPage,n=e.match.params.username,r=e.privateRequest.proposeMode,a=t?this.twl("seo.title.camMyShow"+(r?"WithPrivateRequest":"")):this.twl("seo.title.cam",{model:n});return E.default.createElement(A.default,{title:a,description:this.twl("seo.description.cam",{model:n})})}},{key:"renderProfile",value:function(){var e=this.props,t=e.isProfileVisible,n=e.model;return t?E.default.createElement("div",{className:"profile-wrapper"},E.default.createElement("div",{className:"page"},E.default.createElement("div",{className:"profile-header"},E.default.createElement("h4",null,this.t("profile.title")),E.default.createElement("div",{className:"icon-wrapper",onClick:this.hideProfileClickHandler},E.default.createElement(k.default,{img:"close-2",size:14}))),E.default.createElement(ce.default,{shouldRenderWatchButton:!1,isOwnProfile:!1,user:n}),E.default.createElement("div",{className:"container"},E.default.createElement("div",{className:"bottom-close icon-wrapper",onClick:this.hideProfileClickHandler},E.default.createElement(k.default,{img:"scroll-top",size:50}))))):null}},{key:"render",value:function(){var e=this,t=this.state.isDataFailed,n=this.props,r=n.isBanned,a=n.isBannedByKnight,o=n.isGeoBanned,i=n.isOwnCamPage,s=n.model;return t?this.renderFailed():s?E.default.createElement("div",{className:"view-cam-page-wrapper","data-component-name":"ViewCamPage"},this.renderMeta(),this.renderIf(Boolean(r||a||o),this.renderBannedCamPage,this.renderViewCamPage),E.default.createElement("div",{ref:function(t){e.profileRef=t}},this.renderProfile()),this.renderIf(!i,function(){return E.default.createElement(J.default,{excludeIds:[s.id],isPaginated:!0},E.default.createElement(z.default,null),E.default.createElement(Z.default,null))})):this.renderMeta()}}]),t}(I.default);ge.checkAccess=D.redirectModelsWithoutPreviewToStartBroadcastingPage;var he={hideNotification:S.hide,initViewCam:H.init,loadModelProfile:H.loadModelProfile,loadUser:le.loadOne,prefetchSounds:O.prefetchSounds,prepareBuyTokens:H.prepareBuyTokens,routerReplace:b.replace,showModal:O.showModal,toggleProfileVisibility:H.toggleProfileVisibility,udpateViewcamModelUsername:H.udpateViewcamModelUsername};ge.propTypes=f({currentUser:h.default.object,hideNotification:h.default.func.isRequired,isBanned:h.default.bool,isGeoBanned:h.default.bool,isInPrivate:h.default.bool,isLoggedIn:h.default.bool,isNotActiveModel:h.default.bool,isOwnCamPage:h.default.bool,model:h.default.object,match:h.default.shape({params:h.default.shape({username:h.default.string.isRequired})}),unblockModelId:h.default.string,username:h.default.string},(0,U.getActionPropTypes)(he));var ve=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.broadcast,s=e.config.data.isCurrentUrlApprovedModel,l=e.viewCam,u=i.isCamActive,c=i.privateRequest,f=(0,se.getPrivateMode)(e),p=l.isCamAvailable,m=l.isOwnShow,g=l.isProfileVisible,h=l.unblockModelId,v=l.viewCamProfileShowToken,E=t.match.params.username,y=(0,pe.getIsNotFound)(e,E),b=a&&r.username===E,_=(0,ie.getModelByUsername)(e,E),S=Boolean(f)&&(m||p),O=b?i.error:l.error,P=(0,d.default)(O,"details.isApprovedModel",!0),T=(0,d.default)(O,"details.isTesting",!1),A="undefined"==typeof window&&!s,C=_&&!_.isModel||!b&&(!P||T)||y||A;return{currentUser:r,isBanned:a&&_&&(0,fe.getIsBanned)(e,_.id),isBroadcasting:u,isGeoBanned:_&&(0,fe.getIsGeoBanned)(e,_.id),banExpired:_&&(0,fe.getBanHasExpired)(e,_.id),isBannedByKnight:_&&(0,fe.getIsBannedByKnight)(e,_.id),isInPrivate:S,isLoggedIn:a&&!o,isNotActiveModel:C,isOwnCamPage:b,isProfileVisible:g,model:_,privateRequest:c,username:E,unblockModelId:h,viewCamProfileShowToken:v}},Ee=function(e){return(0,_.bindActionCreators)(he,e)};t.default=(0,y.connect)(ve,Ee)(ge)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(3),h=r(g),v=n(73),E=r(v),y=n(7),b=n(12),_=n(224),S=n(536),O=n(120),P=r(O),T=n(37),A=n(71),C=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.renderMember=function(e){var t=r.props,n=t.currentUser,a=t.kingId;return f.default.createElement("li",{key:e.username},f.default.createElement(P.default,{isAdminIconVisible:!0,isColored:!e.isModel||e.id===n.id,isGenderIconHidden:!0,isKing:a===e.id,isKnightIconVisible:!0,isModelIconVisible:e.id===n.id,isPopupEnabled:!0,modelId:n.id,parentUid:r.uid,popupControls:["profile","sendMessage","addToKnight"],size:14,user:e}))},i=n,o(r,i)}return i(t,e),l(t,[{key:"getSocketEventBindings",value:function(e,t){if(!e.isLoggedIn)return[];var n=e.currentUser.id;return[{subscriptionKey:"userJoined:"+n},{subscriptionKey:"userLeft:"+n},{subscriptionKey:"viewersList:"+n}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.counterpart,r=t.invisibles,a=t.guests,o=t.members,i=t.moreRegularUsers,s=t.spies,l=t.viewersCount,u=t.isVirtualPrivate;return f.default.createElement("div",{className:"cam-members-wrapper","data-component-name":"CamMembers"},f.default.createElement(E.default,null,f.default.createElement("div",{className:"cam-members"},f.default.createElement("div",{className:"header"},this.t("camMembers.viewers")+": "+l,f.default.createElement("br",null),this.t("camMembers.guests")+": "+a,f.default.createElement("br",null),this.t("camMembers.invisibles")+": "+r),f.default.createElement("ul",null,o.map(function(t){return e.renderMember(t)})),this.renderIf(i,function(){return f.default.createElement("div",{className:"more-users"},e.t("camMembers.moreUsers",{count:i}))}),this.renderIf(n||u,function(){return f.default.createElement("div",{className:"annex"},e.t("camMembers.spies")+": "+s)}))))}}]),t}(h.default),I={updateUsersFields:T.updateUsersFields};C.propTypes=s({counterpart:c.default.object,currentUser:c.default.object,guests:c.default.number.isRequired,invisibles:c.default.number.isRequired,isLoggedIn:c.default.bool.isRequired,kingId:c.default.number,members:c.default.array.isRequired,moreRegularUsers:c.default.number.isRequired,spies:c.default.number.isRequired,viewersCount:c.default.number.isRequired},(0,y.getActionPropTypes)(I));var w=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.camMembers,i=o.guests,s=o.invisibles,l=o.spies,u=e.viewCam,c=e.ui,d=c.windowWidth,f=c.windowHeight,p=(0,S.getMembersUsersData)(e),m=p.members,g=p.moreRegularUsers,h=(0,A.getPrivateMode)(e)===b.PRIVATE_MODES.MODE_VIRTUAL_PRIVATE;return{counterpart:(0,_.getCounterpart)(e),currentUser:n,guests:i,invisibles:s,isLoggedIn:r&&!a,isVirtualPrivate:h,kingId:u.kingId,members:m,moreRegularUsers:g,spies:l,viewersCount:(0,S.getViewersCount)(e),windowWidth:d,windowHeight:f}},N=function(e){return(0,m.bindActionCreators)(I,e)};t.default=(0,p.connect)(w,N)(C)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(81),y=n(1304),b=r(y),_=n(1305),S=r(_),O=n(1316),P=r(O),T=n(1317),A=r(T),C=n(12),I=n(71),w=n(9),N=n(3),R=r(N),M=n(10),L=r(M),k=n(7),D=n(44),U=function(e,t){var n=t.isCamActive,r=t.privateRequest,a=r.proposeMode,o=r.proposeTimer,i=r.user;return!!(a&&o&&n)&&(!(!a||e.privateRequest.proposeMode)||(0,l.default)(i,"id")!==(0,l.default)(e.privateRequest.user,"id"))},j=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:["isSocketReady"],action:function(e){var t=e.cancelPrivateRequest,n=e.isSocketReady,r=e.privateMode,a=e.privateRequest,o=e.shadeLayout,i=e.stopPrivate;n||(r&&(i(),o(!1)),a.proposeMode&&t())}},{update:U,action:function(e){var t=e.playSound,n=e.privateRequest;t((0,l.default)(n,"proposeMode","private")===C.PRIVATE_MODES.MODE_PRIVATE?C.PRIVATE_MODE_SOUND_FILENAMES.PRIVATE:C.PRIVATE_MODE_SOUND_FILENAMES.CAM2CAM)}},{update:["privateMode"],action:function(e){var t=e.privateMode;(0,e.shadeLayout)(Boolean(t))}}],r.stopPrivateHandler=function(){var e=r.props,t=e.stopPrivate,n=e.stopVirtualPrivate;return e.privateMode===C.PRIVATE_MODES.MODE_VIRTUAL_PRIVATE?n():t()},r.renderPrivateRequest=function(){var e=r.props,t=e.isCamActive,n=e.privateRequest,a=e.model;return t&&n.proposeTimer?g.default.createElement(A.default,{acceptCallback:r.props.confirmPrivate,declineCallback:r.props.cancelPrivateRequest,modelRates:a,privateRequest:n}):null},r.renderPrivateModeText=function(){var e=r.props,t=e.counterpart,n=e.privateMode,a=n===C.PRIVATE_MODES.MODE_VIRTUAL_PRIVATE;if(!n||!t&&!a)return null;var o=r.t("broadcast.privateModeText."+n,a?{}:{username:"<strong>"+t.username+"</strong>"});return g.default.createElement("div",{className:"private-mode-text",dangerouslySetInnerHTML:{__html:o}})},r.renderStartVirtualPrivateButton=function(){return g.default.createElement("div",{className:"start-virtual-private-block"},g.default.createElement(L.default,{className:"start-virtual-private-btn",onClick:r.props.startVirtualPrivate},r.t("button.startVirtualPrivate")))},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.initBroadcast()}},{key:"componentWillUnmount",value:function(){this.resetBroadcast("ModelBroadcast componentWillUnmount"),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"getSocketEventBindings",value:function(e,t){if(!e.isLoggedIn)return[];var n=e.counterpart,r=e.currentUser.id,a=e.privateMode,o=[];return a===C.PRIVATE_MODES.MODE_P2P&&n&&o.push({subscriptionKey:"userBroadcastServerChanged:"+n.id}),[{subscriptionKey:"broadcastConfig:"+r},{subscriptionKey:"canBanChanged:"+r},{subscriptionKey:"goalChanged:"+r},{subscriptionKey:"knightAdded:"+r},{subscriptionKey:"knightDeleted:"+r},{subscriptionKey:"modelStatusChanged:"+r},{subscriptionKey:"modelWarning:"+r},{subscriptionKey:"modelWarningDeleted:"+r},{subscriptionKey:"privateProposed:"+r},{subscriptionKey:"privateProposalCanceled:"+r},{subscriptionKey:"privateStopped:"+r},{subscriptionKey:"userBanned:"+r},{subscriptionKey:"userBroadcastServerChanged:"+r},{subscriptionKey:"userUnbanned:"+r}].concat(o)}},{key:"resetBroadcast",value:function(e){this.props.resetBroadcast(e)}},{key:"renderControls",value:function(){var e=this.props.privateMode;return g.default.createElement("div",{className:"controls"},this.renderPrivateModeText(),g.default.createElement(L.default,{onClick:this.stopPrivateHandler},this.t(e===C.PRIVATE_MODES.MODE_P2P||e===C.PRIVATE_MODES.MODE_P2P_AUDIO?"button.endCam2Cam":"button.endPrivate")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isCamActive,r=t.privateMode,a=t.allowedVirtualPrivate;return g.default.createElement("div",{className:"model-broadcast","data-component-name":"ModelBroadcast"},g.default.createElement(b.default,null),g.default.createElement("div",{className:"wrapper"},g.default.createElement("div",{className:"main"},g.default.createElement("div",{className:"strut"},g.default.createElement(S.default,null)))),this.renderIf(r,function(){return e.renderControls()},function(){return g.default.createElement(P.default,null)}),this.renderIf(a&&n&&!r,this.renderStartVirtualPrivateButton()),this.renderPrivateRequest())}}]),t}(R.default),F={cancelPrivateRequest:E.cancelPrivateRequest,confirmPrivate:E.confirmPrivate,initBroadcast:E.init,playSound:w.playSound,resetBroadcast:E.reset,shadeLayout:w.shadeLayout,startVirtualPrivate:E.startVirtualPrivate,stopCam:E.stopCam,stopPrivate:E.stopPrivate,stopVirtualPrivate:E.stopVirtualPrivate};j.propTypes=u({currentUser:p.default.object,isLoggedIn:p.default.bool,isCamActive:p.default.bool,isLoggingOut:p.default.bool,model:p.default.shape({id:p.default.number}),privateMode:p.default.string,privateRequest:p.default.shape({proposeMode:p.default.string,proposeTimer:p.default.number,user:p.default.object}),privateStartedAt:p.default.instanceOf(Date)},(0,k.getActionPropTypes)(F));var B=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.appSettings.data.isSocketReady,i=e.broadcast,s=i.counterpart,l=i.isCamActive,u=i.model,c=i.privateRequest;return{allowedVirtualPrivate:e.config.data.allowedVirtualPrivate,counterpart:(0,D.getUserById)(e,s.id),currentUser:n,isCamActive:l,isLoggedIn:r&&!a,isLoggingOut:a,isSocketReady:o,model:u,privateMode:(0,I.getPrivateMode)(e),privateRequest:c}},H=function(e){return(0,v.bindActionCreators)(F,e)};t.default=(0,h.connect)(B,H)(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(3),h=r(g),v=n(8),E=r(v),y=n(633),b=r(y),_=n(7),S=n(81),O=n(12),P=n(72),T=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={isThankYouShow:!1},r.updateRatingClickHandler=function(e){r.setState({isThankYouShow:!0}),r.props.updateBroadcastFeedback(e)},r.closeRatingClickHandler=function(){r.setState({isThankYouShow:!1}),r.props.closeBroadcastFeedback()},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.broadcastType,n=e.isFeedbackUpdated,r=this.state.isThankYouShow;return t!==O.BROADCAST_PLAYER_TYPES.WEBRTC||n&&!r?null:f.default.createElement("div",{className:"broadcast-banner","data-component-name":"WebRTCBanner"},f.default.createElement("div",{className:"broadcast-banner-rating-wrapper"},this.renderIf(r,f.default.createElement("span",{className:"broadcast-banner-thank"},this.t("broadcast.banner.rating.thankYou")),f.default.createElement("span",{className:"broadcast-banner-rating"},this.t("broadcast.banner.rating.title"),f.default.createElement(b.default,{defaultValue:0,onChange:this.updateRatingClickHandler}))),f.default.createElement("div",{className:"broadcast-banner-rating-close",onClick:this.closeRatingClickHandler},f.default.createElement(E.default,{img:"close-5",size:11}))))}}]),t}(h.default),A={closeBroadcastFeedback:S.closeBroadcastFeedback,updateBroadcastFeedback:S.updateBroadcastFeedback};T.propTypes=s({isFeedbackUpdated:c.default.bool,broadcastType:c.default.string},(0,_.getActionPropTypes)(A));var C=function(e){var t=e.broadcast.isFeedbackUpdated;return{broadcastType:(0,P.getBroadcastType)(e),isFeedbackUpdated:t}},I=function(e){return(0,m.bindActionCreators)(A,e)};t.default=(0,p.connect)(C,I)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(3),m=r(p),g=n(634),h=r(g),v=n(635),E=r(v),y=n(636),b=r(y),_=n(12),S=n(72),O=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"renderPlayer",value:function(){switch(this.props.playerType){case _.BROADCAST_PLAYER_TYPES.WEBRTC:return d.default.createElement(b.default,{volume:this.props.playerVolume});default:return d.default.createElement(E.default,{volume:this.props.playerVolume})}}},{key:"render",value:function(){var e=this.props.isAlreadyBroadcasting;return d.default.createElement(h.default,{className:"broadcast-player","data-component-name":"BroadcastPlayer"},d.default.createElement("div",{className:"content"},this.renderIf(e,d.default.createElement("div",{className:"poster"},d.default.createElement("div",{className:"error"},this.t("broadcast.alreadyBroadcasting"))),this.renderPlayer())))}}]),t}(m.default);O.propTypes={isAlreadyBroadcasting:u.default.bool,playerVolume:u.default.number,playerType:u.default.string};var P=function(e){var t=e.auth,n=e.broadcast,r=t.currentUser,a=t.isLoggedIn,o=t.isLoggingOut,i=n.isAlreadyBroadcasting,s=n.playerVolume;return{currentUser:r,isLoggedIn:a&&!o,isAlreadyBroadcasting:i,playerVolume:s,playerType:(0,S.getBroadcastType)(e)}};t.default=(0,f.connect)(P)(O)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(86),l=r(s),u=n(30),c=r(u),d=n(11),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(0),h=r(g),v=n(1),E=r(v),y=n(4),b=n(2),_=n(3),S=r(_),O=n(8),P=r(O),T=n(7),A=n(397),C=n(42),I=n(12),w=n(72),N=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.updatePlayerType=function(e){r.props.updatePlayerType(e)},r.closeSettingsClickHandler=function(){r.props.toggleSettings(!1)},i=n,o(r,i)}return i(t,e),m(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.playerType,r=t.defaultPlayerType,a=(0,A.getDeviceClickEvent)(this.closeSettingsClickHandler),o={HIGH:r,LOW:I.VIEWCAM_PLAYER_TYPES.SNAPSHOT};return h.default.createElement("div",{className:"player-settings","data-component-name":"PlayerSettings"},h.default.createElement("div",p({className:"btn-close"},a),h.default.createElement(P.default,{img:"close-5",size:30})),h.default.createElement("div",{className:"player-settings-quality"},(0,f.default)(o,function(t,r){return h.default.createElement("div",{key:t,className:e.c("quality-item",{selected:t===n}),onClick:(0,c.default)(e.updatePlayerType,t)},h.default.createElement(P.default,{img:"check-1",size:20}),h.default.createElement("span",{className:"quality-name"},e.t("playerSettings.qualityList."+(0,l.default)(r))),h.default.createElement("span",{className:"quality-label"},e.t("playerSettings.quality")))})))}}]),t}(S.default),R={toggleSettings:C.toggleSettings,updatePlayerType:C.updatePlayerType};N.propTypes=p({playerType:E.default.string,defaultPlayerType:E.default.string},(0,T.getActionPropTypes)(R));var M=function(e){return{playerType:(0,w.getPlayerType)(e),defaultPlayerType:(0,w.getDefaultPlayerType)(e)}},L=function(e){return(0,y.bindActionCreators)(R,e)};t.default=(0,b.connect)(M,L)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(15),c=r(u),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(3),v=r(h),E=n(71),y=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.getPrivateTime=function(){var e=r.props,t=e.privateStartedAt,n=e.shouldConsiderServerTimeDelta,a=r.props.timeDelta;if(!t)return null;var o=(0,c.default)().add(n?a:0,"milliseconds"),i=o.diff(t);return(0,c.default)().startOf("day").millisecond(i).format(i>=36e5?"H:mm:ss":"mm:ss")},i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidRender",value:function(e,n,r){var a=this;if(this.props.privateStartedAt&&!this.timerIntervalId){this.timerIntervalId=setInterval(function(){if(a.timerRef){var e=a.getPrivateTime();a.timerRef.textContent!==e&&(a.timerRef.textContent=e)}},250)}else!this.props.privateStartedAt&&this.timerIntervalId&&(clearInterval(this.timerIntervalId),this.timerIntervalId=null);l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this,e,n,r)}},{key:"render",value:function(){var e=this,t=this.getPrivateTime(),n=this.props.className;return t?m.default.createElement("div",{className:this.c("private-timer",n),ref:function(t){e.timerRef=t}},t):null}}]),t}(v.default);y.propTypes={className:f.default.string,privateStartedAt:f.default.instanceOf(Date),timeDelta:f.default.number,shouldConsiderServerTimeDelta:f.default.bool},y.defaultProps={shouldConsiderServerTimeDelta:!0};var b=function(e){return{timeDelta:e.appSettings.data.timeDelta,shouldConsiderServerTimeDelta:!(0,E.getIsInSpyMode)(e)}};t.default=(0,g.connect)(b)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=function(e,t){var n=t.i18n.trans;return s.default.createElement("div",{className:"poster"},s.default.createElement("div",{className:"error"},n("webRTC.cameraAccessDenied")))};l.contextTypes={i18n:o.default.object},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(12),h=n(3),v=r(h),E=n(8),y=r(E),b=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this;return this.props.isBroadcastingPageOpen?p.default.createElement("div",{className:"web-rtc-supported-wrapper","data-component-name":"WebRTCSupportedBrowser"},p.default.createElement("div",{className:"web-rtc-supported"},p.default.createElement(y.default,{img:"wrong",size:80}),p.default.createElement("span",{className:"supported-title"},this.t("webRTC.supported.title")),p.default.createElement("span",{className:"supported-description"},this.t("webRTC.supported.description")),p.default.createElement("div",{className:"browsers-wrapper"},(0,l.default)(g.SUPPORTED_BROWSERS,function(t){return p.default.createElement("a",{key:t.name,className:"browser",href:t.link,target:"_blank"},p.default.createElement("div",{className:"browser-icon-wrapper"},p.default.createElement(y.default,{img:t.icon})),p.default.createElement("div",{className:"browser-description-wrapper"},p.default.createElement("span",{className:"browser-title"},t.name),p.default.createElement("span",{className:"browser-download"},e.t("webRTC.supported.download"))))})))):null}}]),t}(v.default);b.propTypes={isBroadcastingPageOpen:d.default.bool};var _=function(e){return{isBroadcastingPageOpen:e.broadcast.isBroadcastingPageOpen}};t.default=(0,m.connect)(_)(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),l=r(s),u=n(96),c=r(u),d=n(36),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},h=n(1),v=r(h),E=n(0),y=r(E),b=n(2),_=n(4),S=n(3),O=r(S),P=n(22),T=r(P),A=n(10),C=r(A),I=n(152),w=r(I),N=n(8),R=r(N),M=n(92),L=r(M),k=n(56),D=r(k),U=n(62),j=n(7),F=n(1311),B=r(F),H=n(141),V=n(637),G=r(V),x=n(29),W=r(x),Y=n(81),K=n(42),q=n(12),z=n(240),X=r(z),Z=n(1315),Q=r(Z),J=n(224),$=n(72),ee=n(71),te=3e3,ne=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:[$.camStatusHasChanged],action:function(e){var t=e.isBroadcastingPageOpen,n=e.isCamActive,a=t&&!n;r.setState({isSettingsShow:a}),r.updateConnection(e)}},{update:[$.camHasChanged],action:function(e){r.onCamHasChanged(e)}},{update:["viewServers"],action:function(e){r.updateConnection(e)}},{update:["volume"],action:function(e){var t=e.volume;r.onVolumeHasChanged(t)}}],r.init=function(){var e=r.props.isBroadcastingPageOpen;r.setState({isInitialized:!0}),e&&r.initializeBroadcast()},r.getWebRTCConfig=function(e){var t=e.isBroadcastingPageOpen,n=e.isCamActive,a=e.privateMode,o=e.streamConfig,i=r.state,s=i.localeStream,l=i.videoProfile,u=a===q.PRIVATE_MODES.MODE_P2P,c=t&&s&&n||!t&&u&&s;return{playConfig:t&&u||!t?o.playConfig:null,broadcastConfig:c?p({},o.broadcastConfig,{stream:s,videoProfile:l}):null}},r.updateWebRTCConfig=function(){var e=r.state,t=e.videoProfile,n=e.videoDeviceId,a=e.audioDeviceId;D.default.set("webRTCConfig",{videoProfile:t,videoDeviceId:n,audioDeviceId:a})},r.onStreamUpdate=function(e){W.default.info("WebRTCPlayer.onStreamUpdate()",e,e.getVideoTracks()),r.setState({localeStream:e}),r.updateWebRTCConfig(),r.updateConnection(r.props)},r.onStreamRemove=function(){W.default.info("WebRTCPlayer.onStreamRemove()"),r.setState({localeStream:null}),r.updateWebRTCConfig(),r.updateConnection(r.props)},r.onStreamError=function(e){W.default.error("WebRTCPlayer.onStreamError()",e);var t=r.state.videoDeviceId;D.default.get("webRTCConfig")&&(D.default.set("webRTCConfig",""),D.default.remove("videoDeviceId-"+t),r.userMedia.destroy(),r.userMedia.create())},r.initializeBroadcast=function(){var e=r.state,t=e.videoDeviceId,n=e.audioDeviceId,a=e.videoProfile;r.userMedia.create({videoDeviceId:t,audioDeviceId:n,videoProfile:a})},r.updateBroadcastSettings=(0,f.default)(function(e){r.props.updateBroadcastSettings(e)},te),r.startBroadcast=function(){var e=r.props,t=e.isBroadcastingPageOpen,n=e.updateBroadcastSettings,a=r.state,o=a.isBroadcastingStart,i=a.videoProfile,s=a.isMuted,l=H.RESOLUTION_LIST[i],u=l.width,c=l.height;t&&!o?(n({width:u,height:c,isMuted:s,broadcastType:q.BROADCAST_PLAYER_TYPES.WEBRTC}),r.onVideoStartPlaying()):r.startConnection()},r.startConnection=function(){r.setState({isBroadcastInitialized:!0,isSettingsShow:!1},function(){r.updateConnection(r.props)})},r.stopConnection=function(){var e=r.props,t=e.isBroadcastingPageOpen,n=e.stopBroadcast,a=e.stopPrivate;t?n():a(),r.closeConnection()},r.closeConnection=function(){var e=r.props.isBroadcastingPageOpen;r.setState({isBroadcastingStart:!1,isBroadcastInitialized:!1,isPlayInitialized:!1,isPlaying:!1,isSettingsShow:e}),e&&r.initializeBroadcast()},r.onVideoStartPlaying=function(){r.props.startBroadcast(q.BROADCAST_PLAYER_TYPES.WEBRTC)},r.setAudioDevice=function(e){r.userMedia.update({audioDeviceId:e.value})},r.setVideoDevice=function(e){r.userMedia.update({videoDeviceId:e.value})},r.changeBroadcastSettings=function(){r.setState({isSettingsShow:!0})},r.toggleAudioEnabled=function(){var e=r.state,t=e.localeStream,n=e.isMuted;t&&((0,c.default)(t.getAudioTracks(),function(e){e.enabled=n}),r.props.updateBroadcastSettings({isMuted:!n}),r.setState({isMuted:!n}))},r.getProfileList=function(){return(0,l.default)(r.state.resolutions,function(e){return{label:r.t("webRTC.profiles."+e),value:e}})},r.setProfile=function(e){var t=e.value,n=H.RESOLUTION_LIST[t],a=n.width,o=n.height;r.updateBroadcastSettings({width:a,height:o}),r.userMedia.update({videoProfile:t})},r.toggleMirrorClickHandler=function(){var e=!r.props.isBroadcastMirrored;r.props.changeMirrored(e)},r.updateConnection=function(e){var t=r.getWebRTCConfig(e);r.webRTCConnection.updateConnection(t)},r.renderSettings=function(){var e=r.props,t=e.isBroadcastingPageOpen,n=e.isCamActive,a=e.model,o=r.state,i=o.localeStream,s=o.videoProfile,l=o.videoDeviceId,u=o.audioDeviceId,c=a.status,d=n||!t?"backToShow":"startShow",f=r.t("viewCam.poster."+c);return y.default.createElement("div",{className:"web-rtc-settings-wrapper"},y.default.createElement("div",{className:"web-rtc-settings-top"},y.default.createElement("div",{className:"web-rtc-settings"},y.default.createElement("div",{className:"web-rtc-control"},y.default.createElement("div",{className:"web-rtc-control-label"},r.t("webRTC.settings.camera")),y.default.createElement(L.default,{onSelect:r.setVideoDevice,options:r.getDevices(V.DEVICES_TYPE.VIDEO),placeholder:"default",size:"small",value:l,className:"web-rtc-control-select"})),y.default.createElement("div",{className:"web-rtc-control"},y.default.createElement("div",{className:"web-rtc-control-label"},r.t("webRTC.settings.microphone")),y.default.createElement(L.default,{onSelect:r.setAudioDevice,options:r.getDevices(V.DEVICES_TYPE.AUDIO),placeholder:"default",size:"small",value:u,className:"web-rtc-control-select"})),r.renderIf(t,y.default.createElement("div",{className:"web-rtc-control"},y.default.createElement("div",{className:"web-rtc-control-label"},r.t("webRTC.settings.resolution"),y.default.createElement(w.default,{className:"web-rtc-help",messageId:"webRTC.settings.resolutionHelp"})),y.default.createElement(L.default,{onSelect:r.setProfile,options:r.getProfileList(),placeholder:"default",size:"small",value:s,className:"web-rtc-control-select"})))),y.default.createElement("div",{className:"web-rtc-video-wrapper"},y.default.createElement("div",{className:"web-rtc-label"},r.t("webRTC.settings.cameraPreview")),y.default.createElement("div",{className:"web-rtc-video"},r.renderLocaleVideo()))),y.default.createElement("div",{className:"web-rtc-settings-bottom"},y.default.createElement(C.default,{disabled:!(s&&l&&i),className:"web-rtc-settings-button",style:"apply-alter",onClick:r.startBroadcast},r.t("webRTC."+d)),y.default.createElement("div",{className:"web-rtc-status web-rtc-label"},r.t("webRTC.settings.modelStatus")),y.default.createElement("div",null,f)))},r.renderLocaleVideo=function(e){var t=r.state.localeStream;return y.default.createElement(Q.default,{className:"web-rtc-video-element",ref:function(e){r.localeVideoRef=e},mediaStream:t,volume:e?0:50})},r.renderRemoteVideo=function(){var e=r.props,t=e.lastSnapshotUrl,n=e.volume,a=r.state.remoteStream;return y.default.createElement(Q.default,{className:"web-rtc-video-element",ref:function(e){r.remoteVideoRef=e},mediaStream:a,lastSnapshotUrl:t,volume:n})},i=n,o(r,i)}return i(t,e),m(t,[{key:"getDefaultState",value:function(){var e=this.props.isBroadcastingPageOpen,n=e?D.default.get("webRTCConfig",{}):{},r=n.videoProfile,a=void 0===r?e?H.PROFILE_LIST.HIGH:H.PROFILE_LIST.LOW:r,o=n.videoDeviceId,i=void 0===o?null:o,s=n.audioDeviceId,l=void 0===s?null:s;return p({},g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{resolutions:[],isInitialized:!1,isPlayInitialized:!e,isMuted:!1,isSettingsShow:e,videoProfile:a,videoDeviceId:i,audioDeviceId:l})}},{key:"componentDidMount",value:function(){var e=this;this.webRTCConnection=new B.default,this.userMedia=new G.default,this.userMedia.on(V.USER_MEDIA.ERROR,function(){e.onStreamError()}),this.userMedia.on(V.USER_MEDIA.UPDATE,function(t){e.setState(p({},t,{localeStream:null}))}),this.userMedia.on(V.USER_MEDIA.UPDATE_STREAM,function(t){e.onStreamUpdate(t)}),this.userMedia.on(V.USER_MEDIA.REMOVE_STREAM,function(){e.onStreamRemove()}),this.webRTCConnection.on(H.WEBRTC_CONNECTION_EVENTS.PLAYING,function(t){e.setState({isPlayInitialized:!0,isPlaying:!0,remoteStream:t})}),this.webRTCConnection.on(H.WEBRTC_CONNECTION_EVENTS.INIT_PLAYING,function(){e.setState({isPlaying:!1,isPlayInitialized:!0,remoteStream:null})}),this.webRTCConnection.on(H.WEBRTC_CONNECTION_EVENTS.CLOSE_PLAYING,function(){e.setState({isPlayInitialized:!1,isPlaying:!1,remoteStream:null})}),this.webRTCConnection.on(H.WEBRTC_CONNECTION_EVENTS.INIT_BROADCASTING,function(){e.setState({isBroadcastingStart:!1,isBroadcastInitialized:!0})}),this.webRTCConnection.on(H.WEBRTC_CONNECTION_EVENTS.BROADCASTING,function(){e.setState({isBroadcastingStart:!0,isBroadcastInitialized:!0})}),this.webRTCConnection.on(H.WEBRTC_CONNECTION_EVENTS.CLOSE_BROADCASTING,function(){e.stopConnection()}),this.init(),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.webRTCConnection&&this.webRTCConnection.closeConnection(),this.userMedia&&this.userMedia.destroy(),this.stopConnection(),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"getDevices",value:function(e){var t=this.state.devices;if(!t)return[];var n=this.t("webRTC.settings."+(e===V.DEVICES_TYPE.VIDEO?"camera":"microphone"));return t.filter(function(t){return t.kind===e}).map(function(e,t){return{label:e.label||n+" #"+(t+1),value:e.deviceId}})}},{key:"onCamHasChanged",value:function(e){var t=e.privateMode,n=e.isLoggedIn,r=e.currentUser;n&&t===q.PRIVATE_MODES.MODE_P2P&&!r.isModel&&this.initializeBroadcast(e),this.updateConnection(e)}},{key:"onVolumeHasChanged",value:function(e){var t=this.remoteVideoRef;t&&(t.volume=(0,U.roundFloat)(e/100))}},{key:"renderControls",value:function(){var e=this,t=this.props.canMuteMic,n=this.state,r=n.isMuted,a=n.isSettingsShow,o=n.isBroadcastingStart,i=n.isBroadcastInitialized;return!a&&o&&i?y.default.createElement("div",{className:this.c("web-rtc-controls",{"can-mute-mic":t})},y.default.createElement("div",{className:"web-rtc-controls-icons"},y.default.createElement("div",{className:"web-rtc-controls-icon settings",onClick:this.changeBroadcastSettings},y.default.createElement("div",{className:"web-rtc-controls-icon-item"},y.default.createElement(R.default,{img:"broadcast-settings",size:17}))),y.default.createElement("div",{className:"web-rtc-controls-icon stop",onClick:this.stopConnection},y.default.createElement("div",{className:"web-rtc-controls-icon-item"},y.default.createElement(R.default,{img:"stop",size:22}))),this.renderIf(t,function(){return y.default.createElement("div",{className:"web-rtc-controls-icon muted",onClick:e.toggleAudioEnabled},y.default.createElement("div",{className:"web-rtc-controls-icon-item"},e.renderIf(r,y.default.createElement(R.default,{img:"mic-off",size:17}),y.default.createElement(R.default,{img:"mic-on",size:17}))))}))):null}},{key:"render",value:function(){var e=this.props,t=e.isBroadcastMirrored,n=e.isBroadcastingPageOpen,r=this.state,a=r.isInitialized,o=r.isBroadcastInitialized,i=r.isBroadcastingStart,s=r.isPlayInitialized,l=r.isPlaying,u=r.isSettingsShow,c=s&&o,d=(!n||c)&&!u;return a?y.default.createElement("div",{className:this.c("web-rtc-player",{mirror:t}),"data-component-name":"WebRTC"},this.renderIf(d,y.default.createElement(X.default,null)),this.renderIf(u,this.renderSettings,y.default.createElement("div",{className:this.c("web-rtc-video",{"cam-to-cam":c})},y.default.createElement("div",{className:"video-locale"},y.default.createElement("div",{className:"reflect-wrapper",onClick:this.toggleMirrorClickHandler},y.default.createElement(R.default,{img:"reflect",size:25})),this.renderLocaleVideo(!0),this.renderIf(o&&!i,y.default.createElement(T.default,{isCentered:!0}))),y.default.createElement("div",{className:"video-remote"},this.renderRemoteVideo(),this.renderIf(s&&!l,y.default.createElement(T.default,{isCentered:!0}))))),this.renderControls()):y.default.createElement(T.default,{isCentered:!0,"data-component-name":"WebRTC"})}}]),t}(O.default),re={changeMirrored:Y.changeMirrored,startBroadcast:Y.startCam,stopBroadcast:Y.stopCam,stopPrivate:K.stopPrivate,updateBroadcastSettings:Y.updateBroadcastSettings};ne.propTypes=p({counterpart:v.default.object,isBroadcastMirrored:v.default.bool,isBroadcastingPageOpen:v.default.bool,isCamActive:v.default.bool,lastSnapshotUrl:v.default.string,model:v.default.object,streamConfig:v.default.shape({broadcastConfig:v.default.object,playbackConfig:v.default.object}).isRequired,streamName:v.default.string.isRequired,userStreamName:v.default.string,privateMode:v.default.string,viewServers:v.default.object.isRequired,volume:v.default.number},(0,j.getActionPropTypes)(re));var ae=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.appSettings,i=e.broadcast,s=e.viewCam,l=e.profile,u=o.data.viewServers,c=i.isCamActive,d=i.isBroadcastMirrored,f=i.isBroadcastingPageOpen,p=s.viewCamSettings,m=s.isCamAvailable,g=(0,ee.getPrivateMode)(e);return{canMuteMic:(0,J.getCanMuteMic)(e),counterpart:f?i.counterpart:s.counterpart,currentUser:n,isBroadcastMirrored:d,isBroadcastingPageOpen:f,isCamActive:c,isCamAvailable:m,model:f?i.model:s.model,privateMode:g,streamConfig:(0,$.getWebRtcStreamConfig)(e),viewServers:u,viewCamSettings:p,streamName:f?i.streamName:s.streamName,userStreamName:f?i.userStreamName:s.userStreamName,isLoggedIn:r&&!a,userProfile:l.user}},oe=function(e){return(0,_.bindActionCreators)(re,e)};t.default=(0,b.connect)(ae,oe)(ne)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DEBOUNCE_UPDATE_CONNECTION=void 0;var s=n(36),l=r(s),u=n(49),c=r(u),d=n(149),f=r(d),p=n(29),m=r(p),g=n(1312),h=n(141),v=t.DEBOUNCE_UPDATE_CONNECTION=100,E=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.initPlayConnection=function(){m.default.info("webRTCConnection.initPlayConnection()"),e.emit(h.WEBRTC_CONNECTION_EVENTS.INIT_PLAYING)},e.initBroadcastConnection=function(){m.default.info("webRTCConnection.initBroadcastConnection()"),e.emit(h.WEBRTC_CONNECTION_EVENTS.INIT_BROADCASTING)},e.successPlayConnection=function(){m.default.info("webRTCConnection.successPlayConnection()");var t=e.playConnection.getStream();e.emit(h.WEBRTC_CONNECTION_EVENTS.PLAYING,t)},e.successBroadcastConnection=function(){m.default.info("webRTCConnection.successBroadcastConnection()"),e.emit(h.WEBRTC_CONNECTION_EVENTS.BROADCASTING)},e.errorPlayConnection=function(t){m.default.error("webRTCConnection.errorPlayConnection()",t),e.emit(h.WEBRTC_CONNECTION_EVENTS.ERROR_PLAYING,t)},e.errorBroadcastConnection=function(t){m.default.error("webRTCConnection.errorBroadcastConnection()",t),e.emit(h.WEBRTC_CONNECTION_EVENTS.ERROR_BROADCASTING,t)},e.closeBroadcastConnection=function(){m.default.info("webRTCConnection.closeBroadcastConnection()"),e.emit(h.WEBRTC_CONNECTION_EVENTS.CLOSE_BROADCASTING)},e.closePlayingConnection=function(){m.default.info("webRTCConnection.closePlayingConnection()"),e.emit(h.WEBRTC_CONNECTION_EVENTS.CLOSE_PLAYING)},e.updatePlayingConnection=(0,l.default)(function(t){if(m.default.info("webRTCConnection.updatePlayingConnection()",t),!t){if(!e.playConfig)return;e.playConfig=null,e.playConnection.closeConnection(),e.closePlayingConnection()}(0,c.default)(e.playConfig,t)||(e.playConfig=t,e.playConnection.updateConnection(t))},v),e.updateBroadcastingConnection=(0,l.default)(function(t){if(m.default.info("webRTCConnection.updateBroadcastingConnection()",t),!t){if(!e.broadcastConfig)return;e.broadcastConfig=null,e.broadcastConnection.closeConnection(),e.closeBroadcastConnection()}(0,c.default)(e.broadcastConfig,t)||(e.broadcastConfig=t,e.emit(h.WEBRTC_CONNECTION_EVENTS.INIT_BROADCASTING),e.broadcastConnection.updateConnection(t))},v),e.updateConnection=function(t){m.default.info("webRTCConnection.updateConnection()",t);var n=t.playConfig,r=t.broadcastConfig;e.updatePlayingConnection(n),e.updateBroadcastingConnection(r)},e.closeConnection=function(){m.default.info("webRTCConnection.closeConnection()"),e.updatePlayingConnection(),e.updateBroadcastingConnection(),e.removeAllListeners()},e.playConnection=new g.FlashphonerWebRTCPlayConnection,e.playConnection.on(h.WEBRTC_CONNECTION_EVENTS.INIT_PLAYING,e.initPlayConnection),e.playConnection.on(h.WEBRTC_CONNECTION_EVENTS.PLAYING,e.successPlayConnection),e.playConnection.on(h.WEBRTC_CONNECTION_EVENTS.ERROR_PLAYING,e.errorPlayConnection),e.playConnection.on(h.WEBRTC_CONNECTION_EVENTS.CLOSE_PLAYING,e.closePlayingConnection),e.broadcastConnection=new g.FlashphonerWebRTCBroadcastConnection,e.broadcastConnection.on(h.WEBRTC_CONNECTION_EVENTS.INIT_BROADCASTING,e.initBroadcastConnection),e.broadcastConnection.on(h.WEBRTC_CONNECTION_EVENTS.BROADCASTING,e.successBroadcastConnection),e.broadcastConnection.on(h.WEBRTC_CONNECTION_EVENTS.ERROR_BROADCASTING,e.errorBroadcastConnection),e.broadcastConnection.on(h.WEBRTC_CONNECTION_EVENTS.CLOSE_BROADCASTING,e.closeBroadcastConnection),e}return i(t,e),t}(f.default);t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FlashphonerWebRTCBroadcastConnection=t.FlashphonerWebRTCPlayConnection=t.WEB_CALL_SERVER_STATUS=t.WEB_CALL_SERVER_EVENTS=t.TIMEOUT_UPDATE_CONNECTION=void 0;var s=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(149),c=r(u),d=n(20),f=n(29),p=r(f),m=n(5),g=n(1313),h=r(g),v=n(1314),E=r(v),y=n(141),b=700,_=t.TIMEOUT_UPDATE_CONNECTION=2e4,S=t.WEB_CALL_SERVER_EVENTS={SET_REMOTE_SDP:"setRemoteSDP",GET_USER_DATA:"getUserData",NOTIFY_STREAM_STATUS_EVENT:"notifyStreamStatusEvent",PING:"ping",PONG:"pong",PUBLISH_STREAM:"publishStream",PLAY_STREAM:"playStream",STOP_STREAM:"stopStream",CONNECTION:"connection",UN_PUBLISH_STREAM:"unPublishStream"},O=t.WEB_CALL_SERVER_STATUS={PLAYING:"PLAYING",FAILED:"FAILED",PENDING:"PENDING",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",NOT_ENOUGH_BANDWIDTH:"NOT_ENOUGH_BANDWIDTH"},P={mediaSessionId:null,hasAudio:!0,hasVideo:!0,name:null,published:!0,record:!1,mediaProvider:"WebRTC"},T=function(e){return[l({},P,e)]},A=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()};t.FlashphonerWebRTCPlayConnection=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sessionId=A(),e.onSocketMessage=function(t){var n=t.message;switch(p.default.info("FlashphonerWebRTCPlayConnection.onSocketMessage()",n),n){case S.PING:e.checkConnectionActive();break;case S.GET_USER_DATA:e.updatedPlayConnection();break;case S.SET_REMOTE_SDP:e.setRemoteOffer(t);break;case S.NOTIFY_STREAM_STATUS_EVENT:var r=s(t.data,1),a=r[0].status;a===O.FAILED&&e.updateSession(),a===O.PLAYING&&e.updatedPlaying()}},e.checkConnectionActive=function(){e.socketConnection.send({message:S.PONG,data:[]}),clearTimeout(e.updateConnectionTimerId),e.updateConnectionTimerId=setTimeout(function(){p.default.info("FlashphonerWebRTCPlayConnection.checkConnectionActive()"),e.socketConnection.closeConnection(),e.updateSession()},_)},e.initPlaying=function(){return p.default.info("FlashphonerWebRTCPlayConnection.initPlaying()"),e.emit(y.WEBRTC_CONNECTION_EVENTS.INIT_PLAYING),(0,d.resolve)()},e.getUrl=function(e){return"wss://b-"+e+".stripcdn.com:443/"},e.getStream=function(){return e.peerConnection.getStream()},e.createOffer=function(){p.default.info("FlashphonerWebRTCPlayConnection.createOffer()");var t={offerToReceiveVideo:1,offerToReceiveAudio:1,voiceActivityDetection:!0,iceRestart:!1};return m.BROWSER_CAPABILITIES.safari?(e.peerConnection.connection.addTransceiver("audio"),e.peerConnection.connection.addTransceiver("video"),e.peerConnection.connection.createOffer()):e.peerConnection.connection.createOffer(t)},e.setOffer=function(t){return p.default.info("FlashphonerWebRTCPlayConnection.setOffer()",{sdp:t}),e.peerConnection.setLocalDescription(t)},e.sendOffer=function(){var t=e.config.streamName,n=e.peerConnection.connection.localDescription.sdp;p.default.info("FlashphonerWebRTCPlayConnection.sendOffer()",{sdp:n}),e.socketConnection.send({message:S.PLAY_STREAM,data:T({mediaSessionId:e.sessionId,name:t,hasAudio:!0,hasVideo:!0,published:!1,sdp:n})})},e.setRemoteDescription=function(t){var n=t.sdp;return p.default.info("FlashphonerWebRTCPlayConnection.setRemoteDescription()",{sdp:n}),e.peerConnection.setRemoteDescription(n)},e.setRemoteOffer=function(t){var n=t.data;p.default.info("FlashphonerWebRTCPlayConnection.setRemoteOffer()",{data:n});var r=s(n,2),a=r[1];return e.peerConnection.setRemoteDescription({sdp:a,type:"answer"})},e.updatedPlayConnectionAfterTimeout=function(){return(0,d.resolve)().delay(b).then(e.updatedPlayConnection)},e.updatedPlayConnection=function(){return e.createOffer().then(e.setOffer).then(e.sendOffer)},e.updatedPlaying=function(){p.default.info("FlashphonerWebRTCPlayConnection.updatedPlaying()"),e.emit(y.WEBRTC_CONNECTION_EVENTS.PLAYING)},e.errorPlaying=function(){p.default.info("FlashphonerWebRTCPlayConnection.errorPlaying()"),e.emit(y.WEBRTC_CONNECTION_EVENTS.ERROR_PLAYING)},e.updateSessionId=function(){p.default.info("FlashphonerWebRTCPlayConnection.updateSessionId()"),e.sessionId=A(),e.updateSession()},e.updateSession=function(){return p.default.info("FlashphonerWebRTCPlayConnection.updateSession()"),e.connectionPromise&&e.connectionPromise.cancel(),e.config?(e.connectionPromise=e.initPlaying().then(e.updatePeerConnection).then(e.updateSocketConnection),e.connectionPromise):null},e.resetSession=function(){if(p.default.info("FlashphonerWebRTCPlayConnection.resetSession()"),e.socketConnection.getIsConnected()&&e.config){var t=e.config.streamName;e.socketConnection.send({message:S.STOP_STREAM,data:T({mediaSessionId:e.sessionId,name:t})})}},e.updateConnection=function(t){p.default.info("FlashphonerWebRTCPlayConnection.updateConnection()",t),e.resetSession(),e.config=t,e.updateSession()},e.closeConnection=function(){p.default.info("FlashphonerWebRTCPlayConnection.closeConnection()"),e.resetSession(),e.peerConnection.closeConnection(),e.socketConnection.closeConnection(),e.connectionPromise&&e.connectionPromise.cancel(),e.config=null,e.emit(y.WEBRTC_CONNECTION_EVENTS.CLOSE_PLAYING)},e.updateWebCallServerConnection=function(){p.default.info("FlashphonerWebRTCPlayConnection.updateWebCallServerConnection()"),e.socketConnection.send({message:S.CONNECTION,data:[{appKey:"defaultApp",clientBrowserVersion:navigator.userAgent,clientOSVersion:navigator.appVersion,mediaProviders:["WebRTC"]}]})},e.updateSocketConnection=function(){p.default.info("FlashphonerWebRTCPlayConnection.updateSocketConnection()");var t=e.config.server,n=e.getUrl(t);e.socketConnection.updateConnection(n)},e.updatePeerConnection=function(){p.default.info("FlashphonerWebRTCPlayConnection.updatePeerConnection()"),e.peerConnection.updateConnection()},e.peerConnection=new h.default,e.peerConnection.on(y.PEER_CONNECTION_STATE.FAILED,e.updateSessionId),e.socketConnection=new E.default,e.socketConnection.on(v.SOCKET_EVENTS.MESSAGE,e.onSocketMessage),e.socketConnection.on(v.SOCKET_EVENTS.CONNECTED,e.updatedPlayConnectionAfterTimeout),e.socketConnection.on(v.SOCKET_EVENTS.OPEN,e.updateWebCallServerConnection),e.socketConnection.on(v.SOCKET_EVENTS.CLOSE,e.updateSession),e.socketConnection.on(v.SOCKET_EVENTS.ERROR,e.updateSession),e}return i(t,e),t}(c.default),t.FlashphonerWebRTCBroadcastConnection=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSocketMessage=function(t){var n=t.message;switch(p.default.info("FlashphonerWebRTCBroadcastConnection.onSocketMessage()",n),n){case S.PING:e.socketConnection.send({message:S.PONG,data:[]});break;case S.GET_USER_DATA:e.updatedBroadcastConnection();break;case S.SET_REMOTE_SDP:e.setRemoteOffer(t);break;case S.NOTIFY_STREAM_STATUS_EVENT:var r=s(t.data,1),a=r[0].status;a===O.UNPUBLISHED&&e.updatedBroadcastConnection(),a===O.PUBLISHING&&e.updatedBroadcasting(),a===O.FAILED&&e.failedConnection()}},e.initBroadcast=function(t){return e.config=t,p.default.info("FlashphonerWebRTCBroadcastConnection.initBroadcast()",t),e.emit(y.WEBRTC_CONNECTION_EVENTS.INIT_BROADCASTING),(0,d.resolve)()},e.getUrl=function(e,t){return"wss://s-"+e+".stripcdn.com:443/"+t},e.createOffer=function(){return p.default.info("FlashphonerWebRTCBroadcastConnection.createOffer()"),e.peerConnection.connection.createOffer()},e.setOffer=function(t){return p.default.info("FlashphonerWebRTCBroadcastConnection.setOffer()",{sdp:t}),e.peerConnection.setLocalDescription(t).then(function(){return t})},e.sendOffer=function(t){p.default.info("FlashphonerWebRTCBroadcastConnection.sendOffer()",{sdp:t});var n=e.config.streamName;e.socketConnection.send({message:S.PUBLISH_STREAM,data:T({mediaSessionId:n,name:n,sdp:t.sdp})})},e.setRemoteDescription=function(t){var n=t.sdp;return p.default.info("FlashphonerWebRTCBroadcastConnection.setRemoteDescription()",{sdp:n}),e.peerConnection.setRemoteDescription(n)},e.setRemoteOffer=function(t){var n=t.data;p.default.info("FlashphonerWebRTCBroadcastConnection.setRemoteOffer()",{data:n});var r=s(n,2),a=r[1];e.peerConnection.setRemoteDescription({sdp:a,type:"answer"})},e.updatedBroadcastConnection=function(){return e.createOffer().then(e.setOffer).then(e.sendOffer)},e.updatedBroadcasting=function(){p.default.info("FlashphonerWebRTCBroadcastConnection.updatedBroadcasting()"),e.emit(y.WEBRTC_CONNECTION_EVENTS.BROADCASTING)},e.resetBroadcastConnection=function(){p.default.info("FlashphonerWebRTCBroadcastConnection.resetBroadcastConnection()");var t=e.config.streamName;e.socketConnection.send({message:S.UN_PUBLISH_STREAM,data:T({mediaSessionId:t,name:t})})},e.updateConnection=function(t){return p.default.info("FlashphonerWebRTCBroadcastConnection.updateConnection()"),e.connectionPromise&&e.connectionPromise.cancel(),e.connectionPromise=e.initBroadcast(t).then(e.updatePeerConnection).then(e.updateSocketConnection),e.connectionPromise},e.failedConnection=function(t){p.default.error("FlashphonerWebRTCBroadcastConnection.failedConnection()",t),e.closeConnection()},e.closeConnection=function(){p.default.info("FlashphonerWebRTCBroadcastConnection.closeConnection()"),e.peerConnection.closeConnection(),e.socketConnection.closeConnection(),e.emit(y.WEBRTC_CONNECTION_EVENTS.CLOSE_BROADCASTING)},e.updateWebCallServerConnection=function(){p.default.info("FlashphonerWebRTCBroadcastConnection.updateWebCallServerConnection()"),e.socketConnection.send({message:S.CONNECTION,data:[{appKey:"defaultApp",clientBrowserVersion:navigator.userAgent,clientOSVersion:navigator.appVersion,mediaProviders:["WebRTC"]}]})},e.updateSocketConnection=function(){p.default.info("FlashphonerWebRTCBroadcastConnection.updateSocketConnection()");var t=e.config,n=t.server,r=t.streamName,a=e.getUrl(n,r);e.socketConnection.updateConnection(a)},e.updatePeerConnection=function(){p.default.info("FlashphonerWebRTCBroadcastConnection.updatePeerConnection()");var t=e.config.stream;e.peerConnection.updateConnection(),e.peerConnection.setStream(t)},e.peerConnection=new h.default,e.peerConnection.on(y.PEER_CONNECTION_STATE.FAILED,e.failedConnection),e.socketConnection=new E.default,e.socketConnection.on(v.SOCKET_EVENTS.MESSAGE,e.onSocketMessage),e.socketConnection.on(v.SOCKET_EVENTS.CONNECTED,e.resetBroadcastConnection),e.socketConnection.on(v.SOCKET_EVENTS.OPEN,e.updateWebCallServerConnection),e.socketConnection.on(v.SOCKET_EVENTS.CLOSE,e.closeConnection),e.socketConnection.on(v.SOCKET_EVENTS.ERROR,e.failedConnection),e}return i(t,e),t}(c.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(96),l=r(s),u=n(144),c=r(u),d=n(149),f=r(d),p=n(5),m=n(29),g=r(m),h=n(141),v=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.closeConnection=function(){g.default.info("webRTCConnection.PeerConnection.closeConnection()"),r.connection&&(r.connection.removeEventListener("iceconnectionstatechange",r.onIceConnectionStateChange),r.connection.removeEventListener("addstream",r.onAddStream),r.connection.removeEventListener("track",r.onAddTrack),r.connection.close(),r.connection=null)},r.createConnection=function(){g.default.info("webRTCConnection.PeerConnection.createConnection()"),r.connection=new h.RTCPeerConnection({iceServers:[]},{optional:[{enableDtlsSrtp:!0},{DtlsSrtpKeyAgreement:!0},{googSuspendBelowMinBitrate:!0},{googImprovedWifiBwe:!0}]}),r.connection.addEventListener("iceconnectionstatechange",r.onIceConnectionStateChange),r.connection.addEventListener("addstream",r.onAddStream),r.connection.addEventListener("track",r.onAddTrack)},r.updateConnection=function(){var e=r,t=e.connection;if(g.default.info("webRTCConnection.PeerConnection.updateConnection()",t),t){if(!(t.signalingState===h.PEER_CONNECTION_SIGNALING_STATE.HAVE_LOCAL_OFFER||t.iceConnectionState!==h.PEER_CONNECTION_STATE.NEW))return}r.closeConnection(),r.createConnection()},r.setStream=function(e){g.default.info("webRTCConnection.PeerConnection.setStream()",e),r.connection.addStream?r.connection.addStream(e):(0,l.default)(e.getTracks(),function(e){r.connection.addTrack(e)})},r.getStream=function(){return g.default.info("webRTCConnection.PeerConnection.getStream()",r.remoteStream),r.remoteStream},r.onAddStream=function(e){var t=e.stream;g.default.info("webRTCConnection.PeerConnection.onAddStream()",t),r.remoteStream=t},r.onAddTrack=function(e){var t=e.streams;g.default.info("webRTCConnection.PeerConnection.onAddTrack()",t),r.remoteStream=(0,c.default)(t)},r.addIceCandidate=function(e){g.default.info("webRTCConnection.PeerConnection.addIceCandidate()",e),r.connection.addIceCandidate(e)},r.createAnswer=function(){return g.default.info("webRTCConnection.PeerConnection.createAnswer()"),r.connection.createAnswer()},r.setLocalDescription=function(e){return g.default.info("webRTCConnection.PeerConnection.setLocalDescription()",e),r.connection.setLocalDescription(e)},r.setRemoteDescription=function(e){if(g.default.info("webRTCConnection.PeerConnection.setRemoteDescription()",e),p.BROWSER_CAPABILITIES.edge){var t=e.sdp.split("\n"),n="audio";(0,l.default)(t,function(e){if(0===e.indexOf("m=audio"))n="audio";else if(0===e.indexOf("m=video"))n="video";else if(0===e.indexOf("a=candidate:1 1")||0===e.indexOf("a=candidate:1 2")){var t=new h.RTCIceCandidate({candidate:e,sdpMid:n,sdpMLineIndex:0});r.addIceCandidate(t)}})}return r.connection.setRemoteDescription(new h.RTCSessionDescription(e))},r.onIceConnectionStateChange=function(){g.default.info("webRTCConnection.PeerConnection.onIceConnectionStateChange()",r.connection.iceConnectionState);var e=r.connection.iceConnectionState;switch(e){case h.PEER_CONNECTION_STATE.COMPLETED:case h.PEER_CONNECTION_STATE.CONNECTED:g.default.info("WowzaConnection connected",e),r.emit(h.PEER_CONNECTION_STATE.CONNECTED);break;case h.PEER_CONNECTION_STATE.FAILED:g.default.info("WowzaConnection failed"),r.emit(h.PEER_CONNECTION_STATE.FAILED);break;case h.PEER_CONNECTION_STATE.DISCONNECTED:case h.PEER_CONNECTION_STATE.CLOSED:g.default.info("WowzaConnection closed",e),r.emit(h.PEER_CONNECTION_STATE.CLOSED)}},i=n,o(r,i)}return i(t,e),t}(f.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKET_STATE=t.SOCKET_EVENTS=void 0;var s=n(149),l=r(s),u=n(29),c=r(u),d=t.SOCKET_EVENTS={MESSAGE:"message",OPEN:"open",CONNECTED:"connected",ERROR:"error",CLOSE:"close"},f=t.SOCKET_STATE={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},p=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.getIsConnected=function(){return r.connection&&r.connection.readyState===f.OPEN},r.closeConnection=function(){c.default.info("webRTCConnection.SocketConnection.closeConnection()"),r.connection&&(r.url=null,r.connection.removeEventListener(d.OPEN,r.onOpen),r.connection.removeEventListener(d.MESSAGE,r.onMessage),r.connection.removeEventListener(d.CLOSE,r.onClose),r.connection.removeEventListener(d.ERROR,r.onError),r.connection.close(),r.connection=null)},r.createConnection=function(e){c.default.info("webRTCConnection.SocketConnection.createConnection()",e),r.url=e,r.connection=new WebSocket(e),r.connection.binaryType="arraybuffer",r.connection.addEventListener(d.OPEN,r.onOpen),r.connection.addEventListener(d.MESSAGE,r.onMessage),r.connection.addEventListener(d.CLOSE,r.onClose),r.connection.addEventListener(d.ERROR,r.onError)},r.updateConnection=function(e){c.default.info("webRTCConnection.SocketConnection.updateConnection()",e),r.url===e&&r.getIsConnected()?r.keepConnection():(r.closeConnection(),r.createConnection(e))},r.keepConnection=function(){c.default.info("webRTCConnection.SocketConnection.keepConnection()"),r.emit(d.CONNECTED)},r.send=function(e){c.default.info("webRTCConnection.SocketConnection.send()",e),r.connection.send(JSON.stringify(e))},r.onOpen=function(){c.default.info("webRTCConnection.SocketConnection.onOpen()"),r.emit(d.OPEN)},r.onClose=function(e){c.default.info("webRTCConnection.SocketConnection.onClose()",e),r.emit(d.CLOSE)},r.onError=function(e){c.default.error("webRTCConnection.SocketConnection.onError()",e),r.emit(d.ERROR)},r.onMessage=function(e){var t=JSON.parse(e.data);c.default.info("webRTCConnection.SocketConnection.onMessage()",t),r.emit(d.MESSAGE,t)},i=n,o(r,i)}return i(t,e),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(3),m=r(p),g=n(62),h=n(5),v=h.BROWSER_CAPABILITIES.desktop,E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.getDefaultState=function(){return{hasNativeControls:!v}},r.propsUpdateToActionsMap=[{update:["isFullscreen"],action:function(e){var t=e.isFullscreen;r.toggleFullscreen(t)}},{update:["mediaStream"],action:function(e){var t=e.mediaStream;t?r.updateMediaStream(t):r.removeMediaStream()}},{update:["volume"],action:function(e){var t=e.volume,n=r,a=n.videoRef;a&&(a.volume=(0,g.roundFloat)(t/100))}}],r.onPlay=function(){var e=r,t=e.videoRef;t&&t.controls&&r.setState({hasNativeControls:!1})},r.updateMediaStream=function(e){var t=r,n=t.videoRef;n&&(r.getIsSrcObjectAvailable()?n.srcObject=e:n.src=window.URL.createObjectURL(e),n.play())},r.removeMediaStream=function(){var e=r,t=e.videoRef;t&&(r.getIsSrcObjectAvailable()?t.srcObject=null:t.src=window.URL.revokeObjectURL(t.src))},r.getIsSrcObjectAvailable=function(){return r.videoRef&&void 0!==r.videoRef.srcObject},i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.videoRef;e&&this.registerEventListener(e,"play",this.onPlay),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.removeMediaStream(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.lastSnapshotUrl,a=this.state.hasNativeControls;return f.default.createElement("video",{"data-inline-video":"true",playsInline:!0,className:this.c("video-element",n),ref:function(t){e.videoRef=t},autoPlay:!0,controls:a,poster:r,"data-component-name":"Video"})}}]),t}(m.default);E.propTypes={className:c.default.string,lastSnapshotUrl:c.default.string,mediaStream:c.default.object,volume:c.default.number},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(594),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(3),y=r(E),b=n(10),_=r(b),S=n(5),O=n(7),P=n(81),T=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:["goalData"],action:function(e){var t=e.goalData,n=r.state,a=n.goalAmount,o=n.isGoalAmountActive;r.descriptionRef&&(r.descriptionRef.value=t.description,r.setState({goalAmount:o?a:t.left,goalEnabled:Boolean(t.goal)}))}}],r.resetClickHandler=function(){r.descriptionRef.value="",r.props.setGoal(0,"")},r.setGoal=function(){var e=r,t=e.descriptionRef,n=e.goalRef;r.props.setGoal((0,l.default)(n.value)||0,t.value)},r.checkboxChangeHandler=function(){var e=r,t=e.descriptionRef,n=e.goalRef,a=e.goalEnabledRef,o=e.props,i=a.checked,s=r.state.goalAmount;!i&&s&&(n.value="",s=0,o.setGoal(s,t.value)),r.setState({goalEnabled:i,goalAmount:s},function(){i?n.focus():t.focus()})},r.goalAmountChangeHandler=function(){var e=r,t=e.goalRef;r.setState({goalAmount:(0,l.default)(t.value)||0})},r.applyClickHandler=function(){r.setGoal()},r.inputGoalFocusHandler=function(){r.setState({isGoalAmountActive:!0})},r.inputGoalBlurHandler=function(){r.setState({isGoalAmountActive:!1})},r.keyPressHandler=function(e){e.keyCode===S.KEY_CODES.enter&&r.setGoal()},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.goalRef,n=this.descriptionRef,r=this.state.initialGoalData;this.registerEventListener(n,"keypress",this.keyPressHandler),this.registerEventListener(e,"keypress",this.keyPressHandler),n.value=r.description,d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"getDefaultState",value:function(){var e=this.props.goalData;return{initialGoalData:e,goalEnabled:Boolean(e.goal),goalAmount:e.left}}},{key:"render",value:function(){var e=this,t=this.state,n=t.goalAmount,r=t.goalEnabled;return g.default.createElement("div",{className:"model-set-goal","data-component-name":"ModelSetGoal"},g.default.createElement("div",{className:"description"},g.default.createElement("div",{className:"label"},this.t("modelSetGoal.goalDescription"),":"),g.default.createElement("div",{className:"input-wrapper"},g.default.createElement("input",{className:"input block",maxLength:"100",ref:function(t){e.descriptionRef=t},type:"text"}))),g.default.createElement("div",{className:"goal-controls"},g.default.createElement("div",{className:"goal"},g.default.createElement("div",{className:"checkbox-wrapper"},g.default.createElement("input",{className:"checkbox",checked:r,id:"model_set_goal_checkbox",onChange:this.checkboxChangeHandler,ref:function(t){e.goalEnabledRef=t},type:"checkbox"}),g.default.createElement("label",{htmlFor:"model_set_goal_checkbox"},this.t("modelSetGoal.enableGoal"))),g.default.createElement("div",{className:"value"},g.default.createElement("input",{className:"input",disabled:!this.state.goalEnabled,maxLength:"6",onBlur:this.inputGoalBlurHandler,onChange:this.goalAmountChangeHandler,onFocus:this.inputGoalFocusHandler,type:"text",value:n||"",ref:function(t){e.goalRef=t}}))),g.default.createElement("div",{className:"controls"},g.default.createElement(_.default,{className:"btn-reset",onClick:this.resetClickHandler},this.t("button.reset")),g.default.createElement(_.default,{className:"btn-apply-goal",onClick:this.applyClickHandler,style:"primary"},this.t("button.apply")))))}}]),t}(y.default),A={setGoal:P.setGoal};T.propTypes=u({goalData:p.default.shape({description:p.default.string,goal:p.default.number,left:p.default.number,spent:p.default.number})},(0,O.getActionPropTypes)(A));var C=function(e){return{goalData:e.broadcast.goalData}},I=function(e){return(0,v.bindActionCreators)(A,e)};t.default=(0,h.connect)(C,I)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(3),c=r(u),d=n(1),f=r(d),p=n(0),m=r(p),g=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.acceptClickHandler=function(){r.props.acceptCallback()},r.declineClickHandler=function(){r.props.declineCallback()},i=n,o(r,i)}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{timer:this.props.privateRequest.proposeTimer}}},{key:"componentDidMount",value:function(){var e=this;this.proposeTimer=setInterval(function(){e.state.timer<=0&&e.declineClickHandler(),e.setState({timer:e.state.timer-1})},1e3),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){clearInterval(this.proposeTimer),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"render",value:function(){var e=this.props.modelRates,t=e.spyRate,n=e.privateRate,r=e.p2pRate,a=this.props.privateRequest,o=a.proposeMode,i=a.user,s={p2p:r,p2pAudio:r,private:n,spy:t},l={p2p:this.t("privateRequest.cam2CamShow"),p2pAudio:this.t("privateRequest.cam2CamShow"),private:this.t("privateRequest.privateShow"),spy:this.t("privateRequest.spyShow")},u=this.t("privateRequest.requestQuestion",{mode:"<strong>"+l[o]+"</strong>",username:"<strong>"+i.username+"</strong>",tokens:"<strong>"+s[o]+"</strong>"}),c=this.t("privateRequest.requestTimer",{seconds:this.state.timer});return m.default.createElement("div",{className:"private-request","data-component-name":"PrivateRequest"},m.default.createElement("p",{dangerouslySetInnerHTML:{__html:u}}),m.default.createElement("div",{className:"spacer"}),m.default.createElement("p",null,this.t("privateRequest.acceptQuestion")),m.default.createElement("p",{className:"request-timer"},c),m.default.createElement("div",{className:"controls"},m.default.createElement("button",{className:"btn btn-medium btn-accept",onClick:this.acceptClickHandler},this.t("button.accept")),m.default.createElement("button",{className:"btn btn-medium btn-decline",onClick:this.declineClickHandler},this.t("button.decline"))))}}]),t}(c.default);g.propTypes={acceptCallback:f.default.func.isRequired,declineCallback:f.default.func.isRequired,modelRates:f.default.object.isRequired,privateRequest:f.default.object.isRequired},t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=n(187),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(4),b=n(9),_=n(3),S=r(_),O=n(17),P=r(O),T=n(5),A=n(7),C=n(21),I=n(99),w=n(1319),N=r(w),R=n(1322),M=r(R),L=n(1325),k=r(L),D=n(1343),U=r(D),j=n(640),F=r(j),B=n(66),H=n(359),V=n(60),G=function(e,t){return e.inputText!==t.inputText||e.chatOwner.id!==t.chatOwner.id},x=function(e,t){return e.modelChatFocusToken&&e.modelChatFocusToken!==t.modelChatFocusToken},W=function(e,t){var n=B.MESSAGE_TYPES.CONSOLE;return(0,l.default)(t.lastMessage,"type")===n&&((0,l.default)(e.lastMessage,"type")!==n||(0,l.default)(e.lastMessage,"id")!==(0,l.default)(t.lastMessage,"id"))},Y=function(e,t){return"off"===e.lotteryStatus&&"off"!==t.lotteryStatus||"off"!==e.lotteryStatus&&"off"===t.lotteryStatus},K=!T.BROWSER_CAPABILITIES.iOS&&!T.BROWSER_CAPABILITIES.android&&!T.BROWSER_CAPABILITIES.windowsPhone,q=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[{update:["inputText"],action:function(e){var t=e.inputText;r.setState({messageText:t})}},{update:x,action:function(){r.modelChatInputRef.focus()}},{update:W,action:function(){r.modelChatMessagesRef&&r.modelChatMessagesRef.scrollToLastMessage()}},{update:Y,action:function(){return(0,c.default)(r.modelChatMessagesRef.scrollToLastViewedMessage)}}],r.showUserLevelsModal=function(e){return e.preventDefault(),e.stopPropagation(),r.props.showModal(T.MODAL_TYPES.USER_LEVELS),!1},r.messageChangeHandler=function(e){var t=r.props.chatOwner;r.props.changeInput(t.id),r.setState({messageText:e})},r.messageSendHandler=function(){r.sendMessage().then(function(){r.modelChatMessagesRef.scrollToLastMessage(),r.modelChatInputRef.focus()})},r.userNameClickHandler=function(e){r.onPasteMessage(r.state.messageText+"@"+e+" ")},r.onPasteMessage=function(e){r.setState({messageText:e},function(){return r.modelChatInputRef.focus()})},r.smileClickHandler=function(e){r.onPasteMessage(r.state.messageText+":"+e+":")},r.errorMessageClickHandler=function(){r.props.setChatError(null),r.modelChatInputRef.focus()},r.subscribeToGoldClickHandler=function(e){return e.preventDefault(),e.stopPropagation(),r.props.emitButtonEvent(T.APP_BUTTONS.EMOJI_ERROR_SUBSCRIBE),!1},r.renderError=function(){var e=r.props.sendError,t=r.state.messageText;if(!e)return null;var n=0===t.length,a="/"===t.charAt(0)||"\\"===t.charAt(0);if(!(0,l.default)(e,"details.smilesForbidden")&&(n||a))return null;var o=(0,l.default)(e,"message");if((0,l.default)(e,"details.smilesForbidden")&&(o=v.default.createElement(P.default,{elements:{buyTokens:v.default.createElement("a",{onClick:r.subscribeToGoldClickHandler}),userLevels:v.default.createElement("a",{onClick:r.showUserLevelsModal})},messageId:"camChat.subscribeToGoldMembershipToSendSmiles"})),"system"===(0,l.default)(e,"details.type")){var i=(0,l.default)(e,"details.subtype");i&&(o=v.default.createElement(F.default,{body:(0,l.default)(e,"details.body"),subtype:i,model:r.props.chatOwner}))}return v.default.createElement("div",{className:"model-chat-error",onClick:r.errorMessageClickHandler},o)},i=n,o(r,i)}return i(t,e),f(t,[{key:"getDefaultState",value:function(){return{messageText:""}}},{key:"componentDidMount",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),K&&this.modelChatInputRef.focus()}},{key:"shouldSocketResubscribe",value:function(e,t){return G(this.props,e)}},{key:"getSocketEventBindings",value:function(e,t){var n=e.chatOwner.id;return[{subscriptionKey:"newChatMessage:"+n},{subscriptionKey:"newKing:"+n}]}},{key:"sendMessage",value:function(){var e=this.props,t=e.chatOwner,n=e.sendChatMessage,r=this.state.messageText;return n(t.id,r)}},{key:"render",value:function(){var e=this,t=this.state.messageText,n=this.props,r=n.canSend,a=n.chatOwner,o=n.currentUser,i=n.isChatMessagesOrderReversed,s=n.isLoggedIn,l=n.isLovenseMessages,u=n.messages,c=n.sendError,d=n.windowHeight,f=n.windowOrientation,p=n.windowWidth,m=s&&o.id===a.id,g=!s||!o.isStudio&&!o.isModel;return v.default.createElement("div",{className:"model-chat","data-component-name":"ModelChat"},v.default.createElement(U.default,{isLovenseMessages:l}),v.default.createElement(N.default,{canSend:r,chatOwner:a,error:c,message:t,onMessageChange:this.messageChangeHandler,onMessageSend:this.messageSendHandler,onSmileClick:this.smileClickHandler,inputRef:function(t){e.modelChatInputRef=t}}),v.default.createElement("div",{className:"model-chat-content"},this.renderIf(g,v.default.createElement(M.default,null)),v.default.createElement(k.default,{chatOwner:a,isChatOwner:m,messages:u,onUsernameClick:this.userNameClickHandler,ref:function(t){e.modelChatMessagesRef=t},windowHeight:d,windowWidth:p,windowOrientation:f,isChatMessagesOrderReversed:i})),this.renderError())}}]),t}(S.default),z={addConsoleMessage:I.addConsoleMessage,addSystemMessage:I.addSystemMessage,changeInput:I.changeInput,emitButtonEvent:b.emitButtonEvent,sendChatMessage:I.sendChatMessage,setChatError:I.setChatError,showModal:b.showModal,startWizardWithActionOnEnter:V.startWizardWithActionOnEnter};q.propTypes=d({chatOwner:g.default.object.isRequired,canSend:g.default.bool,currentUser:g.default.object,isLoggedIn:g.default.bool,isLovenseMessages:g.default.bool,lastMessage:g.default.object,modelChatFocusToken:g.default.symbol,loadError:g.default.instanceOf(Error),sendError:g.default.instanceOf(Error)},(0,A.getActionPropTypes)(z));var X=function(e,t){var n=e.auth,r=e.lottery,a=e.modelChat,o=e.config.data.features.isLovenseMessages,i=e.ui,s=i.windowWidth,l=i.windowHeight,u=i.windowOrientation,c=t.chatOwner,d=n.currentUser,f=n.isLoggedIn,p=n.isLoggingOut,m=r.status,g=a.inputText,h=a.isLoading,v=a.isSending,E=a.loadError,y=a.modelChatFocusToken,b=a.sendError,_=(0,H.getChatMessages)(e),S=(0,H.getLastMessage)(e);return{canSend:!v&&(0,H.getCanSend)(e,c.id),currentUser:d,inputText:g,isLoading:h,isLoggedIn:f&&!p,isLovenseMessages:o,isChatMessagesOrderReversed:!(0,C.getIsLayoutMoreThanL)(e),lastMessage:S,loadError:E,lotteryStatus:m,messages:_,modelChatFocusToken:y,sendError:b,windowHeight:l,windowOrientation:u,windowWidth:s}},Z=function(e){return(0,y.bindActionCreators)(z,e)};t.default=(0,E.connect)(X,Z)(q)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(3),v=r(h),E=n(10),y=r(E),b=n(1320),_=r(b),S=n(5),O=n(54),P=n(56),T=r(P),A=n(99),C=n(359),I=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.sendMessageClickHandler=function(e){e.stopPropagation(),r.props.onMessageSend(),r.setState({lastMessage:"",messageIndex:-1})},r.onMessageSend=function(){r.props.onMessageSend(),r.setState({lastMessage:""})},r.messageInputChangeHandler=function(e){e.stopPropagation(),r.props.onMessageChange(e.target.value),r.setState({messageIndex:-1})},r.messageInputKeyDownHandler=function(e){e.stopPropagation();var t=S.KEY_CODES.arrowUp,n=S.KEY_CODES.arrowDown,a=r.props,o=a.chatOwner,i=a.message,s=r.state.messageIndex;if(e.keyCode===t||e.keyCode===n&&-1!==s){e.stopPropagation(),e.preventDefault();var l=T.default.get("consoleCommandListFor"+o.id,[]),u=0;u=e.keyCode===t?s>=l.length-1?l.length-1:s+1:s<0?-1:s-1;var c=l[u];if(u!==s){if(i.length&&e.keyCode===t&&0===u)r.setState({lastMessage:i});else if(-1===u){var d=r.state.lastMessage;c=d,r.setState({lastMessage:""})}r.setState({messageIndex:u}),r.props.onMessageChange(c||"")}}else r.setState({messageIndex:-1});e.keyCode===S.KEY_CODES.enter&&i.length>0&&r.onMessageSend()},r.smilesBeforeOpenHandler=function(){var e=r.props,t=e.error;return(0,e.setChatError)((0,l.default)(t,"details.smilesForbidden")?null:new O.ValidationError("Non-gold users are unable to send smiles",{smilesForbidden:!0},403)),!1},i=n,o(r,i)}return i(t,e),u(t,[{key:"getDefaultState",value:function(){return{messageIndex:-1}}},{key:"render",value:function(){var e=this,t=this.props,n=t.canSend,r=t.canSendSmiles,a=t.isSmilesDropdownVisible,o=t.message,i=t.onSmileClick;return p.default.createElement("div",{className:"model-chat-controls","data-component-name":"ModelChatControls"},p.default.createElement("div",{className:"input-wrapper"},p.default.createElement("input",{className:"input input-message",maxLength:300,onChange:this.messageInputChangeHandler,onKeyDown:this.messageInputKeyDownHandler,ref:this.props.inputRef,type:"text",value:o,placeholder:S.BROWSER_CAPABILITIES.ie11?"":this.t("typeYourMessage")})),p.default.createElement("div",{className:"buttons-wrapper"},p.default.createElement(y.default,{disabled:!n,onClick:this.sendMessageClickHandler,style:"send"},this.t("button.send")),this.renderIf(a,function(){return p.default.createElement(_.default,{onBeforeOpen:r?void 0:e.smilesBeforeOpenHandler,onSmileClick:i})})))}}]),t}(v.default);I.propTypes={canSend:d.default.bool,chatOwner:d.default.object.isRequired,currentUser:d.default.object,error:d.default.object,inputRef:d.default.any,isLoggedIn:d.default.bool,message:d.default.string.isRequired,onMessageChange:d.default.func.isRequired,onSmileClick:d.default.func.isRequired,onMessageSend:d.default.func.isRequired};var w=function(e,t){var n=e.auth,r=n.isLoggedIn,a=n.currentUser,o=t.chatOwner,i=(0,C.getCanSendSmiles)(e,o.id),s=r&&(a.isModel||a.isStudio);return{canSendSmiles:i,isSmilesDropdownVisible:i||!s}},N=function(e){return(0,g.bindActionCreators)({setChatError:A.setChatError},e)};t.default=(0,m.connect)(w,N)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(160),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(9),v=n(3),E=r(v),y=n(8),b=r(y),_=n(73),S=r(_),O=n(1321),P=r(O),T=n(357),A=n(21),C=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:A.hasInterfaceBlockChanged,action:function(e){return r.interfaceBlockChangeHandler(e)}}],r.wrapperClickHandler=function(e){if(e.preventDefault(),e.stopPropagation(),r.state.isDropdownOpen)r.props.releaseInterface();else{var t=r.props.onBeforeOpen;t&&!1===t()||r.props.blockInterface(e.target)}},r.smileClickHandler=function(e){r.props.onSmileClick(e),r.props.releaseInterface()},r.interfaceBlockChangeHandler=function(e){var t=e.isInterfaceBlocked,n=e.currentBlockingComponent;r.setState({isDropdownOpen:t&&r.renderRootRef&&r.renderRootRef.contains(n)})},i=n,o(r,i)}return i(t,e),u(t,[{key:"getDefaultState",value:function(){return{domId:(0,l.default)("smiles_dropdown_"),isDropdownOpen:!1}}},{key:"renderDropDown",value:function(){var e=this;return this.state.isDropdownOpen?p.default.createElement("div",{className:"smiles-list"},p.default.createElement(S.default,null,T.smiles.map(function(t,n){return p.default.createElement(P.default,{key:n,clickCallback:e.smileClickHandler,code:t})}))):null}},{key:"render",value:function(){var e=this,t=this.state.domId;return p.default.createElement("div",{className:"smiles-dropdown",ref:function(t){e.renderRootRef=t}},this.renderDropDown(),p.default.createElement("a",{className:"trigger",id:t,onClick:this.wrapperClickHandler},p.default.createElement(b.default,{img:"smile",size:24})))}}]),t}(E.default);C.propTypes={onBeforeOpen:d.default.func,onSmileClick:d.default.func.isRequired};var I=function(e){var t=e.ui;return{currentBlockingComponent:t.currentBlockingComponent,isInterfaceBlocked:t.isInterfaceBlocked,windowWidth:t.windowWidth,windowHeight:t.windowHeight}},w=function(e){return(0,g.bindActionCreators)({blockInterface:h.blockInterface,releaseInterface:h.releaseInterface},e)};t.default=(0,m.connect)(I,w)(C)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(638),u=r(l),c=function(e){var t=e.clickCallback,n=e.code,r=function(e){e.preventDefault(),e.stopPropagation(),t&&n&&t(n)};return s.default.createElement("a",{className:"active-smile",onClick:r,"data-component-name":"ActiveSmile"},s.default.createElement(u.default,{code:n}))};c.propTypes={code:o.default.string.isRequired,clickCallback:o.default.func},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var u,c=n(11),d=r(c),f=n(171),p=r(f),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(0),v=r(h),E=n(1),y=r(E),b=n(24),_=n(2),S=n(4),O=n(366),P=n(1323),T=r(P),A=n(1324),C=n(9),I=n(3),w=r(I),N=n(17),R=r(N),M=n(8),L=r(M),k=n(10),D=r(k),U=n(5),j=n(51),F=n(59),B=r(F),H=n(62),V=n(7),G=n(120),x=r(G),W=n(41),Y={PROGRESS:"inProgress",FINISHED:"finished",PARTICIPANT:"participant",OFF:"off"},K=(u={},l(u,Y.PROGRESS,"progress"),l(u,Y.FINISHED,"finished"),l(u,Y.PARTICIPANT,"participant"),u),q=2e3,z=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:W.currentUserHasChanged,action:function(e){(0,e.load)()}}]),r.lotteryChangedEventHandler=function(e){r.props.update(e)},r.loadLottery=function(){var e=(0,H.random)(0,q);(0,p.default)(function(){r.props.load()},e)},r.toggleLotteryEventHandler=function(){var e=!r.state.isOpen;r.setState({isOpen:e}),e&&B.default.action({action:j.AMPLITUDE_EVENTS.CLICK_GIVEAWAY_BLOCK})},r.registerClickHandler=function(){r.props.emitButtonEvent(U.APP_BUTTONS.GIVEAWAY_REGISTER)},r.participateClickHandler=function(){r.props.emitButtonEvent(U.APP_BUTTONS.VIEWCAM_LOTTERY_PARTICIPATE)},r.claimClickHandler=function(){r.props.emitButtonEvent(U.APP_BUTTONS.VIEWCAM_LOTTERY_CLAIM)},r.getLotteryType=function(){var e=r.props.lottery;return e.status===Y.PROGRESS&&e.user?K[Y.PARTICIPANT]:e.status===Y.PROGRESS?K[Y.PROGRESS]:K[Y.FINISHED]},r.renderLottery=function(){var e=r.props,t=e.lottery,n=e.timeDelta,a=e.whiteLabelId;return v.default.createElement("div",{className:"lottery-participation"},v.default.createElement(R.default,{className:"lottery-text",messageId:"camChat.lottery.description",elements:{strong:v.default.createElement("strong",null)}}),v.default.createElement(D.default,{style:a?"signup":"auth-banner",onClick:r.participateClickHandler},r.t("camChat.lottery.giveaway")),v.default.createElement("p",null,r.t("camChat.lottery.endLottery"),v.default.createElement(T.default,{endTime:t.applyEndedAt,timeDelta:n})))},r.renderOnlyRegistered=function(){var e=r.props,t=e.lottery,n=e.timeDelta,a=e.whiteLabelId;return v.default.createElement("div",{className:"lottery-registrered"},v.default.createElement(R.default,{className:"lottery-text",messageId:"camChat.lottery.description",elements:{strong:v.default.createElement("strong",null)}}),v.default.createElement(R.default,{messageId:"camChat.lottery.onlyRegistered"}),v.default.createElement(D.default,{style:a?"signup":"auth-banner",onClick:r.registerClickHandler},r.t("camChat.lottery.createFreeAccount")),v.default.createElement("p",null,r.t("camChat.lottery.endLottery"),v.default.createElement(T.default,{endTime:t.applyEndedAt,timeDelta:n})))},r.renderCongratulations=function(){return v.default.createElement("div",{className:"lottery-congratulations"},v.default.createElement("hr",null),v.default.createElement("div",{className:"congratulations"},v.default.createElement(L.default,{img:"tokens",size:18}),v.default.createElement("div",{className:"congratulations-title"},r.t("camChat.lottery.finished.congratulations"))),v.default.createElement(R.default,{messageId:"camChat.lottery.congratulationsDescription",elements:{strong:v.default.createElement("strong",null)}}))},r.renderEmailVerified=function(){var e=r.props,t=e.lottery,n=e.timeDelta;return v.default.createElement("div",{className:"lottery-email-veridfied"},v.default.createElement(R.default,{messageId:"camChat.lottery.description",elements:{strong:v.default.createElement("strong",null)}}),v.default.createElement("p",null,v.default.createElement(R.default,{messageId:"camChat.lottery.onlyEmailVerified",elements:{link:v.default.createElement(b.Link,{to:"/settings"})}})),v.default.createElement("p",null,r.t("camChat.lottery.endLottery"),v.default.createElement(T.default,{endTime:t.applyEndedAt,timeDelta:n})))},r.renderProgress=function(){var e=r.props,t=e.currentUser,n=e.isLoggedIn,a=e.lottery,o=n&&(t.isGold||t.isGreen||t.isEmailVerified);return n?o||a.user?a.user?r.renderParticipant():r.renderLottery():r.renderEmailVerified():r.renderOnlyRegistered()},r.renderParticipant=function(){var e=r.props,t=e.lottery,n=e.timeDelta;return v.default.createElement("div",{className:"lottery-participant"},v.default.createElement("span",null,r.t("camChat.lottery.participant.announced"),v.default.createElement(T.default,{endTime:t.applyEndedAt,timeDelta:n})),v.default.createElement("p",null,v.default.createElement(R.default,{messageId:"camChat.lottery.participant.forget",elements:{strong:v.default.createElement("strong",null)}})))},r.renderWinner=function(){var e=r.props,t=e.lottery,n=e.timeDelta,a=e.isLoggedIn,o=e.isWinner,i=e.currentUser,s=e.whiteLabelId,l=a&&(i.isGold||i.isGreen||i.isEmailVerified),u=t.user,c=void 0;return a?l||u?u&&u.isClaimedPrize?c=r.renderCongratulations():o&&(c=v.default.createElement(D.default,{style:s?"signup":"auth-banner",onClick:r.claimClickHandler},r.t("camChat.lottery.finished.claim"))):c=v.default.createElement("p",null,v.default.createElement(R.default,{messageId:"camChat.lottery.finished.onlyEmailVerified",elements:{link:v.default.createElement(b.Link,{to:"/settings"})}})):c=v.default.createElement(D.default,{style:s?"signup":"auth-banner",onClick:r.registerClickHandler},r.t("camChat.lottery.createFreeAccount")),v.default.createElement("div",{className:"lottery-winner"},r.renderIf(t.winners.length,v.default.createElement("div",{className:"winner-list"},v.default.createElement(R.default,{className:"winner-title",messageId:"camChat.lottery.finished.list",elements:{strong:v.default.createElement("strong",null)}}),(0,d.default)(t.winners,function(e,n){return v.default.createElement("div",{className:"winner-item",key:e.id},v.default.createElement(x.default,{user:e,isAdditionIconVisible:!1,isLevelStatusTooltipVisible:!1,isGenderIconHidden:!0}),n!==t.winners.length-1?",":"")}))),c,v.default.createElement("p",null,r.t("camChat.lottery.finished.titleSecond"),v.default.createElement(T.default,{endTime:t.claimEndedAt,timeDelta:n})))},r.renderDescription=function(){var e=r.state.isOpen,t=r.props.lottery;if(!e)return null;var n=void 0;return t.status===Y.PROGRESS?n=r.renderProgress():t.status===Y.FINISHED&&(n=r.renderWinner()),v.default.createElement("div",{className:"lottery-description"},v.default.createElement("div",{className:"lottery-content"},n))},r.renderTitle=function(){var e=r.props,t=e.lottery,n=e.timeDelta,a=r.getLotteryType(),o=t.status!==Y.FINISHED?t.applyEndedAt:t.claimEndedAt;return v.default.createElement("div",{className:"lottery-title-wrapper",onClick:r.toggleLotteryEventHandler},v.default.createElement("div",{className:"lottery-title"},v.default.createElement(L.default,{img:"playing-dices",size:22}),v.default.createElement("div",{className:"lottery-content"},v.default.createElement("div",{className:"lottery-name"},v.default.createElement(R.default,{className:"lottery-item",messageId:"camChat.lottery."+a+".titleFirst",elements:{strong:v.default.createElement("strong",null)}}),v.default.createElement("span",{className:"lottery-item"},r.t("camChat.lottery."+a+".titleSecond"),v.default.createElement(T.default,{endTime:o,timeDelta:n,onTimeEnd:r.loadLottery}))),v.default.createElement("div",{className:"dropdown-arrow "},v.default.createElement(L.default,{img:"show-more",size:12})))))},s=n,i(r,s)}return s(t,e),g(t,[{key:"getSocketEventBindings",value:function(e,t){return[{subscriptionKey:"lotteryChanged",callback:this.lotteryChangedEventHandler}]}},{key:"render",value:function(){var e=this.props.lottery,t=this.state.isOpen;return e&&e.status!==Y.OFF?v.default.createElement("div",{className:this.c("lottery",{open:t}),"data-component-name":"Lottery"},this.renderTitle(),this.renderDescription()):null}}]),t}(w.default),X={emitButtonEvent:C.emitButtonEvent,load:O.load,showModal:C.showModal,update:O.update};z.propTypes=m({currentUser:y.default.object,lottery:y.default.object,isLoggedIn:y.default.bool,isWinner:y.default.bool,whiteLabelId:y.default.string},(0,V.getActionPropTypes)(X));var Z=function(e){var t=e.appSettings.data.timeDelta,n=e.auth,r=e.config.whiteLabelId,a=e.lottery;return{currentUser:n.currentUser,isLoggedIn:n.isLoggedIn&&!n.isLoggingOut,isWinner:(0,A.getIsCurrentUserWinner)(e),lottery:a,timeDelta:t,whiteLabelId:r}},Q=function(e){return(0,S.bindActionCreators)(X,e)};t.default=(0,_.connect)(Z,Q)(z)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(15),c=r(u),d=n(0),f=r(d),p=n(1),m=r(p),g=n(2),h=n(3),v=r(h),E=n(21),y=250,b=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:["endTime"],action:function(e){var t=e.onTimeEnd;r.startTimer({onTimeEnd:t})}},{update:E.windowFocusHasChanged,action:function(e){e.isWindowFocused&&r.updateLotteryTimer()}}],r.startTimer=function(e){var t=e.onTimeEnd;r.cancelTimer(),r.timerIntervalId=setInterval(function(){if(r.timerRef){var e=r.getTime();r.timerRef.textContent!==e&&(r.timerRef.textContent=e)}r.isTimerEnded()&&(r.cancelTimer(),t&&t())},y)},r.cancelTimer=function(){r.timerIntervalId&&(clearInterval(r.timerIntervalId),r.timerIntervalId=null)},r.updateLotteryTimer=function(){var e=r.props.onTimeEnd;e&&r.isTimerEnded()&&e()},r.getTime=function(){var e=r.props,t=e.endTime,n=e.timeDelta,a=(0,c.default)((0,c.default)(t).diff()).subtract(n,"milliseconds");return a<=0?(0,c.default)(0).format("mm:ss"):(0,c.default)(a).format("mm:ss")},r.isTimerEnded=function(){var e=r.props,t=e.endTime,n=e.timeDelta;return(0,c.default)().add(n,"milliseconds").subtract(5,"seconds").isAfter(t)},i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.startTimer(this.props),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.cancelTimer(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"render",value:function(){var e=this,t=this.getTime();return f.default.createElement("span",{className:"lottery-time",ref:function(t){e.timerRef=t},"data-component-name":"LotteryTimer"},t)}}]),t}(v.default);b.propTypes={endTime:m.default.string.isRequired,timeDelta:m.default.number.isRequired,onTimeEnd:m.default.func};var _=function(e){return{isWindowFocused:e.ui.isWindowFocused}};t.default=(0,g.connect)(_)(b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsCurrentUserWinner=void 0;var r=n(48),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(32),i=function(e){return e.lottery},s=function(e){return e.auth.currentUser};t.getIsCurrentUserWinner=(0,o.createSelector)([i,s],function(e,t){return Boolean(t&&(0,a.default)(e.winners,function(e){return e.username===t.username}))})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(86),l=r(s),u=n(142),c=r(u),d=n(283),f=r(d),p=n(6),m=r(p),g=n(96),h=r(g),v=n(36),E=r(v),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},S=n(18),O=n(1),P=r(O),T=n(0),A=r(T),C=n(3),I=r(C),w=n(8),N=r(w),R=n(73),M=r(R),L=n(5),k=n(21),D=n(1326),U=r(D),j=n(1328),F=r(j),B=n(1332),H=r(B),V=n(640),G=r(V),x=n(66),W=5,Y=300,K=1500,q=null,z=function(e,t){return(0,m.default)(e,"chatOwner.id")!==(0,m.default)(t,"chatOwner.id")},X=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.propsUpdateToActionsMap=[{update:[z],action:function(){s.scrollToLastMessageWithDelay()}},{update:k.layoutHasChanged,action:function(){s.resizeEventHandler()}},{update:k.orientationHasChanged,action:function(){L.BROWSER_CAPABILITIES.iPad&&s.orientationChangedEventHandler()}}],s.scrollListener=(0,E.default)(function(){L.BROWSER_CAPABILITIES.firefox&&s.updateVisibleMessages(),s.updateLastViewedMessage()},Y,{leading:!1}),s.updateLastViewedMessage=function(){var e=s.chatMessagesRef,t=s.props,n=t.isChatMessagesOrderReversed;if(0!==t.messages.length&&e){var r=e.getBoundingClientRect(),a=Math.round(r.left),o=n?r.top+W:r.bottom-W,i=document.elementFromPoint(a,o);i&&(s.lastViewedMessageId=i.getAttribute("data-message-id"))}},s.scrollToLastViewedMessage=function(){var e=s.chatMessagesRef,t=s.lastViewedMessageId,n=s.props.isChatMessagesOrderReversed;if(s.chatMessagesRef&&t){var r=e.querySelector('.messages [data-message-id="'+t+'"]');r&&(e.scrollTop=n?r.offsetTop:r.offsetTop+r.offsetHeight-e.offsetHeight)}},s.updateVisibleMessages=function(){if(s.chatMessagesRef){var e=s.chatMessagesRef,t=s.chatMessagesRef,n=t.scrollTop,r=t.offsetHeight,a=e.querySelectorAll(".message"),o=n-r/2,i=n+1.5*r;(0,h.default)(a,function(e){(0,f.default)(e.offsetTop,o,i)?e.classList.remove("animation-stop"):e.classList.add("animation-stop")})}},s.resizeEventHandler=function(){s.chatMessagesRef&&s.scrollToLastViewedMessage()},s.orientationChangedEventHandler=function(){s.chatMessagesRef&&s.scrollToLastViewedMessage()},s.scrollToLastMessage=function(){if(s.chatMessagesRef){var e=s.props.messages,t=e.last();t&&(s.lastViewedMessageId=t.id,s.scrollToLastViewedMessage())}},s.scrollToLastMessageWithDelay=function(){q&&clearTimeout(q),q=setTimeout(s.scrollToLastMessage,K)},s.chatMessagesRefHandler=function(e){s.chatMessagesRef=e},s.renderMessage=function(e){var t=e.details,n=e.id,r=e.type,a=s.props.chatOwner;if(r===x.MESSAGE_TYPES.SYSTEM){var o=(0,m.default)(t,"subtype"),i=o===x.SYSTEM_MESSAGE_SUBTYPES.CONSOLE_ANNOUNCEMENT,u=o===x.SYSTEM_MESSAGE_SUBTYPES.TOKENS_GIVEAWAY_SIGNUP,c=i||u,d=A.default.createElement(G.default,{body:(0,m.default)(t,"body"),subtype:o,model:a});return A.default.createElement("div",{"data-message-id":n,className:s.c("message system",{"system-announcement":c,"tokens-giveaway-signup":u}),key:n},A.default.createElement("div",{className:"body"},s.renderIf(i,A.default.createElement("div",null,A.default.createElement(N.default,{img:"info",size:18}),d),A.default.createElement("div",null,d))))}if(r===x.MESSAGE_TYPES.CONSOLE){var f=(0,l.default)(t.subtype);return A.default.createElement("div",{className:s.c("message","console","console-"+f),"data-message-id":n,key:n},A.default.createElement("div",{className:"body"},A.default.createElement(H.default,{model:a,message:e})))}if(r===x.MESSAGE_TYPES.APP){var p=(0,l.default)((0,m.default)(t,"lovenseDetails.type"));return A.default.createElement("div",{className:s.c("message","lovense","lovense-"+p),"data-message-id":n,key:n},A.default.createElement("div",{className:"body"},A.default.createElement("div",{className:"icon-wrapper"},A.default.createElement(N.default,{img:"lovense",size:18})),A.default.createElement("div",{className:"message-wrapper"},A.default.createElement(F.default,{model:a,message:e}))))}return A.default.createElement(U.default,{chatOwner:a,key:n,message:e,onUsernameClick:s.props.onUsernameClick})},s.shouldScrollToEnd=!0,s}return i(t,e),b(t,[{key:"componentDidMount",value:function(){var e;this.scrollToLastMessageWithDelay();for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this)).call.apply(e,[this].concat(r))}},{key:"componentWillRender",value:function(e,n,r){_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillRender",this).call(this,e,n,r),this.chatMessagesRef&&(this.shouldScrollToEnd=this.getHasScrolledToLastMessage())}},{key:"componentDidRender",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this)).call.apply(e,[this].concat(r)),this.shouldScrollToEnd?this.scrollToLastMessage():this.scrollToLastViewedMessage(),L.BROWSER_CAPABILITIES.firefox&&this.updateVisibleMessages()}},{key:"shouldComponentUpdate",value:function(e,t,n){return(0,c.default)(this.props,function(t,n){return t!==e[n]})}},{key:"componentWillUnmount",value:function(){clearTimeout(q),_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"getHasScrolledToLastMessage",value:function(){var e=this.chatMessagesRef,t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop;return this.props.isChatMessagesOrderReversed?r<30:r>n-t-30}},{key:"render",value:function(){var e=this,t=this.props,n=t.chatOwner,r=t.isChatOwner,a=t.messages,o=r?{id:"tip_content","data-modelname":n.username,"data-modelid":n.id}:{};return A.default.createElement(M.default,{containerRef:this.chatMessagesRefHandler,onNativeScroll:this.scrollListener,onScrollY:this.scrollListener,"data-component-name":"ModelChatMessages"},A.default.createElement("div",{className:"messages-wrapper"},A.default.createElement("div",y({className:"messages"},o),a.valueSeq().map(function(t){return e.renderMessage(t)}),this.renderIf(0===a.length,function(){return A.default.createElement("div",{className:"message empty"},e.t("empty"))}))))}}]),t}(I.default);X.propTypes={chatOwner:P.default.object.isRequired,isChatOwner:P.default.bool.isRequired,isChatMessagesOrderReversed:P.default.bool,messages:P.default.instanceOf(S.Iterable).isRequired,onUsernameClick:P.default.func,windowHeight:P.default.number,windowOrientation:P.default.string,windowWidth:P.default.number},t.default=X},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(107),l=r(s),u=n(35),c=r(u),d=n(11),f=r(d),p=n(6),m=r(p),g=n(47),h=r(g),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(1),b=r(y),_=n(0),S=r(_),O=n(2),P=n(4),T=n(9),A=n(3),C=r(A),I=n(17),w=r(I),N=n(8),R=r(N),M=n(638),L=r(M),k=n(39),D=r(k),U=n(639),j=r(U),F=n(5),B=n(357),H=n(66),V=n(45),G=n(163),x=n(120),W=r(x),Y=n(164),K=n(91),q=n(44),z=function(e){return{avatar:"",id:e,isGuest:!0,isGold:!1,isModel:!1,name:"Guest #"+String(e).substr(1),username:"Guest #"+String(e).substr(1)}},X=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.usernameClickHandler=function(){r.props.onUsernameClick(r.props.sender.username)},r.banClickHandler=function(){r.props.showModal(F.MODAL_TYPES.BAN_CONFIRMATION,{user:r.props.sender,modelId:r.props.chatOwner.id})},i=n,o(r,i)}return i(t,e),E(t,[{key:"shouldComponentUpdate",value:function(e,t,n){var r=this.props;return r.kingId!==e.kingId||r.isLoggedIn!==e.isLoggedIn||r.canBan!==e.canBan||r.isKnight!==e.isKnight||r.isSenderBanned!==e.isSenderBanned||r.isPopupEnabled!==e.isPopupEnabled}},{key:"renderBanButton",value:function(){var e=this.props,t=e.canBan,n=e.isKnight,r=e.isSenderBanned,a=e.message;e.sender;if(r)return S.default.createElement("div",{className:"label"},this.t("camChat.userWasBanned"));if(t){var o="ban_"+a.id,i=!F.BROWSER_CAPABILITIES.touch&&n;return S.default.createElement("div",{id:o,className:"btn-ban",onClick:this.banClickHandler},S.default.createElement(R.default,{img:"ban",size:14}),this.renderIf(i,S.default.createElement(D.default,{targetId:o,isMobileRelative:!1},this.t("camChat.banTooltip"))))}return null}},{key:"render",value:function(){var e=this,t=this.props,n=t.bannedUser,r=t.chatOwner,a=t.currentUser,o=t.isSenderCurrentModel,i=t.isSenderGoldUser,s=t.isSenderGuest,u=t.isPopupEnabled,c=t.kingId,d=t.knight,f=t.message,p=t.messageSender,g=t.sender,h=t.viewCamUrl,v=f.details,E=f.id,y=f.type;if(!g||!r)return null;switch(y){case H.MESSAGE_TYPES.NEW_KING:return S.default.createElement("div",{className:"message king","data-message-id":E,"data-component-name":"ModelChatMessage"},S.default.createElement("div",{className:"body"},S.default.createElement(w.default,{elements:{username:S.default.createElement(W.default,{isKing:!0,isIconVisible:!1,forceKnightIconDisplay:p.isKnight,modelId:r.id,onClick:this.usernameClickHandler,size:14,user:p})},messageId:"camChat.newKing"})));case H.MESSAGE_TYPES.KNIGHT_ADDED:return d?S.default.createElement("div",{className:"message knight","data-message-id":E,"data-component-name":"ModelChatMessage"},S.default.createElement("div",{className:"body"},S.default.createElement(w.default,{elements:{model:S.default.createElement(W.default,{isIconVisible:!1,modelId:r.id,size:14,user:r}),knight:S.default.createElement(W.default,{forceKnightIconDisplay:!0,isIconVisible:!1,isAdditionIconVisible:!0,isKing:c===d.id,isKingStateFrozen:!0,isKnightIconVisible:!0,modelId:r.id,size:14,user:d})},messageId:"camChat.modelAddedUserToKnights"}))):null;case H.MESSAGE_TYPES.GOAL_UPDATED:return v.body||v.goal?S.default.createElement("div",{className:"message goal","data-message-id":E,"data-component-name":"ModelChatMessage"},S.default.createElement("div",{className:"body"},this.renderIf(v.body,function(){return S.default.createElement("span",null,(0,l.default)(e.t("topic"))+": ",S.default.createElement("strong",null,e.bodyText))}),this.renderIf(v.body&&v.goal,function(){return S.default.createElement("span",null," - ")}),this.renderIf(v.goal,function(){return S.default.createElement("span",null,S.default.createElement("strong",null,(0,l.default)(e.t("goal"))+" @ "," ",v.goal))}))):null;case H.MESSAGE_TYPES.PRIVATE_TIP:case H.MESSAGE_TYPES.TIP:var b=(0,m.default)(a,"id"),_=v.amount,O=S.default.createElement(w.default,{choiceParameter:"tokens",elements:{username:S.default.createElement(W.default,{isIconVisible:!1,isKing:p.isKing,forceKnightIconDisplay:p.isKnight,modelId:r.id,onClick:this.usernameClickHandler,size:14,user:p}),strong:S.default.createElement("strong",null)},messageId:"camChat.userHasTippedModel",parameters:{username:p.username,tokens:_}}),P=_>=500&&b===r.id?S.default.createElement(j.default,{type:"round",shareLinkUrl:""+F.BASE_URL_ROOT+h,shareText:"I've just been tipped "+_+" tokens on @Stripchat! Thanks "+p.username+"! #stripchat #stripmenow #striptokens"}):null;return S.default.createElement("div",{className:this.c("message tip tip_item",{"twitter-button-visible":P}),"data-message-id":E,"data-username":p.username,"data-amount":_,"data-publictip":y===H.MESSAGE_TYPES.TIP,"data-inroom":!0,"data-lv-tag":f.isNew?"0":"1","data-component-name":"ModelChatMessage"},S.default.createElement("div",{className:"body"},O,P,this.renderIf(y!==H.MESSAGE_TYPES.PRIVATE_TIP||b===g.id||b===r.id,function(){return S.default.createElement("div",{className:"tip-comment"},e.bodyText)})));case H.MESSAGE_TYPES.USER_UNBANNED:return null;case H.MESSAGE_TYPES.USER_BANNED:var T=y===H.MESSAGE_TYPES.USER_BANNED?"camChat.userIsBannedMessage":"camChat.userIsUnbannedMessage",A=S.default.createElement(W.default,{isIconVisible:!1,isKnightIconVisible:!0,isKing:p.isKing,modelId:r.id,size:14,user:p}),C=S.default.createElement(W.default,{isIconVisible:!1,isColored:!n.isModel,modelId:r.id,size:14,user:n});return S.default.createElement("div",{className:"message banned","data-message-id":E,"data-component-name":"ModelChatMessage"},S.default.createElement("div",{className:"body"},S.default.createElement(R.default,{img:"ban",size:18}),S.default.createElement(w.default,{elements:{moderator:A,user:C},messageId:T})));default:var I=this.bodyText,N=o||!p.isModel;return I.length?S.default.createElement("div",{className:this.c("message",y,{"model-message":o,"gold-message":i,"guest-message":s}),"data-message-id":E,"data-component-name":"ModelChatMessage"},S.default.createElement("div",{className:"body"},S.default.createElement("div",{className:"username-wrapper"},S.default.createElement(W.default,{isAdminIconVisible:!0,isKing:p.isKing,actualUserIsKing:c===g.id,forceKnightIconDisplay:p.isKnight,isGenderIconHidden:!0,isPopupEnabled:u,isColored:N,modelId:r.id,onClick:this.usernameClickHandler,popupControls:["profile","sendMessage","addToKnight"],size:14,user:p,actualUser:g}),this.renderBanButton()),I)):null}}},{key:"bodyText",get:function(){var e=this.props.message.details,t=(0,f.default)(e.body.split(B.smilesRegexp),function(e,t){var n=(0,B.getSmileIndex)(e);return n>-1?S.default.createElement(L.default,{key:t,code:B.smiles[n]}):e});return(0,h.default)(t)}}]),t}(C.default);X.propTypes={chatOwner:b.default.object,isKnight:b.default.bool,knight:b.default.object,message:b.default.shape({id:b.default.number,details:b.default.shape({body:b.default.string}),type:b.default.string}).isRequired,onUsernameClick:b.default.func,showModal:b.default.func.isRequired},X.defaultProps={onUsernameClick:c.default};var Z=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.viewCam,s=t.chatOwner,l=t.message,u=l.modelId,c=l.type,d=i.kingId,f=c===H.MESSAGE_TYPES.NEW_KING?d:l.senderId,p=(0,K.getCanBan)(e,u,f),g=(0,Y.getHasBanned)(e,u,f),h=a&&u===r.id,E=f<0||!f,y=f===u,b=E?z(f):(0,q.getUserById)(e,f),_=(0,V.getViewCamUrl)(e,s.username),S=l.details,O=l.userData,P=void 0===O?{}:O,T=l.additionalData,A=void 0===T?{}:T,C=v({},b,P),I=(0,m.default)(C,"isGold");return{bannedUser:v({},S.bannedId?(0,q.getUserById)(e,S.bannedId):{},(0,m.default)(A,"banned",{})),canBan:p,currentUser:r,isLoggedIn:a&&!o,isSenderBanned:g,isSenderCurrentModel:y,isSenderGoldUser:I,isSenderGuest:E,isPopupEnabled:h,kingId:d,knight:c===H.MESSAGE_TYPES.KNIGHT_ADDED&&S.knightId?(0,q.getUserById)(e,S.knightId):null,isKnight:a&&(0,G.getIsKnightOfModel)(e,s.id,r.id),messageSender:C,sender:b,viewCamUrl:_}},Q=function(e){return(0,P.bindActionCreators)({showModal:T.showModal},e)};t.default=(0,O.connect)(Z,Q)(X)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectTwitterJs=void 0;var r=n(20),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=!1;t.injectTwitterJs=function(){return new a.default(function(e,t){if(o||"undefined"==typeof window)return void e();window.twttr=function(e,n,r){var a=void 0,o=e.getElementsByTagName(n)[0],i=window.twttr||{};return e.getElementById(r)?i:(a=e.createElement(n),a.id=r,a.src="https://platform.twitter.com/widgets.js",o.parentNode.insertBefore(a,o),i._e=[],i.ready=function(e){i._e.push(e)},a.onerror=t,i)}(document,"script","twitter-wjs"),window.twttr.ready(function(t){o=!0,e()})})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(1329),u=n(66),c=function(e){var t=e.message,n=e.model,r=t.details,a=r.lovenseDetails,o=a.type,i=a.status,c=u.LOVENSE_MESSAGE_SUBTYPES.TOY,d=u.LOVENSE_MESSAGE_SUBTYPES.TIP;switch(o){case c:return s.default.createElement(l.LovenseToyMessage,{status:i,model:n,"data-component-name":"ModelChatAppMessage"});case d:return s.default.createElement(l.LovenseTipMessage,{message:t,model:n,"data-component-name":"ModelChatAppMessage"});default:return null}};c.propTypes={message:o.default.object.isRequired,model:o.default.object.isRequired},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1330);Object.defineProperty(t,"LovenseToyMessage",{enumerable:!0,get:function(){return r(a).default}});var o=n(1331);Object.defineProperty(t,"LovenseTipMessage",{enumerable:!0,get:function(){return r(o).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=r(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),l=r(s),u=n(0),c=r(u),d=n(2),f=n(4),p=n(17),m=r(p),g=n(7),h=n(99),v=n(66),E=function(e){var t=e.model,n=e.status,r=e.sendConsoleMessage,a="/"+(0,o.default)(v.CONSOLE_MESSAGE_SUBTYPES.LOVENSE),i=function(){r(t.id,a)};return n===v.LOVENSE_TOY_STATUS.ON?c.default.createElement(m.default,{messageId:"camChat.lovense.connected",elements:{lovense:c.default.createElement("a",{className:"console-link",onClick:i},a)},"data-component-name":"LovenseToyMessage"}):c.default.createElement(m.default,{messageId:"camChat.lovense.disconnected",elements:{lovense:c.default.createElement("a",{className:"console-link",onClick:i},a)},"data-component-name":"LovenseToyMessage"})},y={sendConsoleMessage:h.sendConsoleMessage};E.propTypes=i({status:l.default.string.isRequired,model:l.default.shape({id:l.default.number}).isRequired},(0,g.getActionPropTypes)(y));var b=function(e){return(0,f.bindActionCreators)(y,e)};t.default=(0,d.connect)(null,b)(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(86),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(3),E=r(v),y=n(17),b=r(y),_=n(7),S=n(99),O=n(66),P=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.clickConsoleCommandHandler=function(){var e=r.props,t=e.sendConsoleMessage,n=e.model,a="/"+(0,l.default)(O.CONSOLE_MESSAGE_SUBTYPES.LOVENSE);t(n.id,a)},i=n,o(r,i)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props.message,t=e.details,n=t.lovenseDetails.detail,r=n.name,a=n.time,o="/"+(0,l.default)(O.CONSOLE_MESSAGE_SUBTYPES.LOVENSE);return m.default.createElement("div",{"data-component-name":"LovenseTipMessage"},m.default.createElement(b.default,{messageId:"camChat.lovense.tip",elements:{lovense:m.default.createElement("a",{className:"console-link",onClick:this.clickConsoleCommandHandler},o)},parameters:{name:r,time:a}}))}}]),t}(E.default),T={sendConsoleMessage:S.sendConsoleMessage};P.propTypes=u({message:f.default.shape({details:f.default.object}).isRequired,model:f.default.shape({id:f.default.number}).isRequired},(0,_.getActionPropTypes)(T));var A=function(e){return(0,h.bindActionCreators)(T,e)};t.default=(0,g.connect)(null,A)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(0),l=r(s),u=n(1333),c=n(66),d=function(e){var t=e.message,n=e.model,r=t.details,o=r.subtype,i=r.messageText,s=c.CONSOLE_MESSAGE_SUBTYPES.COMMAND,d=c.CONSOLE_MESSAGE_SUBTYPES.HELP,f=c.CONSOLE_MESSAGE_SUBTYPES.INFO,p=c.CONSOLE_MESSAGE_SUBTYPES.KING,m=c.CONSOLE_MESSAGE_SUBTYPES.LOVENSE,g=c.CONSOLE_MESSAGE_SUBTYPES.USERS;if(r.error)return l.default.createElement(u.ErrorChatMessage,{message:t,"data-component-name":"ModelChatConsoleMessage"});switch(o){case s:return l.default.createElement("div",{"data-component-name":"ModelChatConsoleMessage"},i);case d:return l.default.createElement(u.HelpMessage,{model:n,"data-component-name":"ModelChatConsoleMessage"});case f:return l.default.createElement(u.InfoMessage,{model:n,"data-component-name":"ModelChatConsoleMessage"});case p:return l.default.createElement(u.KingMessage,a({message:t,model:n},{"data-component-name":"ModelChatConsoleMessage"}));case m:return l.default.createElement(u.LovenseMessage,a({message:t,model:n},{"data-component-name":"ModelChatConsoleMessage"}));case g:return l.default.createElement(u.UsersMessage,{message:t,"data-component-name":"ModelChatConsoleMessage"});default:return null}};d.propTypes={message:i.default.object.isRequired,model:i.default.object.isRequired},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1334);Object.defineProperty(t,"ErrorChatMessage",{enumerable:!0,get:function(){return r(a).default}});var o=n(1335);Object.defineProperty(t,"HelpMessage",{enumerable:!0,get:function(){return r(o).default}});var i=n(1336);Object.defineProperty(t,"InfoMessage",{enumerable:!0,get:function(){return r(i).default}});var s=n(1337);Object.defineProperty(t,"KingMessage",{enumerable:!0,get:function(){return r(s).default}});var l=n(1338);Object.defineProperty(t,"LovenseMessage",{enumerable:!0,get:function(){return r(l).default}});var u=n(1341);Object.defineProperty(t,"UsersMessage",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(0),l=r(s),u=n(17),c=r(u),d=function(e){var t=e.message.details.error,n=t.key,r=t.elementFlags,o=t.params,i=r.strong,s=r.nowrap,u=a({},i?{strong:l.default.createElement("strong",null)}:null,s?{nowrap:l.default.createElement("span",{className:"no-wrap"})}:null);return l.default.createElement("div",{"data-component-name":"ErrorChatMessage"},l.default.createElement(c.default,{messageId:n,elements:a({},u),parameters:a({},o)}))};d.propTypes={message:i.default.shape({details:i.default.object}).isRequired},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=r(a),i=n(352),s=r(i),l=n(30),u=r(l),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(17),E=r(v),y=n(7),b=n(99),_=n(66),S=_.CONSOLE_MESSAGE_SUBTYPES.INFO,O=_.CONSOLE_MESSAGE_SUBTYPES.KING,P=_.CONSOLE_MESSAGE_SUBTYPES.TIP,T=_.CONSOLE_MESSAGE_SUBTYPES.USERS,A="/"+(0,o.default)(S),C="/"+(0,o.default)(O),I="/"+(0,o.default)(P),w="/"+(0,o.default)(T),N=function(e,t){var n=e.model,r=e.sendConsoleMessage,a=e.setInputText,o=e.setInputFocus,i=t.i18n.trans,l=function(e){if((0,s.default)(e,I))return a(I+" "),void o();r(n.id,e)};return m.default.createElement("div",{"data-component-name":"HelpMessage"},m.default.createElement("div",{className:"console-header"},i("camChat.console.help.title")),m.default.createElement("span",{className:"console-body"},m.default.createElement("span",{className:"console-label"},m.default.createElement("a",{className:"console-link",onClick:(0,u.default)(l,A)},A)," -"),m.default.createElement("span",{className:"console-details"},i("camChat.console.help.info"))),m.default.createElement("span",{className:"console-body"},m.default.createElement("span",{className:"console-label"},m.default.createElement("a",{className:"console-link",onClick:(0,u.default)(l,C)},C)," -"),m.default.createElement("span",{className:"console-details"},i("camChat.console.help.king"))),m.default.createElement("span",{className:"console-body"},m.default.createElement("span",{className:"console-label"},m.default.createElement("a",{className:"console-link",onClick:(0,u.default)(l,I)},I)," x [-private] [comment] -"),m.default.createElement("span",{className:"console-details"},i("camChat.console.help.tip")),m.default.createElement("span",{className:"console-examples"},m.default.createElement("div",{className:"examples-header"},i("examples"),":"),m.default.createElement("div",null,m.default.createElement(E.default,{messageId:"camChat.console.help.tipExamples.tip20",elements:{command:m.default.createElement("span",{className:"command"})},parameters:{tip:I}})),m.default.createElement("div",null,m.default.createElement(E.default,{messageId:"camChat.console.help.tipExamples.tip30iLoveYou",elements:{command:m.default.createElement("span",{className:"command"})},parameters:{tip:I}})),m.default.createElement("div",null,m.default.createElement(E.default,{messageId:"camChat.console.help.tipExamples.private",elements:{command:m.default.createElement("span",{className:"command"})},parameters:{private:"-private"}})))),m.default.createElement("span",{className:"console-body"},m.default.createElement("span",{className:"console-label"},m.default.createElement("a",{className:"console-link",onClick:(0,u.default)(l,w)},w)," -"),m.default.createElement("span",{className:"console-details"},i("camChat.console.help.users"))),m.default.createElement("span",{className:"console-body"},m.default.createElement("span",{className:"console-label"},"↑ - "),m.default.createElement("span",{className:"console-details"},i("camChat.console.help.keyup"))))},R={sendConsoleMessage:b.sendConsoleMessage,setInputText:b.setInputText,setInputFocus:b.setInputFocus};N.propTypes=c({model:f.default.object.isRequired},(0,y.getActionPropTypes)(R)),N.contextTypes={i18n:f.default.object};var M=function(e){return(0,h.bindActionCreators)(R,e)};t.default=(0,g.connect)(null,M)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=r(a),i=n(80),s=r(i),l=n(15),u=r(l),c=n(1),d=r(c),f=n(0),p=r(f),m=function(e,t){var n=e.model,r=t.i18n.trans,a=(0,o.default)(n.publicActivities,function(e){return r("tags."+e)}).join(", "),i=(0,o.default)(n.privateActivities,function(e){return r("tags."+e)}).join(", "),l=(0,u.default)(new Date).diff(n.birthDate,"years"),c=n.country?r("country."+n.country):"",d=n.name,f=(0,o.default)(n.languages,function(e){return r("language."+e)}).join(", "),m=n.favoritedCount,g=(0,s.default)([d?{key:"name",value:d}:null,l?{key:"age",value:l}:null,c?{key:"country",value:c}:null,f.length?{key:"languages",value:f}:null,a.length?{key:"inPublic",value:a}:null,i.length?{key:"inPrivate",value:i}:null,{key:"favoritedCount",value:m}]);return g.length?p.default.createElement("div",{"data-component-name":"InfoMessage"},p.default.createElement("div",{className:"console-body"},g.map(function(e){var t=e.key,n=e.value;return p.default.createElement("div",{className:"field-wrapper",key:t},p.default.createElement("div",{className:"field-label"},r("camChat.console.info."+t)),p.default.createElement("div",null,n))}))):null};m.propTypes={model:d.default.object.isRequired},m.contextTypes={i18n:d.default.object},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=n(2),u=n(120),c=r(u),d=n(44),f=function(e,t){var n=e.currentUser,r=e.isLoggedIn,a=e.message,o=e.model,i=e.king,l=t.i18n.trans;if(!i)return null;var u=s.default.createElement(c.default,{isIconVisible:!1,modelId:o.id,isKing:!0,isKnightIconVisible:!0,size:14,user:i}),d=a.details,f=!r||r&&!n.isModel&&!n.isStudio&&i.id!==n.id,p=d.kingAmount,m=d.selfAmount;return s.default.createElement("div",{"data-component-name":"KingMessage"},s.default.createElement("div",{className:"field-wrapper"},s.default.createElement("div",{className:"field-label"},l("camChat.console.king.king")),s.default.createElement("div",null,u)),s.default.createElement("div",{className:"field-wrapper"},s.default.createElement("div",{className:"field-label"},l("camChat.console.king.tippedLabel")),s.default.createElement("div",null,l("camChat.console.king.tippedValue",{kingAmount:p}))),f?s.default.createElement("div",{className:"field-wrapper"},s.default.createElement("div",{className:"field-label"},l("camChat.console.king.youTippedLabel")),s.default.createElement("div",null,l("camChat.console.king.youTippedValue",{selfAmount:m}))):null)};f.propTypes={currentUser:o.default.object,isLoggedIn:o.default.bool,king:o.default.object,message:o.default.object.isRequired,model:o.default.object.isRequired},f.contextTypes={i18n:o.default.object};var p=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=t.message.details.kingId;return{currentUser:r,isLoggedIn:a&&!o,king:(0,d.getUserById)(e,i)}};t.default=(0,l.connect)(p)(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1339),o=r(a),i=n(13),s=r(i),l=n(11),u=r(l),c=n(6),d=r(c),f=n(1),p=r(f),m=n(0),g=r(m),h={0:"off",1:"low",2:"medium",3:"high",4:"ultraHigh"},v=function(e,t,n){return g.default.createElement("div",{className:"level-row",key:t},g.default.createElement("div",{className:"level-item"},n("camChat.console.lovense.level",{level:t+1})),g.default.createElement("div",{className:"level-item"},e.min+" ~ "+e.max),g.default.createElement("div",{className:"level-item"},e.time),g.default.createElement("div",{className:"level-item"},n("camChat.console.lovense.power."+h[e.vLevel])))},E=function(e,t){var n=e.message.details,r=t.i18n.trans,a=(0,o.default)((0,d.default)(n,"lovense.settings.levels"));return(0,s.default)(a)?g.default.createElement("div",{className:"console-body","data-component-name":"LovenseMessage"},r("camChat.console.lovense.notAvailable")):g.default.createElement("div",{className:"console-body","data-component-name":"LovenseMessage"},r("camChat.console.lovense.title"),g.default.createElement("hr",{className:"level-delimiter"}),g.default.createElement("div",{className:"levels"},g.default.createElement("div",{className:"level-row level-header"},g.default.createElement("div",{className:"level-item"}),g.default.createElement("div",{className:"level-item"},r("camChat.console.lovense.headers.tip")),g.default.createElement("div",{className:"level-item"},r("camChat.console.lovense.headers.time")),g.default.createElement("div",{className:"level-item"},r("camChat.console.lovense.headers.power"))),(0,u.default)(a,function(e,t){return v(e,t,r)})))};E.propTypes={message:p.default.shape({details:p.default.object}).isRequired},E.contextTypes={i18n:p.default.object},t.default=E},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(0),s=r(i),l=function(e,t){var n=e.message.details,r=t.i18n.trans,a=n.golds,o=void 0===a?0:a,i=n.greens,l=void 0===i?0:i,u=n.guests,c=void 0===u?0:u,d=n.regulars,f=void 0===d?0:d,p=n.total,m=void 0===p?0:p;return s.default.createElement("div",{"data-component-name":"UsersMessage"},s.default.createElement("div",{className:"console-body"},s.default.createElement("div",{className:"username-wrapper"},s.default.createElement("div",{className:"field-label"},r("camChat.console.users.golds")),s.default.createElement("div",{className:"colored gold username"},o)),s.default.createElement("div",{className:"username-wrapper"},s.default.createElement("div",{className:"field-label"},r("camChat.console.users.greens")),s.default.createElement("div",{className:"colored green username"},l)),s.default.createElement("div",{className:"username-wrapper"},s.default.createElement("div",{className:"field-label"},r("camChat.console.users.regulars")),s.default.createElement("div",{className:"colored regular username"},f)),s.default.createElement("div",{className:"username-wrapper"},s.default.createElement("div",{className:"field-label"},r("camChat.console.users.guests")),s.default.createElement("div",{className:"colored guest username"},c)),s.default.createElement("div",{className:"username-wrapper"},s.default.createElement("div",{className:"field-label"},s.default.createElement("strong",null,r("camChat.console.users.total"))),s.default.createElement("div",null,m))))};l.propTypes={message:o.default.shape({details:o.default.object}).isRequired},l.contextTypes={i18n:o.default.object},t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=r(o),s=n(1),l=r(s),u=n(2),c=n(4),d=n(9),f=n(5),p=n(10),m=r(p),g=n(17),h=r(g),v=n(8),E=r(v),y=n(7),b=n(21),_=function(e,t){var n=e.emitButtonEvent,r=e.isLayoutUpToS,a=t.i18n.trans,o=function(){n(f.APP_BUTTONS.GIVEAWAY_SYSTEM_MESSAGE_REGISTER)};return i.default.createElement("div",{className:"tokens-giveaway-signup-message-wrapper","data-component-name":"ModelChatTokensGiveawayMessage"},i.default.createElement("div",null,i.default.createElement(E.default,{img:"playing-dices",size:18})),i.default.createElement("div",null,i.default.createElement(h.default,{elements:{strong:i.default.createElement("strong",null)},messageId:"camChat.tokensGiveaway.doYouWantFreeTokens"}),i.default.createElement(m.default,{style:"signup",size:r?"small":"default",onClick:o},a("camChat.tokensGiveaway.createFreeAccount")),i.default.createElement("span",{className:"tokens-giveaway-signup-message-help-text"},a("camChat.tokensGiveaway.participateInOurTokenGiveaway"))))},S={emitButtonEvent:d.emitButtonEvent};_.propTypes=a({},(0,y.getActionPropTypes)(S));var O=function(e){return{isLayoutUpToS:(0,b.getIsLayoutUpToS)(e)}};_.contextTypes={i18n:l.default.object};var P=function(e){return(0,c.bindActionCreators)(S,e)};t.default=(0,u.connect)(O,P)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(33),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(3),y=r(E),b=n(7),_=n(369),S=n(66),O=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.onAddLovenseMessage=function(e){var t=e.data;if(t.from===S.MESSAGE_TYPES.APP){var n=S.LOVENSE_MESSAGE_SUBTYPES.SETTINGS,a=S.LOVENSE_MESSAGE_SUBTYPES.TOY,o=S.LOVENSE_MESSAGE_SUBTYPES.TIP,i=t.type,s=t.status,u=t.detail;switch(i){case n:var c=u.levels;r.props.updateLovenseSettings(c);break;case a:r.props.updateLovenseToyStatus(s);break;case o:r.props.sendLovenseMessage({type:i,detail:(0,l.default)(u,["amount","name","time"])});break;default:return null}}return null},i=n,o(r,i)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.registerEventListener(window,"message",this.onAddLovenseMessage)}},{key:"render",value:function(){var e=this.props.isLovenseMessages;return g.default.createElement("div",{className:"lv-message-content",id:"lv_message_content","data-status":e?"enable":"","data-component-name":"LovenseMessageHandler"})}}]),t}(y.default),P={sendLovenseMessage:_.sendLovenseMessage,updateLovenseSettings:_.updateLovenseSettings,updateLovenseToyStatus:_.updateLovenseToyStatus,removeLovenseSettings:_.removeLovenseSettings};O.propTypes=u({isLovenseMessages:p.default.bool},(0,b.getActionPropTypes)(P));var T=function(e){return(0,v.bindActionCreators)(P,e)};t.default=(0,h.connect)(null,T)(O)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isPrivateModeOrCamAvailabilityChanged=void 0;var s=n(283),l=r(s),u=n(14),c=r(u),d=n(6),f=r(d),p=n(36),m=r(p),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},E=n(15),y=r(E),b=n(1),_=r(b),S=n(0),O=r(S),P=n(2),T=n(4),A=n(170),C=n(9),I=n(3),w=r(I),N=n(10),R=r(N),M=n(8),L=r(M),k=n(22),D=r(k),U=n(51),j=n(5),F=n(7),B=n(21),H=n(71),V=n(72),G=n(42),x=n(1345),W=r(x),Y=n(1352),K=r(Y),q=n(1353),z=r(q),X=n(642),Z=r(X),Q=n(1354),J=r(Q),$=n(12),ee=n(45),te=n(98),ne=n(38),re=n(60),ae=t.isPrivateModeOrCamAvailabilityChanged=function(e,t){return(0,f.default)(e,"privateMode")!==(0,f.default)(t,"privateMode")||(0,f.default)(e,"isCamAvailable")!==(0,f.default)(t,"isCamAvailable")||(0,f.default)(e,"isSocketReady")!==(0,f.default)(t,"isSocketReady")},oe=function(e,t){return(0,f.default)(e,"model.id")!==(0,f.default)(t,"model.id")||(0,f.default)(e,"playerType")!==(0,f.default)(t,"playerType")||(0,f.default)(e,"broadcastType")!==(0,f.default)(t,"broadcastType")},ie=function(e){var t=e.isCamActive,n=e.isCamAvailable,r=e.model,a=$.MODEL_STATUSES.STATUS_P2P,o=$.MODEL_STATUSES.STATUS_PUBLIC,i=$.MODEL_STATUSES.STATUS_PRIVATE,s=$.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE;return(t||j.BROWSER_CAPABILITIES.isTablet)&&n&&(0,c.default)([a,o,i,s],r.status)},se=12e4,le=function(e){var t=e.aspectRatio;return{hd:(0,l.default)(t,.55,.57)}},ue=function(e){var t=e.isOwnShow,n=e.model,r=n.status;return r===$.PRIVATE_MODES.MODE_PRIVATE?t?n.privateRate:n.spyRate:r===$.PRIVATE_MODES.MODE_P2P||r===$.PRIVATE_MODES.MODE_P2P_AUDIO?n.p2pRate:0},ce=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.isWatchingSuspended=!1,r.propsUpdateToActionsMap=[{update:["timeDelta","isSocketReady"],action:function(e){var t=e.cancelProposal,n=e.isCamAvailable,r=e.isOwnShow,a=e.isSocketReady,o=e.privateMode,i=e.proposeMode,s=e.shadeLayout,l=e.stopPrivate,u=(o||i)&&(r||n);!a&&u&&(o?l():t(),s(!1))}},{update:["model.id"],action:function(e){var t=e.model;(0,e.toggleSettings)(!1),r.showModalDebounced(),r.preloadAndSetNextSnapshot(t),r.setState({isRatePrivateOpen:!1})}},{update:oe,action:function(e){var t=e.beginModelWatching,n=e.isDocumentVisible,a=e.model;r.isWatchingSuspended=!n,r.isWatchingSuspended||t(a.id)}},{update:B.hasDocumentBecomeVisible,action:function(e){var t=e.beginModelWatching,n=e.model;r.isWatchingSuspended&&(t(n.id),r.isWatchingSuspended=!1)}},{update:ae,action:function(e){var t=e.isCamAvailable,n=e.isOwnShow,r=e.isSocketReady,a=e.model,o=e.privateMode,i=e.proposeMode,s=e.shadeLayout,l=(o||i)&&(n||t);if(r){var u=$.MODEL_STATUSES.STATUS_P2P,c=$.MODEL_STATUSES.STATUS_PRIVATE,d=$.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE;s((a.status===u||a.status===c||a.status===d)&&l)}}}],r.preloadAndSetNextSnapshot=function(e){r.setState({lastSnapshotUrl:""},function(){var t=r.getLastSnapshotUrl(e),n=new Image;n.src=t,n.addEventListener("load",function(){r.setState({lastSnapshotUrl:t})})})},r.getLastSnapshotUrl=function(e){return e&&e.snapshotServer?"https://c-"+e.snapshotServer+"."+j.BASE_DOMAIN_CDN+"/previews/"+e.id+"?"+Date.now():""},r.showModalDebounced=(0,m.default)(function(){if(r._isMounted){var e=r.props,t=e.hasModal;e.isLoggedIn||t||r.props.createFreeAccountModal({triggerSource:U.AUTH_TRIGGER_SOURCES.VIEW_CAM_WATCH_MODEL})}},se),r.onBeforeUnloadEventHandler=function(){r.props.cancelOnlineStatus()},r.viewCamBlockKeyDownHandler=function(e){var t=e.ctrlKey,n=e.keyCode,a=r.props,o=a.isCurrentUserModelOrStudio,i=a.isCamAvailable,s=a.isOwnShow,l=a.model,u=a.isNextModelAvailable,c=a.isPrevModelAvailable,d=l.status===$.MODEL_STATUSES.STATUS_PRIVATE||l.status===$.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE,f=i&&d,p=!s&&!f,m=!s&&!d,g=n===j.KEY_CODES.sChar,h=n===j.KEY_CODES.comma,v=n===j.KEY_CODES.period;t&&((g||h||v)&&(e.preventDefault(),e.stopPropagation()),m&&g&&!o&&r.startPurchaseTokensModalWizard(),h&&p&&c&&r.props.goToModel("prev"),v&&p&&u&&r.props.goToModel("next"))},r.authClickHandler=function(){var e=r.props,t=e.model;(0,e.startWizardWithActionOnEnter)(j.MODAL_TYPES.AUTH,{component:"SignUp",action:{backgroundImage:t.avatarUrl,shouldBypassActionPrefix:!0,type:"continueWatching",user:t},user:t,triggerSource:U.AUTH_TRIGGER_SOURCES.MULTICAMS_LIMITATION})},r.startPurchaseTokensModalWizard=function(){var e=r.props,t=e.model;(0,e.startWizardWithActionOnEnter)(j.MODAL_TYPES.SEND_TIP,{component:"SignUp",action:{backgroundImage:t.avatarUrl,type:"buyTokens",user:t},user:t})},r.ratePrivateEventHandler=function(e){var t=e.model,n=e.show,a=r.props.model.id;t.id===a&&r.setState({isRatePrivateOpen:!0,showId:n.id}),r.props.processSocketEvent("ratePrivate:"+a,e)},r.ratePrivateHandler=function(e,t){(0,r.props.ratePrivate)(r.state.showId,e,t)},r.closeRatePrivate=function(){r.setState({isRatePrivateOpen:!1,showId:null})},r.startPrivateClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(j.APP_BUTTONS.VIEWCAM_START_PRIVATE,{modelId:e.id})},r.stopPrivateClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(j.APP_BUTTONS.VIEWCAM_STOP_PRIVATE,{modelId:e.id})},r.stopCam2CamClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(j.APP_BUTTONS.VIEWCAM_STOP_P2P,{modelId:e.id})},r.startSpyClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(j.APP_BUTTONS.VIEWCAM_START_SPY,{modelId:e.id})},r.stopSpyClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(j.APP_BUTTONS.VIEWCAM_STOP_SPY,{modelId:e.id})},r.cancelProposalClickHandler=function(){(0,r.props.cancelProposal)()},r.sendTipClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(j.APP_BUTTONS.VIEWCAM_SEND_ONLINE_TIP,{modelId:e.id})},r.sendOfflineTipClickHandler=function(){var e=r.props.model;r.props.emitButtonEvent(j.APP_BUTTONS.VIEWCAM_SEND_OFFLINE_TIP,{modelId:e.id})},r.buyTokensClickHandler=function(){r.props.emitButtonEvent(j.APP_BUTTONS.VIEWCAM_TOKENS_LEFT_MESSAGE)},r.renderPrivateModeText=function(e){return O.default.createElement("div",{className:"private-mode-text"},r.t("viewCam.privateModeText."+e))},r.renderTokensLeft=function(){var e=r.props,t=e.currentUser,n=e.currentUserTokens,a=e.isLoggedIn,o=ue(r.props),i=n>5*o,s=a&&!t.isStudio&&!t.isModel&&!t.isAdmin&&!t.isSupport;return i||!s?null:O.default.createElement("div",null,O.default.createElement("span",null,r.t("viewCam.tokensLeft"),":",O.default.createElement("span",{className:"tokens-left-amount"},n)),O.default.createElement(R.default,{style:"apply-alter",onClick:r.buyTokensClickHandler},r.t("buyTokens.buyTokens")))},r.renderViewBlocked=function(){return O.default.createElement("div",{className:"view-blocked-wrapper"},O.default.createElement(L.default,{img:"blocked",size:80}),O.default.createElement("div",{className:"view-blocked-container"},O.default.createElement("div",{className:"view-blocked-limit-title"},r.t("viewCam.limit.title")),O.default.createElement("div",{className:"view-blocked-limit-description"},r.t("viewCam.limit.description"))),O.default.createElement(R.default,{style:"auth-banner",size:"medium",onClick:r.authClickHandler},r.t("viewCam.limit.button")))},r.renderStatus=function(){var e=r.props,t=e.model,n=e.timeDelta,a=r.t("viewCam.poster."+t.status,{username:t.username}),o=(0,y.default)(t.statusChangedAt),i=(0,y.default)().add(n,"milliseconds"),s=r.t("viewCam.wasOnline",{lastTimeLabel:o.from(i)}),l=t.previewUrl?{backgroundImage:"url("+t.previewUrl+")"}:null;return O.default.createElement("div",{className:"poster"},O.default.createElement("div",{className:"backdrop",style:l}),r.renderIf(t.status===$.MODEL_STATUSES.STATUS_IDLE,O.default.createElement("div",{className:"clock-wrapper"},O.default.createElement(L.default,{img:"clock"}))),O.default.createElement("div",{className:r.c("status-container","status-container-"+t.status)},r.renderIf(t.status&&t.status!==$.MODEL_STATUSES.STATUS_PUBLIC,function(){return O.default.createElement("div",{className:"status"},a,r.renderIf(t.status===$.MODEL_STATUSES.STATUS_OFF,O.default.createElement("div",{className:"offline-status-time"},s)))}),r.renderIf(!t.status,O.default.createElement(D.default,{isCentered:!0})),O.default.createElement(z.default,{model:t,timeDelta:n}),r.renderIf(t.status===$.MODEL_STATUSES.STATUS_OFF,O.default.createElement(Z.default,{user:t,style:"apply",buttonLocation:"viewcamButton"}))))},r.renderPoster=function(){var e=r.props,t=e.model,n=e.isCamActive,a=r.state.lastSnapshotUrl,o=a||t.previewUrl,i=n?t.previewUrl:o,s=i?{backgroundImage:"url("+i+")"}:null;return O.default.createElement("div",{className:"poster"},O.default.createElement("div",{className:"backdrop",style:s}),r.renderIf(n||j.BROWSER_CAPABILITIES.isTablet,r.renderStatus,r.renderViewBlocked))},i=n,o(r,i)}return i(t,e),h(t,[{key:"getDefaultState",value:function(){return{isRatePrivateOpen:!1,showId:null,lastSnapshotUrl:this.getLastSnapshotUrl(this.props.model)}}},{key:"shouldSocketResubscribe",value:function(e,t){return e.model.id!==this.props.model.id||(0,f.default)(this.props.currentUser,"id")!==(0,f.default)(e.currentUser,"id")}},{key:"getSocketEventBindings",value:function(e,t){var n=e.model.id,r=e.isLoggedIn,a=e.currentUser,o=r?[{subscriptionKey:"userBroadcastServerChanged:"+a.id},{subscriptionKey:"canBanChanged:"+n}]:[];return[{subscriptionKey:"userBanned:"+n},{subscriptionKey:"userUnbanned:"+n},{subscriptionKey:"goalChanged:"+n},{subscriptionKey:"knightAdded:"+n},{subscriptionKey:"knightDeleted:"+n},{subscriptionKey:"broadcastSettingsChanged:"+n},{subscriptionKey:"userBroadcastServerChanged:"+n},{subscriptionKey:"privateStarted:"+n},{subscriptionKey:"spyStopped:"+n},{subscriptionKey:"userUpdated:"+n},{subscriptionKey:"ratePrivate:"+n,callback:this.ratePrivateEventHandler}].concat(o)}},{key:"componentDidMount",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.registerEventListener(window,"beforeunload",this.onBeforeUnloadEventHandler),this.registerEventListener(document,"keydown",this.viewCamBlockKeyDownHandler)}},{key:"componentWillUnmount",value:function(){this.props.model&&this.props.resetViewCam(),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"renderControls",value:function(){var e=this,t=this.props,n=t.isCamAvailable,r=t.isCurrentUserModelOrStudio,a=t.isMyStudioModel,o=t.isOwnShow,i=t.model,s=t.proposeTimer,l=t.isInSpyMode,u=t.hasFlashInitialized,c=t.playerType,d=i.username,f=void 0,p=a&&(!n||l)&&i.status===$.MODEL_STATUSES.STATUS_PRIVATE;if(r&&!p)return null;var m=c===$.VIEWCAM_PLAYER_TYPES.FLASH,g=!m||u||j.BROWSER_CAPABILITIES.flash;if(n&&s)f=O.default.createElement("div",{className:"controls"},O.default.createElement("span",{className:"proposal"},O.default.createElement(D.default,{size:24}),this.t("viewCam.waitingForModelAnswer",{model:d})),O.default.createElement(R.default,{onClick:this.cancelProposalClickHandler},this.t("button.cancel")));else if(n&&!s)switch(i.status){case $.MODEL_STATUSES.STATUS_PUBLIC:var h=i.doP2p&&!i.isMobile&&(j.BROWSER_CAPABILITIES.flash||c===$.VIEWCAM_PLAYER_TYPES.WEBRTC),v=g&&(i.doPrivate||h);f=O.default.createElement("div",{className:"controls"},O.default.createElement(R.default,{className:"btn-apply-alter",style:"tip",onClick:this.sendTipClickHandler},this.t("button.sendTip")),this.renderIf(v,function(){return O.default.createElement(R.default,{style:"primary",onClick:e.startPrivateClickHandler},e.t("button.startPrivate"))}));break;case $.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE:case $.MODEL_STATUSES.STATUS_PRIVATE:o?f=O.default.createElement("div",{className:"controls for-private"},O.default.createElement("div",{className:"private-mode-wrapper"},this.renderPrivateModeText("private"),O.default.createElement(R.default,{style:"end-private",onClick:this.stopPrivateClickHandler},this.t("button.endPrivate"))),this.renderTokensLeft()):l&&(f=O.default.createElement("div",{className:"controls for-spy"},O.default.createElement("div",{className:"private-mode-wrapper"},this.renderPrivateModeText("spy"),O.default.createElement(R.default,{style:"end-private",onClick:this.stopSpyClickHandler},this.t("button.endSpy"))),this.renderTokensLeft()));break;case $.MODEL_STATUSES.STATUS_P2P:f=O.default.createElement("div",{className:"controls for-p2p"},O.default.createElement("div",{className:"private-mode-wrapper"},this.renderPrivateModeText("p2p"),O.default.createElement(R.default,{style:"end-private",onClick:this.stopCam2CamClickHandler},this.t("button.endCam2Cam"))),this.renderTokensLeft());break;default:f=O.default.createElement("div",{className:"controls"}," ")}else switch(i.status){case $.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE:case $.MODEL_STATUSES.STATUS_PRIVATE:f=O.default.createElement("div",{className:"controls"},this.renderIf(g&&!o&&i.doSpy,function(){return O.default.createElement(R.default,{style:"primary",onClick:e.startSpyClickHandler},e.t("button.startSpy"))}));break;case $.MODEL_STATUSES.STATUS_PUBLIC:case $.MODEL_STATUSES.STATUS_IDLE:case $.MODEL_STATUSES.STATUS_OFF:default:f=O.default.createElement("div",{className:"controls"},O.default.createElement(R.default,{className:"btn-default",style:"tip",onClick:this.sendOfflineTipClickHandler},this.t("button.sendPrivateTip")))}return f}},{key:"render",value:function(){var e=this,t=this.props.model,n=this.state.lastSnapshotUrl;return O.default.createElement("div",{className:"view-cam","data-component-name":"ViewCam"},O.default.createElement("div",{className:"wrapper"},O.default.createElement(J.default,{model:t}),O.default.createElement("div",{className:this.c("main",le(this.props)),ref:function(t){e.mainViewCamRef=t}},O.default.createElement("div",{className:"strut"},this.renderIf(ie(this.props),O.default.createElement(W.default,{lastSnapshotUrl:n}),this.renderPoster)))),O.default.createElement("div",{className:"controls-wrapper"},this.renderIf(this.state.isRatePrivateOpen,function(){return O.default.createElement(K.default,{isOpen:!0,onComplete:e.ratePrivateHandler,onClose:e.closeRatePrivate})},function(){return e.renderControls()})))}}]),t}(w.default),de={beginModelWatching:G.beginModelWatching,cancelOnlineStatus:G.cancelOnlineStatus,cancelProposal:G.cancelProposal,createFreeAccountModal:G.createFreeAccountModal,emitButtonEvent:C.emitButtonEvent,goToModel:G.goToModel,loadRelations:te.load,processSocketEvent:A.process,ratePrivate:G.ratePrivate,resetViewCam:G.reset,shadeLayout:C.shadeLayout,showModal:C.showModal,startWizardWithActionOnEnter:re.startWizardWithActionOnEnter,stopPrivate:G.stopPrivate,stopSpy:G.stopSpy,toggleSettings:G.toggleSettings};ce.propTypes=g({aspectRatio:_.default.number,currentUser:_.default.object,currentUserTokens:_.default.number,hasModal:_.default.bool,isCamActive:_.default.bool,isCamAvailable:_.default.bool,isCurrentUserModelOrStudio:_.default.bool,isLoggedIn:_.default.bool,isOwnShow:_.default.bool,isSocketReady:_.default.bool,model:_.default.object.isRequired,privateMode:_.default.string,proposeMode:_.default.string,processSocketEvent:_.default.func},(0,F.getActionPropTypes)(de));var fe=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.appSettings.data,s=i.isSocketReady,l=i.timeDelta,u=e.modelFilter,c=u.isNextModelAvailable,d=u.isPrevModelAvailable,p=e.ui,m=p.hasModal,g=p.isDocumentVisible,h=e.viewCam,v=h.isCamActive,E=h.isCamAvailable,y=h.hasFlashInitialized,b=h.isOwnShow,_=h.model,S=h.proposeMode,O=h.proposeTimer,P=h.viewCamSettings,T=(0,ne.getCurrentUserProfile)(e),A=P.height/P.width,C=(0,H.getPrivateMode)(e),I=(0,H.getIsInSpyMode)(e),w=(0,ee.getIsMyStudioModel)(e);return{aspectRatio:A,broadcastType:(0,V.getBroadcastType)(e),currentUser:r,currentUserTokens:(0,f.default)(T,"tokens",0),hasModal:m,isCamActive:v,isCamAvailable:E,isCurrentUserModelOrStudio:!b&&a&&(r.isModel||r.isStudio),hasFlashInitialized:y,isDocumentVisible:g,isInSpyMode:I,isLoggedIn:a&&!o,isMyStudioModel:w,isNextModelAvailable:c,isOwnShow:b,isPrevModelAvailable:d,isSocketReady:s,model:_||t.model,playerType:(0,V.getPlayerType)(e),privateMode:C,proposeMode:S,proposeTimer:O,timeDelta:l}},pe=function(e){return(0,T.bindActionCreators)(de,e)};t.default=(0,P.connect)(fe,pe)(ce)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(28),h=n(9),v=n(3),E=r(v),y=n(17),b=r(y),_=n(5),S=n(56),O=r(S),P=n(7),T=n(42),A=n(634),C=r(A),I=n(635),w=r(I),N=n(1346),R=r(N),M=n(1347),L=r(M),k=n(1348),D=r(k),U=n(1349),j=r(U),F=n(1350),B=r(F),H=n(1351),V=r(H),G=n(636),x=r(G),W=n(12),Y=n(72),K=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:["model.id","playerType"],action:function(){r.notifyAboutFlashPlayer()}}],r.stopStreamingHandler=function(){r.props.stopPrivate()},r.notifyAboutFlashPlayer=function(){if(_.BROWSER_CAPABILITIES.desktop){var e=function(){return r.props.updatePlayerType("",!0)},t=O.default.get("forcePlayerType"),n=W.VIEWCAM_PLAYER_TYPES.DASH,a=W.VIEWCAM_PLAYER_TYPES.HTML5,o=f.default.createElement(b.default,{elements:{flashLink:f.default.createElement("a",{onClick:e})},messageId:"viewCam.preferFlashOverSnapshotNotification"});t!==n&&t!==a||r.props.showWarningNotification(o,"preferFlashOverSnapshot")}},i=n,o(r,i)}return i(t,e),l(t,[{key:"renderPlayer",value:function(){var e=this.props,t=e.lastSnapshotUrl,n=e.volume;switch(e.playerType){case W.VIEWCAM_PLAYER_TYPES.SNAPSHOT:return f.default.createElement(j.default,{lastSnapshotUrl:t,volume:n});case W.VIEWCAM_PLAYER_TYPES.WEBRTC:return f.default.createElement(x.default,{lastSnapshotUrl:t,stopStreamingCallback:this.props.stopStreamingCallback,volume:n});case W.VIEWCAM_PLAYER_TYPES.HTML5:return f.default.createElement(L.default,{lastSnapshotUrl:t,volume:n});case W.VIEWCAM_PLAYER_TYPES.MSE:return f.default.createElement(D.default,{lastSnapshotUrl:t,volume:n});case W.VIEWCAM_PLAYER_TYPES.DASH:return f.default.createElement(R.default,{lastSnapshotUrl:t,volume:n});case W.VIEWCAM_PLAYER_TYPES.FLASH:default:return f.default.createElement(w.default,{lastSnapshotUrl:t,volume:n,mouseEnterCallback:this.showControls,mouseLeaveCallback:this.hideControls,stopStreamingCallback:this.stopStreamingHandler})}}},{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,n=e.model,r=e.playerType;return f.default.createElement(C.default,{className:"player","data-component-name":"Player"},f.default.createElement("div",{className:"content"},this.renderPlayer(),this.renderIf(r!==W.VIEWCAM_PLAYER_TYPES.FLASH,f.default.createElement(V.default,null)),this.renderIf(r!==W.VIEWCAM_PLAYER_TYPES.FLASH&&!t,f.default.createElement(B.default,{model:n}))))}}]),t}(E.default),q={pause:T.pause,play:T.play,showWarningNotification:g.warning,showModal:h.showModal,stopPrivate:T.stopPrivate,toggleFullscreen:T.toggleFullscreen,toggleControlsBlockVisible:T.toggleControlsBlockVisible,updatePlayerType:T.updatePlayerType};K.propTypes=s({isLoggedIn:c.default.bool,isOwnShow:c.default.bool,lastSnapshotUrl:c.default.string,model:c.default.object.isRequired,playerType:c.default.string,volume:c.default.number},(0,P.getActionPropTypes)(q));var z=function(e){var t=e.auth,n=t.isLoggedIn,r=t.isLoggingOut,a=e.config.data.debug,o=e.viewCam,i=o.model,s=o.playerVolume;return{isControlsBlockVisible:o.isControlsBlockVisible,isDebug:a,isFullscreen:o.isFullscreen,isLoggedIn:n&&!r,model:i,broadcastType:(0,Y.getBroadcastType)(e),playerType:(0,Y.getPlayerType)(e),volume:s}},X=function(e){return(0,m.bindActionCreators)(q,e)};t.default=(0,p.connect)(z,X)(K)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(171),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(3),E=r(v),y=n(8),b=r(y),_=n(22),S=r(_),O=n(5),P=n(62),T=n(29),A=r(T),C=n(42),I=n(240),w=r(I),N=n(72),R=!O.BROWSER_CAPABILITIES.mac,M=O.BROWSER_CAPABILITIES.desktop||O.BROWSER_CAPABILITIES.firefoxMobile,L=!M,k=0,D=O.BROWSER_CAPABILITIES.ie11?200:0,U=4,j=20,F=5,B=function(e){"undefined"!=typeof window&&n.e(0).then(function(t){n(651),e()}.bind(null,n)).catch(n.oe)},H=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={isLoading:!0,isPlaying:!1},r.propsUpdateToActionsMap=[{update:N.camHasChanged,action:function(e){r.onCamHasChanged(e)}},{update:["volume"],action:function(e){var t=e.volume;r.onVolumeHasChanged(t)}},{update:["isFullscreen"],action:function(e){var t=e.isFullscreen;r.toggleFullscreen(t)}}],r.createDashPlayer=function(){var e=dashjs.MediaPlayer.events,t=e.PLAYBACK_PLAYING,n=e.PLAYBACK_ERROR,a=e.PLAYBACK_PAUSED,o=e.ERROR,i=r.props,s=i.isDebug,l=i.streamUrl;A.default.info("Create dash player",{streamUrl:l}),r.dashPlayer||(r.dashPlayer=dashjs.MediaPlayer().create(),r.dashPlayer.initialize(r.videoRef,l,M),r.dashPlayer.setLiveDelayFragmentCount(U),r.dashPlayer.setFragmentLoaderRetryAttempts(j),r.dashPlayer.setBufferToKeep(F),r.dashPlayer.setBufferPruningInterval(F),r.dashPlayer.getDebug().setLogToBrowserConsole(s),r.dashPlayer.on(t,r.onPlay),r.dashPlayer.on(a,r.onPause),r.dashPlayer.on(n,r.onError),r.dashPlayer.on(o,r.onError))},r.destroyDashPlayer=function(){if(r.dashPlayer){var e=dashjs.MediaPlayer.events,t=e.PLAYBACK_PLAYING,n=e.PLAYBACK_ERROR,a=e.PLAYBACK_PAUSED,o=e.ERROR;r.dashPlayer.off(t,r.onPlay),r.dashPlayer.off(a,r.onPause),r.dashPlayer.off(n,r.onError),r.dashPlayer.off(o,r.onError),r.dashPlayer.reset(),r.dashPlayer=null}},r.onModuleLoaded=function(){A.default.info("Dash module loaded"),r.setState({isLoading:M}),r.createDashPlayer()},r.onInit=function(e){var t=e.streamUrl,n=r.state.isPlaying;A.default.info("Initialize dash player"),r.dashPlayer&&(r.dashPlayer.reset(),r.dashPlayer.initialize(),r.dashPlayer.attachSource(t),r.setState({isPlaying:!1,isLoading:n||M}),clearTimeout(r.attachVideoTimeoutId),r.attachVideoTimeoutId=(0,l.default)(function(){r.videoRef&&r.dashPlayer.attachView(r.videoRef)},D))},r.onPlay=function(){A.default.info("Dash player on play"),r.videoRef&&(r.videoRef.controls=!1),r.setState({isPlaying:!0,isLoading:!1})},r.onPause=function(){A.default.info("Dash player on pause"),r.setState({isPlaying:!1,isLoading:!0}),r.dashPlayer&&r.dashPlayer.play()},r.onError=function(e){A.default.error("Dash player on error",e),k+=1,clearTimeout(r.delayedInitTimeoutId),r.delayedInitTimeoutId=(0,l.default)(function(){return r.onInit(r.props)},1e3*Math.pow(k,2))},r.playClickHandler=function(){A.default.info("Dash player start play"),r.dashPlayer&&(r.dashPlayer.setAutoPlay(!0),r.dashPlayer.play())},r.toggleFullscreen=function(e){var t=r,n=t.videoRef;if(n&&O.BROWSER_CAPABILITIES.iOS&&!O.BROWSER_CAPABILITIES.iPad){if(!n.webkitEnterFullscreen||!n.webkitExitFullscreen)return;e?n.webkitEnterFullscreen():n.webkitExitFullscreen()}},r.onEndFullscreen=function(){r.props.toggleFullscreen(!1)},i=n,o(r,i)}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.videoRef;B(this.onModuleLoaded),this.registerEventListener(e,"webkitendfullscreen",this.onEndFullscreen),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.destroyDashPlayer(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"onVolumeHasChanged",value:function(e){var t=this.videoRef;t&&(t.volume=(0,P.roundFloat)(e/100))}},{key:"onCamHasChanged",value:function(e){A.default.info("Dash player on cam hash changed",e),k=0,this.onInit(e)}},{key:"renderPlayIcon",value:function(){var e=this.state,t=e.isPlaying,n=e.isLoading;return t||n?null:m.default.createElement("div",{onClick:this.playClickHandler},m.default.createElement(b.default,{img:"play",size:80}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.lastSnapshotUrl,r=t.model,a=this.state,o=a.isLoading,i=a.isPlaying,s=O.BROWSER_CAPABILITIES.ie11?r.id:"";return m.default.createElement("div",{className:"dash-player","data-component-name":"DashPlayer"},m.default.createElement(w.default,null),m.default.createElement("video",{key:s,"data-inline-video":"true",playsInline:!0,preload:O.BROWSER_CAPABILITIES.inlineVideo?"metadata":"auto",ref:function(t){e.videoRef=t},poster:R?n:void 0,autoPlay:M||i,controls:!L}),this.renderIf(!M,function(){return e.renderPlayIcon()}),this.renderIf(o,function(){return m.default.createElement(S.default,{isCentered:!0})}))}}]),t}(E.default),V={toggleFullscreen:C.toggleFullscreen};H.propTypes={isDebug:f.default.bool,lastSnapshotUrl:f.default.string,model:f.default.object.isRequired,streamUrl:f.default.string.isRequired,streamName:f.default.string.isRequired,volume:f.default.number};var G=function(e){var t=e.viewCam,n=e.config,r=t.isFullscreen,a=t.model,o=t.streamName;return{isDebug:n.data.debug,isFullscreen:r,model:a,streamName:o,streamUrl:(0,N.getStreamUrl)(e)}},x=function(e){return(0,h.bindActionCreators)(V,e)};t.default=(0,g.connect)(G,x)(H)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(119),l=r(s),u=n(36),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(240),b=r(y),_=n(72),S=n(3),O=r(S),P=n(8),T=r(P),A=n(22),C=r(A),I=n(5),w=n(62),N=n(641),R=n(29),M=r(R),L=n(21),k=n(42),D=!I.BROWSER_CAPABILITIES.mac,U=3e3,j=5e3,F=500,B=5,H=null,V=0,G=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={isLoading:!1,isPlaying:!1,isPlayTriggered:!1},r.propsUpdateToActionsMap=[{update:_.camHasChanged,action:function(e){r.onCamHasChanged(e)}},{update:["volume"],action:function(e){var t=e.volume;r.onVolumeHasChanged(t)}},{update:["isFullscreen"],action:function(e){var t=e.isFullscreen;r.toggleFullscreen(t)}},{update:L.windowFocusHasChanged,action:function(e){var t=e.isWindowFocused;I.BROWSER_CAPABILITIES.touch&&(t?r.onFocus():r.onBlur())}}],r.load=function(){return(0,N.addMediaAction)(r.videoRef,"load")},r.play=function(){return(0,N.addMediaAction)(r.videoRef,"play")},r.pause=function(){return(0,N.addMediaAction)(r.videoRef,"pause")},r.checkAutoPlayEnabled=function(){M.default.info("HTML5 player checkAutoPlayEnabled()"),V>B||(V+=1,r.setState({isControlsVisible:!1}),r.play().then(function(){M.default.info("HTML5 player checkAutoPlayEnabled() success")}).catch(function(e){M.default.info("HTML5 player checkAutoPlayEnabled() error",e),r.setState({isPlayTriggered:!1,isLoading:!1,isPlaying:!1})}).then(function(){M.default.info("HTML5 player checkAutoPlayEnabled() isControlsVisible"),r.setState({isControlsVisible:!0})}))},r.prepareUnmount=function(){r.videoRef&&(r.pause(),r.videoRef.src="")},r.clearTimeoutUpdatePlaylist=function(){M.default.info("HTML5 player clearTimeoutUpdatePlaylist()"),clearTimeout(r.loadTimerId)},r.toggleFullscreen=function(e){var t=r,n=t.videoRef;if(n&&I.BROWSER_CAPABILITIES.iOS){if(!n.webkitEnterFullscreen||!n.webkitExitFullscreen)return;e?n.webkitEnterFullscreen():n.webkitExitFullscreen()}},r.onTimeUpdate=(0,l.default)(function(){var e=r,t=e.videoRef,n=r.state,a=n.isPlaying,o=n.isLoading;M.default.info("HTML5 player onTimeUpdate()",t.currentTime),a&&(V=0,t&&(t.controls=!1),H!==t.currentTime?(H=t.currentTime,r.setState({isLoading:!1})):o?r.resetPlay():r.setState({isLoading:!0}))},U,{trailing:!1}),r.onLoadedStart=function(){r.clearTimeoutUpdatePlaylist(),M.default.info("HTML5 player onLoadedStart()"),r.loadTimerId=setTimeout(function(){r.resetPlay()},j)},r.onLoadedData=function(){M.default.info("HTML5 player onLoadedData()"),r.clearTimeoutUpdatePlaylist()},r.onEndFullscreen=function(){r.props.toggleFullscreen(!1),I.BROWSER_CAPABILITIES.iOS&&r.checkAutoPlayEnabled()},r.onFocus=function(){I.BROWSER_CAPABILITIES.desktop||(M.default.info("HTML5 player onFocus()"),r.resetPlay())},r.onBlur=function(){I.BROWSER_CAPABILITIES.desktop||(M.default.info("HTML5 player onBlur()"),r.pause())},r.onLoad=function(e){M.default.info("HTML5 player onLoad()");var t=r,n=t.videoRef,a=e.streamUrl;n&&n.src!==a&&(r.setState({isLoading:!0,isPlaying:!1}),V=0,r.clearTimeoutUpdatePlaylist(),n.src=a)},r.onPlay=function(){M.default.info("HTML5 player onPlay()"),r.setState({isPlayTriggered:!0,isLoading:!0,isPlaying:!1})},r.onPlaying=function(){H=null,M.default.info("HTML5 player onPlaying()"),r.setState({isPlayTriggered:!0,isLoading:!1,isPlaying:!0})},r.onAbort=function(){M.default.info("HTML5 player onAbort()"),r.setState({isPlayTriggered:!1,isLoading:!0,isPlaying:!1})},r.onPause=function(){M.default.info("HTML5 player onPause()"),r.setState({isPlaying:!1,isPlayTriggered:!1}),r.checkAutoPlayEnabled()},r.onCanPlay=function(){M.default.info("HTML5 player onCanPlay()"),r.checkAutoPlayEnabled()},r.onError=function(){M.default.info("HTML5 player onError()");var e=r.state.isPlayTriggered;if(r.props.toggleFullscreen(!1),e){var t=r.videoRef,n=t.currentTime,a=t.currentSrc,o=t.error;M.default.error("HTML5 video error",{currentTime:n,currentSrc:a,error:o}),r.resetPlay()}},r.onCamHasChanged=(0,c.default)(function(e){r.onLoad(e)},F),r.resetPlay=function(){M.default.info("HTML5 player resetPlay()");var e=r,t=e.videoRef;t&&(t.src="",r.onLoad(r.props))},i=n,o(r,i)}return i(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this.videoRef;this.checkAutoPlayEnabled(),e&&(this.registerEventListener(e,"play",this.onPlay),this.registerEventListener(e,"playing",this.onPlaying),this.registerEventListener(e,"abort",this.onAbort),this.registerEventListener(e,"pause",this.onPause),this.registerEventListener(e,"canplay",this.onCanPlay),this.registerEventListener(e,"error",this.onError),this.registerEventListener(e,"timeupdate",this.onTimeUpdate),this.registerEventListener(e,"loadstart",this.onLoadedStart),this.registerEventListener(e,"loadeddata",this.onLoadedData),this.registerEventListener(e,"webkitendfullscreen",this.onEndFullscreen)),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.prepareUnmount(),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"onVolumeHasChanged",value:function(e){var t=this.videoRef;t&&(t.volume=(0,w.roundFloat)(e/100))}},{key:"renderPlayIcon",value:function(){var e=this.state,t=e.isLoading,n=e.isPlayTriggered,r=e.isPlaying;return t||r||n?null:h.default.createElement("div",{onClick:this.play},h.default.createElement(T.default,{img:"play",size:80}))}},{key:"render",value:function(){var e=this,t=this.props.lastSnapshotUrl,n=this.state,r=n.isLoading,a=n.isControlsVisible;return h.default.createElement("div",{className:"html5-player","data-component-name":"Html5Player"},h.default.createElement(b.default,null),h.default.createElement("video",{"data-inline-video":"true",playsInline:!0,preload:I.BROWSER_CAPABILITIES.inlineVideo?"metadata":"auto",ref:function(t){e.videoRef=t},poster:D?t:void 0,autoPlay:!0,controls:!0}),this.renderIf(a,this.renderPlayIcon()),this.renderIf(a&&r,function(){return h.default.createElement(C.default,{isCentered:!0})}))}}]),t}(O.default),x={toggleFullscreen:k.toggleFullscreen};G.propTypes={lastSnapshotUrl:m.default.string,model:m.default.object.isRequired,streamName:m.default.string.isRequired,streamUrl:m.default.string.isRequired,volume:m.default.number};var W=function(e){var t=e.ui,n=e.viewCam,r=n.isFullscreen,a=n.model,o=n.streamName;return{isFullscreen:r,isWindowFocused:t.isWindowFocused,model:a,streamName:o,streamUrl:(0,_.getStreamUrl)(e)}},Y=function(e){return(0,E.bindActionCreators)(x,e)};t.default=(0,v.connect)(W,Y)(G)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(3),E=r(v),y=n(5),b=n(22),_=r(b),S=n(62),O=n(29),P=r(O),T=n(42),A=n(240),C=r(A),I=n(72),w=500,N=void 0,R=function(e,t){"undefined"!=typeof window&&n.e(1).then(function(e){N=n(652),t()}.bind(null,n)).catch(n.oe)},M=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={isLoading:!0,isPlaying:!1},r.propsUpdateToActionsMap=[{update:I.camHasChanged,action:function(e){r.onCamHasChanged(e)}},{update:["volume"],action:function(e){var t=e.volume;r.onVolumeHasChanged(t)}},{update:["isFullscreen"],action:function(e){var t=e.isFullscreen;r.toggleFullscreen(t)}}],r.onPending=function(e){P.default.info("MSEPlayer.onPending",e),r.setState({isLoading:!0,isPlaying:!1})},r.onPlaying=function(e){P.default.info("MSEPlayer.onPlaying",e),r.setState({isLoading:!1,isPlaying:!0})},r.onStopped=function(){P.default.info("MSEPlayer.onStopped"),r.setState({isLoading:!0,isPlaying:!1}),r.stream=null,r.createStream(r.props)},r.onFailed=function(){r.player&&(P.default.info("MSEPlayer.onFailed"),r.setState({isLoading:!0,isPlaying:!1}),r.createStream(r.props))},r.destroyMSEPlayer=function(){P.default.info("MSEPlayer.destroyMSEPlayer()"),r.player&&(r.player.disconnect(),r.player=null)},r.createMSEPlayer=function(e){if(N&&r.videoRefWrapper){P.default.info("MSEPlayer.createMSEPlayer()");var t=e.streamUrl,n=N.constants.SESSION_STATUS;N.init({preferredMediaProviders:["MSE"]}),t&&(r.player=N.createSession({urlServer:t}),r.player.on(n.ESTABLISHED,function(){return r.createStream(e)}))}},r.updateStream=function(e){r.player&&(P.default.info("MSEPlayer.updateStream()"),r.stream?r.stream.stop():r.createStream(e))},r.createStream=function(e){if(P.default.info("MSEPlayer.createStream()"),r.player){var t=e.streamName,n=N.constants.STREAM_STATUS;r.stream=r.player.createStream({name:t,display:r.videoRefWrapper}),r.stream.on(n.PENDING,r.onPending),r.stream.on(n.PLAYING,r.onPlaying),r.stream.on(n.STOPPED,r.onStopped),r.stream.on(n.FAILED,r.onFailed),r.stream.play()}},r.onModuleLoaded=function(){P.default.info("MSEPlayer.onModuleLoaded()",N),r.createMSEPlayer(r.props)},r.toggleFullscreen=function(e){P.default.info("MSEPlayer.toggleFullscreen()",e);var t=r,n=t.videoRef;if(n&&y.BROWSER_CAPABILITIES.iOS&&!y.BROWSER_CAPABILITIES.iPad){if(!n.webkitEnterFullscreen||!n.webkitExitFullscreen)return;e?n.webkitEnterFullscreen():n.webkitExitFullscreen()}},r.onCamHasChanged=(0,l.default)(function(e){P.default.info("MSEPlayer.onCamHasChanged()",e),r.updateStream(e)},w),i=n,o(r,i)}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.staticRoot;R(0,this.onModuleLoaded),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.destroyMSEPlayer(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"onVolumeHasChanged",value:function(e){P.default.info("MSEPlayer.onVolumeHasChanged()",e);var t=this.videoRef;t&&(t.volume=(0,S.roundFloat)(e/100))}},{key:"render",value:function(){var e=this,t=this.props.lastSnapshotUrl,n=this.state.isLoading;return m.default.createElement("div",{className:"mse-player",ref:function(t){e.videoRefWrapper=t},"data-component-name":"MSEPlayer"},m.default.createElement(C.default,null),m.default.createElement("video",{"data-inline-video":"true",playsInline:!0,preload:y.BROWSER_CAPABILITIES.inlineVideo?"metadata":"auto",ref:function(t){e.videoRef=t},poster:t,autoPlay:!0,controls:"true"}),this.renderIf(n,function(){return m.default.createElement(_.default,{isCentered:!0})}))}}]),t}(E.default),L={toggleFullscreen:T.toggleFullscreen};M.propTypes={lastSnapshotUrl:f.default.string,model:f.default.object.isRequired,streamUrl:f.default.string.isRequired,streamName:f.default.string.isRequired,volume:f.default.number};var k=function(e){var t=e.viewCam,n=e.config,r=t.isFullscreen,a=t.model,o=t.streamName,i=n.data.staticRoot;return{isFullscreen:r,model:a,streamName:o,streamUrl:(0,I.getStreamUrl)(e),staticRoot:i}},D=function(e){return(0,h.bindActionCreators)(L,e)};t.default=(0,g.connect)(k,D)(M)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(160),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(20),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(619),E=r(v),y=n(240),b=r(y),_=n(12),S=n(72),O=n(3),P=r(O),T=n(22),A=r(T),C=n(5),I=n(641),w=n(29),N=r(w),R=0,M=10,L=3,k=function(e){var t=e.model,n=e.streamName;return t?"https://c-"+t.snapshotServer+"."+C.BASE_DOMAIN_CDN+"/"+n+".mp3?"+(0,l.default)():""},D=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:["model.id"],action:function(e){r.onCamHasChanged(e)}},{update:["status"],action:function(e){r.onPlayStatusHasChanged(e)}},{update:["volume"],action:function(e){r.onVolumeHasChanged(e)}}],r.onAudioStartPlaying=function(){N.default.log("SnapshotPlayer onAudioStartPlaying")},r.onAudioError=function(){if(!((R+=1)>=M)){var e=L*R;r.audioRequestTimeout=setTimeout(function(){r.continueAudioPlaying(r.props)},1e3*e)}},r.continueAudioPlaying=function(e){var t=r,n=t.audioRef,a=e.volume,o=k(e);return n&&o&&0!==a?(n.src=o,(0,I.addMediaAction)(n,"play")):(0,d.resolve)()},r.pauseAudioPlaying=function(){var e=r,t=e.audioRef;return t?(0,I.addMediaAction)(t,"pause"):(0,d.resolve)()},r.onVideoStartPlaying=function(){r.setState({isLoading:!1})},i=n,o(r,i)}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,n=this.audioRef;this.registerEventListener(n,"playing",this.onAudioStartPlaying),this.registerEventListener(n,"error",this.onAudioError),this.props.volume&&((0,I.addMediaAction)(n,"play"),setTimeout(function(){e.props.volume>0&&e.continueAudioPlaying(e.props)},15e3)),R=0,c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){this.pauseAudioPlaying(),clearTimeout(this.audioRequestTimeout),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"onCamHasChanged",value:function(e){var t=this,n=this.audioRef;if(n)return(0,I.addMediaAction)(n,"pause").then(function(){return t.continueAudioPlaying(e)})}},{key:"onVolumeHasChanged",value:function(e){return e.volume>0?this.continueAudioPlaying(e):this.pauseAudioPlaying()}},{key:"onPlayStatusHasChanged",value:function(e){return R=0,e.status===_.PLAYER_STATUSES.playing?this.continueAudioPlaying(e):this.pauseAudioPlaying()}},{key:"render",value:function(){var e=this,t=this.props,n=t.streamUrl,r=t.volume,a=this.state.isLoading;return g.default.createElement("div",{className:"snapshot-player","data-component-name":"SnapshotPlayer"},g.default.createElement(b.default,null),g.default.createElement("audio",{autoPlay:Boolean(r),preload:"auto",ref:function(t){e.audioRef=t}}),this.renderIf(Boolean(n),function(){return g.default.createElement(E.default,{onVideoStartPlaying:e.onVideoStartPlaying,streamUrl:n})}),this.renderIf(a,function(){return g.default.createElement(A.default,{isCentered:!0})}))}}]),t}(P.default);D.propTypes={lastSnapshotUrl:p.default.string,model:p.default.object.isRequired,streamUrl:p.default.string.isRequired,streamName:p.default.string.isRequired,volume:p.default.number,onToggleControls:p.default.func.isRequired};var U=function(e){var t=e.viewCam;return{model:t.model,streamName:t.streamName,streamUrl:(0,S.getStreamUrl)(e)}};t.default=(0,h.connect)(U)(D)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=r(o),s=n(0),l=r(s),u=n(2),c=n(4),d=n(9),f=n(5),p=n(7),m=function(e,t){var n=t.i18n.trans,r=e.model,a=function(t){t.stopPropagation(),e.emitButtonEvent(f.APP_BUTTONS.PLAYER_SIGNUP,{model:r})};return l.default.createElement("button",{className:"btn join-me-button",onClick:a,"data-component-name":"JoinMeButton"},n("button.joinMe"))},g={emitButtonEvent:d.emitButtonEvent};m.propTypes=a({},(0,p.getActionPropTypes)(g)),m.contextTypes={i18n:i.default.object,model:i.default.object};var h=function(e){return(0,c.bindActionCreators)(g,e)};t.default=(0,u.connect)(null,h)(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){return a.default.createElement("div",{className:"watermark"})};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),u=r(l),c=n(8),d=r(c),f=n(633),p=r(f),m=n(1),g=r(m),h=n(0),v=r(h),E=500,y=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.changeRatingHandler=function(e){e<3?r.setState({rating:e,step:2}):(r.props.onComplete(e,""),r.closeHandler())},r.sendCommentHandler=function(){var e=r.state.comment;r.setState({step:3}),r.props.onComplete(r.state.rating,e)},r.commentChangeHandler=function(e){var t=e.target.value;t.length<=E&&r.setState({comment:t})},r.closeHandler=function(){r.setState({isOpen:!1}),r.props.onClose(),2===r.state.step&&r.props.onComplete(r.state.rating,"")},i=n,o(r,i)}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{rating:null,comment:"",step:1,isOpen:this.props.isOpen}}},{key:"renderCloseButton",value:function(){return v.default.createElement("div",{className:"close",onClick:this.closeHandler},v.default.createElement(d.default,{img:"close-2"}))}},{key:"renderStepRate",value:function(){return v.default.createElement("div",{className:"rating"},v.default.createElement("p",null,this.t("viewCam.rate.howWouldYouRatePrivate")),v.default.createElement("div",{className:"spacer-small"}),v.default.createElement(p.default,{defaultValue:0,onChange:this.changeRatingHandler}))}},{key:"renderStepComment",value:function(){var e=this.state.comment;return v.default.createElement("div",{className:"comment"},v.default.createElement("textarea",{placeholder:this.t("viewCam.rate.comments"),onChange:this.commentChangeHandler,value:e}),v.default.createElement("button",{className:"btn btn-send",onClick:this.sendCommentHandler},this.t("button.send")),this.renderCloseButton())}},{key:"renderStepThanks",value:function(){return v.default.createElement("div",{className:"thanks"},this.t("viewCam.rate.thankYouForResponse"),this.renderCloseButton())}},{key:"render",value:function(){return this.state.isOpen?v.default.createElement("div",{className:"rate-private"},this.renderIf(1===this.state.step,this.renderStepRate()),this.renderIf(2===this.state.step,this.renderStepComment()),this.renderIf(3===this.state.step,this.renderStepThanks())):null}}]),t}(u.default);y.propTypes={onComplete:g.default.func.isRequired,isOpen:g.default.bool.isRequired},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),o=r(a),i=n(1),s=r(i),l=n(0),u=r(l),c=n(12),d=function(e){var t=e.model,n=e.timeDelta;if(t.status!==c.MODEL_STATUSES.STATUS_OFF||!t.offlineStatus)return null;var r=(0,o.default)().add(n,"ms"),a=t.offlineStatusUpdatedAt&&r.isAfter(t.offlineStatusUpdatedAt);return u.default.createElement("div",{"data-component-name":"OfflineStatus"},u.default.createElement("div",{className:"offline-status"},t.offlineStatus),u.default.createElement("div",{className:"offline-status-time"},a?r.to(t.offlineStatusUpdatedAt):null))};d.propTypes={model:s.default.object.isRequired,timeDelta:s.default.number.isRequired},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(24),v=n(4),E=n(9),y=n(3),b=r(y),_=n(8),S=r(_),O=n(237),P=r(O),T=n(39),A=r(T),C=n(5),I=n(62),w=n(19),N=n(7),R=n(108),M=n(42),L=n(12),k=n(97),D=n(71),U=n(60),j=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,c=Array(s),d=0;d<s;d++)c[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.favoritesClickHandler=function(e){e.preventDefault(),e.stopPropagation();var t=r.props.model;r.props.toggleFavorite(t,{triggerSource:C.APP_BUTTONS.VIEWCAM_FAVORITE})},r.sendPrivateMessageClickHandler=function(e){var t=r.props,n=t.isLoggedIn,a=t.model,o=t.showModal,i=r.context.store.dispatch;if(!n){e.preventDefault(),e.stopPropagation();var s=e.target.getAttribute("href");(0,w.composeActionOnEnter)("openPM",{href:s}).then(function(e){o(C.MODAL_TYPES.AUTH,{action:{backgroundImage:a.avatarUrl,type:"sendPrivateMessage",user:a,onSuccess:(0,l.default)(function(){w.performActionOnEnter.openPM(u({},e.params),i)},L.ADD_TO_FAVORITES_DELAY),onEnterAction:e},component:"SignUp",className:"auth-modal-signup",triggerSource:C.APP_BUTTONS.VIEWCAM_PRIVATE_MESSAGE})})}},r.buyTokensClickHandler=function(e){e.preventDefault();var t=r.props.model;r.props.emitButtonEvent(C.APP_BUTTONS.VIEWCAM_BUY_TOKENS,{modelId:t.id})},r.showProfileClickHandler=function(e){e.preventDefault();var t=r.props;(0,t.loadModelProfile)(t.model)},i=n,o(r,i)}return i(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.favoritedCount,a=t.isInFavorites,o=t.isLoggedIn,i=t.model,s=i.username,l=o&&!n.isModel&&!n.isStudio,u=!o||l,c=!C.BROWSER_CAPABILITIES.touch;return m.default.createElement("div",{className:"view-cam-aside","data-component-name":"ViewCamAside"},m.default.createElement("ul",null,m.default.createElement("li",null,m.default.createElement(P.default,{user:i,target:"_blank",id:"viewcam_aside_profile_link",onClick:this.showProfileClickHandler},m.default.createElement(S.default,{img:"user-info"})),this.renderIf(c,m.default.createElement(A.default,{isMobileRelative:!1,placement:"right",targetId:"viewcam_aside_profile_link"},this.t("button.modelsProfile")))),this.renderIf(u,function(){return m.default.createElement("li",null,m.default.createElement("a",{className:e.c("toggle-favorites",{favorited:a}),onClick:e.favoritesClickHandler,id:"viewcam_aside_favorites_link"},m.default.createElement(S.default,{img:a?"favorited":"favorite"}),e.renderIf(r>0,function(){return m.default.createElement("div",{className:"count"},(0,I.formatNumber)(r,1))})),e.renderIf(c,m.default.createElement(A.default,{isMobileRelative:!1,placement:"right",targetId:"viewcam_aside_favorites_link"},a?e.t("button.removeFromFavorites"):e.t("button.addToFavorites"))))}),m.default.createElement("li",null,m.default.createElement(h.Link,{onClick:this.sendPrivateMessageClickHandler,to:"/messages/"+s,target:"_blank",id:"viewcam_aside_messages_link"},m.default.createElement(S.default,{img:"private-message"})),this.renderIf(c,m.default.createElement(A.default,{isMobileRelative:!1,placement:"right",targetId:"viewcam_aside_messages_link"},this.t("button.sendPrivateMessage")))),this.renderIf(u,function(){return m.default.createElement("li",null,m.default.createElement("a",{onClick:e.buyTokensClickHandler,id:"viewcam_aside_tokens_link"},m.default.createElement(S.default,{img:"tokens-1"})),e.renderIf(c,m.default.createElement(A.default,{isMobileRelative:!1,placement:"right",targetId:"viewcam_aside_tokens_link"},e.t("button.buyTokens"))))})))}}]),t}(b.default),F={toggleFavorite:R.toggle,emitButtonEvent:E.emitButtonEvent,showModal:E.showModal,startWizardWithActionOnEnter:U.startWizardWithActionOnEnter,loadModelProfile:M.loadModelProfile};j.propTypes=u({currentUser:f.default.object,favoritedCount:f.default.number,isInFavorites:f.default.bool,isLoggedIn:f.default.bool,model:f.default.object.isRequired},(0,N.getActionPropTypes)(F));var B=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=t.model;return{currentUser:r,favoritedCount:(0,D.getFavoritesCount)(e),isInFavorites:(0,k.getIsInFavorites)(e,i.id),isLoggedIn:a&&!o}},H=function(e){return(0,v.bindActionCreators)(F,e)};t.default=(0,g.connect)(B,H)(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=(r(a),n(0)),i=r(o),s=function(){return i.default.createElement("div",{className:"view-cam"},i.default.createElement("div",{className:"wrapper"},i.default.createElement("div",{className:"main"},i.default.createElement("div",{className:"strut"}))),i.default.createElement("div",{className:"controls-wrapper"}))};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(107),o=r(a),i=n(1),s=r(i),l=n(0),u=r(l),c=n(2),d=n(4),f=n(17),p=r(f),m=n(629),g=r(m),h=n(39),v=r(h),E=n(639),y=r(E),b=n(237),_=r(b),S=n(5),O=n(188),P=n(42),T=n(12),A=n(618),C=r(A),I=n(45),w=n(71),N=n(89),R=r(N),M=!S.BROWSER_CAPABILITIES.touch,L=function(e,t){var n=e.currentUser,r=e.goalData,a=e.goToModel,i=e.isLoggedIn,s=e.isBroadcastingPageOpen,l=e.isSwitchingBetweenModelsAvailable,c=e.model,d=e.onAvatarClick,f=e.viewCamUrl,m=t.i18n,h=function(e){return m.trans(e)},E=function(){a("next")},b=function(e,t){return M?u.default.createElement(v.default,{indentation:8,isMobileRelative:!1,placement:"top",targetId:e},u.default.createElement(p.default,{elements:{br:u.default.createElement("br",null)},messageId:t})):null};return u.default.createElement("div",{className:"header","data-component-name":"ViewCamHeader"},function(){return u.default.createElement("div",{className:"room-avatar"},u.default.createElement(_.default,{user:c,target:"_blank",title:h("button.modelsProfile"),onClick:d},u.default.createElement("span",null,u.default.createElement(R.default,{user:c}))),u.default.createElement(C.default,{model:c}))}(),function(){return u.default.createElement("div",{className:"room-name"},u.default.createElement(_.default,{user:c,target:"_blank",title:h("button.modelsProfile"),onClick:d},c.username),r.description?u.default.createElement("span",{className:"goal-description"},u.default.createElement("span",{className:"dash"},"—"),(0,O.insertInvisibleWordBreaks)(r.description)):null,r.goal?u.default.createElement("span",{className:"goal-amount"},u.default.createElement("span",{className:"dash"},"—"),(0,o.default)(h("goal"))," @ ",u.default.createElement("span",{className:"amount"},r.left)):null)}(),function(){return i&&n.isModel&&s?u.default.createElement(y.default,{shareText:"Hey Guys! I'm now LIVE on @Stripchat. Come play with me! 😈 #stripmenow #stripchat #stripchatlive 👉",shareLinkUrl:""+S.BASE_URL_ROOT+f,labelText:h("social.twitterShareBroadcast.tweetMyShow"),labelMobileText:h("social.twitterShareBroadcast.tweet"),"data-component-name":"ViewCamHeader"}):null}(),l?function(){return u.default.createElement("div",{className:"room-nav"},u.default.createElement(g.default,{id:"room_nav_next",type:"next-small",onClick:E,pageNumber:0}),b("room_nav_next","viewCam.navigation.tooltip.next"))}():null)};L.propTypes={currentUser:s.default.object,goalData:s.default.shape({description:s.default.string,goal:s.default.number,left:s.default.number,spent:s.default.number}),goToModel:s.default.func.isRequired,isBroadcastingPageOpen:s.default.bool,isLoggedIn:s.default.bool,isSwitchingBetweenModelsAvailable:s.default.bool,model:s.default.object.isRequired,onAvatarClick:s.default.func.isRequired,viewCamUrl:s.default.string},L.defaultProps={type:"default"},L.contextTypes={i18n:s.default.object};var k=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.modelFilter.isNextModelAvailable,s=e.broadcast,l=e.viewCam,u=t.model,c=s.isBroadcastingPageOpen,d=l.isCamAvailable,f=u.status===T.MODEL_STATUSES.STATUS_PRIVATE||u.status===T.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE,p=d&&f,m=!p&&i&&!c,g=(0,I.getViewCamUrl)(e,u.username);return{currentUser:r,goalData:(0,w.getGoalData)(e,u.id),isLoggedIn:a&&!o,isBroadcastingPageOpen:c,isSwitchingBetweenModelsAvailable:m,viewCamUrl:g}},D=function(e){return(0,d.bindActionCreators)({goToModel:P.goToModel},e)};t.default=(0,c.connect)(k,D)(L)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(76),l=r(s),u=n(6),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(4),y=n(3),b=r(y),_=n(239),S=r(_),O=n(22),P=r(O),T=n(27),A=n(43),C=n(38),I=A.UPDATE_TYPES.DESCRIPTION,w=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.updateAutoSize=function(){var e=r,t=e.autoSizeRef,n=e.textareaRef;n.value.length?/\n$/.test(n.value)?t.textContent=n.value+".":t.textContent=n.value.replace(/\s$/,"."):t.textContent="."},r.editButtonClickHandler=function(){var e=r.props,t=e.updatePrepare,n=e.updateProfile;if(r.state.isEditMode){n({description:(0,l.default)(r.textareaRef.value)},I)}else t(I),r.setState({isEditMode:!0})},i=n,o(r,i)}return i(t,e),d(t,[{key:"getNextState",value:function(e,t){return{isEditMode:!(e.user.id!==this.props.user.id)&&!e.isSucceeded&&this.state.isEditMode,maxLength:(0,c.default)(e.availableSettings,"description.maxLength",T.DEFAULT_USER_DESCRIPTION_MAX_LENGTH)}}},{key:"componentDidRender",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this)).call.apply(e,[this].concat(r)),!this.props.isUpdating&&this.textareaRef&&this.updateAutoSize()}},{key:"renderEditMode",value:function(){var e=this,t=this.props.isUpdating,n=this.state.maxLength;return h.default.createElement("div",{className:"textarea-container"},h.default.createElement("div",{className:"textarea-wrapper"},h.default.createElement("textarea",{autoFocus:!0,defaultValue:this.props.user.description,disabled:t,maxLength:n,onChange:this.updateAutoSize,ref:function(t){e.textareaRef=t}})),h.default.createElement("div",{className:"auto-size",ref:function(t){e.autoSizeRef=t}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.isEditable,a=t.isUpdating,o=t.user,i=this.state.isEditMode;return h.default.createElement("div",{className:this.c("user-description",n,{"edit-mode":i,pending:a}),"data-component-name":"UserDescription"},this.renderIf(r,function(){return h.default.createElement("div",{className:"edit-button-container"},h.default.createElement(S.default,{isActive:i,onClick:e.editButtonClickHandler}),e.renderIf(a,function(){return h.default.createElement(P.default,{size:60})}))}),h.default.createElement("div",{className:"user-description-header"},h.default.createElement("h2",null,this.t("profile.description.title"))),this.renderIf(i,function(){return e.renderEditMode()},function(){return h.default.createElement("div",{className:"description-text"},o.description)}))}}]),t}(b.default);w.propTypes={className:m.default.string,isEditable:m.default.bool,isSucceeded:m.default.bool,isUpdating:m.default.bool,updateError:m.default.instanceOf(Error),updatePrepare:m.default.func.isRequired,updateProfile:m.default.func.isRequired,user:m.default.object.isRequired};var N=function(e,t){var n=e.auth,r=e.availableSettings.data,a=t.user,o=n.currentUser,i=n.isLoggingOut,s=n.isLoggedIn&&!i;return{availableSettings:r,currentUser:o,isEditable:s&&o.id===a.id,isLoggedIn:s,isUpdating:(0,C.getIsUpdating)(e,I),isSucceeded:(0,C.getIsSucceeded)(e,I),updateError:(0,C.getError)(e,I)}},R=function(e){return(0,E.bindActionCreators)({updatePrepare:A.updatePrepare,updateProfile:A.updateProfile},e)};t.default=(0,v.connect)(N,R)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(9),E=n(3),y=r(E),b=n(239),_=r(b),S=n(8),O=r(S),P=n(83),T=r(P),A=n(5),C=n(7),I=n(230),w=n(232),N=n(147),R=n(189),M=n(1359),L=r(M),k=n(1360),D=r(k),U=n(41),j=n(165),F=500,B=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:U.currentUserHasChanged,action:function(e){var t=e.selectedAlbum,n=e.user;t&&r.props.loadUserPhotos(t.id,n.id),r.state.isEditMode&&r.setState({isEditMode:!1})}},{update:["scrollToUserGalleryToken"],action:function(e){var t=e.scrollToUserGalleryToken,n=r,a=n.userGalleryRef;if(a&&t){var o=a.getBoundingClientRect(),i=o.top;i<0&&T.default.set(i,F)}}}]),r.toggleEditState=function(){r.setState({isEditMode:!r.state.isEditMode})},r.createAlbumClickHandler=function(){var e=r.state.isEditMode;r.props.showModal(A.MODAL_TYPES.EDIT_ALBUM),r.props.cancelDeletePreparations(),e&&r.toggleEditState()},r.editButtonClickHandler=function(){var e=r.state.isEditMode,t=r.props.selectedAlbum;e&&(t?r.props.removeMyPhotos():r.props.removeMyAlbums()),r.toggleEditState()},r.crumbsRootClickHandler=function(){var e=r.props,t=e.selectedAlbum,n=e.user;t&&r.props.select(null,n.id),r.state.isEditMode&&(t?r.props.cancelPhotosDeleting():r.props.cancelAlbumsDeleting(),r.setState({isEditMode:!1}))},r.renderGallery=function(){var e=r.state.isEditMode,t=r.props,n=t.albums,a=t.isOwnProfile,o=t.selectedAlbum,i=t.user;return o?m.default.createElement(D.default,{albumId:o.id,isEditMode:e,isOwnProfile:a,selectedAlbum:o,user:i}):m.default.createElement(L.default,{albums:n,isEditMode:e,isOwnProfile:a,user:i,createAlbumClickHandler:r.createAlbumClickHandler})},s=n,i(r,s)}return s(t,e),u(t,[{key:"componentWillUnmount",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this);var e=this.props.user;this.props.select(null,e.id)}},{key:"getDefaultState",value:function(){return{isEditMode:!1}}},{key:"getSocketEventBindings",value:function(e,t){var n=e.isOwnProfile,r=e.user,a=[{subscriptionKey:"albumUpdated:"+r.id}];return n||a.push({subscriptionKey:"albumDeleted:"+r.id}),a}},{key:"render",value:function(){var e=this,t=this.state.isEditMode,n=this.props,r=n.isOwnProfile,a=n.isGalleryAvailable,o=n.className,i=n.selectedAlbum;return a?m.default.createElement("div",{className:this.c(o,"user-gallery"),ref:function(t){e.userGalleryRef=t},"data-component-name":"UserGallery"},m.default.createElement("div",{className:"user-gallery-header"},m.default.createElement("h2",null,m.default.createElement("span",{className:"user-gallery-crumb-root",onClick:this.crumbsRootClickHandler},this.t(r?"myAlbums":"albumsTitle")),this.renderIf(i,function(){return m.default.createElement("span",{className:"user-gallery-crumb-child"},m.default.createElement(O.default,{img:"next-small",size:18}),m.default.createElement("span",null,i.name))})),this.renderIf(r,m.default.createElement(_.default,{isActive:t,onClick:this.editButtonClickHandler}))),this.renderGallery()):null}}]),t}(y.default),H={cancelAlbumsDeleting:I.cancelAlbumsDeleting,cancelDeletePreparations:I.cancelDeletePreparations,cancelPhotosDeleting:w.cancelPhotosDeleting,load:I.load,loadUserPhotos:R.load,removeMyAlbums:I.remove,removeMyPhotos:w.remove,select:N.select,showModal:v.showModal};B.propTypes=l({albums:f.default.arrayOf(f.default.object).isRequired,isGalleryAvailable:f.default.bool.isRequired,className:f.default.string,isOwnProfile:f.default.bool.isRequired,selectedAlbum:f.default.object,user:f.default.object.isRequired},(0,C.getActionPropTypes)(H));var V=function(e,t){var n=e.auth.currentUser,r=e.myAlbums.isPending,a=e.userAlbums.isPending,o=e.profile.scrollToUserGalleryToken,i=t.isOwnProfile,s=i?(0,j.getMyAlbums)(e):(0,j.getUserAlbums)(e,t),l=i?(0,j.getMySelectedAlbum)(e):(0,j.getSelectedUserAlbum)(e,t);return{albums:s,currentUser:n,isGalleryAvailable:i?!r:!a&&s.length>0,scrollToUserGalleryToken:o,selectedAlbum:l}},G=function(e){return(0,h.bindActionCreators)(H,e)};t.default=(0,g.connect)(V,G)(B)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),c=r(u),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(9),E=n(3),y=r(E),b=n(17),_=r(b),S=n(8),O=r(S),P=n(73),T=r(P),A=n(5),C=n(7),I=n(230),w=n(147),N=n(231),R=n(165),M=n(100),L=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.albumClickHandler=function(e){var t=e.currentTarget.dataset.albumId,n=r.props,a=n.isEditMode,o=n.user;a||r.props.select(Number(t),o.id)},r.deleteControlClickHandler=function(e){var t=e.currentTarget.dataset.albumId;e.preventDefault(),e.stopPropagation(),r.props.toggleAlbumDeleting(Number(t))},r.settingsClickHandler=function(e){var t=e.currentTarget.dataset.albumId;e.preventDefault(),e.stopPropagation(),r.props.showModal(A.MODAL_TYPES.EDIT_ALBUM,{albumId:Number(t)})},r.renderControlIcon=function(e,t,n){return m.default.createElement("div",{className:"control-icon-wrapper",onClick:n,"data-album-id":e.id},m.default.createElement(O.default,{img:t,size:14}))},r.renderDeletedControls=function(e){return m.default.createElement("div",{className:"deleted-album-controls"},m.default.createElement("div",{className:"deleted-album-indicator"},m.default.createElement(O.default,{className:"deleted-album-icon",img:"trash",size:40}),m.default.createElement("span",{className:"deleted-album-text"},r.t("deleted"))),m.default.createElement("div",{className:"deleted-album-recovery","data-album-id":e.id,onClick:r.deleteControlClickHandler},m.default.createElement(O.default,{img:"recovery",size:14}),m.default.createElement("span",null,"Recovery")))},r.renderControls=function(e){return m.default.createElement("div",{className:"album-controls"},r.renderControlIcon(e,"settings",r.settingsClickHandler),r.renderControlIcon(e,"close-5",r.deleteControlClickHandler))},r.renderElementTitle=function(e){return"string"==typeof e?e:""},r.renderAccessModeForOwner=function(e){var t=e.accessMode,n=e.cost;if(t===N.ALBUMS_ACCESS_MODES.FREE)return null;var a=void 0,o=void 0;switch(t){case N.ALBUMS_ACCESS_MODES.FRIENDS:a="users",o=r.t("gallery.albums.thumbs.owner."+t);break;case N.ALBUMS_ACCESS_MODES.PAID:a="lock-1",o=m.default.createElement(_.default,{choiceParameter:"cost",elements:{cost:m.default.createElement("strong",null,n)},messageId:"gallery.albums.thumbs.owner."+t,parameters:{cost:n}});break;case N.ALBUMS_ACCESS_MODES.VERIFIED_USERS:a="user-verified",o=r.t("gallery.albums.thumbs.owner."+t)}return m.default.createElement("div",null,m.default.createElement("div",{className:"access-mode-shadow"}),m.default.createElement("div",{className:"access-mode-content",title:r.renderElementTitle(o)},m.default.createElement(O.default,{img:a}),o))},r.renderAccessModeForViewer=function(e){var t=e.accessMode,n=e.cost,a=r.props,o=a.currentUser,i=a.isLoggedIn,s=a.isMyFriend,l=i&&(o.isAdmin||o.isSupport);if((0,R.getIsAlbumAccessGranted)(e)&&!l)return null;var u=void 0,c=void 0;if(t!==N.ALBUMS_ACCESS_MODES.FRIENDS||s||(c="users",u=r.t("gallery.albums.thumbs.viewer."+t)),t===N.ALBUMS_ACCESS_MODES.PAID&&(c="lock-1",u=m.default.createElement(_.default,{parameters:{cost:n},elements:{accent:m.default.createElement("span",{className:"label-accent"})},messageId:"gallery.albums.thumbs.viewer."+t})),t===N.ALBUMS_ACCESS_MODES.VERIFIED_USERS)if(i){if(o.isEmailVerified)return null;c="mail-filled",u=r.t("gallery.albums.thumbs.viewer.verified")}else c="user-verified",u=r.t("gallery.albums.thumbs.viewer.registered");return m.default.createElement("div",{className:"access-mode-wrapper"},m.default.createElement("div",{className:"access-mode-inner"},m.default.createElement("div",null,m.default.createElement(O.default,{img:c})),m.default.createElement("div",null,u)))},r.renderAccessMode=function(e){var t=r.props.isOwnProfile;return m.default.createElement("div",{className:r.c("album-access-mode "+e.accessMode,{owner:t,viewer:!t})},t?r.renderAccessModeForOwner(e):r.renderAccessModeForViewer(e))},r.renderAlbum=function(e){var t=r.props,n=t.isEditMode,a=t.isOwnProfile,o=t.deletedAlbumIds,i=a?e.previewUnverified:e.preview||e.previewMicro,s=a?e.photosCountUnverified:e.photosCount,l=o.has(e.id),u=!s;return m.default.createElement("li",{className:"albums-list-item",key:e.id},m.default.createElement("div",{className:r.c("album",{deleted:l,empty:u}),onClick:r.albumClickHandler,"data-album-id":e.id},r.renderAccessMode(e),r.renderIf(n,function(){return l?r.renderDeletedControls(e):r.renderControls(e)}),r.renderIf(i,function(){return m.default.createElement("div",{className:r.c("album-img",{"album-img-restricted":!a&&!(0,R.getIsAlbumAccessGranted)(e)&&e.accessMode!==N.ALBUMS_ACCESS_MODES.PAID}),style:{backgroundImage:"url("+i+")"}})},function(){return m.default.createElement("div",{className:"album-img-empty"},m.default.createElement(O.default,{img:"files",size:50}))}),m.default.createElement("div",{className:"album-footer"},m.default.createElement("span",{className:"album-name"},e.name),r.renderIf(s,function(){return m.default.createElement("span",{className:"album-photos-count"},s)}))))},r.renderAlbumCreator=function(){var e=r.props.createAlbumClickHandler;return m.default.createElement("li",{className:"albums-list-item album-creator-wrapper"},m.default.createElement("div",{className:"album-creator",onClick:e},m.default.createElement("div",{className:"album-creator-content"},m.default.createElement(O.default,{size:28,img:"plus-unframed"}),m.default.createElement("span",{className:"album-creator-text"},r.t("gallery.albums.createAlbum")))))},r.renderOwnAlbums=function(){var e=r.props.albums;return m.default.createElement("ul",{className:"albums-list"},r.renderAlbumCreator(),e.map(r.renderAlbum))},r.renderUserAlbums=function(){var e=r.props.albums;return m.default.createElement("ul",{className:"albums-list"},e.map(r.renderAlbum))},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.isEditMode,n=e.isOwnProfile,r=e.className;return m.default.createElement("div",{className:this.c(r,"albums-gallery-root",{"edit-mode":t}),"data-component-name":"AlbumsGallery"},m.default.createElement(T.default,{isAlwaysVisible:!0},this.renderIf(n,this.renderOwnAlbums,this.renderUserAlbums)))}}]),t}(y.default),k={select:w.select,showModal:v.showModal,toggleAlbumDeleting:I.toggleAlbumDeleting};L.propTypes=s({albums:f.default.arrayOf(f.default.object).isRequired,createAlbumClickHandler:f.default.func.isRequired,deletedAlbumIds:f.default.instanceOf(c.default.Set).isRequired,isEditMode:f.default.bool.isRequired,isOwnProfile:f.default.bool.isRequired,user:f.default.object.isRequired},(0,C.getActionPropTypes)(k));var D=function(e,t){var n=e.myAlbums.deletedAlbumIds,r=e.auth;return{currentUser:r.currentUser,deletedAlbumIds:n,isLoggedIn:r.isLoggedIn,isMyFriend:(0,M.getIsMyFriend)(e,t.user.id)}},U=function(e){return(0,h.bindActionCreators)(k,e)};t.default=(0,g.connect)(D,U)(L)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(119),u=r(l),c=n(1361),d=r(c),f=n(46),p=r(f),m=n(145),g=r(m),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},y=n(18),b=r(y),_=n(1),S=r(_),O=n(0),P=r(O),T=n(4),A=n(2),C=n(9),I=n(3),w=r(I),N=n(17),R=r(N),M=n(10),L=r(M),k=n(8),D=r(k),U=n(22),j=r(U),F=n(73),B=r(F),H=n(39),V=r(H),G=n(5),x=n(7),W=n(21),Y=n(27),K=n(232),q=n(1363),z=r(q),X=n(231),Z=n(165),Q=n(1366),J=150,$=1,ee=-1,te=1.2,ne=1,re=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.propsUpdateToActionsMap=[{update:[W.layoutHasChanged,W.orientationHasChanged],action:function(){r.throttledResizeHandler()}}],r.throttledResizeHandler=(0,u.default)(function(){return r.windowResizeHandler()},G.DEFAULT_RESIZE_EVENT_THROTTLE_WAIT,{leading:!1,trailing:!0}),r.unshiftPhotoUploader=function(e){return r.props.isOwnProfile?[{id:ee,aspectRatio:te}].concat(a(e)):e},r.imageUploadEventHandler=function(e){var t=e.name,n=e.thumbName;t===G.TYPES_OF_IMAGE_SIZES.THUMB&&r.props.removeFromInProgress(n)},r.newNotificationEventHandler=function(e){e.notification.type===Y.PERSONAL_NOTIFICATION_TYPES.USER_PHOTO_DECLINED&&r.props.loadPhotos()},r.deleteControlClickHandler=function(e){var t=e.currentTarget.dataset.photoId;r.props.togglePhotoDeleting(Number(t))},r.galleryRefHandler=function(e){r.galleryRef=e},r.windowResizeHandler=function(){r.updateGalleryWidth()},r.updateGalleryWidth=function(){r.galleryRef&&r.setStateIfModified({galleryWidth:r.galleryRef.offsetWidth})},r.getPxValue=function(e){return e.toFixed(2)+"px"},r.alignGalleryItems=function(e,t){var n=function(e){var n=(0,d.default)(e,"width"),r=t-e.length*$;return Math.min(r/n,ne)},r=function(e,t){var n=e.map(function(e){return h({},e,{height:e.height*t,width:e.width*t})});return(0,g.default)(n).width-=$,n},o=(0,p.default)(e,function(e,t){var o=e.itemsAligned,i=e.rowItems;i.push(h({},t,{height:J,width:J*t.aspectRatio}));var s=n(i);return s<1&&(o.push.apply(o,a(r(i,s))),i.length=0),{itemsAligned:o,rowItems:i}},{itemsAligned:[],rowItems:[]}),i=o.itemsAligned,s=o.rowItems;return s.length&&i.push.apply(i,a(r(s,n(s)))),i},r.imageClickHandler=function(e){var t=e.currentTarget.dataset.photoId;e.preventDefault(),r.setState({isPopupOpen:!0,popupSelectedItemId:Number(t)})},r.userGalleryPopupCloseHandler=function(){r.setState({isPopupOpen:!1,popupSelectedItemId:null})},r.addPhotoClickHandler=function(){r.fileInputRef.click()},r.fileInputChangeHandler=function(e){var t=e.target.files;t.length&&r.props.addPhotos([].concat(a(t)))},r.buyAlbumClickHandler=function(){var e=r.props,t=e.user,n=e.selectedAlbum;r.props.emitButtonEvent(G.APP_BUTTONS.USER_GALLERY_BUY_ALBUM,{userId:t.id,albumId:n.id})},r.goToSettingsClickHandler=function(){r.props.emitButtonEvent(G.APP_BUTTONS.USER_GALLERY_GO_TO_SETTINGS)},r.signUpClickHandler=function(){var e=r.props.user;r.props.emitButtonEvent(G.APP_BUTTONS.USER_GALLERY_ALBUM_REGISTERED_SIGNUP,{model:e})},r.renderAlbumAccessMode=function(){var e=r.props,t=e.currentUser,n=e.selectedAlbum,a=e.isLoggedIn,o=e.user,i=n.accessMode,s=void 0,l=void 0,u=void 0,c=void 0;if(i===X.ALBUMS_ACCESS_MODES.FRIENDS&&(s="users-in-circle",u=r.t("gallery.albums.accessModeDescription.friends.title"),c=P.default.createElement(R.default,{messageId:"gallery.albums.accessModeDescription.friends.description",elements:{albumOwnerUsername:P.default.createElement("strong",null,o.username)}})),i===X.ALBUMS_ACCESS_MODES.PAID&&(s="lock-in-circle",u=P.default.createElement(R.default,{choiceParameter:"cost",elements:{amount:P.default.createElement("strong",null,n.cost)},messageId:"gallery.albums.accessModeDescription.paid.title",parameters:{cost:n.cost}}),c=P.default.createElement(R.default,{messageId:"gallery.albums.accessModeDescription.paid.description",elements:{albumName:P.default.createElement("strong",null,n.name)}}),l=P.default.createElement(L.default,{style:"apply-alter",size:"medium",onClick:r.buyAlbumClickHandler},r.t("gallery.albums.accessModeDescription.paid.buttonTitle"))),i===X.ALBUMS_ACCESS_MODES.PAID&&a&&(t.isModel||t.isStudio)&&(s="error",u=r.t("gallery.albums.accessModeDescription.studioOrModel.title"),c=P.default.createElement(R.default,{messageId:"gallery.albums.accessModeDescription.studioOrModel.description",elements:{albumOwnerUsername:P.default.createElement("strong",null,o.username)}}),l=null),i===X.ALBUMS_ACCESS_MODES.VERIFIED_USERS){var d="";if(a){if(t.isEmailVerified)return null;d="verified"}else d="registered";var f="registered"===d;s=a?"mail":"user-verified-in-circle",u=f?r.t("gallery.albums.accessModeDescription."+d+".title"):"",c=r.t("gallery.albums.accessModeDescription."+d+".description"),l=P.default.createElement(L.default,{size:"medium",style:f?"signup":"default",onClick:f?r.signUpClickHandler:r.goToSettingsClickHandler},r.t("gallery.albums.accessModeDescription."+d+".buttonTitle"))}return P.default.createElement("div",{className:"album-access-mode-wrapper"},P.default.createElement("div",{className:"access-mode-inner"},P.default.createElement("div",{className:"access-mode-icon"},P.default.createElement(D.default,{img:s})),P.default.createElement("div",{className:"access-mode-title"},u),P.default.createElement("div",{className:"access-mode-description"},c),P.default.createElement("div",{className:"access-mode-action"},l)))},r.renderItem=function(e){var t=r.props,n=t.deletedPhotoIds,a=t.isEditMode,o=t.isMyPhotosPending,i=t.isOwnProfile,s=t.photosInProgress,l=t.user,u=e.height,c=e.width,d=e.id,f=e.status,p=e.urlThumb,m=e.urlThumbMicro,g=!!i&&s.has(p),v=f===Y.USER_PHOTO_STATUSES.NOT_REVIEWED,E=!g&&v&&!l.isApprovedModel,y=p||m,b={backgroundImage:y&&!g?"url("+y+")":void 0,height:r.getPxValue(u),width:r.getPxValue(c)},_="not-reviewed-photo-id-"+d;if(d===ee)return P.default.createElement("li",{className:r.c("plus",{"is-updating":o}),key:"plus",onClick:r.addPhotoClickHandler,style:b},r.renderIf(o,function(){return P.default.createElement(j.default,{size:80,isCentered:!0})}),P.default.createElement(D.default,{img:"plus",size:44}),P.default.createElement("input",{accept:"image/*",multiple:"multiple",onChange:r.fileInputChangeHandler,ref:function(e){r.fileInputRef=e},type:"file"}));if(a&&!o){var S=n.has(d),O={onClick:r.deleteControlClickHandler,"data-photo-id":d};return P.default.createElement("li",{className:r.c({"should-be-deleted":S}),draggable:"false",key:d,style:b},r.renderIf(S,function(){return P.default.createElement(L.default,h({className:"restore-button"},O),r.t("button.restore"))},function(){return P.default.createElement("a",h({className:"remove-button"},O),P.default.createElement(D.default,{img:"close-4"}))}))}return P.default.createElement("li",{className:"is-clickable",draggable:"false",onClick:r.imageClickHandler,key:d,style:b,"data-photo-id":d},r.renderIf(g,function(){return P.default.createElement(j.default,{size:80,isCentered:!0})}),r.renderIf(E,function(){return P.default.createElement("div",{className:"photo-review-pending-icon-wrapper"},P.default.createElement("span",{id:_},P.default.createElement(D.default,{img:"hourglass",size:60})),P.default.createElement(V.default,{className:"photo-review-pending-tooltip",isMobileRelative:!1,placement:"top",targetId:_},P.default.createElement("div",null,P.default.createElement("div",{className:"tooltip-header"},r.t("gallery.notReviewedPhoto.tooltipTitle")),P.default.createElement("div",{className:"tooltip-description"},r.t("gallery.notReviewedPhoto.tooltipDescription")))))}))},s=n,i(r,s)}return s(t,e),v(t,[{key:"componentDidRender",value:function(e,n,r){E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this,e,n,r),this.updateGalleryWidth()}},{key:"getDefaultState",value:function(){return h({galleryWidth:null,isPopupOpen:!1,popupSelectedItemId:null},this.getNextState(this.props,this.context))}},{key:"getSocketEventBindings",value:function(e,t){if(!e.isLoggedIn)return[];var n=this.props.currentUser;return[{subscriptionKey:"image:upload:"+n.id,callback:this.imageUploadEventHandler},{subscriptionKey:"newNotification:"+n.id,callback:this.newNotificationEventHandler}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.albumPhotos,r=t.isAlbumAccessGranted,a=t.isEditMode,o=t.isMyPhotosPending,i=t.isOwnProfile,s=t.selectedAlbum,l=t.user,u=this.state,c=u.galleryWidth,d=u.isPopupOpen,f=u.popupSelectedItemId,p=this.unshiftPhotoUploader(n),m=this.c("photos-gallery",this.props.className,{"gallery-access-restricted":!i&&!r,"is-edit-mode":a,"is-pending":o});return P.default.createElement("div",{className:m,"data-component-name":"PhotosGallery"},this.renderIf(!i&&!r,this.renderAlbumAccessMode),P.default.createElement(B.default,{isAlwaysVisible:!0},P.default.createElement("ul",{className:"photos-gallery-list",ref:this.galleryRefHandler},this.renderIf(c,function(){return e.alignGalleryItems(p,c).map(e.renderItem)}))),this.renderIf(d,function(){return P.default.createElement(z.default,{onClose:e.userGalleryPopupCloseHandler,selectedItemId:f,userPhotos:n,user:l,selectedAlbum:s})}))}}]),t}(w.default),ae={addPhotos:K.add,deletePhotos:K.remove,emitButtonEvent:C.emitButtonEvent,loadPhotos:K.load,removeFromInProgress:K.removeFromInProgress,togglePhotoDeleting:K.togglePhotoDeleting};re.propTypes=h({albumPhotos:S.default.arrayOf(x.ReactSchemes.photo),className:S.default.string,currentUser:S.default.object,deletedPhotoIds:S.default.instanceOf(b.default.Set),isLoggedIn:S.default.bool,isUsersPending:S.default.bool.isRequired,isMyPhotosPending:S.default.bool.isRequired,isOwnProfile:S.default.bool,photosInProgress:S.default.instanceOf(b.default.Set),selectedAlbum:S.default.object.isRequired,user:S.default.object},(0,x.getActionPropTypes)(ae));var oe=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.myPhotos,s=i.deletedPhotoIds,l=i.inProgress,u=i.isPending,c=e.users.isPending,d=e.ui,f=d.windowWidth,p=d.windowHeight,m=d.windowOrientation;return{albumPhotos:t.isOwnProfile?(0,Q.getMyPhotos)(e):(0,Q.getUserAlbumPhotos)(e,t),currentUser:r,deletedPhotoIds:s,isAlbumAccessGranted:(0,Z.getIsAlbumAccessGranted)(t.selectedAlbum),isLoggedIn:a&&!o,isMyPhotosPending:u,isUsersPending:c,photosInProgress:l,windowWidth:f,windowHeight:p,windowOrientation:m}},ie=function(e){return(0,T.bindActionCreators)(ae,e)};t.default=(0,A.connect)(oe,ie)(re)},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1364),l=r(s),u=n(146),c=r(u),d=n(11),f=r(d),p=n(145),m=r(p),g=n(116),h=r(g),v=n(589),E=r(v),y=n(48),b=r(y),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},P=n(399),T=r(P),A=n(1),C=r(A),I=n(0),w=r(I),N=n(2),R=n(53),M=r(R),L=n(17),k=r(L),D=n(8),U=r(D),j=n(21),F=n(5),B=n(27),H=null,V=function(e){function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.propsUpdateToActionsMap=[{update:j.layoutHasChanged,action:function(){r.windowResizeHandler()}}],r.windowResizeHandler=function(){var e=r.thumbListRef;e&&(e.style.display="none",H&&clearTimeout(H),H=setTimeout(function(){e&&(e.style.display="block")},100))},r.wheelSelectedHandler=function(e){r.navEventHandler(e,e.deltaY<0?"selectPrev":"selectNext")},r.swipeSelectedHandler=function(e){e.direction===T.default.DIRECTION_RIGHT?r.navEventHandler(e,"selectPrev"):e.direction===T.default.DIRECTION_LEFT?r.navEventHandler(e,"selectNext"):e.direction===T.default.DIRECTION_DOWN&&r.props.onClose()},r.wheelThumbsHandler=function(e){r.navEventHandler(e,e.deltaY<0?"scrollPrev":"scrollNext")},r.swipeThumbsHandler=function(e){e.direction===T.default.DIRECTION_RIGHT?r.navEventHandler(e,"scrollPrev"):e.direction===T.default.DIRECTION_LEFT&&r.navEventHandler(e,"scrollNext")},r.keySelectedHandler=function(e){switch(e.keyCode){case F.KEY_CODES.arrowLeft:r.navEventHandler(null,"selectPrev");break;case F.KEY_CODES.arrowRight:r.navEventHandler(null,"selectNext");break;case F.KEY_CODES.arrowDown:r.state.isFullScreen?r.setState({isFullScreen:!1}):r.closeHandler()}},r.fullScreenSwitchHandler=function(e){e.preventDefault(),r.setState({isFullScreen:!r.state.isFullScreen})},r.renderThumbList=function(){return w.default.createElement("div",{className:"user-gallery-popup-thumbs"},r.renderNav("scrollPrev"),w.default.createElement("div",{className:"scroll-container",ref:function(e){r.thumbListRef=e}},r.state.images.map(function(e,t){var n=e.id,a=e.urlThumb;return w.default.createElement("img",{alt:r.t("gallery.photoNumber",{number:t+1}),className:r.c({selected:n===r.state.selectedItemId}),draggable:"false",key:n,onClick:function(e){return r.selectThumbClickHandler(e,n)},src:a})})),r.renderNav("scrollNext"))},r.renderCloseButton=function(){return w.default.createElement("div",{className:"btn-close",onClick:r.props.onClose},w.default.createElement(U.default,{img:"close-3"}))},r.hammers=[],r.scrollLeft=null,r}return i(t,e),S(t,[{key:"getDefaultState",value:function(){var e=this.props.selectedItemId;return _({},O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{images:this.getImages(this.props),isFullScreen:!1,selectedItemId:e})}},{key:"getNextState",value:function(e,n){var r=e.selectedItemId;return r!==this.props.selectedItemId&&(this.scroll=null),_({},O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n),{images:this.getImages(e),selectedItemId:r===this.props.selectedItemId?this.state.selectedItemId:r})}},{key:"componentDidMount",value:function(){this.addEventListeners(),O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.scroll=this.getSelectedPhotoScroll()}},{key:"componentDidRender",value:function(e,n,r){O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this,e,n,r),null===this.scroll&&(this.scroll=this.getSelectedPhotoScroll()),this.renderScroll()}},{key:"componentWillUnmount",value:function(){this.removeEventListeners(),O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"getImages",value:function(e){return(0,c.default)((0,f.default)(e.userPhotos,function(e){return _({},e)}),["id"],["desc"])}},{key:"getSelectedPhotoScroll",value:function(){var e=this.thumbListRef;if(!e)return 0;var t=(0,b.default)(e.children,function(e){return e.classList.contains("selected")});return t?(0,l.default)(t.offsetLeft+t.offsetWidth/2-e.offsetWidth/2):0}},{key:"addEventListeners",value:function(){var e=this.selectedItemRef,t=this.thumbListRef;if(this.registerEventListener(document,"keydown",this.keySelectedHandler),e){var n=new T.default(e);n.get("swipe").set({direction:T.default.DIRECTION_ALL}),n.on("swipe",this.swipeSelectedHandler),this.hammers.push(n),this.registerEventListener(e,"wheel",this.wheelSelectedHandler)}t&&(this.hammers.push(new T.default(t).on("swipe",this.swipeThumbsHandler)),this.registerEventListener(t,"wheel",this.wheelThumbsHandler))}},{key:"removeEventListeners",value:function(){for(var e=this.hammers,t=e.pop();t;)t.stop(),t.destroy(),t=e.pop();this.removeRegisteredEventListeners()}},{key:"selectThumbClickHandler",value:function(e,t){var n=this;e.preventDefault(),this.setStateIfModified({selectedItemId:t},function(){n.scroll=n.getSelectedPhotoScroll(),n.renderScroll()})}},{key:"navEventHandler",value:function(e,t){var n=this;if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){var r=this.props.isCycled,a=this.state.images,o=this.thumbListRef,i=function(){return o?(0,l.default)(o.clientWidth*n.props.scrollSpeed):0};e&&e.preventDefault();var s=this.prev,u=this.next,c=!1,d=this.state.selectedItemId;switch(t){case"selectPrev":s?(d=s.id,c=!0):r&&(d=(0,m.default)(a).id,c=!0);break;case"selectNext":u?(d=u.id,c=!0):r&&(d=(0,h.default)(a).id,c=!0);break;case"scrollPrev":this.scroll-=i(),this.renderScroll();break;case"scrollNext":this.scroll+=i(),this.renderScroll();break;default:throw new TypeError("Incorrect type parameter given")}this.setState({selectedItemId:d},function(){c&&(n.scroll=n.getSelectedPhotoScroll()),n.renderScroll()})}}},{key:"renderScroll",value:function(){var e=this.thumbListRef;e&&null!==this.scroll&&(e.scrollLeft=this.scroll)}},{key:"renderNav",value:function(e){var t=this,n=this.props.isCycled,r={selectPrev:{isActive:n||this.prev,className:"prev",icon:"nav-prev"},selectNext:{isActive:n||this.next,className:"next",icon:"nav-next"},scrollPrev:{isActive:this.allowScrollPrev,className:"prev",icon:"nav-prev"},scrollNext:{isActive:this.allowScrollNext,className:"next",icon:"nav-next"}},a=r[e];if(!a)throw new ReferenceError("Incorrect type parameter given");return w.default.createElement("div",{className:this.c("nav",a.className,{disabled:!a.isActive}),onClick:function(n){return t.navEventHandler(n,e,a.isActive)}},w.default.createElement(U.default,{img:a.icon}))}},{key:"renderSelectedItem",value:function(){var e=this,t=this.selected,n=t.id,r=t.url,a=t.urlThumb,o=t.status,i=this.props.user,s=o===B.USER_PHOTO_STATUSES.NOT_REVIEWED,l=s&&!i.isApprovedModel&&F.BROWSER_CAPABILITIES.touch;return w.default.createElement("div",{ref:function(t){e.selectedItemRef=t},className:"user-gallery-popup-selected"},w.default.createElement("div",{className:"fullscreen-switch",onClick:this.fullScreenSwitchHandler},w.default.createElement(U.default,{img:this.state.isFullScreen?"fullscreen-off":"fullscreen-on"})),this.renderNav("selectPrev"),w.default.createElement("div",{className:this.c("img-placeholder",{loaded:!0}),key:n+"-thumb",style:{backgroundImage:"url("+a+")"}}),w.default.createElement("div",{className:this.c("img",{loaded:!0}),key:n+"-full",style:{backgroundImage:"url("+r+")"}}),this.renderNav("selectNext"),this.renderIf(l,w.default.createElement("div",{className:"photo-popup-review-pending-icon-wrapper"},w.default.createElement("div",null,w.default.createElement(U.default,{img:"hourglass",size:60}),w.default.createElement("div",{className:"tooltip-header"},this.t("gallery.notReviewedPhoto.tooltipTitle")),w.default.createElement("div",{className:"tooltip-description"},this.t("gallery.notReviewedPhoto.tooltipDescription"))))))}},{key:"renderTitle",value:function(){var e=this.props.selectedAlbum;return w.default.createElement(k.default,{messageId:"gallery.viewerPopupHeader",elements:{albumName:w.default.createElement("strong",null,e.name)}})}},{key:"renderContent",value:function(){var e=this.state.isFullScreen;return w.default.createElement("div",{className:this.c("user-gallery-popup",{fullscreen:e}),"data-component-name":"UserGalleryPopup"},w.default.createElement("div",null,this.renderCloseButton(),this.renderSelectedItem(),this.renderIf(!e,this.renderThumbList)))}},{key:"selected",get:function(){return(0,b.default)(this.state.images,{id:this.state.selectedItemId})}},{key:"prev",get:function(){var e=this;return(0,E.default)(this.state.images,function(t){return t.id>e.state.selectedItemId})}},{key:"next",get:function(){var e=this;return(0,b.default)(this.state.images,function(t){return t.id<e.state.selectedItemId})}},{key:"scrollMin",get:function(){return 0}},{key:"scrollMax",get:function(){var e=this.thumbListRef;return e?e.scrollWidth-e.offsetWidth:0}},{key:"scroll",get:function(){return this.scrollLeft},set:function(e){this.scrollLeft=e,null!==e&&(this.scrollLeft=Math.max(this.scrollLeft,this.scrollMin),this.scrollLeft=Math.min(this.scrollLeft,this.scrollMax))}},{key:"allowScrollPrev",get:function(){return this.scroll>this.scrollMin}},{key:"allowScrollNext",get:function(){return this.scroll<this.scrollMax}}]),t}(M.default);V.propTypes=_({},M.default.propTypes,{isCycled:C.default.bool,selectedItemId:C.default.number,selectedAlbum:C.default.object.isRequired,scrollSpeed:C.default.number,user:C.default.shape({id:C.default.number,isModel:C.default.bool}),userPhotos:C.default.array}),V.defaultProps=_({},M.default.defaultProps,{className:"user-gallery-popup-modal-wrapper",isCloseBtnShown:!1,isCycled:!0,scrollSpeed:.25,titlePosition:"outside"});var G=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight}};t.default=(0,N.connect)(G)(V)},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMyPhotos=t.getUserAlbumPhotos=void 0;var a=n(146),o=r(a),i=n(6),s=r(i),l=n(32),u=n(27),c=function(e){return e.myAlbums.selectedAlbumId},d=function(e){return e.myPhotos.collection},f=function(e){return e.userAlbums.selectedAlbumId},p=function(e){return e.userPhotos.collection},m=function(e){return(0,o.default)(e,function(e){return e.status===u.USER_PHOTO_STATUSES.NOT_REVIEWED&&e.id},"desc")};t.getUserAlbumPhotos=(0,l.createSelector)([f,p],function(e,t){var n=t.get(e);return(0,s.default)(n,"photos",[])}),t.getMyPhotos=(0,l.createSelector)([d,c],function(e,t){return m(e.valueSeq().toArray().filter(function(e){return e.albumId===t}))})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(642),h=r(g),v=n(45),E=n(3),y=r(E),b=n(10),_=r(b),S=n(8),O=r(S),P=n(89),T=r(P),A=n(1368),C=r(A),I=n(384),w=r(I),N=n(1369),R=r(N),M=n(644),L=r(M),k=n(120),D=r(k),U=n(12),j=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.renderButtons=function(){var e=r.props.user;return p.default.createElement("div",{className:"action-buttons"},p.default.createElement("div",{className:"action-buttons-container"},p.default.createElement(R.default,{user:e}),p.default.createElement(C.default,{user:e}),p.default.createElement(w.default,{user:e})))},i=n,o(r,i)}return i(t,e),u(t,[{key:"renderWatchMeButton",value:function(){var e=this.props,t=e.isBanned,n=e.isGeoBanned,r=e.user,a=e.shouldRenderWatchButton,o=e.viewCamUrl,i=t||n;return r.isModel&&(0,l.default)([U.MODEL_STATUSES.STATUS_PUBLIC,U.MODEL_STATUSES.STATUS_PRIVATE,U.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE],r.status)&&a&&!i&&!r.isDeleted?p.default.createElement(_.default,{className:"watch-me-button",style:"apply",to:o,type:"link"},p.default.createElement(O.default,{img:"webcam"}),this.t("button.watchMe")):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.isBanned,r=t.isGeoBanned,a=t.isLoggedIn,o=t.isProfileAvailable,i=t.user,s=n||r,l=!i.isDeleted&&o&&!n&&!r,u=!i.isDeleted&&!s,c=void 0;return n?c=this.t(i.isModel?"privateMessages.cannotSend.youAreBannedByModel":"privateMessages.cannotSend.youAreBannedByUser"):r&&(c=this.t("camChat.yourCountryIsBlockedByModel")),p.default.createElement("div",{className:this.c("user-info"),"data-component-name":"UserInfo"},p.default.createElement("div",{className:"avatar-wrapper"},p.default.createElement(T.default,{isAwardBadgeVisible:!0,user:i}),p.default.createElement("div",{className:"avatar-buttons"},this.renderWatchMeButton(),this.renderIf(u,p.default.createElement(h.default,{buttonLocation:"profileButton",user:i})))),p.default.createElement("div",{className:"info"},p.default.createElement("h2",null,p.default.createElement(D.default,{user:i,isLevelStatusVisible:!0})),this.renderIf(!o,function(){return p.default.createElement("p",null,e.t("profile.availableOnlyTo."+i.showProfileTo))}),this.renderIf(c,function(){return p.default.createElement("p",null,c)}),this.renderIf(l,function(){return p.default.createElement(L.default,{config:e.props.config.data,isStatusLevelVisible:!a||!(i.isModel||i.isStudio),user:i})}),this.renderIf(u,this.renderButtons)))}}]),t}(y.default);j.propTypes={config:d.default.object,isBanned:d.default.bool,shouldRenderWatchButton:d.default.bool,isGeoBanned:d.default.bool,isProfileAvailable:d.default.bool,user:d.default.object.isRequired,viewCamUrl:d.default.string.isRequired},j.defaultProps={shouldRenderWatchButton:!0};var F=function(e,t){var n=t.user,r=e.auth;return{config:e.config,currentUser:r.currentUser,isLoggedIn:r.isLoggedIn&&!r.isLoggingOut,viewCamUrl:(0,v.getViewCamUrl)(e,n.username)}};t.default=(0,m.connect)(F)(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FavoriteButton=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(3),v=r(h),E=n(10),y=r(E),b=n(5),_=n(7),S=n(108),O=n(97),P=t.FavoriteButton=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(){var e=r.props.user;r.props.toggleFavorite(e,{triggerSource:b.APP_BUTTONS.FAVORITE})},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isInFavorites,r=e.isLoggedIn,a=e.user,o=!r||!t.isModel&&!t.isStudio;if(!a.isModel||!o)return null;var i=this.t(n?"button.removeFromFavorites":"button.addToFavorites");return f.default.createElement(y.default,{onClick:this.clickHandler,size:"default",title:i,"data-component-name":"FavoriteButton"},i)}}]),t}(v.default),T={toggleFavorite:S.toggle,showModal:g.showModal};P.propTypes=s({currentUser:c.default.shape({isModel:c.default.bool,isStudio:c.default.bool}),isInFavorites:c.default.bool,isLoggedIn:c.default.bool,user:c.default.shape({id:c.default.number}).isRequired},(0,_.getActionPropTypes)(T));var A=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=t.user;return{currentUser:r,isInFavorites:(0,O.getIsInFavorites)(e,i.id),isLoggedIn:a&&!o}},C=function(e){return(0,m.bindActionCreators)(T,e)};t.default=(0,p.connect)(A,C)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(9),h=n(3),v=r(h),E=n(10),y=r(E),b=n(5),_=n(19),S=function(e){function t(){var e,n,r,i;a(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.clickHandler=function(e){if(!r.props.isLoggedIn){e.preventDefault();var t=r.props,n=t.user,a=t.showModal,o=r.context.store.dispatch,i=e.target.getAttribute("href");(0,_.composeActionOnEnter)("openPM",{href:i}).then(function(e){a(b.MODAL_TYPES.AUTH,{action:{backgroundImage:n.avatarUrl,type:"sendPrivateMessage",user:n,onSuccess:function(){_.performActionOnEnter.openPM(s({},e.params),o)},onEnterAction:e},component:"SignUp",className:"auth-modal-signup",triggerSource:b.APP_BUTTONS.SEND_PM})})}},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.user,t=this.t("button.sendPM");return f.default.createElement(y.default,{onClick:this.clickHandler,size:"default",title:t,to:"/messages/"+e.username,type:"link","data-component-name":"SendPrivateMessageButton"},t)}}]),t}(v.default);S.propTypes={user:c.default.object.isRequired,showModal:c.default.func.isRequired};var O=function(e){return(0,m.bindActionCreators)({showModal:g.showModal},e)},P=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,p.connect)(P,O)(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(169),c=r(u),d=n(46),f=r(d),p=n(30),m=r(p),g=n(11),h=r(g),v=n(13),E=r(v),y=n(400),b=r(y),_=n(14),S=r(_),O=n(6),P=r(O),T=n(36),A=r(T),C=n(80),I=r(C),w=n(172),N=r(w),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),L=n(1),k=r(L),D=n(0),U=r(D),j=n(2),F=n(4),B=n(9),H=n(3),V=r(H),G=n(10),x=r(G),W=n(301),Y=r(W),K=n(390),q=r(K),z=n(239),X=r(z),Z=n(58),Q=r(Z),J=n(8),$=r(J),ee=n(22),te=r(ee),ne=n(392),re=r(ne),ae=n(92),oe=r(ae),ie=n(5),se=n(110),le=n(7),ue=n(29),ce=r(ue),de=n(43),fe=n(89),pe=r(fe),me=n(644),ge=r(me),he=n(120),ve=r(he),Ee=n(1373),ye=r(Ee),be=n(27),_e=n(38),Se=n(44),Oe=de.UPDATE_TYPES.AVATAR,Pe=de.UPDATE_TYPES.INFO,Te=500,Ae=function(e){function t(){var e,n,r,l;i(this,t);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.imageUploadEventHandler=function(e){e.name===ie.TYPES_OF_IMAGE_SIZES.FULL&&r.setState({isImageLoading:!1})},r.scrollToInvalidField=function(e){return e&&e.scrollIntoView({behavior:"smooth"})},r.editButtonClickHandler=function(){if(r.state.isEditMode){var e=r.state.userModified,t=(0,se.fromRenderToApiFormat)(e.birthDate,{dayOnly:!0}),n=(0,f.default)(Object.keys(be.SOCIAL_LINKS_REGEXP),function(t,n){var a=new RegExp(be.SOCIAL_LINKS_REGEXP[n],"gi");return e[n]&&-1===e[n].search(a)?R({},t,o({},n,[r.t("errors.validation."+n)])):t},{});if(Object.keys(n).length)return void r.props.riseValidationErrors({details:n});if(e.birthDate&&!t)return void r.props.riseValidationErrors({details:{birthDate:[r.t("errors.validation.birthDate",{format:se.RENDER_DATE_FORMAT})]}});r.props.updateProfile(R({},e,{birthDate:t||""}),Pe)}else r.props.updatePrepare(Pe),r.setState({isEditMode:!0})},r.updatePhotoClickHandler=function(){r.props.updatePrepare(Oe),r.setState({isPhotoUploadPopupOpen:!0})},r.photoUploadPopupCloseHandler=function(){r.setState({isPhotoUploadPopupOpen:!1})},r.photoUploadPopupSaveHandler=function(e){r.setState({isImageLoading:!0}),r.props.updateProfile({avatar:e},Oe,{isMultipart:!0})},r.inputChangeHandler=function(e,t){r.setStateUserModified(e,t.target.value)},r.optionSelectHandler=function(e,t,n){var a=void 0;if("cityId"===e)return void r.setStateUserModified(e,n);a=t?n?(0,h.default)(n,"value"):[]:n?n.value:null,r.setStateUserModified(e,a)},r.onCityInputChange=(0,A.default)(function(e){if(!e)return void r.props.resetCities();r.props.loadCities({start:e,country:r.state.userModified.country})},Te),r.deleteAvatarClickHandler=function(){r.setState({isDeleteAvatarConfirmationOpen:!0})},r.deleteAvatarConfirm=function(){r.props.updateProfile({avatar:""},Oe,{notifications:{success:r.t("profile.deleteAvatar.success")}})},r.deleteAvatarCancel=function(){r.setState({isDeleteAvatarConfirmationOpen:!1})},r.birthDateChangeHandler=function(e){r.setStateUserModified("birthDate",e)},r.renderContentForApprovedModel=function(e){var t=r.state.userModified.isApprovedModel;return e&&t?e:null},r.renderDetailSelect=function(e){var t=e.options,n=e.showWithoutOptions,r=void 0!==n&&n,o=a(e,["options","showWithoutOptions"]);return r||t&&t.length?U.default.createElement(oe.default,R({isSearchable:t.length>5,options:t},o)):(ce.default.warn("UserInfoEditable.renderDetailSelect() has empty options provided",o),null)},r.renderField=function(e){var t=e.fieldName,n=e.settingName,o=a(e,["fieldName","settingName"]),i=r.props.availableSettings,s=r.state.userModified,l=i[n]||[],u={};return o.options||(u.options=l.map(function(e){return{label:r.t("preferenceValues."+e),value:e}})),r.renderDetailSelect(R({isClearable:!0,onSelect:(0,m.default)(r.optionSelectHandler,t,o.isMultiple),value:o.isMultiple?(0,b.default)((0,N.default)(s[t]),l):s[t]},o,u))},r.renderDetailsEditMode=function(){var e=r.state.userModified,t=r.props,n=t.availableSettings,a=t.cities,i=t.config,s=t.error,l=t.socialLinks,u=e.city,c=e.cityId;if(r.firstErrorTooltipRef=null,!n)return U.default.createElement(te.default,null);var d=e.country&&i.regions[e.country]?i.regions[e.country]:[],p=d.length?r.renderDetailSelect({isSearchable:!0,onSelect:(0,m.default)(r.optionSelectHandler,"region",!1),options:d.map(function(e){var t=e.code;return{label:e.title,value:t}}),value:e.region}):null,g=R({name:U.default.createElement("input",{className:"input",type:"text",value:e.name,onChange:(0,m.default)(r.inputChangeHandler,"name")}),gender:r.renderField({fieldName:"gender",isDisabled:!e.isGenderEditable,options:(e.isGenderEditable?n.userGenders:n.genders).map(function(e){return{label:r.t("gender."+e),value:e}})}),interestedIn:r.renderField({fieldName:"interestedIn",settingName:"interestedIn"}),birthDate:U.default.createElement(re.default,{mask:se.DATE_MASK,value:e.birthDate,placeholder:se.RENDER_DATE_FORMAT,dateFormat:se.RENDER_DATE_FORMAT,onChange:r.birthDateChangeHandler}),country:r.renderDetailSelect({isSearchable:!0,onSelect:(0,m.default)(r.optionSelectHandler,"country",!1),options:i.countries.map(function(e){var t=e.code;return{label:r.t("country."+t),value:t}}),value:e.country,optionRenderer:function(e){return U.default.createElement("span",null,U.default.createElement(q.default,{country:e.value})," ",e.label)}}),region:p,city:e.country?r.renderDetailSelect({isClearable:!0,isSearchable:!0,onInputChange:r.onCityInputChange,onSelect:(0,m.default)(r.optionSelectHandler,"cityId",!1),options:a.length>0?a.map(function(e){return{value:e.id,label:e.name}}):(0,I.default)([u?{value:c,label:u}:null]),value:c,showWithoutOptions:!0}):null,languages:r.renderDetailSelect({isMultiple:!0,onSelect:(0,m.default)(r.optionSelectHandler,"languages",!0),options:i.languages.filter(function(e){var t=e.code;return(0,S.default)(n.languages,t)}).map(function(e){var t=e.code,n=e.native;return{label:r.t("language."+t)+" ("+n+")",value:t}}),value:e.languages}),bodyType:r.renderField({fieldName:"bodyType",gender:e.gender,settingName:"bodyTypes",options:n.bodyTypes.map(function(t){return{label:-1!==(0,P.default)(e,"gender","").toLowerCase().indexOf("female")?r.t("preferenceValues."+t+"ForFemale"):r.t("preferenceValues."+t),value:t}})}),specifics:r.renderField({fieldName:"specifics",isMultiple:!0,settingName:"specifics"}),ethnicity:r.renderField({fieldName:"ethnicity",settingName:"ethnicities"}),hairColor:r.renderField({fieldName:"hairColor",settingName:"hairColors"}),eyeColor:r.renderField({fieldName:"eyeColor",settingName:"eyeColors"}),subculture:r.renderField({fieldName:"subculture",settingName:"subcultures"}),amazonWishlist:r.renderContentForApprovedModel(U.default.createElement("input",{className:"input",type:"text",placeholder:"https://amzn.com/w/stripchatWishlist",value:e.amazonWishlist,onChange:(0,m.default)(r.inputChangeHandler,"amazonWishlist")}))},(0,f.default)(Object.keys(l),function(t,n){return R({},t,o({},n,r.renderContentForApprovedModel(U.default.createElement("input",{className:"input",type:"text",value:e[n],placeholder:be.PLACEHOLDERS_FOR_SOCIAL_LINKS[n],onChange:(0,m.default)(r.inputChangeHandler,n)}))))},{}));return U.default.createElement("div",{className:"details details-edit-mode"},(0,h.default)(g,function(e,t){return r.renderIf(e,function(){var n=s?(0,P.default)(s.details,t,[]):[],a="user_info_editable_"+t+"_"+r.uid;return U.default.createElement("div",{className:"field-row",key:t},U.default.createElement("div",{className:"field-label"},r.t("profile.info.detailsRead."+t)+":"),U.default.createElement("div",{className:"field-value",id:a},e),r.renderIf(n.length,function(){return U.default.createElement("div",{className:"field-tooltip"},U.default.createElement(Q.default,{error:{message:n.join(". ")},tooltipRefExtractor:function(e,t){!r.firstErrorTooltipRef&&t&&(r.firstErrorTooltipRef=t.tooltipRef.parentElement,r.scrollToInvalidField(r.firstErrorTooltipRef))},targetId:a}))}))})}))},l=n,s(r,l)}return l(t,e),M(t,[{key:"getNextState",value:function(e,t){var n=e.hasUserInfoUpdateSucceeded,r=e.hasUserAvatarUpdateSucceeded,a=e.userProfile,o=this.state.userModified,i=this.state,s=i.isDeleteAvatarConfirmationOpen,l=i.isPhotoUploadPopupOpen,u=i.isEditMode,c=(0,P.default)(this.props.userProfile,"id")!==(0,P.default)(a,"id")||!u;return n&&(u=!1),r&&(s=!1,l=!1),{isDeleteAvatarConfirmationOpen:s||!1,isPhotoUploadPopupOpen:l||!1,isEditMode:u||!1,userModified:c?a:o}}},{key:"getSocketEventBindings",value:function(e,t){return e.isLoggedIn?[{subscriptionKey:"image:upload:"+this.props.currentUser.id,callback:this.imageUploadEventHandler}]:[]}},{key:"setStateUserModified",value:function(e,t){var n=this,r=(0,c.default)((0,N.default)(this.state.userModified),e,t),a="country"===e&&this.state.userModified.country!==t;a&&(r.region=null,r.city=null,r.cityId=0),"cityId"===e&&(r.cityId=t?t.value:0,r.city=t?t.label:""),this.setState({userModified:r},function(){a&&n.props.resetCities()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.availableSettings,r=t.config,a=t.error,o=t.isLoadingAvailableSettings,i=t.isUpdatingUserAvatar,s=t.isUpdatingUserInfo,l=t.userProfile,u=this.state,c=u.isDeleteAvatarConfirmationOpen,d=u.isEditMode,f=u.isPhotoUploadPopupOpen,p=u.isImageLoading,m=o,g=i||s,h="user_info_editable_edit_button_"+this.uid;return U.default.createElement("div",{className:"user-info-editable","data-component-name":"UserInfoEditable"},U.default.createElement("div",{className:"edit-button-container"},U.default.createElement(X.default,{id:h,isActive:d,onClick:this.editButtonClickHandler}),this.renderIf(a&&(0,E.default)(a.details),function(){return U.default.createElement(Q.default,{error:a,targetId:h})})),U.default.createElement("h2",null,this.t("profile.myInformation")),this.renderIf(f,function(){return U.default.createElement(ye.default,{avatarSettings:(0,P.default)(n,"avatar"),isPending:m||g,onClose:e.photoUploadPopupCloseHandler,onSave:e.photoUploadPopupSaveHandler})}),this.renderIf(c,function(){return U.default.createElement(Y.default,{onConfirm:e.deleteAvatarConfirm,onCancel:e.deleteAvatarCancel},U.default.createElement("p",null,e.t("profile.deleteAvatar.confirm")))}),U.default.createElement("div",{className:this.c("user-info",{"is-pending":m||g,"is-edit-mode":d})},U.default.createElement("div",{className:"avatar-wrapper"},this.renderIf(l.avatarUrl,function(){return U.default.createElement("a",{className:"delete-button",onClick:e.deleteAvatarClickHandler},U.default.createElement($.default,{img:"close-4"}))}),U.default.createElement(pe.default,{isAwardBadgeVisible:!0,isLoading:p,user:l}),U.default.createElement("div",{className:"avatar-buttons"},U.default.createElement(x.default,{onClick:this.updatePhotoClickHandler,disabled:m},this.t("button.updatePhoto")))),U.default.createElement("div",{className:"info"},U.default.createElement("h2",null,U.default.createElement(ve.default,{user:l,isLevelStatusVisible:!0})),this.renderIf(d,this.renderDetailsEditMode,function(){return U.default.createElement(ge.default,{isOwnProfile:!0,isStatusLevelVisible:!0,config:r,user:R({},l,{birthDate:(0,se.fromRenderToApiFormat)(l.birthDate,{dayOnly:!0})})})}))))}}]),t}(V.default),Ce={riseValidationErrors:de.riseValidationErrors,loadCities:de.loadCities,resetCities:de.resetCities,showModal:B.showModal,updatePrepare:de.updatePrepare,updateProfile:de.updateProfile};Ae.propTypes=R({availableSettings:k.default.object,currentUser:k.default.shape({id:k.default.number}),isLoggedIn:k.default.bool},(0,le.getActionPropTypes)(Ce));var Ie=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.availableSettings,i=o.data,s=o.isPending,l=e.config.data,u=e.profile,c=u.cities,d=u.user,f=(0,_e.getIsUpdating)(e,Oe),p=(0,_e.getIsUpdating)(e,Pe),m=R({},d,{birthDate:(0,se.fromApiToRenderFormat)(d.birthDate)}),g=(0,Se.getSocialLinksForUser)(e,d.id);return{availableSettings:i,cities:c,config:l,currentUser:n,error:(0,_e.getError)(e,Oe)||(0,_e.getError)(e,Pe),hasUserAvatarUpdateSucceeded:(0,_e.getIsSucceeded)(e,Oe),hasUserInfoUpdateSucceeded:(0,_e.getIsSucceeded)(e,Pe),isLoggedIn:r&&!a,isLoadingAvailableSettings:s,isUpdatingUserAvatar:f,isUpdatingUserInfo:p,userProfile:R({},m,g),socialLinks:g}},we=function(e){return(0,F.bindActionCreators)(Ce,e)};t.default=(0,j.connect)(Ie,we)(Ae)},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=r(s),u=n(6),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(3),y=r(E),b=n(43),_=n(1374),S=r(_),O=n(1375),P=r(O),T=n(1377),A=r(T),C=n(38),I=b.UPDATE_TYPES.AVATAR,w={FILE:"renderFileUploadCutModal",WEBCAM:"renderWebcamCutModal"},N=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.errorHandler=function(e){r.setState({cutModalType:null,error:e})},r.photoFileUploadHandler=function(e){return r.props.validateAvatarSource(e).then(function(){r.setState({cutModalType:w.FILE,error:null,photoData:e})})},r.webcamUploadOpenHandler=function(){r.setState({cutModalType:w.WEBCAM,error:null})},r.closeCutModal=function(){r.setState({cutModalType:null,error:null})},r.renderWebcamCutModal=function(){return g.default.createElement(P.default,{settings:r.props.avatarSettings,isPending:r.props.isPending,onClose:r.closeCutModal,onError:r.errorHandler,onSave:r.props.onSave,windowHeight:r.props.windowHeight,windowWidth:r.props.windowWidth})},r.renderFileUploadCutModal=function(){return g.default.createElement(S.default,{settings:r.props.avatarSettings,isPending:r.props.isPending,onClose:r.closeCutModal,onSave:r.props.onSave,photoData:r.state.photoData,windowHeight:r.props.windowHeight,windowWidth:r.props.windowWidth})},r.renderUserPhotoUploadMenu=function(){return g.default.createElement(A.default,{error:r.state.error,fileSizeLimit:(0,c.default)(r.props.avatarSettings,"size"),isPending:r.props.isPending,onClose:r.props.onClose,onPhotoFileUpload:r.photoFileUploadHandler,onTakeSnapshot:r.webcamUploadOpenHandler})},i=n,o(r,i)}return i(t,e),d(t,[{key:"getNextState",value:function(e,t){var n=e.updateError,r=this.state,a=r.cutModalType,o=r.error;return{cutModalType:n?null:a||null,error:n||o}}},{key:"render",value:function(){return(0,l.default)(w,this.state.cutModalType)?this[this.state.cutModalType]():this.renderUserPhotoUploadMenu()}}]),t}(y.default);N.propTypes={avatarSettings:p.default.object,isPending:p.default.bool,onClose:p.default.func.isRequired,onSave:p.default.func.isRequired,updateError:p.default.instanceOf(Error)};var R=function(e){var t=e.ui,n=t.windowWidth,r=t.windowHeight;return{updateError:(0,C.getError)(e,I),windowHeight:r,windowWidth:n}},M=function(e){return(0,v.bindActionCreators)({validateAvatarSource:b.validateAvatarSource},e)};t.default=(0,h.connect)(R,M)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=(r(c),n(0)),f=r(d),p=n(645),m=r(p),g=function(e){function t(){var e,n,r,s;o(this,t);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.imageElementLoadHandler=function(e){if(e){r.applySourceElementStyle(r.state.photoOffset);var t=r.state.photoZoom<r.maxZoomValue;r.state.mayZoomIn!==t&&r.setState({mayZoomIn:t})}},r.renderSourceContainerElement=function(e){var t=e.className,n=a(e,["className"]);return f.default.createElement("img",l({},n,{src:r.props.photoData.dataUrl,onLoad:r.imageElementLoadHandler,className:r.c("photo-cut-canvas","photo-cut-canvas-img",t)}))},s=n,i(r,s)}return s(t,e),u(t,[{key:"sourceDimensions",get:function(){var e=this.sourceElement;return{width:e.naturalWidth,height:e.naturalHeight}}}]),t}(m.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(645),g=r(m),h=n(1376),v=r(h),E=function(e){function t(){var e,n,r,s;o(this,t);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.loadedMetaDataHandler=function(){r.applySourceElementStyle(r.state.photoOffset)},r.webcamRefHandler=function(e){r.sourceElementRefHandler(e),r.webcamComponent=e},r.renderSourceContainerElement=function(e){var t=e.className,n=a(e,["className"]);return p.default.createElement(v.default,l({},n,{className:r.c("photo-cut-canvas","photo-cut-canvas-video",t),onLoadedMetadata:r.loadedMetaDataHandler,onGetUserMediaDenied:r.props.onError,onGetUserMediaNotFound:r.props.onError,ref:r.webcamRefHandler}))},s=n,i(r,s)}return s(t,e),u(t,[{key:"sourceDimensions",get:function(){return this.webcamComponent.getVideoDimensions()}},{key:"maxZoomValue",get:function(){return 0}}]),t}(g.default);E.propTypes={isPending:d.default.bool,onClose:d.default.func.isRequired,onError:d.default.func.isRequired,onSave:d.default.func.isRequired},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),l=r(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},f=n(1),p=r(f),m=n(0),g=r(m),h=n(20),v=n(3),E=r(v),y=n(303),b=n(29),_=r(b),S=function(e){_.default.error("Webcam module error: ",e)},O=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.videoElementRefHandler=function(e){r.videoElement=e},r.getVideoDimensions=function(){var e=r,t=e.videoElement;return{width:t.videoWidth,height:t.videoHeight}},r.loadedMetaDataHandler=function(e){r.props.onLoadedMetadata&&r.props.onLoadedMetadata(e)},i=n,o(r,i)}return i(t,e),c(t,[{key:"getDefaultState",value:function(){return u({},d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{hasUserMedia:!1})}},{key:"componentDidMount",value:function(){t.mountedInstances.add(this),this.state.hasUserMedia||t.userMediaRequested||this.requestUserMedia(),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){t.mountedInstances.delete(this),0===t.mountedInstances.size&&this.state.hasUserMedia&&((0,y.stopStream)(this.stream,!0),window.URL.revokeObjectURL(this.state.src)),t.userMediaRequested=!1,d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"requestUserMedia",value:function(){var e=this;(0,y.requestUserMedia)({video:!0,audio:this.props.audio}).then(function(e){return t.mountedInstances.forEach(function(t){return t.handleUserMedia(e)}),null}).catch(h.OperationalError,function(t){e.props.onGetUserMediaDenied(t)}).catch(function(t){e.setState({hasUserMedia:!1}),"PermissionDeniedError"===t.name||"SecurityError"===t.name?e.props.onGetUserMediaDenied(t):"NotFoundError"===t.name?e.props.onGetUserMediaNotFound(t):_.default.error("Unknown error",t)}),t.userMediaRequested=!0}},{key:"handleUserMedia",value:function(e){this.stream=e,this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(e)}),this.props.onUserMedia()}},{key:"render",value:function(){return g.default.createElement("video",{autoPlay:!0,className:this.props.className,onLoadedMetadata:this.loadedMetaDataHandler,ref:this.videoElementRefHandler,src:this.state.src,"data-component-name":"Webcam"})}}]),t}(E.default);O.mountedInstances=new Set,O.hasUserMediaRequested=!1,O.propTypes={audio:p.default.bool,className:p.default.string,onGetUserMediaDenied:p.default.func,onGetUserMediaNotFound:p.default.func,onLoadedMetadata:p.default.func,onUserMedia:p.default.func},O.defaultProps={audio:!1,onGetUserMediaDenied:S,onGetUserMediaNotFound:S,onLoadedMetadata:l.default,onUserMedia:l.default},t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(3),v=r(h),E=n(199),y=r(E),b=n(605),_=r(b),S=n(10),O=r(S),P=n(8),T=r(P),A=n(22),C=r(A),I=n(5),w=n(284),N=n(303),R=n(43),M=R.UPDATE_TYPES.AVATAR,L=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.fileInput=null,r.fileInputChangeHandler=function(e){var t=e.target,n=r.props.onPhotoFileUpload;if(t.files.length){var a=t.files[0];r.setState({isPhotoUploadFail:!1,isPhotoUploadPending:!0},function(){(0,w.getFileData)(a).then(function(e){n(e).then(function(){r.setState({isPhotoUploadFail:!1,isPhotoUploadPending:!1})}).catch(function(){r.setState({isPhotoUploadFail:!0,isPhotoUploadPending:!1})})})})}},r.modalCloseHandler=function(){r.isPhotoUploadPending||r.props.onClose()},r.takeSnapshotClickHandler=function(){r.props.updatePrepare(M),r.props.onTakeSnapshot&&r.props.onTakeSnapshot()},r.browseFileClickHandler=function(e){r.props.updatePrepare(M),r.fileInput.click(e)},r.fileInputRefHandler=function(e){r.fileInput=e},i=n,o(r,i)}return i(t,e),l(t,[{key:"getDefaultState",value:function(){return s({},u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultState",this).call(this),{isPhotoUploadFail:!1,isPhotoUploadPending:!1,isGetUserMediaSupported:(0,N.isGetUserMediaSupported)()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,r=t.fileSizeLimit,a=t.isPending,o=t.onClose,i=this.state.isPhotoUploadPending;return p.default.createElement(y.default,{backgroundColor:null,className:this.c("user-photo-upload-menu-modal",{pending:a}),minHeight:null,minWidth:null,onClose:o,title:this.t("profile.photoUpload.popupTitle"),titlePosition:"outside","data-component-name":"UserPhotoUploadMenu"},p.default.createElement("div",{className:"panes"},p.default.createElement("div",{className:this.c("pane upload-photo",{"is-pending":i})},this.renderIf(i,function(){return p.default.createElement(C.default,{size:150,isCentered:!0})}),p.default.createElement("div",{className:"pane-icon"},p.default.createElement(T.default,{img:"computer"})),p.default.createElement("div",{className:"pane-text"},this.t("profile.photoUpload.uploadPhotoText")),p.default.createElement("div",{className:"pane-button"},p.default.createElement(O.default,{onClick:this.browseFileClickHandler,size:"large",style:"primary"},this.t("button.browseFile")),p.default.createElement("input",{accept:"image/*",onChange:this.fileInputChangeHandler,type:"file",ref:this.fileInputRefHandler}))),this.renderIf(this.state.isGetUserMediaSupported,function(){return p.default.createElement("div",{className:"pane take-snapshot"},p.default.createElement("div",{className:"pane-icon"},p.default.createElement(T.default,{img:"broadcast"})),p.default.createElement("div",{className:"pane-text"},e.t("profile.photoUpload.takeSnapshotText")),p.default.createElement("div",{className:"pane-button"},p.default.createElement(O.default,{onClick:e.takeSnapshotClickHandler,size:"large",style:"primary"},e.t("button.takeSnapshot"))))})),this.renderIf(n,function(){return p.default.createElement("div",{className:"error"},p.default.createElement(_.default,{error:n,fieldName:"avatar"}))}),this.renderIf(r,function(){return p.default.createElement("div",{className:"limits-description"},e.t("profile.photoUpload.limitsDescription",{fileSizeLimit:Math.floor(r/I.BYTES_IN_MEGABYTE)}))}))}}]),t}(v.default);L.propTypes={error:d.default.object,fileSizeLimit:d.default.number,isPending:d.default.bool,onClose:d.default.func.isRequired,onPhotoFileUpload:d.default.func.isRequired,onTakeSnapshot:d.default.func.isRequired,updatePrepare:d.default.func.isRequired};var k=function(e){return(0,g.bindActionCreators)({updatePrepare:R.updatePrepare},e)};t.default=(0,m.connect)(null,k)(L)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=n(76),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(15),p=r(f),m=n(1),g=r(m),h=n(0),v=r(h),E=n(2),y=n(4),b=n(3),_=r(b),S=n(10),O=r(S),P=n(58),T=r(P),A=n(40),C=r(A),I=n(8),w=r(I),N=n(43),R=n(38),M=N.UPDATE_TYPES.STATUS,L=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.changeStatusClickHandler=function(){r.props.updatePrepare(M),r.setState({isEditMode:!0})},r.submitHandler=function(e){e.preventDefault();var t=(0,c.default)(r.inputRef.value);t===r.props.user.offlineStatus?r.setState({isEditMode:!1}):r.props.updateProfile({offlineStatus:t},M)},i=n,o(r,i)}return i(t,e),d(t,[{key:"getNextState",value:function(e,t){var n=e.isSucceeded;return{isEditMode:!(e.user.id!==this.props.user.id)&&!n&&this.state.isEditMode,maxLength:(0,l.default)(e.availableSettings,"offlineStatus.maxLength",100)}}},{key:"renderEditMode",value:function(){var e=this,t=this.props.user,n=t.offlineStatus,r=t.updateError,a=this.state.maxLength,o="user_offline_status_save_button";return v.default.createElement("div",{className:this.className},v.default.createElement("div",{className:"title"},this.t("profile.offlineStatus.title")),v.default.createElement("form",{onSubmit:this.submitHandler},v.default.createElement(C.default,{autoFocus:!0,defaultValue:n,maxLength:a,ref:function(t){e.inputRef=t}}),v.default.createElement(O.default,{id:o,size:"medium",style:"apply",type:"submit"},this.t("button.save")),this.renderIf(r,function(){return v.default.createElement(T.default,{error:r,fieldName:"offlineStatus",targetId:o})})))}},{key:"render",value:function(){var e=this;if(this.state.isEditMode)return this.renderEditMode();var t=this.props.user,n=t.offlineStatus,r=t.offlineStatusUpdatedAt;if(!n&&!this.isEditable)return null;var a=new Date,o=new Date(r),i=o>a?a:o;return v.default.createElement("div",{className:this.className,"data-component-name":"UserOfflineStatus"},v.default.createElement(w.default,{img:"status"}),this.renderIf(n,function(){return v.default.createElement("span",{className:"status-text"},n)}),this.renderIf(n&&i,function(){return v.default.createElement("span",{className:"status-updated-at"},(0,p.default)(i).fromNow())}),this.renderIf(this.isEditable,function(){return v.default.createElement(O.default,{className:"btn-change-offline-status",onClick:e.changeStatusClickHandler,size:"small"},e.t("button.changeOfflineStatus"))}))}},{key:"isEditable",get:function(){return this.props.isLoggedIn&&this.props.currentUser.id===this.props.user.id}},{key:"className",get:function(){return this.c("user-offline-status",this.props.className,{"edit-mode":this.state.isEditMode,pending:this.props.isUpdating})}}]),t}(_.default);L.propTypes={availableSettings:g.default.object,className:g.default.string,currentUser:g.default.object,isLoggedIn:g.default.bool,isSucceeded:g.default.bool,isUpdating:g.default.bool,updateError:g.default.instanceOf(Error),updatePrepare:g.default.func.isRequired,user:g.default.object.isRequired};var k=function(e){var t=e.availableSettings.data,n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut;return{availableSettings:t,currentUser:r,isLoggedIn:a&&!o,isUpdating:(0,R.getIsUpdating)(e,M),isSucceeded:(0,R.getIsSucceeded)(e,M),updateError:(0,R.getError)(e,M)}},D=function(e){return(0,y.bindActionCreators)({updatePrepare:N.updatePrepare,updateProfile:N.updateProfile},e)};t.default=(0,E.connect)(k,D)(L)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),c=r(u),d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(28),E=n(9),y=n(3),b=r(y),_=n(239),S=r(_),O=n(5),P=n(7),T=n(233),A=n(190),C=n(609),I=r(C),w=n(191),N=n(41),R=n(100),M=n(38),L=n(166),k=w.SEXFLIX_SUPPORTED_FORMATS.join(", "),D=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={isEditMode:!1},r.propsUpdateToActionsMap=[{update:function(e,t){return(0,L.hasPreUploadErrorReseted)(e,t)||(0,L.hasUploadErrorReseted)(e,t)||(0,L.hasVideoProcessingFailReseted)(e,t)},action:function(e){e.isUploading||r.uploadVideoClickHandler()}},{update:N.currentUserHasChanged,action:function(){return r.setStateIfModified({isEditMode:!1})}},{update:R.hasJustBecomeFriends,action:function(e){return(0,e.fetchUserVideos)(e.user.id)}}],r.fileInputRefHandler=function(e){r.fileInputRef=e},r.editButtonClickHandler=function(){var e=!r.state.isEditMode;e||r.props.remove(),r.setState({isEditMode:e})},r.uploadVideoClickHandler=function(){if(!r.props.isApprovedModel)return void r.props.errorNotification(r.t("serverErrors.video.uploaderRestriction"));r.fileInputRef.value="",r.fileInputRef.click(),r.props.cancelDeletePreparations(),r.setStateIfModified({isEditMode:!1})},r.tryAgainClickHandler=function(e){var t=e.currentTarget.dataset.videoId;r.props.remove(Number(t)),r.uploadVideoClickHandler()},r.settingsClickHandler=function(e){var t=e.currentTarget.dataset.videoId;e.preventDefault(),e.stopPropagation(),r.props.edit(Number(t))},r.deleteControlClickHandler=function(e){var t=e.currentTarget.dataset.videoId;e.preventDefault(),e.stopPropagation(),r.props.toggleVideoDeleting(Number(t))},r.thumbClickHandler=function(e){var t=e.currentTarget.dataset,n=t.hasFailedProcessing,a=t.isProcessing,o=t.videoId,i=r.props,s=i.isOwnProfile,l=i.user;r.state.isEditMode||n||a||r.props.showModal(O.MODAL_TYPES.WATCH_VIDEO,{videoId:Number(o),isOwnProfile:s,user:l})},r.fileInputChangeHandler=function(e){var t=e.target.files,n=t[0];r.props.startUploadProcess(n)},i=n,o(r,i)}return i(t,e),l(t,[{key:"getSocketEventBindings",value:function(e,t){var n=e.isOwnProfile,r=e.user,a=[{subscriptionKey:"videoUpdated:"+r.id}];return n||a.push({subscriptionKey:"videoDeleted:"+r.id}),a}},{key:"renderHeader",value:function(){var e=this.props.isOwnProfile,t=this.state.isEditMode;return m.default.createElement("div",{className:"user-videos-header"},m.default.createElement("h2",null,this.t(e?"myVideos":"videosTitle")),this.renderIf(e,m.default.createElement(S.default,{isActive:t,onClick:this.editButtonClickHandler})))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.deletedVideoIds,r=e.isOwnProfile,a=e.isVideosAvailable,o=e.videos,i=e.user,s=this.state.isEditMode;return a?m.default.createElement("div",{className:this.c(t,"user-videos"),"data-component-name":"UserVideos"},this.renderHeader(),this.renderIf(r,m.default.createElement("input",{className:"file-input",type:"file",accept:k,onChange:this.fileInputChangeHandler,ref:this.fileInputRefHandler})),m.default.createElement(I.default,{deletedVideoIds:n,user:i,videos:o,isEditMode:s,isOwnProfile:r,isScrollAlwaysVisible:!0,deleteClickHandler:this.deleteControlClickHandler,recoveryClickHandler:this.deleteControlClickHandler,settingsClickHandler:this.settingsClickHandler,thumbClickHandler:this.thumbClickHandler,tryAgainClickHandler:this.tryAgainClickHandler,uploaderClickHandler:this.uploadVideoClickHandler})):null}}]),t}(b.default),U={cancelDeletePreparations:T.cancelDeletePreparations,edit:T.edit,errorNotification:v.error,fetchUserVideos:A.fetchUserVideos,remove:T.remove,showModal:E.showModal,startUploadProcess:T.startUploadProcess,toggleVideoDeleting:T.toggleVideoDeleting};D.propTypes=s({currentUser:f.default.object,deletedVideoIds:f.default.instanceOf(c.default.Set),isUploading:f.default.bool.isRequired,isVideosAvailable:f.default.bool.isRequired,preUploadError:f.default.object,uploadError:f.default.object,user:f.default.object.isRequired,videos:f.default.array.isRequired},(0,P.getActionPropTypes)(U));var j=function(e,t){var n=t.isOwnProfile,r=e.auth.currentUser,a=e.myVideos,o=a.deletedVideoIds,i=a.hasEditingVideoProcessingFailed,s=a.isPending,l=a.isUploading,u=a.preUploadError,c=a.uploadError,d=e.userVideos.isPending,f=(0,L.getVideosConsideringOwner)(e,t),p=n?!s&&r.isModel:!d&&f.length>0;return{currentUser:r,deletedVideoIds:o,hasEditingVideoProcessingFailed:i,isApprovedModel:(0,M.getIsApprovedModel)(e),isMyFriend:(0,R.getIsMyFriend)(e,t.user.id),isUploading:l,isVideosAvailable:p,preUploadError:u,uploadError:c,videos:f}},F=function(e){return(0,h.bindActionCreators)(U,e)};t.default=(0,g.connect)(j,F)(D)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(23),v=r(h),E=n(22),y=r(E),b=n(54),_=n(19),S=n(7),O=n(228),P=n(1381),T=r(P),A=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.loadPageData()}},{key:"renderReady",value:function(){var e=this.props,t=e.isLoading,n=e.loadError;return t?p.default.createElement(y.default,{isCentered:!0,"data-component-name":"TranslationsPage"}):n?p.default.createElement("div",{className:"text-center","data-component-name":"TranslationsPage"},n.message):p.default.createElement("div",{className:"page translations-page","data-component-name":"TranslationsPage"},p.default.createElement("div",{className:"page-header"},p.default.createElement("h1",null,this.t("translations.title"))),p.default.createElement(T.default,null))}}]),t}(v.default);A.checkAccess=_.redirectNotTranslatorToLoginOrIndex;var C={loadPageData:O.loadPageData};A.propTypes=s({isLoading:d.default.bool.isRequired,loadError:d.default.instanceOf(b.ApiError)},(0,S.getActionPropTypes)(C));var I=function(e){var t=e.translator;return{isLoading:t.isLoading,loadError:t.loadError}},w=function(e){return(0,g.bindActionCreators)(C,e)};t.default=(0,m.connect)(I,w)(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(169),l=r(s),u=n(30),c=r(u),d=n(84),f=r(d),p=n(6),m=r(p),g=n(371),h=r(g),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},b=n(18),_=r(b),S=n(1),O=r(S),P=n(0),T=r(P),A=n(2),C=n(4),I=n(3),w=r(I),N=n(40),R=r(N),M=n(628),L=r(M),k=n(39),D=r(k),U=n(7),j=n(228),F=n(1382),B=r(F),H=n(1383),V=r(H),G=n(1384),x=r(G),W=n(1385),Y=r(W),K=n(293),q=n(38),z={},X=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={tooltipMessageKey:""},r.propsUpdateToActionsMap=[{update:K.hasLocaleSensitivePropsChanged,action:function(e){return r.localeSensitivePropsChangeHandler(e)}}],r.localeSensitivePropsChangeHandler=function(e){var t=e.currentUser.isI18nAdmin,n=e.userProfile.translatorLanguages,a=e.selectedLocale,o=t||1!==n.length?a:n[0];r.props.updateSelectedLocale(o)},r.languageSelectHandler=function(e){r.saveMessages(),r.props.updateSelectedLocale(e.value)},r.messageChangeHandler=function(e,t,n){(0,m.default)(z,e,!1)!==t&&((0,l.default)(z,e,t),r[e+"Ref"]=n)},r.saveClickHandler=function(){r.saveMessages()},r.selectFileButtonClickHandler=function(e){r["fileInput-"+e+"Ref"].click()},r.fileInputChangeHandler=function(e,t){var n=(0,m.default)(t.target,"files[0]",null);r.props.uploadScreenshot(e,n)},r.screenshotHoverHandler=function(e){r.setState({tooltipMessageKey:e})},r.screenshotUnhoverHandler=function(){r.setState({tooltipMessageKey:""})},i=n,o(r,i)}return i(t,e),E(t,[{key:"componentDidMount",value:function(){z={},y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"saveMessages",value:function(){var e=this,t=this.props,n=t.messages,r=t.saveChanges,a=t.selectedLocale,o=[];(0,h.default)((0,m.default)(z,a,{}),function(t,r){if(t){var i=a+"."+r;(0,l.default)(n,i,e[i+"Ref"].value),o.push(r)}}),o.length&&r(n,z)}},{key:"renderMessages",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.filteredMessagesKeys,a=t.messages,o=t.screenshots,i=t.selectedLocale,s=r.map(function(t){var r=t.replace(/#/g,".");return T.default.createElement("div",{key:t,className:"row"},T.default.createElement("div",{className:"keys-col text-center message-key"},T.default.createElement(R.default,{disabled:!0,value:r})),T.default.createElement("div",{className:"english-col"},T.default.createElement("div",{className:"message_example",key:"en."+t},(0,m.default)(a,"en."+t,""))),T.default.createElement("div",{className:"translations-col"},e.renderIf(i,function(){var n=i+"."+t;return T.default.createElement(x.default,{keyPath:n,defaultValue:(0,m.default)(a,n,""),messageChangeHandler:e.messageChangeHandler})})),T.default.createElement("div",{className:"buttons-col text-center"},e.renderIf((0,f.default)(o,r),function(){return T.default.createElement("img",{id:"screenshot-"+t,className:"screenshot",src:(0,m.default)(o,r),onMouseOver:(0,c.default)(e.screenshotHoverHandler,t),onMouseOut:e.screenshotUnhoverHandler,alt:"Screenshot"})}),e.renderIf(n.isI18nAdmin||n.isI18nImages,function(){return T.default.createElement("div",{className:"button"},T.default.createElement("button",{className:"btn btn-small btn-apply",onClick:(0,c.default)(e.selectFileButtonClickHandler,t)},e.t("translations.uploadScreenshot")),T.default.createElement("input",{ref:function(n){e["fileInput-"+t+"Ref"]=n},type:"file",className:"input",onChange:(0,c.default)(e.fileInputChangeHandler,t)}))})))});return T.default.createElement(L.default,{rows:200,defaultPageSize:200},_.default.Seq(s))}},{key:"render",value:function(){var e=this.props,t=e.languages,n=e.screenshots,r=e.selectedLocale,a=e.userProfile,o=this.state.tooltipMessageKey;return T.default.createElement("div",{className:"translator","data-component-name":"Translator"},T.default.createElement(Y.default,null),T.default.createElement(B.default,null),T.default.createElement(V.default,{languages:t,languageSelectHandler:this.languageSelectHandler,saveClickHandler:this.saveClickHandler,selectedLocale:r,userProfile:a}),this.renderMessages(),this.renderIf(o,function(){return T.default.createElement(D.default,{placement:"left",targetId:"screenshot-"+o},T.default.createElement("img",{src:(0,m.default)(n,o.replace(/#/g,".")),alt:"screenshot"}))}))}}]),t}(w.default),Z={saveChanges:j.saveChanges,updateSelectedLocale:j.updateSelectedLocale,uploadScreenshot:j.uploadScreenshot};X.propTypes=v({filteredMessagesKeys:O.default.arrayOf(O.default.string),languages:O.default.arrayOf(O.default.object).isRequired,messages:O.default.objectOf(O.default.object).isRequired,screenshots:O.default.oneOfType([O.default.object,O.default.array]).isRequired,selectedLocale:O.default.string.isRequired,userProfile:O.default.shape({id:O.default.number}).isRequired},(0,U.getActionPropTypes)(Z));var Q=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.translator,i=o.languages,s=o.messages,l=o.screenshots,u=o.selectedLocale;return{currentUser:n,filteredMessagesKeys:o.filteredMessagesKeys,isLoggedIn:r&&!a,languages:i,messages:s,screenshots:l,selectedLocale:u,userProfile:(0,q.getCurrentUserProfile)(e)}},J=function(e){return(0,C.bindActionCreators)(Z,e)};t.default=(0,A.connect)(Q,J)(X)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(30),o=r(a),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),l=r(s),u=n(0),c=r(u),d=n(2),f=n(4),p=n(5),m=n(10),g=r(m),h=n(40),v=r(h),E=n(7),y=n(228),b=function(e){var t=function(t,n){var r="onlyComposite"===t?n.target.checked:n.target.value;e.filtersChange({field:t,value:r})},n=function(t,n){return e.sortingChange({field:t,value:n.target.checked})},r=function(e,t){t.keyCode===p.KEY_CODES.enter&&e()},a=(0,o.default)(t,"keyValue"),i=(0,o.default)(t,"phrase"),s=(0,o.default)(n,"sortByScreenshots"),l=(0,o.default)(t,"onlyComposite"),u=(0,o.default)(e.applyFilter,"keyValue"),d=(0,o.default)(e.applyFilter,"phrase"),f=(0,o.default)(r,u),m=(0,o.default)(r,d),h=e.keyValue,E=e.onlyComposite,y=e.phrase,b=e.sortByScreenshots;return c.default.createElement("div",{className:"row filter-row","data-component-name":"TranslatorFilters"},c.default.createElement("div",{className:"filter-inputs"},c.default.createElement("div",null,c.default.createElement(v.default,{className:"input",onChange:a,onKeyDown:f,placeholder:"Filter by key",type:"text",value:h}),c.default.createElement(g.default,{onClick:u},"Submit")),c.default.createElement("div",null,c.default.createElement(v.default,{className:"input",onChange:i,onKeyDown:m,placeholder:"Filter by phrase",type:"text",value:y}),c.default.createElement(g.default,{onClick:d},"Submit"))),c.default.createElement("div",null,c.default.createElement("div",null,c.default.createElement("input",{checked:b,className:"checkbox",id:"sortByScreenshots_checkbox",onChange:s,type:"checkbox"}),c.default.createElement("label",{htmlFor:"sortByScreenshots_checkbox"},"Show rows without screenshots first")),c.default.createElement("div",null,c.default.createElement("input",{checked:E,className:"checkbox",id:"onlyCompositeMsgs_checkbox",onChange:l,type:"checkbox"}),c.default.createElement("label",{htmlFor:"onlyCompositeMsgs_checkbox"},"Show composite only messages"))))},_={applyFilter:y.applyFilter,filtersChange:y.filtersChange,sortingChange:y.sortingChange};b.propTypes=i({keyValue:l.default.string,phrase:l.default.string,sortByScreenshots:l.default.bool,onlyComposite:l.default.bool},(0,E.getActionPropTypes)(_)),b.defaultProps={keyValue:"",phrase:"",sortByScreenshots:!1,onlyComposite:!1};var S=function(e){var t=e.translator,n=t.filters,r=n.keyValue,a=n.phrase,o=n.onlyComposite;return{keyValue:r,phrase:a,sortByScreenshots:t.sorters.sortByScreenshots,onlyComposite:o}},O=function(e){return(0,f.bindActionCreators)(_,e)};t.default=(0,d.connect)(S,O)(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(3),g=r(m),h=n(92),v=r(h),E=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.scrollListener=function(){var e=r,t=e.headerWrapperRef,n=t.getBoundingClientRect().top;r.setState({isFixed:n<=0})},i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.headerRowRef;this.size={width:e.clientWidth,height:e.clientHeight},this.registerEventListener(window,"scroll",this.scrollListener),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.languages,r=t.languageSelectHandler,a=t.saveClickHandler,o=t.selectedLocale,i=t.userProfile,s=this.props.currentUser.isI18nAdmin,l=i.translatorLanguages,u=this.state.isFixed,c=[];n.forEach(function(e){(s||-1!==l.indexOf(e.locale))&&c.push({label:e.native+" ("+e.name+")",value:e.locale})});var d=this.size?{height:this.size.height}:{};return f.default.createElement("div",{ref:function(t){e.headerWrapperRef=t},className:this.c("page-header",{fixed:u}),style:d,"data-component-name":"TranslatorHeader"},f.default.createElement("div",{className:"translator-header"},f.default.createElement("div",{ref:function(t){e.headerRowRef=t},className:"row"},f.default.createElement("div",{className:"keys-col text-center"},this.t("translations.messageKey")),f.default.createElement("div",{className:"english-col text-center"},"English"),f.default.createElement("div",{className:"translations-col"},f.default.createElement(v.default,{isSearchable:!1,isMultiple:!1,placeholder:this.t("translations.selectLanguage"),options:c,value:o,onSelect:r,isDisabled:!s&&l.length<2})),f.default.createElement("div",{className:"buttons-col text-center"},f.default.createElement("div",{className:"button"},f.default.createElement("button",{className:"btn btn-large btn-apply",onClick:a},this.t("translations.save")))))))}}]),t}(g.default);E.propTypes={languageSelectHandler:c.default.func,saveClickHandler:c.default.func,languages:c.default.array,selectedLocale:c.default.string,userProfile:c.default.object.isRequired};var y=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut;return{currentUser:n,isLoggedIn:r&&!a}};t.default=(0,p.connect)(y)(E)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(46),l=r(s),u=n(30),c=r(u),d=n(11),f=r(d),p=n(47),m=r(p),g=n(36),h=r(g),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=n(1),y=r(E),b=n(0),_=r(b),S=n(3),O=r(S),P=n(58),T=r(P),A=n(383),C=r(A),I=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.rules=[function(e){return e.split("{").length!==e.split("}").length&&n.t("translations.errors.countOfBraces")},function(e){return!(0,l.default)(Array.from(e),function(e,t){if(!e.correct)return e;switch(t){case"{":!0===e.opened?e.correct=!1:e.opened=!0;break;case"}":e.opened?e.opened=!1:e.correct=!1}return e},{opened:void 0,correct:!0}).correct&&n.t("translations.errors.orderOfBraces")}],n.validateValue=function(){var e=n.inputRef.getWrappedInstance().value,t=(0,m.default)((0,f.default)(n.rules,function(t){return t(e)}));t.length>1&&(t=(0,f.default)(t,function(e){return"&bull;&nbsp;"+e})),n.setState(function(){return{error:t.join("<br>\n")}})},n.messageChangeHandler=function(e){var t=n.props,r=t.defaultValue,a=t.messageChangeHandler,o=n.inputRef.getWrappedInstance(),i=o.value;n.validateValue(),a(e,r!==i,o)},n.state={error:""},n.validateValue=(0,h.default)(n.validateValue,300),n}return i(t,e),v(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.keyPath,r=t.defaultValue,a=this.state.error;return _.default.createElement("div",{"data-component-name":"TranslatorInput"},_.default.createElement(C.default,{className:"message_translate "+(a?"error":""),id:"id_"+n,key:n,ref:function(t){e.inputRef=t},defaultValue:r,onChange:(0,c.default)(this.messageChangeHandler,n)}),this.renderIf(a,function(){return _.default.createElement(T.default,{targetId:"id_"+n,placement:"left",isForceVisible:!0,error:{message:a}})}))}}]),t}(O.default);I.propTypes={keyPath:y.default.string.isRequired,messageChangeHandler:y.default.func,defaultValue:y.default.string},I.defaultProps={defaultValue:"",messageChangeHandler:function(){}},t.default=I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),d=r(c),f=n(1),p=r(f),m=n(2),g=n(3),h=r(g),v=n(8),E=r(v),y=n(293),b=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.toggleStatisticsClickHandler=function(){r.setState({isOpen:!r.state.isOpen})},r.renderRow=function(e){var t=e.language,n=e.keysCount,r=e.translatedKeysCount,a=e.translatedWordsCount;return t?d.default.createElement("tr",{key:t},d.default.createElement("td",null,t),d.default.createElement("td",null,n),d.default.createElement("td",null,r),d.default.createElement("td",null,a)):null},r.renderHeader=function(){return d.default.createElement("tr",null,d.default.createElement("th",null,r.t("translations.statistics.language")),d.default.createElement("th",null,r.t("translations.statistics.keysCount")),d.default.createElement("th",null,r.t("translations.statistics.translatedKeysCount")),d.default.createElement("th",null,r.t("translations.statistics.translatedWordsCount")))},r.renderTable=function(){var e=r.props.translatedStatistics;return d.default.createElement("table",{className:"translated-statistics-table"},d.default.createElement("thead",null,r.renderHeader()),d.default.createElement("tbody",null,(0,l.default)(e,r.renderRow)))},i=n,o(r,i)}return i(t,e),u(t,[{key:"render",value:function(){var e=this.state.isOpen;return d.default.createElement("div",{className:this.c("translated-statistics",{open:e}),"data-component-name":"TranslatorStatistics"},d.default.createElement("div",{className:"translated-statistics-header",onClick:this.toggleStatisticsClickHandler},this.t("translations.statistics.title"),d.default.createElement("span",{className:"dropdown-arrow"},d.default.createElement(E.default,{img:"show-more"}))),this.renderIf(e,this.renderTable()))}}]),t}(h.default);b.propTypes={translatedStatistics:p.default.arrayOf(p.default.shape({language:p.default.string,keysCount:p.default.number,translatedKeysCount:p.default.number,translatedWordsCount:p.default.number}))};var _=function(e){return{translatedStatistics:(0,y.getTranslatedStatistics)(e)}};t.default=(0,m.connect)(_)(b)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(23),p=r(f),m=n(8),g=r(m),h=n(10),v=r(h),E=n(19),y=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.route.routeParams.accountState,t=this.context.store.getState().config.whiteLabelId;return d.default.createElement("div",{className:"account-disabled-page container","data-component-name":"AccountDisabledPage"},d.default.createElement(g.default,{img:"account-disabled",size:100}),d.default.createElement("div",{className:"account-disabled-header"},this.t("accountDisabledPage."+e+".title")),d.default.createElement("div",{className:"account-disabled-description"},this.t("accountDisabledPage."+e+"."+(t?"description_xh":"description"))),d.default.createElement("div",{className:"button-wrapper"},d.default.createElement(v.default,{to:"/support",type:"link"},this.t("accountDisabledPage.contactSupport"))))}}]),t}(p.default);y.checkAccess=E.redirectLoggedInToIndex,t.default=y,y.propTypes={accountState:u.default.oneOf(["blocked","deleted"])}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmEmailPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(31),h=n(4),v=n(23),E=r(v),y=n(10),b=r(y),_=n(8),S=r(_),O=n(22),P=r(O),T=n(7),A=n(83),C=r(A),I=n(41),w=n(196),N=n(1388),R=r(N),M=function(e,t){return e.shouldShowSetPassword&&!t.shouldShowSetPassword},L=t.ConfirmEmailPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.confirmEmail",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:["match.params.confirmationKey","match.params.userId"],action:function(e){var t=e.match.params,n=t.userId,r=t.confirmationKey;(0,e.performEmailConfirmation)(n,r)}},{update:I.currentUserHasLoggedOut,action:function(e){(0,e.routerPush)("/")}},{update:M,action:function(){return C.default.reset()}}]),r.renderResult=function(){var e=r.props,t=e.confirmationType,n=e.hasChangedPassword,a=e.shouldShowSetPassword;if(!t)return null;var o=n?"passwordChanged":t;return p.default.createElement("div",{className:"confirm-email-actions"},p.default.createElement("div",{className:t},p.default.createElement(S.default,{img:t,size:100})),p.default.createElement("div",{className:"confirm-email-description"},r.t("confirmEmail."+o)),r.renderIf(a,p.default.createElement(R.default,null),p.default.createElement(b.default,{size:"medium",type:"link",style:"auth-banner",to:"/",replace:!0},r.t("confirmEmail.goToMainPage"))))},s=n,i(r,s)}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props.isConfirmingEmail;return p.default.createElement("div",{className:"page confirm-email-page","data-component-name":"ConfirmEmailPage"},this.renderIf(e,p.default.createElement(P.default,{isCentered:!0}),this.renderResult))}}]),t}(E.default),k={performEmailConfirmation:w.confirmEmail,routerPush:g.push};L.propTypes=l({isConfirmingEmail:d.default.bool,confirmationType:d.default.string,hasChangedPassword:d.default.bool,shouldShowSetPassword:d.default.bool,match:d.default.shape({params:d.default.shape({confirmationKey:d.default.string.isRequired,userId:d.default.string.isRequired}).isRequired}).isRequired},(0,T.getActionPropTypes)(k));var D=function(e){var t=e.auth,n=t.isLoggedIn,r=t.isLoggingOut,a=t.currentUser,o=e.confirmEmail;return{confirmationType:o.confirmationType,currentUser:a,hasChangedPassword:o.hasChangedPassword,isConfirmingEmail:o.isConfirmingEmail,shouldShowSetPassword:o.shouldShowSetPassword,isLoggedIn:n&&!r}},U=function(e){return(0,h.bindActionCreators)(k,e)};t.default=(0,m.connect)(D,U)(L)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(76),l=r(s),u=n(6),c=r(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),g=n(0),h=r(g),v=n(2),E=n(24),y=n(4),b=n(3),_=r(b),S=n(10),O=r(S),P=n(17),T=r(P),A=n(58),C=r(A),I=n(40),w=r(I),N=n(5),R=n(7),M=n(196),L=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.setPasswordClickHandler=function(e){e.preventDefault();var t=(0,l.default)((0,c.default)(r.passwordRef,"value","")),n=(0,l.default)((0,c.default)(r.confirmPasswordRef,"value",""));r.props.changePassword(t,n)},r.renderItemField=function(e){var t=r.props,n=t.error,a=t.isUpdating,o=(0,c.default)(n,"details",{});return h.default.createElement("div",{className:"form-field"},h.default.createElement("label",{className:"form-label",htmlFor:e},r.t("confirmEmail.form.labels."+e)),h.default.createElement("span",{className:"form-input"},h.default.createElement(w.default,{type:"password",name:e,id:e,ref:function(t){r[e+"Ref"]=t},disabled:a,onChange:r.changeHandler,onKeyDown:r.submitKeyDownHandler,maxLength:N.DEFAULT_MAX_INPUT_LENGTH}),r.renderIf(o.type===e,function(){return h.default.createElement(C.default,{error:{message:o.text},targetId:e})})))},i=n,o(r,i)}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isUpdating;if(!t)return null;var r=t.username;return h.default.createElement("form",{className:"set-password","data-component-name":"SetPassword"},h.default.createElement("div",{className:"set-password-title"},this.t("confirmEmail.form.title")),h.default.createElement("div",{className:"set-password-description"},h.default.createElement(T.default,{elements:{link:h.default.createElement(E.Link,{to:"/settings"})},messageId:"confirmEmail.form.description"})),h.default.createElement("div",{className:"set-password-inputs"},h.default.createElement(w.default,{type:"text",name:"login",id:"login",value:r,style:{display:"none"}}),this.renderItemField("password"),this.renderItemField("confirmPassword")),h.default.createElement("div",{className:"set-password-controls"},h.default.createElement(O.default,{disabled:n,size:"medium",style:"apply",type:"submit",onClick:this.setPasswordClickHandler},this.t("confirmEmail.form.buttons.setPassword")),h.default.createElement(O.default,{disabled:n,size:"medium",type:"link",to:"/",replace:!0},this.t("confirmEmail.form.buttons.later"))))}}]),t}(_.default),k={changePassword:M.changePassword};L.propTypes=d({currentUser:m.default.object,error:m.default.instanceOf(Error),isUpdating:m.default.bool},(0,R.getActionPropTypes)(k));var D=function(e){var t=e.auth.currentUser,n=e.confirmEmail;return{currentUser:t,error:n.error,isUpdating:n.isUpdating}},U=function(e){return(0,y.bindActionCreators)({changePassword:M.changePassword},e)};t.default=(0,v.connect)(D,U)(L)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GoldMembershipPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(31),h=n(4),v=n(9),E=n(23),y=r(E),b=n(8),_=r(b),S=n(10),O=r(S),P=n(22),T=r(P),A=n(5),C=n(19),I=n(7),w=n(373),N=n(38),R={UNSUBSCRIBE:"unsubscribe",SUBSCRIBE:"subscribe"},M=t.GoldMembershipPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:["canSubscribe","params"],action:function(e){var t=e.canSubscribe,n=e.match.params.action;t&&n===R.SUBSCRIBE&&r.props.renew()}}]),r.cancelMembershipClickHandler=function(){r.props.cancel()},r.stayGoldClickHandler=function(){var e=r.props,t=e.currentUser;(0,e.routerPush)("/user/"+t.username)},r.renewClickHandler=function(){r.props.emitButtonEvent(A.APP_BUTTONS.GOLD_MEMBERSHIP_PAGE_RENEW)},r.goToMainPageClickHandler=function(){r.props.routerPush("/")},s=n,i(r,s)}return s(t,e),u(t,[{key:"componentWillUnmount",value:function(){this.props.reset()}},{key:"renderUnsubscribe",value:function(){return p.default.createElement("div",{className:"gold-membership-unsubscribe"},p.default.createElement(_.default,{img:"unsubscribe",size:94}),p.default.createElement("div",{className:"gold-membership-header"},this.t("goldMembershipPage.unsubscribe.header")),p.default.createElement("div",{className:"gold-membership-description"},this.t("goldMembershipPage.unsubscribe.description")),p.default.createElement("div",{className:"button-wrapper"},p.default.createElement(O.default,{size:"medium",onClick:this.cancelMembershipClickHandler},this.t("goldMembershipPage.unsubscribe.cancelMembership")),p.default.createElement(O.default,{size:"medium",style:"primary",onClick:this.stayGoldClickHandler},this.t("goldMembershipPage.unsubscribe.stayGold"))))}},{key:"renderUnsubscribed",value:function(){var e=this.props.currentUser.mayRenewRebill;return p.default.createElement("div",{className:"gold-membership-unsubscribed"},p.default.createElement(_.default,{img:"success",size:94}),p.default.createElement("div",{className:"gold-membership-header"},this.t("goldMembershipPage.unsubscribed.header")),p.default.createElement("div",{className:"gold-membership-description"},this.t("goldMembershipPage.unsubscribed.description")),p.default.createElement("div",{className:"button-wrapper"},this.renderIf(e,p.default.createElement(O.default,{size:"medium",style:"primary",onClick:this.renewClickHandler},this.t("goldMembershipPage.unsubscribed.renew"))),p.default.createElement(O.default,{size:"medium",style:"auth-banner",className:"gold-membership-btn-second",onClick:this.goToMainPageClickHandler},this.t("goldMembershipPage.unsubscribed.goToMainPage"))))}},{key:"renderError",value:function(){var e=this.props.hasGoldMembershipSubscription;return p.default.createElement("div",{className:"gold-membership-error"},p.default.createElement(_.default,{img:"error",size:94}),p.default.createElement("div",{className:"gold-membership-header"},this.t("goldMembershipPage.error.header")),p.default.createElement("div",{className:"gold-membership-description"},this.renderIf(e,this.t("goldMembershipPage.error.unsubscriptionDescription"),this.t("goldMembershipPage.error.subscriptionDescription"))),p.default.createElement(O.default,{size:"medium",style:"auth-banner",onClick:e?this.cancelMembershipClickHandler:this.renewClickHandler},this.t("goldMembershipPage.error.tryAgain")))}},{key:"renderLoader",value:function(){var e=this.props.hasGoldMembershipSubscription;return p.default.createElement("div",{className:"gold-membership-loading"},p.default.createElement(T.default,{isInline:!0}),p.default.createElement("div",{className:"gold-membership-description"},this.renderIf(e,this.t("goldMembershipPage.unsubscriptionProgress"),this.t("goldMembershipPage.subscriptionProgress"))))}},{key:"renderSubscribed",value:function(){return p.default.createElement("div",{className:"gold-membership-subscribed"},p.default.createElement(_.default,{img:"success",size:94}),p.default.createElement("div",{className:"gold-membership-header"},this.t("goldMembershipPage.subscribed.header")),p.default.createElement("div",{className:"gold-membership-description"},this.t("goldMembershipPage.subscribed.description")),p.default.createElement(O.default,{size:"medium",style:"auth-banner",className:"gold-membership-btn-second",onClick:this.goToMainPageClickHandler},this.t("goldMembershipPage.subscribed.goToMainPage")))}},{key:"render",value:function(){var e=this.props,t=e.error,n=e.hasCancelSucceeded,r=e.hasRenewSucceeded,a=e.isPending,o=void 0;return o=a?this.renderLoader():t?this.renderError():r?this.renderSubscribed():n?this.renderUnsubscribed():this.renderUnsubscribe(),p.default.createElement("div",{className:"gold-membership-page container","data-component-name":"GoldMembershipPage"},o)}}]),t}(y.default);M.checkAccess=C.redirectGuestsToIndexAndMembershipUsersToUserPage;var L={cancel:w.cancel,emitButtonEvent:v.emitButtonEvent,renew:w.renew,reset:w.reset,routerPush:g.push};M.propTypes=l({currentUser:d.default.object,loadFavorites:d.default.func,error:d.default.instanceOf(Error),hasCancelSucceeded:d.default.bool,hasRenewSucceeded:d.default.bool,isLoggedIn:d.default.bool,isPending:d.default.bool},(0,I.getActionPropTypes)(L));var k=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.goldMembership,i=o.canSubscribe,s=o.error,l=o.hasCancelSucceeded,u=o.hasRenewSucceeded,c=o.isPending;return{canSubscribe:i,currentUser:n,error:s,hasCancelSucceeded:l,hasRenewSucceeded:u,hasGoldMembershipSubscription:(0,N.getHasGoldMembershipSubscription)(e),isLoggedIn:r&&!a,isPending:c}},D=function(e){return(0,h.bindActionCreators)(L,e)};t.default=(0,m.connect)(k,D)(M)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),c=n(23),d=r(c),f=n(1391),p=r(f),m=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.support.form",i=n,o(r,i)}return i(t,e),s(t,[{key:"renderReady",value:function(){return u.default.createElement("div",{className:"container island-page feedback-page"},u.default.createElement(p.default,null))}}]),t}(d.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Feedback=void 0;var s=n(76),l=r(s),u=n(78),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(3),y=r(E),b=n(58),_=r(b),S=n(40),O=r(S),P=n(300),T=r(P),A=n(92),C=r(A),I=n(383),w=r(I),N=n(5),R=n(82),M=n(576),L=n(41),k=R.validators.isRequiredValidator,D=R.validators.isEmailValidator,U=function(e,t){return!1===e.sendFeedbackSuccess&&!0===t.sendFeedbackSuccess},j=t.Feedback=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:[L.currentUserHasChanged,U],action:function(e){(0,e.prepareFeedback)(),r.resetForm()}}],r.departmentSelectHandler=function(e){r.setState({selectedDepartment:e.value})},r.sendButtonClickHandler=function(e){e.preventDefault(),r.props.sendFeedback(r.getFormFields())},i=n,o(r,i)}return i(t,e),d(t,[{key:"getFormFields",value:function(){var e=this.state.selectedDepartment,t=this.usernameRef,n=this.emailRef,r=this.subjectRef,a=this.messageRef,o=this.recaptchaRef;return{username:{value:(0,l.default)(t.value)},email:{value:(0,l.default)(n.value),validators:[k,D]},department:{value:e,validators:[k]},subject:{value:(0,l.default)(r.value),validators:[k]},message:{value:(0,l.default)(a.getWrappedInstance().value),validators:[k]},recaptcha:{value:(0,l.default)(o.value),validators:[k]}}}},{key:"resetForm",value:function(){this.subjectRef.value="",this.messageRef.getWrappedInstance().value="",this.recaptchaRef.resetRecaptcha()}},{key:"renderFormFieldError",value:function(e,t){var n=this.props.formFieldsErrors[e];return n?g.default.createElement(_.default,{error:{message:n},targetId:t}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.feedbackDepartments,a=t.formFieldsErrors,o=t.isLoggedIn,i=t.isSendingFeedback,s=t.recaptchaSiteKey,l=this.state.selectedDepartment,u=a.username,c=a.email,d=a.subject,f=a.message,p="feedback_username_"+this.uid,m="feedback_email_"+this.uid,h="feedback_department_"+this.uid,v="feedback_subject_"+this.uid,E="feedback_message_"+this.uid,y="feedback_recaptcha_"+this.uid,b=r.map(function(t){return{label:e.t("support.departments."+t.title),value:t.id}});return g.default.createElement("div",{className:"feedback island-wrapper","data-component-name":"Feedback"},g.default.createElement("div",{className:"island island-medium"},g.default.createElement("div",{className:"island-header"},g.default.createElement("h1",{className:"island-title"},this.t("feedback.title"))),g.default.createElement("form",{className:"feedback-form island-form"},g.default.createElement("div",{className:"field field-username"},g.default.createElement(O.default,{autoCapitalize:"none",autoFocus:!0,className:this.c("input-username",{error:u}),defaultValue:o?n.username:null,disabled:i||o,id:p,maxLength:N.DEFAULT_MAX_INPUT_LENGTH,placeholder:this.t("feedback.form.placeholders.username"),ref:function(t){e.usernameRef=t}}),this.renderFormFieldError("username",p)),g.default.createElement("div",{className:"field field-email"},g.default.createElement(O.default,{autoCapitalize:"none",className:this.c("input-email",{error:c}),defaultValue:o?n.email:null,disabled:i||o,id:m,maxLength:N.DEFAULT_MAX_INPUT_LENGTH,placeholder:this.t("feedback.form.placeholders.email"),ref:function(t){e.emailRef=t}}),this.renderFormFieldError("email",m)),g.default.createElement("div",{className:"field field-department"},g.default.createElement(C.default,{disabled:i,id:h,isClearable:!1,isMultiple:!1,isSearchable:!1,value:l,onSelect:this.departmentSelectHandler,options:b}),this.renderFormFieldError("department",h)),g.default.createElement("div",{className:"field field-subject"},g.default.createElement(O.default,{autoCapitalize:"none",className:this.c("input-subject",{error:d}),disabled:i,id:v,maxLength:N.DEFAULT_MAX_INPUT_LENGTH,placeholder:this.t("feedback.form.placeholders.subject"),ref:function(t){e.subjectRef=t}}),this.renderFormFieldError("subject",v)),g.default.createElement("div",{className:"field field-message"},g.default.createElement(w.default,{autoCapitalize:"none",className:this.c("input input-message textarea",{error:f}),disabled:i,id:E,maxLength:N.DEFAULT_MAX_TEXTAREA_LENGTH,placeholder:this.t("feedback.form.placeholders.message"),ref:function(t){e.messageRef=t},rows:6}),this.renderFormFieldError("message",E)),g.default.createElement("div",{className:"field field-recaptcha"},g.default.createElement(T.default,{recaptchaContainerId:y,recaptchaSiteKey:s,ref:function(t){e.recaptchaRef=t}}),this.renderFormFieldError("recaptcha",y)),g.default.createElement("div",{className:"field field-action field-submit"},g.default.createElement("input",{className:"input-submit btn btn-primary btn-action",disabled:i,onClick:this.sendButtonClickHandler,type:"submit",value:this.t("feedback.form.submitBtn")})))))}}]),t}(y.default);j.propTypes={currentUser:p.default.shape({username:p.default.string,email:p.default.string}),feedbackDepartments:p.default.arrayOf(p.default.shape({id:p.default.string})),isLoggedIn:p.default.bool,isSendingFeedback:p.default.bool,formFieldsErrors:p.default.object,sendFeedbackSuccess:p.default.bool,prepareFeedback:p.default.func.isRequired,sendFeedback:p.default.func.isRequired};var F=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.config.data,i=o.recaptchaSiteKey,s=o.support.departments,l=e.feedback,u=l.isSendingFeedback,d=l.sendFeedbackError,f=l.sendFeedbackSuccess;return{currentUser:n,feedbackDepartments:s,formFieldsErrors:d?(0,c.default)(d.details,function(e){return e.join(". ")}):{},isLoggedIn:r&&!a,isSendingFeedback:u,recaptchaSiteKey:i,sendFeedbackSuccess:f}},B=function(e){return(0,v.bindActionCreators)({prepareFeedback:M.prepare,sendFeedback:M.send},e)};t.default=(0,h.connect)(F,B)(j)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(0),c=r(u),d=n(9),f=n(23),p=r(f),m=n(19),g=n(604),h=r(g),v=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.forgotPassword",i=n,o(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.context.store.dispatch((0,d.hideModal)())}},{key:"renderReady",value:function(){return c.default.createElement("div",{className:"container island-page forgot-password-page"},c.default.createElement(h.default,null))}}]),t}(p.default);v.checkAccess=m.redirectLoggedInToIndex,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MyFriendsPage=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(23),h=r(g),v=n(135),E=r(v),y=n(19),b=n(117),_=n(398),S=r(_),O=n(41),P=n(100),T=t.MyFriendsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.friends",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:O.currentUserHasChangedAndIsLoggedIn,action:function(e){(0,e.loadMyFriends)()}}]),s=n,i(r,s)}return s(t,e),l(t,[{key:"renderReady",value:function(){var e=this.props,t=e.friendIds,n=e.isLoggedIn,r=e.isPending;return n?f.default.createElement("div",{className:"friends-page","data-component-name":"MyFriendsPage"},f.default.createElement(E.default,null),f.default.createElement("div",{className:"page page-without-header"},f.default.createElement(S.default,{className:"page-block",friendIds:t,isPending:r,isOwnProfile:!0}))):null}}]),t}(h.default);T.checkAccess=y.redirectGuestToLoginOrIndex,T.propTypes={currentUser:c.default.object,loadMyFriends:c.default.func,isLoggedIn:c.default.bool,isPending:c.default.bool,friendIds:c.default.arrayOf(c.default.number)};var A=function(e){var t=e.auth,n=e.myFriends;return{currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut,isPending:n.isPending,friendIds:(0,P.getMyFriendIds)(e)}},C=function(e){return(0,m.bindActionCreators)({loadMyFriends:b.load},e)};t.default=(0,p.connect)(A,C)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UserFriendsPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(31),v=n(4),E=n(23),y=r(E),b=n(22),_=r(b),S=n(19),O=n(7),P=n(355),T=n(398),A=r(T),C=n(41),I=n(100),w=n(44),N=t.UserFriendsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.friends",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:[C.currentUserHasChanged,C.propsParamsUsernameHasChanged],action:function(e){(0,e.loadFriends)({username:e.match.params.username})}}]),s=n,i(r,s)}return s(t,e),u(t,[{key:"getNextState",value:function(e,n){var r=e.currentUser,a=e.isUserNotFound,o=e.match.params.username,i=e.routerReplace,s=e.user;if(!s)return{isDataFailed:a,isDataPending:!a};!s.isModel||r.isAdmin||r.isSupport||i("/"),s.username!==o&&i("/user/"+s.username+"/friends");return l({},c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNextState",this).call(this,e,n),{isDataPending:!1})}},{key:"renderPending",value:function(){return m.default.createElement("div",{className:"friends-page"},m.default.createElement("div",{className:"page page-without-header"},m.default.createElement("div",{className:"loader-container"},m.default.createElement(_.default,{isCentered:!0}))))}},{key:"renderReady",value:function(){var e=this.props,t=e.friendIds,n=e.isPending,r=e.match.params;return m.default.createElement("div",{className:"friends-page","data-component-name":"UserFriendsPage"},m.default.createElement("div",{className:"page page-without-header"},m.default.createElement(A.default,{className:"page-block",friendIds:t,isPending:n,username:r.username})))}}]),t}(y.default);N.checkAccess=S.redirectToMyFriendsPage;var R=(0,w.createUsernameSelector)(),M=(0,I.createUserFriendIdsSelector)("match.params.username"),L={loadFriends:P.load,routerReplace:h.replace};N.propTypes=l({friendIds:f.default.arrayOf(f.default.number),isPending:f.default.bool,match:f.default.shape({params:f.default.shape({username:f.default.string.isRequired})})},(0,O.getActionPropTypes)(L));var k=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.userFriends,s=R(e,t);return{currentUser:r,isLoggedIn:a&&!o,isPending:i.isPending,isUserNotFound:(0,w.getIsNotFound)(e,t.match.params.username),friendIds:M(e,t),user:s}},D=function(e){return(0,v.bindActionCreators)(L,e)};t.default=(0,g.connect)(k,D)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginPage=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(0),d=r(c),f=n(2),p=n(4),m=n(9),g=n(23),h=r(g),v=n(51),E=n(19),y=n(7),b=n(63),_=r(b),S=n(606),O=r(S),P=t.LoginPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.login",r.getTriggerSource=function(){return _.default.get("loginTriggerSource")||v.AUTH_TRIGGER_SOURCES.LOGIN_PAGE},i=n,o(r,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.hideModal()}},{key:"getNextState",value:function(e,t){return{isDataPending:e.whiteLabelId}}},{key:"renderReady",value:function(){return d.default.createElement("div",{className:"container island-page login-page","data-component-name":"LoginPage"},d.default.createElement(O.default,{triggerSource:this.getTriggerSource()}))}}]),t}(h.default);P.checkAccess=E.redirectToAppropriateLoginPage;var T={hideModal:m.hideModal};P.propTypes=s({},(0,y.getActionPropTypes)(T));var A=function(e){return(0,p.bindActionCreators)(T,e)},C=function(e){var t=e.auth;return{auth:t,config:e.config,currentUser:t.currentUser,isLoggedIn:t.isLoggedIn&&!t.isLoggingOut}};t.default=(0,f.connect)(C,A)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateMessagesPage=void 0;var l=n(6),u=r(l),c=n(116),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},g=n(1),h=r(g),v=n(0),E=r(v),y=n(2),b=n(31),_=n(4),S=n(170),O=n(23),P=r(O),T=n(22),A=r(T),C=n(135),I=r(C),w=n(19),N=n(7),R=n(21),M=n(197),L=n(1397),k=r(L),D=n(1399),U=r(D),j=n(41),F=n(295),B=n(646),H=t.PrivateMessagesPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.title="seo.title.privateMessages",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:["username"],action:function(e){var t=e.currentUser,n=e.loadCounterpart,a=e.username,o=r.props.username;a&&a!==t.username&&a!==o&&n({username:a})}},{update:["selectedConversation.counterpart.id"],action:function(e){r.updateRegisteredSocketEvents(e,r.context)}},{update:j.currentUserHasChangedAndIsLoggedIn,action:function(e){(0,e.loadPageData)(e.username)}},{update:j.currentUserRolesHasChanged,action:function(e){var t=e.loadCounterpart,n=e.selectedConversation;if(n&&n.counterpart){t({username:n.counterpart.username})}}},{update:B.hasPageOrConversationsLoaded,action:function(e){var t=e.currentUser,n=e.isLoadingPage,r=e.conversations,a=e.username,o=e.selectedConversation,i=e.routerReplace,s=e.isLayoutUpToL,l=s,c=Boolean(r.length);if(!n&&c){if(!(a&&a!==t.username&&o&&a||l)){var f=(0,d.default)(r);i("/messages/"+(0,u.default)(f,"counterpart.username",""))}}else!n&&a&&i("/messages")}}]),r.userBannedChangeEventHandler=function(e){r.props.processSocketEvent("userBanned",e);var t=r.props,n=t.loadMessages,a=t.selectedConversation;a&&n(a.counterpart.id)},r.userUnbannedChangeEventHandler=function(e){r.props.processSocketEvent("userUnbanned",e);var t=r.props,n=t.loadMessages,a=t.selectedConversation;a&&n(a.counterpart.id)},r.onConversationClicked=function(e){r.props.routerPush("/messages/"+e.username)},r.newPrivateMessageEventHandler=function(e){var t=r.props;(0,t.updateConversation)(e,t.selectedConversation)},s=n,i(r,s)}return s(t,e),p(t,[{key:"getSocketEventBindings",value:function(e,t){if(!e.isLoggedIn)return[];var n=e.isLoggedIn,r=e.currentUser,o=e.selectedConversation,i=r.id,s=n&&r.isModel;return[{subscriptionKey:"newPrivateMessageReceived:"+i,callback:this.newPrivateMessageEventHandler},{subscriptionKey:"newPrivateMessageSent:"+i,callback:this.newPrivateMessageEventHandler},{subscriptionKey:"userBanned:"+i,callback:this.userBannedChangeEventHandler},{subscriptionKey:"userUnbanned:"+i,callback:this.userUnbannedChangeEventHandler}].concat(a(s?[{subscriptionKey:"knightAdded:"+i,callback:this.knightAddedEventHandler},{subscriptionKey:"knightDeleted:"+i,callback:this.knightDeletedEventHandler}]:[]),a(o?[{subscriptionKey:"userBanned:"+o.counterpart.id,callback:this.userBannedChangeEventHandler},{subscriptionKey:"userUnbanned:"+o.counterpart.id,callback:this.userUnbannedChangeEventHandler}]:[]))}},{key:"componentDidMount",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),document.body.classList.add("private-messages-page-mounted")}},{key:"componentWillUnmount",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this)).call.apply(e,[this].concat(r)),document.body.classList.remove("private-messages-page-mounted")}},{key:"renderPending",value:function(){return E.default.createElement("div",{className:"documents-page"},E.default.createElement(I.default,{activeRoute:"/messages"}),E.default.createElement("div",{className:"page"},E.default.createElement(A.default,{isCentered:!0})))}},{key:"renderReady",value:function(){var e=this.props,t=e.removeConversation,n=e.conversations,r=e.selectedConversation,a=e.isLoading,o=e.isUpdating,i=e.isUserNotFound,s=e.username,l=null;return i?l=E.default.createElement("div",{className:"private-messages-list not-found"},E.default.createElement("p",null,this.t("privateMessages.userNotFoundByUsername",{username:s}))):r&&(l=E.default.createElement(U.default,{selectedConversation:r})),E.default.createElement("div",{className:this.c("page-root private-messages-page",{"has-selected-counterpart":Boolean(r)}),"data-component-name":"PrivateMessagesPage"},E.default.createElement(I.default,{activeRoute:"/messages"}),E.default.createElement("div",{className:"page"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"conversations"},E.default.createElement(k.default,{handleRemoveConversation:t,onConversationClicked:this.onConversationClicked,conversations:n,isLoading:a,isUpdating:o})),E.default.createElement("div",{className:"private-messages"},l))))}}]),t}(P.default);H.checkAccess=w.redirectGuestToLoginOrIndex;var V={loadPageData:M.loadPageData,loadMessages:M.loadMessages,loadCounterpart:M.loadCounterpart,processSocketEvent:S.process,removeConversation:M.removeConversation,routerPush:b.push,routerReplace:b.replace,updateConversation:M.updateConversation};H.propTypes=f({currentUser:h.default.object,isLoggedIn:h.default.bool,isUpdating:h.default.bool,isUserNotFound:h.default.bool,isLoading:h.default.bool,isLoadingPage:h.default.bool,selectedConversation:h.default.object,username:h.default.string},(0,N.getActionPropTypes)(V));var G=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.conversations,s=e.privateMessages,l=i.isLoading,u=i.isUpdating,c=s.isLoadingPage,d=t.match.params.username,f=(0,F.getSelectedConversation)(e,t);return{currentUser:r,username:d,isLoading:l,isUpdating:u,isLoadingPage:c,isLayoutUpToL:(0,R.getIsLayoutUpToL)(e),isUserNotFound:!l&&d&&!f,conversations:(0,F.getConversations)(e,t),selectedConversation:f,isLoggedIn:a&&!o}},x=function(e){return(0,_.bindActionCreators)(V,e)};t.default=(0,y.connect)(G,x)(H)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateMessagesConversations=void 0;var l=n(35),u=r(l),c=n(30),d=r(c),f=n(36),p=r(f),m=n(119),g=r(m),h=n(49),v=r(h),E=n(144),y=r(E),b=n(6),_=r(b),S=n(273),O=r(S),P=n(48),T=r(P),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),I=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},w=n(399),N=r(w),R=n(15),M=r(R),L=n(1),k=r(L),D=n(0),U=r(D),j=n(2),F=n(3),B=r(F),H=n(10),V=r(H),G=n(8),x=r(G),W=n(73),Y=r(W),K=n(5),q=n(89),z=r(q),X=n(1398),Z=r(X),Q=n(120),J=r(Q),$=500,ee=t.PrivateMessagesConversations=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:["conversations"],action:function(e){var t=(0,T.default)(e.conversations,"isSelected");t&&r.setState({selectedCounterpart:t.counterpart.id})}}]),r.scrollBarUpdateThrottled=(0,g.default)(function(){r.scrollToSelectedConversation()},100),r.scrollToSelectedConversation=(0,p.default)(function(){var e=r,t=e.conversationsRef,n=r.state,a=n.selectedCounterpart,o=n.clickedCounterpart,i=a!==o;if(t&&r.selectedConversationRef&&i){var s=r.selectedConversationRef.getBoundingClientRect(),l=t.getBoundingClientRect(),u=t.scrollTop,c=document.documentElement.scrollTop;t.scrollTop=u+s.top+c-l.top}},$),r.clickHandler=function(e){r.state.isShifted?r.swipeRightEventHandler():(r.setState({clickedCounterpart:e.id}),r.props.onConversationClicked(e))},r.filterClickEnableHandler=function(){r.setState({isFilterOnlineEnabled:!0})},r.filterClickDisableHandler=function(){r.setState({isFilterOnlineEnabled:!1})},r.removeButtonClickHandler=function(e,t){t.stopPropagation(),t.preventDefault();var n=r.props.handleRemoveConversation,a=(0,O.default)(r.props.conversations,function(t){return t.counterpart.id===e}),o=r.props.conversations[a],i=void 0;o&&o.isSelected&&(i=r.props.conversations[a+1],i||(i=r.props.conversations[a-1]),i=i?i.counterpart:null),n(o.counterpart,i)},r.touchStartEventHandler=function(e){var t=r.state.touchStartCounterpartId;if(!t)return void r.setState({touchStartCounterpartId:e});t!==e&&r.swipeRightEventHandler()},r.swipeLeftEventHandler=function(){r.setState({isShifted:!0})},r.swipeRightEventHandler=function(){r.setState({touchStartCounterpartId:null,isShifted:!1})},r.conversationsRefHandler=function(e){if(r.conversationsRef=e,K.BROWSER_CAPABILITIES.touch&&e){var t=new N.default(e);t.get("swipe").set({direction:N.default.DIRECTION_HORIZONTAL,threshold:100,velocity:.5}),t.on("swipeleft",r.swipeLeftEventHandler),t.on("swiperight",r.swipeRightEventHandler),r.conversationsHammer=t}},r.selectedConversationRefHandler=function(e,t){e&&(r.selectedConversationRef=t)},r.renderConversation=function(e){var t=e.counterpart,n=e.isSelected,a=e.lastMessage,o=e.unreadCount,i=r.state,s=i.touchStartCounterpartId,l=i.isShifted,c=K.BROWSER_CAPABILITIES.touch?{onTouchStart:(0,d.default)(r.touchStartEventHandler,t.id)}:{};return U.default.createElement("div",{className:"conversation-wrapper",key:"conversation-wrapper-"+t.id},U.default.createElement("div",A({className:r.c("conversation",{selected:n,"counterpart-online":t.isOnline,shifted:s===t.id&&l}),ref:(0,d.default)(r.selectedConversationRefHandler,n),key:t.id,onClick:n?u.default:(0,d.default)(r.clickHandler,t)},c),U.default.createElement("div",{className:"counterpart-avatar"},U.default.createElement(z.default,{user:t})),U.default.createElement("div",{className:"user"},U.default.createElement(J.default,{user:t,size:14})),r.renderIf(a&&a.createdAt,function(){return U.default.createElement("div",{className:"date"},(0,M.default)(new Date(a.createdAt)).format("MMM D"))}),r.renderIf(a&&a.body,function(){return U.default.createElement("div",{className:"message"},r.renderIf(a.senderId===t.id,function(){return U.default.createElement(x.default,{img:"reply",size:11})}),a.body)}),r.renderIf(o,function(){return U.default.createElement("div",{className:"counter"},o>99?"99+":o)}),U.default.createElement("div",{className:"btn-remove",onClick:(0,d.default)(r.removeButtonClickHandler,t.id)},U.default.createElement(x.default,{img:"close-4",size:15}))),U.default.createElement("div",{className:"btn-wrapper"},U.default.createElement(V.default,{size:"small",style:"delete",onClick:(0,d.default)(r.removeButtonClickHandler,t.id)},r.t("button.delete"))))},s=n,i(r,s)}return s(t,e),C(t,[{key:"getDefaultState",value:function(){return{isFilterOnlineEnabled:!1,clickedCounterpart:null,selectedCounterpart:null,touchStartCounterpartId:null}}},{key:"shouldComponentUpdate",value:function(e,t,n){return this.props.conversations!==e.conversations||this.props.isLoading!==e.isLoading||this.props.isUpdating!==e.isUpdating||!(0,v.default)(this.state,t)}},{key:"componentDidMount",value:function(){I(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),K.BROWSER_CAPABILITIES.touch&&(this.conversationsRef.style.display="none",this.conversationsRef.offsetHeight,this.conversationsRef.style.display="unset")}},{key:"componentDidUpdate",value:function(){I(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this),this.scrollBarUpdateThrottled()}},{key:"componentWillUnmount",value:function(){var e;K.BROWSER_CAPABILITIES.touch&&this.conversationsHammer&&(this.conversationsHammer.stop(),this.conversationsHammer.destroy(),this.conversationsHammer=null);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=I(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this)).call.apply(e,[this].concat(r))}},{key:"renderFilter",value:function(){var e=this.props.conversations,t=this.state.isFilterOnlineEnabled;return e.every(function(e){return!e.counterpart.isOnline})?null:U.default.createElement("div",{className:"filter"},U.default.createElement(V.default,{active:!t,onClick:this.filterClickDisableHandler,size:"extra-small",style:"default-restyled"},this.t("privateMessages.conversations.filter.all")),U.default.createElement(V.default,{active:t,onClick:this.filterClickEnableHandler,size:"extra-small",style:"default-restyled"},this.t("privateMessages.conversations.filter.online")))}},{key:"renderAdminAlert",value:function(){var e=this.props.conversations,t=e.filter(function(e){var t=e.unreadCount,n=e.counterpart,r=n.isAdmin,a=n.isSupport;return t&&(r||a)});if(0===t.length)return null;var n=(0,_.default)((0,y.default)(t),"counterpart"),r=(0,d.default)(this.clickHandler,n);return U.default.createElement(Z.default,{message:this.t("privateMessages.conversations.notifyAboutAdminConversation"),onAction:r})}},{key:"render",value:function(){var e=this,t=this.props,n=t.conversations,r=t.isLoading,a=t.isUpdating,o=this.state.isFilterOnlineEnabled,i=o?n.filter(function(e){return e.counterpart.isOnline}):n,s=r&&(!n.length||a);return U.default.createElement("div",{className:this.c("private-messages-conversations",{pending:s}),"data-component-name":"PrivateMessagesConversations"},U.default.createElement("div",{className:"header"},this.renderFilter(),U.default.createElement("h3",null,this.t("privateMessages.conversations.title"))),this.renderAdminAlert(),U.default.createElement(Y.default,{containerRef:this.conversationsRefHandler},U.default.createElement("div",{className:"conversation-list"},this.renderIf(i&&i.length,function(){return i.map(e.renderConversation)},U.default.createElement("p",{className:"empty"},this.t("empty"))))))}}]),t}(B.default);ee.propTypes={conversations:k.default.array,isLoading:k.default.bool,isUpdating:k.default.bool,handleRemoveConversation:k.default.func,onConversationClicked:k.default.func.isRequired},ee.defaultProps={conversations:[],isPending:!1};var te=function(e){var t=e.ui;return{windowWidth:t.windowWidth,windowHeight:t.windowHeight}};t.default=(0,j.connect)(te)(ee)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(10),g=r(m),h=n(8),v=r(h),E=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.onAction;return d.default.createElement("div",{className:"private-messages-alert","data-component-name":"PrivateMessagesAlert"},d.default.createElement("div",{className:"information"},d.default.createElement(v.default,{img:"exclamation"}),d.default.createElement("div",{className:"message"},t)),d.default.createElement(g.default,{onClick:n,style:"auth-banner",type:"button"},this.t("privateMessages.conversations.openAdminConversation")))}}]),t}(p.default);t.default=E,E.propTypes={message:u.default.string.isRequired,onAction:u.default.func},E.defaultProps={message:""}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateMessagesList=void 0;var l=n(11),u=r(l),c=n(49),d=r(c),f=n(6),p=r(f),m=n(119),g=r(m),h=n(13),v=r(h),E=n(14),y=r(E),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},O=n(15),P=r(O),T=n(1),A=r(T),C=n(0),I=r(C),w=n(2),N=n(24),R=n(4),M=n(9),L=n(3),k=r(L),D=n(17),U=r(D),j=n(10),F=r(j),B=n(8),H=r(B),V=n(22),G=r(V),x=n(73),W=r(x),Y=n(5),K=n(7),q=n(45),z=n(21),X=n(52),Z=n(98),Q=n(100),J=n(646),$=n(91),ee=n(295),te=n(164),ne=n(197),re=n(89),ae=r(re),oe=n(1400),ie=r(oe),se=n(647),le=r(se),ue=n(1401),ce=r(ue),de=n(1403),fe=r(de),pe=n(120),me=r(pe),ge=n(27),he=t.PrivateMessagesList=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.shouldSuppressScrollHandlerOnce=!1,r.wasInScrollZone=!1,r.propsUpdateToActionsMap=[{update:["selectedConversation.counterpart.id"],action:function(){r.setState({scrollFromEnd:0})}}],r.scrollHandler=(0,g.default)(function(){if(r.shouldSuppressScrollHandlerOnce)return void(r.shouldSuppressScrollHandlerOnce=!1);var e=r.props,t=e.selectedConversation,n=e.isLoading,a=e.messages,o=e.loadMessages,i=t.counterpart;(0,v.default)(a)||n||(r.wasInScrollZone||(r.isScrollZonePrev?r.setState({loaderPosition:"top",scrollFromEnd:r.messageListRef.scrollHeight},function(){var e=a.slice(0,1).pop();o(i.id,{beforeMessageId:e.id})}):r.isScrollZoneNext&&r.setState({loaderPosition:"bottom",scrollFromEnd:null},function(){var e=a.slice(-1).pop();o(i.id,{lastMessageId:e.id})})),r.isInScrollZone||null===r.state.scrollFromEnd||r.setState({scrollFromEnd:null}),r.wasInScrollZone=r.isInScrollZone)},Y.DEFAULT_SCROLL_EVENT_DEBOUNCE_WAIT),r.buyTokensClickHandler=function(){r.props.showSubscriptionPackage(Y.APP_BUTTONS.PRIVATE_MESSAGES_MAKE_ME_GOLD)},r.showUserLevelsModalClickHandler=function(e){return e.preventDefault(),r.props.showModal(Y.MODAL_TYPES.USER_LEVELS),!1},r.toggleSubscriptionEventHandler=function(){var e=r.props,t=e.addSubscription,n=e.isEmailVerified,a=e.releaseInterface,o=e.removeSubscription,i=e.selectedConversation,s=e.showModal,l=i.counterpart;i.isSubscribed?o(l.id):n?t(l.id):(s(Y.MODAL_TYPES.CONFIRM_EMAIL,{description:r.t("modelOnlineNotifications.description")}),a())},r.renderDaySplitter=function(e){return I.default.createElement("div",{className:"day",key:e},I.default.createElement("div",null,I.default.createElement("span",null,e)))},r.renderMessage=function(e){var t=e.id,n=e.body,a=e.createdAt,o=e.senderId,i=e.type,s=void 0===i?null:i,l=e.details,u=void 0===l?{amount:null}:l,c=r.props.selectedConversation.counterpart,d=o===c.id,f=r.renderMessageTail({id:t,createdAt:a});if(s===ge.PRIVATE_MESSAGE_OFFLINE_TIP)return r.renderOfflineTipMessage({id:t,body:n,senderId:o,createdAt:a,details:u});if(s===ge.PRIVATE_MESSAGE_UNLOCK_TIP)return r.renderUnlockTipMessage({id:t,body:n,senderId:o,createdAt:a,details:u});if((0,y.default)(ge.PRIVATE_MESSAGES_FRIENDSHIP_TYPES,s))return I.default.createElement(fe.default,{counterpart:c,isIncoming:d,key:t,type:s},f);var p=d?c.username:r.props.currentUser.username;return I.default.createElement("div",{className:r.c("message",{incoming:d}),key:t},I.default.createElement("div",{className:"body"},I.default.createElement("div",{className:"username"},p),I.default.createElement("div",{className:"text"},n)),f)},r.renderCannotSendNotGoldUser=function(){return I.default.createElement("div",{className:"gold-membership-subscription"},I.default.createElement("p",null,r.t("privateMessages.cannotSend.goldMembersOnly")),I.default.createElement("p",null,I.default.createElement(U.default,{elements:{link:I.default.createElement("a",{onClick:r.showUserLevelsModalClickHandler})},messageId:"privateMessages.cannotSend.subscribeToGoldMembership"})),I.default.createElement(F.default,{style:"primary",onClick:r.buyTokensClickHandler},r.t("button.makeMeGold")))},r.renderCannotSend=function(){var e=r.props,t=e.currentUser,n=e.selectedConversation.counterpart,a=r.props,o=a.isBannedByCountry,i=a.isBannedByCounterpart,s=a.isBannedByCurrentUser,l={className:"cannot-send"};return s?I.default.createElement("div",l,I.default.createElement("p",null,r.t("privateMessages.cannotSend.bannedByMe"))):i?I.default.createElement("div",l,I.default.createElement("p",null,r.t(n.isModel?"privateMessages.cannotSend.youAreBannedByModel":"privateMessages.cannotSend.youAreBannedByUser"))):o?I.default.createElement("div",l,I.default.createElement("p",null,r.t("camChat.yourCountryIsBlockedByModel"))):t.isGold||t.isModel?I.default.createElement("div",l,I.default.createElement("p",null,r.t("privateMessages.cannotSend.default"))):t.isStudio?I.default.createElement("div",l,I.default.createElement("p",null,r.t("privateMessages.cannotSend.goldMembersOnly"))):I.default.createElement("div",l,I.default.createElement("p",null,r.renderCannotSendNotGoldUser()))},a=n,i(r,a)}return s(t,e),_(t,[{key:"getDefaultState",value:function(){return{loaderPosition:"bottom",scrollFromEnd:0}}},{key:"getNextState",value:function(e,t){return{scrollFromEnd:this.props.isSending&&!e.isSending?0:this.state.scrollFromEnd}}},{key:"getSocketEventBindings",value:function(e){var t=this,n=e.selectedConversation.counterpart.id,r=e.currentUser,a=e.isLoggedIn,o=e.loadRelations,i=a&&r.isModel?[{subscriptionKey:"canBanChanged:"+r.id}]:[];return[{subscriptionKey:"privateMessagesRead:"+n,callback:function(){var e=t.props;(0,e.markConversationAsReadByCounterpart)(e.selectedConversation.counterpart.id)}},{subscriptionKey:"userUpdated:"+n,callback:function(){return o([n])}}].concat(i)}},{key:"shouldSocketResubscribe",value:function(e){return(0,p.default)(e,"selectedConversation.counterpart.id")!==(0,p.default)(this.props,"selectedConversation.counterpart.id")}},{key:"componentWillUnmount",value:function(){this.scrollHandler.cancel(),S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"componentDidRender",value:function(){for(var e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this)).call.apply(e,[this].concat(r)),this.updateScroll()}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,d.default)(this.props,e)||!(0,d.default)(this.state,t)}},{key:"updateScroll",value:function(){var e=this.messageListRef,t=this.state.scrollFromEnd;if(e){var n=this.props.isScrollNextEnabled?0:this.props.scrollThreshold,r=e.scrollTop+e.clientHeight,a=e.scrollHeight-r<=n;null!==t?(this.shouldSuppressScrollHandlerOnce=!0,e.scrollTop=e.scrollHeight-t):a&&this.setState({scrollFromEnd:0})}}},{key:"getMessagesByDays",value:function(e){var t={};return e.forEach(function(e){var n=(0,P.default)(new Date(e.createdAt)).format("MMMM Do");t[n]||(t[n]=[]),t[n].push(e)}),t}},{key:"renderMessageTail",value:function(e){var t=e.id,n=e.createdAt,r=I.default.createElement("div",{className:"time"},(0,P.default)(new Date(n)).format("h:mma")),a=this.props.counterpartLastReadMessageId===t?I.default.createElement(H.default,{className:"last-read",img:"check",size:14}):void 0;return I.default.createElement("div",{className:"tail"},r,a)}},{key:"renderOfflineTipMessage",value:function(e){var t=e.id,n=e.body,r=e.createdAt,a=e.senderId,o=e.details,i=this.props,s=i.selectedConversation,l=i.currentUser,u=a===s.counterpart.id?s.counterpart:l,c=u.username,d=this.renderMessageTail({id:t,createdAt:r}),f=I.default.createElement(U.default,{choiceParameter:"tokens",elements:{username:I.default.createElement(me.default,{link:{to:"/user/"+c},user:u}),strong:I.default.createElement("strong",null)},messageId:"privateMessages.userHasTippedModel",parameters:{username:c,tokens:o.amount}});return I.default.createElement("div",{className:this.c("message tip"),key:t},I.default.createElement("div",{className:"body"},f,I.default.createElement("div",{className:"tip-comment"},n)),d)}},{key:"renderUnlockTipMessage",value:function(e){var t=e.id,n=e.createdAt,r=e.senderId,a=this.props,o=a.selectedConversation,i=a.currentUser,s=r===i.id,l=r===o.counterpart.id?o.counterpart:i,u=l.username,c=s?"userUnlockTips":"userSentYouUnlockTips",d=this.renderMessageTail({id:t,createdAt:n}),f=I.default.createElement(U.default,{choiceParameter:"tokens",elements:{username:I.default.createElement(me.default,{link:{to:"/user/"+u},user:l}),strong:I.default.createElement("strong",null)},messageId:"privateMessages."+c,parameters:{username:u}});return I.default.createElement("div",{className:this.c("message tip"),key:t},I.default.createElement("div",{className:"body"},f),d)}},{key:"render",value:function(){var e=this,t=this.props,n=t.canSend,r=t.counterpartLinkTo,o=t.error,i=t.isBanButtonVisible,s=t.isBannedByCounterpart,l=t.isBannedByCountry,c=t.isFriendshipButtonVisible,d=t.isLoading,f=t.isLoggedIn,p=t.isSending,m=t.messageDraft,g=t.messages,h=t.selectedConversation,E=t.isLayoutMoreThanXL,y=this.state.loaderPosition,b=h.counterpart,_=h.isSubscribed,S=this.getMessagesByDays(g),O=l||s;return f?I.default.createElement("div",{className:this.c("private-messages-list",{"cannot-send":!n,"is-pending":d}),"data-component-name":"PrivateMessagesList"},I.default.createElement("div",{className:"header"},I.default.createElement("div",{className:"header-info"},I.default.createElement(N.Link,{className:"back",to:"/messages"},I.default.createElement(H.default,{img:"left",size:18})),I.default.createElement(N.Link,{to:r},I.default.createElement(ae.default,{user:b})),I.default.createElement("h3",null,I.default.createElement(me.default,{link:{to:r},user:b}))),I.default.createElement("div",{className:"controls"},this.renderIf(b.isModel&&E&&!O,I.default.createElement(le.default,{onChange:this.toggleSubscriptionEventHandler,isSubscribed:_})),this.renderIf(!O,I.default.createElement(ce.default,{counterpart:b,isSubscribed:_,isSubscriptionVisible:!E&&b.isModel,onSubscriptionChange:this.toggleSubscriptionEventHandler,isBanButtonVisible:i,isFriendshipButtonVisible:c})))),this.renderIf(d,function(){return I.default.createElement(G.default,{className:y,isCentered:!0})}),I.default.createElement(W.default,{containerRef:function(t){e.messageListRef=t},onScrollY:this.scrollHandler,onNativeScroll:this.scrollHandler},I.default.createElement("div",{className:"messages"},this.renderIf((0,v.default)(S),function(){return I.default.createElement("p",{className:"no-messages"},e.t("empty"))},function(){return(0,u.default)(S,function(t,n){return[e.renderDaySplitter(n)].concat(a(t.map(e.renderMessage)))})}))),I.default.createElement("div",{className:"composer"},this.renderIf(n,function(){return I.default.createElement(ie.default,{counterpart:b,error:o,isSendingMessage:p,messageDraft:m})},this.renderCannotSend))):null}},{key:"isScrollZonePrev",get:function(){return!!this.props.isScrollPrevEnabled&&this.messageListRef.scrollTop<this.props.scrollThreshold}},{key:"isScrollZoneNext",get:function(){if(!this.props.isScrollNextEnabled)return!1;var e=this.messageListRef,t=e.scrollHeight-e.clientHeight-this.props.scrollThreshold;return e.scrollTop>t}},{key:"isInScrollZone",get:function(){return this.isScrollZonePrev||this.isScrollZoneNext}}]),t}(k.default),ve={addSubscription:ne.addSubscription,loadMessages:ne.loadMessages,loadRelations:Z.load,markConversationAsReadByCounterpart:ne.markConversationAsReadByCounterpart,releaseInterface:M.releaseInterface,removeSubscription:ne.removeSubscription,showModal:M.showModal,showSubscriptionPackage:X.showSubscriptionPackage};he.propTypes=b({canSend:A.default.bool,counterpartLinkTo:A.default.string,selectedConversation:A.default.object.isRequired,counterpartLastReadMessageId:A.default.number,isBannedByCounterpart:A.default.bool,isBannedByCurrentUser:A.default.bool,isBannedByCountry:A.default.bool,isEmailVerified:A.default.bool,isLoading:A.default.bool,isScrollNextEnabled:A.default.bool,isScrollPrevEnabled:A.default.bool,isSending:A.default.bool,messageDraft:A.default.string,messages:A.default.array,error:A.default.object,scrollThreshold:A.default.number},(0,K.getActionPropTypes)(ve)),he.defaultProps={canSend:!1,isLoading:!1,isScrollNextEnabled:!1,isScrollPrevEnabled:!0,messages:[],messageDraft:"",scrollThreshold:30};var Ee=function(e,t){var n=t.selectedConversation,r=n.counterpart,a=n.canSend,o=e.auth,i=e.privateMessages,s=e.profile,l=e.ui,u=l.windowWidth,c=l.windowHeight,d=i.isLoading,f=i.isSending,m=i.error,g=r.isModel?(0,q.getViewCamUrl)(e,r.username):"/user/"+r.username,h=(0,p.default)(o,"currentUser.id");return{canBan:(0,$.getCanBan)(e,null,r.id),canSend:a,counterpartLinkTo:g,counterpartLastReadMessageId:(0,ee.getCounterpartLastReadMessageId)(e,r.id),currentUser:o.currentUser,error:m,isBanButtonVisible:(0,$.getIsBanButtonVisible)(e,r.id),isBannedByCounterpart:(0,$.getIsBanned)(e,r.id),isBannedByCountry:(0,$.getIsGeoBanned)(e,r.id),isBannedByCurrentUser:(0,te.getHasBanned)(e,h,r.id),isEmailVerified:s.user&&s.user.isEmailVerified,isFriendshipButtonVisible:(0,Q.getIsFriendshipButtonVisible)(e,r.id),isLayoutMoreThanXL:(0,z.getIsLayoutMoreThanXL)(e),isLoading:d,isLoggedIn:o.isLoggedIn&&!o.isLoggingOut,isSending:f,messageDraft:n.messageDraft,messages:(0,J.getCounterpartMessages)(e,r.id),windowHeight:c,windowWidth:u}},ye=function(e){return(0,R.bindActionCreators)(ve,e)};t.default=(0,w.connect)(Ee,ye)(he)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateMessagesComposer=void 0;var s=n(36),l=r(s),u=n(49),c=r(u),d=n(6),f=r(d),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},h=n(1),v=r(h),E=n(0),y=r(E),b=n(2),_=n(4),S=n(9),O=n(3),P=r(O),T=n(58),A=r(T),C=n(22),I=r(C),w=n(5),N=n(7),R=n(197),M=n(27),L=n(38),k=!w.BROWSER_CAPABILITIES.touch&&!w.BROWSER_CAPABILITIES.safariMobile,D=t.PrivateMessagesComposer=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.textAreaChangeHandler=function(){var e=r.messageRef.value;r.setState({messageDraft:e}),r.saveDraftDelayed(e)},r.saveDraftDelayed=(0,l.default)(function(e){return r.props.saveDraftDelayed(e,r.props.counterpart.id)},M.PRIVATE_MESSAGES_DRAFT_SAVE_DELAY),r.keyDownHandler=function(e){e.keyCode===w.KEY_CODES.enter&&(e.preventDefault(),e.stopPropagation(),r.sendMessage())},r.sendMessageHandler=function(e){e.preventDefault(),e.stopPropagation(),r.sendMessage()},r.sendOfflineTipHandler=function(e){e.preventDefault(),e.stopPropagation();var t=r.props,n=t.counterpart,a=t.currentUser,o=t.isLoggedIn,i=t.showModal,s=t.userProfile,l=o&&(a.isAdmin||a.isSupport),u=(0,f.default)(s,"tokens",0),c=r.state.messageDraft;if(o&&!l&&u<=0)return void i(w.MODAL_TYPES.PURCHASE_TOKENS,{triggerSource:w.APP_BUTTONS.PRIVATE_MESSAGES_TIP});i(w.MODAL_TYPES.SEND_OFFLINE_TIP,{user:n,message:c})},r.sendMessage=function(){var e=r.messageRef.value,t=r.props.sendMessage;e.trim()&&(t(e,r.props.counterpart.id),r.setState({messageDraft:""}))},i=n,o(r,i)}return i(t,e),m(t,[{key:"getDefaultState",value:function(){return{messageDraft:this.props.messageDraft}}},{key:"getNextState",value:function(e,t){var n=e.config,r=e.messageDraft,a=n.data.privateMessages.maxLength;return{messageDraft:e.counterpart.id===this.props.counterpart.id?this.state.messageDraft:r,maxMessageLength:a}}},{key:"componentDidRender",value:function(e,n,r){g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidRender",this).call(this,e,n,r);var a=this.messageRef;if(w.BROWSER_CAPABILITIES.android&&a===document.activeElement&&a.scrollIntoView(),!this.props.isSendingMessage&&k&&(a!==document.activeElement&&a.focus(),e.counterpart&&e.counterpart.id!==this.props.counterpart.id)){var o=a.value.length;a.setSelectionRange(o,o)}}},{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,c.default)(this.props,e)||!(0,c.default)(this.state,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,r=t.isSendingMessage,a=t.counterpart,o=a.isApprovedModel,i=this.state,s=i.maxMessageLength,l=i.messageDraft,u=!l||!l.trim()||r,c="private_messages_composer_"+this.uid,d=this.props.currentUser,f=o&&!d.isModel&&!d.isStudio;return y.default.createElement("div",{className:this.c("private-messages-composer",{"is-pending":r}),"data-component-name":"PrivateMessagesComposer"},y.default.createElement("div",{className:"textarea-container"},y.default.createElement("div",{className:"textarea-wrapper"},y.default.createElement("textarea",{disabled:r,maxLength:s,onChange:this.textAreaChangeHandler,onKeyDown:this.keyDownHandler,ref:function(t){e.messageRef=t},value:l})),y.default.createElement("div",{className:"auto-size"},l||"_")),y.default.createElement("div",{className:"actions"},y.default.createElement("span",null,this.renderIf(r,function(){return y.default.createElement(I.default,{isInline:!0,size:e.props.loaderSize})}),y.default.createElement("button",{className:this.c("btn btn-send btn-medium",{disabled:u}),id:c,onClick:this.sendMessageHandler},this.t("button.send"))),this.renderIf(f,function(){return y.default.createElement("button",{className:e.c("btn btn-default send-private-tip-btn"),id:c,onClick:e.sendOfflineTipHandler},e.t("button.sendPrivateTip"))})),this.renderIf(n,function(){return y.default.createElement(A.default,{error:n,fieldName:"body",placement:"top",targetId:c})}))}}]),t}(P.default),U={saveDraftDelayed:R.saveDraftDelayed,sendMessage:R.sendMessage,showModal:S.showModal};D.propTypes=p({counterpart:v.default.shape({id:v.default.number.isRequired}),error:v.default.object,isSendingMessage:v.default.bool,loaderSize:v.default.number,messageDraft:v.default.string,windowWidth:v.default.number,windowHeight:v.default.number},(0,N.getActionPropTypes)(U)),D.defaultProps={loaderSize:36};var j=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.config,i=e.ui,s=i.windowWidth,l=i.windowHeight;return{config:o,currentUser:n,isLoggedIn:r&&!a,userProfile:(0,L.getCurrentUserProfile)(e),windowWidth:s,windowHeight:l}},F=function(e){return(0,_.bindActionCreators)(U,e)};t.default=(0,b.connect)(j,F)(D)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateMessagesListDropDown=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(4),m=n(9),g=n(3),h=r(g),v=n(8),E=r(v),y=n(21),b=n(1402),_=r(b),S=n(384),O=r(S),P=n(647),T=r(P),A=t.PrivateMessagesListDropDown=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.propsUpdateToActionsMap=[{update:y.hasInterfaceBlockChanged,action:function(e){return r.interfaceBlockChangeHandler(e)}}],r.toggleMenuClickHandler=function(e){e.preventDefault(),r.state.isDropdownOpen?r.props.releaseInterface():r.props.blockInterface(e.target)},r.subscriptionClickEventHandler=function(e){e.preventDefault(),e.stopPropagation(),r.props.onSubscriptionChange()},r.interfaceBlockChangeHandler=function(e){var t=e.currentBlockingComponent,n=e.isInterfaceBlocked;r.setState({isDropdownOpen:n&&r.renderRootRef&&r.renderRootRef.contains(t)})},r.renderMenu=function(){var e=r.props,t=e.counterpart,n=e.isBanButtonVisible,a=e.isFriendshipButtonVisible,o=e.isSubscribed,i=e.isSubscriptionVisible;return d.default.createElement("div",{className:"dropdown-menu"},d.default.createElement("div",{className:"dropdown-menu-arrow"}),d.default.createElement("ul",null,r.renderIf(a,d.default.createElement("li",null,d.default.createElement(O.default,{type:"anchor",user:t}))),r.renderIf(n,d.default.createElement("li",null,d.default.createElement(_.default,{type:"anchor",user:t}))),r.renderIf(i,d.default.createElement("li",{className:"subscription-button"},d.default.createElement("a",{onClick:r.subscriptionClickEventHandler},d.default.createElement(T.default,{counterpart:t,isSubscribed:o}))))))},i=n,o(r,i)}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{isDropdownOpen:this.props.isDropdownOpen}}},{key:"render",value:function(){var e=this,t=this.state.isDropdownOpen,n=this.props,r=n.isBanButtonVisible,a=n.isFriendshipButtonVisible,o=n.isSubscriptionVisible;return r||a||o?d.default.createElement("span",{className:this.c("private-messages-list-dropdown",{open:t}),ref:function(t){e.renderRootRef=t},onClick:this.toggleMenuClickHandler,"data-component-name":"PrivateMessagesListDropDown"},d.default.createElement("a",{className:"menu-button"},d.default.createElement(E.default,{img:"more"})),this.renderIf(t,this.renderMenu)):null}}]),t}(h.default);A.propTypes={isBanButtonVisible:u.default.bool,isFriendshipButtonVisible:u.default.bool,isSubscribed:u.default.bool,isSubscriptionVisible:u.default.bool,counterpart:u.default.object.isRequired,onSubscriptionChange:u.default.func,blockInterface:u.default.func.isRequired,releaseInterface:u.default.func.isRequired},A.defaultProps={isBanButtonVisible:!0};var C=function(e){return(0,p.bindActionCreators)({blockInterface:m.blockInterface,releaseInterface:m.releaseInterface},e)},I=function(e){var t=e.ui;return{currentBlockingComponent:t.currentBlockingComponent,isInterfaceBlocked:t.isInterfaceBlocked}};t.default=(0,f.connect)(I,C)(A)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BanButton=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(4),m=n(3),g=r(m),h=n(10),v=r(h),E=n(130),y=n(164),b=n(91),_=t.BanButton=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.clickHandler=function(){var e=r.props,t=e.ban,n=e.unBan,a=e.user,o=r.props.currentUser;r.props.hasBanned?n([a.id]):t(o.id,a.id,!1)},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.canBan,n=e.hasBanned,r=e.isLoggedIn,a=e.isPending,o=e.type;if(!r||!t&&!n)return null;var i=this.t(n?"button.unblockUser":"button.blockUser");return"anchor"===o?d.default.createElement("a",{className:"btn-ban",disabled:a,onClick:this.clickHandler,"data-component-name":"BanButton"},i):d.default.createElement(v.default,{className:"btn-ban",size:"default",disabled:a,onClick:this.clickHandler,type:o,"data-component-name":"BanButton"},i)}}]),t}(g.default);_.propTypes={currentUser:u.default.object,hasBanned:u.default.bool,isLoggedIn:u.default.bool,isPending:u.default.bool,type:u.default.string,user:u.default.object.isRequired};var S=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=e.userBans,s=t.user;return{canBan:(0,b.getCanBan)(e,null,s.id),currentUser:r,hasBanned:(0,y.getHasBanned)(e,r.id,s.id),isLoggedIn:a&&!o,isPending:i.isPending}},O=function(e){return(0,p.bindActionCreators)({ban:E.ban,unBan:E.unBan},e)};t.default=(0,f.connect)(S,O)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateMessageFriendship=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(4),m=n(3),g=r(m),h=n(10),v=r(h),E=n(117),y=n(27),b=n(100),_=t.PrivateMessageFriendship=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.friendshipAcceptButtonClickHandler=function(){r.props.addFriends(r.props.counterpart.id)},r.friendshipDeclineButtonClickHandler=function(){r.props.removeFriends([r.props.counterpart.id])},i=n,o(r,i)}return i(t,e),s(t,[{key:"renderDialogMessage",value:function(e){var t=this.c("message private-message-friendship friendship-request-dialog-message",{incoming:this.props.isIncoming});return d.default.createElement("div",{className:t},d.default.createElement("div",{className:"body"},e),this.props.children)}},{key:"renderTextMessage",value:function(e){var t=e.text,n=e.className,r=void 0===n?null:n,a=e.username,o=void 0===a?null:a;return d.default.createElement("div",{className:this.c("message private-message-friendship friendship-request-text",{incoming:this.props.isIncoming})},d.default.createElement("div",{className:this.c("body",r)},this.renderIf(o,function(){return d.default.createElement("div",{className:"username"},o)}),d.default.createElement("div",{className:"text"},t)),this.props.children)}},{key:"render",value:function(){var e=y.PRIVATE_MESSAGES_FRIENDSHIP_TYPES.FRIENDSHIP_REQUEST_SENT,t=y.PRIVATE_MESSAGES_FRIENDSHIP_TYPES.FRIENDSHIP_REQUEST_RECEIVED,n=y.PRIVATE_MESSAGES_FRIENDSHIP_TYPES.FRIENDSHIP_APPROVE_SENT,r=y.PRIVATE_MESSAGES_FRIENDSHIP_TYPES.FRIENDSHIP_APPROVE_RECEIVED,a=y.PRIVATE_MESSAGES_FRIENDSHIP_TYPES.FRIENDSHIP_DECLINE_SENT,o=this.props,i=o.counterpart,s=o.currentUser,l=o.friendship,u=o.isIncoming,c=o.type,f=c===e,p=c===r,m=c===t,g=c===n,h=c===a;if(m){if(!l)return null;l.status===y.FRIENDSHIP_STATUSES.APPROVED?(g=!0,m=!1):l.status===y.FRIENDSHIP_STATUSES.DECLINED&&(h=!0,m=!1)}return f&&!u?this.renderTextMessage({text:this.t("privateMessages.friendshipMessage.friendship.requested",{username:i.username}),className:"friendship-status-requested",username:s.username}):m?this.renderDialogMessage(d.default.createElement("div",{className:"friendship-request-dialog"},d.default.createElement("p",null,this.t("privateMessages.friendshipMessage.friendship.requested",{username:s.username})),d.default.createElement("div",{className:"buttons"},d.default.createElement(v.default,{style:"decline",onClick:this.friendshipDeclineButtonClickHandler},this.t("button.decline")),d.default.createElement(v.default,{style:"primary",onClick:this.friendshipAcceptButtonClickHandler},this.t("button.accept"))))):g&&u?this.renderDialogMessage(d.default.createElement("div",{className:"friendship-request-dialog"},d.default.createElement("p",null,this.t("privateMessages.friendshipMessage.friendship.approved")))):p&&u?this.renderTextMessage({text:this.t("privateMessages.friendshipMessage.approved",{username:s.username}),className:"friendship-status-approved",username:i.username}):h&&u?this.renderDialogMessage(d.default.createElement("div",{className:"friendship-request-dialog"},d.default.createElement("p",null,this.t("privateMessages.friendshipMessage.friendship.declined")))):null}}]),t}(g.default);_.propTypes={currentUser:u.default.shape({username:u.default.string}),counterpart:u.default.shape({id:u.default.number,username:u.default.string}),friendship:u.default.shape({status:u.default.string}),isIncoming:u.default.bool,isLoggedIn:u.default.bool,type:u.default.string};var S=function(e,t){var n=e.auth,r=t.counterpart;return{currentUser:n.currentUser,isLoggedIn:n.isLoggedIn&&!n.isLoggingOut,friendship:(0,b.getIncomingFriendship)(e,r.id)}},O=function(e){return(0,p.bindActionCreators)({addFriends:E.add,removeFriends:E.remove},e)};t.default=(0,f.connect)(S,O)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProfilePage=void 0;var l=n(86),u=r(l),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),m=n(0),g=r(m),h=n(2),v=n(4),E=n(151),y=r(E),b=n(23),_=r(b),S=n(22),O=r(S),P=n(135),T=r(P),A=n(19),C=n(7),I=n(161),w=n(43),N=n(643),R=r(N),M=n(41),L=n(38),k=n(91),D=n(44),U=t.ProfilePage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:["user"],action:function(e){(0,A.redirectIfUrlDoesntMatchUserRole)(e,e.history.replace)}},{update:[M.currentUserHasChanged,M.currentUserRolesHasChanged,M.propsParamsUsernameHasChanged],action:function(e){var t=e.isOwnProfile,n=e.loadAvailableSettings;(0,e.loadProfile)({username:e.match.params.username}),t&&n()}}]),r.renderPending=function(){return g.default.createElement("div",{className:"profile-page"},g.default.createElement(T.default,null),g.default.createElement("div",{className:"page"},g.default.createElement("div",{className:"loader-container"},g.default.createElement(O.default,{isCentered:!0}))))},s=n,i(r,s)}return s(t,e),d(t,[{key:"getNextState",value:function(e,t){var n=e.isNotFound,r=e.user;return{isDataPending:!n&&!r,isDataFailed:n}}},{key:"renderMeta",value:function(){var e=this.props,t=e.isOwnProfile,n=e.location,r=e.match.params,a=r.username,o=n.pathname.split("/")[1],i="model"===o,s="user"===o,l=i?"model":"user",u=i?"profile.model":"default",c=t?"my":l,d=s?"noindex":"all";return g.default.createElement(y.default,{title:this.twl("seo.title.profile."+c,{username:a}),description:this.twl("seo.description."+u,{username:a}),robots:d})}},{key:"renderReady",value:function(){var e=this.props,t=e.isOwnProfile,n=e.isProfileAvailable,r=e.user;return g.default.createElement("div",{className:this.c("profile-page",{"not-available":!n}),"data-component-name":"ProfilePage"},g.default.createElement(T.default,null),g.default.createElement("div",{className:"page"},g.default.createElement(R.default,{isOwnProfile:t,user:r})))}}]),t}(_.default);U.checkAccess=A.redirectIfUrlDoesntMatchUserRole;var j={loadAvailableSettings:I.load,loadProfile:w.load,refreshProfile:w.refresh};U.propTypes=c({currentUser:p.default.object,isLoggedIn:p.default.bool,isNotFound:p.default.bool,isOwnProfile:p.default.bool,isProfileAvailable:p.default.bool,match:p.default.shape({params:p.default.shape({username:p.default.string.isRequired})})},(0,C.getActionPropTypes)(j));var F=(0,D.createUsernameSelector)(),B=function(e,t){var n=e.auth,r=n.currentUser,a=n.isLoggedIn,o=n.isLoggingOut,i=t.match.params.username,s=a&&(0,u.default)(r.username)===(0,u.default)(i),l=s?(0,L.getCurrentUserProfile)(e):F(e,t);return{currentUser:r,isLoggedIn:a&&!o,isNotFound:(0,D.getIsNotFound)(e,i),isOwnProfile:s,isProfileAvailable:!!l&&(0,k.getIsProfileAvailable)(e,l.id),user:l}},H=function(e){return(0,v.bindActionCreators)(j,e)};t.default=(0,h.connect)(B,H)(U)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ResetPasswordPage=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(31),h=n(4),v=n(23),E=r(v),y=n(22),b=r(y),_=n(7),S=n(294),O=n(1406),P=r(O),T=t.ResetPasswordPage=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.title="seo.title.resetPassword",i=n,o(r,i)}return i(t,e),l(t,[{key:"componentWillMount",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this);var e=this.props,n=e.isLoggedIn,r=e.checkRecoveryKey,a=e.match.params.recoveryKey,o=e.routerPush;!n&&a?r(a):o("/")}},{key:"renderError",value:function(){return p.default.createElement("div",{className:"container island-page reset-password-page"},p.default.createElement("div",{className:"reset-password island-wrapper"},p.default.createElement("div",{className:"island island-small text-center"},this.t("passwordRecovery.recoverCheckError"))))}},{key:"renderReady",value:function(){var e=this.props,t=e.isCheckingRecoveryKey,n=e.match.params.recoveryKey;return e.recoveryKeyCheckError||!n?this.renderError():p.default.createElement("div",{className:"container island-page reset-password-page","data-component-name":"ResetPasswordPage"},this.renderIf(t,function(){return p.default.createElement(b.default,{isCentered:!0})},function(){return p.default.createElement(P.default,{recoveryKey:n})}))}}]),t}(E.default),A={checkRecoveryKey:S.checkRecoveryKey,routerPush:g.push};T.propTypes=s({isCheckingRecoveryKey:d.default.bool.isRequired,isLoggedIn:d.default.bool.isRequired,match:d.default.shape({params:d.default.shape({recoveryKey:d.default.string.isRequired}).isRequired}).isRequired,recoveryKeyCheckError:d.default.instanceOf(Error)},(0,_.getActionPropTypes)(A));var C=function(e){var t=e.auth,n=t.isLoggedIn,r=t.isLoggingOut,a=e.passwordRecovery,o=a.recoveryKeyCheckError;return{isCheckingRecoveryKey:a.isCheckingRecoveryKey,isLoggedIn:n&&!r,recoveryKeyCheckError:o}},I=function(e){return(0,h.bindActionCreators)(A,e)};t.default=(0,m.connect)(C,I)(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(76),u=r(l),c=n(6),d=r(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(1),g=r(m),h=n(0),v=r(h),E=n(31),y=n(2),b=n(4),_=n(3),S=r(_),O=n(10),P=r(O),T=n(58),A=r(T),C=n(40),I=r(C),w=n(5),N=n(7),R=n(294),M=n(27),L=n(41),k=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:[L.currentUserHasChangedAndIsLoggedIn],action:function(e){return(0,e.routerPush)("/")}}]),r.resetPasswordButtonClickHandler=function(e){e.preventDefault();var t=(0,u.default)((0,d.default)(r.passwordRef,"value","")),n=(0,u.default)((0,d.default)(r.passwordRepeatRef,"value",""));r.props.resetPassword(r.props.recoveryKey,t,n)},s=n,i(r,s)}return s(t,e),p(t,[{key:"renderError",value:function(){return v.default.createElement("div",{className:"reset-password island-wrapper"},v.default.createElement("div",{className:"island island-small text-center"},this.t("passwordRecovery.recoverCheckError")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isResettingPassword,r=t.resetPasswordError,a=t.resetPasswordSuccess,o=(0,d.default)(r,"details",{});return r&&"passwordError"!==o.type&&"passwordRepeatError"!==o.type?this.renderError():v.default.createElement("div",{className:"reset-password island-wrapper","data-component-name":"ResetPassword"},v.default.createElement("div",{className:"island island-small"},v.default.createElement("div",{className:"island-header"},v.default.createElement("h1",{className:"island-title"},this.t("passwordRecovery.resetPassword"))),v.default.createElement("form",{className:"forgot-password-form island-form"},v.default.createElement("div",{className:"field field-password"},v.default.createElement(I.default,{autoCapitalize:"none",className:this.c("input-password",{error:!1}),disabled:a,minLength:M.MIN_PASSWORD_LENGTH,maxLength:w.DEFAULT_MAX_INPUT_LENGTH,placeholder:this.t("passwordRecovery.newPassword"),ref:function(t){e.passwordRef=t},id:"reset_password_password",required:!0,type:"password"}),this.renderIf("passwordError"===o.type,function(){return v.default.createElement(A.default,{error:{message:o.text},targetId:"reset_password_password"})})),v.default.createElement("div",{className:"field field-password"},v.default.createElement(I.default,{autoCapitalize:"none",className:this.c("input-password",{error:!1}),disabled:a,minLength:M.MIN_PASSWORD_LENGTH,maxLength:w.DEFAULT_MAX_INPUT_LENGTH,placeholder:this.t("passwordRecovery.newPasswordRepeat"),ref:function(t){e.passwordRepeatRef=t},id:"reset_password_passwordRepeat",required:!0,type:"password"}),this.renderIf("passwordRepeatError"===o.type,function(){return v.default.createElement(A.default,{error:{message:o.text},targetId:"reset_password_passwordRepeat"})})),v.default.createElement("div",{className:"field field-action field-submit"},v.default.createElement(P.default,{className:"input-submit btn-action",disabled:n||a,style:"primary",type:"submit",onClick:this.resetPasswordButtonClickHandler},this.t("button.submit"))))))}}]),t}(S.default),D={resetPassword:R.resetPassword,routerPush:E.push};k.propTypes=f({isLoggedIn:g.default.bool.isRequired,isResettingPassword:g.default.bool.isRequired,recoveryKey:g.default.string.isRequired,resetPasswordSuccess:g.default.bool.isRequired,resetPasswordError:g.default.instanceOf(Error)},(0,N.getActionPropTypes)(D));var U=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.passwordRecovery,i=o.isResettingPassword,s=o.resetPasswordError,l=o.resetPasswordSuccess;return{currentUser:n,isLoggedIn:r&&!a,isResettingPassword:i,resetPasswordError:s,resetPasswordSuccess:l}},j=function(e){return(0,b.bindActionCreators)(D,e)};t.default=(0,y.connect)(U,j)(k)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsPage=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(2),g=n(4),h=n(23),v=r(h),E=n(135),y=r(E),b=n(22),_=r(b),S=n(7),O=n(19),P=n(161),T=n(43),A=n(37),C=n(1408),I=r(C),w=n(1411),N=r(w),R=n(1412),M=r(R),L=n(41),k=t.SettingsPage=function(e){function t(){var e,n,r,s;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.title="seo.title.settings",r.propsUpdateToActionsMap=[].concat(a(r.propsUpdateToActionsMap),[{update:L.currentUserHasChangedAndIsLoggedIn,action:function(e){var t=e.currentUser,n=e.loadAvailableSettings,r=e.loadMoreUsers;n(),t.isStudio&&r(t.staffIds)}}]),s=n,i(r,s)}return s(t,e),u(t,[{key:"renderPending",value:function(){return p.default.createElement("div",{className:"settings-page"},p.default.createElement(y.default,null),p.default.createElement("div",{className:"page"},p.default.createElement("div",{className:"loader-container"},p.default.createElement(_.default,{isCentered:!0}))))}},{key:"renderSettings",value:function(){var e=this.props.currentUser;return e.isModel?p.default.createElement(I.default,null):e.isStudio?p.default.createElement(M.default,null):p.default.createElement(N.default,null)}},{key:"renderReady",value:function(){return this.props.isLoggedIn?p.default.createElement("div",{className:"settings-page","data-component-name":"SettingsPage"},p.default.createElement(y.default,null),p.default.createElement("div",{className:"page container"},p.default.createElement("div",{className:"page-header"},p.default.createElement("h1",null,this.t("settings.title"))),this.renderSettings())):null}}]),t}(v.default);k.checkAccess=O.redirectGuestToLoginOrIndex;var D={loadAvailableSettings:P.load,loadMoreUsers:A.loadMore,refreshProfile:T.refresh};k.propTypes=l({currentUser:d.default.object,isLoggedIn:d.default.bool},(0,S.getActionPropTypes)(D));var U=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut;return{currentUser:n,isLoggedIn:r&&!a}},j=function(e){return(0,g.bindActionCreators)(D,e)};t.default=(0,m.connect)(U,j)(k)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(167),c=r(u),d=n(124),f=r(d),p=n(169),m=r(p),g=n(33),h=r(g),v=n(30),E=r(v),y=n(115),b=r(y),_=n(11),S=r(_),O=n(70),P=r(O),T=n(49),A=r(T),C=n(13),I=r(C),w=n(48),N=r(w),R=n(400),M=r(R),L=n(6),k=r(L),D=n(172),U=r(D),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),B=n(1),H=r(B),V=n(0),G=r(V),x=n(2),W=n(4),Y=n(3),K=r(Y),q=n(10),z=r(q),X=n(22),Z=r(X),Q=n(92),J=r(Q),$=n(43),ee=n(1409),te=r(ee),ne=n(401),re=r(ne),ae=n(402),oe=r(ae),ie=n(648),se=r(ie),le=n(403),ue=r(le),ce=n(404),de=r(ce),fe=n(174),pe=r(fe),me=n(38),ge=["bannedCountries","bannedStates"],he={privateRate:"rates.private",spyRate:"rates.spy",p2pRate:"rates.p2p"},ve=(0,P.default)(he),Ee=function(e){var t=e.bannedCountries,n=e.bannedStates;return{bannedCountries:(0,f.default)((0,P.default)(n).concat(t)),bannedStates:n}},ye=function(e){function t(){var e,n,r,a;i(this,t);for(var l=arguments.length,u=Array(l),d=0;d<l;d++)u[d]=arguments[d];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.saveSettings=function(e,t){var n={success:r.t("notifications.updateProfileSuccess.settings"),error:r.t("notifications.updateProfileError.settings")};r.props.updateProfile(e,t,{notifications:n})},r.bannedCountriesSelectHandler=function(e){var t=r.state.userModified,n=(0,S.default)(e,"value"),a=c.default.apply(void 0,[n].concat(o((0,P.default)(t.bannedStates)))),i=(0,h.default)(t.bannedStates,n);r.setState({userModified:j({},t,{bannedCountries:a,bannedStates:i})})},r.bannedRegionsSelectHandler=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=r.state.userModified,a=n.bannedCountries,i=n.bannedStates;(0,I.default)(t)?(i=(0,b.default)(i,e),a.push(e)):(i[e]=(0,S.default)(t,"value"),a=c.default.apply(void 0,[a].concat(o((0,P.default)(i))))),r.setState({userModified:j({},n,{bannedCountries:a,bannedStates:i})})},r.saveBannedCountriesButtonClickHandler=function(){r.saveSettings((0,h.default)(r.state.userModified,ge),$.UPDATE_TYPES.SETTINGS_BANNED)},r.savePricingButtonClickHandler=function(){r.saveSettings((0,h.default)(r.state.userModified,ve),$.UPDATE_TYPES.SETTINGS_PRICING)},r.selectFieldChangeHandler=function(e,t){var n=t.value,a=/^rates\./,o=a.test(e)?e.replace(a,"").concat("Rate"):e,i=(0,U.default)(r.state.userModified);i[o]=n,r.setState({userModified:i})},a=n,s(r,a)}return l(t,e),F(t,[{key:"getNextState",value:function(e,t){var n=e.userProfile;return{userModified:this.state.userModified||n}}},{key:"renderSelect",value:function(e){var t=this,n=this.props.availableSettings,r=e.fieldName,o=e.fieldClassName,i=e.settingName,s=a(e,["fieldName","fieldClassName","settingName"]),l="settings_"+i+"_"+r;return(0,m.default)(s,"inputProps.id",l),G.default.createElement("div",{className:this.c("settings-field",o),key:r},G.default.createElement("label",{className:"settings-label",htmlFor:l},this.t("settings."+i+".labels."+r)),G.default.createElement("span",{className:"settings-input"},G.default.createElement(J.default,j({value:(0,k.default)(this.state.userModified,r),onSelect:(0,E.default)(this.selectFieldChangeHandler,r),options:(0,S.default)((0,k.default)(n,r),function(e){var n="settings."+i+".options."+r+"."+e,a=t.t(n);return{value:e,label:a===n?e:a}})},s))))}},{key:"renderPricing",value:function(){var e=this,t=this.props.isPending||(0,A.default)((0,h.default)(this.props.userProfile,ve),(0,h.default)(this.state.userModified,ve));return G.default.createElement(pe.default,{key:"pricing",title:this.t("settings.pricing.title")},G.default.createElement("form",{className:"settings-form settings-form-inline settings-form-pricing"},(0,S.default)(he,function(t,n){return e.renderSelect({fieldName:t,settingName:"pricing",value:e.state.userModified[n]})})),G.default.createElement(z.default,{disabled:t,onClick:this.savePricingButtonClickHandler,size:"large",style:"apply"},this.t("settings.save")))}},{key:"renderBanned",value:function(){var e=this,t=this.props.config,n=t.countries,r=t.regions,a=Ee(this.props.userProfile),o=Ee(this.state.userModified),i=(0,I.default)(a.bannedStates)?(0,I.default)(o.bannedStates):(0,A.default)(a.bannedStates,o.bannedStates),s=this.props.isPending||(0,A.default)(a.bannedCountries,o.bannedCountries)&&i,l=n.map(function(t){var n=t.code;return{label:e.t("country."+n),value:n}}),u=(0,M.default)((0,P.default)(r),o.bannedCountries);return G.default.createElement(pe.default,{key:"bannedCountries",title:this.t("settings.bannedCountries.title")},G.default.createElement("form",{className:"settings-form settings-form-inline settings-form-banned-countries"},G.default.createElement("div",{className:this.c("settings-field")},G.default.createElement(J.default,{isClearable:!0,isMultiple:!0,isSearchable:!0,onSelect:this.bannedCountriesSelectHandler,options:l,value:o.bannedCountries}))),u.map(function(t){return G.default.createElement(te.default,{country:(0,N.default)(n,{code:t}),key:t,onSelect:e.bannedRegionsSelectHandler,regions:r[t],value:(0,k.default)(o.bannedStates,t,[])})}),G.default.createElement(z.default,{disabled:s,onClick:this.saveBannedCountriesButtonClickHandler,size:"large",style:"apply"},this.t("settings.save")))}},{key:"render",value:function(){var e=this.props,t=e.availableSettings,n=e.canDeleteAccount,r=e.isPending,a=e.userProfile;return t&&a?G.default.createElement("div",{className:this.c("settings-content",{"is-pending":r}),"data-component-name":"ModelSettings"},G.default.createElement("div",{className:"settings-wrapper"},G.default.createElement("div",{className:"settings-left"},this.renderPricing(),this.renderBanned(),G.default.createElement(de.default,null),G.default.createElement(ue.default,null)),G.default.createElement("div",{className:"settings-right"},G.default.createElement(re.default,null),G.default.createElement(oe.default,null))),this.renderIf(n,G.default.createElement(se.default,null))):G.default.createElement("div",{className:"loader-container","data-component-name":"ModelSettings"},G.default.createElement(Z.default,{isCentered:!0}))}}]),t}(K.default);ye.propTypes={availableSettings:H.default.object,canDeleteAccount:H.default.bool,config:H.default.object,currentUser:H.default.object,isLoggedIn:H.default.bool,isPending:H.default.bool,updatePrepare:H.default.func,updateProfile:H.default.func,userProfile:H.default.object};var be=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.availableSettings,i=o.data,s=o.isPending,l=e.config,u=l.data,c=l.whiteLabelId,d=(0,me.getCurrentUserProfile)(e);return{availableSettings:i,canDeleteAccount:!c&&!d.studioId,config:u,currentUser:n,isLoggedIn:r&&!a,isPending:s,userProfile:d}},_e=function(e){return(0,W.bindActionCreators)({updateProfile:$.updateProfile,updatePrepare:$.updatePrepare},e)};t.default=(0,x.connect)(be,_e)(ye)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),l=r(s),u=n(13),c=r(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),m=n(0),g=r(m),h=n(3),v=r(h),E=n(40),y=r(E),b=n(92),_=r(b),S=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.bannedRegionsSelectAllHandler=function(){var e=r.props,t=e.country,n=e.onSelect;r.setState({isOnlySelected:!1}),n(t.code,[])},r.bannedRegionsSelectHandler=function(e){var t=r.props,n=t.country,a=t.onSelect;r.setState({isOnlySelected:e.length}),a(n.code,e)},r.onlySelectedClickHandler=function(){r.setState({isOnlySelected:!0}),r.selectRef.getWrappedInstance().focus()},i=n,o(r,i)}return i(t,e),d(t,[{key:"getDefaultState",value:function(){return{isOnlySelected:!(0,c.default)(this.props.value)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.regions,r=t.value,a=t.country,o=this.state.isOnlySelected;return g.default.createElement("div",{className:"banned-region","data-component-name":"BannedRegions"},g.default.createElement("h4",null,this.t("settings.bannedRegions.title",{country:a.title})),g.default.createElement("div",{className:"radio-container"},g.default.createElement(y.default,{id:"banned_regions_radio_all_"+a.code,name:"banned_regions_radio_"+a.code,onChange:this.bannedRegionsSelectAllHandler,type:"radio",size:"medium",checked:!o}),g.default.createElement("label",{htmlFor:"banned_regions_radio_all_"+a.code},this.t("settings.bannedRegions.all"))),g.default.createElement("div",{className:"radio-container"},g.default.createElement(y.default,{id:"banned_regions_radio_only_"+a.code,name:"banned_regions_radio_"+a.code,type:"radio",size:"medium",onClick:this.onlySelectedClickHandler,checked:o}),g.default.createElement("label",{htmlFor:"banned_regions_radio_only_"+a.code},this.t("settings.bannedRegions.onlyFollowing"),":")),g.default.createElement("form",{className:"settings-form settings-form-inline settings-form-banned-regions"},g.default.createElement("div",{className:"settings-field"},g.default.createElement(_.default,{isClearable:!0,isMultiple:!0,isSearchable:!0,onSelect:this.bannedRegionsSelectHandler,options:(0,l.default)(n,function(e){var t=e.code;return{label:e.title,value:t}}),ref:function(t){e.selectRef=t},value:r}))))}}]),t}(v.default);S.propTypes={country:p.default.object.isRequired,onSelect:p.default.func.isRequired,regions:p.default.array.isRequired,value:p.default.array.isRequired},t.default=S},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(4),m=n(3),g=r(m),h=n(22),v=r(h),E=n(43),y=n(401),b=r(y),_=n(402),S=r(_),O=n(648),P=r(O),T=n(403),A=r(T),C=n(404),I=r(C),w=n(38),N=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.canDeleteAccount,n=e.isPending,r=e.userProfile;return n||!r?d.default.createElement("div",{className:"loader-container","data-component-name":"UserSettings"},d.default.createElement(v.default,{isCentered:!0})):d.default.createElement("div",{className:this.c("settings-content",{"is-pending":n}),"data-component-name":"UserSettings"},d.default.createElement("div",{className:"settings-wrapper"},d.default.createElement("div",{className:"settings-left"},d.default.createElement(I.default,null),d.default.createElement(A.default,null)),d.default.createElement("div",{className:"settings-right"},d.default.createElement(b.default,null),d.default.createElement(S.default,null))),this.renderIf(t,d.default.createElement(P.default,null)))}}]),t}(g.default);N.propTypes={canDeleteAccount:u.default.bool,isPending:u.default.bool,updatePrepare:u.default.func,updateProfile:u.default.func,userProfile:u.default.object};var R=function(e){var t=e.availableSettings.isPending;return{canDeleteAccount:!e.config.whiteLabelId,isPending:t,userProfile:(0,w.getCurrentUserProfile)(e)}},M=function(e){return(0,p.bindActionCreators)({updateProfile:E.updateProfile,updatePrepare:E.updatePrepare},e)};t.default=(0,f.connect)(R,M)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(3),h=r(g),v=n(22),E=r(v),y=n(375),b=n(401),_=r(b),S=n(402),O=r(S),P=n(403),T=r(P),A=n(1413),C=r(A),I=n(404),w=r(I),N=n(1414),R=r(N),M=n(38),L=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentWillMount",value:function(){(0,this.props.load)(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this)}},{key:"render",value:function(){var e=this.props,t=e.isPending,n=e.userProfile;return t||!n?f.default.createElement("div",{className:"loader-container","data-component-name":"StudioSettings"},f.default.createElement(E.default,{isCentered:!0})):f.default.createElement("div",{className:this.c("settings-content",{"is-pending":t}),"data-component-name":"StudioSettings"},f.default.createElement("div",{className:"settings-wrapper"},f.default.createElement("div",{className:"settings-left"},f.default.createElement(w.default,null),f.default.createElement(R.default,null),f.default.createElement(C.default,null),f.default.createElement(T.default,null)),f.default.createElement("div",{className:"settings-right"},f.default.createElement(_.default,null),f.default.createElement(O.default,null))))}}]),t}(h.default);L.propTypes={isPending:c.default.bool,updatePrepare:c.default.func,updateProfile:c.default.func,userProfile:c.default.object};var k=function(e){return{isPending:e.availableSettings.isPending,userProfile:(0,M.getCurrentUserProfile)(e)}},D=function(e){return(0,m.bindActionCreators)({load:y.load},e)};t.default=(0,p.connect)(k,D)(L)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(2),p=n(4),m=n(3),g=r(m),h=n(10),v=r(h),E=n(623),y=r(E),b=n(375),_=n(174),S=r(_),O={ID:"id"},P=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.documentChangeHandler=function(e){var t=e.type,n=e.file,a=e.isReady,o=r.props.validateDocument;a&&(o({type:t,file:n}),r.setState({type:t,file:n}))},r.saveButtonClickHandler=function(){var e=r.props.upload,t=r.state;e({type:t.type,file:t.file})},i=n,o(r,i)}return i(t,e),s(t,[{key:"getDefaultState",value:function(){return{type:O.ID,file:null}}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.isDocumentUploaded,r=e.isUpdating,a=e.error,o=this.state.file,i=Boolean(t||r||n||!o||a);return d.default.createElement(S.default,{key:"person",title:this.t("settings.person.title"),"data-component-name":"PersonSettings"},d.default.createElement(y.default,{document:n?{status:"uploaded"}:{},type:O.ID,error:a,isPending:t||r,isReadOnly:n,isShowPreview:!n,onChange:this.documentChangeHandler}),d.default.createElement(v.default,{disabled:i,onClick:this.saveButtonClickHandler,size:"large",style:"apply"},this.t("settings.save")))}}]),t}(g.default);P.propTypes={isLoading:u.default.bool,isUpdating:u.default.bool,isDocumentUploaded:u.default.bool,error:u.default.string,upload:u.default.func.isRequired,validateDocument:u.default.func.isRequired};var T=function(e){var t=e.studioSettings,n=t.isLoading,r=t.isUpdating,a=t.isDocumentUploaded;return{isLoading:n,isUpdating:r,error:t.error,isDocumentUploaded:a}},A=function(e){return(0,p.bindActionCreators)({upload:b.upload,validateDocument:b.validateDocument},e)};t.default=(0,f.connect)(T,A)(P)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(160),u=r(l),c=n(11),d=r(c),f=n(400),p=r(f),m=n(6),g=r(m),h=n(47),v=r(h),E=n(358),y=r(E),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=n(1),O=r(S),P=n(0),T=r(P),A=n(2),C=n(4),I=n(3),w=r(I),N=n(10),R=r(N),M=n(58),L=r(M),k=n(1415),D=r(k),U=n(7),j=n(43),F=n(174),B=r(F),H=n(38),V=n(44),G=j.UPDATE_TYPES.STUDIO_STAFF,x=10,W=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.saveButtonClickHandler=function(){var e=r.props.updateStaff,t=r.state,n=t.staffUsernames;t.error||e(n)},r.inputFieldChangeHandler=function(e){var t=(0,p.default)(r.state.notFoundUsernames,e),n=void 0;e.length>x&&(n=r.t("settings.staff.errors.limit",{count:x})),t.length>0&&(n=r.t("settings.staff.errors.notFoundValues",{users:t.join(", ")})),r.setState({error:n,hasInputValueChanged:!0,notFoundUsernames:t,staffUsernames:e})},a=n,i(r,a)}return s(t,e),_(t,[{key:"getNextState",value:function(e,t){var n=e.isUpdating,r=e.staffUsers,o=this.state.staffUsernames;if(n)return{staffUsernames:o,error:null,notFoundUsernames:[]};var i=(0,d.default)(r,function(e){return(0,g.default)(e,"username")}),s=(0,v.default)(o,function(e){return(0,y.default)(i,function(t){return t.toUpperCase()!==e.toUpperCase()})}),l=void 0;return i.length+s.length>x&&(l=this.t("settings.staff.errors.limit",{count:x})),s.length>0&&(l=this.t("settings.staff.errors.notFoundValues",{users:s.join(", ")})),{hasInputValueChanged:!1,staffUsernames:[].concat(a(i),a(s)),notFoundUsernames:s,error:l}}},{key:"render",value:function(){var e=this.props.isUpdating,t=this.state,n=t.error,r=t.hasInputValueChanged,a=t.notFoundUsernames,o=t.staffUsernames,i=(0,u.default)("staff_");return T.default.createElement(B.default,{key:"staff",title:this.t("settings.staff.title"),"data-component-name":"StaffSettings"},T.default.createElement("form",{className:"settings-form settings-form-privacy"},T.default.createElement("div",{className:"settings-field",id:i},T.default.createElement("label",{className:"settings-label"},this.t("settings.staff.labels.myStaff")),T.default.createElement("span",{className:"settings-input"},T.default.createElement(D.default,{errorValues:a,value:o,onChange:this.inputFieldChangeHandler}),this.renderIf(n,T.default.createElement(L.default,{error:{message:n},targetId:i}))))),T.default.createElement(R.default,{disabled:Boolean(n)||e||!r,onClick:this.saveButtonClickHandler,size:"large",style:"apply"},this.t("settings.save")))}}]),t}(w.default),Y={updateStaff:j.updateStaff};W.propTypes=b({currentUser:O.default.object,isLoggedIn:O.default.bool,isSucceeded:O.default.bool,isUpdating:O.default.bool,staffUsers:O.default.array,updateError:O.default.instanceOf(Error)},(0,U.getActionPropTypes)(Y));var K=function(e){var t=e.auth,n=t.currentUser,r=t.isLoggedIn,a=t.isLoggingOut,o=e.config,i=(0,H.getCurrentUserProfile)(e),s=i?(0,v.default)((0,V.getUsersByIds)(e,i.staffIds).toArray(),function(e){return!e.isDeleted}):[];return{config:o,currentUser:n,isLoggedIn:r&&!a,isUpdating:(0,H.getIsUpdating)(e,G),isSucceeded:(0,H.getIsSucceeded)(e,G),staffUsers:s,updateError:(0,H.getError)(e,G)}},q=function(e){return(0,C.bindActionCreators)(Y,e)};t.default=(0,A.connect)(K,q)(W)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(167),l=r(s),u=n(124),c=r(u),d=n(76),f=r(d),p=n(30),m=r(p),g=n(35),h=r(g),v=n(11),E=r(v),y=n(145),b=r(y),_=n(14),S=r(_),O=n(36),P=r(O),T=n(223),A=r(T),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),I=n(1),w=r(I),N=n(0),R=r(N),M=n(3),L=r(M),k=n(5),D=n(8),U=r(D),j=100,F=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.updateValue=function(){var e=r.props.onChange,t=r.state.values;e&&e(t)},r.removeItem=function(e){var t=r.state.values;r.setState({values:(0,l.default)(t,e)},r.updateValue)},r.addItem=function(e){var t=r,n=t.inputRef,a=r.state.values;(0,f.default)(e)&&(r.setState({values:(0,c.default)((0,A.default)(a,e))},r.updateValue),n.value="")},r.clickContainerHandler=function(){r.inputRef.focus()},r.handleKeyDown=function(e){var t=r,n=t.inputRef;switch(e.keyCode){case k.KEY_CODES.backspace:if(!n.value){var a=r.state.values;r.removeItem((0,b.default)(a))}break;case k.KEY_CODES.enter:r.addItem(n.value),e.preventDefault(),e.stopPropagation()}},r.pasteEventHandler=(0,P.default)(function(){if(r.inputRef){var e=r.inputRef.value;r.addItem(e)}},j),r.blurEventHandler=function(){var e=r,t=e.inputRef;t&&(t.value="")},r.renderValue=function(){var e=r.state,t=e.values,n=e.errorValues;return(0,E.default)(t,function(e){return R.default.createElement("span",{className:r.c("multiple-item",{error:(0,S.default)(n,e)}),key:e},e,R.default.createElement("div",{className:"multiple-item-remove",onClick:(0,m.default)(r.removeItem,e)},R.default.createElement(U.default,{img:"close-4",size:15})))})},i=n,o(r,i)}return i(t,e),C(t,[{key:"getNextState",value:function(e,t){return{values:e.value,errorValues:e.errorValues}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.display,a=t.size,o=this.c({input:!0},"text-"+a,r,"multiple",n);return R.default.createElement("div",{onClick:this.clickContainerHandler,className:o,"data-component-name":"MultipleInput"},this.renderValue(),R.default.createElement("input",{ref:function(t){e.inputRef=t},onKeyDown:this.handleKeyDown,onPaste:this.pasteEventHandler,onBlur:this.blurEventHandler}))}},{key:"value",get:function(){return this.state.values}}]),t}(L.default);F.contextTypes={},F.propTypes={value:w.default.array,errorValues:w.default.array,onChange:w.default.func,className:w.default.string,display:w.default.oneOf(["block","inline-block"]),size:w.default.oneOf(["default","small","medium","large"])},F.defaultProps={values:[],errorValues:[],onChange:h.default,display:"inline-block",size:"default"},t.default=F},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},u=n(0),c=r(u),d=n(151),f=r(d),p=n(23),m=r(p),g=n(51),h=n(59),v=r(h),E=n(19),y=n(382),b=r(y),_=n(27),S=function(){v.default.action({category:"industry",action:"onSignUpModelSuccess"})},O=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),v.default.action({category:"industry",action:"onSignUpModel"})}},{key:"renderMeta",value:function(){return c.default.createElement(f.default,{title:this.twl("seo.title.signup."+_.SIGNUP_USER_ROLES.MODEL),description:this.twl("seo.description.signup."+_.SIGNUP_USER_ROLES.MODEL)})}},{key:"renderReady",value:function(){return c.default.createElement("div",{className:"container island-page signup-page"},c.default.createElement(b.default,{action:{onSuccess:S},triggerSource:g.AUTH_TRIGGER_SOURCES.SIGNUP_MODEL_PAGE,type:_.SIGNUP_USER_ROLES.MODEL}))}}]),t}(m.default);O.checkAccess=E.redirectLoggedInOrWhiteLabelToIndex,t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.SignUpPage=void 0;var l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},d=n(1),f=r(d),p=n(0),m=r(p),g=n(2),h=n(4),v=n(9),E=n(151),y=r(E),b=n(23),_=r(b),S=n(51),O=n(19),P=n(382),T=r(P),A=n(27),C=(l={},s(l,A.SIGNUP_USER_ROLES.MODEL,S.AUTH_TRIGGER_SOURCES.SIGNUP_MODEL_PAGE),s(l,A.SIGNUP_USER_ROLES.STUDIO,S.AUTH_TRIGGER_SOURCES.SIGNUP_STUDIO_PAGE),s(l,A.SIGNUP_USER_ROLES.USER,S.AUTH_TRIGGER_SOURCES.SIGNUP_USER_PAGE),l),I=t.SignUpPage=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentDidMount",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.hideModal()}},{key:"getNextState",value:function(e,t){return{isDataPending:e.whiteLabelId}}},{key:"renderMeta",value:function(){var e=this.props.pageType;return m.default.createElement(y.default,{title:this.twl("seo.title.signup."+e),description:this.twl("seo.description.signup."+e)})}},{key:"renderReady",value:function(){var e=this.props.pageType;return m.default.createElement("div",{className:"container island-page signup-page","data-component-name":"SignUpPage"},m.default.createElement(T.default,{triggerSource:C[e],type:e}))}}]),t}(_.default);I.checkAccess=O.redirectToWhiteLabelSignUpPage,I.propTypes={pageType:f.default.oneOf(["user","studio","model"])};var w=function(e,t){var n=e.auth,r=e.config.whiteLabelId;return{auth:n,pageType:t.match.params.type,whiteLabelId:r}},N=function(e){return(0,h.bindActionCreators)({hideModal:v.hideModal},e)};t.default=(0,g.connect)(w,N)(I)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InjectGizmoScript=t.InjectScript=void 0;var r=n(129),a=n(106),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=function(e,t){var n=document.createElement(e);Object.keys(t).forEach(function(e){n[e]=t[e]}),document.body.appendChild(n)},s=t.InjectScript=function(e,t){var n=-1===e.indexOf(".css")?"js":"css",r="js"===n,a={js:{type:"text/javascript",async:!0,src:e},css:{href:e,rel:"stylesheet",type:"text/css"}}[n],o=r?"script":"link";if(t){var s=document.createElement("a");s.href=e;if(Array.from(document.querySelectorAll("script")).find(function(e){return e[r?"src":"href"]===s.href}))return}i(o,a)};t.InjectGizmoScript=function(){var e=(0,r.getParams)(location,!0);if(e.gizmo){var t=e.gizmo;o.default.set("gizmo",t,{expires:.5/24})}var n=o.default.get("gizmo");if(n){var a=parseInt((new Date).getTime()/1e3,10);s("https://sample.gizmovr.com/schat/"+n+"/gizmo.js?_="+a),s("https://sample.gizmovr.com/schat/"+n+"/gizmo.css?_="+a)}};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addDeveloperPanel=void 0;var a=n(0),o=r(a),i=n(137),s=r(i),l=n(2),u=n(442),c=r(u),d=n(405),f=n(1420),p=r(f),m=n(1422),g=r(m),h=n(159),v=r(h),E=n(221),y=r(E),b=t.addDeveloperPanel=function(){var e=(0,p.default)(),t=new y.default(e);v.default.setBeforeParse(function(t,n,r,a){a&&(a.debugDb||a.debugCache)&&e.dispatch((0,d.addRequestLog)(t,n,r,a))});var n=document.createElement("div");n.id="developer_panel",document.body.insertBefore(n,document.getElementById("body")),s.default.hydrate(o.default.createElement(l.Provider,{store:e},o.default.createElement(c.default,{i18n:t},o.default.createElement(g.default,null))),document.getElementById("developer_panel"))};t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=(0,l.combineReducers)({developer:v.default}),n=[c.default.withExtraArgument({Api:p.default,ApiError:d.ApiError})].concat(a((0,s.default)(g)));return(0,l.createStore)(t,e,(0,l.compose)(l.applyMiddleware.apply(void 0,a(n))))}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),s=r(i);t.default=o;var l=n(4),u=n(464),c=r(u),d=n(54),f=n(159),p=r(f),m=n(577),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m),h=n(1421),v=r(h)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.CLEAR:return o({},(0,i.clear)(e));case s.DEBUG_LOG_ENABLE:return o({},e,{isEnabled:!0});case s.FILTER_UPDATE:return o({},e,t.data);case s.LOG_ADD:var n=e.collection.slice(-100).values(),a=[t.data].concat(r(n));return o({},(0,i.replace)(e,a));case s.LOG_REMOVE:var l=(0,i.find)(e.collection,t.data.criteria);return o({},(0,i.delBy)(e,function(e){return l.get(e.id)}));default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var i=n(16),s=n(405),l=n(406),u=o({},(0,i.createCollection)({itemKey:"id"}),{currentFilterType:l.LOG_TYPES.ALL,isEnabled:!1})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(0),f=r(d),p=n(2),m=n(4),g=n(405),h=n(1423),v=r(h),E=n(406),y=n(1432),b=n(3),_=r(b),S=n(10),O=r(S),P=n(8),T=r(P),A=n(7),C=[E.LOG_TYPES.ALL,E.LOG_TYPES.CACHE,E.LOG_TYPES.DB,E.LOG_TYPES.SOCKET,E.LOG_TYPES.SOCKET_SUBSCRIBERS],I=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={isOpen:!1},r.resetLog=function(){r.props.clear()},r.changeFilter=function(e){r.props.updateFilter(e.currentTarget.value)},r.togglePanel=function(e){if(e.preventDefault(),"undefined"!=typeof document){document.getElementById("developer_panel").classList.toggle("open")}r.setState({isOpen:!r.state.isOpen})},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.state.isOpen,n=this.props,r=n.currentFilterType,a=n.debugLog,o=n.isEnabled,i="developer-panel "+(t?"open":"close");return o?f.default.createElement("div",{className:i,"data-component-name":"DeveloperPanel"},this.renderIf(t,function(){return f.default.createElement("div",null,f.default.createElement("div",{className:"developer-panel-controls"},f.default.createElement(O.default,{size:"small",onClick:e.resetLog},"Clear"),f.default.createElement("a",{onClick:e.togglePanel,className:"toggle-panel-close"},f.default.createElement(T.default,{img:"left",size:20})),f.default.createElement("div",null,C.map(function(t){return f.default.createElement("div",{className:"control-radio",key:t},f.default.createElement("input",{className:"inline-block radio radio-small",checked:r===t,id:t,name:t,onChange:e.changeFilter,size:"small",type:"radio",value:t}),f.default.createElement("label",{htmlFor:t},E.LOG_FILTER_LABELS[t]))}))),f.default.createElement("div",{className:"developer-panel-content"},a.map(function(e){return f.default.createElement(v.default,{key:"DebugResponse_"+e.id,debugLog:e})})))},function(){return f.default.createElement("a",{onClick:e.togglePanel,className:"toggle-panel-open"},f.default.createElement(T.default,{img:"left",fill:"white",size:20}))})):null}}]),t}(_.default),w={clear:g.clear,updateFilter:g.updateFilter};I.propTypes=s({currentFilterType:c.default.string.isRequired,debugLog:c.default.array.isRequired,isEnabled:c.default.bool.isRequired},(0,A.getActionPropTypes)(w)),I.contextTypes={};var N=function(e){var t=e.developer,n=t.currentFilterType,r=t.isEnabled;return{currentFilterType:n,debugLog:(0,y.getDebugLog)(e),isEnabled:r}},R=function(e){return(0,m.bindActionCreators)(w,e)};t.default=(0,p.connect)(N,R)(I)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=r(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),p=r(f),m=n(1424),g=r(m),h=n(1427),v=r(h),E=n(1428),y=r(E),b=n(3),_=r(b),S=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.toggleClickHandler=function(){var e=r.state.showParams;r.setState({showParams:!e})},r.renderContent=function(){var e=r.props.debugLog;switch(e.type){case"requestLog":return p.default.createElement("div",{key:"requestLog_"+e.id},p.default.createElement(v.default,{list:(0,l.default)(e,"request.debugCache",[])}),p.default.createElement(g.default,{list:(0,l.default)(e,"request.debugDb",[])}));case"socketLog":return p.default.createElement(y.default,{key:"socketLog_"+e.id,socket:e});case"subscribeLog":return p.default.createElement("div",{key:"subscribeLog_"+e.id},e.key);default:return null}},i=n,o(r,i)}return i(t,e),u(t,[{key:"renderHead",value:function(e){var t=this,n=e.method,r=e.name,a=e.status,o=e.time,i="status-success";return a>=400?i="status-error":a>=300&&(i="status-redirect"),p.default.createElement("div",{className:"debug-head",onClick:this.toggleClickHandler},p.default.createElement("span",{className:"debug-time"},o),this.renderIf(n,function(){return p.default.createElement("span",{className:"debug-method"},n)})," ",r,this.renderIf(a,function(){return p.default.createElement("span",{className:t.c("debug-status",i)},a)}))}},{key:"render",value:function(){var e=this.state.showParams,t=this.props.debugLog;return p.default.createElement("div",{className:"debug-response","data-component-name":"DebugResponse"},this.renderHead(t),this.renderIf(e,this.renderContent))}}]),t}(_.default);S.propTypes={debugLog:d.default.object},S.contextTypes={},t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(1425),p=r(f),m=n(3),g=r(m),h=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.renderItemRequest=function(e,t){var n=e.sql,r=e.bind,a=e.triggeredAt,o=e.file,i={minute:"numeric",second:"numeric"},s=new Date(a).toLocaleString("en-US",i);return d.default.createElement("div",{className:"debug-row",key:"DebugDB_"+t},(0,p.default)(n,/:([0-9A-Za-z]*)/g,function(e){return d.default.createElement("span",{className:"debug-params"},"'",r[e],"'")}),d.default.createElement("div",{className:"debug-details"},"file: ",o),d.default.createElement("div",{className:"debug-details"},"time: ",s))},i=n,o(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.list;return e.length?d.default.createElement("div",{className:"debug-box","data-component-name":"DebugDB"},e.map(this.renderItemRequest)):null}}]),t}(g.default);h.propTypes={list:u.default.array},h.defaultProps={list:[]},t.default=h},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),o=r(a),i=n(26),s=r(i),l=n(1),u=r(l),c=n(0),d=r(c),f=function e(t){return(0,s.default)(t)?t.map(function(t){return e(t)}):(0,o.default)(t)?Object.keys(t).map(function(e){return e+":"+t[e]+"\n"}):t},p=function(e,t){var n=e.method,r=e.parameters,a=e.triggeredAt,o={minute:"numeric",second:"numeric"},i=new Date(a).toLocaleString("en-US",o);return d.default.createElement("div",{className:"debug-row",key:"DebugCache_"+t},d.default.createElement("div",{className:"debug-row-name"},n),d.default.createElement("span",{className:"debug-params"},f(r).join("\n")),d.default.createElement("div",{className:"debug-details"},"time: ",i))},m=function(e){var t=e.list;return t&&t.length>0?d.default.createElement("div",{className:"debug-box"},t.map(p)):null};m.propTypes={list:u.default.array},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(0),d=r(c),f=n(3),p=r(f),m=n(1429),g=r(m),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.socket.params;return d.default.createElement("div",{className:"debug-box","data-component-name":"DebugSocket"},d.default.createElement("div",{className:"debug-params socket"},d.default.createElement(g.default,{params:e})))}}]),t}(p.default);h.propTypes={socket:u.default.object},h.defaultProps={socket:[]},h.contextTypes={},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1430),l=r(s),u=n(105),c=r(u),d=n(50),f=r(d),p=n(128),m=r(p),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),v=r(h),E=n(0),y=r(E),b=n(3),_=r(b),S=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),g(t,[{key:"renderParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if((0,f.default)(e))return this.renderObject(e,t);var n=this.c({"debug-params-number":(0,m.default)(e),"debug-params-string":(0,c.default)(e)});return y.default.createElement("span",{className:n},e)}},{key:"renderObject",value:function(e,t){var n=this;return y.default.createElement("div",null,Object.keys(e).map(function(r){return y.default.createElement("div",null,(0,l.default)(" ",t),y.default.createElement("span",{className:"debug-params-key"},r,":")," ",n.renderParams(e[r],t+1))}))}},{key:"render",value:function(){var e=this.props.params;return y.default.createElement("span",{"data-component-name":"RenderParams"},this.renderParams(e))}}]),t}(_.default);S.propTypes={params:v.default.any},S.defaultProps={params:[]},S.contextTypes={},t.default=S},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDebugLog=void 0;var a=n(1433),o=r(a),i=n(6),s=r(i),l=n(32),u=n(406),c=u.LOG_TYPES.ALL,d=u.LOG_TYPES.CACHE,f=u.LOG_TYPES.DB,p=u.LOG_TYPES.REQUEST,m=u.LOG_TYPES.SOCKET,g=u.LOG_TYPES.SOCKET_SUBSCRIBERS,h=function(e){return e.developer.collection},v=function(e){return e.developer.currentFilterType},E=function(e,t){return t?function(n){return n.type===e&&(0,s.default)(n,t)}:function(t){return t.type===e}};t.getDebugLog=(0,l.createSelector)([h,v],function(e,t){var n=void 0;switch(t){case c:n=e;break;case d:n=e.filter(E(p,"request.debugCache.length")).map(function(e){return(0,o.default)(e,"request.debugDb"),e});break;case f:n=e.filter(E(p,"request.debugDb.length")).map(function(e){return(0,o.default)(e,"request.debugCache"),e});break;case m:n=e.filter(E(m));break;case g:n=e.filter(E(g));break;default:return[]}return n.toArray()})}],[653]);
//# sourceMappingURL=common.3ec8b3b8e8ddf0d91773.js.map